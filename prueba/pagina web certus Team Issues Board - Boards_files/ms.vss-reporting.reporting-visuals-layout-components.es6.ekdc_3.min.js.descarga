"use strict";define("Reporting/Visuals/LayoutComponents",["require","exports","react","Reporting/Visuals/VisualMessages/NoDataMessage","VSS/Features/Charts/Chart","VSS/Platform/Layout","Reporting/DataQuality/DataQualityService","Reporting/Visuals/VisualHeader","VSS/Reflux/Action","VSS/Reflux/Store"],(function(e,t,a,s,r,n,i,l,o,c){var d,m,u,g,p,h,D;d=t[D="Resources"]={},t[D].LayoutEngine_NoLayoutError="No layout was supplied for requested size.",function(e){m=t[e]={},function(e){e[e.title=0]="title",e[e.subtitle=1]="subtitle",e[e.scalar=2]="scalar",e[e.submetrics=3]="submetrics",e[e.chart=4]="chart"}(t[e].DemandType||(t[e].DemandType={}))}("WidgetsDemandsDemandType"),t.WidgetsDemandsIDemandHandler={},function(e){u=t[e]={};t[e].ChartComponentProps=class{};class i extends n.VssComponent{render(){return a.createElement(r.Chart,Object.assign({},this.updateChartOptions(Object.assign({},this.props.chartOptions))))}updateChartOptions(e){return e}}t[e].ChartComponent=i;class l extends i{updateChartOptions(e){return e.xAxis=e.xAxis||{},e.xAxis.labelsEnabled=!1,e.xAxis.markingsEnabled=!1,e.yAxis=e.yAxis||{},e.yAxis.labelsEnabled=!1,e.yAxis.markingsEnabled=!1,e.legend=e.legend||{},e.legend.enabled=!1,e.tooltip=e.tooltip||{},e.tooltip.onlyShowFocusedSeries=!0,e}}t[e].ChromelessChartComponent=l;class o extends i{updateChartOptions(e){return e.xAxis={},e.xAxis.labelsEnabled=!1,e.xAxis.markingsEnabled=!1,e.xAxis.retainAxisLine=!0,e.yAxis={},e.yAxis.labelsEnabled=!1,e.yAxis.markingsEnabled=!1,e.yAxis.retainAxisLine=!0,e.legend={},e.legend.enabled=!1,e.tooltip={},e.tooltip.enabled=!1,e.suppressMargin=!0,e.suppressAnimation=!0,e}}t[e].MinimalChromelessChartComponent=o;t[e].default=class{static registerDemands(e){e.registerDemand(m.DemandType.chart)}static render(e){return e?a.createElement(i,Object.assign({},e)):a.createElement(s.NoDataMessage,{visualTitle:"",size:{height:300,width:300}})}static renderChromeless(e){return null!=e?a.createElement(l,Object.assign({},e)):null}static renderMinimalChromeless(e){return e?a.createElement(o,Object.assign({},e)):a.createElement(s.NoDataMessage,{visualTitle:"",size:{height:40,width:140}})}}}("WidgetsChartComponent"),function(e){g=t[e]={};t[e].ScalarComponentProps=class{};t[e].ScalarHorizontalComponent=e=>{const t=r.getScalarValueSize(e.value),n=e.value?"string"==typeof e.value?e.value:Number(+e.value).toLocaleString(navigator.language):e.value,i=t+"-scalar-size";return t===s[s.small]?a.createElement("div",{className:"scalar-component "+i+" horizontal-mode"},a.createElement("div",{className:"scalar-component-value "+i},n),a.createElement("div",{className:"scalar-component-text "+i},a.createElement("div",{className:"scalar-component-description "+i},e.measure+", "+e.description))):a.createElement("div",{className:"scalar-component "+i+" horizontal-mode"},a.createElement("div",{className:"scalar-component-text "+i},a.createElement("div",{className:"scalar-component-measure "+i},e.measure),a.createElement("div",{className:"scalar-component-description "+i},e.description)),a.createElement("div",{className:"scalar-component-value "+i},n))};t[e].ScalarVerticalComponent=e=>{const t=r.getScalarValueSize(e.value)+"-scalar-size";return a.createElement("div",{className:"scalar-component vertical-mode"},a.createElement("div",{className:"scalar-component-value "+t},e.value),a.createElement("div",{className:"scalar-component-text"},a.createElement("div",{className:"scalar-component-measure"},e.measure),a.createElement("div",{className:"scalar-component-description"},e.description)))};var s;t[e].default=class{static registerDemands(e){e.registerDemand(m.DemandType.scalar)}static renderScalarHorizontalComponent(s){return null!=s?a.createElement(t[e].ScalarHorizontalComponent,Object.assign({},s)):null}static renderScalarVerticalComponent(s){return null!=s?a.createElement(t[e].ScalarVerticalComponent,Object.assign({},s)):null}},function(e){e[e.small=0]="small",e[e.large=1]="large"}(s||(s={}));class r{static getScalarValueSize(e){return e&&e.toString().length>4?s[s.small]:s[s.large]}}}("WidgetsScalarComponent"),function(e){p=t[e]={};t[e].SubmetricsComponentProps=class{};t[e].SubmetricsItem=class{};t[e].SubmetricsComponent=e=>{const t=[];return e.items&&e.items.forEach((e=>{t.push(a.createElement("div",{className:"submetrics-item",key:e.label},a.createElement("div",{className:"submetrics-label"},e.onClick?a.createElement("a",{className:"bolt-link",onClick:e.onClick},e.label):e.label),a.createElement("div",{className:"submetrics-value"},e.value))),t.push(" ")})),a.createElement("div",{className:"submetrics-component"},t)};t[e].default=class{static registerDemands(e){e.registerDemand(m.DemandType.submetrics)}static renderSubmetricsComponent(s){return s?a.createElement(t[e].SubmetricsComponent,Object.assign({},s)):null}}}("WidgetsSubmetricsComponent"),function(e){var a;t[e]={},function(e){e[e.NoData=0]="NoData",e[e.AxFaultIn=1]="AxFaultIn",e[e.SetIterationDates=2]="SetIterationDates",e[e.Unconfigured=3]="Unconfigured",e[e.WidgetError=4]="WidgetError",e[e.MissingPermissions=5]="MissingPermissions"}(a=t[e].MessageType||(t[e].MessageType={})),t[e].isErrorMessageType=function(e){return e===a.WidgetError},t[e].packMessageAsState=function(e,t){return{title:{text:""},subtitle:void 0,scalarData:void 0,chartData:void 0,submetricsData:void 0,showMessage:!0,messageType:e,message:t}}}("WidgetsLayoutState"),function(e){h=t[e]={};t[e].ScalarLayoutFactory=class{registerDemands(e){s.registerDemands(e),g.default.registerDemands(e)}render(e){return a.createElement("div",{className:"scalar-layout"},a.createElement("div",{className:"header-row"},s.render(e)),g.default.renderScalarVerticalComponent(e.scalarData))}};t[e].ScalarAndChromelessChartLayoutFactory=class{registerDemands(e){s.registerDemands(e),g.default.registerDemands(e),u.default.registerDemands(e)}render(e){return a.createElement("div",{className:"scalar-and-chart-layout"},a.createElement("div",{className:"header-row"},s.render(e),g.default.renderScalarHorizontalComponent(e.scalarData)),u.default.renderChromeless(e.chartData))}};t[e].MinimalChartLayoutFactory=class{registerDemands(e){u.default.registerDemands(e)}render(e){return a.createElement("div",{className:"minimal-chart-layout"},u.default.renderMinimalChromeless(e.chartData))}};t[e].ScalarAndChartLayoutFactory=class{registerDemands(e){s.registerDemands(e),g.default.registerDemands(e),u.default.registerDemands(e)}render(e){return a.createElement("div",{className:"scalar-and-chart-layout"},a.createElement("div",{className:"header-row"},s.render(e),g.default.renderScalarHorizontalComponent(e.scalarData)),u.default.render(e.chartData))}};t[e].ScalarAndSubmetricsAndChartLayoutFactory=class{registerDemands(e){s.registerDemands(e),g.default.registerDemands(e),p.default.registerDemands(e),u.default.registerDemands(e)}render(e){return a.createElement("div",{className:"scalar-and-submetrics-and-chart-layout"},a.createElement("div",{className:"header-row"},s.render(e),g.default.renderScalarHorizontalComponent(e.scalarData)),p.default.renderSubmetricsComponent(e.submetricsData),u.default.render(e.chartData))}};class s{static registerDemands(e){e.registerDemand(m.DemandType.title),e.registerDemand(m.DemandType.subtitle)}static render(e){return i.default.evaluate(e.warningsData)?a.createElement(l.VisualHeader,{title:e.title.text,hideTitle:e.title.hideTitle,subtitle:null!=e.subtitle?e.subtitle.text:void 0,dataQualityWarning:i.default.evaluate(e.warningsData)}):a.createElement(l.VisualHeader,{title:e.title.text,hideTitle:e.title.hideTitle,subtitle:null!=e.subtitle?e.subtitle.text:void 0})}}}("WidgetsLayoutComponents"),function(e){t[e]={};class a{static getWidgetDimensionAsPixels(e){return 160+170*(e-1)}static oneColumnWide(){return{left:1,top:1,right:a.getWidgetDimensionAsPixels(2)-1,bottom:a.maxPixelSize}}static minimal(){return{left:1,top:1,right:a.getWidgetDimensionAsPixels(2)-1,bottom:a.maxPixelSize}}static oneRowTallAtLeastTwoColumnsWide(){return{left:a.getWidgetDimensionAsPixels(2),top:1,right:a.maxPixelSize,bottom:a.getWidgetDimensionAsPixels(2)-1}}static atLeastTwoByTwo(){return{left:a.getWidgetDimensionAsPixels(2),top:a.getWidgetDimensionAsPixels(2),right:a.maxPixelSize,bottom:a.maxPixelSize}}}t[e].DefaultLayoutRects=a,a.maxPixelSize=a.getWidgetDimensionAsPixels(50);class s{constructor(e,t){this.acceptedRect=e,this.factoryMethod=t}isDesiredSizeSupported(e){return r.isSizeInsideRect(e,this.acceptedRect)}getFactory(){return this.factoryMethod()}}t[e].SimpleLayoutMapping=s;class r{static isSizeInsideRect(e,t){return t.left<=e.width&&t.right>=e.width&&t.top<=e.height&&t.bottom>=e.height}static getDefaultMappings(){return[new s(a.oneColumnWide(),(()=>new h.ScalarLayoutFactory)),new s(a.oneRowTallAtLeastTwoColumnsWide(),(()=>new h.ScalarAndChromelessChartLayoutFactory)),new s(a.atLeastTwoByTwo(),(()=>new h.ScalarAndChartLayoutFactory))]}}t[e].DefaultComponentLayouts=r;t[e].ChartAndSubmetricComponentLayouts=class extends r{static getDefaultMappings(){return[new s(a.oneColumnWide(),(()=>new h.ScalarLayoutFactory)),new s(a.oneRowTallAtLeastTwoColumnsWide(),(()=>new h.ScalarAndChromelessChartLayoutFactory)),new s(a.atLeastTwoByTwo(),(()=>new h.ScalarAndSubmetricsAndChartLayoutFactory))]}};t[e].MinimalChartAndLightBoxAndReportComponentLayouts=class extends r{static getDefaultMappings(){return[new s(a.minimal(),(()=>new h.MinimalChartLayoutFactory)),new s(a.oneRowTallAtLeastTwoColumnsWide(),(()=>new h.ScalarAndChromelessChartLayoutFactory)),new s(a.atLeastTwoByTwo(),(()=>new h.ScalarAndSubmetricsAndChartLayoutFactory))]}};t[e].ComponentLayoutEngine=class{selectLayoutFactory(e,t){for(let a=0;a<t.length;a++){const s=t[a];if(s.isDesiredSizeSupported(e))return s.getFactory()}throw new Error(d.LayoutEngine_NoLayoutError)}}}("WidgetsComponentLayoutEngine"),function(e){t[e]={};t[e].DemandTracker=class{constructor(){this.reset()}registerDemand(e){this.isDemandPresent(e)||this.demands.push(e)}getDemands(){return this.demands.slice()}isDemandPresent(e){return this.demands.indexOf(e)>=0}reset(){this.demands=[]}}}("WidgetsDemandsDemandTracker"),t.WidgetsIDataManager={},function(e){t[e]={};t[e].LayoutActions=class{constructor(){this.ProvideData=new o.Action}}}("WidgetsLayoutActions"),function(e){t[e]={};class a extends c.Store{constructor(e,t){super(""),this._actions=e,this._state=t,this._receivedDataHandler=e=>this._receivedData(e),this._actions.ProvideData.addListener(this._receivedDataHandler)}getState(){return this._state}setState(e){this._state=e}_receivedData(e){this._state=e,this.emitChanged()}}t[e].LayoutStore=a}("WidgetsLayoutStore")}),["Resources","Widgets/Demands/DemandType","Widgets/Demands/IDemandHandler","Widgets/ChartComponent","Widgets/ScalarComponent","Widgets/SubmetricsComponent","Widgets/LayoutState","Widgets/LayoutComponents","Widgets/ComponentLayoutEngine","Widgets/Demands/DemandTracker","Widgets/IDataManager","Widgets/LayoutActions","Widgets/LayoutStore"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-reporting.reporting-visuals-layout-components"}}));