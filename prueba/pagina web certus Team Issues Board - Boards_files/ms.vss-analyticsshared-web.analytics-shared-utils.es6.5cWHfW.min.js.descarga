"use strict";define("Analytics/Shared/Utils",["require","exports","VSS/Core/Util/String"],(function(t,r,e){var o,n,i;o=r[i="Resources"]={},r[i].DurationFormatForMilliSeconds="{0} milliseconds",r[i].DurationFormatForSeconds="{0} seconds",r[i].DurationFormatForMinutes="{0} minutes",r[i].DurationFormatForHours="{0} hours",r[i].DurationFormatForDays="{0} days",r[i].ShortDurationFormatForMilliSeconds="{0}ms",r[i].ShortDurationFormatForSeconds="{0}s",r[i].ShortDurationFormatForMinutes="{0} mins",r[i].ShortDurationFormatForHours="{0} hours",r[i].ShortDurationFormatForDays="{0} days",function(t){let e,o;function i(){return o||(o={name:"en-US",numberFormat:{CurrencyDecimalDigits:2,CurrencyDecimalSeparator:".",CurrencyGroupSizes:[3],NumberGroupSizes:[3],PercentGroupSizes:[3],CurrencyGroupSeparator:",",CurrencySymbol:"$",NaNSymbol:"NaN",CurrencyNegativePattern:0,NumberNegativePattern:1,PercentPositivePattern:0,PercentNegativePattern:0,NegativeInfinitySymbol:"-Infinity",NegativeSign:"-",NumberDecimalDigits:2,NumberDecimalSeparator:".",NumberGroupSeparator:",",CurrencyPositivePattern:0,PositiveInfinitySymbol:"Infinity",PositiveSign:"+",PercentDecimalDigits:2,PercentDecimalSeparator:".",PercentGroupSeparator:",",PercentSymbol:"%",PerMilleSymbol:"â€°",NativeDigits:["0","1","2","3","4","5","6","7","8","9"],DigitSubstitution:1},numberShortForm:{QuantitySymbols:["K","M","B"],NumberGroupSize:1e3,ThousandSymbol:"K"}}),o}function a(){return e||(e=i()),e}n=r[t]={},r[t].getInvariantCulture=i,r[t].getCurrentCulture=a,r[t].getCurrentCultureName=function(){return a().name},r[t].getNumberFormat=function(){return a().numberFormat},r[t].getNumberShortForm=function(){return a().numberShortForm}}("Culture"),function(t){r[t]={};r[t].DateSKParser=class{static parseDateSKAsDateString(t){if(null!=t){const r=t.toString();return`${r.substr(0,4)}-${r.substr(4,2)}-${r.substr(6,2)}`}return""}static dateStringToDateSK(t){return+t.split("-").join("")}static convertDateToDateString(t){const r=t.getFullYear(),e=t.getMonth()+1,o=t.getDate();return[r,e<=9?"0"+e:e,o<=9?"0"+o:o].join("-")}static parseDateSKAsDate(t){return new Date(this.parseDateSKAsDateString(t))}}}("DateSKParser"),function(t){function e(){return new Date}function o(t,r,o=!1){let i=e();return i.setTime(t.getTime()+864e5*r),o&&(i=n(t,i)),i}function n(t,r,e){let n=r;null!=e&&(n=e);const i=t.getTimezoneOffset(),a=r.getTimezoneOffset();return i!==a&&(n=o(n,(a-i)/1440)),n}r[t]={},r[t].getDate=e,r[t].shiftToUTC=function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())},r[t].addDays=o,r[t].adjustOffsetForTimes=n,r[t].convertDateToDateString=function(t){const r=t.getFullYear(),e=t.getMonth()+1,o=t.getDate();return[r,e<=9?"0"+e:e,o<=9?"0"+o:o].join("-")}}("DateUtils"),function(t){r[t]={},r[t].formatDuration=function(t){const r={shortDuration:"",duration:""},n=t/1e3;if(n<2)return r.shortDuration=(0,e.format)(o.ShortDurationFormatForMilliSeconds,Math.round(t)),r.duration=(0,e.format)(o.DurationFormatForMilliSeconds,Math.round(t)),r;const i=n/60;if(i<2)return r.shortDuration=(0,e.format)(o.ShortDurationFormatForSeconds,Math.round(n)),r.duration=(0,e.format)(o.DurationFormatForSeconds,Math.round(n)),r;const a=i/60;if(a<2)return r.shortDuration=(0,e.format)(o.ShortDurationFormatForMinutes,Math.round(i)),r.duration=(0,e.format)(o.DurationFormatForMinutes,Math.round(i)),r;const u=a/24;return u<2?(r.shortDuration=(0,e.format)(o.ShortDurationFormatForHours,Math.round(a)),r.duration=(0,e.format)(o.DurationFormatForHours,Math.round(a)),r):(r.shortDuration=(0,e.format)(o.ShortDurationFormatForDays,Math.round(u)),r.duration=(0,e.format)(o.DurationFormatForDays,Math.round(u)),r)}}("Duration"),function(t){function e(t,r){if(0===t)return 0;const e=Math.round(r/t*1e4)/100;return r>0&&0===e?.01:r<t&&100===e?99.99:e}function o(t,r,e){for(let o=t.length;o<r;o++)t=e?"0"+t:t+"0";return t}function i(t,r,e){let i,a,u,s,m,c,l,S,D,g=t.toString(),f="";if(a=e?e.numberFormat:n.getNumberFormat(),u=g.split(/e/i),g=u[0],i=u.length>1?parseInt(u[1],10):0,u=g.split("."),g=u[0],f=u.length>1?u[1]:"",i>0?(f=o(f,i,!1),g+=f.slice(0,i),f=f.substr(i)):i<0&&(i=-i,g=o(g,i+1,!0),f=g.slice(-i,g.length)+f,g=g.slice(0,-i)),f.length>0&&(f=a.NumberDecimalSeparator+f),!0===r){for(s=a.NumberGroupSizes,m=a.NumberGroupSeparator,c=s[0],l=1,S=g.length-1,D="";S>=0;){if(0===c||c>S)return D.length>0?g.slice(0,S+1)+m+D+f:g.slice(0,S+1)+f;D=D.length>0?g.slice(S-c+1,S+1)+m+D:g.slice(S-c+1,S+1),S-=c,l<s.length&&(c=s[l],l++)}return g.slice(0,S+1)+m+D+f}return g+f}r[t]={},r[t].getPercentage=e,r[t].getPercentageVariation=function(t,r){return e(t,Math.abs(t-r))},r[t].toDecimalLocaleString=i,r[t].formatAbbreviatedNumber=function(t,r){let e,o,a;const u=(t,r,e,o)=>{if(t){return(r.toFixed(e)+t).replace(".",o)}return i(r,!1)};if(e="",r?(o=r.numberShortForm,a=r.numberFormat.NumberDecimalSeparator):(o=n.getNumberShortForm(),a=n.getNumberFormat().NumberDecimalSeparator),t<1e3?e=u("",t,0,""):t/1e3<10&&(e=u(o.ThousandSymbol,t/1e3,1,a)),t/o.NumberGroupSize>1){for(let r=0;r<o.QuantitySymbols.length;r++){const n=Math.pow(o.NumberGroupSize,r+1);if(t/n<10){e=u(o.QuantitySymbols[r],t/n,1,a);break}if(t/n<o.NumberGroupSize){e=u(o.QuantitySymbols[r],t/n,0,"");break}}""==e&&(e=t.toExponential(0))}return e}}("Number"),function(t){r[t]={},r[t].getDefinitionIdFromUrl=function(t){const r=t.getService("IVssHistoryService").getState();return parseInt(r[e],10)||0},r[t].getContextTypeFromUrl=function(t){return t.getService("IVssHistoryService").getState()[o]||"build"};const e="definitionId",o="contextType"}("URLHelper")}),["Resources","Culture","DateSKParser","DateUtils","Duration","Number","URLHelper"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-analyticsshared-web.analytics-shared-utils"}}));