"use strict";define("VSS/Redux/Deprecated",["require","exports","redux/Utils/ActionHelper","VSS/Redux/Utils/ObservableUtils","redux-saga","VSSUI/Utilities/Filter","immer","Reselect","react","react-redux","redux-dynamic-modules","redux-dynamic-modules-saga","VSS/Redux/Modules/Navigation/index","VSS/Redux/Modules/Telemetry/index","VSS/Redux/Modules/TTIMonitor/index","VSS/Redux/Modules/VSSPageData/index","VSS/Redux/Modules/QueuedActions/index"],(function(e,t,i,a,r,n,o,u,s,S,c,d,l,w,V,b,h){var g,p,f,H,v,x,_;g=t[_="HubViewStateHubViewStateActions"]={},t[_].HubViewStateActions={initialize:(e,t,a)=>(0,i.createAction)("HubViewState/Initialize",{pivotKey:e,filterState:t,viewOptions:a}),currentPivotChanged:e=>(0,i.createAction)("HubViewState/CurrentPivotChanged",e),filterStateChanged:e=>(0,i.createAction)("HubViewState/FilterStateChanged",e),viewOptionsChanged:e=>(0,i.createAction)("HubViewState/ViewOptionsChanged",e)},p=t.HubViewStateHubViewStateContracts={},function(e){f=t[e]={},t[e].hubViewStateSaga=function*(e){const{selectedPivot:t,filter:i,viewOptions:o}=e;yield r.effects.put(g.HubViewStateActions.initialize(t.value,i.getState(),o.getViewOptions())),yield r.effects.fork((0,a.createObservableSaga)(e.filter,{[n.FILTER_CHANGE_EVENT]:g.HubViewStateActions.filterStateChanged})),yield r.effects.fork((0,a.createObservableSaga)(e.selectedPivot,g.HubViewStateActions.currentPivotChanged)),yield r.effects.fork((0,a.createObservableSaga)(e.viewOptions,g.HubViewStateActions.viewOptionsChanged))}}("HubViewStateHubViewStateSaga"),function(e){H=t[e]={},t[e].hubViewStateReducer=function(e,t){return e=e||{currentFilterState:{},currentPivot:"",currentViewOptions:{}},(0,o.default)(e,(i=>{switch(t.type){case"HubViewState/Initialize":{const{pivotKey:e,filterState:a,viewOptions:r}=t.payload;i.currentPivot=e,i.currentFilterState=a,i.currentViewOptions=r;break}case"HubViewState/CurrentPivotChanged":i.currentPivot=t.payload;break;case"HubViewState/FilterStateChanged":i.currentFilterState=Object.assign(Object.assign({},e.currentFilterState),t.payload);break;case"HubViewState/ViewOptionsChanged":i.currentViewOptions=Object.assign(Object.assign({},e.currentViewOptions),t.payload)}}))}}("HubViewStateHubViewStateReducer"),function(e){v=t[e]={},t[e].getHubViewStateModule=function(e){return{id:"hub-view-state",reducerMap:{hubViewState:H.hubViewStateReducer},sagas:[{saga:f.hubViewStateSaga,argument:e}]}}}("HubViewStateHubViewStateModule"),function(e){function i(e){if(e&&e.hubViewState)return e.hubViewState.currentFilterState}x=t[e]={},t[e].getCurrentPivot=function(e){if(e&&e.hubViewState)return e.hubViewState.currentPivot},t[e].isFilterActive=u.createSelector([i],(e=>{let t=!1;if(e)for(const i in e){const a=e[i];if(a&&a.value&&a.value.length){t=!0;break}}return t})),t[e].getCurrentFilterState=i,t[e].getCurrentViewOptions=function(e){if(e&&e.hubViewState)return e.hubViewState.currentViewOptions}}("HubViewStateHubViewStateSelectors"),function(e){t[e]={},__exportStar(g,t[e]),__exportStar(p,t[e]),__exportStar(v,t[e]),__exportStar(H,t[e]),__exportStar(f,t[e]),__exportStar(x,t[e])}("HubViewStateindex"),function(e){t[e]={};class i extends s.Component{constructor(e,t){super(e,t),this._mounted=!1,this._onSagaError=e=>{this._caughtSagaError=e,this._mounted&&this.forceUpdate()};const{initialState:i,sagaContext:a,modules:r,scenarioName:n,hubViewState:o,ttiSplitTimingName:u}=this.props;this.state={};const s=[l.NavigationModule,(0,w.getTelemetryModule)(n),(0,V.getTTIMonitorModule)(u),b.VSSPageDataModule,h.QueuedActionsModule];o&&s.push((0,v.getHubViewStateModule)(o)),s.push(...r),this._store=(0,c.createStore)({initialState:i,enhancers:[],extensions:[(0,d.getSagaExtension)(a,this._onSagaError)]},...s)}render(){return this._throwIfSagaFailed(),s.createElement(S.Provider,{store:this._store},this.props.children)}componentWillUnmount(){this._store&&this._store.dispose(),this._store=void 0}componentDidMount(){this._mounted=!0,this._throwIfSagaFailed()}componentDidUpdate(){this._throwIfSagaFailed()}_throwIfSagaFailed(){if(this._caughtSagaError)throw this._caughtSagaError}}t[e].RootProvider=i}("RootProvider")}),["HubViewState/HubViewStateActions","HubViewState/HubViewStateContracts","HubViewState/HubViewStateSaga","HubViewState/HubViewStateReducer","HubViewState/HubViewStateModule","HubViewState/HubViewStateSelectors","HubViewState/index","RootProvider"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-features.redux-deprecated"}}));