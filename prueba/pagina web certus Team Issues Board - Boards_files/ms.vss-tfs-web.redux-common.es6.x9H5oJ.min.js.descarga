"use strict";define("Tfs/ReduxCommon",["require","exports","redux/Utils/ActionHelper","immer","Reselect","redux-saga"],(function(e,a,t,o,s,n){var i,c,d,m,r,u,l,T,g,f,A,C,P,S;a.ModulesCommandViewActionCommandViewActionContracts={},i=a[S="ModulesCommandViewActionCommandViewActionActions"]={},a[S].CommandViewActionActions={addCommands:e=>(0,t.createAction)("CommandViewActionActionTypes/AddCommands",e),addViewActions:e=>(0,t.createAction)("CommandViewActionActionTypes/AddViewActions",e),toggleViewActionDisableState:e=>(0,t.createAction)("CommandViewActionActionTypes/ToggleViewActionDisableState",e),toggleCommandsDisableState:e=>(0,t.createAction)("CommandViewActionActionTypes/ToggleCommandDisableState",e)},function(e){function t(e,a){e.forEach((e=>{const{key:t}=e;a[t]&&(a[t].disabled=!a[t].disabled)}))}c=a[e]={},a[e].commandViewActionReducer=function(e,a){return e=e||{commands:{},viewActions:{}},(0,o.default)(e,(e=>{switch(a.type){case"CommandViewActionActionTypes/AddCommands":e.commands=Object.assign(Object.assign({},e.commands||[]),a.payload);break;case"CommandViewActionActionTypes/AddViewActions":e.viewActions=a.payload;break;case"CommandViewActionActionTypes/ToggleCommandDisableState":t(a.payload,e.commands);break;case"CommandViewActionActionTypes/ToggleViewActionDisableState":t(a.payload,e.viewActions)}}))}}("ModulesCommandViewActionCommandViewActionReducer"),function(e){a[e]={},a[e].getCommandViewModule=function(e,a){return{id:"command-viewaction-module",reducerMap:{commandsState:c.commandViewActionReducer},initialActions:[i.CommandViewActionActions.addCommands(e),i.CommandViewActionActions.addViewActions(a)]}}}("ModulesCommandViewActionCommandViewActionModule"),function(e){d=a[e]={},a[e].TeamActionsCreator={beginLoadTeams:()=>(0,t.createAction)("Teams/BeginLoadTeams"),loadTeamsRequested:()=>(0,t.createAction)("Teams/LoadTeamsRequested"),loadTeamsSucceeded:e=>(0,t.createAction)("Teams/LoadTeamsSuceeded",e),loadTeamsFailed:e=>(0,t.createAction)("Teams/LoadTeamsFailed",e)}}("ModulesTeamsTeamActions"),a.ModulesTeamsTeamContracts={},function(e){m=a[e]={},a[e].teamReducer=function(e,a){return e=e||{loading:!1},(0,o.default)(e,(e=>{switch(a.type){case"Teams/BeginLoadTeams":e.loading=!0;break;case"Teams/LoadTeamsFailed":e.error=a.payload,e.loading=!1;break;case"Teams/LoadTeamsSuceeded":e.teams=a.payload,e.loading=!1}}))}}("ModulesTeamsTeamReducer"),function(e){function t(e){return e.teamState}r=a[e]={},a[e].getTeamState=t,a[e].getTeams=s.createSelector(t,(e=>e.teams)),a[e].areTeamsLoading=s.createSelector(t,(e=>e.loading))}("ModulesTeamsTeamSelectors"),function(e){u=a[e]={},a[e].TEAM_PAGE_SIZE_KEY="Agile/TeamSource/TeamPageSize",a[e].TEAM_PAGE_SIZE=1e3;function t(e,a=500,o=0){return e(a,o).then((s=>s.length<a?s:t(e,a,o+s.length).then((e=>s.concat(e)))))}a[e].TeamSource=class{constructor(e){this._pageContext=e}fetchTeamsForCurrentProject(e){const a=this._pageContext.getService("ITfsPageService").getData();if(a&&a.project){const t=a.project.id;return this.fetchTeamsForProject(t,e)}return Promise.reject(new Error("Current Project could not be determined"))}fetchTeamsForProject(o,s){if(null==s){s=this._getSettingsService().getEntry(a[e].TEAM_PAGE_SIZE_KEY,1)||a[e].TEAM_PAGE_SIZE}const n=this._getRestClient();return t(((e,a)=>n.getTeams(o,!1,e,a)),s)}_getRestClient(){return this._pageContext.getRestClient("ICoreRestClient")}_getSettingsService(){return this._pageContext.getService("ISettingsService")}}}("ModulesTeamsTeamSource"),function(e){function*t(){if(!(yield n.effects.select(r.getTeams))){yield n.effects.put(d.TeamActionsCreator.beginLoadTeams());try{const e=yield n.effects.getContext("pageContext"),a=new u.TeamSource(e),t=yield n.effects.call([a,a.fetchTeamsForCurrentProject]);yield n.effects.put(d.TeamActionsCreator.loadTeamsSucceeded(t))}catch(e){yield n.effects.put(d.TeamActionsCreator.loadTeamsFailed(e))}}}l=a[e]={},a[e].teamSaga=function*(){yield n.effects.takeLatest("Teams/LoadTeamsRequested",t)},a[e].loadTeams=t}("ModulesTeamsTeamSaga"),function(e){a[e]={},a[e].getTeamModule=function(){return{id:"teams",reducerMap:{teamState:m.teamReducer},sagas:[l.teamSaga]}}}("ModulesTeamsTeamsModule"),function(e){T=a[e]={},a[e].TfsPageDataActionsCreator={tfsPageDataInitialized:e=>(0,t.createAction)("TfsPageData/Initialized",e)}}("ModulesTfsPageDataTfsPageDataActions"),g=a.ModulesTfsPageDataTfsPageDataContracts={},function(e){f=a[e]={},a[e].tfsPageDataReducer=function(e,a){return(0,o.default)(e||null,(e=>{if("TfsPageData/Initialized"===a.type)return a.payload}))}}("ModulesTfsPageDataTfsPageDataReducer"),function(e){A=a[e]={},a[e].tfsPageDataSaga=function*(){const e=yield n.effects.getContext("pageContext"),a=yield n.effects.call([e,e.getService],"ITfsPageService");yield n.effects.put(T.TfsPageDataActionsCreator.tfsPageDataInitialized(a.getData()))}}("ModulesTfsPageDataTfsPageDataSaga"),function(e){C=a[e]={},a[e].getTfsPageDataModule=function(){return{id:"tfspagedata",reducerMap:{tfsPageData:f.tfsPageDataReducer},sagas:[A.tfsPageDataSaga]}}}("ModulesTfsPageDataTfsPageDataModule"),function(e){P=a[e]={},a[e].getTfsPageDataState=function(e){return e.tfsPageData},a[e].currentProject=function(e){return e.tfsPageData?e.tfsPageData.project:void 0}}("ModulesTfsPageDataTfsPageDataSelectors"),function(e){a[e]={},__exportStar(T,a[e]),__exportStar(g,a[e]),__exportStar(C,a[e]),__exportStar(f,a[e]),__exportStar(A,a[e]),__exportStar(P,a[e])}("ModulesTfsPageDataTfsPageData")}),["Modules/CommandViewAction/CommandViewActionContracts","Modules/CommandViewAction/CommandViewActionActions","Modules/CommandViewAction/CommandViewActionReducer","Modules/CommandViewAction/CommandViewActionModule","Modules/Teams/TeamActions","Modules/Teams/TeamContracts","Modules/Teams/TeamReducer","Modules/Teams/TeamSelectors","Modules/Teams/TeamSource","Modules/Teams/TeamSaga","Modules/Teams/TeamsModule","Modules/TfsPageData/TfsPageDataActions","Modules/TfsPageData/TfsPageDataContracts","Modules/TfsPageData/TfsPageDataReducer","Modules/TfsPageData/TfsPageDataSaga","Modules/TfsPageData/TfsPageDataModule","Modules/TfsPageData/TfsPageDataSelectors","Modules/TfsPageData/TfsPageData"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-tfs-web.redux-common"}}));