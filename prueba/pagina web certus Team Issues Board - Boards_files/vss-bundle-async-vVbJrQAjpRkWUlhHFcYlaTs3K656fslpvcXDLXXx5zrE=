if (window.performance && window.performance.mark) { window.performance.mark('startLoadBundleInner-async'); }
define("Mention/Scripts/Resources/TFS.Resources.Mention",["require","exports"],function(require,exports){var e=exports;e.PullRequestText="Pull Request {0}";e.MentionPR="Mention a pull request";e.AutocompleteSearchButtonText="Search";e.WorkItemMentionOptionSelected="{0}. Selected";e.AutocompleteServerError="Error loading suggestions";e.DiscussionMentionWorkItemTip="workitems (#)";e.AutocompleteSuggestionsPlural="Showing {0} suggestions";e.AutocompleteSuggestionsSingular="Showing 1 suggestion";e.AutocompleteTermsOverLimit="Search only supports up to {0} keywords. Refine your criteria.";e.MentionMaterializeErrorDialogTitle="Error";e.AutocompleteNoSuggestions="No suggestions found";e.MentionWorkItem="Mention a work item";e.DiscussionShowMoreRetrievalError="Unable to show more comments";e.GitPullRequestMentionWorkItemDiscussionMessageFormat="Mentioned in {0}";e.AutocompleteLoading="Loading suggestions";e.DiscussionStateTextFormat="({0} of {1})";e.WorkItemStateLabel="State of the work item is {0}";e.DiscussionMentionPersonTip="people (@)";e.DiscussionUserCommentedTextFormat="commented {0}";e.AtMention="Mention";e.MentionSomeone="Mention someone";e.DiscussionShowMoreLinkText="Show more";e.MentionMaterializeIdentityFailError="The identity \u003cspan class=\u0027{0}\u0027\u003e@{1}\u003c/span\u003e could not be added to VSTS and will not receive the e-mail notification.\u003cbr\u003ePlease remove the user and retry the mention.";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});t.TfsSettingsScopeNames=t.TeamProjectCapabilitiesConstants=t.ProjectVisibilityConstants=t.ProjectState=t.Messages=t.LicenseFeatureIds=t.HubsConstants=t.FeatureMode=t.FeatureAvailabilityFlags=t.CoreConstants=void 0,function(n){n.AreaIdGuid="79134c72-4a58-4b42-976c-04e7115f32bf";n.ProjectCollectionsLocationId="8031090f-ef1d-4af6-85fc-698cd75d42bf";n.ProjectsLocationId="603fe2ac-9723-48b9-88ad-09305aa6c6e1";n.ProcessLocationId="93878975-88c5-4e6a-8abb-7ddd77a8a7d8";n.ProjectHistoryLocationId="6488a877-4749-4954-82ea-7340d36be9f2";n.ProjectAvatarLocationId="54b2a2a0-859b-4d05-827c-ec4c862f641a";n.TeamsLocationId="d30a3dd1-f8ba-442a-b86a-bd0c0c383e59";n.CollectionTeamsLocationId="7a4d9ee9-3433-4347-b47a-7a80f1cf307e";n.TeamMembersLocationId="294c494c-2600-4d7e-b76c-3dd50c3c95be";n.ConnectedServicesId="b4f70219-e18b-42c5-abe3-98b07d35525e";n.ProxyId="ec1f4311-f2b4-4c15-b2b8-8990b80d2908";n.PropertiesLocationId="4976a71a-4487-49aa-8aab-a1eda469037a";n.ProjectsPropertiesLocationId="0a3ffdfc-fe94-47a6-bb27-79bf3f762eac";n.AreaId="79134C72-4A58-4B42-976C-04E7115F32BF";n.AreaName="core";n.ProcessAreaName="process";n.ApiString="_apis";n.JsonPatchMediaType="application/json-patch+json";n.ProcessResource="processes";n.ProjectsResource="projects";n.ProjectHistoryResource="projectHistory";n.ProjectAvatarResource="avatar";n.ProjectCollectionsResource="projectCollections";n.TeamsResource="teams";n.TeamMembersResource="members";n.ConnectedServicesResource="connectedServices";n.ProxyResource="proxies";n.ProxyAuthorizationResource="proxyauthorization";n.PropertiesResource="properties";n.ProjectsPropertiesResource="projectsproperties";n.ProjectCollectionsRouteName="ProjectCollections";n.ProjectsRouteName="Projects";n.ProjectHistoryRouteName="ProjectHistory";n.ProjectAvatarRouteName="ProjectAvatar";n.ProcessesRouteName="Processes";n.TeamsRouteName="Teams";n.CollectionTeamsRouteName="CollectionTeams";n.TeamMembersRouteName="TeamMembers";n.ConnectedServicesRouteName="ConnectedServices";n.ProxyRouteName="Proxies";n.PropertiesRouteName="Properties";n.ProjectsPropertiesRouteName="ProjectsProperties";n.TeamsLocationIdString="D30A3DD1-F8BA-442A-B86A-BD0C0C383E59";n.CollectionTeamsLocationIdString="7A4D9EE9-3433-4347-B47A-7A80F1CF307E"}(i=t.CoreConstants||(t.CoreConstants={})),function(n){n.DisablePageSizeForRequirements="WebAccess.TestManagement.DisablePageSizeForRequirements";n.WebAccessDashboardsNewExperienceToggle="WebAccess.Dashboards.NewExperience.Toggle";n.WebAccessDisableTypeAhead="WebAccess.Profile.DisableTypeAhead";n.WebAccessDisableRecommendationService="WebAccess.DisableRecommendationService";n.RecommendationServiceUseAex="VisualStudio.Recommendation.UseAex";n.WebAccessQuickStart="WebAccess.QuickStart";n.WebAccessQuickStartJumpStart="WebAccess.QuickStart.JumpStart";n.WebAccessQuickStartJumpStartForExistingProjects="WebAccess.QuickStart.JumpStartForExistingProjects";n.WebAccessQuickStartKanban="WebAccess.QuickStart.Kanban";n.WebAccessQuickStartKanbanForExistingProjects="WebAccess.QuickStart.KanbanForExistingProjects";n.WebAccessQuickStartScrum="WebAccess.QuickStart.Scrum";n.WebAccessQuickStartMembers="WebAccess.QuickStart.Members";n.WebAccessQuickStartCodeSearchPromotion="WebAccess.QuickStart.CodeSearchPromotion";n.WebAccessQuickStartCodeSearchFileViewerCapabilities="WebAccess.QuickStart.CodeSearchFileViewerCapabilities";n.WebAccessQuickStartCodeSearchFeature="WebAccess.QuickStart.CodeSearchFeature";n.WebAccessSendASmileNavbar="WebAccess.SendASmile.Navbar";n.WebAccessSendASmileNewBehavior="WebAccess.SendASmile.NewBehavior";n.WebAccessAccountShowGettingStartedVideo="WebAccess.Account.GettingStartedVideo";n.WebAccessAccountShowGettingStartedVideoIframe="WebAccess.Account.GettingStartedVideoIframe";n.WebAccessAccountSoftDelete="WebAccess.Account.AccountSoftDelete";n.WebAccessAccountRegion="WebAccess.Account.AccountRegion";n.WebAccessServicePreviewBuild="WebAccess.Service.Preview.Build";n.WebAccessServicePreviewTest="WebAccess.Service.Preview.Test";n.WebAccessExtensions="WebAccess.Extensions";n.WebAccessExtensionsDeployment="WebAccess.Extensions.Deployment";n.WebAccessExtensionsApplication="WebAccess.Extensions.Application";n.WebAccessExtensionsProjectCollection="WebAccess.Extensions.ProjectCollection";n.WebAccessExtensionsPersonal="WebAccess.Extensions.Personal";n.WebAccessVersionControlShowSelectedBranchAdminView="WebAccess.VersionControl.ShowSelectedBranchAdminView";n.WebAccessServiceMetricsAnalytics="WebAccess.Service.MetricsAnalytics";n.WebAccessTrialModeNotification="WebAccess.TrialModeNotification";n.WebAccessEarlyAdopterNotification="WebAccess.EarlyAdopterNotification";n.WebAccessAllowEarlyAdopterAfterExpiration="WebAccess.AllowEarlyAdopterAfterExpiration";n.WebAccessAllowFpsFromScalarWidgets="WebAccess.Widgets.ScalarWidgetsFps.Enable";n.ReportingAnalyticsVisualMenu="WebAccess.Reporting.AnalyticsVisualMenu";n.ReportingBuildTestVisualExamples="WebAccess.Reporting.BuildTestVisualExamples";n.ServiceHooksTfsPublisher="ServiceHooks.TfsHooksPublisher";n.ServiceHooksGeneralAvailability="ServiceHooks.GeneralAvailability";n.OpenPlatformAnnouncement="OpenPlatform.Announcement";n.EnableAddAadUserWarning="WebAccess.EnableAddAadUserWarning";n.WebAccessAccountAadInformationNotification="WebAccess.AccountAadInformationNotification";n.WebAccessWelcomeHub="WebAccess.WelcomeHub";n.WebAccessProjectWelcomeHub="WebAccess.ProjectWelcome";n.WebAccessVersionControlGitPullRequestsWITIntegration="WebAccess.VersionControl.GitPullRequestsWITIntegration";n.WebAccessVersionControlGitReduceBranchComparisonDefaultCount="WebAccess.VersionControl.GitReduceBranchComparisonDefaultCount";n.WebAccessVersionControlGitSecretsScanning="WebAccess.VersionControl.GitSecretsScanning";n.GitPushNewPushPolicies="Git.Push.NewPushPolicies";n.GitPushCommitAuthorPushPolicy="Git.Push.CommitAuthorPushPolicy";n.GitProtectedRepos="Git.ProtectedRepos";n.VisualStudioServicesPersistedNotification="VisualStudio.Services.PersistedNotification";n.ELSVSOIntegrationAnnouncement="ELS.VSO.IntegrationAnnouncement";n.BasicUserLimitedPortfolioAccessNotificationId="16676E24-8F6A-4EAA-9A9D-FCDF57E8BC8A";n.LoadTestFeatureFlag="ELS.VSO.LoadTesting";n.LoadTestEmailEnableFlag="ELS.VSO.EmailEnable";n.LoadTestUltimateEnableFlag="ELS.VSO.UltimateEnable";n.LoadTestGeoEnableFlag="ELS.VSO.GeoEnable";n.LoadTestFeatureEnableForNonUltimateFlag="ELS.VSO.LoadTestEnableForNonUltimate";n.LoadTestAverageResponseTimeThresholdValue="ELS.VSO.AverageResponseTimeThresholdValue";n.WebAccessSearchEnableNewRoute="WebAccess.Search.EnableNewRoute";n.WebAccessSearchShell="WebAccess.SearchShell";n.WebAccessSearchProject="WebAccess.Search.Project";n.WebAccessSearchWorkItemEnableListView="WebAccess.Search.WorkItem.EnableListView";n.WebAccessSearchWorkItem="WebAccess.Search.WorkItem";n.WebAccessSearchWorkItemClientSort="WebAccess.Search.WorkItem.ClientSort";n.WebAccessSearchWorkItemServerSort="WebAccess.Search.WorkItem.ServerSort";n.WebAccessSearchCodeServerSort="WebAccess.Search.Code.ServerSort";n.WebAccessSearchCodeClientSort="WebAccess.Search.Code.ClientSort";n.WebAccessSearchWikiConditionalFaultin="WebAccess.Search.Wiki.ConditionalFaultin";n.WebAccessSearchWorkItemConditionalFaultin="WebAccess.Search.WorkItem.ConditionalFaultin";n.WebAccessSearchWorkItemFeatureToggle="WebAccess.Search.WorkItem.Feature.Toggle";n.WebAccessSearchWorkItemFeatureDefault="WebAccess.Search.WorkItem.Feature.Default";n.WebAccessSearchCustomVC="WebAccess.Search.CustomVC";n.WebAccessSearchMultiAccount="WebAccess.Search.MultiAccount";n.WebAccessSearchMultiBranch="WebAccess.Search.MultiBranch";n.WebAccessSearchMultiBranchConfigurationUX="WebAccess.Search.MultiBranchConfigurationUX";n.WebAccessSearchUseContentHash="WebAccess.Search.UseContentHash";n.WebAccessSearchWorkItemWelcomeBanner="WebAccess.Search.WorkItem.WelcomeBanner";n.WebAccessVersionControlEditing="WebAccess.VersionControl.Editing";n.WebAccessVersionControlWikiLinkTransformation="WebAccess.VersionControl.WikiLinkTransformation";n.VersionControlAllowCreateReadMe="VisualStudio.VersionControl.AllowCreateReadMe";n.SourceControlPullRequestsAttachments="SourceControl.GitPullRequests.Attachments";n.WebAccessVersionControlPullRequestsCommentFeedback="WebAccess.VersionControl.PullRequests.CommentFeedback";n.WebAccessVersionControlPullRequestsDiscussionCollapseWidget="WebAccess.VersionControl.PullRequests.DiscussionCollapseWidget";n.WebAccessVersionControlPullRequestsDiscussionCommentLikes="WebAccess.VersionControl.PullRequests.DiscussionCommentLikes";n.WebAccessVersionControlPullRequestsAutoComplete="WebAccess.VersionControl.PullRequests.AutoComplete";n.WebAccessVersionControlPullRequestsFollows="WebAccess.VersionControl.PullRequests.Follows";n.WebAccessVersionControlPullRequestsCommitsTabReplaced="WebAccess.VersionControl.PullRequest.CommitsTabReplaced";n.WebAccessVersionControlPolicyAutomaticReviewersMinimumCount="WebAccess.VersionControl.Policy.AutomaticReviewers.MinimumCount";n.WebAccessVersionControlContributions="WebAccess.VersionControl.Contributions";n.WebAccessVersionControlIncludeForcePushDetails="WebAccess.VersionControl.Pushes.IncludeForcePushDetails";n.WebAccessVersionControlGitPushersExclusionFilter="WebAccess.VersionControl.GitPushersExclusionFilter";n.WebAccessVersionControlExplorerVanityBadges="WebAccess.VersionControl.ExplorerVanityBadges";n.WebAccessVersionControlGitCredentialManagerAvailable="WebAccess.VersionControl.GitCredentialManagerAvailable";n.WebAccessVersionControlDisableAlternateAuthInGitGettingStarted="WebAccess.VersionControl.DisableAlternateAuthInGitGettingStarted";n.WebAccessVersionControlNewBranches="WebAccess.VersionControl.NewBranches";n.WebAccessVersionControlStaleBranches="WebAccess.VersionControl.StaleBranches";n.WebAccessVersionControlDisableCommitItemCache="WebAccess.VersionControl.DisableCommitItemCache";n.ChartingHistorical="Charting.Historical";n.ChartingAggregation="Charting.Aggregation";n.WebAccessBuildCIWorkflowVariableGroups="WebAccess.Build.CIWorkflow.VariableGroups";n.MarketplaceExtensionSupport="WebAccess.Build.CIWorkflow.MarketplaceExtensionSupport";n.EnableIdentityNavigation="VisualStudio.Services.Framework.EnableIdentityNavigation";n.WebAccessBuildCIWorkflowYaml="WebAccess.Build.CIWorkflow.Yaml";n.WebAccessBuildDiagnosticLogs="WebAccess.Build.DiagnosticLog";n.WebAccessBuildCIWorkflowBuildCompletion="WebAccess.Build.CIWorkflow.BuildCompletion";n.WebAccessBuildCIWorkflowAgentDefinition="WebAccess.Build.CIWorkflow.AgentDefinition";n.WebAccessCIWorkflowEditableControlsWithoutPermission="WebAccess.CIWorkflow.EditableControlsWithoutPermission";n.WebAccessCIWorkflowShallowCloneOnByDefault="WebAccess.Build.CIWorkflow.ShallowCloneOnByDefault";n.BuildXaml="Build.Xaml";n.WebAccessBuildvNextGitHubRepository="WebAccess.BuildvNext.GitHubRepository";n.WebAccessBuildvNextSvnRepository="WebAccess.BuildvNext.SvnRepository";n.WebAccessBuildPhaseDependencies="WebAccess.Build2.PhaseDependencies";n.BuildvNextRetentionPolicy="Build.BuildvNext.RetentionPolicy";n.GitHubDiscoverYamlDefinition="Build2.GitHubDiscoverYamlDefinition";n.GitHubMarketplaceApp="Build2.GitHubMarketplaceApp";n.GitHubRequireCommentsForNonTeamAndNonContributors="Build2.GitHubRequireCommentsForNonTeamAndNonContributors";n.AllowCentralizedPipelineControls="Build2.AllowCentralizedPipelineControls";n.Build2BatchRealtimeUpdates="Build2.BatchRealtimeUpdates";n.Build2AllowOutOfScopeRepository="Build2.AllowOutOfScopeRepository";n.Build2FetchTagsOffByDefault="Build2.FetchTagsOffByDefault";n.WebAccessBuild2ShowYamlView="WebAccess.Build2.ShowYamlView";n.WebAccessSearchCORS="WebAccess.SearchCORS";n.WebAccessSearchPrefetchFirstSearch="WebAccess.Search.PrefetchFirstSearch";n.UseUserDetailsArea="VisualStudio.Services.Identity.UseUserDetailArea";n.ReleaseManagementReleasesHub="WebAccess.ReleaseManagement.ReleasesHub";n.ReleaseManagementCDOptInToggle="WebAccess.ReleaseManagement.NewCDWorkflowOptInToggle";n.ReleaseManagementCDOptInDefault="WebAccess.ReleaseManagement.NewCDWorkflowOptInDefault";n.ReleaseManagementNewCDReleaseViewOptInToggle="WebAccess.ReleaseManagement.NewCDReleaseViewOptInToggle";n.ReleaseManagementNewCDReleaseViewOptInDefault="WebAccess.ReleaseManagement.NewCDReleaseViewOptInDefault";n.ReleaseManagementUseDataProviderForSetupRelease="WebAccess.ReleaseManagement.UseDataProviderForSetupRelease";n.WebAccessAgileBacklogForecastOnDemand="WebAccess.Agile.Backlog.ForecastOnDemand";n.WebAccessAgileTaskboardDelayloadStateTransitions="WebAccess.Agile.Taskboard.DelayloadStateTransitions";n.WebAccessAgileTaskboardExpandCollapseAll="WebAccess.Agile.Taskboard.ExpandCollapseAll";n.WebAccessAgileTaskboardPeopleSwitcher="WebAccess.Agile.Taskboard.PeopleSwitcher";n.WebAccessAgileTaskboardDisableCustomColumns="WebAccess.Agile.Taskboard.DisableCustomColumn";n.WebAccessAgileTaskboardDisableLiveUpdates="WebAccess.Agile.Taskboard.DisableLiveUpdates";n.WebAccessAgileTaskboardLiveUpdatesDisableThrottling="WebAccess.Agile.Taskboard.LiveUpdates.DisableThrottling";n.AgileServerTeamServiceAADGroupsBlockExpansion="Agile.Server.TeamService.AADGroupsBlockExpansion";n.WebAccessVSTSBranding="WebAccess.VSTSBranding";n.WebAccessAgileBehaviorProvisioningRESTAPI="WebAccess.Agile.BehaviorProvisioningRESTAPI";n.BacklogsOfficeFabricContextMenu="WebAccess.Agile.Backlog.OfficeFabContextMenu";n.BacklogsChangeParentContextMenu="WebAccess.Agile.Backlog.ChangeParentMenuItem";n.WebAccessWorkItemTrackingIndexedDBCaching="WebAccess.WorkItemTracking.IndexedDBCaching";n.WebAccessVersionControlPullRequestsNoDefaultTitle="WebAccess.VersionControl.PullRequests.NoDefaultTitle";n.WebAccessVersionControlPullRequestsLabels="WebAccess.VersionControl.PullRequests.Labels";n.WebAccessVersionControlPullRequestsMentions="WebAccess.VersionControl.PullRequests.Mentions";n.WebAccessVersionControlPullRequestListHideGroupReviewers="WebAccess.VersionControl.PullRequestList.HideGroupReviewers";n.WebAccessDiscussionRendererHTMLRenderer="WebAccess.VersionControl.DiscussionRenderer.HTMLRendering";n.WebAccessVersionControlEnablePermissions="WebAccess.VersionControl.EnablePermissions";n.WebAccessVersionControlDisableWITValidationWarning="WebAccess.VersionControl.DisableWITValidationWarning";n.WebAccessVersionControlFilesMoreBlame="WebAccess.VersionControl.Files.MoreBlame";n.WebAccessVersionControlContributedEmptyRepository="WebAccess.VersionControl.ContributedEmptyRepository";n.WebAccessWorkItemTrackingAddLinksByToolType="WebAccess.WorkItemTracking.AddLinksByToolType";n.WebAccessVersionControlPullRequestsTemplates="WebAccess.VersionControl.PullRequests.Templates";n.WebAccessVersionControlPullRequestsViewedStatus="WebAccess.VersionControl.PullRequests.ViewedStatus";n.WebAccessWorkItemTrackingDisableCommentCount="WebAccess.WorkItemTracking.WorkItemsHub.DisableCommentCount";n.ShareEndpointsAcrossProjects="WebAccess.ServiceEndpoints.ShareAcrossProjects";n.AzureSubscriptionBasedDockerRegistry="ServiceEndpoints.AzureSubscriptionBasedDockerRegistry";n.WebAccessWorkItemTrackingEnableCSVExport="WebAccess.WorkItemTracking.EnableCSVExport";n.WebAccessWorkItemTrackingEnableCSVImport="WebAccess.WorkItemTracking.EnableCSVImport";n.DisableWebAccessServerKanbanLogs="WebAccess.Server.DisableKanbanLogs";n.EnableNewUIForKubernetesEndpoint="ServiceEndpoints.EnableNewUIForKubernetesEndpoint";n.EnableNewUIForAzureRMEndpoint="ServiceEndpoints.EnableNewUIForAzureRMEndpoint";n.EnableSovereignSupportInKubernetesEndpoint="ServiceEndpoints.EnableSovereignSupport";n.BitbucketAzurePipelinesOAuthClient="Build2.BitbucketAzurePipelinesOAuthClient";n.BitbucketAzurePipelinesBackupOAuthClient="Build2.BitbucketAzurePipelinesBackupOAuthClient";n.GetWorkItemHistoryFieldValue="WebAccess.WorkItemTracking.GetWorkItemHistoryFieldValue";n.TypeScriptRuleEngineStateTransitionFilteringDisabled="WebAccess.WorkItemTracking.TypeScriptRuleEngineStateTransitionFilteringDisabled";n.AllowWasEverForComputed="WebAccess.WorkItemTracking.AllowWasEverForComputed";n.DisableWorkItemTypesSplittedLoading="WebAccess.WorkItemTracking.DisableWorkItemTypesSplittedLoading";n.SourceControlGitPullRequestsMergeStrategyRebase="SourceControl.GitPullRequests.MergeStrategy.Rebase";n.GitCommitMessageWITTransition="VisualStudio.Mentions.GitCommitMessageWITTransition";n.WebAccessSkypeTeamsTabConfiguration="WebAccess.SkypeTeams.TabConfiguration";n.WebAccessScaledAgilePlansDeliveryTimelineDelayedDragDropCard="WebAccess.ScaledAgile.Plans.DeliveryTimeline.DelayedDragDropCard";n.WebAccessScaledAgilePlansDeliveryTimelineIsCardMovementAnimated="WebAccess.ScaledAgile.Plans.DeliveryTimeline.IsCardMovementAnimated";n.WebAccessAgileKanbanFlatQuery="WebAccess.Agile.Kanban.FlatQuery";n.WebAccessAgileKanbanBoardAutoRefreshThrottling="WebAccess.Agile.KanbanBoard.AutoRefresh.Throttling";n.WebAccessAgileCardAnnotations="WebAccess.Agile.Card.Annotations";n.WebAccessAgileCardRollup="WebAccess.Agile.Card.Rollup";n.WebAccessAgileIncreaseDefaultFilterPageSize="WebAccess.Agile.KanbanBoard.IncreaseDefaultFilterPageSize";n.UseTokenFiltering="WebAccess.WorkItemTracking.UseTokenFiltering";n.DisableLinkFiltersFix="WebAccess.Agile.DisableLinkFiltersFix";n.WebAccessAgileUseBehaviorsForBacklogLevels="WebAccess.Agile.UseBehaviorsForBacklogLevels";n.WebAccessAgileBacklogOneClickOpen="WebAccess.Agile.Backlog.OneClickOpen";n.WebAccessAgileBacklogEnableRollupColumns="WebAccess.Agile.Backlog.EnableRollupColumns";n.WebAccessAccessibilityMonitor="WebAccess.AccessibilityMonitor";n.WebAccessAgileBacklogSafeguardPerformanceSampling="WebAccess.Agile.Backlog.Safeguard.PerformanceSampling";n.TeamServiceSafeguardBlockCreateTeamAndAdminOperations="TeamService.Safeguard.BlockCreateTeamAndAdminOperations";n.TeamConfigurationServiceLimitTeamAreaPathsAndIterations="TeamConfigurationService.SaveTeamFields.LimitAllowedTeamAreaPathsAndIterations";n.CodeAnalysisAdornmentProvider="WebAccess.VersionControl.CodeAnalysisAdornmentProvider";n.WebAccessProcessUpload="WebAccess.Process.ProcessUpload";n.WebAccessXmlTemplateProcess="WebAccess.Process.XmlTemplateProcess";n.WorkItemTrackingCloneHostedXmlToInheritedDisabled="WorkItemTracking.Server.CloneHostedXmlToInheritedDisabled";n.WorkItemTrackingNewFormMoreSpaceInHeader="WebAccess.WorkItemTracking.NewForm.MoreSpaceInHeader";n.WorkItemTrackingMove="WorkItemTracking.Server.MoveWorkItems";n.InvalidateClientTagCacheOnWorkItemSave="WebAccess.WorkItemTracking.InvalidateClientTagCacheOnWorkItemSave";n.WebAccessWorkItemTrackingFindWiUseFavorites="WebAccess.WorkItemTracking.FindWorkItemUseFavorites";n.ShowTeamProfileCard="WebAccess.ShowTeamProfileCard";n.TeamAgnosticWorkItemTemplates="WebAccess.WorkItemTracking.TeamAgnosticWorkItemTemplates";n.WorkItemTemplatesLegacyUrl="WebAccess.WorkItemTracking.WorkItemTemplates.LegacyUrl";n.DisableWorkItemTrackingStateColors="WebAccess.WorkItemTracking.Safeguard.DisableWorkItemStateColors";n.WorkItemTrackingChangeWorkItemType="WorkItemTracking.Server.ChangeWorkItemType";n.DisableSendMailDataProvider="WorkItemTracking.Server.DisableSendMailDataProvider";n.AllowEmailingInvitedUsers="WorkItemTracking.Server.AllowEmailingInvitedUsers";n.DisableWorkItemColorDataProvider="WorkItemTracking.Server.DisableWorkItemColorDataProvider";n.EnableWebAccessBoardsService="WorkItemTracking.Server.EnableWebAccessBoardsService";n.EnableUIWithBoardsService="WorkItemTracking.Server.EnableUIWithBoardsService";n.DisableWorkItemStoreDataProviders="WorkItemTracking.Server.DisableWorkItemStoreDataProviders";n.ProjectChangeProcessDisabled="WorkItemTracking.Server.ProjectChangeProcessDisabled";n.CloneProcessCustomWITStatesNewMergeDisabled="WorkItemTracking.Server.CloneProcessCustomWITStatesNewMergeDisabled";n.EnableClassificationNodeRestClients="WorkItemTracking.Server.EnableClassificationNodeRestClients";n.EnableLiveReloadForWorkItemLinks="WebAccess.WorkItemTracking.EnableLiveReloadForWorkItemLinks";n.AllowMVCDownloadAttachment="WorkItemTracking.Server.AllowMVCDownloadAttachment";n.IgnoreActiveWorkItemTypesInBacklogsHubContentService="WorkItemTracking.Server.IgnoreActiveWorkItemTypesInBacklogsHubContentService";n.WebAccessWorkItemTrackingHistoryViewExtension="WebAccess.WorkItemTracking.HistoryViewExtension";n.WebAccessWorkItemTrackingEnableLinksOfDeletedAttachments="WebAccess.WorkItemTracking.EnableLinksOfDeletedAttachments";n.WebAccessWidgetsUseAnalyticsAgileChartingClient="WebAccess.Widgets.UseAnalyticsAgileChartingClient";n.WebAccessBuildvNextEmailBuildSummary="WebAccess.BuildvNext.EmailBuildSummary";n.WebAccessVersionControlQuickActions="WebAccess.VersionControl.QuickActions";n.WebaccessProcessHierarchy="WebAccess.Process.Hierarchy";n.WebaccessProcessSecurityPanel="WebAccess.Process.SecurityPanel.Enable";n.WebAccessServicePrincipal="WebAccess.ServicePrincipal";n.WebAccessHideServicePrincipal="WebAccess.HideServicePrincipal";n.WebAccessAutoCreateServicePrincipal="WebAccess.AutoCreateServicePrincipal";n.WebAccessAutoCreateServicePrincipalAcrossTenants="WebAccess.AutoCreateServicePrincipalAcrossTenants";n.WebAccessAutoCreateOAuthBasedServicePrincipalAcrossTenants="WebAccess.AutoCreateOAuthBasedServicePrincipalAcrossTenants";n.WebAccessAutoCreateServicePrincipalCompleteCallbackByAuthcode="WebAccess.AutoCreateServicePrincipalCompleteCallbackByAuthcode";n.WebAccessEnableNationalCloudForServicePrincipal="WebAccess.EnableNationalCloudForServicePrincipal";n.WebAccessEnableAzureStackForServicePrincipal="WebAccess.EnableAzureStackForServicePrincipal";n.WebAccessEnableResourceGroupScopedServicePrincipal="WebAccess.EnableResourceGroupScopedServicePrincipal";n.WebAccessSignalRSeparateAppPool="WebAccess.SignalR.AppPool";n.WebAccessSignalRDisablePing="WebAccess.SignalR.DisablePing";n.WebAccessWorkItemTrackingFormSignalR="WebAccess.WorkItemTracking.Form.SignalR.Enabled";n.AadGroupsAdminUi="VisualStudio.Services.AadGroupsAdminUi";n.MinControlNewAddDialog="VisualStudio.Services.Web.MinControlNewAddDialog";n.DoNotPopulateIdentityGrid="VisualStudio.Services.Web.DoNotPopulateIdentityGrid";n.CollectionAdminWebUi="VisualStudio.Services.Web.CollectionAdmin.UserExperience";n.OrgAdminWebUi="VisualStudio.Services.Web.OrgAdmin.UserExperience";n.TriPassPercentageCalculation="TestManagement.Server.TriPassPercentageCalculation";n.TriShowTestRunSummaryInContext="TestManagement.Server.TriShowTestRunSummaryInContext";n.TriTrendChartsForRM="TestManagement.Server.TriTrendChartsForRM";n.BuildSummaryCodeCoverage="TestManagement.Server.BuildSummaryCodeCoverage";n.ModuleDetailsUIForDotCoverage="TestManagement.Server.ModuleDetailsUIForDotCoverage";n.BuildSummaryCodeCoverageCharts="TestManagement.Server.BuildSummaryCodeCoverageCharts";n.FileContainerServiceBrowseItems="VisualStudio.FileContainerService.BrowseItems";n.TriReportCustomization="TestManagement.Server.TRIReportCustomization";n.ShowNotImpactedInTestResults="TestImpact.Server.ShowNotImpactedInTestResults";n.TriQuickStartTraceability="TestManagement.Server.TriQuickStartTraceability";n.TCMUseNewIdentityPicker="WebAccess.TestManagement.UseNewIdentityPicker";n.IdentityPickerClientPerformance="VisualStudio.Services.IdentityPicker.ClientPerformance";n.SSHPublicKeys="WebAccess.SshUI";n.WebAccessTCMTestPlanLiteHub="WebAccess.TestManagement.TestPlanLiteHub";n.WebAccessTCMMineTestPlanSkinnyProvider="WebAccess.TestManagement.MineTestPlanSkinnyProvider";n.WebAccessTCMAllTestPlanSkinnyProvider="WebAccess.TestManagement.AllTestPlanSkinnyProvider";n.WebAccessTCMAdvTestExtPermissionsProvider="WebAccess.TestManagement.AdvTestExtPermissionsProvider";n.WebAccessTCMManageTestPlansHubLWP="WebAccess.TestManagement.ManageTestPlansHubLWP";n.AddToExistingBugResultSummaryPage="WebAccess.TestManagement.AddToExistingBugResultSummaryPage";n.WebAccessUseNonWiqlPointCountQuery="WebAccess.TestManagement.UseNonWiqlPointCountQuery";n.WebAccessShowDTROptionForTestRunner="WebAccess.TestManagement.ShowDTROptionForTestRunner";n.WebAccessTCMEnableXtForEdge="WebAccess.TestManagement.EnableEdgeXt";n.GatedCheckInTrigger="Build2.GatedCheckInTrigger";n.MaxConcurrentBuildsPerBranchFeature="Build2.MaxConcurrentBuildsPerBranch";n.FilePathArtifactsAndSymbolsDeleteFeature="Build2.Retention.FilePathArtifactsAndSymbolsDelete";n.BuildAllDefinitionsTab="WebAccess.Build.Definitions.All";n.WebAccessAddInlineTest="WebAccess.TestManagement.InlineTest";n.ExcludeJQueryUI="VisualStudio.Services.Contributions.ExcludeCompleteJQueryUI";n.WebAccessTestManagementPointCountFeatureDisabled="WebAccess.TestManagement.PointCountFeature";n.WebAccessTestManagementEnableDesktopScreenShot="WebAccess.TestManagement.EnableDesktopScreenShot";n.WebAccessTestManagementEnableAudioWithVideo="WebAccess.TestManagement.EnableAudioWithVideo";n.WebAccessTestManagementRenderMarkDownComment="WebAccess.TestManagement.RenderMarkDownComment";n.WebAccessTestManagementUpdateRunComment="WebAccess.TestManagement.UpdateRunComment";n.WebAccessTestManagementReactBasedRunWithOptionsDialog="WebAccess.TestManagement.ReactBasedRunWithOptions";n.LogStoreAttachments="WebAccess.TestManagement.LogStore";n.WebAccessTestManagementAttachmentsGridView="WebAccess.TestManagement.AttachmentsGridView";n.WebAccessTestManagementBugsGridView="WebAccess.TestManagement.BugsGridView";n.WebAccessTestManagementLinkedItemsGridView="WebAccess.TestManagement.LinkedItemsGridView";n.WebAccessTestManagementRequirementsGridView="WebAccess.TestManagement.RequirementsGridView";n.WebAccessTestManagementFiltersForRerun="WebAccess.TestManagement.FiltersForRerun";n.WebAccessTestManagementLinkedStackTrace="WebAccess.TestManagement.LinkedStackTrace";n.TriTestResultsSearchAndFilter="WebAccess.TestManagement.TestResultsSearchAndFilter";n.AnalyticsTestResultsFilters="WebAccess.TestManagement.Analytics.TestResultsFilters";n.AnalyticsRouteAPIsToTestResultDaily="WebAccess.TestManagement.Analytics.RouteAPIsToTestResultDaily";n.AnalyticsSwitchToTestSKContextFilter="WebAccess.TestManagement.Analytics.SwitchToTestSKContextFilter";n.AnalyticsGroupByAndFilterOnTestSK="WebAccess.TestManagement.Analytics.GroupByAndFilterOnTestSK";n.TestAnalyticsRemoveReleaseEntities="WebAccess.Test.Analytics.RemoveReleaseEntities";n.PipelineAnalyticsRenameBuildEntities="WebAccess.Pipeline.Analytics.RenameBuildEntities";n.TriReportingAbortedRuns="TestManagement.Server.ReportingAbortedRuns";n.TriInProgress="TestManagement.Server.ReportingInProgressRuns";n.TriSignalRIntegration="TestManagement.Server.SignalRReportingRuns";n.PublishOnTcmService="TestManagement.Server.EnablePublishOnTcmService";n.UseOnlyLongPolling="WebAccess.TestManagement.UseOnlyLongPolling";n.QueryFromTcmService="WebAccess.TestManagement.QueryFromTcmService";n.LWPTestTab="WebAccess.TestManagement.TestTabInNewWebPlatform";n.WebAccessTestManagementInProgressRunsInInProgressDefaultView="WebAccess.TestManagement.ShowInProgressRunsInInProgressDefaultView";n.WebAccessTestManagementHierarchicalViewForResults="WebAccess.TestManagement.HierarchicalViewForResults";n.WebAccessTestManagementShowSummaryForNotImpactedTests="WebAccess.TestManagement.ShowSummaryForNotImpactedTests";n.TcmChartWidget="WebAccess.Widgets.TcmChartWidget";n.WebAccessTestManagementAddRefLinksToRequirement="TestManagement.Server.AddTestCaseRefLinksToRequirement";n.WebAccessTestManagementTestTabExtensionBuild="WebAccess.TestManagement.TestTabExtension.Build";n.WebAccessTestManagementTestTabInNewWebPlatform="WebAccess.TestManagement.TestTabInNewWebPlatform";n.UpdateTestersOnSuiteUpdate="TestManagement.Server.SuitesApiIncludeTesters";n.WebAccessTestManagementNewTestPlanExperienceToggle="WebAccess.TestManagement.NewTestPlanExperience.Toggle";n.IsSingletonTestPointGridToolbarInstanceEnabled="WebAccess.TestManagement.SingletonTestPointGridToolbarInstance";n.ShouldEnableFilterInInProgress="TestManagement.Server.ShouldEnableFilterInInProgress";n.AnalyticsHubForManualTest="WebAccess.TestManagement.EnableNewAnalyticsHubForManualTest";n.DisableAutoRefreshOfEntryPointTextForAnalyticsHubForManualTest="WebAccess.TestManagement.DisableAutoRefreshOfEntryPointTextForAnalyticsHubForManualTest";n.GalleryPromotion="Gallery.NewFeature.GalleryPromotion";n.AdminWorkHubDisplayAreaOwners="Admin.WorkHub.DisplayAreaOwners";n.BuildHostedImage="WebAccess.Build.HostedImageSelection";n.NewCIWorkflowOptIn="WebAccess.Build.NewCIWorkflowOptIn";n.NewCIWorkflowOptInDefault="WebAccess.Build.NewCIWorkflowOptInDefault";n.NewCIWorkflowOptInToggle="WebAccess.Build.NewCIWorkflowOptInToggle";n.TaskOutputVariables="DistributedTask.TaskOutputVariables";n.TaskValidateOutputVariables="DistributedTask.TaskValidateOutputVariables";n.BuildAndReleaseResourceLimits="WebAccess.BuildAndRelease.ResourceLimits";n.LimitHostedMaxParallelism="DistributedTask.LimitHostedMaxParallelism";n.PipelineBillingModel2SelfHostedInfiniteResourceLimits="DistributedTask.PipelineBillingModel2.SelfHosted.InfiniteResourceLimits";n.PipelineBillingModel2="DistributedTask.PipelineBillingModel2";n.PipelineBillingModel2PublicProjects="DistributedTask.PipelineBillingModel2.PublicProjects";n.OldTaskGroupHub="WebAccess.DistributedTask.EnableOldTaskGroupHub";n.SwitchToQueueAdminHubExtension="WebAccess.DistributedTask.Queue.Extension";n.DistributedTaskKSB="Webaccess.DistributedTask.KSB";n.ServiceEndpointInlineSPNDescriptor="DistributedTask.TaskEditor.ServiceEndpointInlineSPNDescriptor";n.DistributedTaskTaskPreview="DistributedTask.TaskPreview";n.DistributedTaskViewYamlHasMoved="DistributedTask.ViewYamlHasMoved";n.WebAccessVersionControlCherryPick="WebAccess.VersionControl.CherryPick";n.SourceControlCherryPick="SourceControl.CherryPick";n.SourceControlRevert="SourceControl.Revert";n.SourceControlGitPullRequestsConflicts="SourceControl.GitPullRequests.Conflicts";n.SourceControlGitCherryPickConflicts="SourceControl.GitCherryPick.Conflicts";n.SourceControlGitRevertConflicts="SourceControl.GitRevert.Conflicts";n.SourceControlGitPullRequestsRetarget="SourceControl.GitPullRequests.Retarget";n.SourceControlGitPullRequestsSelectiveAutoComplete="SourceControl.GitPullRequests.SelectiveAutoComplete";n.SourceControlGitPullRequestsEnforceAdHocRequiredReviewers="SourceControl.GitPullRequests.EnforceAdHocRequiredReviewers";n.SourceControlGitPullRequestsAutoCompleteLegacyNonBlockingBehavior="SourceControl.GitPullRequests.AutoCompleteLegacyNonBlockingBehavior";n.WebAccessVersionControlConflictsDisplay="WebAccess.VersionControl.ConflictsDisplay";n.WebAccessNotificationsUI="Notifications.Web.NotificationsUI";n.NotificationsWebTileStatistic="Notifications.Web.TileStatistic";n.UsersAndRoomsHubs="WebAccess.ContributedHeader.UsersAndRoomsHubs";n.NewAccountLandingPageFavoriteDiscovery="WebAccess.Account.NewLandingPage.FavoriteDiscovery";n.NewUserHub="VisualStudio.UserManagement.Web.UserHub";n.WebAccessMyExperiencesNewProjectCreation="WebAccess.MyExperiences.NewProjectCreation";n.WebAccessMyExperiencesOrgAccountSelector="WebAccess.MyExperiences.OrgAccountSelector";n.WebAccessSearchSearchThisOrganization="WebAccess.Search.SearchThisOrganization";n.WebAccessNewEmptyRepoPage="WebAccess.VersionControl.NewEmptyRepoPage";n.QuickStartXTPromotion2="TestManagement.QuickStart.XTPromotion2";n.MyWorkShowRecentActivity="WebAccess.MyWork.ShowRecentActivity";n.MyWorkShowMentioned="WebAccess.MyWork.ShowMentioned";n.NewProjectOVerviewPageBuildReleaseMetrics="WebAccess.Project.NewOverviewPage.BuildReleaseMetrics";n.NewProjectOverviewPageLikes="WebAccess.Project.NewOverviewPage.Likes";n.NewProjectOverviewUseIsAnyServiceInitializedData="WebAccess.Project.Verticals.OverviewPage.UseIsAnyServiceInitializedData";n.ProcessSettingsValidatorAllowCustomTeamField="Agile.ProcessSettingsValidator.AllowCustomTeamField";n.WebAccessWikiImmersive="WebAccess.Wiki.Immersive";n.WebAccessWikiPageViewStats="WebAccess.Wiki.PageViewStats";n.WebAccessWikiProductDocumentation="WebAccess.Wiki.ProductDocumentation";n.WebAccessWikiUnpublishCodeWiki="WebAccess.Wiki.UnpublishCodeWiki";n.WebAccessWikiHandleBrokenLinks="WebAccess.WikiHandleBrokenLinks";n.WebAccessWikiTemplateSupport="WebAccess.Wiki.TemplateSupport";n.WebAccessWikiRichCodeWikiEditing="WebAccess.Wiki.RichCodeWikiEditing";n.WebAccessWikiRenameWiki="WebAccess.Wiki.RenameWiki";n.WikiTemplateEditing="Wiki.EnableTemplateEditing";n.WikiWebEnableNewMermaidSupportedDiagram="Wiki.Web.EnableNewMermaidSupportedDiagram";n.WebAccessWikiEnableFuzzySearch="WebAccess.Wiki.EnableFuzzySearch";n.WebAccessWikiDetailedFilterTelemetry="WebAccess.Wiki.DetailedFilterTelemetry";n.CleanupDeleteBoardsForDeletedBacklogLevels="Agile.Cleanup.DeleteBoardsForDeletedBacklogLevels";n.WebAccessProjectTags="WebAccess.Project.Tags";n.WebAccessProjectLanguages="WebAccess.Project.Languages";n.WebAccessAgileDoneColumnSortNullsLast="WebAccess.Agile.DoneColumnSortNullsLast";n.UserManagementProjectDialog="VisualStudio.UserManagement.ProjectInviteDialog";n.AnalyticsRichWorkFieldFiltering="WebAccess.Widgets.AnalyticsRichWorkFieldFiltering";n.PATPaginationAndFiltering="VisualStudio.Services.Identity.PATPaginationAndFiltering";n.UseNotificationPipelineForMentions="VisualStudio.Mentions.UseNotificationPipeline";n.AllowGroupMentions="VisualStudio.Mentions.AllowGroupMentions";n.MaterializeAadGroupsInMentions="VisualStudio.Mentions.MaterializeAadGroupsInMentions";n.UseStorageKeyInMentions="VisualStudio.Mentions.UseStorageKeyInMentions";n.HideTypeAndTitleInWorkItemMentions="VisualStudio.Mentions.HideTypeAndTitleInWorkItemMentions";n.GroupLicensingRule="VisualStudio.Services.GroupLicensingRule";n.AnonymousAccessFeatureName="VisualStudio.Services.Identity.AnonymousAccess";n.WebAccessDashboardsUseFpsNavigation="WebAccess.Dashboards.UseFpsForSwitchingDashboards.Enable";n.WebAccessDashboardsMonitorResourceUtilizationHeaders="WebAccess.Dashboards.MonitorResourceUtilizationHeaders";n.WebAccessDashboardsSuppressAutoRefreshOnHighResourceUtilization="WebAccess.Dashboards.SuppressAutoRefreshOnHighResourceUtilization";n.WebAccessDashboardsSecurityDialog="WebAccess.Dashboards.SecurityDialog";n.WebAccessAllowFpsWidgets="WebAccess.Widgets.AllowFpsWidgets";n.UseNewBranding="VisualStudio.Services.WebPlatform.UseNewBranding";n.NetPromoterSurveyAnonymousAccess="WebAccess.Survey.NetPromoter.AnonymousAccess";n.ATREnableIALAndVideo="WebAccess.TestManagement.ATREnableIALAndVideo";n.ATREnableVideoWithAudio="WebAccess.TestManagement.ATREnableVideoWithAudio";n.GitHubLinkification="WorkItemTracking.Server.GitHubLinkification";n.ShareVariableGroups="WebAccess.DistributedTask.ShareVariableGroups";n.EnableChecksScalabilityResourceIssues="Pipelines.Checks.EnableChecksScalabilityResourceIssues";n.ResourceAuthorizationforVGEndpoint="WebAccess.DistributedTask.ResourceAuthorization.VGEndpoint";n.WebAccessWorkItemTrackingFormRoosterEnable="WebAccess.WorkItemTracking.Form.Rooster.Enable";n.WebAccessWorkItemTrackingFormCommentServiceEditAndDeleteEnable="WorkItemTracking.Server.CommentService.EnableEditAndDelete.F4";n.WebAccessWorkItemTrackingEnableCommentReactions="WorkItemTracking.Server.CommentService.EnableCommentReactions";n.WebAccessEnableCommentReactionsNotifications="Comments.Server.EnableCommentReactionsNotifications";n.WebAccessWorkItemTrackingDisableTagsMRU="WebAccess.WorkItemTracking.DisableTagsMRU";n.ResourceAuthorizationExperience="WebAccess.DistributedTask.ResourceAuthorizationExperience";n.QueryMyWorkByExcludingDoneStates="WorkItemTracking.Server.QueryMyWorkByExcludingDoneStates";n.AnalyticsDashboardShadowTesting="WebAccess.Dashboards.AnalyticsShadowTesting";n.PipelinesSimplifiedRetention="Pipelines.SimplifiedRetention";n.PipelinesExtendedRetention="Pipelines.ExtendedRetention";n.EnableCustomFollows="WebAccess.WorkItemTracking.EnableCustomFollows";n.WebAccessWorkItemTrackingHtmlFieldsMentionsEnable="WebAccess.WorkItemTracking.EnableHtmlFieldsMentions";n.UseProdAzureResources="VisualStudio.Services.UseProdAzureResourcesOnDevFabric";n.NewServiceConnectionUI="ms.vss-distributedtask-web.new-serviceconnections-ui";n.EnableBranchesMenuSecurityDialog="WebAccess.VersionControl.Branches.SecurityDialog";n.EnableExtensionFilterMethodUsageTelemetry="WebAccess.WorkItemTracking.EnableExtensionFilterMethodUsageTelemetry";n.EnableAreaIterationPathSecurityDialog="WebAccess.Agile.Admin.SecurityDialog";n.EnableDetailedMyWorkItemsList="WebAccess.MyExperiences.MyWorkItems";n.EnableRepositoriesSecurityView="WebAccess.VersionControl.Repositories.SecurityView";n.DashboardsTeamAgnostic="WebAccess.Dashboards.TeamAgnosticDashboards";n.EnableNewSignalrRAppPool="WebAccess.SignalR.AppPool";n.EnableBlockingLastPusherVote="SourceControl.Policy.LastPusherCannotBeApprover";n.EnableSourceControlPolicyLastIterationApproved="SourceControl.Policy.LastIterationApproved";n.DisableRelatedWorkItemSuggestions="WebAccess.WorkItemTracking.DisableRelatedWorkItemSuggestions";n.DisableRichTextWorkItemPrefetch="WebAccess.WorkItemTracking.DisableRichTextWorkItemPrefetch";n.DisableAssigneesOnChildItems="WorkItemTracking.Server.DisableAssigneesOnChildItems";n.ServerSideFilteringByKeywordDisabled="WebAccess.WorkItemTracking.ServerSideFilteringByKeywordDisabled";n.MarkdownDiscussionEnabled="WebAccess.WorkItemTracking.Form.MarkdownDiscussionEnabled";n.EnableNewCommentsStorage="WorkItemTracking.Server.CommentService.LegacyCommentsApiOnNewStorage";n.EnableGetTestFailureTypeFromTcm="WebAccess.TestManagement.EnableGetTestFailureTypeFromTcm";n.GetBuildCodeCoverageReadOnlyEnabled="WebAccess.TestManagement.GetBuildCodeCoverage.EnableSqlReadReplica";n.GetCodeCoverageSummaryReadOnlyEnabled="WebAccess.TestManagement.GetCodeCoverageSummary.EnableSqlReadReplica";n.GetQueryTestHistoryReadOnlyEnabled="WebAccess.TestManagement.QueryTestHistory.EnableSqlReadReplica";n.ServicePrincipalsAllowed="WebAccess.WorkItemTracking.ServicePrincipalsAllowed";n.ProjectLimitAreaPathsEnabled="WorkItemTracking.Server.ProjectLimitAreaPaths";n.ProjectLimitIterationPathsEnabled="WorkItemTracking.Server.ProjectLimitIterationPaths"}(r=t.FeatureAvailabilityFlags||(t.FeatureAvailabilityFlags={})),function(n){n[n.Off=0]="Off";n[n.Advertising=1]="Advertising";n[n.Trial=2]="Trial";n[n.Licensed=3]="Licensed"}(u=t.FeatureMode||(t.FeatureMode={})),function(n){n.MruHubPath="/WebAccess/MRU/Hub";n.MruCookieName="StickyHub";n.EmitHubMruViewDataKey="TFS-EmitHubMru"}(f=t.HubsConstants||(t.HubsConstants={})),function(n){n.Admin="65AC9DB3-BB0A-42fe-B584-A690FB0D817B";n.AdvancedBacklogManagement="CEDD6BE8-B717-4a0a-8BFD-C4E9B4CAA071";n.AdvancedHomePage="509B6940-9948-47e6-A392-99E0CA873F65";n.AdvancedPortfolioBacklogManagement="F1026762-C08D-4de3-9C17-7587296F3CFE";n.AgileBoards="181DDF83-AFAF-4982-97D9-870AE96BB8D3";n.BacklogManagement="EC7545A3-E5DB-40E8-B0D0-F64DF7619BBA";n.Build="D8BE799B-2716-4c4b-A939-E97C46A28CAA";n.ChartAuthoring="F01E607A-F55C-4038-8F4B-7956712DEA22";n.ChartViewing="A510D786-5E4B-432F-8C31-F9D7B42CF17E";n.Code="2FF0A29B-5679-44f6-8FAD-F5968AE3E32E";n.Feedback="BB000720-4CF7-466A-BA47-1AB40B7A8DFB";n.PortfolioBacklogManagement="68DFF179-850A-4F20-A489-E6BD6E6A17EC";n.ReleaseManagementStakeholder="F2CB3207-42D8-42CA-81F3-43F9C5182AF7";n.ReleaseManagement="321CEBB8-72F6-40E6-836D-47580566CCF4";n.Standard="D91355E2-2A55-4CBE-9636-4D73F70FBA7C";n.TestManagementForBasicUsers="2BAEE8C9-BB36-4DE1-B991-3C1B6B5CB2B5";n.TestManagementForExpressSku="2DD84BB6-7821-4FDE-85BA-A6CC4AB1B7E9";n.TestManagement="8D00EEB7-D5AD-4141-B601-FBB500F264BA";n.ViewMyWorkItems="4F5D9D44-EC3F-4AF1-921A-DEE2147C54DC"}(e=t.LicenseFeatureIds||(t.LicenseFeatureIds={})),function(n){n.DismissNotificationRegistryPath="/notification/dismiss/"}(o=t.Messages||(t.Messages={})),function(n){n[n.Deleting=2]="Deleting";n[n.New=0]="New";n[n.WellFormed=1]="WellFormed";n[n.CreatePending=3]="CreatePending";n[n.All=-1]="All";n[n.Unchanged=-2]="Unchanged";n[n.Deleted=4]="Deleted"}(s=t.ProjectState||(t.ProjectState={})),function(n){n.EveryoneInTenant="EveryoneInTenant";n.TeamMembers="TeamMembers";n.Everyone="Everyone"}(h=t.ProjectVisibilityConstants||(t.ProjectVisibilityConstants={})),function(n){n.FeaturesCapabilityName="features";n.FeaturesEnabled="featuresEnabled";n.VersionControlCapabilityName="versioncontrol";n.VersionControlCapabilityAttributeName="sourceControlType";n.VersionControlGitEnabledAttributeName="gitEnabled";n.VersionControlTfvcEnabledAttributeName="tfvcEnabled";n.ProcessTemplateCapabilityName="processTemplate";n.ProcessTemplateCapabilityTemplateNameAttributeName="templateName";n.ProcessTemplateCapabilityTemplateTypeIdAttributeName="templateTypeId"}(c=t.TeamProjectCapabilitiesConstants||(t.TeamProjectCapabilitiesConstants={})),function(n){n.Project="Project";n.Team="Team";n.WebTeam="WebTeam";n.Repository="Repository"}(l=t.TfsSettingsScopeNames||(t.TfsSettingsScopeNames={}))});

define("Mention/Scripts/TFS.Mention",["require","exports","q","VSS/VSS","VSS/Diag","VSS/Utils/Array","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants"],function(n,t,i,r,u,f,e,o){function p(n,t,i,r){var u,f;return r===void 0&&(r="1.0"),u=h.HTML_MENTION_VERSION_ATTR+h.METADATA_ATTR_SEPARATOR+r,i&&(u+=","+i),f=$("<a/>").attr("href",n).attr(h.HTML_MENTION_ATTR_NAME,u).text(t),f[0].outerHTML+"&nbsp;"}var h,y,s,l,a,c,v;Object.defineProperty(t,"__esModule",{value:!0});t.ArtifactsCache=t.MentionsRenderer=t.ArtifactMentionParser=t.MentionProcessor=t.TextPartType=t.createHtmlMention=t.CssClasses=t.Constants=void 0,function(n){n.PATTERN_WORD_START_SEPARATOR="\\s|^|-|\\.|,|:|;|'|\"|\\(";n.PATTERN_WORD_END_SEPARATOR="\\s|$|\\.|,|:|;|-|' | \"|\\)";n.PATTERN_WORD_SEPARATOR="\\s#";n.METADATA_ATTR_SEPARATOR=":";n.HTML_MENTION_ATTR_NAME="data-vss-mention";n.HTML_MENTION_ID_ATTR="id";n.HTML_MENTION_VERSION_ATTR="version";n.HTML_MENTION_LEGACY_HREF_ATTR="mailto";n.HTML_MENTION_VERSION_10=n.HTML_MENTION_VERSION_ATTR+n.METADATA_ATTR_SEPARATOR+"1.0";n.HTML_MENTION_VERSION_20=n.HTML_MENTION_VERSION_ATTR+n.METADATA_ATTR_SEPARATOR+"2.0";n.HTML_MENTION_ID_ATTR_PREFIX=n.HTML_MENTION_ID_ATTR+n.METADATA_ATTR_SEPARATOR;n.HTML_MENTION_LEGACY_FORMAT_HREF=n.HTML_MENTION_LEGACY_HREF_ATTR+n.METADATA_ATTR_SEPARATOR;n.CODE_BLOCK_REGEX="(```[a-z]*[\\s\\S]*?```)|(<pre>[a-z]*[\\s\\S]*?<\/pre>)|(`[a-z]*[\\s\\S]*?`)";n.EMPTY_LINES_IN_BLOCK_REGEX="\\n[\\s]*\\n";n.CONTAINER_REGEX="(:::[\\s]*\\S+[\\s\\r\\n]+[\\s\\S]*?:::)";n.IDENTITY_PICKER_CONSUMER_ID="0ca36598-9c44-4a19-a3b1-74960b631990";n.DISCUSSION_MESSAGE_CLASS="discussion-messages-messagecontent";n.HTML_RENDERED_MENTION_ATTR_NAME="data-rendered-mention"}(h=t.Constants||(t.Constants={})),function(n){n.AUTOCOMPLETE_ID="mention-autocomp-id";n.AUTOCOMPLETE_TITLE="mention-autocomp-title"}(y=t.CssClasses||(t.CssClasses={}));t.createHtmlMention=p,function(n){n[n.Text=0]="Text";n[n.Mention=1]="Mention"}(s=t.TextPartType||(t.TextPartType={}));l=function(){function n(n){n===void 0&&(n=c.getDefault());this._parserFactories=[];this._mentionsRenderer=n;e.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WebAccessVersionControlPullRequestsMentions,!1)&&this._parserFactories.push(i.Promise(function(n){r.using(["VersionControl/Scripts/Mentions/PullRequestMentionParser"],function(t){n(function(){return t.createParser()})})}));this._MentionTranslatorFactory=i.Promise(function(n){r.using(["Mention/Scripts/TFS.Mention.People","Mention/Scripts/TFS.Mention.People.Registration"],function(t){n(function(){return t.getDisplayNameStorageKeyTranslatorInstance()})})})}return n.getDefault=function(){return n._defaultInstance||(n._defaultInstance=new n),n._defaultInstance},n.prototype.registerParser=function(n){this._parsers?this._parsers.then(function(t){for(var f,r=n(),e=r.getArtifactType(),i=0,u=t;i<u.length;i++)if(f=u[i],f.getArtifactType()===e)throw new Error("Cannot register additional parser of same artifact type after initialization.");return t.push(r),t}):this._parserFactories.push(i.resolve(n))},n.prototype.setMentionTranslationProvider=function(n){this._mentionTranslationProvider||(this._mentionTranslationProvider=n)},n.prototype.getMentionsRenderer=function(){return this._mentionsRenderer},n.prototype.parseCodeBlocksFromText=function(n){for(var u=[],i=new RegExp(h.CODE_BLOCK_REGEX,"ig"),e=new RegExp(h.EMPTY_LINES_IN_BLOCK_REGEX,"ig"),t,r,f;t=i.exec(n);)r=!0,n[t.index]==="`"&&n[t.index+1]!=="`"&&(f=n.substring(t.index,i.lastIndex),r=!e.exec(f)),r&&u.push({start:t.index,end:i.lastIndex});return u},n.prototype.parseContainersFromText=function(n){for(var t=[],i=new RegExp(h.CONTAINER_REGEX,"ig"),r;r=i.exec(n);)t.push({start:r.index,end:i.lastIndex});return t},n.prototype.parseInput=function(n){this._parsers||(this._parsers=i.allSettled(this._parserFactories).then(function(n){return n.map(function(n){return n.state=="fulfilled"?n.value():null}).filter(function(n){return n!=null})}));var t=this.parseCodeBlocksFromText(n),r=this.parseContainersFromText(n),u=t.concat(r);return this._parsers.then(function(t){var i=[{Text:n,Type:s.Text,StartIndex:0}],r,f;for(r in t)f=t[r],i=$.map(i,function(n){var t=n;return t.Type===s.Mention?n:f.parseMentions(t.Text,t.StartIndex,u)});return i})},n.prototype.renderParts=function(n,t,i){for(var u,e=this,o=$.Deferred(),r=$(),h=0,f=[],c=0;c<t.length;c++)r=r.add("<span>");return u=function(){h++;h===t.length&&(i.parts=f.join(","),o.resolve(r))},t.forEach(function(n,t){if(n.Type===s.Mention){var i=n;f.push(e._mentionsRenderer.getTelemetryMentionSummary(i));e._mentionsRenderer.renderMention($(r[t]),i).then(function(){u(t)},function(){u(t)})}else f.push("text"),$(r[t]).text(n.Text),u(t)}),r.appendTo(n),o.promise()},n.prototype.translateDisplayNamesToStorageKeysOfPersonMentions=function(n){return n&&this._mentionTranslationProvider?this._mentionTranslationProvider.translateDisplayNamesToStorageKeys(n):n},n.prototype.translateStorageKeysToDisplayNamesOfPersonMentions=function(n){var t=this,r=function(){return t._mentionTranslationProvider&&n?t._mentionTranslationProvider.translateStorageKeysToDisplayNames(n):i.resolve(n)};return this._mentionTranslationProvider?r():this._MentionTranslatorFactory.then(function(n){return t._mentionTranslationProvider||(t._mentionTranslationProvider=n()),r()})},n}();t.MentionProcessor=l;a=function(){function n(){}return n.prototype.parseFromText=function(){throw new Error("Not implemented");},n.prototype.getArtifactType=function(){throw new Error("Not implemented");},n.prototype.parseFromUrl=function(){throw new Error("Not implemented");},n.prototype.isInsideIgnoreBlock=function(n,t,i){var r=!1;return n&&n.forEach(function(n){n.start<t&&n.start<i&&n.end>t&&n.end>i&&(r=!0)}),r},n.prototype.parseMentions=function(n,t,i){var f=[],o,u,e,r;if(n){for(o=this.parseFromText(n),u=0,e=0;e<o.length;e++)r=o[e],r.index.start>u&&f.push({Type:s.Text,Text:n.substring(u,r.index.start),StartIndex:t+u}),this.isInsideIgnoreBlock(i,t+r.index.start,t+r.index.end)?f.push({Type:s.Text,Text:n.substring(r.index.start,r.index.end),StartIndex:t+r.index.start}):f.push({Type:s.Mention,Text:n.substring(r.index.start,r.index.end),ArtifactType:this.getArtifactType(),ArtifactId:r.id,StartIndex:t+r.index.start}),u=r.index.end;n.length>u&&f.push({Type:s.Text,Text:n.substring(u,n.length),StartIndex:t+u})}return f},n}();t.ArtifactMentionParser=a;c=function(){function n(){this._rendererFactories=[];this._vcRendererPromise=e.FeatureAvailabilityService.isFeatureEnabled(o.FeatureAvailabilityFlags.WebAccessVersionControlPullRequestsMentions,!1)?i.Promise(function(n){r.using(["VersionControl/Scripts/Mentions/PullRequestMentionRenderer"],function(t){n(t.createRenderer())},function(t){u.logError(t);n(null)})}):i.resolve(null)}return n.getDefault=function(){return n._defaultInstance||(n._defaultInstance=new n),n._defaultInstance},n.prototype.registerProvider=function(n){var i,u,t,r,f;if(this._renderers){for(i=n(),u=i.getArtifactType(),t=0,r=this._renderers;t<r.length;t++)if(f=r[t],f.getArtifactType()===u)throw new Error("Cannot register additional providers of same artifact type after initialization.");this._renderers.push(i)}else this._rendererFactories.push(n)},n.prototype.getRenderer=function(n){var t=this;return this._vcRendererPromise.then(function(i){return t._renderers||(t._renderers=$.map(t._rendererFactories,function(n){return n()}),i&&t._renderers.push(i)),f.first(t._renderers,function(t){return n.ArtifactType===t.getArtifactType()})})},n.prototype.renderMention=function(n,t){return this.getRenderer(t).then(function(i){if(i)return i.renderMention(t,function(t){var i=$(t);return i.appendTo(n),i});throw new Error("No rendering provider found for artifact type");})},n.prototype.getTelemetryMentionSummary=function(n){return this.getRenderer(n).then(function(t){return t?t.getTelemetryMentionSummary(n):null})},n}();t.MentionsRenderer=c;v=function(){function n(n,t,i){this._artifactsLoader=n;this._queueWaitMSec=t;this._maxBatchSize=i;this._cache={};this._queue=[];this._keyPoppedFromQueue={}}return n.prototype.getArtifactPromise=function(n){var t,r;return typeof this._cache[n]!="undefined"?t=this._cache[n]:(r=i.defer(),t=r.promise,this._cache[n]=t,this._queue.push({key:n,deferred:r}),this._keyPoppedFromQueue[n]=!1,this._delayProcessQueue(n)),t},n.prototype._delayProcessQueue=function(n){var t=this;setTimeout(function(){return t._processQueue(n)},this._queueWaitMSec)},n.prototype._processQueue=function(n){var t,i,r;if(!this._keyPoppedFromQueue[n])while(this._queue.length>0){for(i=this._maxBatchSize,this._queue.length<=i?(t=this._queue,this._queue=[]):(t=this._queue.slice(0,i),this._queue=this._queue.slice(i)),r=0;r<t.length;r++)this._keyPoppedFromQueue[t[r].key]=!0;this._processBatch(t)}},n.prototype._processBatch=function(n){var i=n.map(function(n){return n.key}),t=this._artifactsLoader(i);n.forEach(function(n){if(t.hasOwnProperty(n.key)){var i=t[n.key];i.then(function(t){n.deferred.resolve(t)},function(){n.deferred.reject.apply(n.deferred,arguments)})}else n.deferred.reject(new Error("Artifact was missing from results of batch load."))})},n}();t.ArtifactsCache=v});

define("Presentation/Scripts/TFS/TFS.Host.TfsContext",["require","exports","VSS/VSS","VSS/Context","VSS/Diag","VSS/Common/Contracts/Platform","VSS/Contributions/LocalPageData"],function(n,t,i,r,u,f,e){function l(){h=Date.now()}var h,s,a,o,c;Object.defineProperty(t,"__esModule",{value:!0});t.TfsContext=t.TeamFoundationHostType=t.NavigationContextLevels=t.Configuration=t.setImageTimestamp=void 0;t.setImageTimestamp=l;s=function(){function n(n){this._options=n||{}}return n.prototype.getRootPath=function(){return this._options.rootPath||"/"},n.prototype.getTheme=function(){return this._options.theme||"Default"},n.prototype.getResourcesPath=function(){return this._options.resourcesPath||this.getRootPath()+"_content/"},n.prototype.getResourcesFile=function(n){return this.getResourcesPath()+encodeURIComponent(n)},n.prototype.getTfsStaticRootPath=function(){return this._options.staticRootTfs||"/tfs/_static/tfs/12/"},n.prototype.get3rdPartyStaticRootPath=function(){return this._options.staticRoot3rdParty||"/tfs/_static/3rdParty/"},n.prototype.getThemedFile=function(n){return this.getTfsStaticRootPath()+"App_Themes/"+encodeURIComponent(this.getTheme())+"/"+encodeURIComponent(n)},n.prototype.getWebApiVersion=function(){return this._options.webApiVersion||"1"},n.prototype.getMailSettings=function(){return this._options.mailSettings},n}();t.Configuration=s,function(n){n[n.None=0]="None";n[n.Deployment=1]="Deployment";n[n.Application=2]="Application";n[n.Collection=4]="Collection";n[n.Project=8]="Project";n[n.Team=16]="Team";n[n.ApplicationAll=15]="ApplicationAll";n[n.All=31]="All"}(a=t.NavigationContextLevels||(t.NavigationContextLevels={})),function(n){n[n.Parent=-1]="Parent";n[n.Unknown=0]="Unknown";n[n.Deployment=1]="Deployment";n[n.Application=2]="Application";n[n.ProjectCollection=4]="ProjectCollection"}(o=t.TeamFoundationHostType||(t.TeamFoundationHostType={}));c=function(){function n(t){n._addedFpsCallback||(n._addedFpsCallback=!0,document.body.addEventListener("legacyFpsComplete",function(){n._defaultTfsContext=undefined}));this.initialize(t)}return n.getContextOrDefault=function(t){var i=r.parseWebContext(t);return i?new n(i):n.getDefault()},n.getDefault=function(){if(!n._defaultTfsContext){var t=r.getDefaultWebContext();if(!t)throw new Error("Default context information is missing.");n.setDefaultContext(t)}return n._defaultTfsContext},n.tryGetDefaultContext=function(){if(typeof n._defaultTfsContext=="undefined"){var t=r.getDefaultWebContext();t?n.setDefaultContext(t):n._defaultTfsContext=null}return n._defaultTfsContext},n.setDefaultContext=function(t){n._previousTfsContext?(n._previousTfsContext.initialize(t),n._defaultTfsContext=n._previousTfsContext):(n._defaultTfsContext=new n(t),n._previousTfsContext=n._defaultTfsContext)},n.prototype.initialize=function(t){this.contextData=t;var i=r.getPageContext();this.navigation={applicationServiceHost:n.createServiceHost(t.account,f.ContextHostType.Application,t,i.webAccessConfiguration.paths.rootPath),area:i.navigation.area,areaPrefix:i.webAccessConfiguration.api.areaPrefix,collection:n.createServiceHost(t.collection,f.ContextHostType.ProjectCollection,t,i.webAccessConfiguration.paths.rootPath),controllerPrefix:i.webAccessConfiguration.api.controllerPrefix,currentAction:i.navigation.currentAction,currentController:i.navigation.currentController,currentParameters:i.navigation.currentParameters,project:null,projectId:null,publicAccessPoint:{authority:t.host.authority,scheme:t.host.scheme,uri:t.account?t.account.uri:t.host.uri},serviceHost:n.createServiceHost(t.host,t.host.hostType,t,i.webAccessConfiguration.paths.rootPath),topMostLevel:i.navigation.topMostLevel,team:null,teamId:null};this.navigation.publicAccessPoint.uri[this.navigation.publicAccessPoint.uri.length-1]!=="/"&&(this.navigation.publicAccessPoint.uri+="/");t.project&&(this.navigation.project=t.project.name,this.navigation.projectId=t.project.id);t.team&&i.navigation.topMostLevel===f.NavigationContextLevels.Team&&(this.navigation.team=t.team.name,this.navigation.teamId=t.team.id);this.configuration=new s({mailSettings:i.webAccessConfiguration.mailSettings,resourcesPath:i.webAccessConfiguration.paths.resourcesPath,rootPath:i.webAccessConfiguration.paths.rootPath,staticRoot3rdParty:i.webAccessConfiguration.paths.staticRoot3rdParty,staticRootTfs:i.webAccessConfiguration.paths.staticRootTfs,theme:i.globalization.theme,webApiVersion:i.webAccessConfiguration.api.webApiVersion});this.isHosted=!!i.webAccessConfiguration.isHosted;this.allowStatsCollection=!!i.diagnostics.allowStatsCollection;this.activityId=i.diagnostics.activityId;this.sessionId=i.diagnostics.sessionId;this.isAADAccount=!!t.host.isAADAccount;this.isSameHost=window.self==window.top;t.user&&(this.currentUser=t.user.name,this.standardAccessMode=!t.user.limitedAccess,this.currentIdentity={displayName:t.user.name,email:t.user.email,id:t.user.id,isActive:!0,isContainer:!1,uniqueName:t.user.uniqueName});t.team&&(this.currentTeam={name:t.team.name,identity:{displayName:t.team.name,id:t.team.id,isActive:!0,isContainer:!0,email:null,uniqueName:null}})},n.createServiceHost=function(n,t,i,r){return n?{hostType:t,name:n.name,instanceId:n.id,uri:n.uri,relVDir:this.trimVirtualPath(n.relativeUri,r),vDir:n.relativeUri}:null},n.trimVirtualPath=function(n,t){if(!n||n.length===0)return n;for(n.toLowerCase().indexOf(t.toLowerCase())===0&&(n=n.substr(t.length));n.length>0&&n[0]==="/";)n=n.substr(1);while(n.length>0&&n[n.length-1]==="/")n=n.substr(0,n.length-1);return n},n.prototype.getSessionId=function(){var t,r,i,u,n;for(t=this.sessionId,r=document.cookie?document.cookie.split("; "):[],i=0,u=r.length;i<u;i++)if(n=r[i].split("="),n&&n.length===2&&n[0]==="Tfs-SessionId"){t=n[1];break}return this.sessionId=t,t},n.prototype.getHostUrl=function(){return this.navigation.publicAccessPoint.scheme+"://"+this.navigation.publicAccessPoint.authority},n.prototype.getServiceHostUrl=function(){return this.navigation.serviceHost.vDir},n.prototype.getPublicActionUrl=function(n,t,i){var r=this._constructActionUrl(n,t,i);return this.getHostUrl()+this.configuration.getRootPath()+r},n.prototype.getActionUrl=function(n,t,i){if(!this.isSameHost)return this.getPublicActionUrl(n,t,i);var r=this._constructActionUrl(n,t,i);return this.configuration.getRootPath()+r},n.prototype.getCollectionActionUrl=function(n,t,i,r){var u=this._getCollectionTfsContext(n);return u.getActionUrl(t,i,r)},n.prototype.getCollectionTfsContext=function(n){var t=$.extend(!0,{},this);return t.navigation.serviceHost=n,t.navigation.collection=n,t.contextData=$.extend(!0,{},t.contextData),t.contextData.host.id=n.instanceId,t.contextData.host.name=n.name,t.contextData.host.uri=n.uri,t.contextData.host.relativeUri=n.vDir,t.contextData.host.hostType=f.ContextHostType.ProjectCollection,t.contextData.collection=t.contextData.host,t},n.prototype._getCollectionTfsContext=function(n){if(this.navigation.serviceHost.hostType===o.ProjectCollection&&this.navigation.serviceHost.name.toLowerCase()===n.toLowerCase())return this;var t={instanceId:"",name:n,hostType:o.ProjectCollection,vDir:"",relVDir:n};return this.getCollectionTfsContext(t)},n.prototype.getPermalinkUrl=function(n,t,i){var r=this._constructPermalinkUrl(n,t,i);return this.configuration.getRootPath()+r},n.prototype.getIdentityImageUrl=function(t,i){var r=e.getSharedData("_identityDetails"),u={area:n._API,project:"",id:t,t:r&&r[t]?r[t].identityImageId:h};return this.getActionUrl("IdentityImage","common",$.extend(u,i))},n.prototype.isEmbedded=function(){return!!this.getClientHost()},n.prototype.getClientHost=function(){return r.getPageContext().webAccessConfiguration.clientHost},n.prototype._constructActionUrl=function(t,r,u){var h=this.navigation,e=[],c,a,v,f,l,w,b,d,s,k,y,p;if(b=h.areaPrefix||"",d=h.controllerPrefix||"",f=$.extend({},u),s=f.area,typeof s=="undefined"&&(s=h.area),delete f.area,c=f.serviceHost,typeof c=="undefined"&&(c=h.serviceHost),c&&(c.relVDir&&e.push(encodeURI(c.relVDir)),c.hostType===o.ProjectCollection&&(k=this._shouldBuildApiUrl(s,f),a=f.project,typeof a=="undefined"&&(a=k?h.projectId:h.project),a&&(e.push(encodeURIComponent(a)),v=f.team,(typeof f.includeTeam=="undefined"||f.includeTeam===null)&&(f.includeTeam=!0),f.includeTeam&&(typeof v=="undefined"&&(v=k?h.teamId:h.team),v&&e.push(encodeURIComponent(v)))))),delete f.serviceHost,delete f.project,delete f.team,delete f.includeTeam,s)if(Array.isArray(s))for(y=s,y.length>0&&e.push(encodeURIComponent(b+y[0])),p=1;p<y.length;p++)e.push(encodeURIComponent(y[p]));else e.push(encodeURIComponent(b+s));return r||(r=f.controller),delete f.controller,t||(t=f.action),delete f.action,l=f.parameters,delete f.parameters,l&&(r||(r=n._DEFAULT_CONTROLLER_NAME),t||(t=n._DEFAULT_ACTION_NAME)),r&&(e.push(encodeURIComponent(d+r)),t&&(e.push(encodeURIComponent(t)),l&&(Array.isArray(l)?e.push.apply(e,$.map(l,encodeURIComponent)):e.push(encodeURIComponent(l))))),(f.includeVersion||s===n._API)&&(f[n._VERSION]=this.configuration.getWebApiVersion()),f.includeLanguage&&i.uiCulture&&(f[n._LANGUAGE]=i.uiCulture),delete f.includeVersion,f.area!==n._API&&this.getClientHost()&&(f[n._CLIENTHOST]=this.getClientHost()),w=$.param(f),e.join("/")+(w?"?"+w:"")},n.prototype._constructPermalinkUrl=function(t,i,r){var s=this.navigation,u=[],f=$.extend({},r),o,h=s.controllerPrefix||"",c=i||f.controller||n._DEFAULT_CONTROLLER_NAME,l=t||f.action||n._DEFAULT_ACTION_NAME,e=f.parameters;return u.push(n._PERMALINK_PREFIX),u.push(encodeURIComponent(h+c)),u.push(encodeURIComponent(l)),delete f.controller,delete f.action,delete f.parameters,e&&(Array.isArray(e)?u.push.apply(u,$.map(e,encodeURIComponent)):u.push(encodeURIComponent(e))),o=$.param(f),u.join("/")+(o?"?"+o:"")},n.prototype._shouldBuildApiUrl=function(t,i){var r;return t&&(r=Array.isArray(t)?t[0]:t),i.useApiUrl||r===n._API&&(typeof i.useApiUrl=="undefined"||i.useApiUrl)},n._DEFAULT_CONTROLLER_NAME="home",n._DEFAULT_ACTION_NAME="index",n._CLIENTHOST="clientHost",n._VERSION="__v",n._LANGUAGE="__loc",n._PERMALINK_PREFIX="_permalink",n._API="api",n.ControlExtensions={initializeEnhancementOptions:function(t,i){return $.extend({},i,{tfsContext:n.getContextOrDefault(t)})}},n}();t.TfsContext=c});

/*!
 * jQuery UI Autocomplete 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define("jQueryUI/autocomplete",["jquery","./menu","./keycode","./position","./safe-active-element","./version","./widget"],e):e(jQuery)}(function(e){"use strict";return e.widget("ui.autocomplete",{version:"1.13.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,u="input"===n;this.isMultiLine=o||!u&&this._isContentEditable(this.element),this.valueMethod=this.element[o||u?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,void(i=!0);t=!1,s=!1,i=!1;var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case o.UP:t=!0,this._keyEvent("previous",n);break;case o.DOWN:t=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){if(s)return s=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,i){var s,n;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),(s=i.item.attr("aria-label")||n.value)&&String.prototype.trim.call(s).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(e("<div>").text(s))},100))},menuselect:function(t,i){var s=i.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=s})),!1!==this._trigger("select",t,{item:s})&&this._value(s.value),this.term=this._value(),this.close(t),this.selectedItem=s}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;Array.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||i||s)||(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(e("<div>").text(i))},100))}}),e.ui.autocomplete});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Mention/Scripts/TFS.Mention.Helpers",["require","exports","VSS/Utils/Core","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/String","jQueryUI/autocomplete"],function(n,t,i,r,u){function c(n,t,i){var e,c,o,l,s,r,u,h;for(t.sort(function(n,t){return t.length-n.length}),n=n.toUpperCase(),t=t.map(function(n){return n.toUpperCase()}),e=[],c=[],o=0,l=t;o<l.length;o++)for(s=l[o],r=0;;){if(r=n.indexOf(s,r),r<0||i===f.Prefix&&r>0)break;if(u={start:r,end:r+s.length},r+=s.length,e[u.start]||e[u.end])break;for(h=u.start;h<u.end;h++)e[h]=!0;c.push(u)}return c}function l(n){for(var h,f,t,e,c,i=[],o=0,r=0,s=n;r<s.length;r++)if(h=s[r],f=u.htmlEncode(h),f.length===1)i[o++]=!0;else for(t=0,e=f;t<e.length;t++)c=e[t],i[o++]=!1;return i}function a(n,t){return n.filter(function(n){var i=n.start,r=n.end;return t[i]||t[r]})}function v(n,t,i){function c(t){var u=t.start,f=t.end,r=n.substr(u,f-u);return o[r]||(o[r]=i.replace("$&",r)),o[r]}var o={},r,u,e,s,f,h;for(t.sort(function(n,t){return t.end-n.end}),r="",u=n.length,e=0,s=t;e<s.length;e++)f=s[e],h=c(f),r=h+n.substr(f.end,u-f.end)+r,u=f.start;return u>0&&(r=n.substr(0,u)+r),r}function y(n,t,i,r,f){var o=f?u.htmlEncode(n):n,e=c(o,t,i),s;return f&&(s=l(n),e=a(e,s)),v(o,e,r)}function p(n,t,i){var r,o,u,s,e,h;for(n=n.toUpperCase(),r={},o=!1,u=0,s=t;u<s.length;u++)e=s[u],h=n.indexOf(e.toUpperCase()),i===f.Contains&&h>=0||i===f.Prefix&&h===0?(r[e]=!0,o=!0):r[e]=!1;return{found:r,atLeastOneMatch:o}}function w(n,t,i,r,f){if(typeof n=="undefined"||n===null||t===null||!t.length)return{found:{},highlightedSource:n};t=t.slice(0,o);var s=p(n,t,i),h=s.found,c=s.atLeastOneMatch,e=n;return c&&r?e=y(n,t,i,r,f):f&&(e=u.htmlEncode(n)),{found:h,highlightedSource:e}}function s(){return window.parent!==window}function h(){try{if(s()&&window.parent.TfsMentionHelpers)return window.parent.TfsMentionHelpers.getDefaultTfsContext()}catch(n){}return e.getDefaultTfsContext()}function b(){var n;try{n=h()}catch(t){n=null}return!!n}function k(n,t){return i.delegate(n,t)}function d(n,t,r){var u,f=i.throttledDelegate(n,t,function(){var t=u;u=null;r.apply(n,t)});return function(){return u=arguments,f()}}function g(){return window.location}function nt(n){return $("<div/>").html(n).text()}function tt(n){if(!n)return null;var t=n.ownerDocument;return t?t.defaultView||t.parentWindow:null}function it(n){return n.charCode?!0:!1}var o,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.eventHasPrintableCharacter=t.TfsMentionHelpers=t.getWindow=t.convertHtmlToText=t.getWindowLocation=t.throttledDelegate=t.delegate=t.environmentIsSupported=t.getMainTfsContext=t.hasParentWindow=t.searchString=t.SearchBehavior=void 0;o=10,function(n){n[n.Contains=0]="Contains";n[n.Prefix=1]="Prefix"}(f=t.SearchBehavior||(t.SearchBehavior={}));t.searchString=w;t.hasParentWindow=s;t.getMainTfsContext=h;t.environmentIsSupported=b;t.delegate=k;t.throttledDelegate=d;t.getWindowLocation=g;t.convertHtmlToText=nt;t.getWindow=tt,function(n){function t(){return r.TfsContext.getDefault()}n.getDefaultTfsContext=t}(e=t.TfsMentionHelpers||(t.TfsMentionHelpers={}));t.eventHasPrintableCharacter=it;window.TfsMentionHelpers=e});

define("Mention/Scripts/TFS.Mention.Autocomplete.JQueryAutocomplete",["require","exports","VSS/Utils/Accessibility","VSS/Diag","VSS/Utils/UI","VSS/Utils/String","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/Resources/TFS.Resources.Mention","VSS/Utils/Core","jQueryUI/autocomplete"],function(n,t,i,r,u,f,e,o,s){var l,c,h,a;Object.defineProperty(t,"__esModule",{value:!0});t.JQueryAutocompletePlugin=t.CssClasses=void 0,function(n){function t(n,i){var r=null,u;return n&&(u=/^key(down|up|press)$/i.test(n.type),u?r=n:n.originalEvent&&i&&i>0&&(r=t(n.originalEvent,i-1))),r}function i(n){return n.textBeforeSelection+n.textInSelection+n.textAfterSelection}n.tryGetKeyboardEvent=t;n.getStringFromInputText=i}(l||(l={})),function(n){n.AUTOCOMPLETE_CONTAINER="mention-autocomplete-container";n.AUTOCOMPLETE_FOOTER="mention-autocomplete-footer";n.AUTOCOMPLETE_FOOTER_CONTENTS="mention-autocomplete-footer-contents";n.HIGHLIGHT="mention-autocomplete-highlight";n.AUTOCOMPLETE_NO_ITEMS_FOUND="mention-autocomplete-no-items";n.AUTOCOMPLETE_FOOTER_LOADING="mention-autocomplete-loading"}(c=t.CssClasses||(t.CssClasses={})),function(n){n[n.Suggestion=0]="Suggestion";n[n.Error=1]="Error";n[n.Empty=2]="Empty";n[n.Loading=3]="Loading"}(h||(h={}));a=function(){function n(n){this._isOpen=!1;this._options=n}return n.prototype.initialize=function(){var t=this,n;this._$inputElement=$("<input>").autocomplete({appendTo:this._getMenuContainer(),autoFocus:!0,source:e.delegate(this,this._autocompleteOnSource),select:e.delegate(this,this._autocompleteOnSelect),focus:e.delegate(this,this._autocompleteOnFocus),open:e.delegate(this,this._autocompleteOnOpen),close:e.delegate(this,this._autocompleteOnClose),messages:{noResults:"",results:function(){return""}}});this._$inputElement.on("keydown keypress",function(n){e.eventHasPrintableCharacter(n)||(n.keyCode===u.KeyCode.UP||n.keyCode===u.KeyCode.DOWN||n.keyCode===u.KeyCode.PAGE_UP||n.keyCode===u.KeyCode.PAGE_DOWN)&&t._handleAutocompleteReset(n)});this._$menuContainer.on("mousewheel",function(n){n.stopPropagation()});n=this._getAutocompleteInstance();n._resizeMenu=e.delegate(this,this._autocompleteResizeMenu);n._renderMenu=e.delegate(this,this._autocompleteRenderMenu);n._renderItem=e.delegate(this,this._autocompleteRenderItem)},n.prototype.__test=function(){return{_$footer:this._$footer}},n.prototype.prefetch=function(){},n.prototype.getPluginName=function(){throw new Error("Not implemented");},n.prototype.canOpen=function(){throw new Error("Not implemented");},n.prototype.getSuggestions=function(){throw new Error("Not Implemented");},n.prototype.renderSuggestion=function(){throw new Error("Not Implemented");},n.prototype.getReplacementText=function(){throw new Error("Not Implemented");},n.prototype.getReplacementHtml=function(){throw new Error("Not Implemented");},n.prototype.afterRender=function(){},n.prototype.onClose=function(){},n.prototype.dispose=function(){this._$inputElement&&(this._$inputElement.autocomplete("destroy"),this._$inputElement.remove(),this._$inputElement=null);this._$menuContainer&&(this._$menuContainer.remove(),this._$menuContainer=null);this._options=null},n.prototype.getOptions=function(){return this._options},n.prototype.open=function(n,t){this._inputText=t;this._isOpen=!0},n.prototype.suggest=function(n,t){var i=$.Deferred();return this._inputText=t,this._$inputElement.val(l.getStringFromInputText(t)),this._$inputElement.autocomplete("search",i,n),i},n.prototype.close=function(n,t){this._inputText=t;this._$inputElement.autocomplete("close",n);this._isOpen=!1},n.prototype.handle=function(n){this._$inputElement.trigger(n)},n.prototype.isOpen=function(){return this._isOpen},n.prototype._getMenuContainer=function(){if(!this._$menuContainer){var n=this._options.menuContainer().length?this._options.menuContainer():$(document.body);this._$menuContainer=$("<div/>").addClass(c.AUTOCOMPLETE_CONTAINER).appendTo(n)}return this._$menuContainer},n.prototype._getMenuMaxHeight=function(){return this._options.menuMaxHeight||n.DEFAULT_MENU_MAX_HEIGHT},n.prototype._getAutocompleteInstance=function(){return this._$inputElement.data("ui-autocomplete")},n.prototype._applySuggestionToTextBox=function(n,t,i){var f=this,e={selectionIndex:"".concat(t.index)},r=this.getReplacementText(this._inputText,t.suggestion,i),u;this._$inputElement.val(l.getStringFromInputText(r));u={getPlainText:function(){return r},getHtml:function(){return f.getReplacementHtml(t.suggestion)}};i?this._options.focus&&this._options.focus(n,u):(this._inputText=r,this._options.select&&this._options.select(n,u,e))},n.prototype._handleAutocompleteReset=function(n){var r=l.getStringFromInputText(this._inputText),u=this._$inputElement.val(),t,i;u===r&&this._options.focus&&(t=this._inputText,i={getPlainText:function(){return t},getHtml:function(){return""}},this._options.focus(n,i))},n.prototype._getMentionTextArea=function(){return this._options.textElement?this._options.textElement():null},n.prototype._autocompleteResizeMenu=function(){var r=this,t=$(this._getAutocompleteInstance().menu.element),i=this._options.positioningElement?typeof this._options.positioningElement=="function"?this._options.positioningElement():this._options.positioningElement:this._getMenuContainer(),w=this._options.isMenuWidthOverridable&&this._options.menuWidth?this._options.menuWidth:i.innerWidth(),f,e,h;t.width(w);f=$(">:visible",t).first();e=Math.max(u.Positioning.getZIndex(i)*1+1,n.MIN_MENU_ZINDEX);t.css("z-index",e);var c=i.offset(),l=c.top-$(window).scrollTop(),b=$(window).height()-l-i.outerHeight(!1)-n.MENU_FOOTER_HEIGHT,o=l>this._getMenuMaxHeight()&&this._getMenuMaxHeight()>b,s=0;if(this._options.allowHorizontalShift){var k=c.left-$(window).scrollLeft(),a=$(window).width()-k,v=t.outerWidth();s=v<a?0:v-a}if(h=function(u){$(this).css(u);r._$footer.css("z-index",e);r._$footer.width(t.width());r._$footer.height(n.MENU_FOOTER_HEIGHT);r._$footer.show();f.length>0?r._$footer.position({my:"left top-1",at:"left bottom",collision:"none",of:t}):r._$footer.position({my:"left ".concat(o?"bottom":"top"),at:"left ".concat(o?"top":"bottom"),collision:"none",of:i})},o?this._$inputElement.autocomplete({position:{my:"left bottom",at:"left-".concat(s," top-").concat(n.MENU_FOOTER_HEIGHT),collision:"none",of:i,using:h}}):this._$inputElement.autocomplete({position:{my:"left top",at:"left-".concat(s," bottom"),collision:"none",of:i,using:h}}),f.length>0){var d=f.position().top,y=$(">:visible",t).last(),g=y.position().top+y.outerHeight(),p=g-d,nt=p<=this._getMenuMaxHeight()?p:this._getMenuMaxHeight();t.height(nt);this.afterRender(t);t.css("max-height","").css("overflow","")}else t.css("max-height",0).css("overflow","hidden")},n.prototype._renderFooter=function(n,t){return this._$footer||(this._$footer=$("<div/>").addClass(c.AUTOCOMPLETE_FOOTER),t&&this._$footer.addClass(t),this._$footer.appendTo(this._$menuContainer).hide()),this._$footer.attr("class",c.AUTOCOMPLETE_FOOTER),t&&this._$footer.addClass(t),i.announce(n,!0),this._$footer.text(n)},n.prototype._autocompleteRenderMenu=function(n,t){var i=this._getAutocompleteInstance();n.addClass("mention-autocomplete-menu").attr("role","listbox");t[0].type===h.Suggestion?(t.forEach(function(t){i._renderItemData(n,t)}),this._renderFooter(this._getFooterItemsCountString(t.length),c.AUTOCOMPLETE_FOOTER_CONTENTS)):(this._addFakeAnchor(n,t[0]),t[0].type===h.Loading?this._renderFooter(o.AutocompleteLoading,c.AUTOCOMPLETE_FOOTER_LOADING):t[0].type===h.Empty?this._renderFooter(o.AutocompleteNoSuggestions,c.AUTOCOMPLETE_NO_ITEMS_FOUND):t[0].type===h.Error&&this._renderFooter(o.AutocompleteServerError))},n.prototype._getFooterItemsCountString=function(n){if(n===0)return o.AutocompleteNoSuggestions;var t=n===1?o.AutocompleteSuggestionsSingular:o.AutocompleteSuggestionsPlural;return f.format(t,n)},n.prototype._addFakeAnchor=function(n,t){var i=$("<li/>").hide().appendTo(n).data("ui-autocomplete-item",t);$("<a>.<\/a>").appendTo(i)},n.prototype._autocompleteRenderItem=function(n,t){return this.renderSuggestion(n,t.suggestion).addClass("mention-autocomplete-item").attr("role","option").attr("aria-selected","false")},n.prototype._autocompleteOnSource=function(t,i){var r=t.term,u;if(r&&r.resolve||(r=null),!this._isOpen){this._getAutocompleteInstance().close();i(null);return}u=!1;this.getSuggestions(this._inputText).done(function(n){var f,t;u=!0;n?(f=n.result&&n.result.length?n.result.map(function(n,t){return{type:h.Suggestion,index:t,suggestion:n,error:null}}):[{type:h.Empty,index:null,suggestion:null,error:null}],r&&r.resolve(n),i(f)):(t=new Error("Suggestions is Null"),r&&r.reject(t),i([{type:h.Error,index:null,suggestion:null,error:t}]))}).fail(function(n){u=!0;r&&r.reject(n);i([{type:h.Error,index:null,suggestion:null,error:n}])});setTimeout(function(){u||i([{type:h.Loading,index:null,suggestion:null,error:null}])},n.LOADING_DELAY_TIME)},n.prototype._autocompleteOnFocus=function(n,t){var f=this,i,r,u;return t.item&&t.item.type===h.Suggestion&&(this._applySuggestionToTextBox(n,t.item,!0),t.item.value=this._$inputElement.val(),$(".ui-helper-hidden-accessible").hide().attr("aria-live","off")),i=this._$menuContainer.find("ul"),i&&i.length&&(r=this._getMentionTextArea(),u=i.find(".mention-autocomplete-item"),u.each(function(n,t){var i=$(t);i.children(".ui-menu-item-wrapper").hasClass("ui-state-active")?(i.attr("aria-selected","true"),r&&s.delay(f,0,function(){r.attr("aria-activedescendant",i.attr("id"))})):i.attr("aria-selected","false")})),!1},n.prototype._autocompleteOnSelect=function(n,t){return t.item.type===h.Suggestion&&this._applySuggestionToTextBox(n,t.item,!1),!1},n.prototype._autocompleteOnOpen=function(){var n=this._getMentionTextArea(),t=$(this._getAutocompleteInstance().menu.element),i;n&&t&&t.length&&(i=n.length&&n[0].tagName==="DIV",n.attr({"aria-owns":t[0].id,"aria-expanded":i?null:"true","aria-autocomplete":"list"}))},n.prototype._autocompleteOnClose=function(n){var r=$(this._getAutocompleteInstance().menu.element),i,t,f;if(r)this.onClose(r);this._$footer.hide();i=l.tryGetKeyboardEvent(n,5);i&&i.keyCode===u.KeyCode.ESCAPE&&this._handleAutocompleteReset(n);this._options.close&&this._options.close(n,this._inputText);t=this._getMentionTextArea();t&&(f=t.length&&t[0].tagName==="DIV",t.attr({"aria-owns":null,"aria-autocomplete":null,"aria-activedescendant":null,"aria-expanded":f?null:"false"}))},n.MENU_FOOTER_HEIGHT=20,n.DEFAULT_MENU_MAX_HEIGHT=200,n.LOADING_DELAY_TIME=100,n.MIN_MENU_ZINDEX=1000001,n}();t.JQueryAutocompletePlugin=a});

var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)};define("Mention/Scripts/TFS.Social.Telemetry",["require","exports","Mention/Scripts/TFS.Mention.Helpers","VSS/Telemetry/Services","VSS/VSS"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.EventLogging=t.CustomerIntelligenceConstants=void 0;f=function(){function n(){}return n.MENTION_AREA="Mention",n.WORKITEMS_INITIALIZE_EVENT="WorkitemsInitialize",n.WORKITEMS_CLICK_EVENT="WorkitemsClick",n.PEOPLE_CLICK_EVENT="PeopleClick",n.AUTOCOMPLETE_OPEN_EVENT="AutocompleteOpen",n.AUTOCOMPLETE_SUGGEST_EVENT="AutocompleteSuggest",n.AUTOCOMPLETE_SELECT_EVENT="AutocompleteSelect",n.AUTOCOMPLETE_CANCEL_EVENT="AutocompleteCancel",n.MENTIONABLE_PREVIEW_EVENT="MentionablePreview",n.MENTIONABLE_EDIT_EVENT="MentionableEdit",n.WORKITEMPROVIDER_SEARCHONSERVER_EVENT="WorkItemProvider.SearchOnServer",n.SOCIAL_AREA="Social",n.DISCUSSION_RENDER_EVENT="DiscussionRender",n.DISCUSSION_SHOWMORE_EVENT="DiscussionShowMore",n.MATERIALIZE_IDENTITY="MaterializeIdentity",n.MATERIALIZE_IDENTITY_ERROR="MaterializeIdentityError",n.MENTIONS_REPLY_ALL_ACTIVATED="MentionsReplyAllActivated",n}();t.CustomerIntelligenceConstants=f;e=function(){function n(){}return n.publishAutocompleteOpenEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_OPEN_EVENT,t)},n.publishAutocompleteSuggestEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_SUGGEST_EVENT,t)},n.publishAutocompleteSelectEvent=function(t){var i=t.identity?n._sanitizeIdentityEvent({identity:t.identity}):{identity:undefined};n.delayedPublish(f.AUTOCOMPLETE_SELECT_EVENT,__assign(__assign({},t),{identity:i.identity}))},n.publishAutocompleteCancelEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_CANCEL_EVENT,t)},n.publishWorkItemsInitializeEvent=function(t){n.delayedPublish(f.WORKITEMS_INITIALIZE_EVENT,t)},n.publishWorkItemsClickEvent=function(t,i){n.delayedPublish(f.WORKITEMS_CLICK_EVENT,$.extend({},t,i))},n.publishPeopleClickEvent=function(t,i){var r=n._sanitizeIdentityEvent(t);n.delayedPublish(f.PEOPLE_CLICK_EVENT,$.extend({},r,i))},n.publishMentionableEditEvent=function(t){n.delayedPublish(f.MENTIONABLE_EDIT_EVENT,t)},n.publishMentionablePreviewEvent=function(t){n.delayedPublish(f.MENTIONABLE_PREVIEW_EVENT,t)},n.publishDiscussionRenderEvent=function(t){n.delayedPublish(f.DISCUSSION_RENDER_EVENT,t,f.SOCIAL_AREA)},n.publishDiscussionShowMoreClickEvent=function(t){n.delayedPublish(f.DISCUSSION_SHOWMORE_EVENT,t,f.SOCIAL_AREA)},n.publishMaterializeIdentityEvent=function(t){var i=n._sanitizeIdentityEvent(t);n.delayedPublish(f.MATERIALIZE_IDENTITY,i)},n.publishMaterializeIdentityError=function(t){var i=n._sanitizeIdentityEvent(t);n.delayedPublish(f.MATERIALIZE_IDENTITY_ERROR,i)},n.publishMentionsReplyAllActivated=function(t){n.delayedPublish(f.MENTIONS_REPLY_ALL_ACTIVATED,t)},n._sanitizeIdentityEvent=function(n){var t=n.identity,i=n.error;return{identity:{localId:t.localId,entityType:t.entityType,originId:t.originId,originDirectory:t.originDirectory,active:t.active},error:i}},n._getTfsContext=function(){return n.tfsContext||(n.tfsContext=i.getMainTfsContext()),n.tfsContext},n._extendProperties=function(t){var i=n._getTfsContext().navigation.projectId;t=t||{};t.projectId="".concat(i)},n.delayedPublish=function(t,i,u){u===void 0&&(u=f.MENTION_AREA);n._extendProperties(i);r.publishEvent(new r.TelemetryEventData(u,t,i))},n.publish=function(t,i){n._extendProperties(i);r.publishEvent(new r.TelemetryEventData(f.MENTION_AREA,t,i))},n}();t.EventLogging=e;u.tfsModuleLoaded("TFS.Social.Telemetry",t)});

define("Mention/Scripts/WorkItem/WorkItemMentionUtilities",["require","exports","VSS/Utils/String","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.Autocomplete.JQueryAutocomplete"],function(n,t,i,r,u,f){function e(n,t){return n.split(/\s+/).filter(function(n){return!!n}).map(function(n){return t?i.htmlEncode(n):n})}function l(n,i,u){u===void 0&&(u=t.DEFAULT_HIGHLIGHT_SUBSTITUTION_PATTERN);var f=e(n,!0),o=r.searchString(i.id.toString(),f,r.SearchBehavior.Prefix,u),s=r.searchString(i.title,f,r.SearchBehavior.Contains,u,"htmlEncode"),h=r.searchString(i.workItemType,f,r.SearchBehavior.Contains,u),c=!0;return f.forEach(function(n){var t=o.found[n]||h.found[n]||s.found[n];t||(c=!1)}),c?{id:o.highlightedSource,title:s.highlightedSource,workItemType:h.highlightedSource}:i}function o(n,t){return"".concat(n," ").concat(t)}function s(n,t){return"".concat(n,": ").concat(t)}function a(n){return"#".concat(n)}function v(n,i){return n?i?t.InfiniteTermsMentionPattern:t.MultipleTermsMentionPattern:t.SingleTermMentionPattern}function y(n,t,i){var r=h(t),f=o(n,t),e=s(f,i);return u.createHtmlMention(r,e)}function h(n){var t=new URI(c(n)),i;return t.host()||(i=r.getWindowLocation(),t.host(i.host),t.protocol(i.protocol)),t.href()}function c(n,i){var u=r.getMainTfsContext();return u.getPublicActionUrl(t.EDIT_ACTION_NAME,t.CONTROLLER_NAME,{parameters:n,project:i||u.navigation.projectId,team:""})}function p(n){if(n.length!==7||n[0]!=="#")throw new Error("Expected color in format #aabbcc");return[parseInt(n.substr(1,2),16),parseInt(n.substr(3,2),16),parseInt(n.substr(5,2),16)]}Object.defineProperty(t,"__esModule",{value:!0});t.hexToRgb=t.getWorkItemUrl=t.getWorkItemHref=t.createWorkItemMentionHtml=t.mentionPattern=t.getWorkItemMentionText=t.getWorkItemSummary=t.getWorkItemTypeWithIdString=t.searchHighlightedWorkItem=t.getMultiTerms=t.PatternSplitter=t.CONTROLLER_NAME=t.EDIT_ACTION_NAME=t.AfterMentionPattern=t.InfiniteTermsMentionPattern=t.MultipleTermsMentionPattern=t.MultipleTermsLimit=t.SingleTermMentionPattern=t.NumberMentionPattern=t.DEFAULT_HIGHLIGHT_SUBSTITUTION_PATTERN=void 0;t.DEFAULT_HIGHLIGHT_SUBSTITUTION_PATTERN='<span class="'.concat(f.CssClasses.HIGHLIGHT,'">$&<\/span>');t.NumberMentionPattern=new RegExp("(".concat(u.Constants.PATTERN_WORD_START_SEPARATOR,")#([0-9]*)$"),"i");t.SingleTermMentionPattern=new RegExp("(".concat(u.Constants.PATTERN_WORD_START_SEPARATOR,")#(([^").concat(u.Constants.PATTERN_WORD_SEPARATOR,"]*)$)"),"i");t.MultipleTermsLimit=3;t.MultipleTermsMentionPattern=new RegExp("(".concat(u.Constants.PATTERN_WORD_START_SEPARATOR,")#(([^").concat(u.Constants.PATTERN_WORD_SEPARATOR,"]+\\s?){0,").concat(t.MultipleTermsLimit,"}$)"),"i");t.InfiniteTermsMentionPattern=new RegExp("(".concat(u.Constants.PATTERN_WORD_START_SEPARATOR,")#(([^").concat(u.Constants.PATTERN_WORD_SEPARATOR,"]+\\s?){0,}$)"),"i");t.AfterMentionPattern=new RegExp("^(".concat(u.Constants.PATTERN_WORD_END_SEPARATOR,")"),"i");t.EDIT_ACTION_NAME="edit";t.CONTROLLER_NAME="workitems";t.PatternSplitter=/\s+/;t.getMultiTerms=e;t.searchHighlightedWorkItem=l;t.getWorkItemTypeWithIdString=o;t.getWorkItemSummary=s;t.getWorkItemMentionText=a;t.mentionPattern=v;t.createWorkItemMentionHtml=y;t.getWorkItemHref=h;t.getWorkItemUrl=c;t.hexToRgb=p});

define("TFS/WorkItemTracking/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.WorkItemTypeFieldsExpandLevel=t.WorkItemRecentActivityType=t.WorkItemExpand=t.WorkItemErrorPolicy=t.TreeStructureGroup=t.TreeNodeStructureType=t.TemplateType=t.ReportingRevisionsExpand=t.QueryType=t.QueryResultType=t.QueryRecursionOption=t.QueryOption=t.QueryExpand=t.QueryErrorPolicy=t.ProvisioningActionType=t.LogicalOperation=t.LinkQueryMode=t.GetFieldsExpand=t.FieldUsage=t.FieldType=t.CommentSortOrder=t.CommentReactionType=t.CommentFormat=t.CommentExpandOptions=t.ClassificationNodesErrorPolicy=void 0,function(n){n[n.Fail=1]="Fail";n[n.Omit=2]="Omit"}(i=t.ClassificationNodesErrorPolicy||(t.ClassificationNodesErrorPolicy={})),function(n){n[n.None=0]="None";n[n.Reactions=1]="Reactions";n[n.RenderedText=8]="RenderedText";n[n.RenderedTextOnly=16]="RenderedTextOnly";n[n.All=-17]="All"}(r=t.CommentExpandOptions||(t.CommentExpandOptions={})),function(n){n[n.Markdown=0]="Markdown";n[n.Html=1]="Html"}(u=t.CommentFormat||(t.CommentFormat={})),function(n){n[n.Like=0]="Like";n[n.Dislike=1]="Dislike";n[n.Heart=2]="Heart";n[n.Hooray=3]="Hooray";n[n.Smile=4]="Smile";n[n.Confused=5]="Confused"}(f=t.CommentReactionType||(t.CommentReactionType={})),function(n){n[n.Asc=1]="Asc";n[n.Desc=2]="Desc"}(e=t.CommentSortOrder||(t.CommentSortOrder={})),function(n){n[n.String=0]="String";n[n.Integer=1]="Integer";n[n.DateTime=2]="DateTime";n[n.PlainText=3]="PlainText";n[n.Html=4]="Html";n[n.TreePath=5]="TreePath";n[n.History=6]="History";n[n.Double=7]="Double";n[n.Guid=8]="Guid";n[n.Boolean=9]="Boolean";n[n.Identity=10]="Identity";n[n.PicklistString=11]="PicklistString";n[n.PicklistInteger=12]="PicklistInteger";n[n.PicklistDouble=13]="PicklistDouble"}(o=t.FieldType||(t.FieldType={})),function(n){n[n.None=0]="None";n[n.WorkItem=1]="WorkItem";n[n.WorkItemLink=2]="WorkItemLink";n[n.Tree=3]="Tree";n[n.WorkItemTypeExtension=4]="WorkItemTypeExtension"}(s=t.FieldUsage||(t.FieldUsage={})),function(n){n[n.None=0]="None";n[n.ExtensionFields=1]="ExtensionFields";n[n.IncludeDeleted=2]="IncludeDeleted"}(h=t.GetFieldsExpand||(t.GetFieldsExpand={})),function(n){n[n.WorkItems=0]="WorkItems";n[n.LinksOneHopMustContain=1]="LinksOneHopMustContain";n[n.LinksOneHopMayContain=2]="LinksOneHopMayContain";n[n.LinksOneHopDoesNotContain=3]="LinksOneHopDoesNotContain";n[n.LinksRecursiveMustContain=4]="LinksRecursiveMustContain";n[n.LinksRecursiveMayContain=5]="LinksRecursiveMayContain";n[n.LinksRecursiveDoesNotContain=6]="LinksRecursiveDoesNotContain"}(c=t.LinkQueryMode||(t.LinkQueryMode={})),function(n){n[n.NONE=0]="NONE";n[n.AND=1]="AND";n[n.OR=2]="OR"}(l=t.LogicalOperation||(t.LogicalOperation={})),function(n){n[n.Import=0]="Import";n[n.Validate=1]="Validate"}(a=t.ProvisioningActionType||(t.ProvisioningActionType={})),function(n){n[n.Fail=1]="Fail";n[n.Omit=2]="Omit"}(v=t.QueryErrorPolicy||(t.QueryErrorPolicy={})),function(n){n[n.None=0]="None";n[n.Wiql=1]="Wiql";n[n.Clauses=2]="Clauses";n[n.All=3]="All";n[n.Minimal=4]="Minimal"}(y=t.QueryExpand||(t.QueryExpand={})),function(n){n[n.Doing=1]="Doing";n[n.Done=2]="Done";n[n.Followed=3]="Followed"}(p=t.QueryOption||(t.QueryOption={})),function(n){n[n.ParentFirst=0]="ParentFirst";n[n.ChildFirst=1]="ChildFirst"}(w=t.QueryRecursionOption||(t.QueryRecursionOption={})),function(n){n[n.WorkItem=1]="WorkItem";n[n.WorkItemLink=2]="WorkItemLink"}(b=t.QueryResultType||(t.QueryResultType={})),function(n){n[n.Flat=1]="Flat";n[n.Tree=2]="Tree";n[n.OneHop=3]="OneHop"}(k=t.QueryType||(t.QueryType={})),function(n){n[n.None=0]="None";n[n.Fields=1]="Fields"}(d=t.ReportingRevisionsExpand||(t.ReportingRevisionsExpand={})),function(n){n[n.WorkItemType=0]="WorkItemType";n[n.GlobalWorkflow=1]="GlobalWorkflow"}(g=t.TemplateType||(t.TemplateType={})),function(n){n[n.Area=0]="Area";n[n.Iteration=1]="Iteration"}(nt=t.TreeNodeStructureType||(t.TreeNodeStructureType={})),function(n){n[n.Areas=0]="Areas";n[n.Iterations=1]="Iterations"}(tt=t.TreeStructureGroup||(t.TreeStructureGroup={})),function(n){n[n.Fail=1]="Fail";n[n.Omit=2]="Omit"}(it=t.WorkItemErrorPolicy||(t.WorkItemErrorPolicy={})),function(n){n[n.None=0]="None";n[n.Relations=1]="Relations";n[n.Fields=2]="Fields";n[n.Links=3]="Links";n[n.All=4]="All"}(rt=t.WorkItemExpand||(t.WorkItemExpand={})),function(n){n[n.Visited=0]="Visited";n[n.Edited=1]="Edited";n[n.Deleted=2]="Deleted";n[n.Restored=3]="Restored"}(ut=t.WorkItemRecentActivityType||(t.WorkItemRecentActivityType={})),function(n){n[n.None=0]="None";n[n.AllowedValues=1]="AllowedValues";n[n.DependentFields=2]="DependentFields";n[n.All=3]="All"}(ft=t.WorkItemTypeFieldsExpandLevel||(t.WorkItemTypeFieldsExpandLevel={}));t.TypeInfo={AccountMyWorkResult:{},AccountRecentActivityWorkItemModel:{},AccountRecentActivityWorkItemModel2:{},AccountRecentActivityWorkItemModelBase:{},AccountRecentMentionWorkItemModel:{},AccountWorkWorkItemModel:{},ClassificationNodesErrorPolicy:{enumValues:{fail:1,omit:2}},Comment:{},CommentExpandOptions:{enumValues:{none:0,reactions:1,renderedText:8,renderedTextOnly:16,all:-17}},CommentFormat:{enumValues:{markdown:0,html:1}},CommentList:{},CommentReaction:{},CommentReactionType:{enumValues:{like:0,dislike:1,heart:2,hooray:3,smile:4,confused:5}},CommentSortOrder:{enumValues:{asc:1,desc:2}},CommentVersion:{},ExternalDeployment:{},FieldType:{enumValues:{string:0,integer:1,dateTime:2,plainText:3,html:4,treePath:5,history:6,double:7,guid:8,boolean:9,identity:10,picklistString:11,picklistInteger:12,picklistDouble:13}},FieldUsage:{enumValues:{none:0,workItem:1,workItemLink:2,tree:3,workItemTypeExtension:4}},GetFieldsExpand:{enumValues:{none:0,extensionFields:1,includeDeleted:2}},LinkQueryMode:{enumValues:{workItems:0,linksOneHopMustContain:1,linksOneHopMayContain:2,linksOneHopDoesNotContain:3,linksRecursiveMustContain:4,linksRecursiveMayContain:5,linksRecursiveDoesNotContain:6}},LogicalOperation:{enumValues:{none:0,and:1,or:2}},ProvisioningActionType:{enumValues:{"import":0,validate:1}},QueryBatchGetRequest:{},QueryErrorPolicy:{enumValues:{fail:1,omit:2}},QueryExpand:{enumValues:{none:0,wiql:1,clauses:2,all:3,minimal:4}},QueryHierarchyItem:{},QueryHierarchyItemsResult:{},QueryOption:{enumValues:{doing:1,done:2,followed:3}},QueryRecursionOption:{enumValues:{parentFirst:0,childFirst:1}},QueryResultType:{enumValues:{workItem:1,workItemLink:2}},QueryType:{enumValues:{flat:1,tree:2,oneHop:3}},ReportingRevisionsExpand:{enumValues:{none:0,fields:1}},TemplateType:{enumValues:{workItemType:0,globalWorkflow:1}},TreeNodeStructureType:{enumValues:{area:0,iteration:1}},TreeStructureGroup:{enumValues:{areas:0,iterations:1}},WorkItemBatchGetRequest:{},WorkItemClassificationNode:{},WorkItemComment:{},WorkItemComments:{},WorkItemErrorPolicy:{enumValues:{fail:1,omit:2}},WorkItemExpand:{enumValues:{none:0,relations:1,fields:2,links:3,all:4}},WorkItemField:{},WorkItemField2:{},WorkItemHistory:{},WorkItemQueryClause:{},WorkItemQueryResult:{},WorkItemRecentActivityType:{enumValues:{visited:0,edited:1,deleted:2,restored:3}},WorkItemTagDefinition:{},WorkItemTypeFieldsExpandLevel:{enumValues:{none:0,allowedValues:1,dependentFields:2,all:3}},WorkItemTypeTemplateUpdateModel:{},WorkItemUpdate:{},WorkItemUpdate2:{}};t.TypeInfo.AccountMyWorkResult.fields={workItemDetails:{isArray:!0,typeInfo:t.TypeInfo.AccountWorkWorkItemModel}};t.TypeInfo.AccountRecentActivityWorkItemModel.fields={activityDate:{isDate:!0},activityType:{enumType:t.TypeInfo.WorkItemRecentActivityType},changedDate:{isDate:!0}};t.TypeInfo.AccountRecentActivityWorkItemModel2.fields={activityDate:{isDate:!0},activityType:{enumType:t.TypeInfo.WorkItemRecentActivityType},changedDate:{isDate:!0}};t.TypeInfo.AccountRecentActivityWorkItemModelBase.fields={activityDate:{isDate:!0},activityType:{enumType:t.TypeInfo.WorkItemRecentActivityType},changedDate:{isDate:!0}};t.TypeInfo.AccountRecentMentionWorkItemModel.fields={mentionedDateField:{isDate:!0}};t.TypeInfo.AccountWorkWorkItemModel.fields={changedDate:{isDate:!0}};t.TypeInfo.Comment.fields={createdDate:{isDate:!0},createdOnBehalfDate:{isDate:!0},format:{enumType:t.TypeInfo.CommentFormat},modifiedDate:{isDate:!0},reactions:{isArray:!0,typeInfo:t.TypeInfo.CommentReaction}};t.TypeInfo.CommentList.fields={comments:{isArray:!0,typeInfo:t.TypeInfo.Comment}};t.TypeInfo.CommentReaction.fields={type:{enumType:t.TypeInfo.CommentReactionType}};t.TypeInfo.CommentVersion.fields={createdDate:{isDate:!0},createdOnBehalfDate:{isDate:!0},modifiedDate:{isDate:!0}};t.TypeInfo.ExternalDeployment.fields={statusDate:{isDate:!0}};t.TypeInfo.QueryBatchGetRequest.fields={$expand:{enumType:t.TypeInfo.QueryExpand},errorPolicy:{enumType:t.TypeInfo.QueryErrorPolicy}};t.TypeInfo.QueryHierarchyItem.fields={children:{isArray:!0,typeInfo:t.TypeInfo.QueryHierarchyItem},clauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},createdDate:{isDate:!0},filterOptions:{enumType:t.TypeInfo.LinkQueryMode},lastExecutedDate:{isDate:!0},lastModifiedDate:{isDate:!0},linkClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},queryRecursionOption:{enumType:t.TypeInfo.QueryRecursionOption},queryType:{enumType:t.TypeInfo.QueryType},sourceClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},targetClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause}};t.TypeInfo.QueryHierarchyItemsResult.fields={value:{isArray:!0,typeInfo:t.TypeInfo.QueryHierarchyItem}};t.TypeInfo.WorkItemBatchGetRequest.fields={$expand:{enumType:t.TypeInfo.WorkItemExpand},asOf:{isDate:!0},errorPolicy:{enumType:t.TypeInfo.WorkItemErrorPolicy}};t.TypeInfo.WorkItemClassificationNode.fields={children:{isArray:!0,typeInfo:t.TypeInfo.WorkItemClassificationNode},structureType:{enumType:t.TypeInfo.TreeNodeStructureType}};t.TypeInfo.WorkItemComment.fields={format:{enumType:t.TypeInfo.CommentFormat},revisedDate:{isDate:!0}};t.TypeInfo.WorkItemComments.fields={comments:{isArray:!0,typeInfo:t.TypeInfo.WorkItemComment}};t.TypeInfo.WorkItemField.fields={type:{enumType:t.TypeInfo.FieldType},usage:{enumType:t.TypeInfo.FieldUsage}};t.TypeInfo.WorkItemField2.fields={type:{enumType:t.TypeInfo.FieldType},usage:{enumType:t.TypeInfo.FieldUsage}};t.TypeInfo.WorkItemHistory.fields={revisedDate:{isDate:!0}};t.TypeInfo.WorkItemQueryClause.fields={clauses:{isArray:!0,typeInfo:t.TypeInfo.WorkItemQueryClause},logicalOperator:{enumType:t.TypeInfo.LogicalOperation}};t.TypeInfo.WorkItemQueryResult.fields={asOf:{isDate:!0},queryResultType:{enumType:t.TypeInfo.QueryResultType},queryType:{enumType:t.TypeInfo.QueryType}};t.TypeInfo.WorkItemTagDefinition.fields={lastUpdated:{isDate:!0}};t.TypeInfo.WorkItemTypeTemplateUpdateModel.fields={actionType:{enumType:t.TypeInfo.ProvisioningActionType},templateType:{enumType:t.TypeInfo.TemplateType}};t.TypeInfo.WorkItemUpdate.fields={revisedDate:{isDate:!0}};t.TypeInfo.WorkItemUpdate2.fields={revisedDate:{isDate:!0}}});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define("TFS/WorkItemTracking/RestClient",["require","exports","TFS/WorkItemTracking/Contracts","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f){"use strict";function wt(n){return window.VSS&&window.VSS.VssSDKRestVersion&&yt[window.VSS.VssSDKRestVersion]?r.getClient(yt[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(d,undefined,undefined,undefined,n)}var h,c,o,s,l,a,v,y,p,e,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,pt,yt;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.WorkItemTrackingHttpClient=t.WorkItemTrackingHttpClient2=t.WorkItemTrackingHttpClient2_1=t.WorkItemTrackingHttpClient2_2=t.WorkItemTrackingHttpClient2_3=t.WorkItemTrackingHttpClient3=t.WorkItemTrackingHttpClient3_1=t.WorkItemTrackingHttpClient3_2=t.WorkItemTrackingHttpClient4=t.WorkItemTrackingHttpClient4_1=t.WorkItemTrackingHttpClient5=t.WorkItemTrackingHttpClient5_1=t.WorkItemTrackingHttpClient5_2=t.WorkItemTrackingHttpClient6=t.WorkItemTrackingHttpClient6_1=t.WorkItemTrackingHttpClient7=t.WorkItemTrackingHttpClient7_1=t.WorkItemTrackingHttpClient7_2=t.CommonMethods7_1To7_2=t.CommonMethods7To7_2=t.CommonMethods5_2To7_2=t.CommonMethods5_1To7_2=t.CommonMethods5To7_2=t.CommonMethods4_1To7_2=t.CommonMethods4To7_2=t.CommonMethods3_2To7_2=t.CommonMethods3To7_2=t.CommonMethods2_2To7_2=t.CommonMethods2_1To7_2=t.CommonMethods2To7_2=void 0;h=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateWorkItemTypeDefinition=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"8637ac8b-5eb6-4f90-b3f7-4f2ff576a459",resource:"workItemTypeTemplate",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",requestType:i.TypeInfo.WorkItemTypeTemplateUpdateModel,routeValues:{project:t},apiVersion:this.workItemTypeTemplateApiVersion,data:n})},t.prototype.exportWorkItemTypeDefinition=function(n,t,i){var r={exportGlobalLists:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"8637ac8b-5eb6-4f90-b3f7-4f2ff576a459",resource:"workItemTypeTemplate",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",routeValues:{project:n,type:t},queryParams:r,apiVersion:this.workItemTypeTemplateApiVersion})},t.prototype.getWorkItemTypeStates=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"7c9d7a76-4a09-43e8-b5df-bd792f4ac6aa",resource:"workItemTypeStates",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/states",responseIsCollection:!0,routeValues:{project:n,type:t},apiVersion:this.workItemTypeStatesApiVersion})},t.prototype.getWorkItemTypes=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"7c8d7a76-4a09-43e8-b5df-bd792f4ac6aa",resource:"workItemTypes",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.workItemTypesApiVersion})},t.prototype.getWorkItemType=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"7c8d7a76-4a09-43e8-b5df-bd792f4ac6aa",resource:"workItemTypes",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",routeValues:{project:n,type:t},apiVersion:this.workItemTypesApiVersion})},t.prototype.getWorkItemTypeColorAndIcons=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f0f8dc62-3975-48ce-8051-f636b68b52e3",resource:"workItemTypeColorAndIcon",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.workItemTypeColorAndIconApiVersion,data:n})},t.prototype.getWorkItemTypeColors=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"958fde80-115e-43fb-bd65-749c48057faf",resource:"workitemTypeColor",routeTemplate:"_apis/work/{resource}",responseIsCollection:!0,apiVersion:this.workitemTypeColorApiVersion,data:n})},t.prototype.getWorkItemTypeCategory=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"9b9f5734-36c8-415e-ba67-f83b45c31408",resource:"workItemTypeCategories",routeTemplate:"{project}/_apis/{area}/{resource}/{category}",routeValues:{project:n,category:t},apiVersion:this.workItemTypeCategoriesApiVersion})},t.prototype.getWorkItemTypeCategories=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"9b9f5734-36c8-415e-ba67-f83b45c31408",resource:"workItemTypeCategories",routeTemplate:"{project}/_apis/{area}/{resource}/{category}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.workItemTypeCategoriesApiVersion})},t.prototype.getWorkItemStateColors=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"0b83df8a-3496-4ddb-ba44-63634f4cda61",resource:"workitemStateColor",routeTemplate:"_apis/work/{resource}",responseIsCollection:!0,apiVersion:this.workitemStateColorApiVersion,data:n})},t.prototype.updateWorkItemTemplate=function(n,t,i,r,u){var f={validateOnly:r,bypassRules:u};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:t,type:i},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:f,apiVersion:this.workItemsApiVersion,data:n})},t.prototype.getWorkItemTemplate=function(n,t,i,r,u){var f={fields:i,asOf:r,$expand:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:n,type:t},queryParams:f,apiVersion:this.workItemsApiVersion})},t.prototype.createWorkItem=function(n,t,i,r,u,f,e){var o={validateOnly:r,bypassRules:u,suppressNotifications:f,$expand:e};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:t,type:i},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:o,apiVersion:this.workItemsApiVersion,data:n})},t.prototype.getRelationTypes=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f5d33bc9-5b49-4a3c-a9bd-f3cd46dd2165",resource:"workItemRelationTypes",routeTemplate:"_apis/{area}/{resource}/{relation}",responseIsCollection:!0,apiVersion:this.workItemRelationTypesApiVersion})},t.prototype.getRelationType=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f5d33bc9-5b49-4a3c-a9bd-f3cd46dd2165",resource:"workItemRelationTypes",routeTemplate:"_apis/{area}/{resource}/{relation}",routeValues:{relation:n},apiVersion:this.workItemRelationTypesApiVersion})},t.prototype.getWorkItemIconXaml=function(n,t,i){var r={color:t,v:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"image/xaml+xml",area:"wit",locationId:"4e1eb4a5-1970-4228-a682-ec48eb2dca30",resource:"workItemIcons",routeTemplate:"_apis/{area}/{resource}/{icon}",routeValues:{icon:n},queryParams:r,apiVersion:this.workItemIconsApiVersion})},t.prototype.getWorkItemIconSvg=function(n,t,i){var r={color:t,v:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"image/svg+xml",area:"wit",locationId:"4e1eb4a5-1970-4228-a682-ec48eb2dca30",resource:"workItemIcons",routeTemplate:"_apis/{area}/{resource}/{icon}",routeValues:{icon:n},queryParams:r,apiVersion:this.workItemIconsApiVersion})},t.prototype.getWorkItemIcons=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"4e1eb4a5-1970-4228-a682-ec48eb2dca30",resource:"workItemIcons",routeTemplate:"_apis/{area}/{resource}/{icon}",responseIsCollection:!0,apiVersion:this.workItemIconsApiVersion})},t.prototype.getWorkItemIconJson=function(n,t,i){var r={color:t,v:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"4e1eb4a5-1970-4228-a682-ec48eb2dca30",resource:"workItemIcons",routeTemplate:"_apis/{area}/{resource}/{icon}",routeValues:{icon:n},queryParams:r,apiVersion:this.workItemIconsApiVersion})},t.prototype.queryById=function(n,t,r,u,f){var e={timePrecision:u,$top:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a02355f5-5f8a-4671-8e32-369d23aac83d",resource:"wiql",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",responseType:i.TypeInfo.WorkItemQueryResult,routeValues:{project:t,team:r,id:n},queryParams:e,apiVersion:this.wiqlApiVersion})},t.prototype.getQueryResultCount=function(n,t,i,r,u){var f={timePrecision:r,$top:u};return this._beginRequest({httpMethod:"HEAD",area:"wit",locationId:"a02355f5-5f8a-4671-8e32-369d23aac83d",resource:"wiql",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",routeValues:{project:t,team:i,id:n},queryParams:f,apiVersion:this.wiqlApiVersion},!0).then(function(n){var i=n[0],r=n[1],t=n[2];return t.getResponseHeader("X-Total-Count")},function(n){throw n;})},t.prototype.queryByWiql=function(n,t,r,u,f){var e={timePrecision:u,$top:f};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"1a9c53f7-f243-4447-b110-35ef023636e4",resource:"wiql",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseType:i.TypeInfo.WorkItemQueryResult,routeValues:{project:t,team:r},queryParams:e,apiVersion:this.wiqlApiVersion_1a9c53f7,data:n})},t.prototype.sendMail=function(n,t){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"wit",locationId:"12438500-2f84-4fa7-9f1a-c31871b4959d",resource:"sendMail",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.sendMailApiVersion,data:n})},t.prototype.updateQuery=function(n,t,r,u){var f={$undeleteDescendants:u};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",requestType:i.TypeInfo.QueryHierarchyItem,responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:t,query:r},queryParams:f,apiVersion:this.queriesApiVersion,data:n})},t.prototype.searchQueries=function(n,t,r,u,f){var e={$filter:t,$top:r,$expand:u,$includeDeleted:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",responseType:i.TypeInfo.QueryHierarchyItemsResult,routeValues:{project:n},queryParams:e,apiVersion:this.queriesApiVersion})},t.prototype.getQuery=function(n,t,r,u,f,e){var o={$expand:r,$depth:u,$includeDeleted:f,$useIsoDateFormat:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:n,query:t},queryParams:o,apiVersion:this.queriesApiVersion})},t.prototype.getQueries=function(n,t,r,u){var f={$expand:t,$depth:r,$includeDeleted:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",responseType:i.TypeInfo.QueryHierarchyItem,responseIsCollection:!0,routeValues:{project:n},queryParams:f,apiVersion:this.queriesApiVersion})},t.prototype.deleteQuery=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",routeValues:{project:n,query:t},apiVersion:this.queriesApiVersion})},t.prototype.createQuery=function(n,t,r,u){var f={validateWiqlOnly:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",requestType:i.TypeInfo.QueryHierarchyItem,responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:t,query:r},queryParams:f,apiVersion:this.queriesApiVersion,data:n})},t.prototype.updateClassificationNode=function(n,t,r,u){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",requestType:i.TypeInfo.WorkItemClassificationNode,responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:t,structureGroup:i.TreeStructureGroup[r],path:u},apiVersion:this.classificationNodesApiVersion,data:n})},t.prototype.getClassificationNode=function(n,t,r,u){var f={$depth:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:n,structureGroup:i.TreeStructureGroup[t],path:r},queryParams:f,apiVersion:this.classificationNodesApiVersion})},t.prototype.deleteClassificationNode=function(n,t,r,u){var f={$reclassifyId:u};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",routeValues:{project:n,structureGroup:i.TreeStructureGroup[t],path:r},queryParams:f,apiVersion:this.classificationNodesApiVersion})},t.prototype.createOrUpdateClassificationNode=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",requestType:i.TypeInfo.WorkItemClassificationNode,responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:t,structureGroup:i.TreeStructureGroup[r],path:u},apiVersion:this.classificationNodesApiVersion,data:n})},t.prototype.getRootNodes=function(n,t){var r={$depth:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a70579d1-f53a-48ee-a5be-7be8659023b9",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.WorkItemClassificationNode,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:this.classificationNodesApiVersion_a70579d1})},t.prototype.getClassificationNodes=function(n,t,r,u){var f={ids:t&&t.join(","),$depth:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a70579d1-f53a-48ee-a5be-7be8659023b9",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.WorkItemClassificationNode,responseIsCollection:!0,routeValues:{project:n},queryParams:f,apiVersion:this.classificationNodesApiVersion_a70579d1})},t.prototype.getRecentMentions=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"d60eeb6e-e18c-4478-9e94-a0094e28f41c",resource:"accountRecentMentions",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentMentionWorkItemModel,responseIsCollection:!0,apiVersion:this.accountRecentMentionsApiVersion})},t.prototype.getAccountMyWorkData=function(n){var t={$queryOption:n};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"def3d688-ddf5-4096-9024-69beea15cdbd",resource:"accountMyWork",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountMyWorkResult,queryParams:t,apiVersion:this.accountMyWorkApiVersion})},t.serviceInstanceId=f.ServiceInstanceTypes.TFS,t}(u.VssHttpClient);t.CommonMethods2To7_2=h;c=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.restoreWorkItem=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:t},apiVersion:this.recyclebinApiVersion,data:n})},t.prototype.getDeletedWorkItems=function(n,t){var i={ids:n&&n.join(",")};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:t},queryParams:i,apiVersion:this.recyclebinApiVersion})},t.prototype.getDeletedWorkItem=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:t,id:n},apiVersion:this.recyclebinApiVersion})},t.prototype.destroyWorkItem=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:t,id:n},apiVersion:this.recyclebinApiVersion})},t}(h);t.CommonMethods2_1To7_2=c;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.readReportingRevisionsPost=function(n,t,i,r,u){var f={continuationToken:i,startDateTime:r,$expand:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:f,apiVersion:this.workItemRevisionsApiVersion,data:n})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e,o,s,h,c,l){var a={fields:t&&t.join(","),types:i&&i.join(","),continuationToken:r,startDateTime:u,includeIdentityRef:f,includeDeleted:e,includeTagRef:o,includeLatestOnly:s,$expand:h,includeDiscussionChangesOnly:c,$maxPageSize:l};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:a,apiVersion:this.workItemRevisionsApiVersion})},t}(c);t.CommonMethods2_2To7_2=o;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.replaceTemplate=function(n,t,i,r){return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:t,team:i,templateId:r},apiVersion:this.templatesApiVersion,data:n})},t.prototype.getTemplate=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:n,team:t,templateId:i},apiVersion:this.templatesApiVersion})},t.prototype.deleteTemplate=function(n,t,i){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:n,team:t,templateId:i},apiVersion:this.templatesApiVersion})},t.prototype.getTemplates=function(n,t,i){var r={workitemtypename:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6a90345f-a676-4969-afce-8e163e1d5642",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:n,team:t},queryParams:r,apiVersion:this.templatesApiVersion_6a90345f})},t.prototype.createTemplate=function(n,t,i){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"6a90345f-a676-4969-afce-8e163e1d5642",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",routeValues:{project:t,team:i},apiVersion:this.templatesApiVersion_6a90345f,data:n})},t}(o);t.CommonMethods3To7_2=s;l=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getWorkArtifactLinkTypes=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1a31de40-e318-41cd-a6c6-881077df52e3",resource:"artifactLinkTypes",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.artifactLinkTypesApiVersion})},t}(s);t.CommonMethods3_2To7_2=l;a=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateWorkItem=function(n,t,i,r,u,f,e){var o={validateOnly:r,bypassRules:u,suppressNotifications:f,$expand:e};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:o,apiVersion:this.workItemsApiVersion_72c7ddf8,data:n})},t.prototype.getWorkItems=function(n,t,i,r,u,f){var e={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:f},queryParams:e,apiVersion:this.workItemsApiVersion_72c7ddf8})},t.prototype.getWorkItem=function(n,t,i,r,u){var f={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:u,id:n},queryParams:f,apiVersion:this.workItemsApiVersion_72c7ddf8})},t.prototype.deleteWorkItem=function(n,t,i){var r={destroy:i};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:t,id:n},queryParams:r,apiVersion:this.workItemsApiVersion_72c7ddf8})},t}(l);t.CommonMethods4To7_2=a;v=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getWorkItemTypeFieldWithReferences=function(n,t,i,r){var u={$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},queryParams:u,apiVersion:this.workItemTypesFieldApiVersion})},t.prototype.getWorkItemTypeFieldsWithReferences=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",responseIsCollection:!0,routeValues:{project:n,type:t},queryParams:r,apiVersion:this.workItemTypesFieldApiVersion})},t.prototype.getWorkItemNextStatesOnCheckinAction=function(n,t){var i={ids:n&&n.join(","),action:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"afae844b-e2f6-44c2-8053-17b3bb936a40",resource:"workItemTransitions",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,queryParams:i,apiVersion:this.workItemTransitionsApiVersion})},t.prototype.getUpdates=function(n,t,r,u){var f={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"{project}/_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{project:u,id:n},queryParams:f,apiVersion:this.updatesApiVersion})},t.prototype.getUpdate=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"{project}/_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{project:r,id:n,updateNumber:t},apiVersion:this.updatesApiVersion})},t.prototype.getRevisions=function(n,t,i,r,u){var f={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"{project}/_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{project:u,id:n},queryParams:f,apiVersion:this.revisionsApiVersion})},t.prototype.getRevision=function(n,t,i,r){var u={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"{project}/_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{project:r,id:n,revisionNumber:t},queryParams:u,apiVersion:this.revisionsApiVersion})},t.prototype.getDeletedWorkItemShallowReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.recyclebinApiVersion})},t.prototype.uploadAttachment=function(n,t,i,r,u){var f={fileName:u};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:r,id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:f,apiVersion:this.attachmentsApiVersion,data:n,isRawData:!0})},t.prototype.getAttachmentZip=function(n,t,i,r){var u={fileName:t,download:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:n},queryParams:u,apiVersion:this.attachmentsApiVersion})},t.prototype.getAttachmentContent=function(n,t,i,r){var u={fileName:t,download:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:n},queryParams:u,apiVersion:this.attachmentsApiVersion})},t.prototype.createAttachment=function(n,t,i,r,u){var f={fileName:t,uploadType:i,areaPath:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:r},customHeaders:{"Content-Type":"application/octet-stream"},queryParams:f,apiVersion:this.attachmentsApiVersion,data:n,isRawData:!0})},t.prototype.queryWorkItemsForArtifactUris=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a9a9aa7a-8c09-44d3-ad1b-46e855c1e3d3",resource:"artifactUriQuery",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.artifactUriQueryApiVersion,data:n})},t}(a);t.CommonMethods4_1To7_2=v;y=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getWorkItemsBatch=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"908509b6-4248-4475-a1cd-829139ba419f",resource:"workItemsBatch",routeTemplate:"{project}/_apis/{area}/{resource}",requestType:i.TypeInfo.WorkItemBatchGetRequest,responseIsCollection:!0,routeValues:{project:t},apiVersion:this.workItemsBatchApiVersion,data:n})},t.prototype.getReportingLinksByLinkType=function(n,t,i,r,u){var f={linkTypes:t&&t.join(","),types:i&&i.join(","),continuationToken:r,startDateTime:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b5b5b6d0-0308-40a1-b3f4-b9bb3c66878f",resource:"workItemLinks",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:f,apiVersion:this.workItemLinksApiVersion})},t.prototype.getQueriesBatch=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"549816f9-09b0-4e75-9e81-01fbfcd07426",resource:"queriesBatch",routeTemplate:"{project}/_apis/{area}/{resource}",requestType:i.TypeInfo.QueryBatchGetRequest,responseType:i.TypeInfo.QueryHierarchyItem,responseIsCollection:!0,routeValues:{project:t},apiVersion:this.queriesBatchApiVersion,data:n})},t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel2,responseIsCollection:!0,apiVersion:this.accountMyWorkRecentActivityApiVersion})},t}(v);t.CommonMethods5To7_2=y;p=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.readReportingDiscussions=function(n,t,i){var r={continuationToken:t,$maxPageSize:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"4a644469-90c5-4fcc-9a9f-be0827d369ec",resource:"workItemRevisionsDiscussions",routeTemplate:"{project}/_apis/{area}/reporting/workItemRevisions/discussions",routeValues:{project:n},queryParams:r,apiVersion:this.workItemRevisionsDiscussionsApiVersion})},t.prototype.getCommentVersions=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"49e03b34-3be0-42e3-8a5d-e8dfb88ac954",resource:"commentsVersions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/versions/{version}",responseType:i.TypeInfo.CommentVersion,responseIsCollection:!0,routeValues:{project:n,workItemId:t,commentId:r},apiVersion:this.commentsVersionsApiVersion})},t.prototype.getCommentVersion=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"49e03b34-3be0-42e3-8a5d-e8dfb88ac954",resource:"commentsVersions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/versions/{version}",responseType:i.TypeInfo.CommentVersion,routeValues:{project:n,workItemId:t,commentId:r,version:u},apiVersion:this.commentsVersionsApiVersion})},t.prototype.getCommentReactions=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f6cb3f27-1028-4851-af96-887e570dc21f",resource:"commentsReactions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/reactions/{reactionType}",responseType:i.TypeInfo.CommentReaction,responseIsCollection:!0,routeValues:{project:n,workItemId:t,commentId:r},apiVersion:this.commentsReactionsApiVersion})},t.prototype.deleteCommentReaction=function(n,t,r,u){return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"f6cb3f27-1028-4851-af96-887e570dc21f",resource:"commentsReactions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/reactions/{reactionType}",responseType:i.TypeInfo.CommentReaction,routeValues:{project:n,workItemId:t,commentId:r,reactionType:i.CommentReactionType[u]},apiVersion:this.commentsReactionsApiVersion})},t.prototype.createCommentReaction=function(n,t,r,u){return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"f6cb3f27-1028-4851-af96-887e570dc21f",resource:"commentsReactions",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/reactions/{reactionType}",responseType:i.TypeInfo.CommentReaction,routeValues:{project:n,workItemId:t,commentId:r,reactionType:i.CommentReactionType[u]},apiVersion:this.commentsReactionsApiVersion})},t.prototype.updateWorkItemComment=function(n,t,r,u,f){var e={format:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:t,workItemId:r,commentId:u},queryParams:e,apiVersion:this.commentsApiVersion,data:n})},t.prototype.updateComment=function(n,t,r,u){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:t,workItemId:r,commentId:u},apiVersion:this.commentsApiVersion,data:n})},t.prototype.getCommentsBatch=function(n,t,r,u,f){var e={ids:r&&r.join(","),includeDeleted:u,$expand:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.CommentList,routeValues:{project:n,workItemId:t},queryParams:e,apiVersion:this.commentsApiVersion})},t.prototype.getComments=function(n,t,r,u,f,e,o){var s={$top:r,continuationToken:u,includeDeleted:f,$expand:e,order:o};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.CommentList,routeValues:{project:n,workItemId:t},queryParams:s,apiVersion:this.commentsApiVersion})},t.prototype.getComment=function(n,t,r,u,f){var e={includeDeleted:u,$expand:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:n,workItemId:t,commentId:r},queryParams:e,apiVersion:this.commentsApiVersion})},t.prototype.deleteComment=function(n,t,i){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",routeValues:{project:n,workItemId:t,commentId:i},apiVersion:this.commentsApiVersion})},t.prototype.addWorkItemComment=function(n,t,r,u){var f={format:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:t,workItemId:r},queryParams:f,apiVersion:this.commentsApiVersion,data:n})},t.prototype.addComment=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"608aac0a-32e1-4493-a863-b9cf4566d257",resource:"comments",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:t,workItemId:r},apiVersion:this.commentsApiVersion,data:n})},t.prototype.getEngagedUsers=function(n,t,r,u,f,e){var o={$top:f,$skip:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"e33ca5e0-2349-4285-af3d-d72d86781c35",resource:"commentReactionsEngagedUsers",routeTemplate:"{project}/_apis/wit/workItems/{workItemId}/comments/{commentId}/reactions/{reactionType}/users",responseIsCollection:!0,routeValues:{project:n,workItemId:t,commentId:r,reactionType:i.CommentReactionType[u]},queryParams:o,apiVersion:this.commentReactionsEngagedUsersApiVersion})},t}(y);t.CommonMethods5_1To7_2=p;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateTag=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"bc15bc60-e7a8-43cb-ab01-2106be3983a1",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}/{tagIdOrName}",requestType:i.TypeInfo.WorkItemTagDefinition,responseType:i.TypeInfo.WorkItemTagDefinition,routeValues:{project:t,tagIdOrName:r},apiVersion:this.tagsApiVersion,data:n})},t.prototype.getTags=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bc15bc60-e7a8-43cb-ab01-2106be3983a1",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}/{tagIdOrName}",responseType:i.TypeInfo.WorkItemTagDefinition,responseIsCollection:!0,routeValues:{project:n},apiVersion:this.tagsApiVersion})},t.prototype.getTag=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bc15bc60-e7a8-43cb-ab01-2106be3983a1",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}/{tagIdOrName}",responseType:i.TypeInfo.WorkItemTagDefinition,routeValues:{project:n,tagIdOrName:t},apiVersion:this.tagsApiVersion})},t.prototype.deleteTag=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"bc15bc60-e7a8-43cb-ab01-2106be3983a1",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}/{tagIdOrName}",routeValues:{project:n,tagIdOrName:t},apiVersion:this.tagsApiVersion})},t.prototype.migrateProjectsProcess=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"19801631-d4e5-47e9-8166-0330de0ff1e6",resource:"projectProcessMigration",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.projectProcessMigrationApiVersion,data:n})},t}(p);t.CommonMethods5_2To7_2=e;w=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.createTempQuery=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"9f614388-a9f0-4952-ad6c-89756bd8e388",resource:"tempQueries",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.tempQueriesApiVersion,data:n})},t}(e);t.CommonMethods7To7_2=w;b=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.deleteWorkItems=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"8bc57545-27e5-420d-b709-f6e3ebcc1fc1",resource:"workItemsDelete",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.workItemsDeleteApiVersion,data:n})},t.prototype.getWorkItemFieldAllowedValues=function(n,t){var i={name:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1d4da553-5856-4ca5-a3b3-79e0e8fcc142",resource:"workItemFieldAllowedValues",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:n},queryParams:i,apiVersion:this.workItemFieldAllowedValuesApiVersion})},t.prototype.getSingleUpdate=function(n,t,r,u){var f={source:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"{project}/_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate2,routeValues:{project:u,id:n,updateNumber:t},queryParams:f,apiVersion:this.updatesApiVersion})},t.prototype.getGithubConnections=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"0cf95f86-6ce1-f410-ccf6-3d8c92b3a1ef",resource:"githubConnections",routeTemplate:"{project}/_apis/githubconnections",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.githubConnectionsApiVersion})},t.prototype.updateGithubConnectionRepos=function(n,t,i){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"15b19676-8d9e-e224-d795-ca4d1a18024d",resource:"githubConnections",routeTemplate:"{project}/_apis/githubconnections/{connectionId}/reposBatch",responseIsCollection:!0,routeValues:{project:t,connectionId:i},apiVersion:this.githubConnectionsApiVersion_15b19676,data:n})},t.prototype.getGithubConnectionRepositories=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"0b3a5212-f65b-2102-0d80-1dd77ce4c700",resource:"githubConnections",routeTemplate:"{project}/_apis/githubconnections/{connectionId}/repos",responseIsCollection:!0,routeValues:{project:n,connectionId:t},apiVersion:this.githubConnectionsApiVersion_0b3a5212})},t.prototype.updateWorkItemField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField2,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:this.fieldsApiVersion,data:n})},t.prototype.getWorkItemFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField2,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:this.fieldsApiVersion})},t.prototype.getWorkItemField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField2,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:this.fieldsApiVersion})},t.prototype.deleteWorkItemField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:this.fieldsApiVersion})},t.prototype.createWorkItemField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField2,responseType:i.TypeInfo.WorkItemField2,routeValues:{project:t},apiVersion:this.fieldsApiVersion,data:n})},t}(w);t.CommonMethods7_1To7_2=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.githubConnectionsApiVersion=r.githubConnectionsApiVersion_15b19676=r.githubConnectionsApiVersion_0b3a5212=r.projectProcessMigrationApiVersion=r.queriesBatchApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.tempQueriesApiVersion=r.workItemFieldAllowedValuesApiVersion=r.workItemIconsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsBatchApiVersion=r.workItemsDeleteApiVersion=r.workitemStateColorApiVersion=r.workItemTransitionsApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="7.2-preview.1",r.accountMyWorkRecentActivityApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion="7.2-preview.2",r.attachmentsApiVersion=r.fieldsApiVersion=r.revisionsApiVersion=r.workItemLinksApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemTypesFieldApiVersion="7.2-preview.3",r.commentsApiVersion=r.updatesApiVersion="7.2-preview.4",r}return __extends(t,n),t}(b);t.WorkItemTrackingHttpClient7_2=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.fieldsApiVersion=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.tempQueriesApiVersion=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemFieldAllowedValuesApiVersion=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemsDeleteApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="7.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.githubConnectionsApiVersion=r.githubConnectionsApiVersion_15b19676=r.githubConnectionsApiVersion_0b3a5212=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="7.1-preview.1",r.commentsApiVersion="7.1-preview.4",r}return __extends(t,n),t}(b);t.WorkItemTrackingHttpClient7_1=d;g=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.tempQueriesApiVersion=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="7.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="7.0-preview.1",r.commentsApiVersion="7.0-preview.4",r}return __extends(t,n),t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"7.0",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"7.0"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"7.0"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"7.0"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"7.0",data:n})},t}(w);t.WorkItemTrackingHttpClient7=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="6.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="6.1-preview.1",r.commentsApiVersion="6.1-preview.4",r}return __extends(t,n),t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"6.1",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"6.1"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"6.1"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"6.1"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"6.1",data:n})},t}(e);t.WorkItemTrackingHttpClient6_1=nt;tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="6.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="6.0-preview.1",r.commentsApiVersion="6.0-preview.4",r}return __extends(t,n),t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"6.0",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"6.0"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"6.0"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"6.0"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"6.0",data:n})},t}(e);t.WorkItemTrackingHttpClient6=tt;it=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.projectProcessMigrationApiVersion=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.tagsApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="5.2",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="5.2-preview.1",r.commentsApiVersion="5.2-preview.4",r}return __extends(t,n),t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"5.2",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"5.2"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"5.2"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"5.2"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"5.2",data:n})},t}(e);t.WorkItemTrackingHttpClient5_2=it;rt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemRevisionsDiscussionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="5.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.commentReactionsEngagedUsersApiVersion=r.commentsReactionsApiVersion=r.commentsVersionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="5.1-preview.1",r.commentsApiVersion="5.1-preview.4",r}return __extends(t,n),t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"5.1",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"5.1"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"5.1"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"5.1"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"5.1",data:n})},t}(p);t.WorkItemTrackingHttpClient5_1=rt;ut=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.accountMyWorkRecentActivityApiVersion=r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.queriesBatchApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemLinksApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemsBatchApiVersion=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="5.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="5.0-preview.1",r}return __extends(t,n),t.prototype.getComment=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"{project}/_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{project:r,id:n,revision:t},apiVersion:"5.0-preview.2"})},t.prototype.getComments=function(n,t,r,u,f){var e={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"{project}/_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{project:f,id:n},queryParams:e,apiVersion:"5.0-preview.2"})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"5.0",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"5.0"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"5.0"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"5.0"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"5.0",data:n})},t}(y);t.WorkItemTrackingHttpClient5=ut;ft=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.artifactLinkTypesApiVersion=r.artifactUriQueryApiVersion=r.attachmentsApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.revisionsApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.updatesApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemTransitionsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypesFieldApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="4.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="4.1-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"4.1"})},t.prototype.getComment=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"{project}/_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{project:r,id:n,revision:t},apiVersion:"4.1-preview.2"})},t.prototype.getComments=function(n,t,r,u,f){var e={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"{project}/_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{project:f,id:n},queryParams:e,apiVersion:"4.1-preview.2"})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"4.1",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"4.1"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"4.1"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"4.1"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"4.1",data:n})},t}(v);t.WorkItemTrackingHttpClient4_1=ft;et=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.artifactLinkTypesApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemsApiVersion_72c7ddf8=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="4.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="4.0-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"4.0"})},t.prototype.queryWorkItemsForArtifactUris=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a9a9aa7a-8c09-44d3-ad1b-46e855c1e3d3",resource:"artifactUriQuery",routeTemplate:"_apis/{area}/{resource}",apiVersion:"4.0",data:n})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"4.0",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"4.0"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"4.0"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"4.0",data:n,isRawData:!0})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:"4.0-preview.1"})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:"4.0-preview.1"})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"4.0",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"4.0"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"4.0"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"4.0"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"4.0",data:n})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"4.0"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"4.0"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"4.0"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"4.0"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"4.0"})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"4.0"})},t}(a);t.WorkItemTrackingHttpClient4=et;ot=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.artifactLinkTypesApiVersion=r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="3.2",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="3.2-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"3.2"})},t.prototype.queryWorkItemsForArtifactUris=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a9a9aa7a-8c09-44d3-ad1b-46e855c1e3d3",resource:"artifactUriQuery",routeTemplate:"_apis/{area}/{resource}",apiVersion:"3.2",data:n})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"3.2",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.2"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.2"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"3.2",data:n,isRawData:!0})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:"3.2-preview.1"})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:"3.2-preview.1"})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"3.2",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"3.2"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"3.2"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"3.2"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"3.2",data:n})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"3.2"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"3.2"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.2"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"3.2"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.2"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"3.2"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"3.2"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"3.2"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"3.2",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"3.2"})},t}(l);t.WorkItemTrackingHttpClient3_2=ot;st=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="3.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="3.1-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"3.1"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"3.1",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.1"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.1"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"3.1",data:n,isRawData:!0})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:"3.1-preview.1"})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:"3.1-preview.1"})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"3.1",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"3.1"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"3.1"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"3.1"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"3.1",data:n})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"3.1"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"3.1"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.1"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"3.1"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.1"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"3.1"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"3.1"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"3.1"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"3.1",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"3.1"})},t}(s);t.WorkItemTrackingHttpClient3_1=st;ht=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.templatesApiVersion=r.templatesApiVersion_6a90345f=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="3.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="3.0-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"3.0"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"3.0",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.0"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"3.0"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"3.0",data:n,isRawData:!0})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:"3.0-preview.1"})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:"3.0-preview.1"})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"3.0",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"3.0"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"3.0"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"3.0"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"3.0",data:n})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"3.0"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"3.0"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"3.0"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"3.0"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"3.0"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"3.0"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"3.0",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"3.0"})},t}(s);t.WorkItemTrackingHttpClient3=ht;ct=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="2.3",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="2.3-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"2.3"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"2.3",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.3"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.3"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"2.3",data:n,isRawData:!0})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"2.3",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"2.3"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"2.3"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"2.3"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"2.3",data:n})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.3"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"2.3"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"2.3"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"2.3"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"2.3"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"2.3"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"2.3",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"2.3"})},t}(o);t.WorkItemTrackingHttpClient2_3=ct;lt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemRevisionsApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="2.2",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="2.2-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"2.2"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"2.2",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.2"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.2"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"2.2",data:n,isRawData:!0})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"2.2",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"2.2"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"2.2"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"2.2"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"2.2",data:n})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.2"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"2.2"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"2.2"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"2.2"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"2.2"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"2.2"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"2.2",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"2.2"})},t}(o);t.WorkItemTrackingHttpClient2_2=lt;at=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.recyclebinApiVersion=r.sendMailApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="2.1",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="2.1-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"2.1"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"2.1",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.1"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.1"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"2.1",data:n,isRawData:!0})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"2.1",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"2.1"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"2.1"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"2.1"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"2.1",data:n})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.1"})},t.prototype.getDeletedWorkItemReferences=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},apiVersion:"2.1"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"2.1"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"2.1"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e){var o={includeDeleted:t,fields:i&&i.join(","),types:r&&r.join(","),watermark:u,startDateTime:f,includeIdentityRef:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:o,apiVersion:"2.1"})},t.prototype.readReportingRevisionsPost=function(n,t,i,r){var u={watermark:i,startDateTime:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:u,apiVersion:"2.1",data:n})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"2.1"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"2.1"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"2.1",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"2.1"})},t}(c);t.WorkItemTrackingHttpClient2_1=at;vt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.classificationNodesApiVersion=r.classificationNodesApiVersion_a70579d1=r.queriesApiVersion=r.sendMailApiVersion=r.wiqlApiVersion=r.wiqlApiVersion_1a9c53f7=r.workItemIconsApiVersion=r.workItemRelationTypesApiVersion=r.workItemsApiVersion=r.workItemTypeCategoriesApiVersion=r.workItemTypesApiVersion=r.workItemTypeStatesApiVersion=r.workItemTypeTemplateApiVersion="2.0",r.accountMyWorkApiVersion=r.accountRecentMentionsApiVersion=r.workitemStateColorApiVersion=r.workitemTypeColorApiVersion=r.workItemTypeColorAndIconApiVersion="2.0-preview.1",r}return __extends(t,n),t.prototype.getRecentActivityData=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"1bc988f4-c15f-4072-ad35-497c87e3a909",resource:"accountMyWorkRecentActivity",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountRecentActivityWorkItemModel,responseIsCollection:!0,apiVersion:"2.0"})},t.prototype.createAttachment=function(n,t,i,r){var u={fileName:t,uploadType:i,areaPath:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:u,apiVersion:"2.0",data:n,isRawData:!0})},t.prototype.getAttachmentContent=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.0"})},t.prototype.getAttachmentZip=function(n,t,i){var r={fileName:t,download:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:r,apiVersion:"2.0"})},t.prototype.uploadAttachment=function(n,t,i,r){var u={fileName:r};return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/octet-stream","Content-Range":i},queryParams:u,apiVersion:"2.0",data:n,isRawData:!0})},t.prototype.createField=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",requestType:i.TypeInfo.WorkItemField,responseType:i.TypeInfo.WorkItemField,routeValues:{project:t},apiVersion:"2.0",data:n})},t.prototype.deleteField=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"2.0"})},t.prototype.getField=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:t,fieldNameOrRefName:n},apiVersion:"2.0"})},t.prototype.getFields=function(n,t){var r={$expand:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"2.0"})},t.prototype.updateField=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"{project}/_apis/{area}/{resource}/{fieldNameOrRefName}",responseType:i.TypeInfo.WorkItemField,routeValues:{project:r,fieldNameOrRefName:t},apiVersion:"2.0",data:n})},t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.0"})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:"2.0"})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:"2.0"})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e){var o={includeDeleted:t,fields:i&&i.join(","),types:r&&r.join(","),watermark:u,startDateTime:f,includeIdentityRef:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:o,apiVersion:"2.0"})},t.prototype.readReportingRevisionsPost=function(n,t,i,r){var u={watermark:i,startDateTime:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:u,apiVersion:"2.0",data:n})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:"2.0"})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:"2.0"})},t.prototype.updateWorkItem=function(n,t,i,r,u,f){var e={validateOnly:i,bypassRules:r,suppressNotifications:u,$expand:f};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:e,apiVersion:"2.0",data:n})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:"2.0"})},t}(h);t.WorkItemTrackingHttpClient2=vt;pt=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(k);t.WorkItemTrackingHttpClient=pt;yt={"7.2":k,"7.1":d,"7.0":g,"6.1":nt,"6.0":tt,"5.2":it,"5.1":rt,"5.0":ut,"4.1":ft,"4.0":et,"3.2":ot,"3.1":st,"3.0":ht,"2.3":ct,"2.2":lt,"2.1":at,"2.0":vt};t.getClient=wt});

define("Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTypeIcons=t.WorkItemTrackingMetadataCacheConstants=t.WorkItemSettingsConstants=t.WorkItemLinkConstants=t.WorkItemFormExtensionsConstants=t.WorkItemFormContributionProperties=t.WorkItemFeatureStateConstants=t.WITCommonConstants=t.WellKnownControlNames=t.UnfollowResultStatus=t.QueryResultFormat=t.QueriesConstants=t.OobFieldRefNames=t.FormLayoutType=t.FollowsConstants=t.FieldType=t.DalFields=t.CoreLinkTypeReferenceNames=t.CoreFieldRefNames=t.CoreField=t.CacheStatus=void 0,function(n){n[n.UpToDate=0]="UpToDate";n[n.NewData=1]="NewData";n[n.StaleData=2]="StaleData"}(i=t.CacheStatus||(t.CacheStatus={})),function(n){n[n.Id=-3]="Id";n[n.Rev=8]="Rev";n[n.Title=1]="Title";n[n.Description=52]="Description";n[n.WorkItemType=25]="WorkItemType";n[n.TeamProject=-42]="TeamProject";n[n.State=2]="State";n[n.Reason=22]="Reason";n[n.CreatedBy=33]="CreatedBy";n[n.AssignedTo=24]="AssignedTo";n[n.ChangedBy=9]="ChangedBy";n[n.ChangedDate=-4]="ChangedDate";n[n.CreatedDate=32]="CreatedDate";n[n.RevisedDate=-5]="RevisedDate";n[n.AuthorizedDate=3]="AuthorizedDate";n[n.AuthorizedAs=-1]="AuthorizedAs";n[n.History=54]="History";n[n.AreaPath=-7]="AreaPath";n[n.AreaId=-2]="AreaId";n[n.IterationPath=-105]="IterationPath";n[n.IterationId=-104]="IterationId";n[n.NodeName=-12]="NodeName";n[n.RelatedLinkCount=75]="RelatedLinkCount";n[n.HyperLinkCount=-32]="HyperLinkCount";n[n.AttachedFileCount=-31]="AttachedFileCount";n[n.ExternalLinkCount=-57]="ExternalLinkCount";n[n.CommentCount=-33]="CommentCount";n[n.LinkType=100]="LinkType";n[n.Tags=80]="Tags";n[n.Watermark=7]="Watermark";n[n.BoardColumn=90]="BoardColumn";n[n.BoardColumnDone=91]="BoardColumnDone";n[n.BoardLane=92]="BoardLane";n[n.IsDeleted=-404]="IsDeleted";n[n.Parent=-35]="Parent"}(r=t.CoreField||(t.CoreField={})),function(n){n.AreaId="System.AreaId";n.AreaPath="System.AreaPath";n.AssignedTo="System.AssignedTo";n.AttachedFileCount="System.AttachedFileCount";n.AuthorizedAs="System.AuthorizedAs";n.BoardColumn="System.BoardColumn";n.BoardColumnDone="System.BoardColumnDone";n.BoardLane="System.BoardLane";n.ChangedBy="System.ChangedBy";n.ChangedDate="System.ChangedDate";n.CreatedBy="System.CreatedBy";n.CreatedDate="System.CreatedDate";n.Description="System.Description";n.CommentCount="System.CommentCount";n.ExternalLinkCount="System.ExternalLinkCount";n.History="System.History";n.HyperLinkCount="System.HyperLinkCount";n.RemoteLinkCount="System.RemoteLinkCount";n.Id="System.Id";n.IterationId="System.IterationId";n.IterationPath="System.IterationPath";n.LinkType="System.Links.LinkType";n.NodeName="System.NodeName";n.Reason="System.Reason";n.RelatedLinkCount="System.RelatedLinkCount";n.Rev="System.Rev";n.RevisedDate="System.RevisedDate";n.State="System.State";n.AuthorizedDate="System.AuthorizedDate";n.TeamProject="System.TeamProject";n.Tags="System.Tags";n.Title="System.Title";n.WorkItemType="System.WorkItemType";n.Watermark="System.Watermark";n.IsDeleted="System.IsDeleted";n.Parent="System.Parent"}(u=t.CoreFieldRefNames||(t.CoreFieldRefNames={})),function(n){n.Related="System.LinkTypes.Related";n.Hierarchy="System.LinkTypes.Hierarchy";n.Dependency="System.LinkTypes.Dependency";n.Duplicate="System.LinkTypes.Duplicate"}(f=t.CoreLinkTypeReferenceNames||(t.CoreLinkTypeReferenceNames={})),function(n){n.IDId=-3;n.RevId=8;n.TitleId=1;n.DescriptionId=52;n.WorkItemTypeId=25;n.PortfolioProjectId=-42;n.WorkItemFormIDId=-14;n.WorkItemFormId=-15;n.StateId=2;n.ReasonId=22;n.CreatedById=33;n.WatermarkId=7;n.AssignedToId=24;n.LastChangedById=9;n.LastChangedDateId=-4;n.AuthorizedDateId=3;n.CreatedDateId=32;n.RevisedDateId=-5;n.PersonNameId=-1;n.AuthorizedAsId=-1;n.HistoryId=54;n.AreaPathId=-7;n.AreaIDId=-2;n.IterationPathId=-105;n.IterationIDId=-104;n.NodeNameId=-12;n.RelatedLinkCountId=75;n.RemoteLinkCountId=-34;n.LinkedFileCountId=-32;n.AttachedFileCountId=-31;n.CommentCountId=-33;n.BISURICountId=-57;n.Tags=80;n.BoardColumnId=90;n.BoardColumnDoneId=91;n.BoardLaneId=92;n.RelatedLinks=37;n.PersonID=-6;n.LinkedFiles=51;n.BISURI=58;n.AttachedFiles=50;n.HiddenAttachedFiles=49;n.AreaLevel1=-43;n.AreaLevel2=-44;n.AreaLevel3=-45;n.AreaLevel4=-46;n.AreaLevel5=-47;n.AreaLevel6=-48;n.AreaLevel7=-49;n.IterationLevel1=-50;n.IterationLevel2=-51;n.IterationLevel3=-52;n.IterationLevel4=-53;n.IterationLevel5=-54;n.IterationLevel6=-55;n.IterationLevel7=-56;n.IsDeleted=-404;n.ZZZDummyField=-58;n.Parent=-35}(e=t.DalFields||(t.DalFields={})),function(n){n[n.Internal=0]="Internal";n[n.String=1]="String";n[n.Integer=2]="Integer";n[n.DateTime=3]="DateTime";n[n.PlainText=5]="PlainText";n[n.Html=7]="Html";n[n.TreePath=8]="TreePath";n[n.History=9]="History";n[n.Double=10]="Double";n[n.Guid=11]="Guid";n[n.Boolean=12]="Boolean";n[n.PicklistInteger=14]="PicklistInteger";n[n.PicklistString=15]="PicklistString"}(o=t.FieldType||(t.FieldType={})),function(n){n.ArtifactType="WorkItem";n.UnfollowResult="UnfollowResult"}(s=t.FollowsConstants||(t.FollowsConstants={})),function(n){n[n.Desktop=0]="Desktop";n[n.Mobile=1]="Mobile"}(h=t.FormLayoutType||(t.FormLayoutType={})),function(n){n.BacklogPriority="Microsoft.VSTS.Common.BacklogPriority";n.StackRank="Microsoft.VSTS.Common.StackRank";n.ActivatedBy="Microsoft.VSTS.Common.ActivatedBy";n.ActivatedDate="Microsoft.VSTS.Common.ActivatedDate";n.ClosedBy="Microsoft.VSTS.Common.ClosedBy";n.ClosedDate="Microsoft.VSTS.Common.ClosedDate";n.ResolvedBy="Microsoft.VSTS.Common.ResolvedBy";n.ResolvedDate="Microsoft.VSTS.Common.ResolvedDate";n.StateChangeDate="Microsoft.VSTS.Common.StateChangeDate"}(c=t.OobFieldRefNames||(t.OobFieldRefNames={})),function(n){n.LastVisitedQueryGroupKey="LAST_VISITED_QUERY_GROUP";n.MyFavoritesGroupKey="MY_FAVORITES_GROUP";n.LastVisitedQueryMruKey="Queries/LastVisited";n.TeamFavoriteGroupsExpandStatesMruKey="Queries/FavoriteGroupExpandStates"}(l=t.QueriesConstants||(t.QueriesConstants={})),function(n){n[n.Json=0]="Json";n[n.Html=1]="Html"}(a=t.QueryResultFormat||(t.QueryResultFormat={})),function(n){n[n.unfollowFailed=0]="unfollowFailed";n[n.unfollowSuccess=1]="unfollowSuccess"}(v=t.UnfollowResultStatus||(t.UnfollowResultStatus={})),function(n){n.HtmlControl="HtmlFieldControl";n.PlainTextControl="PlainTextControl";n.FreshnessIndicatorControl="FreshnessIndicatorControl";n.FieldControl="FieldControl";n.DateControl="DateTimeControl";n.ClassificationControl="WorkItemClassificationControl";n.WorkItemLogControl="WorkItemLogControl";n.WorkItemHistoryControl="WorkItemHistoryControl";n.WorkItemStateGraphControl="WorkItemStateGraphControl";n.LinksControl="LinksControl";n.AttachmentsControl="AttachmentsControl";n.WebpageControl="WebpageControl";n.LabelControl="LabelControl";n.TagFieldControl="TagFieldControl";n.TestStepsControl="TestStepsControl";n.AssociatedAutomationControl="AssociatedAutomationControl";n.StageControl="StageControl";n.StageBuildControl="StageBuildControl";n.ReleaseBuildControl="ReleaseBuildControl";n.AcceptanceCriteriaControl="AcceptanceCriteriaControl";n.DevelopmentControl="DevelopmentControl";n.WorkItemDiscussionControl="WorkItemDiscussionControl";n.ParameterSetControl="ParameterSetControl";n.DeploymentsControl="DeploymentsControl"}(y=t.WellKnownControlNames||(t.WellKnownControlNames={})),function(n){n.LinkTypes="LinkTypes";n.WorkItemTypes="WorkItemTypes";n.Nodes="Nodes";n.Fields="Fields";n.AllowedValues="AllowedValues";n.ConstantSets="ConstantSets";n.WorkItemTypeCategories="WorkItemTypeCategories";n.TeamProjects="TeamProjects";n.AdhocQueries="AdhocQueries";n.WorkItemTrackingArea="WIT";n.WitCacheProviderInit="WorkItemTracking.CacheProvider.Initialize"}(p=t.WITCommonConstants||(t.WITCommonConstants={})),function(n){n.DataProviderName="ms.vss-work-web.work-item-feature-state-data-provider"}(w=t.WorkItemFeatureStateConstants||(t.WorkItemFeatureStateConstants={})),function(n){n.ShowOnDeletedWorkItem="showOnDeletedWorkItem";n.Height="height";n.Name="name";n.Inputs="inputs";n.InputId="id";n.InputRequired="isRequired";n.InputMode="inputMode";n.InputValidation="validation";n.InputDataType="dataType";n.InputDescription="description";n.InputType="type";n.InputProperties="properties";n.InputType_WorkItemField="WorkItemField";n.FieldType="Field";n.InputProperties_WorkItemFieldTypes="workItemFieldTypes"}(b=t.WorkItemFormContributionProperties||(t.WorkItemFormContributionProperties={})),function(n){n.ContributionDefaultHeight_Group=150;n.ContributionDefaultHeight_Control=75;n.ContributionTarget_Form="ms.vss-work-web.work-item-form";n.ContributionType_Page="ms.vss-work-web.work-item-form-page";n.ContributionType_Group="ms.vss-work-web.work-item-form-group";n.ContributionType_Control="ms.vss-work-web.work-item-form-control";n.ContributionType_Notifications="ms.vss-work-web.work-item-notifications"}(k=t.WorkItemFormExtensionsConstants||(t.WorkItemFormExtensionsConstants={})),function(n){n.RESOURCELINKTYPES=["Hyperlink","ArtifactLink"];n.WORKITEMLINKUSAGE="workItemLink";n.RESOURCELINKUSAGE="resourceLink";n.ATTACHEDLINKTYPE="AttachedFile";n.HYPERLINKLINKTYPE="Hyperlink";n.ARTIFACTLINKTYPE="ArtifactLink";n.EXTERNALLINKTYPE="ExternalLink";n.ATTRIBUTES_USAGE="usage";n.ATTRIBUTES_EDITABLE="editable";n.ATTRIBUTES_ENABLED="enabled";n.ATTRIBUTES_ACYCLIC="acyclic";n.ATTRIBUTES_DIRECTIONAL="directional";n.ATTRIBUTES_SINGLETARGET="singleTarget";n.ATTRIBUTES_TOPOLOGY="topology";n.ATTRIBUTES_ID="id";n.ATTRIBUTES_AUTHORIZEDDATE="authorizedDate";n.ATTRIBUTES_RESOURCECREATEDDATE="resourceCreatedDate";n.ATTRIBUTES_RESOURCEMODIFIEDDATE="resourceModifiedDate";n.ATTRIBUTES_REVISEDDATE="revisedDate";n.ATTRIBUTES_RESOURCESIZE="resourceSize";n.ATTRIBUTES_COMMENT="comment";n.ATTRIBUTES_NAME="name";n.ATTRIBUTES_ISLOCKED="isLocked"}(d=t.WorkItemLinkConstants||(t.WorkItemLinkConstants={})),function(n){n.DataProviderName="ms.vss-work-web.work-item-settings-data-provider";n.Path="WorkItemTracking/Settings"}(g=t.WorkItemSettingsConstants||(t.WorkItemSettingsConstants={})),function(n){n.CookieFormat="WIT";n.DataProviderExperimentId="ms.vss-work-web.work-item-form-data-providers-experiment"}(nt=t.WorkItemTrackingMetadataCacheConstants||(t.WorkItemTrackingMetadataCacheConstants={})),function(n){n.WorkItemTypeIconNames=["icon_clipboard","icon_crown","icon_trophy","icon_list","icon_book","icon_sticky_note","icon_insect","icon_traffic_cone","icon_chat_bubble","icon_flame","icon_megaphone","icon_code_review","icon_code_response","icon_review","icon_response","icon_test_plan","icon_test_suite","icon_test_case","icon_test_step","icon_test_parameter","icon_star","icon_ribbon","icon_chart","icon_headphone","icon_key","icon_airplane","icon_car","icon_diamond","icon_asterisk","icon_database_storage","icon_government","icon_gavel","icon_parachute","icon_paint_brush","icon_palette","icon_gear","icon_check_box","icon_gift","icon_test_beaker","icon_broken_lightbulb","icon_clipboard_issue","icon_github","icon_pull_request","icon_github_issue"];n.DefaultWorkItemTypeIconName="icon_clipboard"}(tt=t.WorkItemTypeIcons||(t.WorkItemTypeIcons={}))});

define("Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider",["require","exports","VSS/Diag","VSS/Service","VSS/Contributions/Services","VSS/Error","Presentation/Scripts/TFS/TFS.Host.TfsContext","TFS/WorkItemTracking/RestClient","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o,s){function h(n){return n=n||"",n.trim().toLowerCase()}var c,l;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTypeColorAndIconsProvider=t.WorkItemTypeColorAndIcons=t.getNormalizedValue=void 0;t.getNormalizedValue=h;c=function(){function n(){this._items={}}return n.getDefault=function(){return{color:n.DEFAULT_WORKITEMTYPE_COLOR,icon:n.DEFAULT_WORKITEMTYPE_BOWTIE_ICON}},n.prototype.setColorAndIcon=function(t,i,r){var u=h(t);return this._items[u]={color:n.transformColor(i),icon:n.transformIcon(r)},this._items[u]},n.prototype.getColorAndIcon=function(t){var i=h(t);return this._items[i]||n.getDefault()},n.transformColor=function(t){return t?"#".concat(t.substr(t.length-6)):n.DEFAULT_WORKITEMTYPE_COLOR},n.transformIcon=function(t){return(t=h(t),!t||!n.ICON_NAME_MAPPINGS[t])?n.DEFAULT_WORKITEMTYPE_BOWTIE_ICON:n.ICON_NAME_MAPPINGS[t]},n.ICON_NAME_MAPPINGS={icon_crown:"bowtie-symbol-crown",icon_trophy:"bowtie-symbol-trophy",icon_list:"bowtie-symbol-list",icon_book:"bowtie-symbol-book",icon_sticky_note:"bowtie-symbol-stickynote",icon_clipboard:"bowtie-symbol-task",icon_insect:"bowtie-symbol-bug",icon_traffic_cone:"bowtie-symbol-impediment",icon_chat_bubble:"bowtie-symbol-review",icon_flame:"bowtie-symbol-flame",icon_megaphone:"bowtie-symbol-ask",icon_test_plan:"bowtie-test-plan",icon_test_suite:"bowtie-test-suite",icon_test_case:"bowtie-test-case",icon_test_step:"bowtie-test-step",icon_test_parameter:"bowtie-test-parameter",icon_code_review:"bowtie-symbol-review-request",icon_code_response:"bowtie-symbol-review-response",icon_review:"bowtie-symbol-feedback-request",icon_response:"bowtie-symbol-feedback-response",icon_ribbon:"bowtie-symbol-ribbon",icon_chart:"bowtie-symbol-finance",icon_headphone:"bowtie-symbol-headphone",icon_key:"bowtie-symbol-key",icon_airplane:"bowtie-symbol-airplane",icon_car:"bowtie-symbol-car",icon_diamond:"bowtie-symbol-diamond",icon_asterisk:"bowtie-symbol-asterisk",icon_database_storage:"bowtie-symbol-storage-database",icon_government:"bowtie-symbol-government",icon_gavel:"bowtie-symbol-decision",icon_parachute:"bowtie-symbol-parachute",icon_paint_brush:"bowtie-symbol-paint-brush",icon_palette:"bowtie-symbol-color-palette",icon_gear:"bowtie-settings-gear",icon_check_box:"bowtie-status-success-box",icon_gift:"bowtie-package-fill",icon_test_beaker:"bowtie-test-fill",icon_broken_lightbulb:"bowtie-symbol-defect",icon_clipboard_issue:"bowtie-symbol-issue",icon_github:"bowtie-brand-github",icon_pull_request:"bowtie-tfvc-pull-request",icon_github_issue:"bowtie-status-error-outline"},n.DEFAULT_UNPARENTED_WORKITEM_COLOR="#A6A6A6",n.DEFAULT_UNPARENTED_WORKITEM_BOWTIE_ICON="bowtie-square",n.DEFAULT_WORKITEMTYPE_COLOR_HEX="009CCC",n.DEFAULT_WORKITEMTYPE_COLOR="#".concat(n.DEFAULT_WORKITEMTYPE_COLOR_HEX),n.DEFAULT_WORKITEMTYPE_ICON=s.WorkItemTypeIcons.DefaultWorkItemTypeIconName,n.DEFAULT_WORKITEMTYPE_BOWTIE_ICON=n.ICON_NAME_MAPPINGS[n.DEFAULT_WORKITEMTYPE_ICON],n}();t.WorkItemTypeColorAndIcons=c;l=function(){function n(){this._cachedPromises={};this._projectToColorAndIconsMap={};this._restClient=o.getClient()}return n.getInstance=function(){return n._instance||(n._instance=this._getDataProvider()),n._instance},n.prototype.isPopulated=function(n){return n?(n=h(n),this._projectToColorAndIconsMap.hasOwnProperty(n)):!1},n.prototype.getColorAndIcon=function(n,t){return n&&t&&(n=h(n),this._projectToColorAndIconsMap[n])?this._projectToColorAndIconsMap[n].getColorAndIcon(t):c.getDefault()},n.prototype.getColor=function(n,t){return this.getColorAndIcon(n,t).color},n.prototype.ensureColorAndIconsArePopulated=function(n){var s=this,u,e,o,t,r;for(n||i.Debug.fail("EnsureWorkItemTypeColors - parameter 'projects' cannot be null or undefined"),u={},e=0,o=n;e<o.length;e++)t=o[e],t=h(t),u.hasOwnProperty(t)||this.isPopulated(t)||(u[t]=null);return(r=Object.keys(u),r.length===0)?Promise.resolve():r.length===1?this._fetchWorkItemTypeColorAndIcons(r[0]):this._restClient.getWorkItemTypeColorAndIcons(r).then(function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],s._setColors(r.key,r.value)},function(n){return f.publishErrorToTelemetry(n)})},n.prototype.getColorAndIconAsync=function(n,t){var r=this;return(i.Debug.assertIsNotNull(n,"WorkItemTypeColorAndIconsProvider - 'getColorAndIconAsync' projectName cannot be null/undefined"),this.isPopulated(n))?Promise.resolve(this.getColorAndIcon(n,t)):this.queueEnsureColorAndIconsArePopulated(n).then(function(){return r.getColorAndIcon(n,t)})},n.prototype.getColorAsync=function(n,t){return i.Debug.assertIsNotNull(n,"WorkItemTypeColorAndIconsProvider - 'getColorAsync' projectName cannot be null/undefined"),this.getColorAndIconAsync(n,t).then(function(n){return n.color})},n.prototype.queueEnsureColorAndIconsArePopulated=function(n){var t=this;return i.Debug.assertIsNotNull(n,"WorkItemTypeColorAndIconsProvider - 'queueEnsureColorAndIconsArePopulated' projectName cannot be null/undefined"),n=h(n),this._cachedPromises[n]?this._cachedPromises[n]:(this._cachedPromises[n]=this.ensureColorAndIconsArePopulated([n]),this._cachedPromises[n].then(function(){delete t._cachedPromises[n]},function(i){delete t._cachedPromises[n];f.publishErrorToTelemetry(i)}))},n.prototype._setColors=function(n,t){for(var i,u=new c,r=0,f=t;r<f.length;r++)i=f[r],u.setColorAndIcon(i.workItemTypeName,i.color,i.icon);n=h(n);this._projectToColorAndIconsMap[n]=u},n._getDataProvider=function(){var t=e.TfsContext.getDefault().contextData.project,o=r.getService(u.WebPageDataService),i=new n,f=o.getPageData("ms.vss-work-web.work-item-type-color-icon-data-provider");return t&&f&&i._setColors(t.name,f),i},n.prototype._fetchWorkItemTypeColorAndIcons=function(t){var i=this;return this._restClient.getWorkItemTypes(t).then(function(r){if(!r)throw new Error("WorkItemTypeColorAndIconsProvider - '_restClient.getWorkItemTypes' returned undefined workItemTypes for project '".concat(t,"'"));i._setColors(t,r.map(function(i){if(!i)throw new Error("WorkItemTypeColorAndIconsProvider - '_restClient.getWorkItemTypes' returned a null type for project '".concat(t,"'"));return n._toWorkItemTypeColorAndIcon(i)}))},function(n){return f.publishErrorToTelemetry(n)}).then(function(){},function(n){return f.publishErrorToTelemetry(n)})},n._toWorkItemTypeColorAndIcon=function(n){var i=n.color,t=n.icon,r=n.name;return{color:i,icon:t&&t.id,workItemTypeName:r}},n}();t.WorkItemTypeColorAndIconsProvider=l});

define("Presentation/Scripts/TFS/FeatureRef/WorkItemStateColorsProvider",["require","exports","q","VSS/Diag","VSS/Error","VSS/Service","VSS/Utils/String","VSS/Contributions/Services","Presentation/Scripts/TFS/TFS.Host.TfsContext","TFS/WorkItemTracking/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f,e,o,s,h,c){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemStateColorsProvider=void 0;var l=function(){function n(){var n,i,t;this._restClient=f.getClient(h.WorkItemTrackingHttpClient);this._projectNameToColorSettingsMap={};this._settingsBeingFetched={};n=s.TfsContext.getDefault().contextData.project;n&&n.name&&(i=f.getService(o.WebPageDataService),t=i.getPageData("ms.vss-work-web.work-item-states-color-data-provider"),!t||this._setData({projectName:n.name,workItemTypeStateColors:this._mapWorkItemStatesColors(t)}))}return n.prototype._mapWorkItemStatesColors=function(n){var i=[],t,r;for(t in n)n.hasOwnProperty(t)&&(r=n[t],i.push({workItemTypeName:t,stateColors:r}));return i},n.getInstance=function(){return n._workItemStatesColorProvider||(n._workItemStatesColorProvider=new n),n._workItemStatesColorProvider},n.prototype.isPopulated=function(n){return n?(n=this._getNormalizedString(n),this._projectNameToColorSettingsMap.hasOwnProperty(n))?!0:!1:!1},n.prototype.getColor=function(t,i,r){var f,u;return r&&t&&i&&(t=this._getNormalizedString(t),i=this._getNormalizedString(i),r=this._getNormalizedString(r),f=this._projectNameToColorSettingsMap[t],!!f&&(u=f[i],!!u&&!!u[r]))?u[r]:n.DEFAULT_STATE_COLOR},n.prototype.ensureColorsArePopulated=function(n){var h=this,e,o,s,t,f;for(!n,e={},o=0,s=n;o<s.length;o++)t=s[o],t=this._getNormalizedString(t),e.hasOwnProperty(t)||this.isPopulated(t)||(e[t]=null);if(f=Object.keys(e),f.length===0)return i(null);if(f.some(function(n){return!n}))try{throw new Error("Invalid Project Name(s) provided to ensureColorsArePopulated");}catch(c){c.name="WorkItemStateColorsInvalidProjects";u.publishErrorToTelemetry(c)}return this._restClient.getWorkItemStateColors(f).then(function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],h._setData(r);return null},function(){var n=f.map(function(n){return h._fallbackToDataProvider(n)});return Promise.all(n)})},n.prototype.getColorAsync=function(n,t,r){var f=this,e;return(n=this._getNormalizedString(n),this.isPopulated(n))?i(this.getColor(n,t,r)):this._settingsBeingFetched.hasOwnProperty(n)?this._settingsBeingFetched[n].then(function(){return f.getColor(n,t,r)},function(){}):(e=this.ensureColorsArePopulated([n]).then(function(){return delete f._settingsBeingFetched[n],null},function(t){delete f._settingsBeingFetched[n];u.publishErrorToTelemetry(t)}),this._settingsBeingFetched[n]=e,e.then(function(){return f.getColor(n,t,r)},function(){}))},n.prototype._setData=function(n){var u,o,t,f,i,e;if(!this.isPopulated(n.projectName)){for(u={},o=this._getNormalizedString(n.projectName),t=0,f=n.workItemTypeStateColors;t<f.length;t++){var s=f[t],h={},a=this._getNormalizedString(s.workItemTypeName);for(i=0,e=s.stateColors;i<e.length;i++){var c=e[i],v=this._getNormalizedString(c.name),l=this._getNormalizedString(c.color);h[v]="#".concat(l.substr(l.length-6))}u[a]=h}this._projectNameToColorSettingsMap[o]=u}},n.prototype._getNormalizedString=function(n){return n=n||"",n.trim().toLowerCase()},n.prototype._fallbackToDataProvider=function(n){var t=this,i=f.getService(o.WebPageDataService),r="ms.vss-work-web.work-item-states-color-data-provider",s={id:r,properties:{serviceInstanceType:c.ServiceInstanceTypes.TFS}},h={projectName:n};return i.ensureDataProvidersResolved([s],!0,h).then(function(){var u=i.getPageData(r);return!u||t._setData({projectName:n,workItemTypeStateColors:t._mapWorkItemStatesColors(u)}),null},function(i){u.publishErrorToTelemetry({name:"GetWorkItemStateColorsForProjectsException",message:e.format("Failed to fetch state color data for project {0}: {1}",n,JSON.stringify(i))});t._setData({workItemTypeStateColors:[],projectName:n})})},n.DEFAULT_STATE_COLOR="transparent",n}();t.WorkItemStateColorsProvider=l});

define("Search.Client/Shared/Search.Shared.Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.VersionControlType=t.SortOrder=t.SearchScope=t.InfoCodes=void 0,function(n){n[n.Ok=0]="Ok";n[n.AccountIsBeingReindexed=1]="AccountIsBeingReindexed";n[n.IndexingNotStarted=2]="IndexingNotStarted";n[n.InvalidRequest=3]="InvalidRequest";n[n.PrefixWildcardQueryNotSupported=4]="PrefixWildcardQueryNotSupported";n[n.MultiWordWithCodeFacetNotSupported=5]="MultiWordWithCodeFacetNotSupported";n[n.AccountIsBeingOnboarded=6]="AccountIsBeingOnboarded";n[n.TakeResultValueTrimmedToMaxResultAllowed=8]="TakeResultValueTrimmedToMaxResultAllowed";n[n.BranchesAreBeingIndexed=9]="BranchesAreBeingIndexed";n[n.FacetingNotEnabledAtScaleUnit=10]="FacetingNotEnabledAtScaleUnit";n[n.WorkItemsNotAccessible=11]="WorkItemsNotAccessible";n[n.EmptyQueryNotSupported=12]="EmptyQueryNotSupported";n[n.OnlyWildcardQueryNotSupported=13]="OnlyWildcardQueryNotSupported";n[n.ZeroResultsWithWildcard=14]="ZeroResultsWithWildcard";n[n.ZeroResultsWithFilter=15]="ZeroResultsWithFilter";n[n.ZeroResultsWithWildcardAndFilter=16]="ZeroResultsWithWildcardAndFilter";n[n.ZeroResultsWithNoWildcardNoFilter=17]="ZeroResultsWithNoWildcardNoFilter";n[n.PartialResultsDueToSearchRequestTimeout=18]="PartialResultsDueToSearchRequestTimeout";n[n.PhraseQueriesWithCEFacetsNotSupported=19]="PhraseQueriesWithCEFacetsNotSupported";n[n.WildcardQueriesWithCEFacetsNotSupported=20]="WildcardQueriesWithCEFacetsNotSupported";n[n.ClearedScrollSearchRequestParam=21]="ClearedScrollSearchRequestParam";n[n.InvalidScrollSearchRequestParam=22]="InvalidScrollSearchRequestParam";n[n.StopWarmerRequests=23]="StopWarmerRequests";n[n.WildCardPartialResults=24]="WildCardPartialResults";n[n.ReindexingCompleted=25]="ReindexingCompleted";n[n.ReindexingInProgress=26]="ReindexingInProgress";n[n.InvalidIndexingMode=27]="InvalidIndexingMode";n[n.ReindexingPausedForPrimaryIndexingUnit=28]="ReindexingPausedForPrimaryIndexingUnit";n[n.WildcardSubstringTooShort=29]="WildcardSubstringTooShort";n[n.UnsupportedProximitySearchTerm=30]="UnsupportedProximitySearchTerm";n[n.PrefixSuffixSubStringTooShort=31]="PrefixSuffixSubStringTooShort";n[n.SubstringWithInfixWildcard=32]="SubstringWithInfixWildcard";n[n.SubstringWithInfixWildcardCEFFacets=33]="SubstringWithInfixWildcardCEFFacets";n[n.SubstringSearchCEFFacets=34]="SubstringSearchCEFFacets";n[n.QuestionMarkWildcardSubstring=35]="QuestionMarkWildcardSubstring";n[n.MixedWildcardSubstring=36]="MixedWildcardSubstring"}(i=t.InfoCodes||(t.InfoCodes={})),function(n){n[n.None=0]="None";n[n.Organization=1]="Organization";n[n.Project=2]="Project";n[n.User=3]="User"}(r=t.SearchScope||(t.SearchScope={})),function(n){n[n.Undefined=0]="Undefined";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"}(u=t.SortOrder||(t.SortOrder={})),function(n){n[n.Git=0]="Git";n[n.Tfvc=1]="Tfvc";n[n.Custom=2]="Custom"}(f=t.VersionControlType||(t.VersionControlType={}));t.TypeInfo={InfoCodes:{enumValues:{ok:0,accountIsBeingReindexed:1,indexingNotStarted:2,invalidRequest:3,prefixWildcardQueryNotSupported:4,multiWordWithCodeFacetNotSupported:5,accountIsBeingOnboarded:6,takeResultValueTrimmedToMaxResultAllowed:8,branchesAreBeingIndexed:9,facetingNotEnabledAtScaleUnit:10,workItemsNotAccessible:11,emptyQueryNotSupported:12,onlyWildcardQueryNotSupported:13,zeroResultsWithWildcard:14,zeroResultsWithFilter:15,zeroResultsWithWildcardAndFilter:16,zeroResultsWithNoWildcardNoFilter:17,partialResultsDueToSearchRequestTimeout:18,phraseQueriesWithCEFacetsNotSupported:19,wildcardQueriesWithCEFacetsNotSupported:20,clearedScrollSearchRequestParam:21,invalidScrollSearchRequestParam:22,stopWarmerRequests:23,wildCardPartialResults:24,reindexingCompleted:25,reindexingInProgress:26,invalidIndexingMode:27,reindexingPausedForPrimaryIndexingUnit:28,wildcardSubstringTooShort:29,unsupportedProximitySearchTerm:30,prefixSuffixSubStringTooShort:31,substringWithInfixWildcard:32,substringWithInfixWildcardCEFFacets:33,substringSearchCEFFacets:34,questionMarkWildcardSubstring:35,mixedWildcardSubstring:36}},Repository:{},SearchScope:{enumValues:{none:0,organization:1,project:2,user:3}},SettingResult:{},SettingSearchResponse:{},SortOrder:{enumValues:{undefined:0,ascending:1,descending:2}},VersionControlType:{enumValues:{git:0,tfvc:1,custom:2}}};t.TypeInfo.Repository.fields={type:{enumType:t.TypeInfo.VersionControlType}};t.TypeInfo.SettingResult.fields={scope:{enumType:t.TypeInfo.SearchScope}};t.TypeInfo.SettingSearchResponse.fields={results:{isArray:!0,typeInfo:t.TypeInfo.SettingResult}}});

define("Search.Client/Contracts",["require","exports","Search.Client/Shared/Search.Shared.Contracts"],function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=void 0;t.TypeInfo={BranchInfo:{},CodeResult:{},CodeSearchResponse:{},CustomRepositoryBranchStatusResponse:{},CustomRepositoryStatusResponse:{},DepotInfo:{},RepositoryStatusResponse:{},TfvcRepositoryStatusResponse:{}};t.TypeInfo.BranchInfo.fields={lastProcessedTime:{isDate:!0}};t.TypeInfo.CodeResult.fields={repository:{typeInfo:i.TypeInfo.Repository}};t.TypeInfo.CodeSearchResponse.fields={results:{isArray:!0,typeInfo:t.TypeInfo.CodeResult}};t.TypeInfo.CustomRepositoryBranchStatusResponse.fields={lastIndexedChangeIdChangeTime:{isDate:!0},latestChangeIdChangeTime:{isDate:!0}};t.TypeInfo.CustomRepositoryStatusResponse.fields={indexedTopLevelFolders:{isArray:!0,typeInfo:t.TypeInfo.DepotInfo}};t.TypeInfo.DepotInfo.fields={indexedBranches:{isArray:!0,typeInfo:t.TypeInfo.BranchInfo}};t.TypeInfo.RepositoryStatusResponse.fields={indexedBranches:{isArray:!0,typeInfo:t.TypeInfo.BranchInfo}};t.TypeInfo.TfvcRepositoryStatusResponse.fields={indexingInformation:{isArray:!0,typeInfo:t.TypeInfo.BranchInfo}}});

define("Search.Client/RestClient",["require","exports","Search.Client/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function ft(n){return window.VSS&&window.VSS.VssSDKRestVersion&&rt[window.VSS.VssSDKRestVersion]?r.getClient(rt[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(s,undefined,undefined,undefined,n)}var f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,ut,rt;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.SearchHttpClient=t.SearchHttpClient2=t.SearchHttpClient2_1=t.SearchHttpClient2_2=t.SearchHttpClient2_3=t.SearchHttpClient3=t.SearchHttpClient3_1=t.SearchHttpClient3_2=t.SearchHttpClient4=t.SearchHttpClient4_1=t.SearchHttpClient5=t.SearchHttpClient5_1=t.SearchHttpClient5_2=t.SearchHttpClient6=t.SearchHttpClient6_1=t.SearchHttpClient7=t.SearchHttpClient7_1=t.SearchHttpClient7_2=t.CommonMethods5To7_2=t.CommonMethods2To7_2=void 0;f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.fetchWorkItemSearchResults=function(n,t){return this._beginRequest({httpMethod:"POST",area:"search",locationId:"73b2c9e2-ff9e-4447-8cda-5f5b21ff7cae",resource:"workItemSearchResults",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.workItemSearchResultsApiVersion,data:n})},t.prototype.fetchWikiSearchResults=function(n,t){return this._beginRequest({httpMethod:"POST",area:"search",locationId:"e90e7664-7049-4100-9a86-66b161d81080",resource:"wikiSearchResults",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.wikiSearchResultsApiVersion,data:n})},t.prototype.fetchPackageSearchResults=function(n){return this._beginRequest({httpMethod:"POST",area:"search",locationId:"f62ada48-eedc-4c8e-93f0-de870e4ecce0",resource:"packageSearchResults",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.packageSearchResultsApiVersion,data:n},!0).then(function(n){var i=n[0],u=n[1],r=n[2],t=r.getResponseHeader("ActivityId");return{content:i,activityId:t?t.split(","):[]}})},t.prototype.fetchCodeSearchResults=function(n,t){return this._beginRequest({httpMethod:"POST",area:"search",locationId:"e7f29993-5b82-4fca-9386-f5cfe683d524",resource:"codeSearchResults",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.CodeSearchResponse,routeValues:{project:t},apiVersion:this.codeSearchResultsApiVersion,data:n})},t.prototype.fetchScrollCodeSearchResults=function(n,t){return this._beginRequest({httpMethod:"POST",area:"search",locationId:"852dac94-e8f7-45a2-9910-927ae35766a2",resource:"codeSearchPaginatedResults",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.CodeSearchResponse,routeValues:{project:t},apiVersion:this.codeSearchPaginatedResultsApiVersion,data:n})},t.prototype.fetchAdvancedCodeSearchResults=function(n,t){return this._beginRequest({httpMethod:"POST",area:"search",locationId:"6bc8d206-9a7e-4cfb-83e1-c9a81e7bf166",resource:"advancedCodeSearchResults",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.CodeSearchResponse,routeValues:{project:t},apiVersion:this.advancedCodeSearchResultsApiVersion,data:n})},t.serviceInstanceId="00000010-0000-8888-8000-000000000000",t}(u.VssHttpClient);t.CommonMethods2To7_2=f;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getTfvcRepositoryStatus=function(n){return this._beginRequest({httpMethod:"GET",area:"search",locationId:"d5bf4e52-e0af-4626-8c50-8a80b18fa69f",resource:"tfvc",routeTemplate:"{project}/_apis/{area}/status/{resource}",responseType:i.TypeInfo.TfvcRepositoryStatusResponse,routeValues:{project:n},apiVersion:this.tfvcApiVersion})},t.prototype.getRepositoryStatus=function(n,t){return this._beginRequest({httpMethod:"GET",area:"search",locationId:"1f60303c-7261-4387-80f1-742a2ecf2964",resource:"repositories",routeTemplate:"{project}/_apis/{area}/status/{resource}/{repository}",responseType:i.TypeInfo.RepositoryStatusResponse,routeValues:{project:n,repository:t},apiVersion:this.repositoriesApiVersion})},t.prototype.getCustomRepositoryBranchStatus=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"search",locationId:"5d9391b9-e2c3-4b87-9033-83c3aed4069e",resource:"customRepositoryBranch",routeTemplate:"{project}/_apis/{area}/{resource}/{repository}/{branch}",responseType:i.TypeInfo.CustomRepositoryBranchStatusResponse,routeValues:{project:n,repository:t,branch:r},apiVersion:this.customRepositoryBranchApiVersion})},t.prototype.getCustomRepositoryStatus=function(n,t){return this._beginRequest({httpMethod:"GET",area:"search",locationId:"de4c37b8-f55f-4c38-8f3f-a296cfb63121",resource:"customRepositories",routeTemplate:"{project}/_apis/{area}/status/{resource}/{repository}",responseType:i.TypeInfo.CustomRepositoryStatusResponse,routeValues:{project:n,repository:t},apiVersion:this.customRepositoriesApiVersion})},t}(f);t.CommonMethods5To7_2=e;o=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.advancedCodeSearchResultsApiVersion=r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.customRepositoriesApiVersion=r.customRepositoryBranchApiVersion=r.packageSearchResultsApiVersion=r.repositoriesApiVersion=r.tfvcApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="7.2-preview.1",r}return __extends(t,n),t}(e);t.SearchHttpClient7_2=o;s=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.repositoriesApiVersion=r.tfvcApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="7.1",r.advancedCodeSearchResultsApiVersion=r.customRepositoriesApiVersion=r.customRepositoryBranchApiVersion="7.1-preview.1",r}return __extends(t,n),t}(e);t.SearchHttpClient7_1=s;h=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.repositoriesApiVersion=r.tfvcApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="7.0",r.advancedCodeSearchResultsApiVersion=r.customRepositoriesApiVersion=r.customRepositoryBranchApiVersion="7.0-preview.1",r}return __extends(t,n),t}(e);t.SearchHttpClient7=h;c=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.repositoriesApiVersion=r.tfvcApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="6.1",r.advancedCodeSearchResultsApiVersion=r.customRepositoriesApiVersion=r.customRepositoryBranchApiVersion="6.1-preview.1",r}return __extends(t,n),t}(e);t.SearchHttpClient6_1=c;l=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.repositoriesApiVersion=r.tfvcApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="6.0",r.advancedCodeSearchResultsApiVersion=r.customRepositoriesApiVersion=r.customRepositoryBranchApiVersion="6.0-preview.1",r}return __extends(t,n),t}(e);t.SearchHttpClient6=l;a=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.repositoriesApiVersion=r.tfvcApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="5.2",r.advancedCodeSearchResultsApiVersion=r.customRepositoriesApiVersion=r.customRepositoryBranchApiVersion="5.2-preview.1",r}return __extends(t,n),t}(e);t.SearchHttpClient5_2=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.repositoriesApiVersion=r.tfvcApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="5.1",r.advancedCodeSearchResultsApiVersion=r.customRepositoriesApiVersion=r.customRepositoryBranchApiVersion="5.1-preview.1",r}return __extends(t,n),t}(e);t.SearchHttpClient5_1=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.repositoriesApiVersion=r.tfvcApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="5.0",r.advancedCodeSearchResultsApiVersion=r.customRepositoriesApiVersion=r.customRepositoryBranchApiVersion="5.0-preview.1",r}return __extends(t,n),t}(e);t.SearchHttpClient5=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="4.1",r.advancedCodeSearchResultsApiVersion="4.1-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient4_1=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="4.0",r.advancedCodeSearchResultsApiVersion="4.0-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient4=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="3.2",r.advancedCodeSearchResultsApiVersion="3.2-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient3_2=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="3.1",r.advancedCodeSearchResultsApiVersion="3.1-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient3_1=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="3.0",r.advancedCodeSearchResultsApiVersion="3.0-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient3=d;g=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="2.3",r.advancedCodeSearchResultsApiVersion="2.3-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient2_3=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="2.2",r.advancedCodeSearchResultsApiVersion="2.2-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient2_2=nt;tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="2.1",r.advancedCodeSearchResultsApiVersion="2.1-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient2_1=tt;it=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.codeSearchPaginatedResultsApiVersion=r.codeSearchResultsApiVersion=r.packageSearchResultsApiVersion=r.wikiSearchResultsApiVersion=r.workItemSearchResultsApiVersion="2.0",r.advancedCodeSearchResultsApiVersion="2.0-preview.1",r}return __extends(t,n),t}(f);t.SearchHttpClient2=it;ut=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(o);t.SearchHttpClient=ut;rt={"7.2":o,"7.1":s,"7.0":h,"6.1":c,"6.0":l,"5.2":a,"5.1":v,"5.0":y,"4.1":p,"4.0":w,"3.2":b,"3.1":k,"3.0":d,"2.3":g,"2.2":nt,"2.1":tt,"2.0":it};t.getClient=ft});

var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};define("Mention/Scripts/WorkItem/WorkItemProvider",["require","exports","q","VSS/Diag","VSS/VSS","VSS/Error","VSS/Service","VSS/Utils/String","VSS/Telemetry/Services","VSS/Utils/Array","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Social.Telemetry","Mention/Scripts/TFS.Mention","TFS/WorkItemTracking/RestClient","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","TFS/WorkItemTracking/Contracts","Mention/Scripts/WorkItem/WorkItemMentionUtilities","Mention/Scripts/Resources/TFS.Resources.Mention","Presentation/Scripts/TFS/FeatureRef/WorkItemStateColorsProvider","Presentation/Scripts/TFS/TFS.Host.TfsContext","Search.Client/RestClient","VSS/Contributions/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){var rt,it;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemProviderCache=t.WorkItemProvider=void 0;rt=function(){function n(t){var f=this,i,r,u;if(this._isFullTextEnabled=function(){return __awaiter(f,void 0,void 0,function(){var i,n,t,r;return __generator(this,function(u){switch(u.label){case 0:return g.TfsContext.getDefault().isHosted?[2,!0]:[4,v.getClient().getWorkItemField(y.CoreFieldRefNames.Title)];case 1:for(i=u.sent(),n=0,t=i.supportedOperations;n<t.length;n++)if(r=t[n].referenceName,r==="SupportedOperations.ContainsWords")return[2,!0];return[2,!1]}})})}(),this._client=e.getClient(v.WorkItemTrackingHttpClient,c.getMainTfsContext().contextData),this._wiql=t!=null&&t.wiql!=null?t.wiql:n.DEFAULT_WIQL,this._workItemIdsToIgnore={},t&&t.workItemIdsToIgnore&&t.workItemIdsToIgnore.length>0)for(i=0,r=t.workItemIdsToIgnore;i<r.length;i++)u=r[i],this._workItemIdsToIgnore[u]=!0}return n.getInstance=function(){return n._instance=n._instance||new n},n.prototype.getArtifactType=function(){return"WorkItem"},n.prototype.getById=function(n){var i=parseInt(n),t=this.getWorkItemPromises([i]);if(t.length===1)return t[0];throw new Error("Expected GetWorkItemsByIds to return 1 promise.");},n.prototype.prefetch=function(){if(!this._myWorkItems){var n=(new Date).getTime(),t=$.Deferred(),i=$.Deferred(),r=$.Deferred();$.when(t,i,r).done(function(t,i,r){l.EventLogging.publishWorkItemsInitializeEvent({getMyAssignedWorkItemsDurationInMsec:(t-n).toString(),getWorkItemColorsProviderDurationInMsec:(i-n).toString(),getWorkItemStateColorsProviderDurationInMsec:(r-n).toString()})});this._myWorkItems=this.getMyWorkItems();this._myWorkItems.then(function(){t.resolve((new Date).getTime())});it.getInstance()._witColorAndIconsProviderPromise.then(function(){i.resolve((new Date).getTime())});it.getInstance()._witStateColorsProviderPromise.then(function(){r.resolve((new Date).getTime())});g.TfsContext.getDefault().isHosted||this._isSearchEnabledForOnPrem()}},n.prototype.searchById=function(n){this.prefetch();var t=$.Deferred(),r=parseInt(n),u=[],f=[],e=function(n,t){h.contains(f,n.id)||(f.push(n.id),u.push({original:n,highlighted:t}))},s=function(t){if(t!==null){var i=void 0;isNaN(r)?(i={id:t.id,projectName:t.projectName,colorAndIcon:t.colorAndIcon,workItemType:t.workItemType,title:o.htmlEncode(t.title)},e(t,i)):(i=b.searchHighlightedWorkItem(n,t),i!==t&&e(t,i))}},c=this.getWorkItems([r]);return i.all([c,this._myWorkItems]).then(function(n){n.forEach(function(n){n.forEach(function(n){s(n)})});t.resolve(u)},function(){t.reject.apply(t,arguments)}),t.promise()},n.prototype._transformWorkItems=function(n,t,i){var u=this,r=[];return t.forEach(function(t){if(!u._workItemIdsToIgnore[t.id]){var f=void 0;f=i?b.searchHighlightedWorkItem(n,t):{id:t.id,projectName:t.projectName,colorAndIcon:t.colorAndIcon,workItemType:t.workItemType,title:o.htmlEncode(t.title)};f===t&&i||r.push({original:t,highlighted:f})}}),r},n.prototype.search=function(n){var i=this,t;return this.prefetch(),t=$.Deferred(),this._myWorkItems.then(function(r){var u=i._transformWorkItems(n,r,!0);t.resolve(u)},function(n){t.reject(n)}),t.promise()},n.prototype.searchOnServer=function(n){return __awaiter(this,void 0,void 0,function(){var f,t,e,i,d,r,h,tt,c,it,a,v,rt,u,ut,ft,w,et,ot,st,ht;return __generator(this,function(ct){switch(ct.label){case 0:return n?(f=50,t=b.getMultiTerms(n,!1),e=t.length>b.MultipleTermsLimit,s.publishEvent(new s.TelemetryEventData(l.CustomerIntelligenceConstants.MENTION_AREA,l.CustomerIntelligenceConstants.WORKITEMPROVIDER_SEARCHONSERVER_EVENT,{termsOverLimit:e,numberOfTerms:t.length})),i=g.TfsContext.getDefault().isHosted,i)?[3,2]:[4,this._isSearchEnabledForOnPrem()]:[3,10];case 1:i=ct.sent();ct.label=2;case 2:return i?(d={$orderBy:null,$skip:0,$top:f,filters:null,includeFacets:!1,searchText:n},r=function(n){return n.toLowerCase()},[4,nt.getClient().fetchWorkItemSearchResults(d)]):[3,5];case 3:return h=ct.sent(),tt=h.results.map(function(n){return n.project.name}),c=p.WorkItemTypeColorAndIconsProvider.getInstance(),[4,c.ensureColorAndIconsArePopulated(tt)];case 4:return ct.sent(),it=h.results.map(function(n){var t=n.project.name,i=n.fields[r(y.CoreFieldRefNames.WorkItemType)],u=c.getColorAndIcon(t,i);return{id:+n.fields[r(y.CoreFieldRefNames.Id)],title:n.fields[r(y.CoreFieldRefNames.Title)],colorAndIcon:u,projectName:t,workItemType:i}}),[2,this._transformWorkItems(n,it,!1)];case 5:if(!e)return[3,6];throw new Error(o.localeFormat(k.AutocompleteTermsOverLimit,b.MultipleTermsLimit));case 6:return[4,this._isFullTextEnabled];case 7:return a=ct.sent(),v=a?"CONTAINS WORDS":"CONTAINS",rt=t.map(function(n){return"[".concat(y.CoreFieldRefNames.Title,"] ").concat(v," '").concat(n.replace(/'/g,"''"),"'")}),u=rt.join(" AND "),a&&(u="(".concat(u,") OR [").concat(y.CoreFieldRefNames.Title,"] ").concat(v," '").concat(n.replace(/'/g,"''"),"'")),ut=t.filter(function(n){return!isNaN(+n)}),ft=ut.map(function(n){return"OR [".concat(y.CoreFieldRefNames.Id,"] = '").concat(n,"'")}),w=ft.join(" "),et="ORDER BY [".concat(y.CoreFieldRefNames.AuthorizedDate,"] DESC"),ot="".concat(u).concat(w?" ".concat(w):""," ").concat(et),[4,this._getWiqlResults(ot,f)];case 8:return st=ct.sent(),ht=this._transformWorkItems(n,st,!1),[2,ht];case 9:return[3,11];case 10:return[2,[]];case 11:return[2]}})})},n.prototype._isSearchEnabledForOnPrem=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(t){switch(t.label){case 0:return this._searchEnabledPromise===undefined&&(this._searchEnabledPromise=new Promise(function(t){return __awaiter(n,void 0,void 0,function(){var r,u,n,i,o,s;return __generator(this,function(h){switch(h.label){case 0:r=e.getService(tt.ExtensionService);h.label=1;case 1:return h.trys.push([1,3,,4]),[4,r.getContributions(["ms.vss-search-platform.entity-type-collection"],!1,!0)];case 2:for(u=h.sent(),n=0,i=u;n<i.length;n++)if(o=i[n].id,o==="ms.vss-workitem-searchonprem.workitem-entity-type")return t(!0),[2];return t(!1),[3,4];case 3:return s=h.sent(),t(!1),f.publishErrorToTelemetry(s),[3,4];case 4:return[2]}})})})),[4,this._searchEnabledPromise];case 1:return[2,t.sent()]}})})},n.isValidWorkItemId=function(n){return n>=1&&n<=2147483647},n.prototype.getMyWorkItems=function(){return this._getWiqlResults(this._wiql,50)},n.prototype.getWorkItems=function(n){if(n.length===0)throw new Error("ids must contain elements.");return i.all(this.getWorkItemPromises(n))},n.prototype.getWorkItemPromises=function(t){return t.map(function(t){return n.isValidWorkItemId(t)?it.getInstance().cache.getArtifactPromise(t):i(null)})},n.prototype._getWiqlResults=function(n,t){return __awaiter(this,void 0,void 0,function(){var r,u,i,f=this;return __generator(this,function(e){switch(e.label){case 0:return r="SELECT [".concat(y.CoreFieldRefNames.Id,"] FROM WorkItems WHERE ").concat(n),[4,this._client.queryByWiql({query:r},undefined,undefined,undefined,t)];case 1:return(u=e.sent(),i=u.workItems.map(function(n){return n.id}).filter(function(n){return!f._workItemIdsToIgnore[n]}),i.length===0)?[2,[]]:[2,this.getWorkItems(i)]}})})},n.QUEUE_WAIT_MSEC=10,n.MAX_BATCH_SIZE=50,n.DEFAULT_WIQL="([".concat(y.CoreFieldRefNames.AuthorizedAs,"] = @me\n                        AND [").concat(y.CoreFieldRefNames.AuthorizedDate,"] >= @today - 30)\n                    OR ([").concat(y.CoreFieldRefNames.CreatedBy,"] = @me\n                        AND [").concat(y.CoreFieldRefNames.CreatedDate,"] >= @today - 30)\n                    OR ([").concat(y.CoreFieldRefNames.AssignedTo,"] = @me\n                        AND [").concat(y.CoreFieldRefNames.AuthorizedDate,"] >= @today - 30)\n                    ORDER BY [").concat(y.CoreFieldRefNames.AuthorizedDate,"] DESC"),n}();t.WorkItemProvider=rt;it=function(){function n(){var t=this,n;this.cache=new a.ArtifactsCache(function(n){return t._loadWorkItems(n)},rt.QUEUE_WAIT_MSEC,rt.MAX_BATCH_SIZE);this._client=e.getClient(v.WorkItemTrackingHttpClient,c.getMainTfsContext().contextData);n=this._getProjectName();n?(this._witColorAndIconsProviderPromise=p.WorkItemTypeColorAndIconsProvider.getInstance().queueEnsureColorAndIconsArePopulated(n),this._witStateColorsProviderPromise=d.WorkItemStateColorsProvider.getInstance().ensureColorsArePopulated([n])):(this._witColorAndIconsProviderPromise=i(null),this._witStateColorsProviderPromise=i(null))}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype._loadWorkItems=function(n){var s=[y.CoreFieldRefNames.Id,y.CoreFieldRefNames.WorkItemType,y.CoreFieldRefNames.Title,y.CoreFieldRefNames.TeamProject,y.CoreFieldRefNames.State],t={},e={},o;return n.forEach(function(n){t[n]=i.defer();e[n]=t[n].promise}),o=this._getProjectName(),this._client.getWorkItems(n,s,null,null,w.WorkItemErrorPolicy.Omit,o).then(function(u){var e=[],o=u.filter(function(n){return n!==null}).map(function(n){var u=n.fields,o=u[y.CoreFieldRefNames.WorkItemType],s=u[y.CoreFieldRefNames.TeamProject],r={id:u[y.CoreFieldRefNames.Id],projectName:s,workItemType:o,title:u[y.CoreFieldRefNames.Title],colorAndIcon:p.WorkItemTypeColorAndIcons.getDefault(),stateAndColor:{stateName:u[y.CoreFieldRefNames.State],stateColor:d.WorkItemStateColorsProvider.DEFAULT_STATE_COLOR}},h,c;return e.push(r.id),h=p.WorkItemTypeColorAndIconsProvider.getInstance().getColorAndIconAsync(s,o),c=d.WorkItemStateColorsProvider.getInstance().getColorAsync(s,o,r.stateAndColor.stateName),i.all([h,c]).then(function(n){var i=n[0],u=n[1];r.colorAndIcon=i;r.stateAndColor.stateColor=u||d.WorkItemStateColorsProvider.DEFAULT_STATE_COLOR;t[r.id].resolve(r)},function(n){t[r.id].resolve(r);f.publishErrorToTelemetry(n)})});return i.allSettled(o).then(function(){n.forEach(function(n){if(e.indexOf(n)===-1){var i="WorkItem #".concat(n," not returned from server.");r.logWarning(i);t[n].resolve(null)}})})},function(i){u.handleError(i);n.forEach(function(n){t[n].reject(i)})}),e},n.prototype._getProjectName=function(){return c.getMainTfsContext().navigation.project||o.empty},n}();t.WorkItemProviderCache=it});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)};define("Presentation/Scripts/TFS/Components/WorkItemTypeIcon",["require","exports","react","react-dom","Presentation/Scripts/TFS/FeatureRef/WorkItemTypeColorAndIconsProvider","VSS/Telemetry/Services","OfficeFabric/Utilities","VSSUI/Util","VSSUI/Tooltip","VSS/LoaderPlugins/Css!Presentation/Components/WorkItemTypeIcon"],function(n,t,i,r,u,f,e,o,s){function a(n,t,u,f,e){var o=typeof u!="string",s={workItemTypeName:t,projectName:o?null:u,customInput:o?u:null,iconAccessibilityOptions:f},l=c(n,!0);r.render(i.createElement(h,__assign({},s)),l,e)}function v(n){var t=c(n,!1);t&&(r.unmountComponentAtNode(t),n.removeChild(t))}function c(n,t){var r="work-item-type-icon-host",u=n.getElementsByClassName(r),i;return u.length>0?u[0]:t?(i=document.createElement("span"),i.classList.add(r),n.appendChild(i),i):undefined}var h,l;Object.defineProperty(t,"__esModule",{value:!0});t.unmountWorkItemTypeIcon=t.renderWorkItemTypeIcon=t.WorkItemTypeIcon=void 0;h=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._isMounted=!1,i.state=i._getState(i.props),i}return __extends(t,n),t.prototype.render=function(){var c=!this.props.customInput&&this._isProjectAndWorkItemTypeNullOrEmpty();c&&l.publishEvent(__assign(__assign({},this.props),{insufficientInput:c}));var a=this.state?this.state.icon:null,v=this.state?this.state.color:u.WorkItemTypeColorAndIcons.DEFAULT_WORKITEMTYPE_COLOR,n=this.props.iconAccessibilityOptions,r=null,f=null,t=!n||!n.suppressTooltip;t&&(r=n&&n.tooltip||this.props.workItemTypeName,f=e.getId("work-item-type-icon-tooltip"));var y=n&&n.ariaAttributes?n.ariaAttributes.label:r||this.props.workItemTypeName,b=n&&n.ariaAttributes?n.ariaAttributes.describedby:f,p=n&&n.ariaAttributes?n.ariaAttributes.labelledby:null,w=o.css("work-item-type-icon bowtie-icon",a,{"work-item-type-icon-no-tooltip":!t},!t&&this.props.className),h=i.createElement("i",{"aria-label":y,"aria-labelledby":p,className:w,role:"figure",style:{color:v}});return h&&t?i.createElement(s.TooltipHost,{hostClassName:o.css("work-item-type-icon-wrapper",this.props.className),content:r,id:f},h):h},t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentWillUnmount=function(){this._isMounted=!1},t.prototype.componentWillReceiveProps=function(n){var t=this._getState(n);t&&(!this.state||t.color!==this.state.color||t.icon!==this.state.icon)&&this.setState(t)},t.prototype._getState=function(n){var i=this,t;return n.customInput?{color:n.customInput.color?n.customInput.color:u.WorkItemTypeColorAndIcons.DEFAULT_WORKITEMTYPE_COLOR,icon:n.customInput.icon?n.customInput.icon:u.WorkItemTypeColorAndIcons.DEFAULT_WORKITEMTYPE_BOWTIE_ICON}:this._isProjectAndWorkItemTypeNullOrEmpty()?u.WorkItemTypeColorAndIcons.getDefault():(t=u.WorkItemTypeColorAndIconsProvider.getInstance(),t.isPopulated(n.projectName)?t.getColorAndIcon(n.projectName,n.workItemTypeName):(t.getColorAndIconAsync(n.projectName,n.workItemTypeName).then(function(n){i._isMounted&&i.setState(n)}),null))},t.prototype._isProjectAndWorkItemTypeNullOrEmpty=function(){return!(this.props.projectName&&this.props.workItemTypeName)},t}(i.Component);t.WorkItemTypeIcon=h;t.renderWorkItemTypeIcon=a;t.unmountWorkItemTypeIcon=v;l=function(){function n(){}return n.publishEvent=function(t,i){f.publishEvent(new f.TelemetryEventData("WIT",n._featureName,__assign(__assign({},t),{action:n._featureAction})),i)},n._featureAction="Render",n._featureName="WorkItemTypeIcon",n}()});

define("Mention/Scripts/WorkItemTypeIcon.JQuery",["require","exports","Presentation/Scripts/TFS/Components/WorkItemTypeIcon"],function(n,t,i){function r(n,t,r,u){i.renderWorkItemTypeIcon(n,t,r,u);var f=$(n),e=f.children().first().clone();i.unmountWorkItemTypeIcon(n);e.appendTo(f)}Object.defineProperty(t,"__esModule",{value:!0});t.renderWorkItemTypeIcon=void 0;t.renderWorkItemTypeIcon=r});

define("Presentation/Scripts/TFS/FeatureRef/WorkItemStateCellRenderer",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/FeatureRef/WorkItemStateColorsProvider","VSS/LoaderPlugins/Css!Presentation/FeatureRef/WorkItemStateCellRenderer"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemStateCellRenderer=void 0;var u=function(){function n(){}return n.getColorCell=function(t,i){var r=n.getProcessedStateColor(t),u=$("<span/>").addClass(n.CSS_WORKITEM_STATE_CIRCLE).css({"background-color":r.backgroundColor,"border-color":r.borderColor}),f=$("<span/>").addClass("workitem-state-value").text(i);return $("<div/>").addClass("workitem-state-color-cell").append(u.add(f))},n.getAutoUpdatingColorCell=function(t,i,u){var f,o,e;return!t||!i||!u?null:(f=r.WorkItemStateColorsProvider.getInstance(),f.isPopulated(t)?(o=f.getColor(t,i,u),n.getColorCell(o,u)):(e=n.getColorCell(r.WorkItemStateColorsProvider.DEFAULT_STATE_COLOR,u),f.getColorAsync(t,i,u).then(function(t){var i=n.getProcessedStateColor(t);e.find("."+n.CSS_WORKITEM_STATE_CIRCLE).css({"background-color":i.backgroundColor,"border-color":i.borderColor})},function(){}),e))},n.getProcessedStateColor=function(t){var r="#ffffff";return(t=t||r,i.ignoreCaseComparer(t,r)===0||i.ignoreCaseComparer(t,"transparent")===0)?{backgroundColor:t,borderColor:n.STATES_DEFAULT_COLOR}:{backgroundColor:t,borderColor:t}},n.CSS_WORKITEM_STATE_CIRCLE="workitem-state-circle",n.STATES_DEFAULT_COLOR="#5688E0",n}();t.WorkItemStateCellRenderer=u});

define("VSS/Controls/PopupContent",["require","exports","VSS/Controls","VSS/Diag","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI"],function(n,t,i,r,u,f,e){var v,h,o;Object.defineProperty(t,"__esModule",{value:!0});t.RichContentTooltip=t.RichContentTooltipO=t.PopupContentControl=t.PopupContentControlO=void 0;var c=e.domElem,l=u.delegate,a=100,y=1e3,s=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._hasFocus=!1,t._blockFocusUntil=-a-1,t._hasMouse=!1,t._enabled=!0,t._handlers={},t}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._element[0].classList.add("popup-content-control");this._setAriaDescribedBy();!this._options.openDelay&&this._$dropElement.is(":focus")&&this.show();this._onForceHideDropPopupDelegate=this.onForceHideDropPopup.bind(this)},t.prototype.onForceHideDropPopup=function(){this.hide()},t.prototype.setTextContent=function(n){this._setContent(f.htmlEncode(n))},t.prototype.setHtmlContent=function(n){this._setContent(n)},t.prototype._setContent=function(n){this._$contentContainer.html(n);this._contentSet=!0;this._visible&&this._reposition()},t.prototype._initializeContent=function(){if(!this._contentSet){if(this._options.text)typeof this._options.text=="function"?this.setTextContent(this._options.text.call(this)):this.setTextContent(this._options.text);else if(this._options.html)typeof this._options.html=="function"?this.setHtmlContent(this._options.html.call(this)):this.setHtmlContent(this._options.html);else if(this._options.content){var n=this._options.content;typeof n=="function"?this._setContent(n.call(this)):this._setContent(n)}this._contentSet=!0}},t.prototype._setAriaDescribedBy=function(){if(this._options.setAriaDescribedBy){this._initializeContent();var t=this._$contentContainer.attr("id"),n=this._$dropElement.attr("aria-describedby")||"";n.indexOf(t)===-1&&this._$dropElement.attr("aria-describedby",(n?n+" ":"")+t)}},t.prototype.resetContent=function(){this._contentSet=!1},t.prototype.show=function(){this._show({useMousePosition:!1})},t.prototype.toggle=function(){this._element.is(":visible")?this.hide():this.show()},t.prototype._enhance=function(n){var u=this,t;this._createElement();this._$dropElement=n;t=this._options.menuContainer||$("#PopupContentContainer");t.length===0&&(t=$("<div id='PopupContentContainer'><\/div>").appendTo(document.body));this._element.appendTo(t);this._element.css("position","fixed");this._$contentContainer=$(c("div","popup-content-container")).attr({role:"tooltip",id:i.getHtmlId(),"aria-hidden":"true"}).appendTo(this._element);this._decorate();this._bind(n,"remove.removePopupDropElement",function(){u.dispose()})},t.prototype._decorate=function(){var n=this;this._options.openCloseOnHover?(this._listen("mouseover",this.onMouseOver),this._options.showOnFocus!==!1&&this._listen("focus",this._onFocus)):(this._documentEventDelegate=l(this,this._handleDocumentMouseDown),this._bind(this._$dropElement,"click",function(){n._element.is(":visible")?n.hide():n.show()}))},t.prototype._listen=function(n,t){!this._handlers[n]&&this._$dropElement.length>0&&this._$dropElement[0].addEventListener(n,this._handlers[n]=t.bind(this))},t.prototype._stopListening=function(n){var t=this._handlers[n];t&&this._$dropElement[0].removeEventListener(n,t)},t.prototype._onInteract=function(){this.hide();this._hasFocus=!1;this._blockFocusUntil=Date.now()+a},t.prototype._onFocus=function(n){n.target===this._$dropElement[0]&&Date.now()>this._blockFocusUntil&&(this._hasFocus=!0,this._listen("blur",this._onBlur),!this._hasMouse&&this._enabled&&this._showDelayed())},t.prototype._onBlur=function(){this._hasFocus=!1;this._hasMouse||this.hide()},t.prototype._onMouseMove=function(n){this._mousePosition?(this._mousePosition.left=n.pageX,this._mousePosition.top=n.pageY):this._mousePosition={left:n.pageX,top:n.pageY}},t.prototype.onMouseOver=function(n){(!this._options.mouseEventFilter||this._options.mouseEventFilter(n))&&(this._options.useStrictTarget&&n.target!==this._$dropElement[0]||(this._hasMouse=!0,this._enabled)&&(this._listen("mouseout",this._onMouseOut),this._listen("mousemove",this._onMouseMove),this._onMouseMove(n),this._showDelayed({useMousePosition:!0}),this._delayedHide&&this._delayedHide.cancel()))},t.prototype._onMouseOut=function(){var n=this;this._hasMouse=!1;this._delayedHide&&this._delayedHide.cancel();this._delayedHide=u.delay(this,100,function(){n.hide();n._delayedHide=null})},t.prototype.showDelayed=function(){this._showDelayed({useMousePosition:!1})},t.prototype._showDelayed=function(n){var t=this;this._visible||(n=n||{useMousePosition:!1},this._options.openDelay?(this._delayedShow&&this._delayedShow.cancel(),this._delayedShow=u.delay(this,this._options.openDelay,function(){t._show(n)})):this._show(n))},t.prototype._handleDocumentMouseDown=function(n){var t=$(n.target);this._$dropElement.has(n.target).length>0||this._$dropElement[0]===n.target||this._$contentContainer.has(n.target).length>0||this._$contentContainer[0]===n.target||this._element.has(n.target).length>0||this._element[0]===n.target||this.hide()},t.prototype._setPosition=function(){this._setPositionInternal({useMousePosition:!1})},t.prototype._setPositionInternal=function(n){if(this._visible){this._element.css({top:0,left:0});this._lastPositionContext={options:n};var t={elementAlign:this._options.elementAlign||"left-top",baseAlign:this._options.baseAlign||"left-bottom",overflow:this._options.overflow,supportScroll:this._options.supportScroll,leftOffsetPixels:this._options.leftOffsetPixels,topOffsetPixels:this._options.topOffsetPixels,skipZIndexSetting:this._options.skipZIndexSetting};n.useMousePosition&&this._options.useMousePosition!==!1?(this._lastPositionContext.mousePosition={left:this._mousePosition.left,top:this._mousePosition.top},t.leftOffsetPixels=this._options.mouseLeftOffsetPixels||t.leftOffsetPixels,t.topOffsetPixels=this._options.mouseTopOffsetPixels||t.topOffsetPixels,e.Positioning.positionAtLocation(this._element,this._mousePosition,t)):this._$dropElement.length>0&&e.Positioning.position(this._element,this._$dropElement,t)}},t.prototype._reposition=function(){this._lastPositionContext&&(this._lastPositionContext.mousePosition&&(this._mousePosition=this._lastPositionContext.mousePosition),this._setPositionInternal(this._lastPositionContext.options))},t.prototype._getDropElement=function(){return this._$dropElement},t.prototype._show=function(n){if(!this.isDisposed()&&this._getDropElement().is(":visible")&&(!this._options.onlyShowWhenOverflows||e.contentsOverflow(this._options.onlyShowWhenOverflows))&&!this._visible){if(this._visible=!0,this._options.openCloseOnHover&&(this._listen("click",this._onInteract),this._listen("keypress",this._onInteract)),this._initializeContent(),this.getElement().show(),this._setPositionInternal(n),this._fire("popup-opened"),this._documentEventDelegate)$(document).on("mousedown",this._documentEventDelegate);e.attachResize(this._element,l(this,this._setPosition));this._bind(this._$dropElement.parents(),"scroll",this._onForceHideDropPopupDelegate);this._escapeKeyHandler||(this._escapeKeyHandler=this.onEscapeKeyPressed.bind(this),document.addEventListener("keydown",this._escapeKeyHandler,!0));this._delayedShow&&this._delayedShow.cancel();this._$contentContainer.attr("aria-hidden","false")}},t.prototype.onEscapeKeyPressed=function(n){n.key==="Escape"&&(this.hide(),n.preventDefault(),n.stopPropagation())},t.prototype.hide=function(){(this._escapeKeyHandler&&document.removeEventListener("keydown",this._escapeKeyHandler,!0),this.isDisposed())||(this._delayedShow&&this._delayedShow.cancel(),this._visible)&&(this._visible=!1,this._documentEventDelegate&&$(document).off("mousedown",this._documentEventDelegate),e.detachResize(this._element),this._onForceHideDropPopupDelegate&&this._unbind(this._$dropElement.parents(),"scroll",this._onForceHideDropPopupDelegate),this._element.hide(),this._fire("popup-closed"),this._stopListening("mousemove"),this._$contentContainer.attr("aria-hidden","true"))},t.prototype.enable=function(){this._enabled=!0;(this._hasFocus||this._hasMouse)&&this._showDelayed()},t.prototype.disable=function(){this._enabled=!1;this.hide()},t.prototype._dispose=function(){if(n.prototype._dispose.call(this),this._options.setAriaDescribedBy){var i=this._$contentContainer.attr("id"),t=this._$dropElement.attr("aria-describedby")||"";t=t.replace(new RegExp("\\b".concat(i,"\\b"),"g"),"").trim().replace(/\s+/," ");t?this._$dropElement.attr("aria-describedby",t):this._$dropElement.removeAttr("aria-describedby")}this._documentEventDelegate&&($(document).off("mousedown",this._documentEventDelegate),this._documentEventDelegate=null);this._onForceHideDropPopupDelegate&&(this._unbind(this._$dropElement.parents(),"scroll",this._onForceHideDropPopupDelegate),this._onForceHideDropPopupDelegate=null);this._$dropElement&&this._$dropElement.length>=1&&(this._unbind(this._$dropElement,"click"),this._unbind(this._$dropElement,"remove.removePopupDropElement"),this._stopListening("mouseover"),this._stopListening("mouseout"),this._stopListening("mousemove"),this._stopListening("focus"),this._stopListening("blur"),this._stopListening("click"),this._stopListening("keypress"));e.detachResize(this._element)},t}(i.Control);t.PopupContentControlO=s;v=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(s);t.PopupContentControl=v;h=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._onKeyDown=function(n){n.which===27&&t._visible&&(t._popupHasMouse=!1,t.hide())},t}return __extends(t,n),t.hide=function(){t._shownTooltip&&t._shownTooltip.hide()},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"rich-content-tooltip",openCloseOnHover:!0,elementAlign:"middle-top",baseAlign:"middle-bottom",useMousePosition:!1},t))},t.prototype.initialize=function(){var i=this.getElement(),r=this._options,t;r.popupTag!==!1&&(this._$popupTag=$(c("div","popup-tag")).prependTo(i),this._popupHasMouse=!1,t=this,this._$popupTag[0].parentElement.addEventListener("mouseenter",function(){t._popupHasMouse=!0}),this._$popupTag[0].parentElement.addEventListener("mouseleave",function(){t._popupHasMouse=!1;t._delayedHide=u.delay(this,100,function(){t.hide();t._delayedHide=null})}));n.prototype.initialize.call(this);i[0].classList.add("v2");r.autoWidth&&i[0].classList.add("auto-width")},t.prototype._getPopupTooltipElement=function(){return this._$popupTag},t.prototype._show=function(i){if(document.addEventListener("keydown",this._onKeyDown),n.prototype._show.call(this,i),this._visible){var r=t._shownTooltip;r&&r!==this&&r.hide();t._shownTooltip=this}},t.prototype.hide=function(){this._popupHasMouse||(document.removeEventListener("keydown",this._onKeyDown),n.prototype.hide.call(this),t._shownTooltip===this&&(t._shownTooltip=null))},t.prototype._setPositionInternal=function(t){var f,i,r,e,o,s;if((n.prototype._setPositionInternal.call(this,t),this._visible)&&this._$popupTag){f=t&&t.useMousePosition&&this._options.useMousePosition!==!1;this._$popupTag.css({top:0,left:0});this._$contentContainer.toggleClass("mouse",f);i={left:parseInt(this._element.css("left"),10),top:parseInt(this._element.css("top"),10),width:this._element.outerWidth(),height:this._element.outerHeight()};r=void 0;f?r=this._mousePosition:(e=this._getDropElement(),o=e.offset(),r={left:o.left+e.outerWidth()/2,top:o.top});s=this._element.offset();r.left+=i.left-s.left;r.top+=i.top-s.top;var l=f?27:11,u=15,a=u*.5,c=u*(Math.SQRT2-1)*.5,v=c+u,h={left:Math.max(Math.min(r.left-a,i.left+i.width-v),i.left+c),top:i.top+l-u*.5};i.top<r.top-.5?(this._$popupTag.addClass("flipped"),h.top=i.top+i.height-11-u*.5):this._$popupTag.removeClass("flipped");this._$popupTag.css({left:h.left+"px",top:h.top+"px"})}},t.add=function(n,t,r){return r=__assign({openDelay:y,topOffsetPixels:0,mouseTopOffsetPixels:0,autoWidth:!0},r),typeof n=="string"?r.text=n:n&&(r.html=n),i.Enhancement.enhance(o,$(t),r)},t.addIfOverflow=function(n,t,i){return o.add(n,t,__assign(__assign({},i),{onlyShowWhenOverflows:t}))},t}(s);t.RichContentTooltipO=h;o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(h);t.RichContentTooltip=o});

/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.14.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
(function(n,t){"use strict";typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("Presentation/Scripts/IPv6",t):n.IPv6=t(n)})(this,function(n){"use strict";function i(n){var y=n.toLowerCase(),t=y.split(":"),r=t.length,s=8,u,h,i,c,o;for(t[0]===""&&t[1]===""&&t[2]===""?(t.shift(),t.shift()):t[0]===""&&t[1]===""?t.shift():t[r-1]===""&&t[r-2]===""&&t.pop(),r=t.length,t[r-1].indexOf(".")!==-1&&(s=7),u=0;u<r;u++)if(t[u]==="")break;if(u<s){for(t.splice(u,1,"0000");t.length<s;)t.splice(u,0,"0000");r=t.length}for(i=0;i<s;i++){for(h=t[i].split(""),c=0;c<3;c++)if(h[0]==="0"&&h.length>1)h.splice(0,1);else break;t[i]=h.join("")}var l=-1,f=0,e=0,a=-1,v=!1;for(i=0;i<s;i++)v?t[i]==="0"?e+=1:(v=!1,e>f&&(l=a,f=e)):t[i]==="0"&&(v=!0,a=i,e=1);for(e>f&&(l=a,f=e),f>1&&t.splice(l,f,""),r=t.length,o="",t[0]===""&&(o=":"),i=0;i<r;i++){if(o+=t[i],i===r-1)break;o+=":"}return t[r-1]===""&&(o+=":"),o}function r(){return n.IPv6===this&&(n.IPv6=t),this}var t=n&&n.IPv6;return{best:i,noConflict:r}});

/*! http://mths.be/punycode v1.2.3 by @mathias */
/*
Copyright Mathias Bynens <https://mathiasbynens.be/>

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(n){function u(n){throw RangeError(ht[n]);}function b(n,t){for(var i=n.length;i--;)n[i]=t(n[i]);return n}function k(n,t){return b(n.split(st),t).join(".")}function d(n){for(var r=[],i=0,f=n.length,t,u;i<f;)t=n.charCodeAt(i++),t>=55296&&t<=56319&&i<f?(u=n.charCodeAt(i++),(u&64512)==56320?r.push(((t&1023)<<10)+(u&1023)+65536):(r.push(t),i--)):r.push(t);return r}function g(n){return b(n,function(n){var t="";return n>65535&&(n-=65536,t+=s(n>>>10&1023|55296),n=56320|n&1023),t+s(n)}).join("")}function ct(n){return n-48<10?n-22:n-65<26?n-65:n-97<26?n-97:t}function nt(n,t){return n+22+75*(n<26)-((t!=0)<<5)}function tt(n,r,u){var f=0;for(n=u?i(n/ft):n>>1,n+=i(n/r);n>a*o>>1;f+=t)n=i(n/a);return i(f+(a+1)*n/(n+ut))}function it(n){var b=[],ft=n.length,s,r=0,nt=p,k=y,e,h,d,it,c,a,v,rt,ut;for(e=n.lastIndexOf(w),e<0&&(e=0),h=0;h<e;++h)n.charCodeAt(h)>=128&&u("not-basic"),b.push(n.charCodeAt(h));for(d=e>0?e+1:0;d<ft;){for(it=r,c=1,a=t;;a+=t){if(d>=ft&&u("invalid-input"),v=ct(n.charCodeAt(d++)),(v>=t||v>i((f-r)/c))&&u("overflow"),r+=v*c,rt=a<=k?l:a>=k+o?o:a-k,v<rt)break;ut=t-rt;c>i(f/ut)&&u("overflow");c*=ut}s=b.length+1;k=tt(r-it,s,it==0);i(r/s)>f-nt&&u("overflow");nt+=i(r/s);r%=s;b.splice(r++,0,nt)}return g(b)}function rt(n){var h,c,b,et,k,r,a,g,it,rt,e,v=[],ut,ft,ot,st;for(n=d(n),ut=n.length,h=p,c=0,k=y,r=0;r<ut;++r)e=n[r],e<128&&v.push(s(e));for(b=et=v.length,et&&v.push(w);b<ut;){for(a=f,r=0;r<ut;++r)e=n[r],e>=h&&e<a&&(a=e);for(ft=b+1,a-h>i((f-c)/ft)&&u("overflow"),c+=(a-h)*ft,h=a,r=0;r<ut;++r)if(e=n[r],e<h&&++c>f&&u("overflow"),e==h){for(g=c,it=t;;it+=t){if(rt=it<=k?l:it>=k+o?o:it-k,g<rt)break;st=g-rt;ot=t-rt;v.push(s(nt(rt+st%ot,0)));g=i(st/ot)}v.push(s(nt(g,0)));k=tt(c,ft,b==et);c=0;++b}++c;++h}return v.join("")}function lt(n){return k(n,function(n){return et.test(n)?it(n.slice(4).toLowerCase()):n})}function at(n){return k(n,function(n){return ot.test(n)?"xn--"+rt(n):n})}var h=typeof exports=="object"&&exports,v=typeof module=="object"&&module&&module.exports==h&&module,e=typeof global=="object"&&global;(e.global===e||e.window===e)&&(n=e);var r,f=2147483647,t=36,l=1,o=26,ut=38,ft=700,y=72,p=128,w="-",et=/^xn--/,ot=/[^ -~]/,st=/\x2E|\u3002|\uFF0E|\uFF61/g,ht={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=t-l,i=Math.floor,s=String.fromCharCode,c;if(r={version:"1.2.3",ucs2:{decode:d,encode:g},decode:it,encode:rt,toASCII:at,toUnicode:lt},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("Presentation/Scripts/punycode",function(){return r});else if(h&&!h.nodeType)if(v)v.exports=r;else for(c in r)r.hasOwnProperty(c)&&(h[c]=r[c]);else n.punycode=r})(this);

/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.14.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
(function(n,t){"use strict";typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("Presentation/Scripts/SecondLevelDomains",t):n.SecondLevelDomains=t(n)})(this,function(n){"use strict";var i=n&&n.SecondLevelDomains,t={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(n){var i=n.lastIndexOf("."),r,u;return i<=0||i>=n.length-1?!1:(r=n.lastIndexOf(".",i-1),r<=0||r>=i-1)?!1:(u=t.list[n.slice(i+1)],!u)?!1:u.indexOf(" "+n.slice(r+1,i)+" ")>=0},is:function(n){var i=n.lastIndexOf("."),u,r;return i<=0||i>=n.length-1?!1:(u=n.lastIndexOf(".",i-1),u>=0)?!1:(r=t.list[n.slice(i+1)],!r)?!1:r.indexOf(" "+n.slice(0,i)+" ")>=0},get:function(n){var i=n.lastIndexOf("."),r,u;return i<=0||i>=n.length-1?null:(r=n.lastIndexOf(".",i-1),r<=0||r>=i-1)?null:(u=t.list[n.slice(i+1)],!u)?null:u.indexOf(" "+n.slice(r+1,i)+" ")<0?null:n.slice(r+1)},noConflict:function(){return n.SecondLevelDomains===this&&(n.SecondLevelDomains=i),this}};return t});

/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.14.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
/*
The MIT License (MIT)

Copyright (c) 2011 Rodney Rehm

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
/*
The MIT License (MIT)

Copyright (c) 2014 the UMD contributors.

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the ""Software""), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function (n, t) { "use strict"; typeof exports == "object" ? module.exports = t(require("Presentation/Scripts/punycode"), require("Presentation/Scripts/IPv6"), require("Presentation/Scripts/SecondLevelDomains")) : typeof define == "function" && define.amd ? define("Presentation/Scripts/URI",["Presentation/Scripts/IPv6", "Presentation/Scripts/punycode", "Presentation/Scripts/SecondLevelDomains"], t) : n.URI = t(n.punycode, n.IPv6, n.SecondLevelDomains, n) })(this, function (n, t, i, r) { "use strict"; function u(n, t) { return (this instanceof u) ? (n === undefined && (n = typeof location != "undefined" ? location.href + "" : ""), this.href(n), t !== undefined) ? this.absoluteTo(t) : this : new u(n, t) } function s(n) { return n.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1") } function l(n) { return n === undefined ? "Undefined" : String(Object.prototype.toString.call(n)).slice(8, -1) } function e(n) { return l(n) === "Array" } function g(n, t) { var u = {}, i, r; if (e(t)) for (i = 0, r = t.length; i < r; i++) u[t[i]] = !0; else u[t] = !0; for (i = 0, r = n.length; i < r; i++) u[n[i]] !== undefined && (n.splice(i, 1), r--, i--); return n } function c(n, t) { var i, r, u; if (e(t)) { for (i = 0, r = t.length; i < r; i++) if (!c(n, t[i])) return !1; return !0 } for (u = l(t), i = 0, r = n.length; i < r; i++) if (u === "RegExp") { if (typeof n[i] == "string" && n[i].match(t)) return !0 } else if (n[i] === t) return !0; return !1 } function w(n, t) { if (!e(n) || !e(t) || n.length !== t.length) return !1; n.sort(); t.sort(); for (var i = 0, r = n.length; i < r; i++) if (n[i] !== t[i]) return !1; return !0 } function nt(n) { return escape(n) } function a(n) { return encodeURIComponent(n).replace(/[!'()*]/g, nt).replace(/\*/g, "%2A") } function h(n) { return function (t, i) { return t === undefined ? this._parts[n] || "" : (this._parts[n] = t || null, this.build(!i), this) } } function b(n, t) { return function (i, r) { return i === undefined ? this._parts[n] || "" : (i !== null && (i = i + "", i.charAt(0) === t && (i = i.substring(1))), this._parts[n] = i, this.build(!r), this) } } var d = r && r.URI, f, o, v, y, p, k; u.version = "1.14.1"; f = u.prototype; o = Object.prototype.hasOwnProperty; u._parts = function () { return { protocol: null, username: null, password: null, hostname: null, urn: null, port: null, path: null, query: null, fragment: null, duplicateQueryParameters: u.duplicateQueryParameters, escapeQuerySpace: u.escapeQuerySpace } }; u.duplicateQueryParameters = !1; u.escapeQuerySpace = !0; u.protocol_expression = /^[a-z][a-z0-9.+-]*$/i; u.idn_expression = /[^a-z0-9\.-]/i; u.punycode_expression = /(xn--)/i; u.ip4_expression = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/; u.ip6_expression = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/; u.find_uri_expression = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig; u.findUri = { start: /\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi, end: /[\s\r\n]|$/, trim: /[`!()\[\]{};:'".,<>?]+$/ }; u.defaultPorts = { http: "80", https: "443", ftp: "21", gopher: "70", ws: "80", wss: "443" }; u.invalid_hostname_characters = /[^a-zA-Z0-9\.-]/; u.domAttributes = { a: "href", blockquote: "cite", link: "href", base: "href", script: "src", form: "action", img: "src", area: "href", iframe: "src", embed: "src", source: "src", track: "src", input: "src", audio: "src", video: "src" }; u.getDomAttribute = function (n) { if (!n || !n.nodeName) return undefined; var t = n.nodeName.toLowerCase(); return t === "input" && n.type !== "image" ? undefined : u.domAttributes[t] }; u.encode = a; u.decode = decodeURIComponent; u.iso8859 = function () { u.encode = escape; u.decode = unescape }; u.unicode = function () { u.encode = a; u.decode = decodeURIComponent }; u.characters = { pathname: { encode: { expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig, map: { "%24": "$", "%26": "&", "%2B": "+", "%2C": ",", "%3B": ";", "%3D": "=", "%3A": ":", "%40": "@" } }, decode: { expression: /[\/\?#]/g, map: { "/": "%2F", "?": "%3F", "#": "%23" } } }, reserved: { encode: { expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig, map: { "%3A": ":", "%2F": "/", "%3F": "?", "%23": "#", "%5B": "[", "%5D": "]", "%40": "@", "%21": "!", "%24": "$", "%26": "&", "%27": "'", "%28": "(", "%29": ")", "%2A": "*", "%2B": "+", "%2C": ",", "%3B": ";", "%3D": "=" } } } }; u.encodeQuery = function (n, t) { var i = u.encode(n + ""); return t === undefined && (t = u.escapeQuerySpace), t ? i.replace(/%20/g, "+") : i }; u.decodeQuery = function (n, t) { n += ""; t === undefined && (t = u.escapeQuerySpace); try { return u.decode(t ? n.replace(/\+/g, "%20") : n) } catch (i) { return n } }; u.recodePath = function (n) { for (var t = (n + "").split("/"), i = 0, r = t.length; i < r; i++) t[i] = u.encodePathSegment(u.decode(t[i])); return t.join("/") }; u.decodePath = function (n) { for (var t = (n + "").split("/"), i = 0, r = t.length; i < r; i++) t[i] = u.decodePathSegment(t[i]); return t.join("/") }; v = { encode: "encode", decode: "decode" }; p = function (n, t) { return function (i) { try { return u[t](i + "").replace(u.characters[n][t].expression, function (i) { return u.characters[n][t].map[i] }) } catch (r) { return i } } }; for (y in v) u[y + "PathSegment"] = p("pathname", v[y]); u.encodeReserved = p("reserved", "encode"); u.parse = function (n, t) { var i; return t || (t = {}), i = n.indexOf("#"), i > -1 && (t.fragment = n.substring(i + 1) || null, n = n.substring(0, i)), i = n.indexOf("?"), i > -1 && (t.query = n.substring(i + 1) || null, n = n.substring(0, i)), n.substring(0, 2) === "//" ? (t.protocol = null, n = n.substring(2), n = u.parseAuthority(n, t)) : (i = n.indexOf(":"), i > -1 && (t.protocol = n.substring(0, i) || null, t.protocol && !t.protocol.match(u.protocol_expression) ? t.protocol = undefined : n.substring(i + 1, i + 3) === "//" ? (n = n.substring(i + 3), n = u.parseAuthority(n, t)) : (n = n.substring(i + 1), t.urn = !0))), t.path = n, t }; u.parseHost = function (n, t) { var i = n.indexOf("/"), r, u; return i === -1 && (i = n.length), n.charAt(0) === "[" ? (r = n.indexOf("]"), t.hostname = n.substring(1, r) || null, t.port = n.substring(r + 2, i) || null, t.port === "/" && (t.port = null)) : n.indexOf(":") !== n.lastIndexOf(":") ? (t.hostname = n.substring(0, i) || null, t.port = null) : (u = n.substring(0, i).split(":"), t.hostname = u[0] || null, t.port = u[1] || null), t.hostname && n.substring(i).charAt(0) !== "/" && (i++, n = "/" + n), n.substring(i) || "/" }; u.parseAuthority = function (n, t) { return n = u.parseUserinfo(n, t), u.parseHost(n, t) }; u.parseUserinfo = function (n, t) { var r = n.indexOf("/"), f = n.lastIndexOf("@", r > -1 ? r : n.length - 1), i; return f > -1 && (r === -1 || f < r) ? (i = n.substring(0, f).split(":"), t.username = i[0] ? u.decode(i[0]) : null, i.shift(), t.password = i[0] ? u.decode(i.join(":")) : null, n = n.substring(f + 1)) : (t.username = null, t.password = null), n }; u.parseQuery = function (n, t) { var e; if (!n) return {}; if (n = n.replace(/&+/g, "&").replace(/^\?*&*|&+$/g, ""), !n) return {}; var i = {}, h = n.split("&"), c = h.length, f, r, s; for (e = 0; e < c; e++) f = h[e].split("="), r = u.decodeQuery(f.shift(), t), s = f.length ? u.decodeQuery(f.join("="), t) : null, o.call(i, r) ? (typeof i[r] == "string" && (i[r] = [i[r]]), i[r].push(s)) : i[r] = s; return i }; u.build = function (n) { var t = ""; return n.protocol && (t += n.protocol + ":"), !n.urn && (t || n.hostname) && (t += "//"), t += u.buildAuthority(n) || "", typeof n.path == "string" && (n.path.charAt(0) !== "/" && typeof n.hostname == "string" && (t += "/"), t += n.path), typeof n.query == "string" && n.query && (t += "?" + n.query), typeof n.fragment == "string" && n.fragment && (t += "#" + n.fragment), t }; u.buildHost = function (n) { var t = ""; if (n.hostname) t += u.ip6_expression.test(n.hostname) ? "[" + n.hostname + "]" : n.hostname; else return ""; return n.port && (t += ":" + n.port), t }; u.buildAuthority = function (n) { return u.buildUserinfo(n) + u.buildHost(n) }; u.buildUserinfo = function (n) { var t = ""; return n.username && (t += u.encode(n.username), n.password && (t += ":" + u.encode(n.password)), t += "@"), t }; u.buildQuery = function (n, t, i) { var s = "", h, r, f, c; for (r in n) if (o.call(n, r) && r) if (e(n[r])) for (h = {}, f = 0, c = n[r].length; f < c; f++) n[r][f] !== undefined && h[n[r][f] + ""] === undefined && (s += "&" + u.buildQueryParameter(r, n[r][f], i), t !== !0 && (h[n[r][f] + ""] = !0)); else n[r] !== undefined && (s += "&" + u.buildQueryParameter(r, n[r], i)); return s.substring(1) }; u.buildQueryParameter = function (n, t, i) { return u.encodeQuery(n, i) + (t !== null ? "=" + u.encodeQuery(t, i) : "") }; u.addQuery = function (n, t, i) { if (typeof t == "object") for (var r in t) o.call(t, r) && u.addQuery(n, r, t[r]); else if (typeof t == "string") { if (n[t] === undefined) { n[t] = i; return } typeof n[t] == "string" && (n[t] = [n[t]]); e(i) || (i = [i]); n[t] = (n[t] || []).concat(i) } else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter"); }; u.removeQuery = function (n, t, i) { var r, s, f; if (e(t)) for (r = 0, s = t.length; r < s; r++) n[t[r]] = undefined; else if (typeof t == "object") for (f in t) o.call(t, f) && u.removeQuery(n, f, t[f]); else if (typeof t == "string") i !== undefined ? n[t] === i ? n[t] = undefined : e(n[t]) && (n[t] = g(n[t], i)) : n[t] = undefined; else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter"); }; u.hasQuery = function (n, t, i, r) { var f, s, h; if (typeof t == "object") { for (f in t) if (o.call(t, f) && !u.hasQuery(n, f, t[f])) return !1; return !0 } if (typeof t != "string") throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter"); switch (l(i)) { case "Undefined": return t in n; case "Boolean": return s = Boolean(e(n[t]) ? n[t].length : n[t]), i === s; case "Function": return !!i(n[t], t, n); case "Array": return e(n[t]) ? (h = r ? c : w, h(n[t], i)) : !1; case "RegExp": return e(n[t]) ? r ? c(n[t], i) : !1 : Boolean(n[t] && n[t].match(i)); case "Number": i = String(i); case "String": return e(n[t]) ? r ? c(n[t], i) : !1 : n[t] === i; default: throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter"); } }; u.commonPath = function (n, t) { for (var r = Math.min(n.length, t.length), i = 0; i < r; i++) if (n.charAt(i) !== t.charAt(i)) { i--; break } return i < 1 ? n.charAt(0) === t.charAt(0) && n.charAt(0) === "/" ? "/" : "" : ((n.charAt(i) !== "/" || t.charAt(i) !== "/") && (i = n.substring(0, i).lastIndexOf("/")), n.substring(0, i + 1)) }; u.withinString = function (n, t, i) { var s, r, h, f, o, c; i || (i = {}); var e = i.start || u.findUri.start, l = i.end || u.findUri.end, a = i.trim || u.findUri.trim; for (e.lastIndex = 0; ;) { if (s = e.exec(n), !s) break; (r = s.index, i.ignoreHtml && (h = n.slice(Math.max(r - 3, 0), r), h && /[a-z0-9-]=["']?$/i.test(h))) || (f = r + n.slice(r).search(l), o = n.slice(r, f).replace(a, ""), i.ignore && i.ignore.test(o)) || (f = r + o.length, c = t(o, r, f, n), n = n.slice(0, r) + c + n.slice(f), e.lastIndex = r + c.length) } return e.lastIndex = 0, n }; u.ensureValidHostname = function (t) { if (t.match(u.invalid_hostname_characters)) { if (!n) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-] and Punycode.js is not available'); if (n.toASCII(t).match(u.invalid_hostname_characters)) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-]'); } }; u.noConflict = function (n) { if (n) { var t = { URI: this.noConflict() }; return r.URITemplate && typeof r.URITemplate.noConflict == "function" && (t.URITemplate = r.URITemplate.noConflict()), r.IPv6 && typeof r.IPv6.noConflict == "function" && (t.IPv6 = r.IPv6.noConflict()), r.SecondLevelDomains && typeof r.SecondLevelDomains.noConflict == "function" && (t.SecondLevelDomains = r.SecondLevelDomains.noConflict()), t } return r.URI === this && (r.URI = d), this }; f.build = function (n) { return n === !0 ? this._deferred_build = !0 : (n === undefined || this._deferred_build) && (this._string = u.build(this._parts), this._deferred_build = !1), this }; f.clone = function () { return new u(this) }; f.valueOf = f.toString = function () { return this.build(!1)._string }; f.protocol = h("protocol"); f.username = h("username"); f.password = h("password"); f.hostname = h("hostname"); f.port = h("port"); f.query = b("query", "?"); f.fragment = b("fragment", "#"); f.search = function (n, t) { var i = this.query(n, t); return typeof i == "string" && i.length ? "?" + i : i }; f.hash = function (n, t) { var i = this.fragment(n, t); return typeof i == "string" && i.length ? "#" + i : i }; f.pathname = function (n, t) { if (n === undefined || n === !0) { var i = this._parts.path || (this._parts.hostname ? "/" : ""); return n ? u.decodePath(i) : i } return this._parts.path = n ? u.recodePath(n) : "/", this.build(!t), this }; f.path = f.pathname; f.href = function (n, t) { var i, r, f, s, e; if (n === undefined) return this.toString(); if (this._string = "", this._parts = u._parts(), r = n instanceof u, f = typeof n == "object" && (n.hostname || n.path || n.pathname), n.nodeName && (s = u.getDomAttribute(n), n = n[s] || "", f = !1), !r && f && n.pathname !== undefined && (n = n.toString()), typeof n == "string" || n instanceof String) this._parts = u.parse(String(n), this._parts); else if (r || f) { e = r ? n._parts : n; for (i in e) o.call(this._parts, i) && (this._parts[i] = e[i]) } else throw new TypeError("invalid input"); return this.build(!t), this }; f.is = function (n) { var r = !1, f = !1, e = !1, t = !1, s = !1, h = !1, c = !1, o = !this._parts.urn; this._parts.hostname && (o = !1, f = u.ip4_expression.test(this._parts.hostname), e = u.ip6_expression.test(this._parts.hostname), r = f || e, t = !r, s = t && i && i.has(this._parts.hostname), h = t && u.idn_expression.test(this._parts.hostname), c = t && u.punycode_expression.test(this._parts.hostname)); switch (n.toLowerCase()) { case "relative": return o; case "absolute": return !o; case "domain": case "name": return t; case "sld": return s; case "ip": return r; case "ip4": case "ipv4": case "inet4": return f; case "ip6": case "ipv6": case "inet6": return e; case "idn": return h; case "url": return !this._parts.urn; case "urn": return !!this._parts.urn; case "punycode": return c } return null }; var tt = f.protocol, it = f.port, rt = f.hostname; return f.protocol = function (n, t) { if (n !== undefined && n && (n = n.replace(/:(\/\/)?$/, ""), !n.match(u.protocol_expression))) throw new TypeError('Protocol "' + n + "\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]"); return tt.call(this, n, t) }, f.scheme = f.protocol, f.port = function (n, t) { if (this._parts.urn) return n === undefined ? "" : this; if (n !== undefined && (n === 0 && (n = null), n && (n += "", n.charAt(0) === ":" && (n = n.substring(1)), n.match(/[^0-9]/)))) throw new TypeError('Port "' + n + '" contains characters other than [0-9]'); return it.call(this, n, t) }, f.hostname = function (n, t) { if (this._parts.urn) return n === undefined ? "" : this; if (n !== undefined) { var i = {}; u.parseHost(n, i); n = i.hostname } return rt.call(this, n, t) }, f.host = function (n, t) { return this._parts.urn ? n === undefined ? "" : this : n === undefined ? this._parts.hostname ? u.buildHost(this._parts) : "" : (u.parseHost(n, this._parts), this.build(!t), this) }, f.authority = function (n, t) { return this._parts.urn ? n === undefined ? "" : this : n === undefined ? this._parts.hostname ? u.buildAuthority(this._parts) : "" : (u.parseAuthority(n, this._parts), this.build(!t), this) }, f.userinfo = function (n, t) { if (this._parts.urn) return n === undefined ? "" : this; if (n === undefined) { if (!this._parts.username) return ""; var i = u.buildUserinfo(this._parts); return i.substring(0, i.length - 1) } return n[n.length - 1] !== "@" && (n += "@"), u.parseUserinfo(n, this._parts), this.build(!t), this }, f.resource = function (n, t) { var i; return n === undefined ? this.path() + this.search() + this.hash() : (i = u.parse(n), this._parts.path = i.path, this._parts.query = i.query, this._parts.fragment = i.fragment, this.build(!t), this) }, f.subdomain = function (n, t) { var i; if (this._parts.urn) return n === undefined ? "" : this; if (n === undefined) return !this._parts.hostname || this.is("IP") ? "" : (i = this._parts.hostname.length - this.domain().length - 1, this._parts.hostname.substring(0, i) || ""); var r = this._parts.hostname.length - this.domain().length, f = this._parts.hostname.substring(0, r), e = new RegExp("^" + s(f)); return n && n.charAt(n.length - 1) !== "." && (n += "."), n && u.ensureValidHostname(n), this._parts.hostname = this._parts.hostname.replace(e, n), this.build(!t), this }, f.domain = function (n, t) { var r, i, f; if (this._parts.urn) return n === undefined ? "" : this; if (typeof n == "boolean" && (t = n, n = undefined), n === undefined) return !this._parts.hostname || this.is("IP") ? "" : (r = this._parts.hostname.match(/\./g), r && r.length < 2) ? this._parts.hostname : (i = this._parts.hostname.length - this.tld(t).length - 1, i = this._parts.hostname.lastIndexOf(".", i - 1) + 1, this._parts.hostname.substring(i) || ""); if (!n) throw new TypeError("cannot set domain empty"); return u.ensureValidHostname(n), !this._parts.hostname || this.is("IP") ? this._parts.hostname = n : (f = new RegExp(s(this.domain()) + "$"), this._parts.hostname = this._parts.hostname.replace(f, n)), this.build(!t), this }, f.tld = function (n, t) { var f, r, u; if (this._parts.urn) return n === undefined ? "" : this; if (typeof n == "boolean" && (t = n, n = undefined), n === undefined) return !this._parts.hostname || this.is("IP") ? "" : (f = this._parts.hostname.lastIndexOf("."), r = this._parts.hostname.substring(f + 1), t !== !0 && i && i.list[r.toLowerCase()]) ? i.get(this._parts.hostname) || r : r; if (n) if (n.match(/[^a-zA-Z0-9-]/)) if (i && i.is(n)) u = new RegExp(s(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(u, n); else throw new TypeError('TLD "' + n + '" contains characters other than [A-Z0-9]'); else if (!this._parts.hostname || this.is("IP")) throw new ReferenceError("cannot set TLD on non-domain host"); else u = new RegExp(s(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(u, n); else throw new TypeError("cannot set TLD empty"); return this.build(!t), this }, f.directory = function (n, t) { var r, i; if (this._parts.urn) return n === undefined ? "" : this; if (n === undefined || n === !0) return !this._parts.path && !this._parts.hostname ? "" : this._parts.path === "/" ? "/" : (r = this._parts.path.length - this.filename().length - 1, i = this._parts.path.substring(0, r) || (this._parts.hostname ? "/" : ""), n ? u.decodePath(i) : i); var f = this._parts.path.length - this.filename().length, e = this._parts.path.substring(0, f), o = new RegExp("^" + s(e)); return this.is("relative") || (n || (n = "/"), n.charAt(0) !== "/" && (n = "/" + n)), n && n.charAt(n.length - 1) !== "/" && (n += "/"), n = u.recodePath(n), this._parts.path = this._parts.path.replace(o, n), this.build(!t), this }, f.filename = function (n, t) { var f, i, r, e; return this._parts.urn ? n === undefined ? "" : this : n === undefined || n === !0 ? !this._parts.path || this._parts.path === "/" ? "" : (f = this._parts.path.lastIndexOf("/"), i = this._parts.path.substring(f + 1), n ? u.decodePathSegment(i) : i) : (r = !1, n.charAt(0) === "/" && (n = n.substring(1)), n.match(/\.?\//) && (r = !0), e = new RegExp(s(this.filename()) + "$"), n = u.recodePath(n), this._parts.path = this._parts.path.replace(e, n), r ? this.normalizePath(t) : this.build(!t), this) }, f.suffix = function (n, t) { var r, f, e, o, i, h; if (this._parts.urn) return n === undefined ? "" : this; if (n === undefined || n === !0) return !this._parts.path || this._parts.path === "/" ? "" : (r = this.filename(), f = r.lastIndexOf("."), f === -1) ? "" : (e = r.substring(f + 1), o = /^[a-z0-9%]+$/i.test(e) ? e : "", n ? u.decodePathSegment(o) : o); if (n.charAt(0) === "." && (n = n.substring(1)), i = this.suffix(), i) h = n ? new RegExp(s(i) + "$") : new RegExp(s("." + i) + "$"); else { if (!n) return this; this._parts.path += "." + u.recodePath(n) } return h && (n = u.recodePath(n), this._parts.path = this._parts.path.replace(h, n)), this.build(!t), this }, f.segment = function (n, t, i) { var f = this._parts.urn ? ":" : "/", o = this.path(), s = o.substring(0, 1) === "/", r = o.split(f), u, h; if (n !== undefined && typeof n != "number" && (i = t, t = n, n = undefined), n !== undefined && typeof n != "number") throw new Error('Bad segment "' + n + '", must be 0-based integer'); if (s && r.shift(), n < 0 && (n = Math.max(r.length + n, 0)), t === undefined) return n === undefined ? r : r[n]; if (n === null || r[n] === undefined) if (e(t)) for (r = [], u = 0, h = t.length; u < h; u++) (t[u].length || r.length && r[r.length - 1].length) && (r.length && !r[r.length - 1].length && r.pop(), r.push(t[u])); else (t || typeof t == "string") && (r[r.length - 1] === "" ? r[r.length - 1] = t : r.push(t)); else t ? r[n] = t : r.splice(n, 1); return s && r.unshift(""), this.path(r.join(f), i) }, f.segmentCoded = function (n, t, i) { var f, r, o; if (typeof n != "number" && (i = t, t = n, n = undefined), t === undefined) { if (f = this.segment(n, t, i), e(f)) for (r = 0, o = f.length; r < o; r++) f[r] = u.decode(f[r]); else f = f !== undefined ? u.decode(f) : undefined; return f } if (e(t)) for (r = 0, o = t.length; r < o; r++) t[r] = u.decode(t[r]); else t = typeof t == "string" || t instanceof String ? u.encode(t) : t; return this.segment(n, t, i) }, k = f.query, f.query = function (n, t) { if (n === !0) return u.parseQuery(this._parts.query, this._parts.escapeQuerySpace); if (typeof n == "function") { var i = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace), r = n.call(this, i); return this._parts.query = u.buildQuery(r || i, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), this.build(!t), this } return n !== undefined && typeof n != "string" ? (this._parts.query = u.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), this.build(!t), this) : k.call(this, n, t) }, f.setQuery = function (n, t, i) { var f = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace), r; if (typeof n == "string" || n instanceof String) f[n] = t !== undefined ? t : null; else if (typeof n == "object") for (r in n) o.call(n, r) && (f[r] = n[r]); else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter"); return this._parts.query = u.buildQuery(f, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), typeof n != "string" && (i = t), this.build(!i), this }, f.addQuery = function (n, t, i) { var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return u.addQuery(r, n, t === undefined ? null : t), this._parts.query = u.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), typeof n != "string" && (i = t), this.build(!i), this }, f.removeQuery = function (n, t, i) { var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return u.removeQuery(r, n, t), this._parts.query = u.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), typeof n != "string" && (i = t), this.build(!i), this }, f.hasQuery = function (n, t, i) { var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return u.hasQuery(r, n, t, i) }, f.setSearch = f.setQuery, f.addSearch = f.addQuery, f.removeSearch = f.removeQuery, f.hasSearch = f.hasQuery, f.normalize = function () { return this._parts.urn ? this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build() : this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build() }, f.normalizeProtocol = function (n) { return typeof this._parts.protocol == "string" && (this._parts.protocol = this._parts.protocol.toLowerCase(), this.build(!n)), this }, f.normalizeHostname = function (i) { return this._parts.hostname && (this.is("IDN") && n ? this._parts.hostname = n.toASCII(this._parts.hostname) : this.is("IPv6") && t && (this._parts.hostname = t.best(this._parts.hostname)), this._parts.hostname = this._parts.hostname.toLowerCase(), this.build(!i)), this }, f.normalizePort = function (n) { return typeof this._parts.protocol == "string" && this._parts.port === u.defaultPorts[this._parts.protocol] && (this._parts.port = null, this.build(!n)), this }, f.normalizePath = function (n) { if (this._parts.urn || !this._parts.path || this._parts.path === "/") return this; var e, t = this._parts.path, r = "", i, f; for (t.charAt(0) !== "/" && (e = !0, t = "/" + t), t = t.replace(/(\/(\.\/)+)|(\/\.$)/g, "/").replace(/\/{2,}/g, "/"), e && (r = t.substring(1).match(/^(\.\.\/)+/) || "", r && (r = r[0])) ; ;) { if (i = t.indexOf("/.."), i === -1) break; else if (i === 0) { t = t.substring(3); continue } f = t.substring(0, i).lastIndexOf("/"); f === -1 && (f = i); t = t.substring(0, f) + t.substring(i + 3) } return e && this.is("relative") && (t = r + t.substring(1)), t = u.recodePath(t), this._parts.path = t, this.build(!n), this }, f.normalizePathname = f.normalizePath, f.normalizeQuery = function (n) { return typeof this._parts.query == "string" && (this._parts.query.length ? this.query(u.parseQuery(this._parts.query, this._parts.escapeQuerySpace)) : this._parts.query = null, this.build(!n)), this }, f.normalizeFragment = function (n) { return this._parts.fragment || (this._parts.fragment = null, this.build(!n)), this }, f.normalizeSearch = f.normalizeQuery, f.normalizeHash = f.normalizeFragment, f.iso8859 = function () { var n = u.encode, t = u.decode; return u.encode = escape, u.decode = decodeURIComponent, this.normalize(), u.encode = n, u.decode = t, this }, f.unicode = function () { var n = u.encode, t = u.decode; return u.encode = a, u.decode = unescape, this.normalize(), u.encode = n, u.decode = t, this }, f.readable = function () { var t = this.clone(), i, r, f; if (t.username("").password("").normalize(), i = "", t._parts.protocol && (i += t._parts.protocol + "://"), t._parts.hostname && (t.is("punycode") && n ? (i += n.toUnicode(t._parts.hostname), t._parts.port && (i += ":" + t._parts.port)) : i += t.host()), t._parts.hostname && t._parts.path && t._parts.path.charAt(0) !== "/" && (i += "/"), i += t.path(!0), t._parts.query) { r = ""; for (var e = 0, o = t._parts.query.split("&"), s = o.length; e < s; e++) f = (o[e] || "").split("="), r += "&" + u.decodeQuery(f[0], this._parts.escapeQuerySpace).replace(/&/g, "%26"), f[1] !== undefined && (r += "=" + u.decodeQuery(f[1], this._parts.escapeQuerySpace).replace(/&/g, "%26")); i += "?" + r.substring(1) } return i + u.decodeQuery(t.hash(), !0) }, f.absoluteTo = function (n) { var t = this.clone(), e = ["protocol", "username", "password", "hostname", "port"], i, r, f; if (this._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components"); if (n instanceof u || (n = new u(n)), t._parts.protocol || (t._parts.protocol = n._parts.protocol), this._parts.hostname) return t; for (r = 0; f = e[r]; r++) t._parts[f] = n._parts[f]; return t._parts.path ? t._parts.path.substring(-2) === ".." && (t._parts.path += "/") : (t._parts.path = n._parts.path, t._parts.query || (t._parts.query = n._parts.query)), t.path().charAt(0) !== "/" && (i = n.directory(), t._parts.path = (i ? i + "/" : "") + t._parts.path, t.normalizePath()), t.build(), t }, f.relativeTo = function (n) { var i = this.clone().normalize(), t, r, f, e, o, s; if (i._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components"); if (n = new u(n).normalize(), t = i._parts, r = n._parts, e = i.path(), o = n.path(), e.charAt(0) !== "/") throw new Error("URI is already relative"); if (o.charAt(0) !== "/") throw new Error("Cannot calculate a URI relative to another relative URI"); if ((t.protocol === r.protocol && (t.protocol = null), t.username !== r.username || t.password !== r.password) || t.protocol !== null || t.username !== null || t.password !== null) return i.build(); if (t.hostname === r.hostname && t.port === r.port) t.hostname = null, t.port = null; else return i.build(); return e === o ? (t.path = "", i.build()) : (f = u.commonPath(i.path(), n.path()), !f) ? i.build() : (s = r.path.substring(f.length).replace(/[^\/]*$/, "").replace(/.*?\//g, "../"), t.path = s + t.path.substring(f.length), i.build()) }, f.equals = function (n) { var r = this.clone(), f = new u(n), i = {}, s = {}, l = {}, h, c, t; if (r.normalize(), f.normalize(), r.toString() === f.toString()) return !0; if ((h = r.query(), c = f.query(), r.query(""), f.query(""), r.toString() !== f.toString()) || h.length !== c.length) return !1; i = u.parseQuery(h, this._parts.escapeQuerySpace); s = u.parseQuery(c, this._parts.escapeQuerySpace); for (t in i) if (o.call(i, t)) { if (e(i[t])) { if (!w(i[t], s[t])) return !1 } else if (i[t] !== s[t]) return !1; l[t] = !0 } for (t in s) if (o.call(s, t) && !l[t]) return !1; return !0 }, f.duplicateQueryParameters = function (n) { return this._parts.duplicateQueryParameters = !!n, this }, f.escapeQuerySpace = function (n) { return this._parts.escapeQuerySpace = !!n, this }, u });

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Mention/Scripts/TFS.Mention.WorkItems",["require","exports","Mention/Scripts/Resources/TFS.Resources.Mention","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.Autocomplete.JQueryAutocomplete","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Social.Telemetry","Mention/Scripts/WorkItem/WorkItemMentionUtilities","Mention/Scripts/WorkItem/WorkItemProvider","Mention/Scripts/WorkItemTypeIcon.JQuery","Presentation/Scripts/TFS/FeatureRef/WorkItemStateCellRenderer","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","q","VSS/Controls/PopupContent","VSS/Diag","VSS/FeatureAvailability/Services","VSS/Navigation/HubsService","VSS/Service","VSS/Utils/String","Presentation/Scripts/URI"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){function it(n){var t=o.getWorkItemTypeWithIdString(n.workItemType,n.id);return o.getWorkItemSummary(t,n.title)}function ht(n){var t=ct(n.id),i=o.getWorkItemMentionText(n.id);return r.createHtmlMention(t,i)}function ut(n){var t=ct(n.id),i=it(n);return r.createHtmlMention(t,i)}function ct(n){var r=g.getWorkItemUrl(n),t=new d(r),i;return t.host()||(i=f.getWindowLocation(),t.host(i.host),t.protocol(i.protocol)),t.href()}var rt,ft,et,nt,ot,tt,st,g;Object.defineProperty(t,"__esModule",{value:!0});t.createWorkItemHtmlMentionWithTitle=t.createWorkItemHtmlMentionWithId=t.createWorkItemMentionSummaryWithTitle=t.TfsMentionWorkItemHelpers=t.WorkItemMentionProcessor=t.WorkItemsMentionParser=t.WorkItemHtmlMentionsRenderingProvider=t.WorkItemMentionsRenderingProvider=t.WorkItemAutocompleteProvider=t.CssClasses=void 0,function(n){n.MENTION_WIDGET_WORKITEM="mention-widget-workitem";n.MENTION_WIDGET_WORKITEM_DELETED="mention-widget-workitem-no-access"}(rt=t.CssClasses||(t.CssClasses={}));ft="ms.vss-work-web.new-work-items-hub";et=function(n){function t(i){var r=this,f=i||{},u;f.isMenuWidthOverridable&&$.extend(f,{menuWidth:t.MENU_WIDTH});r=__construct(this,n,[f]);for(u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r}return __extends(t,n),t.prototype.getWorkItemProvider=function(){return this._workItemProvider||(this._workItemProvider=new s.WorkItemProvider({wiql:this._options.wiql})),this._workItemProvider},t.prototype.prefetch=function(){this._options.disablePrefetch||this.getWorkItemProvider().prefetch()},t.prototype.getPluginName=function(){return"WorkItemAutocompleteProvider"},t.prototype.canOpen=function(n){var r=this.getTruncatedText(n),t=this.mentionPattern().exec(r.textBeforeSelection),i;return t?(i=t.index,t[1]&&(i+=t[1].length+r.truncatedTextLength),{start:i,end:n.textBeforeSelection.length}):null},t.prototype.getSuggestions=function(n){var t=$.Deferred(),u={},f=o.NumberMentionPattern.exec(n.textBeforeSelection),i,e,r;return f?i=this.getWorkItemProvider().searchById(f[2]):(e=this.getTruncatedText(n),r=this.mentionPattern().exec(e.textBeforeSelection),i=r?this.getWorkItemProvider().search(r[2]):this.getWorkItemProvider().search("")),i.done(function(n){u.suggestionsCount="".concat(n.length);t.resolve({result:n,telemetry:u})}).fail(function(n){t.reject(n)}),t},t.prototype.renderSuggestion=function(n,t){var i=$("<li/>").appendTo(n),u=$("<a/>").appendTo(i),f,e;v.RichContentTooltip.add(t.original.title,u);f=$("<div/>");e=f[0];h.renderWorkItemTypeIcon(e,t.highlighted.workItemType,t.original.colorAndIcon,{ariaAttributes:{}});u.append(f[0].innerHTML);var c=o.getWorkItemTypeWithIdString(t.highlighted.workItemType,t.highlighted.id),l=$("<span/>").addClass(r.CssClasses.AUTOCOMPLETE_ID).html(c)[0].outerHTML,a=$("<span/>").addClass(r.CssClasses.AUTOCOMPLETE_TITLE).html(t.highlighted.title)[0].outerHTML,s=$(o.getWorkItemSummary(l,a));return s.appendTo(u),i.attr("aria-label",s.text()),i},t.prototype.afterRender=function(n){$("a",n).each(function(n,t){t.clientWidth>=t.scrollWidth&&$(t).removeAttr("title")})},t.prototype.getReplacementText=function(n,t,i){if(i)return{textBeforeSelection:n.textBeforeSelection,textInSelection:"",textAfterSelection:n.textAfterSelection};var r=this.getTruncatedText(n),u=this.mentionPattern().exec(r.textBeforeSelection),e=u.index+u[1].length+1+r.truncatedTextLength,s=n.textBeforeSelection.substr(0,e),f=t.original.id.toString();return o.AfterMentionPattern.exec(n.textAfterSelection)||(f+=" "),{textBeforeSelection:s+f,textInSelection:"",textAfterSelection:n.textAfterSelection}},t.prototype.getReplacementHtml=function(n){return ut(n.original)},t.prototype.getProviderName=function(){return"WorkItemAutocompleteProvider"},t.prototype.mentionPattern=function(){return o.mentionPattern(this.isOpen())},t.prototype.getTruncatedText=function(n){var t=n.textBeforeSelection,r=t.length,i=1e3,u=0;return r>i&&(t=t.substr(-i),u=r-i),{textBeforeSelection:t,textInSelection:n.textInSelection,textAfterSelection:n.textAfterSelection,truncatedTextLength:u}},t.MENU_WIDTH=450,t}(u.JQueryAutocompletePlugin);t.WorkItemAutocompleteProvider=et;nt=function(){function n(){}return n.getDefault=function(){return n._instance||(n._instance=new n),n._instance},n._createWorkItemElement=function(t,i,u){var v,y,l,f;u===void 0&&(u=!1);var a=$("<a/>"),e=null,s=null;if(u)e=o.getWorkItemMentionText(t.id);else{if(h.renderWorkItemTypeIcon(a[0],t.workItemType,t.colorAndIcon,{suppressTooltip:!0}),v=$("<span/>").addClass("secondary-text").text(t.id)[0].outerHTML,y=$("<span/>").addClass("mention-widget-workitem-title fontWeightSemiBold").text(t.title)[0].outerHTML,t.stateAndColor){var p=c.WorkItemStateCellRenderer.getProcessedStateColor(t.stateAndColor.stateColor),w=$("<span/>").addClass("workitem-state-color").css({"background-color":p.backgroundColor})[0].outerHTML,b=$("<span/>").text(t.stateAndColor.stateName)[0].outerHTML;s=$("<span/>").addClass("mention-widget-workitem-state").append(w).append(b)[0].outerHTML}e="".concat(v," ").concat(y)}return l=a.addClass("mention-link "+n.CSS_CLASS_WI_MENTION_LINK).attr("href",i).append(e),f=l,s&&(f=$("<span/>").append(f).append(s),t.colorAndIcon&&f.css({"border-left-color":t.colorAndIcon.color})),f.attr(r.Constants.HTML_RENDERED_MENTION_ATTR_NAME,"work-item"),{wi:f.addClass(rt.MENTION_WIDGET_WORKITEM+" body-m"),link:l}},n.prototype.getArtifactType=function(){return"WorkItem"},n.createWorkItemIdElement=function(t,i){return n._createWorkItemElement({id:t,colorAndIcon:null,projectName:null,title:null,workItemType:null},i,!0).wi},n.prototype.renderMention=function(t,r,u){return s.WorkItemProvider.getInstance().getById(t.ArtifactId).then(function(f){var o;if(f===null){var h="#".concat(t.ArtifactId),c=g.getWorkItemUrl(+t.ArtifactId),l=$("<a/>").text(h);return l.attr(n._WI_DATA_ATTRIBUTE,c).attr("href",c).addClass("mention-link "+n.CSS_CLASS_WI_MENTION_LINK),o=r(l),o.addClass(rt.MENTION_WIDGET_WORKITEM_DELETED),{htmlComponent:o,displayText:h}}var s=g.getWorkItemUrl(+t.ArtifactId,f.projectName),e=n._createWorkItemElement(f,s),v=r(e.wi),a=it(f);return e.link.attr(n._WI_DATA_ATTRIBUTE,JSON.stringify([f,s])),f.stateAndColor&&e.link.attr("aria-label",a+": "+k.format(i.WorkItemStateLabel,f.stateAndColor.stateName)),n._registerMentionClickHandler(e.link,f,s,u),{htmlComponent:v,displayText:a}})},n.prototype.getTelemetryMentionSummary=function(n){return"".concat(this.getArtifactType(),":").concat(n.ArtifactId)},n.registerMentionClickHandler=function(n,t,i){var u=$(n),r=$(".".concat(this.CSS_CLASS_WI_MENTION_LINK,":not(.").concat(this.CSS_CLASS_MENTION_CLICK_HANDLED,")"),u);r.length>0&&(r.addClass(this.CSS_CLASS_MENTION_CLICK_HANDLED),this._registerMentionClickHandler(r,undefined,undefined,undefined,t,i))},n._registerMentionClickHandler=function(n,t,i,r,u,f){var o=this;n.click(function(n){var c,s=t,h=i,l;if(s||h||(c=JSON.parse(n.currentTarget.getAttribute(o._WI_DATA_ATTRIBUTE)),s=c[0],h=c[1]),e.EventLogging.publishWorkItemsClickEvent({workItem:s.id.toString()},u),l=function(){f?f(h,n):g.showWorkItem(s.id,s,h,n)},r&&r.onWorkItemClick){r.onWorkItemClick(s,h,l);n.preventDefault()}else l()})},n._WI_DATA_ATTRIBUTE="data-wi",n.CSS_CLASS_WI_MENTION_LINK="mention-wi-link",n.CSS_CLASS_MENTION_CLICK_HANDLED="mention-click-handled",n}();t.WorkItemMentionsRenderingProvider=nt;ot=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.renderMention=function(n,t){return s.WorkItemProvider.getInstance().getById(n.ArtifactId).then(function(i){var r,u;if(i===null)return r=$("<span/>").text(n.Text)[0].outerHTML,u=t(r),a.reject(u);var f=p.FeatureAvailabilityService.isFeatureEnabled(l.FeatureAvailabilityFlags.HideTypeAndTitleInWorkItemMentions,!1),e=f?ht(i):ut(i),s=f?o.getWorkItemMentionText(i.id):it(i),h=t(e);return{htmlComponent:h,displayText:s}})},t}(nt);t.WorkItemHtmlMentionsRenderingProvider=ot;tt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.getDefault=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.parseFromText=function(n){for(var u=[],f=new RegExp("(".concat(r.Constants.PATTERN_WORD_START_SEPARATOR,")#([0-9]{1,10})(?=(").concat(r.Constants.PATTERN_WORD_END_SEPARATOR,"))"),"ig"),t;t=f.exec(n);){var e=t.index,o=f.lastIndex,i=t[1];i&&i.length&&(e+=i.length);u.push({index:{start:e,end:o},id:t[2]})}return u},t.prototype.parseFromUrl=function(n){for(var r=new d(n),t=r.segment(),i;t.shift()!==g.getControllerNameWithPrefix();)if(!t.length)return;return i=+t.pop(),i>0?{workItemId:i}:void 0},t.prototype.parseFromHtml=function(n,t){var i=this,u=n.find('a[href*="/'.concat(g.getControllerNameWithPrefix(),"/").concat(g.EDIT_ACTION_NAME,'/"][').concat(r.Constants.HTML_MENTION_ATTR_NAME,'^="').concat(r.Constants.HTML_MENTION_VERSION_10,'"]'));u.each(function(n,r){var u=$(r),f=i.parseFromUrl(u.attr("href"));f&&t(u,f)})},t.prototype.getArtifactType=function(){return"WorkItem"},t}(r.ArtifactMentionParser);t.WorkItemsMentionParser=tt;st=function(){function n(){}return n.processHtml=function(n,t){var i=[],u;return tt.getDefault().parseFromHtml(n,function(n,t){var u={ArtifactId:t.workItemId.toString(),ArtifactType:"",Text:"",Type:r.TextPartType.Mention,StartIndex:0};i.push({$a:n,mention:u})}),u=i.map(function(n){return nt.getDefault().renderMention(n.mention,function(n){return $("<span/>").append(n)},t).then(function(t){t&&n.$a.replaceWith(t.htmlComponent)})}),Promise.all(u)},n.filterHtml=function(n){tt.getDefault().parseFromHtml(n,function(n,t){var u=n.attr("href"),i=nt.createWorkItemIdElement(t.workItemId,u);i.attr(r.Constants.HTML_MENTION_ATTR_NAME,n.attr(r.Constants.HTML_MENTION_ATTR_NAME));n.replaceWith(i)})},n}();t.WorkItemMentionProcessor=st,function(n){function t(n,t,i,r){var e,u;try{if(f.hasParentWindow()&&window.parent.TfsMentionWorkItemHelpers){e=window.parent.TfsMentionWorkItemHelpers;e.showWorkItem(n);return}}catch(o){}u=f.getMainTfsContext().contextData.project;!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&u&&t.projectName&&k.equals(t.projectName,u.name,!0)&&(b.getLocalService(w.HubsService).getHubNavigateHandler(ft,i)(r),r.preventDefault())}function i(t,i){var r=f.getMainTfsContext();return r.getPublicActionUrl(n.EDIT_ACTION_NAME,n.CONTROLLER_NAME,{parameters:t,project:i||r.navigation.projectId,team:""})}function r(){var t=f.getMainTfsContext();return"".concat(t.navigation.controllerPrefix).concat(n.CONTROLLER_NAME)}n.EDIT_ACTION_NAME="edit";n.CONTROLLER_NAME="workitems";n.showWorkItem=t;n.getWorkItemUrl=i;n.getControllerNameWithPrefix=r}(g=t.TfsMentionWorkItemHelpers||(t.TfsMentionWorkItemHelpers={}));t.createWorkItemMentionSummaryWithTitle=it;t.createWorkItemHtmlMentionWithId=ht;t.createWorkItemHtmlMentionWithTitle=ut;window.TfsMentionWorkItemHelpers=g});

define("Mention/Scripts/TFS.Mention.Autocomplete.Controls",["require","exports","q","VSS/Controls","VSS/Utils/Core","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/Utils/UI","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Social.Telemetry","VSS/Diag","VSS/LoaderPlugins/Css!Mention"],function(n,t,i,r,u,f,e,o,s,h){var c,l,a,v;Object.defineProperty(t,"__esModule",{value:!0});t.AutocompleteEnhancement=t.AutocompleteManager=t.AutocompleteSessionManager=void 0,function(n){function t(n){var t=0,r=n[0],i;return r.selectionStart?t=r.selectionStart:u.documentSelection&&(this.$inputElement.focus(),i=u.documentSelection.createRange(),i.moveStart("character",-this.$inputElement.val().length),t=i.text.length),t}function i(n,t,i){e.SelectionUtils.selectInputText(n,t,i,!1)}function r(n,t,i){var s=$._data(n[0],"events"),c,e,o,u,h,f,r;if(s)for(e=$.grep(t.split(" "),function(n){return!!n}),c={},r=0;r<e.length;r++)o=e[r],u=s[o],c[o]=u?u.length:0;if(i(),s)for(h=0;h<e.length;h++){var o=e[h],u=s[o],l=c[o];if(u&&u.length>l){for(f=[],r=l;r<u.length;r++)f.push(u[r]);for(r=u.length-f.length-1;r>=0;r--)u[r+f.length]=u[r];for(r=0;r<f.length;r++)u[r]=f[r]}}}n.getInputCaretPosition=t;n.setInputSelectionRange=i;n.moveAllAddedEventHandlersToFront=r}(c||(c={}));l=function(){function n(n,t){var r=this;this._instanceId=f.GUIDUtils.newGuid();this._plugins=[];this._sessionActive=!1;this._sessionPluginActive=!1;this._sessionStartTime=null;this._options=n;this._artifactUri=n.artifactUri;var u=this._options.pluginConfigs.filter(function(n){return Boolean(n.factory)}),e=this._options.pluginConfigs.filter(function(n){return Boolean(n.factoryPromise)}),o=e.map(function(n){return n.factoryPromise});this._pluginsPromise=i.allSettled(o).then(function(n){return r._plugins=u.map(function(n){return r._createPlugin(n,t)}),n.forEach(function(n){n.state==="fulfilled"&&n.value?r._plugins.push(r._createPlugin({factory:n.value},t)):h.logError("Failed loading mention plugin: ".concat(n.reason))}),r._plugins})}return n.prototype._createPlugin=function(n,t){var i=this;return n.factory(__assign(__assign({select:function(n,t,r){i._sessionPluginActive&&i._pluginSelect(n,t,r)},focus:function(n,t){i._sessionPluginActive&&i._pluginFocus(n,t)},close:function(n,t){i._sessionPluginActive&&i.close(n,t)}},t),n.options))},n.prototype.initialize=function(){var n=this;return this._pluginsPromise.then(function(t){return t.forEach(function(n){n.initialize()}),n._plugins=t,n._options&&n._options.pluginsInitialized&&n._options.pluginsInitialized(),null})},n.prototype.dispose=function(){this._plugins&&(this._plugins.forEach(function(n){n.dispose()}),this._plugins=null)},n.prototype.isActive=function(){return this._sessionActive},n.prototype.getActivePlugin=function(){return this._sessionPluginActive?this._getPlugin():null},n.prototype.updateSession=function(n,t){var u=this._sessionPluginActive?this._sessionPluginIndex:null,o,i,r,e;for(this._sessionPluginActive&&!this._getPlugin().canOpen(t)&&this._pluginClose(n,t),o=this._sessionPluginActive?this._sessionPluginIndex:this._plugins.length,i=null,r=0;r<o;r++)if(e=this._plugins[r].canOpen(t),e){i=r;break}this._sessionPluginActive&&i!==null&&this._pluginClose(n,t);i!==null&&(this._sessionId=f.GUIDUtils.newGuid(),this._sessionStartTime=new Date,this._sessionSuggestionSelected=!1,this._sessionPluginActive=!0,this._sessionPluginIndex=i,this._getPlugin().open(n,t),this._publishTelemetry(s.EventLogging.publishAutocompleteOpenEvent,n,this._getPlugin().getPluginName(),t,{}));u===null||this._sessionPluginActive||this._sessionClose(n,t,u);u===null&&this._sessionPluginActive&&(this._sessionActive=!0,this._options.open&&this._options.open(e))},n.prototype.suggest=function(n,t){var i=this,r,u;this._sessionPluginActive&&(r=this._getPlugin().getPluginName(),u=new Date,this._getPlugin().suggest(n,t).then(function(f){var e=__assign({durationInMSec:"".concat((new Date).getTime()-u.getTime()),mentionAfrifactContext:i._options.getMentionArtifactContext?i._options.getMentionArtifactContext():undefined},f.telemetry);i._publishTelemetry(s.EventLogging.publishAutocompleteSuggestEvent,n,r,t,e)}))},n.prototype.setLastKeyEvent=function(n){this._lastKeyEvent=n},n.prototype.prefetch=function(){this._pluginsPromise.then(function(n){n.forEach(function(n){n.prefetch()})})},n.prototype.setArtifactUri=function(n){this._artifactUri=n},n.prototype.close=function(n,t){this._sessionPluginActive&&(this._pluginClose(n,t),this._sessionClose(n,t,this._sessionPluginIndex))},n.prototype._getPlugin=function(){return this._plugins[this._sessionPluginIndex]},n.prototype._pluginSelect=function(n,t,i){this._sessionPluginActive&&(this._sessionSuggestionSelected=!0,this._options.select&&this._options.select(t),this._publishTelemetry(s.EventLogging.publishAutocompleteSelectEvent,n,this._getPlugin().getPluginName(),t.getPlainText(),i))},n.prototype._pluginFocus=function(n,t){this._sessionPluginActive&&this._options.focus&&this._options.focus(t)},n.prototype._pluginClose=function(n,t){if(this._sessionPluginActive&&(this._sessionPluginActive=!1,this._getPlugin().close(n,t),!this._sessionSuggestionSelected)){var i=this._plugins[this._sessionPluginIndex].getPluginName();this._publishTelemetry(s.EventLogging.publishAutocompleteCancelEvent,n,i,t,{})}},n.prototype._sessionClose=function(){this._sessionActive&&(this._sessionActive=!1,this._options.close&&this._options.close())},n.prototype._publishTelemetry=function(t,i,r,u,f){for(var o="",e,s;i&&i.type&&!n.REGEX_TELEMETRY_UI_EVENT_TYPES.exec(i.type);)i=i.originalEvent;i&&i.type&&(o+="".concat(i.type),e=i,e.type==="input"&&!e.keyCode&&this._lastKeyEvent&&(e=this._lastKeyEvent),e.keyCode&&(o+=":".concat(e.keyCode)),e.altKey&&(o+=":alt"),e.ctrlKey&&(o+=":ctrl"));s=$.extend({telemetryVersion:"0.3",artifactUri:this._artifactUri,autocompleteSessionId:this._sessionId,autocompleteSessionStartTime:this._sessionStartTime.toISOString(),time:(new Date).toISOString(),uiEvent:o,pluginName:r},f,this._options.defaultTelemetryProperties);t(s)},n.REGEX_TELEMETRY_UI_EVENT_TYPES=/^(key[a-z]+|input|blur|click)$/i,n}();t.AutocompleteSessionManager=l;a=function(){function n(t,i){this._throttledSuggest=o.throttledDelegate(this,n.AUTOCOMPLETE_DELAY_MSEC,this._suggest);this._sessionManager=new l(t,i)}return n.prototype.initialize=function(){this._sessionManager.initialize()},n.prototype.dispose=function(){this._sessionManager&&(this._sessionManager.dispose(),this._sessionManager=null)},n.prototype.prefetch=function(){this._sessionManager.prefetch()},n.prototype.handleEvent=function(n,t){return n.keyCode&&this._sessionManager.setLastKeyEvent(n),t!=undefined&&(this._sessionManager.updateSession(n,t),this._throttledSuggest(n,t)),this._sessionManager.isActive()?this._sessionManager.getActivePlugin().handle(n):void 0},n.prototype.close=function(n,t){this._sessionManager.close(n,t)},n.prototype.setArtifactUri=function(n){this._sessionManager.setArtifactUri(n)},n.prototype.isActive=function(){return this._sessionManager.isActive()},n.prototype._suggest=function(n,t){this._sessionManager&&this._sessionManager.suggest(n,t)},n.AUTOCOMPLETE_DELAY_MSEC=100,n}();t.AutocompleteManager=a;v=function(n){function t(i,r){var u=__construct(this,n,[i,r]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u._autocompleteManager=t._createAutocompleteManager({artifactUri:u._options.artifactUri,pluginConfigs:u._options.pluginConfigs,open:o.delegate(u,u._sessionOpen),close:o.delegate(u,u._sessionClose),select:o.delegate(u,u._sessionSelect),focus:o.delegate(u,u._sessionFocus),pluginsInitialized:o.delegate(u,u._pluginsInitialized),defaultTelemetryProperties:u._options.defaultTelemetryProperties},{menuContainer:o.delegate(u,u._getMenuContainer),positioningElement:o.delegate(u,u._getPositioningElement),textElement:o.delegate(u,u.getElement)}),u}return __extends(t,n),t._createAutocompleteManager=function(n,t){return new a(n,t)},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._options=null;this._autocompleteManager&&(this._autocompleteManager.dispose(),this._autocompleteManager=null);this.getElement()&&this.getElement().off(t.PASSTHROUGH_EVENT_TYPES)},t.prototype.initialize=function(){var n=this;this._lastValue=this.getElement().val();this._autocompleteManager.initialize();c.moveAllAddedEventHandlersToFront(this.getElement(),t.PASSTHROUGH_EVENT_TYPES,function(){n.getElement().on(t.PASSTHROUGH_EVENT_TYPES,o.delegate(n,n._handleEvent))})},t.prototype.prefetch=function(){this._autocompleteManager.prefetch()},t.prototype.isActive=function(){return this._autocompleteManager.isActive()},t.prototype.runAutocomplete=function(n){var t=jQuery.Event("manual");this._autocompleteManager.handleEvent(t,n)},t.prototype._getMenuContainer=function(){var n=this._options&&this._options.useBodyAsContainer;return!n&&this.getElement()&&this.getElement().parent()?this.getElement().parent():$(document.body)},t.prototype._getPositioningElement=function(){return this.getElement()},t.prototype._createInputText=function(n,t){var i=c.getInputCaretPosition(this.getElement());return{textBeforeSelection:t.substring(0,i),textInSelection:"",textAfterSelection:t.substring(i)}},t.prototype._handleEvent=function(n){var r,i,u,f;if(!this._suppressInputEvents||n.type!=="input")return(r=undefined,(n.type==="keyup"&&n.keyCode!==e.KeyCode.ENTER&&n.keyCode!==e.KeyCode.TAB||n.type==="input")&&(i=this.getElement().val(),i!=this._lastValue&&(this._lastValue=i,r=this._createInputText(n,i))),u=this._autocompleteManager.isActive(),f=this._autocompleteManager.handleEvent(n,r),u&&t.INTERCEPTED_EVENT_KEYCODES.some(function(t){return t===n.keyCode}))?(n.preventDefault(),n.stopImmediatePropagation(),!1):f},t.prototype._sessionOpen=function(n){this._options.open&&this._options.open(n)},t.prototype._sessionClose=function(){this._options.close&&this._options.close()},t.prototype._sessionSelect=function(n){var t=this;this._setValue(n.getPlainText(),function(){return t._triggerInputEvent()});this._options.select&&this._options.select(n)},t.prototype._sessionFocus=function(n){this._setValue(n.getPlainText())},t.prototype._pluginsInitialized=function(){this._options&&this._options.pluginsInitialized&&this._options.pluginsInitialized()},t.prototype._setValue=function(n,t){this.getElement().val(n.textBeforeSelection+n.textInSelection+n.textAfterSelection);c.setInputSelectionRange(this.getElement(),n.textBeforeSelection.length,n.textBeforeSelection.length+n.textInSelection.length);var i=this.getElement().val();i!==this._lastValue&&(t&&t(),this._lastValue=i)},t.prototype._triggerInputEvent=function(){this._suppressInputEvents=!0;try{this.getElement().trigger("input")}finally{this._suppressInputEvents=!1}},t.PASSTHROUGH_EVENT_TYPES="keyup keydown keypress input focus blur",t.INTERCEPTED_EVENT_KEYCODES=[e.KeyCode.ENTER,e.KeyCode.ESCAPE,e.KeyCode.TAB],t}(r.Enhancement);t.AutocompleteEnhancement=v});

define("VSS/Identities/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.ReadIdentitiesOptions=t.QueryMembership=t.GroupScopeType=t.FrameworkIdentityType=void 0,function(n){n[n.None=0]="None";n[n.ServiceIdentity=1]="ServiceIdentity";n[n.AggregateIdentity=2]="AggregateIdentity";n[n.ImportedIdentity=3]="ImportedIdentity"}(i=t.FrameworkIdentityType||(t.FrameworkIdentityType={})),function(n){n[n.Generic=0]="Generic";n[n.ServiceHost=1]="ServiceHost";n[n.TeamProject=2]="TeamProject"}(r=t.GroupScopeType||(t.GroupScopeType={})),function(n){n[n.None=0]="None";n[n.Direct=1]="Direct";n[n.Expanded=2]="Expanded";n[n.ExpandedUp=3]="ExpandedUp";n[n.ExpandedDown=4]="ExpandedDown"}(u=t.QueryMembership||(t.QueryMembership={})),function(n){n[n.None=0]="None";n[n.FilterIllegalMemberships=1]="FilterIllegalMemberships"}(f=t.ReadIdentitiesOptions||(t.ReadIdentitiesOptions={}));t.TypeInfo={CreateScopeInfo:{},FrameworkIdentityInfo:{},FrameworkIdentityType:{enumValues:{none:0,serviceIdentity:1,aggregateIdentity:2,importedIdentity:3}},GroupScopeType:{enumValues:{generic:0,serviceHost:1,teamProject:2}},IdentityBatchInfo:{},IdentityScope:{},IdentitySnapshot:{},QueryMembership:{enumValues:{none:0,direct:1,expanded:2,expandedUp:3,expandedDown:4}},ReadIdentitiesOptions:{enumValues:{none:0,filterIllegalMemberships:1}}};t.TypeInfo.CreateScopeInfo.fields={scopeType:{enumType:t.TypeInfo.GroupScopeType}};t.TypeInfo.FrameworkIdentityInfo.fields={identityType:{enumType:t.TypeInfo.FrameworkIdentityType}};t.TypeInfo.IdentityBatchInfo.fields={queryMembership:{enumType:t.TypeInfo.QueryMembership}};t.TypeInfo.IdentityScope.fields={scopeType:{enumType:t.TypeInfo.GroupScopeType}};t.TypeInfo.IdentitySnapshot.fields={scopes:{isArray:!0,typeInfo:t.TypeInfo.IdentityScope}}});

define("VSS/Graph/Contracts",["require","exports","VSS/Identities/Contracts"],function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.GraphTraversalDirection=void 0;var r;(function(n){n[n.Unknown=0]="Unknown";n[n.Down=1]="Down";n[n.Up=2]="Up"})(r=t.GraphTraversalDirection||(t.GraphTraversalDirection={}));t.TypeInfo={AadGraphMember:{},GraphScope:{},GraphScopeCreationContext:{},GraphServicePrincipal:{},GraphTraversalDirection:{enumValues:{unknown:0,down:1,up:2}},GraphUser:{},PagedGraphServicePrincipals:{},PagedGraphUsers:{}};t.TypeInfo.AadGraphMember.fields={metadataUpdateDate:{isDate:!0}};t.TypeInfo.GraphScope.fields={scopeType:{enumType:i.TypeInfo.GroupScopeType}};t.TypeInfo.GraphScopeCreationContext.fields={scopeType:{enumType:i.TypeInfo.GroupScopeType}};t.TypeInfo.GraphServicePrincipal.fields={metadataUpdateDate:{isDate:!0}};t.TypeInfo.GraphUser.fields={metadataUpdateDate:{isDate:!0}};t.TypeInfo.PagedGraphServicePrincipals.fields={graphServicePrincipals:{isArray:!0,typeInfo:t.TypeInfo.GraphServicePrincipal}};t.TypeInfo.PagedGraphUsers.fields={graphUsers:{isArray:!0,typeInfo:t.TypeInfo.GraphUser}}});

define("VSS/Profile/Contracts",["require","exports"],function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.TypeInfo=t.ProfileState=t.AvatarSize=void 0,function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large"}(i=t.AvatarSize||(t.AvatarSize={})),function(n){n[n.Custom=0]="Custom";n[n.CustomReadOnly=1]="CustomReadOnly";n[n.ReadOnly=2]="ReadOnly"}(r=t.ProfileState||(t.ProfileState={}));t.TypeInfo={AttributesContainer:{},Avatar:{},AvatarSize:{enumValues:{small:0,medium:1,large:2}},CoreProfileAttribute:{},CreateProfileContext:{},Profile:{},ProfileAttribute:{},ProfileAttributeBase:{},ProfileState:{enumValues:{custom:0,customReadOnly:1,readOnly:2}}};t.TypeInfo.AttributesContainer.fields={attributes:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.ProfileAttribute}};t.TypeInfo.Avatar.fields={size:{enumType:t.TypeInfo.AvatarSize},timeStamp:{isDate:!0}};t.TypeInfo.CoreProfileAttribute.fields={timeStamp:{isDate:!0}};t.TypeInfo.CreateProfileContext.fields={profileState:{enumType:t.TypeInfo.ProfileState}};t.TypeInfo.Profile.fields={applicationContainer:{typeInfo:t.TypeInfo.AttributesContainer},coreAttributes:{isDictionary:!0,dictionaryValueTypeInfo:t.TypeInfo.CoreProfileAttribute},profileState:{enumType:t.TypeInfo.ProfileState},timeStamp:{isDate:!0}};t.TypeInfo.ProfileAttribute.fields={timeStamp:{isDate:!0}};t.TypeInfo.ProfileAttributeBase.fields={timeStamp:{isDate:!0}}});

define("VSS/Graph/RestClient",["require","exports","VSS/Graph/Contracts","VSS/Profile/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u,f){"use strict";function et(n){return window.VSS&&window.VSS.VssSDKRestVersion&&ut[window.VSS.VssSDKRestVersion]?u.getClient(ut[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):u.getClient(y,undefined,undefined,undefined,n)}var h,c,o,l,s,e,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ft,ut;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.GraphHttpClient=t.GraphHttpClient3_1=t.GraphHttpClient3_2=t.GraphHttpClient4=t.GraphHttpClient4_1=t.GraphHttpClient5=t.GraphHttpClient5_1=t.GraphHttpClient5_2=t.GraphHttpClient6=t.GraphHttpClient6_1=t.GraphHttpClient7=t.GraphHttpClient7_1=t.GraphHttpClient7_2=t.CommonMethods7_1To7_2=t.CommonMethods6To7_2=t.CommonMethods5_1To7_2=t.CommonMethods5To7_2=t.CommonMethods4To7_2=t.CommonMethods3_2To7_2=t.CommonMethods3_1To7_2=void 0;h=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getDescriptor=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"048aee0a-7072-4cde-ab73-7af77b1e0b4e",resource:"Descriptors",routeTemplate:"_apis/{area}/{resource}/{storageKey}",routeValues:{storageKey:n},apiVersion:this.descriptorsApiVersion})},t}(f.VssHttpClient);t.CommonMethods3_1To7_2=h;c=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateUser=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,routeValues:{userDescriptor:t},apiVersion:this.usersApiVersion,data:n})},t.prototype.listUsers=function(n,t,r){var u={subjectTypes:n&&n.join(","),continuationToken:t,scopeDescriptor:r};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,responseIsCollection:!0,queryParams:u,apiVersion:this.usersApiVersion},!0).then(function(n){var i=n[0],u=n[1],r=n[2],t=r.getResponseHeader("X-MS-ContinuationToken");return{graphUsers:i,continuationToken:t?t.split(","):[]}})},t.prototype.getUser=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,routeValues:{userDescriptor:n},apiVersion:this.usersApiVersion})},t.prototype.deleteUser=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",routeValues:{userDescriptor:n},apiVersion:this.usersApiVersion})},t.prototype.createUser=function(n,t){var r={groupDescriptors:t&&t.join(",")};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"005e26ec-6b77-4e4f-a986-b3827bf241f5",resource:"Users",routeTemplate:"_apis/{area}/{resource}/{userDescriptor}",responseType:i.TypeInfo.GraphUser,queryParams:r,apiVersion:this.usersApiVersion,data:n})},t.prototype.getSubject=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1d44a2ac-4f8a-459e-83c2-1c92626fb9c6",resource:"Subjects",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.subjectsApiVersion})},t.prototype.lookupSubjects=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"4dd4d168-11f2-48c4-83e8-756fa0de027c",resource:"SubjectLookup",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.subjectLookupApiVersion,data:n})},t.prototype.getStorageKey=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"eb85f8cc-f0f6-4264-a5b1-ffe2e4d4801f",resource:"StorageKeys",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.storageKeysApiVersion})},t.prototype.updateScope=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",routeValues:{scopeDescriptor:n},customHeaders:{"Content-Type":"application/json-patch+json"},apiVersion:this.scopesApiVersion,data:t})},t.prototype.getScope=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",responseType:i.TypeInfo.GraphScope,routeValues:{scopeDescriptor:n},apiVersion:this.scopesApiVersion})},t.prototype.deleteScope=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",routeValues:{scopeDescriptor:n},apiVersion:this.scopesApiVersion})},t.prototype.createScope=function(n,t){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"21b5fea7-2513-41d0-af78-b8cdb0f328bb",resource:"Scopes",routeTemplate:"_apis/{area}/{resource}/{scopeDescriptor}",requestType:i.TypeInfo.GraphScopeCreationContext,responseType:i.TypeInfo.GraphScope,routeValues:{scopeDescriptor:t},apiVersion:this.scopesApiVersion,data:n})},t.prototype.traverseMemberships=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"5d59d874-746f-4f9b-9459-0e571f1ded8c",resource:"MembershipTraversals",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:this.membershipTraversalsApiVersion})},t.prototype.lookupMembershipTraversals=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"5d59d874-746f-4f9b-9459-0e571f1ded8c",resource:"MembershipTraversals",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",responseIsCollection:!0,queryParams:r,apiVersion:this.membershipTraversalsApiVersion,data:n})},t.prototype.getMembershipState=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1ffe5c94-1144-4191-907b-d0211cad36a8",resource:"MembershipStates",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},apiVersion:this.membershipStatesApiVersion})},t.prototype.listMemberships=function(n,t,i){var r={direction:t,depth:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"e34b6394-6b30-4435-94a9-409a5eef3e31",resource:"MembershipsBatch",routeTemplate:"_apis/{area}/Memberships/{subjectDescriptor}",responseIsCollection:!0,routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:this.membershipsBatchApiVersion})},t.prototype.removeMembership=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.getMembership=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.checkMembershipExistence=function(n,t){return this._beginRequest({httpMethod:"HEAD",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion}).then(function(){return!0},function(n){if(n.status===404)return!1;throw n;})},t.prototype.addMembership=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"Graph",locationId:"3fd2e6ca-fb30-443a-b579-95b19ed0934c",resource:"Memberships",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}/{containerDescriptor}",routeValues:{subjectDescriptor:n,containerDescriptor:t},apiVersion:this.membershipsApiVersion})},t.prototype.getMemberByDescriptor=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"b9af63a7-5db6-4af8-aae7-387f775ea9c6",resource:"Members",routeTemplate:"_apis/{area}/{resource}/{memberDescriptor}",routeValues:{memberDescriptor:n},apiVersion:this.membersApiVersion})},t.prototype.lookupMembers=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"3d74d524-ae3d-4d24-a9a7-f8a5cf82347a",resource:"MemberLookup",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.memberLookupApiVersion,data:n})},t.prototype.updateGroup=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},customHeaders:{"Content-Type":"application/json-patch+json"},apiVersion:this.groupsApiVersion,data:t})},t.prototype.listGroups=function(n,t,i){var r={scopeDescriptor:n,subjectTypes:t&&t.join(","),continuationToken:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",responseIsCollection:!0,queryParams:r,apiVersion:this.groupsApiVersion},!0).then(function(n){var i=n[0],u=n[1],r=n[2],t=r.getResponseHeader("X-MS-ContinuationToken");return{graphGroups:i,continuationToken:t?t.split(","):[]}})},t.prototype.getGroup=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},apiVersion:this.groupsApiVersion})},t.prototype.deleteGroup=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",routeValues:{groupDescriptor:n},apiVersion:this.groupsApiVersion})},t.prototype.createGroup=function(n,t,i){var r={scopeDescriptor:t,groupDescriptors:i&&i.join(",")};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"ebbe6af8-0b91-4c13-8cf1-777c14858188",resource:"Groups",routeTemplate:"_apis/{area}/{resource}/{groupDescriptor}",queryParams:r,apiVersion:this.groupsApiVersion,data:n})},t.prototype.getCachePolicies=function(){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"beb83272-b415-48e8-ac1e-a9b805760739",resource:"CachePolicies",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.cachePoliciesApiVersion})},t}(h);t.CommonMethods3_2To7_2=c;o=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getProviderInfo=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"1e377995-6fa2-4588-bd64-930186abdcfa",resource:"ProviderInfo",routeTemplate:"_apis/{area}/Users/{userDescriptor}/{resource}",routeValues:{userDescriptor:n},apiVersion:this.providerInfoApiVersion})},t}(c);t.CommonMethods4To7_2=o;l=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getFederatedProviderData=function(n,t,i){var r={providerName:t,versionHint:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"5dcd28d6-632d-477f-ac6b-398ea9fc2f71",resource:"FederatedProviderData",routeTemplate:"_apis/{area}/{resource}/{subjectDescriptor}",routeValues:{subjectDescriptor:n},queryParams:r,apiVersion:this.federatedProviderDataApiVersion})},t}(o);t.CommonMethods5To7_2=l;s=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.querySubjects=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"05942c89-006a-48ce-bb79-baeb8abf99c6",resource:"SubjectQuery",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.subjectQueryApiVersion,data:n})},t.prototype.requestAccess=function(n){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"Graph",locationId:"8d54bf92-8c99-47f2-9972-b21341f1722e",resource:"RequestAccess",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.requestAccessApiVersion,data:n})},t.prototype.setAvatar=function(n,t){return this._beginRequest({httpMethod:"PUT",httpResponseType:"html",area:"Graph",locationId:"801eaf9c-0585-4be8-9cdb-b0efa074de91",resource:"Avatars",routeTemplate:"_apis/{area}/Subjects/{subjectDescriptor}/{resource}",requestType:r.TypeInfo.Avatar,routeValues:{subjectDescriptor:t},apiVersion:this.avatarsApiVersion,data:n})},t.prototype.getAvatar=function(n,t,i){var u={size:t,format:i};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"801eaf9c-0585-4be8-9cdb-b0efa074de91",resource:"Avatars",routeTemplate:"_apis/{area}/Subjects/{subjectDescriptor}/{resource}",responseType:r.TypeInfo.Avatar,routeValues:{subjectDescriptor:n},queryParams:u,apiVersion:this.avatarsApiVersion})},t.prototype.deleteAvatar=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"801eaf9c-0585-4be8-9cdb-b0efa074de91",resource:"Avatars",routeTemplate:"_apis/{area}/Subjects/{subjectDescriptor}/{resource}",routeValues:{subjectDescriptor:n},apiVersion:this.avatarsApiVersion})},t}(l);t.CommonMethods5_1To7_2=s;e=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.translate=function(n,t){var i={masterId:n,localId:t};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"9cacc4da-06e3-474a-a1fa-604dd34a2fa2",resource:"IdentityTranslation",routeTemplate:"_apis/{area}/{resource}",queryParams:i,apiVersion:this.identityTranslationApiVersion})},t}(s);t.CommonMethods6To7_2=e;a=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.updateServicePrincipal=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"Graph",locationId:"e1dbb0ae-49cb-4532-95a1-86cd89cfcab4",resource:"ServicePrincipals",routeTemplate:"_apis/{area}/{resource}/{servicePrincipalDescriptor}",responseType:i.TypeInfo.GraphServicePrincipal,routeValues:{servicePrincipalDescriptor:t},apiVersion:this.servicePrincipalsApiVersion,data:n})},t.prototype.listServicePrincipals=function(n,t){var r={continuationToken:n,scopeDescriptor:t};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"e1dbb0ae-49cb-4532-95a1-86cd89cfcab4",resource:"ServicePrincipals",routeTemplate:"_apis/{area}/{resource}/{servicePrincipalDescriptor}",responseType:i.TypeInfo.GraphServicePrincipal,responseIsCollection:!0,queryParams:r,apiVersion:this.servicePrincipalsApiVersion},!0).then(function(n){var i=n[0],u=n[1],r=n[2],t=r.getResponseHeader("X-MS-ContinuationToken");return{graphServicePrincipals:i,continuationToken:t?t.split(","):[]}})},t.prototype.getServicePrincipal=function(n){return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"e1dbb0ae-49cb-4532-95a1-86cd89cfcab4",resource:"ServicePrincipals",routeTemplate:"_apis/{area}/{resource}/{servicePrincipalDescriptor}",responseType:i.TypeInfo.GraphServicePrincipal,routeValues:{servicePrincipalDescriptor:n},apiVersion:this.servicePrincipalsApiVersion})},t.prototype.deleteServicePrincipal=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Graph",locationId:"e1dbb0ae-49cb-4532-95a1-86cd89cfcab4",resource:"ServicePrincipals",routeTemplate:"_apis/{area}/{resource}/{servicePrincipalDescriptor}",routeValues:{servicePrincipalDescriptor:n},apiVersion:this.servicePrincipalsApiVersion})},t.prototype.createServicePrincipal=function(n,t){var r={groupDescriptors:t&&t.join(",")};return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"e1dbb0ae-49cb-4532-95a1-86cd89cfcab4",resource:"ServicePrincipals",routeTemplate:"_apis/{area}/{resource}/{servicePrincipalDescriptor}",responseType:i.TypeInfo.GraphServicePrincipal,queryParams:r,apiVersion:this.servicePrincipalsApiVersion,data:n})},t.prototype.resolve=function(n){return this._beginRequest({httpMethod:"POST",area:"Graph",locationId:"2f0cae3a-74a3-4c40-a13b-974889698e6b",resource:"ResolveDisconnectedUsers",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.resolveDisconnectedUsersApiVersion,data:n})},t.prototype.listMembers=function(n,t,i,r,u){var f={continuationToken:n,subjectTypes:t&&t.join(","),subjectKinds:i&&i.join(","),metaTypes:r&&r.join(","),scopeDescriptor:u};return this._beginRequest({httpMethod:"GET",area:"Graph",locationId:"8b9ecdb2-b752-485a-8418-cc15cf12ee07",resource:"Members",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,queryParams:f,apiVersion:this.membersApiVersion_8b9ecdb2},!0).then(function(n){var i=n[0],u=n[1],r=n[2],t=r.getResponseHeader("X-MS-ContinuationToken");return{graphMembers:i,continuationToken:t?t.split(","):[]}})},t}(e);t.CommonMethods7_1To7_2=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.cachePoliciesApiVersion=r.descriptorsApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.providerInfoApiVersion=r.requestAccessApiVersion=r.resolveDisconnectedUsersApiVersion=r.scopesApiVersion=r.servicePrincipalsApiVersion=r.storageKeysApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="7.2-preview.1",r.membersApiVersion=r.membersApiVersion_8b9ecdb2="7.2-preview.2",r}return __extends(t,n),t}(a);t.GraphHttpClient7_2=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="7.1",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.resolveDisconnectedUsersApiVersion=r.scopesApiVersion=r.servicePrincipalsApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="7.1-preview.1",r.membersApiVersion=r.membersApiVersion_8b9ecdb2="7.1-preview.2",r}return __extends(t,n),t}(a);t.GraphHttpClient7_1=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="7.0",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="7.0-preview.1",r}return __extends(t,n),t}(e);t.GraphHttpClient7=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="6.1",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="6.1-preview.1",r}return __extends(t,n),t}(e);t.GraphHttpClient6_1=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="6.0",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.identityTranslationApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="6.0-preview.1",r}return __extends(t,n),t}(e);t.GraphHttpClient6=b;k=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="5.2",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="5.2-preview.1",r}return __extends(t,n),t}(s);t.GraphHttpClient5_2=k;d=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.avatarsApiVersion=r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="5.1",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.requestAccessApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectQueryApiVersion=r.subjectsApiVersion=r.usersApiVersion="5.1-preview.1",r}return __extends(t,n),t}(s);t.GraphHttpClient5_1=d;g=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="5.0",r.cachePoliciesApiVersion=r.federatedProviderDataApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="5.0-preview.1",r}return __extends(t,n),t}(l);t.GraphHttpClient5=g;nt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="4.1",r.cachePoliciesApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="4.1-preview.1",r}return __extends(t,n),t}(o);t.GraphHttpClient4_1=nt;tt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion=r.providerInfoApiVersion=r.storageKeysApiVersion="4.0",r.cachePoliciesApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="4.0-preview.1",r}return __extends(t,n),t}(o);t.GraphHttpClient4=tt;it=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion=r.storageKeysApiVersion="3.2",r.cachePoliciesApiVersion=r.groupsApiVersion=r.memberLookupApiVersion=r.membersApiVersion=r.membershipsApiVersion=r.membershipsBatchApiVersion=r.membershipStatesApiVersion=r.membershipTraversalsApiVersion=r.scopesApiVersion=r.subjectLookupApiVersion=r.subjectsApiVersion=r.usersApiVersion="3.2-preview.1",r}return __extends(t,n),t}(c);t.GraphHttpClient3_2=it;rt=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.descriptorsApiVersion="3.1",r}return __extends(t,n),t}(h);t.GraphHttpClient3_1=rt;ft=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(v);t.GraphHttpClient=ft;ut={"7.2":v,"7.1":y,"7.0":p,"6.1":w,"6.0":b,"5.2":k,"5.1":d,"5.0":g,"4.1":nt,"4.0":tt,"3.2":it,"3.1":rt};t.getClient=et});

define("VSS/Identities/Picker/Common",["require","exports"],function(n,t){var r,i;Object.defineProperty(t,"__esModule",{value:!0});t.CommonHelpers=t.FilterByScope=void 0;r=function(){function n(n,t){this.filterByAncestorEntityIds=n||[];this.filterByEntityIds=t||[]}return n.GetHashCode=function(t){var r=i._hashSeed,e,u,f,o;if(t==null)return r;for(e=t.filterByAncestorEntityIds.sort().concat([n._hashSeparator],t.filterByEntityIds.sort()),u=0,f=e;u<f.length;u++)o=f[u],r=r*i._stringListHashPrime+i.GetStringHashCode(o),r=r&r;return r},n.isFilterByScopeEmpty=function(n){return n&&n.filterByAncestorEntityIds.length==0&&n.filterByEntityIds.length==0},n._hashSeparator="@",n}();t.FilterByScope=r;i=function(){function n(){}return n.GetStringHashCode=function(t){var i=n._hashSeed,r;if(t)for(t=t.trim().toLowerCase(),r=0;r<t.length;r++)i=i*n._stringHashPrime+t.charCodeAt(r),i=i&i;return i},n.GetStringListHashCode=function(t){var i=n._hashSeed,r;if(t)for(r in t)i=i*n._stringListHashPrime+n.GetStringHashCode(r),i=i&i;return i},n._hashSeed=0,n._stringListHashPrime=31,n._stringHashPrime=37,n}();t.CommonHelpers=i});

define("VSS/Identities/Picker/Constants",["require","exports"],function(n,t){var i,r,u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.diacriticsRemovalMap=t.PromiseResultStatus=t.ConsumerId=t.PrefixType=t.TelemetryProperties=t.Telemetry=void 0;i=function(){function n(){}return n.Area="IdentityPicker",n.Scenario_GetMru_Rtt="IdentityPicker_MruService_GetMru_Rtt",n.Scenario_AddMru_Rtt="IdentityPicker_MruService_AddMru_Rtt",n.Scenario_RemoveMru_Rtt="IdentityPicker_MruService_RemoveMru_Rtt",n.Scenario_GetDirectory_Rtt="IdentityPicker_IdentityService_GetDirectory_Rtt",n.Scenario_GetConnections_Rtt="IdentityPicker_IdentityService_GetConnections_Rtt",n.Scenario_GetUserConnections_Rtt="IdentityPicker_IdentityService_GetUserConnections_Rtt",n.Scenario_PagingQuerySplit="IdentityPicker_PagingQuerySplit",n.Feature_DropdownControl="DropdownControl",n.Feature_SearchControl="SearchControl",n.Feature_IdCardDialogControl="IdCardDialogControl",n.Feature_DisplayControl="DisplayControl",n.Feature_TwoLayerCache="TwoLayerCache",n.Feature_RequestCache="RequestCache",n.Feature_Select_Mru_NoPrefix="Select_Mru_NoPrefix",n.Feature_Select_Mru_Prefix="Select_Mru_Prefix",n.Feature_Select_Mru_Dir="Select_Mru_Dir",n.Feature_Select_Dir="Select_Dir",n.Feature_Click_IdCard="Click_IdCard",n.Feature_Click_Remove_Mru="Click_Remove_Mru",n.Feature_ApiExceptions="Api_Exceptions",n}();t.Telemetry=i;r=function(){function n(){}return n.prefixType="p_prefixType",n.prefixLength="p_prefixLength",n.userId="p_userId",n.accountProjectCollectionTeam="p_accountProjectCollectionTeam",n.identityTypes="p_identityTypes",n.operationScopes="p_operationScopes",n.maxResults="p_maxResults",n.minResults="p_minResults",n.consumerId="p_consumerId",n.extensionId="p_extensionId",n.entityId="p_entityId",n.exceptionData="p_exceptionData",n.isMru="p_isMru",n.isNonMaterialized="p_isNonMaterialized",n.isTwoLayerCacheHit="p_isTwoLayerCacheHit",n.isDirSearchUid="p_isDirSearchUid",n}();t.TelemetryProperties=r;u=function(){function n(){}return n.SignInAddress="signInAddress",n.DomainSamAccountName="domainSamAccountName",n.EntityId="entityId",n.Vsid="vsid",n.ScopedPrefix="scopedPrefix",n.StringPrefix="stringPrefix",n}();t.PrefixType=u;f=function(){function n(){}return n.UnknownConsumer="UNKNOWN",n}();t.ConsumerId=f;e=function(){function n(){}return n.Fulfilled="fulfilled",n.Rejected="rejected",n}();t.PromiseResultStatus=e;t.diacriticsRemovalMap={A:"A","\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"A","\ua738":"AV","\ua73a":"AV","\ua73c":"AY",B:"B","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B",C:"C","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C",D:"D","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz",E:"E","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E",F:"F","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F",G:"G","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G",H:"H","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H",I:"I","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I",J:"J","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J",K:"K","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K",L:"L","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj",M:"M","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M",N:"N","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj",O:"O","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU",P:"P","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P",Q:"Q","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q",R:"R","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R",S:"S","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S",T:"T","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ",U:"U","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U",V:"V","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY",W:"W","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W",X:"X","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X",Y:"Y","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y",Z:"Z","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z",a:"a","\u24d0":"a","\uff41":"a","\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay",b:"b","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b",c:"c","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c",d:"d","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz",e:"e","\u24d4":"e","\uff45":"e","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e",f:"f","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f",g:"g","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g",h:"h","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv",i:"i","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i",j:"j","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j",k:"k","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k",l:"l","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj",m:"m","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m",n:"n","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj",o:"o","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo",p:"p","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p",q:"q","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q",r:"r","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r",s:"s","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",t:"t","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz",u:"u","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u",v:"v","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy",w:"w","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w",x:"x","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x",y:"y","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y",z:"z","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"}});

define("VSS/Identities/Picker/RestClient",["require","exports","VSS/WebApi/Constants","VSS/WebApi/RestClient"],function(n,t,i,r){var u,f;Object.defineProperty(t,"__esModule",{value:!0});t.CommonIdentityPickerHttpClient=t.AbstractIdentityPickerHttpClient=void 0;u=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.beginGetIdentities=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetIdentities"};},t.prototype.beginGetIdentityImageLocation=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetImageLocation"};},t.prototype.beginGetConnections=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetConnections"};},t.prototype.beginGetIdentityFeatureMru=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetMru"};},t.prototype.beginPatchIdentityFeatureMru=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginPatchMru"};},t}(r.VssHttpClient);t.AbstractIdentityPickerHttpClient=u;f=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.beginGetIdentities=function(n){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentitiesLocationId,httpMethod:"POST",data:n})},t.prototype.beginGetIdentityImageLocation=function(n){var r=this,u={objectId:n};return t._identityImageLocation||(t._identityImageLocation=this._beginGetLocation(i.CommonIdentityPickerResourceIds.ServiceArea,i.CommonIdentityPickerResourceIds.IdentityAvatarLocationId)),t._identityImageLocation.then(function(n){return r.getRequestUrl(n.routeTemplate,n.area,n.resourceName,u,{})})},t.prototype.beginGetConnections=function(n,t){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityConnectionsLocationId,httpMethod:"GET",routeValues:{objectId:n},data:t})},t.prototype.beginGetIdentityFeatureMru=function(n,t,r){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityFeatureMruLocationId,httpMethod:"GET",routeValues:{objectId:n,featureId:t},data:r})},t.prototype.beginPatchIdentityFeatureMru=function(n,t,r){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityFeatureMruLocationId,httpMethod:"PATCH",routeValues:{objectId:n,featureId:t},data:r})},t._identityImageLocation=null,t}(u);t.CommonIdentityPickerHttpClient=f});

define("VSS/Identities/Picker/Cache",["require","exports","VSS/Utils/Core","VSS/Utils/String","VSS/Identities/Picker/Constants","VSS/Telemetry/Services"],function(n,t,i,r,u,f){var s,e,o,h,c,l;Object.defineProperty(t,"__esModule",{value:!0});t.TwoLayerCache=t.RequestCache=t.HashCache=t.CacheableTypes=void 0;s=function(){function n(){}return n.guessQueryTokenType=function(t){return r.isGuid(t)&&!r.isEmptyGuid(t)?e.Guid:n._isValidEmail(t)?e.Email:n._isPotentialEntityId(t)?e.UniqueIdentifier:e.Unknown},n._isPotentialEntityId=function(n){var t=n.split(".");return t.length==6&&r.isGuid(t[5])&&!r.isEmptyGuid(t[5])?!0:!1},n._isValidEmail=function(n){var t=n.split("@");return t.length===2&&t[0].length>=1&&t[1].length>=1?!0:!1},n}(),function(n){n[n.Unknown=0]="Unknown";n[n.UniqueIdentifier=1]="UniqueIdentifier";n[n.Guid=2]="Guid";n[n.Email=3]="Email"}(e=t.CacheableTypes||(t.CacheableTypes={}));o=function(){function n(){this._cache={};this._config={expirationIntervalS:86400}}return n.prototype.get=function(n){if(!n)throw{message:"invalid (null/undefined) key",parameter:"key",source:"HashCache add"};if(!this._cache.hasOwnProperty(n)||!this._cache[n])return null;var t=this._cache[n];return(new Date).getTime()/1e3>t.expiryTimeS?(delete this._cache[n],null):this._cache[n].item},n.prototype.set=function(n,t){if(!n)throw{message:"invalid (null/undefined) key",parameter:"key",source:"HashCache add"};var i={item:t,expiryTimeS:(new Date).getTime()/1e3+this._config.expirationIntervalS};this._cache[n]=i},n.prototype.clear=function(){var n=this._getKeys(),t;if(n&&n.length!=0)for(t in n)delete this._cache[t]},n.prototype.configure=function(n){this._config=n},n.prototype._getKeys=function(){return Object.keys(this._cache)},n}();t.HashCache=o;h=function(){function n(){this._config={delayIntervalMS:n._defaultDelayIntervalMS};this._cache=new o;this._cache.configure({expirationIntervalS:this._config.delayIntervalMS/1e3})}return n.prototype.getPromise=function(n){this._setOrResetTimer();var t=this._cache.get(n);return t?t:null},n.prototype.setPromise=function(n,t){this._setOrResetTimer();this._cache.set(n,t)},n.prototype.configure=function(n){this._config=n;this._cache.configure({expirationIntervalS:this._config.delayIntervalMS/1e3})},n.prototype._setOrResetTimer=function(){var n=this;this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null);this._timeoutHandle=window.setTimeout(i.delegate(this,function(){n._cache.clear()}),this._config.delayIntervalMS)},n._defaultDelayIntervalMS=6e4,n}();t.RequestCache=h;c=function(){function n(n){this._redirectors={};this.configure(n);this._objectCache=new o}return n.prototype.configure=function(n){if(!n||!n.getUniqueIdentifier)throw{source:"TwoLayerCache configure",message:"missing config or missing the required getUniqueIdentifier property",parameter:"config"};this._config=n},n.prototype.addRedirector=function(n){if(n===null||n===undefined)throw{source:"TwoLayerCache addRedirector",message:"invalid null/undefined cacheType",parameter:"cacheType"};if(this._redirectors.hasOwnProperty(n.toString()))throw{source:"TwoLayerCache addRedirector",message:"redirector with supplied cacheType already exists: currently at most one redirector supported for a CacheType",parameter:"cacheType"};this._redirectors[n.toString()]=new o},n.prototype.get=function(n,t){return this._queryCache(n,t)},n.prototype.set=function(n,t,i){var u,r,f;if(u=i?i:s.guessQueryTokenType(n).toString(),r=this._config.getUniqueIdentifier(t),!r)throw{source:"TwoLayerCache set",message:"could not retrieve a valid unique identifier from the value"};if(u==e.UniqueIdentifier.toString()||r==n||this._redirectors.hasOwnProperty(u.toString())){if(u==e.UniqueIdentifier.toString()||r==n){this._objectCache.set(n,t);return}f=this._redirectors[u];f.set(n,r);this._objectCache.set(r,t);return}},n.prototype._queryCache=function(n,t){var i,r;return i=t?t:s.guessQueryTokenType(n).toString(),i==e.UniqueIdentifier.toString()?this._objectCache.get(n):this._redirectors.hasOwnProperty(i.toString())?(r=this._redirectors[i].get(n),!r)?null:this._objectCache.get(r):this._objectCache.get(n)},n}();t.TwoLayerCache=c;l=function(){function n(){}return n.traceCacheHit=function(n,t){var r=n!=null,i={};i[u.TelemetryProperties.isTwoLayerCacheHit]=r;f.publishEvent(new f.TelemetryEventData(u.Telemetry.Area,t,i))},n}()});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};define("VSS/Identities/Picker/Services",["require","exports","VSS/Context","VSS/Locations","VSS/Performance","VSS/Service","VSS/Telemetry/Services","VSS/User/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Identities/Picker/RestClient","VSS/Identities/Picker/Cache","VSS/Identities/Picker/Common","VSS/Identities/Picker/Constants","q","VSS/LWP"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var b,w,k,d;Object.defineProperty(t,"__esModule",{value:!0});t.MruService=t.IdentityService=t.ServiceHelpers=void 0;b=s.delegate;w=function(){function n(){}return n.getOperationScopeList=function(n){var t=[];return n.IMS&&t.push("ims"),n.Source&&t.push("source"),n.AAD&&t.push("aad"),n.AD&&t.push("ad"),n.WMD&&t.push("wmd"),n.GHB&&t.push("ghb"),t},n.getQueryTypeHint=function(n){var t=void 0;return n?(n.UID&&(t="uid"),t):t},n.getIdentityTypeList=function(t){var i=[];return t.User&&i.push(n.UserEntity),t.Group&&i.push(n.GroupEntity),t.ServicePrincipal&&i.push(n.ServicePrincipalEntity),i},n.getConnectionTypeList=function(n){var t=[];return n.successors?t.push("successors"):n.successors&&t.push("predecessors"),n.managers&&t.push("managers"),n.directReports&&t.push("directReports"),t},n.getDefaultIdentityImage=function(t){return t.entityType.toLowerCase().trim()==n.GroupEntity?t.originDirectory.toLowerCase().trim()==n.VisualStudioDirectory?n.DefaultVsoGroupImage:n.DefaultRemoteGroupImage:n.DefaultUserImage},n.getDistinct=function(n){return n.filter(function(n,t,i){return i.indexOf(n)==t})},n.isAuthenticatedMember=function(){return o.getService().hasClaim(o.UserClaims.Member)},n.getPrefixTypeForTelemetry=function(n){var t,r;return h.isGuid(n)?v.PrefixType.Vsid:(t=n.indexOf("@"),t&&n.indexOf(".",t))?v.PrefixType.SignInAddress:(r=n.indexOf("\\"),r&&r==n.lastIndexOf("\\"))?i.getPageContext().webAccessConfiguration.isHosted?v.PrefixType.ScopedPrefix:v.PrefixType.DomainSamAccountName:n.startsWith("vss.ds.v1")?v.PrefixType.EntityId:v.PrefixType.StringPrefix},n.addScenarioProperties=function(t,i,r,u,f,e){return u&&(i[v.TelemetryProperties.identityTypes]=n.getIdentityTypeList(u)),r&&(i[v.TelemetryProperties.operationScopes]=n.getOperationScopeList(r)),f&&(i[v.TelemetryProperties.maxResults]=f.maxResults,i[v.TelemetryProperties.minResults]=f.minResults),i[v.TelemetryProperties.consumerId]=e?e.consumerId:v.ConsumerId.UnknownConsumer,i[v.TelemetryProperties.userId]=t&&t.getWebContext()&&t.getWebContext().user?t.getWebContext().user.id:"",i[v.TelemetryProperties.accountProjectCollectionTeam]=n._getHostMetadata(t),i},n._getHostMetadata=function(n){var t="",i="",r="",u="";return n&&n.getWebContext()&&(t=n.getWebContext().account?n.getWebContext().account.name:"",i=n.getWebContext().collection?n.getWebContext().collection.name:"",r=n.getWebContext().project?n.getWebContext().project.name:"",u=n.getWebContext().team?n.getWebContext().team.name:""),"account["+t+"]/collection["+i+"]/project["+r+"]/team["+u+"]"},n._defaultProperties=["DisplayName","IsMru","ScopeName","SamAccountName","Active","SubjectDescriptor"],n._defaultUserProperties=["Department","JobTitle","Mail","MailNickname","PhysicalDeliveryOfficeName","SignInAddress","Surname","Guest","TelephoneNumber"],n._defaultGroupProperties=["Description"],n.DefaultUserImage=r.urlHelper.getVersionedContentUrl("ip-content-user-default.png"),n.DefaultVsoGroupImage=r.urlHelper.getVersionedContentUrl("ip-content-vso-group-default.png"),n.DefaultRemoteGroupImage=r.urlHelper.getVersionedContentUrl("ip-content-aad-group-default.png"),n.VisualStudioDirectory="vsd",n.AzureActiveDirectory="aad",n.ActiveDirectory="ad",n.WindowsMachineDirectory="wmd",n.SourceDirectory="src",n.GitHubDirectory="ghb",n.UserEntity="user",n.GroupEntity="group",n.ServicePrincipalEntity="servicePrincipal",n.OptionsMinResultsKey="MinResults",n.OptionsMaxResultsKey="MaxResults",n.ExtensionData_ExtensionIdKey="ExtensionId",n.ExtensionData_ProjectScopeNameKey="ProjectScopeName",n.ExtensionData_CollectionScopeNameKey="CollectionScopeName",n.ExtensionData_ConstraintListKey="Constraints",n.ExtensionData_NoServiceIdentities="NoServiceIdentities",n.GetIdentities_Prefix_Separator=";",n}();t.ServiceHelpers=w;k=function(n){function t(){var i=__construct(this,n,[]),r,u,f;for(r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return u={getUniqueIdentifier:function(n){return n&&n.identities&&n.identities.length==1?n.identities[0].entityId:null}},i._qtrCache=new l.TwoLayerCache(u),i._qtrCache.addRedirector(l.CacheableTypes.Email),i._qtrCache.addRedirector(l.CacheableTypes.Guid),i._qtrRequestAggregator=new l.RequestCache,i._entityImageRequestAggregator=new l.RequestCache,f=p.getLWPService("IVssContributionService"),i.identitySearchService=t.resolveIdentitySearchService(),i}return __extends(t,n),t.resolveIdentitySearchService=function(){return __awaiter(this,void 0,void 0,function(){var i,r,n,f,t,e,o,u,s,h;return __generator(this,function(c){switch(c.label){case 0:c.trys.push([0,7,,8]);i=p.getLWPService("IVssContributionService");r=i.getContributionsByType("ms.vss-features.preferred-identity-search-service-name");n=[];for(f in r)n.push(f);t=0;c.label=1;case 1:if(!(t<n.length))return[3,6];e=n[t];o=r[e];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,i.getService(o.serviceId)];case 3:return(u=c.sent(),u)?[2,u]:[3,5];case 4:return s=c.sent(),[3,5];case 5:return t++,[3,1];case 6:return[3,8];case 7:return h=c.sent(),[3,8];case 8:return[2,undefined]}})})},t.prototype.getIdentities=function(n,i,r,f,o,s){var tt=this,k,p,h,rt,ct,ft,lt,g,at,et,vt,yt,l,ut,it,st,bt,nt;if(!i){it={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw it;}if(!r){it={source:"IdentityService",parameter:"identityType",message:"identityType null or undefined"};throw it;}if(k=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_GetDirectory_Rtt),p={},p=w.addScenarioProperties(this,p,i,r,f,s),p[v.TelemetryProperties.prefixType]=w.getPrefixTypeForTelemetry(n),p[v.TelemetryProperties.prefixLength]=n.length,p[v.TelemetryProperties.isDirSearchUid]=Boolean(o&&o.UID),h={},rt={},!n)return rt;for(l=[],ct=n.split(w.GetIdentities_Prefix_Separator),ft=0;ft<ct.length;ft++)lt=ct[ft].trim(),lt&&l.push(lt);l=w.getDistinct(l);l.forEach(function(n){h[n.toLowerCase()]=y.defer();rt[n.toLowerCase()]=h[n.toLowerCase()].promise});for(g in h){if(at=t.getUniqueRequestString(g,i,r,f?f.extensionData:null,f?f.getFilterByScope():null),et=this._qtrCache.get(at),et){et.queryToken=g;h[g].resolve(et);l=t._removeQueryToken(g,l);continue}if(vt=this._qtrRequestAggregator.getPromise(at),vt){yt=b(this,function(n){vt.then(b(tt,function(t){h&&h[n]&&h[n].resolve(t)}),b(tt,function(t){h&&h[n]&&h[n].reject(t)}))});yt(g);l=t._removeQueryToken(g,l);continue}}if(l.length==0)return rt;for(ut=0;ut<l.length;ut++)this._qtrRequestAggregator.setPromise(t.getUniqueRequestString(l[ut],i,r,f?f.extensionData:null,f?f.getFilterByScope():null),h[l[ut].toLowerCase()].promise);n=l.join(w.GetIdentities_Prefix_Separator);var pt=w.getIdentityTypeList(r),wt=w.getOperationScopeList(i),ot=w.getQueryTypeHint(o);if(pt.length==0||wt.length==0){it={source:"IdentityService",parameter:"identityType or operationScope",message:"queried identityType or operationScope is/are unsupported"};throw it;}f&&f.httpClient?st=f.httpClient:(bt=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),st=bt);var kt=pt,dt=wt,d={};f&&f.minResults&&(d[w.OptionsMinResultsKey]=f.minResults);f&&f.maxResults&&(d[w.OptionsMaxResultsKey]=f.maxResults);f&&f.extensionData&&(d[w.ExtensionData_ExtensionIdKey]=f.extensionData.extensionId,d[w.ExtensionData_ProjectScopeNameKey]=f.extensionData.projectScopeName,d[w.ExtensionData_CollectionScopeNameKey]=f.extensionData.collectionScopeName,d[w.ExtensionData_ConstraintListKey]=f.extensionData.constraints);nt=w._defaultProperties;r.User&&(nt=nt.concat(w._defaultUserProperties));r.Group&&(nt=nt.concat(w._defaultGroupProperties));var ni=function(n){if(n.results.length<1)return u;var s=function(n){if(k&&k.addSplitTiming(v.Telemetry.Scenario_PagingQuerySplit+"_End_"+n&&n.results[0]?a.CommonHelpers.GetStringHashCode(n.results[0].queryToken).toString():""),n&&n.results.length!=0){n.results[0].identities.forEach(function(n){n.image||(n.image=w.getDefaultIdentityImage(n))});tt._cacheQueryTokenResult(n.results[0],t.getUniqueRequestString(n.results[0].queryToken.trim(),i,r,f?f.extensionData:null,f?f.getFilterByScope():null));var u=n.results[0].queryToken;u&&h[u.toLowerCase().trim()]&&h[u.toLowerCase().trim()].resolve(n.results[0])}},o=function(n){for(var i in h)h[i].reject(n);p[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,p))},u,c=function(n){var e,c,l;n.identities&&n.identities.length==0&&n.pagingToken?(e=f&&f.getFilterByScope(),c={query:n.queryToken,identityTypes:kt,operationScopes:dt,properties:nt,filterByAncestorEntityIds:e?e.filterByAncestorEntityIds:[],filterByEntityIds:e?e.filterByEntityIds:[],pagingToken:n.pagingToken,options:d},ot&&(c.queryTypeHint=ot),k.addSplitTiming(v.Telemetry.Scenario_PagingQuerySplit+"_Start_"+a.CommonHelpers.GetStringHashCode(n.queryToken).toString()),l=tt.fetchIdentitiesWithInjectionsAsync(st,c).then(s,o),u&&u.push(l)):n.identities&&n.identities.length>=0?(n.identities.forEach(function(n){n.image||(n.image=w.getDefaultIdentityImage(n))}),tt._cacheQueryTokenResult(n,t.getUniqueRequestString(n.queryToken.trim(),i,r,f?f.extensionData:null,f?f.getFilterByScope():null)),n.queryToken&&h[n.queryToken.toLowerCase().trim()]&&h[n.queryToken.toLowerCase().trim()].resolve(n)):o()};n.results.forEach(c,tt);u&&u.length>0?y.allSettled(u).then(function(){k.addData(p);k.end()},function(){k.addData(p);k.end()}):(k.addData(p),k.end())},ti=function(n){for(var i in h)h[i].reject(n);p[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,p));k.end()},ht=f&&f.getFilterByScope(),gt={query:n,identityTypes:kt,operationScopes:dt,properties:nt,filterByAncestorEntityIds:ht?ht.filterByAncestorEntityIds:[],filterByEntityIds:ht?ht.filterByEntityIds:[],options:d};return ot&&(gt.queryTypeHint=ot),this.fetchIdentitiesWithInjectionsAsync(st,gt).then(ni,ti),rt},t.prototype.fetchIdentitiesWithInjectionsAsync=function(n,t){return __awaiter(this,void 0,void 0,function(){var i,r,u;return __generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this.identitySearchService];case 1:return i=f.sent(),i&&(r=i.getScopeId(),r&&(t.operationScopes=["ims"],t.options=__assign({ScopeId:r},t.options))),[3,3];case 2:return u=f.sent(),[3,3];case 3:return[2,n.beginGetIdentities(t)]}})})},t.prototype.getIdentityImages=function(n,i){var h=this,l,r,e,o,a,f,s,v,u;if(!n||n.length<=0){l={source:"IdentityService",parameter:"identities",message:"identities null or undefined or empty list"};throw l;}r={};e={};i&&i.httpClient?o=i.httpClient:(a=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),o=a);u=t._getEntityIdsAsQueryTokens(n);u.forEach(function(n){r[n]=y.defer();e[n]=r[n].promise});for(f in r)if(s=this._entityImageRequestAggregator.getPromise(f),s){v=b(this,function(n){s.then(b(h,function(t){r&&r[n]&&r[n].resolve(t)}),b(h,function(t){r&&r[n]&&r[n].reject(t)}))});v(f);u=t._removeQueryToken(f,u);continue}else this._entityImageRequestAggregator.setPromise(f,r[f].promise);return u.length==0?e:(u.forEach(function(n){var t=function(t){var i;t&&t.trim()&&(i={},i[n]=t.trim(),r[n].resolve(i))};o.beginGetIdentityImageLocation(n).then(t)}),e)},t.prototype.getIdentityConnections=function(n,i,r,f,o,s,h){var l,p,a,b,tt,k,it;if(!w.isAuthenticatedMember())return null;if(!n){l={source:"IdentityService",parameter:"identity",message:"identity null or undefined or empty list"};throw l;}if(!i){l={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw l;}if(!r){l={source:"IdentityService",parameter:"identityType",message:"identityType null or undefined"};throw l;}if(!f){l={source:"IdentityService",parameter:"connectionType",message:"connectionType null or undefined"};throw l;}var rt=h?h:1,d=w.getIdentityTypeList(r),g=w.getOperationScopeList(i),nt=w.getConnectionTypeList(f);if(d.length==0||g.length==0||nt.length==0){l={source:"IdentityService",parameter:"identityType or operationScope or connectionType",message:"queried identityType or operationScope or connectionType is/are unsupported"};throw l;}p=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_GetConnections_Rtt);a={};a=w.addScenarioProperties(this,a,i,r,o,s);a[v.TelemetryProperties.entityId]=n.entityId;b=y.defer();tt=b.promise;o&&o.httpClient?k=o.httpClient:(it=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),k=it);var ut=w._defaultProperties.concat(w._defaultUserProperties).concat(w._defaultGroupProperties).concat("Manager"),ft={identityTypes:d,operationScopes:g,connectionTypes:nt,depth:rt,properties:ut},et=function(n){n&&n.successors&&n.successors.forEach(function(n){n.image||(n.image=w.getDefaultIdentityImage(n))});p.addData(a);p.end();b.resolve(n)},ot=function(n){a[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);p.addData(a);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,a));p.end();b.reject(n)};return k.beginGetConnections(n.entityId,ft).then(et,ot),tt},t._getEntityIdsAsQueryTokens=function(n){var t=[];return n.forEach(function(n){(n.entityType.trim().toLowerCase()==w.UserEntity||n.entityType.trim().toLowerCase()==w.GroupEntity)&&t.push(n.entityId)}),t},t.prototype._cacheQueryTokenResult=function(n,t){n.queryToken&&n.queryToken.trim()&&n.identities&&n.identities.length==1&&t&&this._qtrCache.set(t,n)},t._removeQueryToken=function(n,t){var i=-1;return t.some(function(t,r){if(n==t.toLowerCase())return i=r,!0}),i>=0&&t.splice(i,1),t},t._getExceptionData=function(n){return n?n.serverError?n.serverError.typeName:n.name:""},t.getUniqueRequestString=function(n,i,r,u,f){var e=w.getIdentityTypeList(r).join(","),o=w.getOperationScopeList(i).join(",");return(n+";"+o+";"+e+";"+t.getExtensionUniqueRequestString(u)+";"+a.FilterByScope.GetHashCode(f).toString()).trim().toLowerCase()},t.getExtensionUniqueRequestString=function(n){return n?a.CommonHelpers.GetStringHashCode(n.collectionScopeName).toString()+a.CommonHelpers.GetStringHashCode(n.projectScopeName).toString()+a.CommonHelpers.GetStringHashCode(n.extensionId).toString()+a.CommonHelpers.GetStringListHashCode(n.constraints).toString():""},t.MIN_RESULTS=40,t.MAX_RESULTS=40,t}(f.VssService);t.IdentityService=k;d=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getMruIdentities=function(n,i,r,f,o){var l,h,p,s,a,k,b,d;if(!w.isAuthenticatedMember())return null;if(!n){s={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw s;}if(i&&i.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){s={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw s;}if(i="me",r&&r.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){s={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw s;}if(r="common",l=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_GetMru_Rtt),h={},h=w.addScenarioProperties(this,h,null,null,f,o),p=w.getOperationScopeList(n),p.length==0){s={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw s;}a=y.defer();k=a.promise;f&&f.httpClient?b=f.httpClient:(d=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),b=d);var g=w._defaultProperties.concat(w._defaultUserProperties).concat(w._defaultGroupProperties),nt={operationScopes:p,properties:g,filterByAncestorEntityIds:f&&f.filterByScope?f.filterByScope.filterByAncestorEntityIds:[],filterByEntityIds:f&&f.filterByScope?f.filterByScope.filterByEntityIds:[]},tt=function(n){l.addData(h);l.end();a.resolve(n.mruIdentities)},it=function(n){h[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);l.addData(h);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,h));l.end();a.reject(n)};return b.beginGetIdentityFeatureMru(i,r,nt).then(tt,it),k},t.prototype.removeMruIdentities=function(n,i,r,f,o,s){var a,l,b,h,p,d,k,g;if(!w.isAuthenticatedMember())return null;if(!n||n.length==0){h={source:"IdentityService",parameter:"objectIds",message:"objectIds null or undefined or empty"};throw h;}if(!i){h={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw h;}if(r&&r.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){h={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw h;}if(r="me",f&&f.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){h={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw h;}if(f="common",a=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_RemoveMru_Rtt),l={},l=w.addScenarioProperties(this,l,null,null,o,s),b=w.getOperationScopeList(i),b.length==0){h={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw h;}p=y.defer();d=p.promise;o&&o.httpClient?k=o.httpClient:(g=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),k=g);var nt=[{op:"remove",value:n,operationScopes:b}],tt=function(n){a.addData(l);a.end();p.resolve(n.result)},it=function(n){l[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);a.addData(l);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,l));a.end();p.reject(n)};return k.beginPatchIdentityFeatureMru(r,f,nt).then(tt,it),d},t.prototype.addMruIdentities=function(n,i,r,f,o,s){var b,h,a,l,p,d,k,g;if(!w.isAuthenticatedMember())return null;if(!n||n.length==0){h={source:"IdentityService",parameter:"objectIds",message:"objectIds null or undefined or empty"};throw h;}if(!i){h={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw h;}if(r&&r.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){h={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw h;}if(r=t.DEFAULT_IDENTITY_ID,f&&f.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){h={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw h;}if(f=t.DEFAULT_FEATURE_ID,b=w.getOperationScopeList(i),b.length==0){h={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw h;}a=u.getScenarioManager().startScenario(v.Telemetry.Area,v.Telemetry.Scenario_AddMru_Rtt);l={};l=w.addScenarioProperties(this,l,null,null,o,s);p=y.defer();d=p.promise;o&&o.httpClient?k=o.httpClient:(g=this.getConnection().getHttpClient(c.CommonIdentityPickerHttpClient),k=g);var nt=[{op:"add",value:n,operationScopes:b}],tt=function(n){a.addData(l);a.end();p.resolve(n.result)},it=function(n){l[v.TelemetryProperties.exceptionData]=t._getExceptionData(n);a.addData(l);e.publishEvent(new e.TelemetryEventData(v.Telemetry.Area,v.Telemetry.Feature_ApiExceptions,l));a.end();p.reject(n)};return k.beginPatchIdentityFeatureMru(r,f,nt).then(tt,it),d},t._getExceptionData=function(n){return n?n.serverError?n.serverError.typeName:n.name:""},t.DEFAULT_IDENTITY_ID="me",t.DEFAULT_FEATURE_ID="common",t}(f.VssService);t.MruService=d});

/*!
 * jQuery UI Button 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define("jQueryUI/button",["jquery","./controlgroup","./checkboxradio","./keycode","./widget"],t):t(jQuery)}(function(t){"use strict";var i;return t.widget("ui.button",{version:"1.13.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,i=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(i.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(i.label=this.originalLabel),i},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(i){i.keyCode===t.ui.keyCode.SPACE&&(i.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(i,o){var s="iconPosition"!==i,n=s?this.options.iconPosition:o,e="top"===n||"bottom"===n;this.icon?s&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),s&&this._addClass(this.icon,null,o),this._attachIcon(n),e?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var i=void 0===t.showLabel?this.options.showLabel:t.showLabel,o=void 0===t.icon?this.options.icon:t.icon;i||o||(t.showLabel=!0),this._super(t)},_setOption:function(t,i){"icon"===t&&(i?this._updateIcon(t,i):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,i),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!i),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(i):(this.element.html(i),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,i),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",i),this.element[0].disabled=i,i&&this.element.trigger("blur"))},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,i){"text"!==t?("showLabel"===t&&(this.options.text=i),"icon"===t&&(this.options.icons.primary=i),"icons"===t&&(i.primary?(this._super("icon",i.primary),this._super("iconPosition","beginning")):i.secondary&&(this._super("icon",i.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",i)}}),t.fn.button=(i=t.fn.button,function(o){var s="string"==typeof o,n=Array.prototype.slice.call(arguments,1),e=this;return s?this.length||"instance"!==o?this.each(function(){var i,s=t(this).attr("type"),h="checkbox"!==s&&"radio"!==s?"button":"checkboxradio",a=t.data(this,"ui-"+h);return"instance"===o?(e=a,!1):a?"function"!=typeof a[o]||"_"===o.charAt(0)?t.error("no such method '"+o+"' for button widget instance"):(i=a[o].apply(a,n))!==a&&void 0!==i?(e=i&&i.jquery?e.pushStack(i.get()):i,!1):void 0:t.error("cannot call methods on button prior to initialization; attempted to call method '"+o+"'")}):e=void 0:(n.length&&(o=t.widget.extend.apply(null,[o].concat(n))),this.each(function(){var s=t(this).attr("type"),n="checkbox"!==s&&"radio"!==s?"button":"checkboxradio",e=t.data(this,"ui-"+n);if(e)e.option(o||{}),e._init&&e._init();else{if("button"===n)return void i.call(t(this),o);t(this).checkboxradio(t.extend({icon:!1},o))}})),e}),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button});

/*!
 * jQuery UI Dialog 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(i){"use strict";"function"==typeof define&&define.amd?define("jQueryUI/dialog",["jquery","./button","./draggable","./mouse","./resizable","./focusable","./keycode","./position","./safe-active-element","./safe-blur","./tabbable","./unique-id","./version","./widget"],i):i(jQuery)}(function(i){"use strict";return i.widget("ui.dialog",{version:"1.13.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=i(this).css(t).offset().top;e<0&&i(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&i.fn.draggable&&this._makeDraggable(),this.options.resizable&&i.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?i(t):this.document.find(t||"body").eq(0)},_destroy:function(){var i,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(i=t.parent.children().eq(t.index)).length&&i[0]!==this.element[0]?i.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:i.noop,enable:i.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||i.ui.safeBlur(i.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var o=!1,s=this.uiDialog.siblings(".ui-front:visible").map(function(){return+i(this).css("z-index")}).get(),n=Math.max.apply(null,s);return n>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",n+1),o=!0),o&&!e&&this._trigger("focus",t),o},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=i(i.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var i=this._focusedElement;i||(i=this.element.find("[autofocus]")),i.length||(i=this.element.find(":tabbable")),i.length||(i=this.uiDialogButtonPane.find(":tabbable")),i.length||(i=this.uiDialogTitlebarClose.filter(":tabbable")),i.length||(i=this.uiDialog),i.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var t=i.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||i.contains(this.uiDialog[0],t)||this._focusTabbable()},_keepFocus:function(i){i.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=i("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===i.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===i.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),o=e.first(),s=e.last();t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==o[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){s.trigger("focus")}),t.preventDefault()):(this._delay(function(){o.trigger("focus")}),t.preventDefault())}},mousedown:function(i){this._moveToTop(i)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=i("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){i(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=i("<button type='button'></button>").button({label:i("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(i){i.preventDefault(),this.close(i)}}),t=i("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(i){this.options.title?i.text(this.options.title):i.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=i("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=i("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,e=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),i.isEmptyObject(e)||Array.isArray(e)&&!e.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(i.each(e,function(e,o){var s,n;o="function"==typeof o?{click:o,text:e}:o,o=i.extend({type:"button"},o),s=o.click,n={icon:o.icon,iconPosition:o.iconPosition,showLabel:o.showLabel,icons:o.icons,text:o.text},delete o.click,delete o.icon,delete o.iconPosition,delete o.showLabel,delete o.icons,"boolean"==typeof o.text&&delete o.text,i("<button></button>",o).button(n).appendTo(t.uiButtonSet).on("click",function(){s.apply(t.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,e=this.options;function o(i){return{position:i.position,offset:i.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,s){t._addClass(i(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",e,o(s))},drag:function(i,e){t._trigger("drag",i,o(e))},stop:function(s,n){var a=n.offset.left-t.document.scrollLeft(),l=n.offset.top-t.document.scrollTop();e.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:t.window},t._removeClass(i(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",s,o(n))}})},_makeResizable:function(){var t=this,e=this.options,o=e.resizable,s=this.uiDialog.css("position"),n="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";function a(i){return{originalPosition:i.originalPosition,originalSize:i.originalSize,position:i.position,size:i.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:this._minHeight(),handles:n,start:function(e,o){t._addClass(i(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",e,a(o))},resize:function(i,e){t._trigger("resize",i,a(e))},stop:function(o,s){var n=t.uiDialog.offset(),l=n.left-t.document.scrollLeft(),h=n.top-t.document.scrollTop();e.height=t.uiDialog.height(),e.width=t.uiDialog.width(),e.position={my:"left top",at:"left"+(l>=0?"+":"")+l+" top"+(h>=0?"+":"")+h,of:t.window},t._removeClass(i(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",o,a(s))}}).css("position",s)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=i(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=i.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var i=this.document.data("ui-dialog-instances");return i||(i=[],this.document.data("ui-dialog-instances",i)),i},_minHeight:function(){var i=this.options;return"auto"===i.height?i.minHeight:Math.min(i.minHeight,i.height)},_position:function(){var i=this.uiDialog.is(":visible");i||this.uiDialog.show(),this.uiDialog.position(this.options.position),i||this.uiDialog.hide()},_setOptions:function(t){var e=this,o=!1,s={};i.each(t,function(i,t){e._setOption(i,t),i in e.sizeRelatedOptions&&(o=!0),i in e.resizableRelatedOptions&&(s[i]=t)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,e){var o,s,n=this.uiDialog;"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:i("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((o=n.is(":data(ui-draggable)"))&&!e&&n.draggable("destroy"),!o&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((s=n.is(":data(ui-resizable)"))&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var i,t,e,o=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),o.minWidth>o.width&&(o.width=o.minWidth),i=this.uiDialog.css({height:"auto",width:o.width}).outerHeight(),t=Math.max(0,o.minHeight-i),e="number"==typeof o.maxHeight?Math.max(0,o.maxHeight-i):"none","auto"===o.height?this.element.css({minHeight:t,maxHeight:e,height:"auto"}):this.element.height(Math.max(0,o.height-i)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=i(this);return i("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!i(t.target).closest(".ui-dialog").length||!!i(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=i.fn.jquery.substring(0,4),e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(i){if(!e){var o=this._trackingInstances()[0];o._allowInteraction(i)||(i.preventDefault(),o._focusTabbable(),"3.4."!==t&&"3.5."!==t||o._delay(o._restoreTabbableFocus))}}.bind(this)),this.overlay=i("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var i=this.document.data("ui-dialog-overlays")-1;i?this.document.data("ui-dialog-overlays",i):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==i.uiBackCompat&&i.widget("ui.dialog",i.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(i,t){"dialogClass"===i&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),i.ui.dialog});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Identities/Picker/Controls",["require","exports","react","react-dom","VSS/Controls/PopupContent","VSS/FeatureAvailability/Services","VSS/Common/Constants/Platform","VSS/Context","VSS/Controls","VSS/Diag","VSS/Events/Services","VSS/Identities/Picker/Common","VSS/Identities/Picker/Constants","VSS/Identities/Picker/Services","VSS/Identities/Picker/Cache","VSS/Controls/Notifications","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Controls/StatusIndicator","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/Telemetry/Services","VSS/VSS","q","jQueryUI/button","jQueryUI/dialog","jQueryUI/tabbable"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt){var lt,wt,dt,st,pt,kt,gt,ft,at,ni,bt,yt,ti,ii;Object.defineProperty(t,"__esModule",{value:!0});t.EntityOperationsFacade=t.SourceType=t.SourceId=t.EntityFactory=t.IdentityDisplayControl=t.EDisplayControlType=t.IdentityPickerControlSize=t.IdentityPickerSearchControl=t.IdCardDialog=t.IdentityPickerDropdownControl=void 0;var fi=nt.domElem,ut=d.delegate,ot=nt.KeyCode,ht;(function(n){n[n.SelectNone=-1]="SelectNone";n[n.SelectFirstItem=0]="SelectFirstItem"})(ht||(ht={}));lt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._numItemsDisplayed=0,i._scrollTimeout=100,i._loadOnCreate=!1,i._isFiltered=!0,i._isRepositioning=!1,"eventOptions"in t&&t.eventOptions||(t.eventOptions={uniqueId:ft.getRandomString()}),i.initializeOptionsInternal(t),i}return __extends(t,n),t.prototype.initializeOptionsInternal=function(n){this._identityType=n.identityType?n.identityType:{User:!0};this._operationScope=n.operationScope?n.operationScope:{IMS:!0};this._size=n.size!==null&&n.size!==undefined?n.size:st.Large;this._options.getFilterByScope||(this._options.getFilterByScope=function(){return null});this._showContactCard=this._options.showContactCard;this._displayedEntities=[];this._showOnlyMruIdentities=!1;this._enableDirectorySearch();this._options.showMru&&this._disableDirectorySearch();this._isSearchActive=!1;this._preDropdownRender=n.preDropdownRender?n.preDropdownRender:null;this._onDirectorySearchFinished=n.onDirectorySearchFinished?n.onDirectorySearchFinished:null;this._loadOnCreate=n.loadOnCreate?n.loadOnCreate:!1;this._elementAlign=this._options.alignment&&this._options.alignment.elementAlign?this._options.alignment.elementAlign:"left-top";this._baseAlign=this._options.alignment&&this._options.alignment.baseAlign?this._options.alignment.baseAlign:"left-bottom";this._positioningElement=this._options.alignment&&this._options.alignment.positioningElement?this._options.alignment.positioningElement:null;this._prefix="";v.ServiceHelpers.isAuthenticatedMember()||(this._showContactCard=!1,this._disableDirectorySearch(),this._options.showMru=!1,this._loadOnCreate=!1);this._controlLoaded=null;this._loadOnCreate&&this.load();n.eventOptions&&(this._eventOptions=n.eventOptions)},t.prototype.initializeOptions=function(i){var r=t.DROPDOWN_BASE_CLASS+" "+ft.FIXED_POSTIION_CLASS;n.prototype.initializeOptions.call(this,$.extend({coreCssClass:r,pageSize:i.pageSize?i.pageSize:10},i))},t.prototype.initialize=function(){var i=this,r,u,f;n.prototype.initialize.call(this);r=function(n){n.preventDefault()};this._element.on("mousedown.identityPickerDropdown",ut(this,r));u=function(){return i._scrollTimeout!==null&&(clearTimeout(i._scrollTimeout),i._scrollTimeout=null),i._scrollTimeout=window.setTimeout(ut(i,i._loadNextPage),100),!1};this._options.smallScreenRender&&(this._$suggestedPeople=$("<div/>").addClass("search"),$("<span/>").addClass("status-message").text(w.IdentityPicker_SuggestedPeople).appendTo(this._$suggestedPeople),this._$suggestedPeople.appendTo(this._element));f=this._options.useRemainingSpace?"":Math.min((ft.getSizePx(this._size)+t.IMAGE_MARGINS_PX)*this._options.pageSize-10,t.MAX_HEIGHT)+"px";this._$itemsContainer=$("<ul/>").addClass("items").attr({role:"listbox",id:s.getId().toString(),"aria-label":w.IdentityPicker_AriaLabel}).css({"max-height":f});this._$liveStatus=$("<div/>").addClass("visually-hidden").attr("aria-live","polite");this._element.append(this._$itemsContainer).append(this._$liveStatus);this._$itemsContainer.scroll(ut(this,u))},t.prototype.getItemsListId=function(){return this._$itemsContainer.length?this._$itemsContainer.attr("id"):""},t.prototype.load=function(){return this._getEntityOperationsFacade().load({loadMru:this._options.showMru,filterByScope:this._options.getFilterByScope()})},t.prototype.addIdentitiesToMru=function(n){var r=this,i;if(v.ServiceHelpers.isAuthenticatedMember())try{if(!n||n.length==0)return;if(i=n.filter(function(n){if(!at.isStringPrefixedLocalId(n))return!0}),!i||i.length==0)return;var u=function(n){r._element&&n==!0&&r._getEntityOperationsFacade().refreshUserMru(r._options.getFilterByScope())},f=function(){},e=b.getService(v.MruService);e.addMruIdentities(i,{IMS:!0},v.MruService.DEFAULT_IDENTITY_ID,v.MruService.DEFAULT_FEATURE_ID,{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(u,f);this._disableDirectorySearch()}catch(t){if(t!==Object(t)||!("source"in t)||t.source!="MruService")throw t;}},t.prototype.isVisible=function(){return this._isVisible},t.prototype.isFiltered=function(){return this._isVisible&&this._isFiltered},t.prototype.showAllMruIdentities=function(n){var t=this,i;if(n===void 0&&(n=!0),!this._options.showMru){i={source:"showAllMruIdentities",message:"The showMru option needs to be enabled to call showAllMruIdentities"};throw i;}return this.load().then(ut(this,function(){return t._getUserMruEntitiesPostLoad(n)}),ut(this,function(){return t._getUserMruEntitiesPostLoad(n)}))},t.prototype.getIdentities=function(n,t){var i=this;return t===void 0&&(t=!0),this.load().then(ut(this,function(){return i._getIdentitiesPostLoad(n,t)}),ut(this,function(){return i._getIdentitiesPostLoad(n,t)}))},t.prototype.show=function(){var n=this;this.load().then(ut(this,function(){n._showPostLoad()}),ut(this,function(){n._showPostLoad()}))},t.prototype.hide=function(n,i){var r=this,u;if(i===void 0&&(i=!1),this._isVisible=!1,this._element&&(this._element.hide(),this._element.parents().off(".identityPickerDropdown"),["scroll","resize"].map(function(n){document.removeEventListener(n,ut(r,r._handleScrollAndResize))}),this._isRepositioning=!1),!i&&this._options.onHide)this._options.onHide(n);u={uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};c.getService().fire(t.HIDE_DROPDOWN_EVENT_INTERNAL,u)},t.prototype.getSelectedIndex=function(){return this._selectedIndex==-1?null:this._selectedIndex<this._displayedEntities.length-1?this._selectedIndex:this._displayedEntities.length-1},t.prototype.getSelectedItem=function(){return this._selectedIndex==-1||this._selectedIndex>this._displayedEntities.length-1?null:this._displayedEntities[this._selectedIndex]},t.prototype.handleKeyEvent=function(n){if(!n||!n.keyCode)return!0;switch(n.keyCode){case ot.UP:return this.isVisible()?this._prevItem():!0;case ot.DOWN:return this.isVisible()?this._nextItem():(this.show(),!0);case ot.PAGE_UP:return this.isVisible()?this._prevPage():!0;case ot.PAGE_DOWN:return this.isVisible()?this._nextPage():!0;case ot.ENTER:return this.isVisible()&&this._searchButtonClickDelegate(),!0;case ot.ESCAPE:return this.isVisible()?(this.hide(n),n.stopPropagation(),!1):!0;case ot.RIGHT:return this.isVisible()&&this._showContactCard&&this._selectedIndex!=-1?(n.stopPropagation(),$(".identity-picker-contact-card-icon",this._indexedEntityMap[this._selectedIndex]).click(),!1):!0;case ot.DELETE:if(this.isVisible()&&this._options.showMru){var t=this.getSelectedItem();return t&&t.isMru&&et.isDirectoryEntityType(t)?(n.stopPropagation(),$(".identity-picker-delete-icon",this._indexedEntityMap[this._selectedIndex]).click(),!1):!0}return!0;default:return!0}},t.prototype.getPrefix=function(){return this._prefix},t.prototype.updatePrefix=function(n){this._prefix=n?n.toLowerCase().trim():"";this._prefix||(this._isSearchActive=!1,this._disableDirectorySearch())},t.prototype.dispose=function(){this._element&&(this._element.off(".identityPickerDropdown"),this._element.parents().off(".identityPickerDropdown"));n.prototype.dispose.call(this)},t.prototype.reset=function(){this._resetSearchStatuses();this._prefix="";this._enableDirectorySearch();this._displayedEntities=[];this._alterStateAndRender(!1,!1);this._disableDirectorySearch()},t.getClassSelector=function(n){return"."+n},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=b.getService(yt)),this._entityOperationsFacade},t.prototype._getUserMruEntitiesPostLoad=function(n){var t=this;return n===void 0&&(n=!0),this._isFiltered=!1,this._showOnlyMruIdentities=!0,this._isDropdownVisibleInitially=this._isVisible,this._getEntityOperationsFacade().isUserMruReady(this._options.getFilterByScope())||this._alterStateAndRender(!0,!1,n),this.load().then(ut(this,function(){return t.getIdentities(t._prefix,n)}))},t.prototype._enableDirectorySearch=function(){this._isDirectorySearchEnabled=!0},t.prototype._disableDirectorySearch=function(){this._isDirectorySearchEnabled=!1},t.prototype._resetSearchStatuses=function(){this._isSearchActive=!1;this._disableDirectorySearch()},t.prototype._getIdentitiesPostLoad=function(n,t){var i,r;return(t===void 0&&(t=!0),i=rt.defer(),!this._element)?(i.reject(null),i.promise):(this._showLoading(),this._isDropdownVisibleInitially=this._isVisible,this._isSearchActive=!1,this._displayedEntities=[],this._options.showMru&&(this._mruEntities=this._getEntityOperationsFacade().getMruEntitiesUnchecked(this._options.getFilterByScope()),r=v.ServiceHelpers.getIdentityTypeList(this._identityType),this._mruEntities=this._mruEntities.filter(function(n){return r.indexOf(n.entityType.trim().toLowerCase())>=0})),(!n||n.trim().length===0)&&!this._options.smallScreenRender&&(this._resetSearchStatuses(),!this._showOnlyMruIdentities))?(this._prefix=n,this._enableDirectorySearch(),this._alterStateAndRender(!0,!0),this._disableDirectorySearch(),i.resolve([]),i.promise):(n=n.toLowerCase().trim(),this._prefix=n,this._showOnlyMruIdentities)?(this._displayedEntities=this._mruEntities?this._mruEntities:[],this._alterStateAndRender(!1,!1,t),this._showOnlyMruIdentities=!1,this._getImagesForDisplayedEntities(),i.resolve(this._displayedEntities),i.promise):(this._options.showMru&&(this._displayedEntities=yt.filterEntities(this._mruEntities,n)),this._isFiltered=!0,this._options.showMru&&!this._isDirectorySearchEnabled)?(this._alterStateAndRender(!0,!1,t),this._getImagesForDisplayedEntities(),i.resolve(this._displayedEntities),i.promise):this._getDirectoryEntitiesWithRender(n,i)},t.prototype._getDirectoryEntitiesWithRender=function(n,t){return this._isSearchActive=!0,this._alterStateAndRender(!0),this._getDirectoryEntities(n,t)},t.prototype._checkIfServerException=function(n){return!n||!("serverError"in n)||!n.serverError||!("typeKey"in n.serverError)?!1:!0},t.prototype._getMessageForIpsAuthorizationException=function(n){if(n.serverError.typeKey.trim()=="IdentityPickerAuthorizationException"&&n.serverError.customProperties!=null){var i=n.serverError.customProperties.identityPickerAuthorizationExceptionType,t=w.IdentityPicker_ErrorAuthorizationException;return i==kt.IsGuestUser&&(t=w.IdentityPicker_GuestUserException),t}return null},t.prototype._getDirectoryEntities=function(n,i,r){var u=this,s,c;r===void 0&&(r=!1);var f=function(t){u._element&&(u._isSearchActive=!1,n===u._prefix&&n.length>=1&&(u._displayedEntities=t?t.identities:[],u._alterStateAndRender(!0)),u._onDirectorySearchFinished&&u._onDirectorySearchFinished(u._displayedEntities,n),i.resolve(u._displayedEntities))},e=function(r){if(r&&h.logError("_getDirectoryEntities/getIdentitiesErrorCallback:"+JSON.stringify(r)),n===u._prefix)if(u._checkIfServerException(r)){var f=u._getMessageForIpsAuthorizationException(r);f&&u._showError($("<span/>").text(f+" [").append($("<a><\/a>").attr("href",t.IP_AUTHORIZATION_EXCEPTION_DETAILS_LINK).text(w.IdentityPicker_ErrorMoreDetails).attr("target","_blank")).append($("<span/>").text("]")))}else u._showError(w.IdentityPicker_ErrorLoadingIdentities);u._isSearchActive=!1;i.reject(r?r:null)},o=this._options.getFilterByScope();return l.FilterByScope.isFilterByScopeEmpty(o)?f(null):(s={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:a.ConsumerId.UnknownConsumer},prefix:n,sources:this._options.showMru?[ct.Directory,ct.Mru]:[ct.Directory],filterByScope:o},c=this._getEntityOperationsFacade().search(s).then(function(n){for(var t in n.queryTokenResponse)n.queryTokenResponse[t].then(ut(u,f),ut(u,e))},e)),i.promise},t.prototype._getImagesForDisplayedEntities=function(){var n=this,i=function(i){if(n._element){if(!i)return;n._displayedEntities.forEach(ut(n,function(r){i.hasOwnProperty(r.entityId)&&i[r.entityId]&&(r.image=i[r.entityId],$(t.getClassSelector(t.AVATAR_CLASS),n._$itemsContainer).each(function(n,t){t.hasAttribute("data-objectid")&&t.getAttribute("data-objectid")===r.entityId&&t.setAttribute("src",i[r.entityId])}))}))}},r=function(n){n&&h.logError("_getImagesForDisplayedEntities/getIdentityImagesErrorCallback:"+JSON.stringify(n))},u={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:a.ConsumerId.UnknownConsumer},sources:[ct.Directory]};this._getEntityOperationsFacade().getImagesForEntities(this._displayedEntities,u).then(i,r)},t.prototype._showPostLoad=function(){var n=this,i;if(this._element){this._isVisible=!0;this._element.show();this._setPosition();this._element.parents().on("scroll.identityPickerDropdown resize.identityPickerDropdown",ut(this,this._handleScrollAndResize));["scroll","resize"].map(function(t){document.addEventListener(t,ut(n,n._handleScrollAndResize))});this._isRepositioning=!1;i={uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};c.getService().fire(t.SHOW_DROPDOWN_EVENT_INTERNAL,i)}},t.prototype._handleScrollAndResize=function(){var n=this;this._isRepositioning||(this._isRepositioning=!0,d.delay(this,500,ut(this,function(){n._isRepositioning=!1;n._setPosition()})))},t.prototype._constructDropdown=function(n,t,i){n===void 0&&(n=!1);t===void 0&&(t=!0);i===void 0&&(i=!0);this._indexedEntityMap={};t&&this._setupDom();n?this._setSelectedIndex(this._selectedIndex<this._displayedEntities.length?this._selectedIndex:this._isSearchActive?this._displayedEntities.length-1:-1,!0,nt.Positioning.VerticalScrollBehavior.Top):(this._selectedIndex=ht.SelectNone,i&&this._numItemsDisplayed>0?this._setSelectedIndex(ht.SelectFirstItem,!1):this._setSelectedIndex(ht.SelectNone,!1))},t.prototype._removeIdentityFromMru=function(n){var i=this;try{if(at.isStringPrefixedLocalId(n))return;var r=function(n){i._element&&n==!0&&i._getEntityOperationsFacade().refreshUserMru(i._options.getFilterByScope())},u=function(){},f=b.getService(v.MruService);f.removeMruIdentities([n],{IMS:!0},v.MruService.DEFAULT_IDENTITY_ID,v.MruService.DEFAULT_FEATURE_ID,{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(r,u);this._disableDirectorySearch()}catch(t){if(t!==Object(t)||!("source"in t)||t.source!="MruService")throw t;}},t.prototype._alterStateAndRender=function(n,t,i){if(t===void 0&&(t=!1),i===void 0&&(i=!0),this._element){if(n||this.hide(void 0,!0),this._prefix&&this._prefix.trim().length!=0||(this._isSearchActive=!1),this._displayedEntities=this._displayedEntities||[],this._preDropdownRender&&(this._displayedEntities=this._preDropdownRender(this._displayedEntities,this._isDirectorySearchEnabled)),this._constructDropdown(t,!0,i),!this._isSearchActive&&!this._prefix&&this._displayedEntities.length==0){this.hide();return}n&&(!this._isDropdownVisibleInitially||this._isVisible)&&this.show()}},t.prototype._fireActiveDescendantUpdate=function(n){var i={activeDescendantId:n,uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};c.getService().fire(t.UPDATE_ACTIVE_DESCENDANT_ID,i)},t.prototype._setSelectedIndex=function(n,t,i){i===void 0&&(i=nt.Positioning.VerticalScrollBehavior.Bottom);var r=n!==null&&n!==undefined&&this._indexedEntityMap&&this._indexedEntityMap[n]&&(this._selectedIndex!==n||!this._indexedEntityMap[this._selectedIndex].hasClass("selected"));r?(this._selectedIndex=n,this._clearItemsSelection(this._element.find(".search")),this._clearItemsSelection(this._$itemsContainer.find("li")),this._selectItem(this._indexedEntityMap[this._selectedIndex]),t&&this._scrollItemIntoView(this._selectedIndex,i)):isNaN(n)||(this._selectedIndex=n)},t.prototype._scrollItemIntoView=function(n,t){n!==null&&n!==undefined&&nt.Positioning.scrollIntoViewVertical(this._indexedEntityMap[n],t)},t.prototype._setPosition=function(){var n,i,r,u,e,f,o;this._element&&(n=this._getPositioningElement(),this._options.width?this._element.width(this._options.width):(i=n.outerWidth()-t.DROPDOWN_BORDER_PX,this._element.width(i<t.MIN_WIDTH?t.MIN_WIDTH:i)),n.is(":visible")&&nt.Positioning.position(this.getElement(),n,{elementAlign:this._elementAlign,baseAlign:this._baseAlign,overflow:"fit-flip"}),r=$(window),u=this._element.offset().top+this._element.height()-r.height()-r.scrollTop(),u>0&&(e=parseInt(this._$itemsContainer.css("max-height")),this._$itemsContainer.css("max-height",e-u+"px")),this._options.useRemainingSpace&&(this._element.width(""),this._element.css("left",""),this._element.addClass("use-remaining-space"),f=this._element.position().top,o="calc(100% - "+f+"px)",this._element.css("max-height",o),this._element.css("top",f+"px")),this._options.smallScreenRender&&this._element.addClass("small-screen"))},t.prototype._getPositioningElement=function(){var n=this._positioningElement;return typeof n=="function"&&(n=n()),n||(n=this.getElement().parent()),n},t.prototype._showLoading=function(){this._$liveStatus.detach();this._$itemsContainer.detach();this._element.empty();this._$liveStatus.appendTo(this._element);this._$liveStatus.text(w.IdentityPicker_LoadingIdentities);this._$itemsContainer.empty().attr("aria-busy","true").appendTo(this._element);var n=$("<div/>").addClass("search").appendTo(this._element),t=s.BaseControl.createIn(k.StatusIndicator,n,{center:!1,message:w.IdentityPicker_LoadingIdentities});t.start()},t.prototype._showError=function(n){var t=typeof n=="string"||n instanceof String?$("<span/>").text(n):n,i,r;this._$liveStatus.text(t.text());i=$(".search",this._element).empty().addClass("search-error");r=s.BaseControl.createIn(p.MessageAreaControl,i,{closeable:!1,message:{header:t,type:p.MessageAreaType.Error},showIcon:!1})},t.prototype._nextPage=function(){var n=-1;return this._loadNextPage(!0),this._selectedIndex<this._displayedEntities.length-1&&this._selectedIndex!==-1&&(n=this._selectedIndex+this._options.pageSize),this._setSelectedIndex(n<this._displayedEntities.length?n:this._displayedEntities.length-1,!0,nt.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._prevPage=function(){var n=0;return this._selectedIndex===-1?n=this._displayedEntities.length-this._options.pageSize:this._selectedIndex>0&&(n=this._selectedIndex-this._options.pageSize),this._setSelectedIndex(n>=0?n:ht.SelectFirstItem,!0,nt.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._nextItem=function(){if(this._selectedIndex===this._displayedEntities.length-1){var n=this._element.find(".search");n.is(":visible")?(this._selectedIndex=ht.SelectNone,this._clearItemsSelection(this._$itemsContainer.find("li")),this._selectItem(n)):this._setSelectedIndex(ht.SelectFirstItem,!0)}else this._selectedIndex<this._displayedEntities.length-1&&this._setSelectedIndex(this._selectedIndex+1,!0);return!1},t.prototype._prevItem=function(){return this._selectedIndex===-1&&this._displayedEntities&&this._displayedEntities.length?(this._clearItemsSelection(this._element.find(".search")),this._setSelectedIndex(this._displayedEntities.length-1,!0)):this._selectedIndex>0&&this._setSelectedIndex(this._selectedIndex-1,!0,nt.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._selectItem=function(n){var t=n.attr("id")?n.attr("id"):s.getId().toString();n.addClass("selected").attr({id:t,"aria-selected":"true"});this._fireActiveDescendantUpdate(t)},t.prototype._clearItemsSelection=function(n){n.removeClass("selected").attr("aria-selected","false")},t.prototype._createItem=function(n){var t=this,r={deleteIconClickDelegate:ut(this,function(n,i){var r=t._mruEntities.indexOf(n);r>=0&&t._mruEntities.splice(r,1);r=t._displayedEntities.indexOf(n);r>=0&&t._displayedEntities.splice(r,1);i.remove();n.localId&&n.localId.trim()&&t._removeIdentityFromMru(n.localId);t._numItemsDisplayed=Math.min(t._displayedEntities.length,Math.max(t._options.pageSize,t._numItemsDisplayed));t._$searchResultStatus.remove();t._$searchResultStatus=t._constructSearchResultStatus();t._showAdditionalInformation()}),entityListItemClickDelegate:ut(this,function(n){if(t._logSelectedEntity(n),typeof t._options.onItemSelect=="function")t._options.onItemSelect(n)})},u={operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null},f={consumerId:this._options.consumerId},e=this._displayedEntities[n],i=(new ui).withIdentityServiceOptions(u).withIdentityExtensionOptions(f).withPrefix(this._prefix&&this._prefix.trim()&&!this._showOnlyMruIdentities?this._prefix:"").withEntity(e).forControlOfSize(this._size).registerCallbacks(r).withContactCard(this._showContactCard,this._options.focusElementOnContactCardClose).withHoverSupport(!this._options.useRemainingSpace).withSmallScreenRender(this._options.smallScreenRender).withDialogAppendTo(this._options.dialogAppendTo).build();return this._indexedEntityMap[n]=i,i},t.prototype._logSelectedEntity=function(n){var r=!1,u=!1,i,t,f;try{i=a.Telemetry.Feature_DropdownControl;(n.originDirectory.toLowerCase().trim()==v.ServiceHelpers.VisualStudioDirectory||n.localDirectory.toLowerCase().trim()==v.ServiceHelpers.VisualStudioDirectory)&&(r=!0);n.isMru&&(u=!0);this._prefix?this._options.showMru?i=this._isDirectorySearchEnabled?a.Telemetry.Feature_Select_Mru_Dir:a.Telemetry.Feature_Select_Mru_Prefix:this._isDirectorySearchEnabled&&(i=a.Telemetry.Feature_Select_Dir):this._options.showMru&&(i=a.Telemetry.Feature_Select_Mru_NoPrefix);t={};t[a.TelemetryProperties.prefixType]=v.ServiceHelpers.getPrefixTypeForTelemetry(this._prefix);t[a.TelemetryProperties.prefixLength]=this._prefix.length;t[a.TelemetryProperties.consumerId]=this._options&&this._options.consumerId?this._options.consumerId:null;t[a.TelemetryProperties.extensionId]=this._options&&this._options.extensionData&&this._options.extensionData.extensionId?this._options.extensionData.extensionId:null;t[a.TelemetryProperties.identityTypes]=v.ServiceHelpers.getIdentityTypeList(this._options.identityType);t[a.TelemetryProperties.operationScopes]=v.ServiceHelpers.getOperationScopeList(this._options.operationScope);t[a.TelemetryProperties.isMru]=u;t[a.TelemetryProperties.isNonMaterialized]=!r;t[a.TelemetryProperties.maxResults]=this._options&&this._options.maxResults?this._options.maxResults:v.IdentityService.MAX_RESULTS;t[a.TelemetryProperties.minResults]=this._options&&this._options.minResults?this._options.minResults:v.IdentityService.MIN_RESULTS;t[a.TelemetryProperties.entityId]=n.entityType.toLowerCase().trim()==at.STRING_ENTITY_TYPE?at.STRING_ENTITY_TYPE:n.entityId;t[a.TelemetryProperties.consumerId]=this._options.consumerId;f=b.getService(v.IdentityService);t=v.ServiceHelpers.addScenarioProperties(b.getService(v.IdentityService),t);tt.publishEvent(new tt.TelemetryEventData(a.Telemetry.Area,i,t))}catch(e){}},t.prototype._setupDom=function(){var n,t,i;this._$liveStatus.text("").detach();this._$itemsContainer.empty().removeAttr("aria-busy").detach();this._element.empty();this._$liveStatus.appendTo(this._element);this._setupEntitiesInDom();n=!1;!this._isDirectorySearchEnabled&&this._options.showMru&&this._prefix&&!this._showOnlyMruIdentities&&(t=this._constructSearchButton().appendTo(this._element),this._$itemsContainer.attr("aria-owns",t.attr("id")),n=!0,this._displayedEntities&&this._displayedEntities.length||(this._selectedIndex=ht.SelectNone,this._selectItem(t)));this._displayedEntities&&this._displayedEntities.length>0&&(this._$searchResultStatus=this._constructSearchResultStatus());n&&(i=this._$liveStatus.text(),this._$liveStatus.text((i?i+". ":"")+w.IdentityPicker_SearchButtonShownInDropdown));this._showAdditionalInformation()},t.prototype._showAdditionalInformation=function(){this._displayedEntities.length===0&&(this._isSearchActive||this._options.showMru&&!this._getEntityOperationsFacade().isUserMruReady(this._options.getFilterByScope())?this._showLoading():(!this._options.showMru||this._isDirectorySearchEnabled&&this._prefix||this._showOnlyMruIdentities)&&(this._$liveStatus.text(w.IdentityPicker_NoResult),(this._options.showNoIdentitiesFound||this._options.showNoIdentitiesFound===undefined||this._options.showNoIdentitiesFound===null)&&this._constructInformativeMessage(w.IdentityPicker_NoResult).appendTo(this._element)));this._$suggestedPeople&&(this._displayedEntities.length>0?this._$suggestedPeople.show():this._$suggestedPeople.hide())},t.prototype._setupEntitiesInDom=function(){var n,i;if(this._options.smallScreenRender&&this._$suggestedPeople.appendTo(this._element),this._$itemsContainer.empty().appendTo(this._element),this._displayedEntities.length==0)this._numItemsDisplayed=0;else for(this._numItemsDisplayed=Math.min(this._displayedEntities.length,Math.max(this._options.pageSize,this._numItemsDisplayed)),n=0;n<this._numItemsDisplayed;n++)n>this._displayedEntities.length-1||(i=this._createItem(n),i&&(this._$itemsContainer.append(i),this._options.smallScreenRender||i.height(i.height()+t.IMAGE_MARGINS_PX)))},t.prototype._constructSearchResultStatus=function(){var n=$("<div/>").addClass("search-result-status").appendTo(this._element),t,i;return this._displayedEntities.length==1&&this._numItemsDisplayed==this._displayedEntities.length?(t=g.format(w.IdentityPicker_SingleResultStatus,this._displayedEntities.length),this._$liveStatus.text(t),n.text(t)):this._displayedEntities.length>1&&this._numItemsDisplayed<=this._displayedEntities.length?(i=g.format(w.IdentityPicker_MultipleResultStatus,this._displayedEntities.length),this._$liveStatus.text(i),n.text(i)):n.hide(),n},t.prototype._constructSearchButton=function(){var n=$("<div/>").addClass("search").attr({role:"button option","aria-label":w.IdentityPicker_SearchButtonLabel,tabindex:"0",id:s.getId().toString()}),t=$("<span/>").addClass("bowtie-icon bowtie-search identity-picker-search-icon"),i=$("<span/>").addClass("status-message").text(w.IdentityPicker_SearchButton);return n.append(t).append(i),n.click(ut(this,this._searchButtonClickDelegate)),n},t.prototype._constructInformativeMessage=function(n){return $("<div/>").addClass("no-result").append($("<span/>").addClass("status-message").text(n).attr("role","alert"))},t.prototype._loadNextPage=function(n){var u,r,i;if(n===void 0&&(n=!1),u=this._$itemsContainer.scrollTop()+this._$itemsContainer.outerHeight()>=this._$itemsContainer[0].scrollHeight-5,n||u){for(r=this._numItemsDisplayed;r<this._numItemsDisplayed+Math.min(this._displayedEntities.length-this._numItemsDisplayed,this._options.pageSize);r++)i=this._createItem(r),i&&(this._$itemsContainer.append(i),i.height(i.height()+t.IMAGE_MARGINS_PX));this._numItemsDisplayed+=Math.min(this._displayedEntities.length-this._numItemsDisplayed,this._options.pageSize);this._$searchResultStatus.remove();this._$searchResultStatus=this._constructSearchResultStatus()}this._scrollTimeout!==null&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null)},t.prototype._searchButtonClickDelegate=function(){this._enableDirectorySearch();this.getIdentities(this._prefix)},t.SHOW_DROPDOWN_EVENT_INTERNAL="identity-picker-dropdown-show",t.HIDE_DROPDOWN_EVENT_INTERNAL="identity-picker-dropdown-hide",t.UPDATE_ACTIVE_DESCENDANT_ID="identity-picker-dropdown-update-active-descendant-id",t.DROPDOWN_BASE_CLASS="identity-picker-dropdown",t.IMAGE_MARGINS_PX=8,t.MIN_WIDTH=300,t.MAX_HEIGHT=240,t.DROPDOWN_BORDER_PX=2,t.IP_AUTHORIZATION_EXCEPTION_DETAILS_LINK="https://aka.ms/c0eo4d",t.AVATAR_CLASS="identity-picture",t}(s.Control);t.IdentityPickerDropdownControl=lt;wt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._scrollTimeout=100,i._pageSize=10,i._selectedIndex=ht.SelectNone,i._identityType=t.identityType?t.identityType:{User:!0},i._operationScope=t.operationScope?t.operationScope:{IMS:!0},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:402,height:70,resizable:!1,modal:!1,draggable:!0,autoOpen:!0,closeOnEscape:!1,cssClass:"idcard-dialog-content",closeText:w.CloseButtonLabelText},t))},t.prototype.initialize=function(){var u,i,f,e;n.prototype.initialize.call(this);this._previousFocusedElement=$(document.activeElement);this._element.dialog(this._options);this._$idCardDialog=this._element.closest(t.JQUERY_UI_DIALOG_CLASS).addClass("idcard-dialog").attr("visibility","hidden");this._$idCardDialog.on("dialogclose.contactCard",ut(this,this._onIdCardClose));this._$idCardDialog.on("keydown.contactCard",ut(this,this._onKeyDown));if(this._$idCardDialog.css("z-index",t._getHigherZIndex("div"+t.JQUERY_UI_DIALOG_CLASS)),$(".ui-icon-closethick",this._$idCardDialog).addClass("bowtie-icon bowtie-navigate-close"),this._repositionDialog(),this._$idCardDialog.hide(),$(".ui-dialog-content",$(".idcard-dialog:visible")).dialog("close"),u=$(".cards-container"),u.length>0&&r.unmountComponentAtNode(u[0]),this._$idCardDialog.attr("id",t.ID_CARD_DIALOG_ID),this._options.identity){if(i=this._options.identity,!et.isDirectoryEntityType(i)){f={source:"IdCardDialog initialize",message:"The IdCardDialog can only be initialized with a user or group IEntity"};throw f;}e=et.getUniqueIdentifierForDisambiguation(i);this._$idCardDialog.attr("data-prefix",e.toLowerCase());this._getIdentitiesSuccess({queryToken:null,identities:[i]});!ft.isOnPremiseEnvironment()&&i.localDirectory&&i.localDirectory.toLowerCase().trim()==v.ServiceHelpers.VisualStudioDirectory&&this._operationScope&&(this._operationScope.AAD||this._operationScope.Source)&&this._getDirectoryEntities(i.entityId)}else this._$idCardDialog.attr("data-prefix",this._options.uniqueIdentifier.toLowerCase()),this._getDirectoryEntities(this._options.uniqueIdentifier)},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=b.getService(yt)),this._entityOperationsFacade},t._getHigherZIndex=function(n){var t,i=1001;return $(n).each(function(n,r){t=$(r).css("z-index");!isNaN(t)&&t>i&&(i=t)}),++i},t.prototype._repositionDialog=function(){var t={elementAlign:"left-top",baseAlign:"left-bottom",overflow:"none-none"},n,i,r;this._options.anchorContainer?(n=$(this._options.anchorContainer).offset(),t.leftOffsetPixels=n.left,t.topOffsetPixels=n.top,t.skipZIndexSetting=!0):n=this._options.anchor.offset();nt.Positioning.position(this._$idCardDialog,this._options.anchor,t);i=this._options.leftValue&&this._options.leftValue>0?this._options.leftValue:n.left;i+this._$idCardDialog.outerWidth()<$(window).width()+$(window).scrollLeft()?this._$idCardDialog.css("left",i):this._$idCardDialog.css("left",i-this._$idCardDialog.outerWidth()+this._options.anchor.outerWidth());r=this._options.topValue&&this._options.topValue>0?this._options.topValue:n.top+this._options.anchor.outerHeight();r+this._$idCardDialog.outerHeight()<$(window).height()+$(window).scrollTop()?this._$idCardDialog.css("top",r):this._$idCardDialog.css("top",r-this._$idCardDialog.outerHeight()-this._options.anchor.outerHeight())},t.prototype._getDirectoryEntities=function(n){var t=this,i={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:a.ConsumerId.UnknownConsumer},prefix:n,queryTypeHint:{UID:!0},sources:[ct.Directory]},r=this._getEntityOperationsFacade().search(i).then(function(n){for(var i in n.queryTokenResponse)n.queryTokenResponse[i].then(ut(t,t._getIdentitiesSuccess),ut(t,t._getIdentitiesFailure))},this._getIdentitiesFailure)},t.prototype._getIdentitiesFailure=function(){c.getService().fire(t.IDCARD_LOADED_EVENT)},t.prototype._getIdentitiesSuccess=function(n){var r,u;if(!n||!n.identities||n.identities.length<1){this._getIdentitiesFailure(n);return}this._identity=n.identities[0];var o=f.FeatureAvailabilityService.isFeatureEnabled(e.WebPlatformFeatureFlags.ReactProfileCard),s=this._identity.entityType.trim().toLowerCase()==v.ServiceHelpers.UserEntity,i=this._identity.entityType.trim().toLowerCase()==v.ServiceHelpers.GroupEntity,h=window.top!==window.self,l=this._options.useOfficeFabricProfileCard!==null&&this._options.useOfficeFabricProfileCard!==undefined?this._options.useOfficeFabricProfileCard:!h;if(o&&l&&(s||i))this._displayReactIdCard(i);else{if(!v.ServiceHelpers.isAuthenticatedMember())return;r=et.getUniqueIdentifierForDisambiguation(this._identity);u=et.getSignInAddress(this._identity);(this._$idCardDialog.attr("data-prefix")&&r.toLowerCase().indexOf(this._$idCardDialog.attr("data-prefix").toLowerCase())===0||u.toLowerCase().indexOf(this._$idCardDialog.attr("data-prefix").toLowerCase())===0)&&this._element&&this._displayIdCard()}c.getService().fire(t.IDCARD_LOADED_EVENT)},t.prototype._displayReactIdCard=function(n){var t=this,s=$("body").eq(0),f=s.find(".cards-container"),u,e,o,h;if(f.length===0&&(f=$("<div class='cards-container' />").appendTo(s)),u=this._options.anchor,u&&u.attr("role")==="row"&&(u=u.children()),e=u[0],this._options.leftValue!==undefined&&this._options.topValue!==undefined&&this._options.leftValue!==null&&this._options.topValue!==null&&(e={x:this._options.leftValue,y:this._options.topValue}),o=function(){r.unmountComponentAtNode(f[0]);$(".ui-dialog-content",$(".idcard-dialog")).dialog("close")},n){var c=function(n){var i=b.getService(v.IdentityService);return i.getIdentityConnections(n,t._operationScope,{User:!0,Group:!0},{successors:!0},{httpClient:t._options.httpClient},{consumerId:t._options.consumerId})},l=function(n){var i={identityServiceOptions:{operationScope:t._operationScope,identityType:t._identityType,httpClient:null,extensionData:null},identityExtensionOptions:{consumerId:t._options?t._options.consumerId:a.ConsumerId.UnknownConsumer},prefix:n,queryTypeHint:{UID:!0},sources:["Directory"]};return t._getEntityOperationsFacade().search(i).then(function(n){var t=Object.keys(n.queryTokenResponse)[0];return n.queryTokenResponse[t].then(function(n){return n.identities[0]})})},y=u[0],p={getEntityFromUniqueAttribute:l,identity:this._identity,onDismissCallback:o,onRequestConnectionInformation:c,target:y};it.using(["VSSUI/IdentityCard"],function(n){var t=i.createElement(n.IdentityCard,p);r.render(t,f[0])})}else h={identity:this._identity,target:e,entityOperationsFacade:this._getEntityOperationsFacade(),consumerId:this._options?this._options.consumerId:a.ConsumerId.UnknownConsumer,onDismissCallback:o},it.using(["VSS/Identities/Picker/PersonaCard"],function(n){var t=i.createElement(n.PersonaCard,h);r.render(t,f[0])})},t.prototype._displayIdCard=function(){var n=this,t,o,s,e,h,y;this._$idCardDialog.attr("data-objectid",this._identity.entityId);$("body").on("mousedown.contactCard",ut(this,this._onIdCardBlur));$(".ui-dialog-buttonpane",this._$idCardDialog).hide();this._element.empty();$(".identity-picker-idcard-header").empty();var l=$("<div/>").addClass("identity-picker-idcard-header").prependTo($(".ui-dialog-titlebar",this._$idCardDialog)),b=$("<div/>").addClass("identity-picker-idcard-image").appendTo(l),a=$("<div/>").addClass("identity-picker-idcard-basicinfo").appendTo(l),f=et.getDisplayName(this._identity),k=v.ServiceHelpers.getDefaultIdentityImage(this._identity),d=ft.createImgElement(k,this._identity.image?this._identity.image:"","user-picture-card");if(d.attr("alt",f).appendTo(b),t=et.getSignInAddress(this._identity),t.trim()||this._options.uniqueIdentifier&&ft.isValidEmail(this._options.uniqueIdentifier)&&(t=this._options.uniqueIdentifier),o=$("<div/>").addClass("identity-picker-idcard-basicinfo-name").appendTo(a).text(f),u.RichContentTooltip.addIfOverflow(f,o,{menuContainer:o}),s=$("<div/>").addClass("identity-picker-idcard-ellipsis-overflow").appendTo(a),ft.isValidEmail(t)?$("<a/>").attr({"aria-label":w.IdentityPicker_IdCardSendEmail,href:"mailto:"+t,tabindex:"0"}).text(t).appendTo(s):s.text(t),this._$liveStatus=$("<div/>").addClass("visually-hidden").attr("aria-live","polite").appendTo(this._$idCardDialog),$(".ui-dialog-title",this._$idCardDialog).text(g.format(w.IdentityPicker_ContactCardInformation,f)),this._$idCardDialog.attr("name",f),e=(new ri).getIdentityAttributes(this._identity),this._identity.entityType.trim().toLowerCase()==v.ServiceHelpers.UserEntity){h=e.toRows();for(y in h)this._element.append(h[y])}else if(this._identity.entityType.trim().toLowerCase()==v.ServiceHelpers.GroupEntity){var p=$("<div/>").addClass("identity-picker-idcard-row").attr("role","tablist").appendTo(this._element),i=$("<span/>").addClass("identity-picker-idcard-tab").text(w.IdentityPicker_IdCardInfo).attr({tabindex:"0",id:"identity-picker-idcard-tab-info",role:"tab","aria-selected":"true"}).appendTo(p),r=$("<span/>").addClass("identity-picker-idcard-tab identity-picker-idcard-unselected-tab").text(w.IdentityPicker_IdCardMembers).attr({tabindex:"0",id:"identity-picker-idcard-tab-members",role:"tab","aria-selected":"false"}).appendTo(p),c=e.toRows()[0].attr({role:"tabpanel","aria-labelledby":"identity-picker-idcard-tab-info"});this._element.append(c);this._constructMemberTabContent().appendTo(this._element);this._getDirectoryMemberEntities(this._identity);i.click(ut(this,function(){i.hasClass("identity-picker-idcard-unselected-tab")&&(i.removeClass("identity-picker-idcard-unselected-tab"),i.attr("aria-selected","true"),r.attr("aria-selected","false"),r.addClass("identity-picker-idcard-unselected-tab"),n._$groupMembersContainer.parent().hide(),c.show(),n._element.css("height","auto"),n._$idCardDialog.css("height","auto"))}));r.click(ut(this,function(){r.hasClass("identity-picker-idcard-unselected-tab")&&(r.removeClass("identity-picker-idcard-unselected-tab"),r.attr("aria-selected","true"),i.attr("aria-selected","false"),i.addClass("identity-picker-idcard-unselected-tab"),c.hide(),n._setSelectedIndex(ht.SelectFirstItem,nt.Positioning.VerticalScrollBehavior.Top),n._$groupMembersContainer.parent().show(),n._element.css("height","auto"),n._$idCardDialog.css("height","auto"),n._groupMembers.length?n._groupMembers.length==1?n._$liveStatus.text(w.IdentityPicker_MembersSingleResultStatus):n._$liveStatus.text(g.format(w.IdentityPicker_MembersMultipleResultStatus,n._groupMembers.length)):n._$liveStatus.text(w.IdentityPicker_NoMembers))}))}e.isEmpty()?$(".ui-dialog-titlebar",this._$idCardDialog).addClass("no-content"):$(".ui-dialog-titlebar",this._$idCardDialog).removeClass("no-content");this._element.css("height","auto");this._repositionDialog();this._$idCardDialog.show();this._$idCardDialog.attr("visibility","");this._$idCardDialog.attr("tabindex","-1");this._$idCardDialog.focus()},t.prototype._constructMemberTabContent=function(){var n=$("<div/>").addClass(t.ID_CARD_MEMBERS_DROPDOWN_CLASS+" "+t.ID_CARD_LIST_CLASS).attr({role:"tabpanel","aria-busy":"true","aria-labelledby":"identity-picker-idcard-tab-members"}).hide(),i;return this._$groupMembersContainer=$("<ul/>").attr({role:"list","aria-labelledby":"identity-picker-idcard-tab-members",tabindex:"0"}).appendTo(n).css({"max-height":Math.min((ft.getSizePx(st.Large)+t.IMAGE_MARGINS_PX)*this._pageSize-10,t.MAX_HEIGHT)+"px"}),i=$("#identity-picker-idcard-tab-members-description.visually-hidden"),i.length||(i=$("<div/>").text(w.IdentityPicker_IdCardMembersTabDescription).attr("id","identity-picker-idcard-tab-members-description").addClass("visually-hidden").appendTo("<body>")),this._$groupMembersContainer.attr("aria-describedby","identity-picker-idcard-tab-members-description"),this._$loading=$("<div/>").addClass("identity-picker-idcard-word-wrap identity-picker-idcard-error").text(w.IdentityPicker_IdCardLoadingMembers).appendTo(n),n},t.prototype._getDirectoryMemberEntities=function(n){var t=this,r=b.getService(v.IdentityService),u=function(n){if(t._element){if(!n)return;t._groupMembers.forEach(ut(t,function(i){n.hasOwnProperty(i.entityId)&&n[i.entityId]&&(i.image=n[i.entityId],$(".identity-picture",t._$groupMembersContainer).each(function(t,r){r.hasAttribute("data-objectid")&&r.getAttribute("data-objectid")===i.entityId&&(r.setAttribute("src",n[i.entityId]),r.setAttribute("class","identity-picture small"))}))}))}},f=function(n){n&&h.logError("_getDirectoryMemberEntities/getIdentityImagesErrorCallback:"+JSON.stringify(n))},e=function(n){if(t._element){if(!n||!n.successors){ut(t,i)();return}if(t._groupMembers=n.successors,t._groupMembers&&t._groupMembers.length>0){t._groupMembers=ft.sortGroupMembersByName(t._groupMembers);t._groupMembers.forEach(function(n){(!n.image||n.image.trim())&&(n.image=v.ServiceHelpers.getDefaultIdentityImage(n))});var r={identityServiceOptions:{operationScope:t._operationScope,identityType:{User:!0,Group:!0},httpClient:t._options.httpClient,extensionData:t._options.extensionData},identityExtensionOptions:{consumerId:t._options.consumerId},sources:[ct.Directory]};t._getEntityOperationsFacade().getImagesForEntities(t._groupMembers,r).then(u,f);t._$loading.hide();t._renderMembersList()}else t._$loading.text(w.IdentityPicker_IdCardNoMembers);t._$groupMembersContainer.parent().removeAttr("aria-busy")}},i=function(n){t._element&&(t._$groupMembersContainer.parent().removeAttr("aria-busy"),t._$loading.text(w.IdentityPicker_IdCardErrorLoadingMembers));n&&h.logError("_displayIdCard/getConnectionsErrorCallback:".concat(JSON.stringify(n)))};r.getIdentityConnections(n,this._operationScope,{User:!0,Group:!0},{successors:!0},{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(ut(this,e),ut(this,i))},t.prototype._isMembersListVisible=function(){return this._$groupMembersContainer&&this._$groupMembersContainer.length&&this._$groupMembersContainer.parent()&&this._$groupMembersContainer.parent().is(":visible")},t.prototype._onIdCardBlur=function(n){this._element.hasClass("ui-dialog-content")&&n&&!$(n.target).closest("#"+t.ID_CARD_DIALOG_ID).length&&!$(n.target).is("#"+t.ID_CARD_DIALOG_ID)&&this._element.dialog("close")},t.prototype._onIdCardClose=function(){this._options.focusElementOnClose&&this._options.focusElementOnClose.is(":visible")?this._options.focusElementOnClose.focus():this._previousFocusedElement.focus();$("body").off("mousedown.contactCard");this._$idCardDialog.off(".contactCard");this._element.dialog("destroy")},t.prototype._onKeyDown=function(n){if(!n||!n.keyCode)return!0;switch(n.keyCode){case ot.UP:return this._isMembersListVisible()?this._prevItem():!0;case ot.DOWN:return this._isMembersListVisible()?this._nextItem():!0;case ot.PAGE_UP:return this._isMembersListVisible()?this._prevPage():!0;case ot.PAGE_DOWN:return this._isMembersListVisible()?this._nextPage():!0;case ot.ENTER:case ot.SPACE:return $(document.activeElement).hasClass("identity-picker-idcard-tab")&&$(document.activeElement).hasClass("identity-picker-idcard-unselected-tab")?(n.stopPropagation(),$(document.activeElement).click(),!1):$(document.activeElement).hasClass("ui-dialog-titlebar-close")?(n.stopPropagation(),this._element.dialog("close"),!1):this._isMembersListVisible()&&this._selectedIndex!=ht.SelectNone?(n.stopPropagation(),$("li",this._$groupMembersContainer).eq(this._selectedIndex).click(),!1):!0;case ot.ESCAPE:case ot.LEFT:return n.stopPropagation(),this._element.dialog("close"),!1;case ot.TAB:var r=$(":tabbable",this._$idCardDialog),t=r.first(),i=r.last();return i.length&&n.target===i[0]&&!n.shiftKey?(t.focus(),!1):t.length&&n.target===t[0]&&n.shiftKey?(i.focus(),!1):!0;default:return!0}},t.prototype._createItem=function(n){var i=this,e,h,o,f,r,c;return n?(h=v.ServiceHelpers.getDefaultIdentityImage(n),n.image&&(e=n.image),o=et.getDisplayName(n),f=et.getSignInAddress(n),f=g.isGuid(f)?"":f,r=$("<li/>").attr("role","listitem").attr("id",s.getId().toString()).height(40),u.RichContentTooltip.addIfOverflow(o,r,{menuContainer:r}),ft.createImgElement(h,e,"identity-picture small",n.entityId).addClass(e&&e.trim()?"":"hidden").appendTo(r),c=$("<div/>").addClass("item-text-container").append($("<div/>").addClass("title large").text(o)).append($("<div/>").addClass("subtitle large").text(f)).appendTo(r),c.css("max-width",this._element.width()-t.MEMBERS_TAB_LEFT_PADDING_PX-t.IMAGE_MARGINS_PX-ft.getSizePx(st.Large)-ft.IDENTITY_ITEM_BUFFER_WIDTH_PX),r.click(ut(this,function(u){u.stopPropagation();var f={identity:n,anchor:r,leftValue:u.pageX!==undefined?u.pageX:r.offset().left,topValue:u.pageY!==undefined?u.pageY:r.offset().top,operationScope:i._operationScope,identityType:i._identityType,httpClient:i._options.httpClient?i._options.httpClient:null,focusElementOnClose:i._options.focusElementOnClose&&i._options.focusElementOnClose.is(":visible")?i._options.focusElementOnClose:i._previousFocusedElement,appendTo:i._options.appendTo,consumerId:i._options.consumerId};s.Enhancement.enhance(t,"<div/>",f)})),r):null},t.prototype._renderMembersList=function(){var n=this,r=function(){return n._scrollTimeout!==null&&(clearTimeout(n._scrollTimeout),n._scrollTimeout=null),n._scrollTimeout=window.setTimeout(ut(n,n._loadNextPage),100),!1},t,i;if(this._$groupMembersContainer.empty(),this._$groupMembersContainer.addClass("items"),this._$groupMembersContainer.scroll(ut(this,r)),this._groupMembers.length==0)this._numItemsDisplayed=0;else for(this._numItemsDisplayed=Math.min(this._groupMembers.length,this._pageSize),t=0;t<Math.min(this._groupMembers.length,this._pageSize);t++)i=this._createItem(this._groupMembers[t]),i&&this._$groupMembersContainer.append(i)},t.prototype._loadNextPage=function(){var t=this._$groupMembersContainer.scrollTop()+this._$groupMembersContainer.outerHeight()>=this._$groupMembersContainer[0].scrollHeight-5,n;if(t){for(n=this._numItemsDisplayed;n<this._numItemsDisplayed+Math.min(this._groupMembers.length-this._numItemsDisplayed,this._pageSize);n++)this._$groupMembersContainer.append(this._createItem(this._groupMembers[n]));this._numItemsDisplayed+=Math.min(this._groupMembers.length-this._numItemsDisplayed,this._pageSize)}this._scrollTimeout!==null&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null)},t.prototype._nextItem=function(){return this._selectedIndex===this._groupMembers.length-1?this._setSelectedIndex(ht.SelectFirstItem):this._selectedIndex<this._groupMembers.length-1&&this._setSelectedIndex(this._selectedIndex+1),!1},t.prototype._prevItem=function(){return this._selectedIndex===-1&&this._groupMembers&&this._groupMembers.length?this._setSelectedIndex(this._groupMembers.length-1):this._selectedIndex>0&&this._setSelectedIndex(this._selectedIndex-1,nt.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._nextPage=function(){var n=-1;return this._loadNextPage(),this._selectedIndex<this._groupMembers.length-1&&this._selectedIndex!==-1&&(n=this._selectedIndex+this._pageSize),this._setSelectedIndex(n<this._groupMembers.length?n:this._groupMembers.length-1,nt.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._prevPage=function(){var n=0;return this._selectedIndex===-1?n=this._groupMembers.length-this._pageSize:this._selectedIndex>0&&(n=this._selectedIndex-this._pageSize),this._setSelectedIndex(n>=0?n:ht.SelectFirstItem,nt.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._setSelectedIndex=function(n,t){var i,u,r,f;t===void 0&&(t=nt.Positioning.VerticalScrollBehavior.Bottom);i=$("li",this._$groupMembersContainer);u=n!==null&&n!==undefined&&i.length&&i.eq(n).length&&(this._selectedIndex!==n||!i.eq(this._selectedIndex).hasClass("selected"));u?(this._selectedIndex=n,i.removeClass("selected").attr("aria-selected","false").removeAttr("id"),r=i.eq(this._selectedIndex),f=r.attr("id")?r.attr("id"):s.getId().toString(),r.addClass("selected").attr({id:f,"aria-selected":"true"}),this._$liveStatus.text(g.format(w.IdentityPicker_SelectedMember,et.getDisplayName(this._groupMembers[n]))),nt.Positioning.scrollIntoViewVertical(r,t)):isNaN(n)||(this._selectedIndex=n)},t.IDCARD_LOADED_EVENT="idcard-finished-loading",t.MAX_HEIGHT=240,t.IMAGE_MARGINS_PX=8,t.MEMBERS_TAB_LEFT_PADDING_PX=11,t.ID_CARD_LIST_CLASS="identity-picker-idcard-list",t.ID_CARD_MEMBERS_DROPDOWN_CLASS=lt.DROPDOWN_BASE_CLASS,t.JQUERY_UI_DIALOG_CLASS=".ui-dialog",t.ID_CARD_DIALOG_ID="idcard-dialog",t}(s.Control);t.IdCardDialog=wt;dt=function(n){function t(i,r){var u,f;return r===void 0&&(r=!1),u=n.call(this,i)||this,u._resolvedIEntity=null,u._loadOnCreate=!1,u._previousInput="",u._isSearchEverIssued=!1,u._readOnlyMode=!1,u._showMruExpander=!1,u._trackTabKeyDown=!1,u._queryTokensRequested={},u._onDocumentLoad=function(){u._$container.is(":visible")?u._recalculateInputWidth():setTimeout(u._onDocumentLoad,50)},u._recalculateInputWidth=function(){if(u._$input)if(u._controlWidth=Math.max(u._$container.width(),t.DEFAULT_WIDTH),u._$input.prev(".identity-picker-resolved")[0]){var n=u._$input.prev(".identity-picker-resolved"),f=u._$container[0].scrollHeight>u._$container.innerHeight(),i=u._$container.offset().left+Math.max(u._$container.outerWidth(),t.DEFAULT_WIDTH)-n.offset().left-n.outerWidth()-parseInt(n.css("margin-right"))-parseInt(u._$container.css("padding-right"))-parseInt(u._$container.css("border-right-width"))-(f?ft.SCROLL_BAR_WIDTH_PX:0)-(u._showMruExpander?t.TRIANGLE_WIDTH_PX:0)-1,r=u._$input.attr("placeholder").length;i>(r?r:15)*6?u._$input.outerWidth(i):u._$input.outerWidth(u._controlWidth-ft.SCROLL_BAR_WIDTH_PX-(u._showMruExpander?t.TRIANGLE_WIDTH_PX:0))}else u._$input.outerWidth(u._controlWidth-(u._showMruExpander?t.TRIANGLE_WIDTH_PX:0)-(u._options.smallScreenRender?u._$closeInput.outerWidth():0))},r||(f=i,f.dropdownContainer||(f.dropdownContainer=ut(u,function(){return $("body")})),u.initializeOptionsInternal(f)),u}return __extends(t,n),t.prototype.initializeOptionsInternal=function(n){if(this._identityType=n.identityType?n.identityType:{User:!0},this._operationScope=n.operationScope?n.operationScope:{IMS:!0},this._size=n.size!==null&&n.size!==undefined?n.size:st.Medium,this._dropdownContainerDelegate=n.dropdownContainer,this._preDropdownRender=this._options.callbacks&&n.callbacks.preDropdownRender?n.callbacks.preDropdownRender:null,this._onDirectorySearchFinished=this._options.callbacks&&n.callbacks.onDirectorySearchFinished?n.callbacks.onDirectorySearchFinished:null,this._loadOnCreate=n.loadOnCreate?n.loadOnCreate:!1,n.placeholderText&&n.placeholderText.trim())this._placeholderText=n.placeholderText;else{var t=v.ServiceHelpers.getIdentityTypeList(this._identityType);this._placeholderText=this._generatePlaceHolder(t)}this._controlLoaded=null;this._delaySearchTimeOutValue=n.delaySearchTimeoutValue||0},t.prototype.initialize=function(){var i=this,r,e,u,f,o,h;n.prototype.initialize.call(this);r=this._options.items;this._selectedItems=[];this._unresolvedItems=[];this._$currentlyFocusedItem=null;this._$container=this._element.parent();this._controlWidth=Math.max(this._$container.innerWidth(),t.DEFAULT_WIDTH);this._element.addClass("identity-picker-search-box");this._options.smallScreenRender&&this._element.addClass("small-screen");this._element.height(ft.getSizePx(this._size)+t.OUTER_PADDING_PX);e=function(n){$(n.target).hasClass("identity-picker-input")||$(n.target).hasClass("identity-picker-search-multiple-name")||$(n.target).hasClass(t.SEARCH_MRU_TRIANGLE_CLASS)||i.focusOnSearchInput()};this._element.on("click.identityPicker",ut(this,e));this._element.on("remove.identityPicker",ut(this,this.dispose));if(this._$input=$("<input>").attr("type","text").attr("spellcheck","false").attr("autocomplete","off").attr("placeholder",this._placeholderText).addClass("identity-picker-input").attr("role","combobox").attr("aria-autocomplete","list").attr("aria-expanded","false"),!this._options.required||this._$input.attr("required","true"),!this._options.ariaDescribedby||this._$input.attr("aria-describedby",this._getAriaDescribedby(this._options.ariaDescribedby)),this._options.excludeAriaLabel||this._$input.attr("aria-label",this._options.ariaLabel?this._options.ariaLabel:this._placeholderText),this._options.elementId&&this._$input.attr("id",this._options.elementId),this._$input.appendTo(this._element),ft.styleElementBySize(this._$input,this._size,!0),this._options.multiIdentitySearch&&(f=s.getId().toString(),u=$("<label/>").addClass("visually-hidden").attr("id",f).appendTo(this._element),this._$input.attr("aria-describedby",this._getAriaDescribedby(f))),this._options.smallScreenRender&&(this._$closeInput=this._createCloseButton(),ft.styleElementBySize(this._$closeInput,this._size,!1),this._$closeInput.hide(),this._$closeInput.appendTo(this._element),this._$closeInput.mousedown(ut(this,function(n){i._setInputText("");i.focusOnSearchInput();i._recalculateInputWidth();n.preventDefault();i._$closeInput.hide()}))),this._options.showMruTriangle=this._options.forceOpen?!1:this._options.showMruTriangle,this._showMruExpander=this._options.showMruTriangle?!0:!1,this._isReadOnly()&&(this._showMruExpander=!1),this._showMruExpander){this._$mruTriangle=$("<span/>").addClass(t.SEARCH_MRU_TRIANGLE_CLASS).addClass("bowtie-icon bowtie-triangle-down").appendTo(this._element);this._$mruTriangle.on("mousedown.identityPicker",ut(this,function(n){i._onMruTriangleMousedown(n)}));this._$mruTriangle.on("click.identityPicker",ut(this,function(n){i._onMruTriangleClick(n)}))}this._recalculateInputWidth();$(window).on("resize.identityPicker",ut(this,function(){i._recalculateInputWidth()}));this._$input.on("focus.identityPicker",ut(this,function(){i._$currentlyFocusedItem=null;i._options.multiIdentitySearch&&(i._selectedItems.length||i._unresolvedItems.length?u.text(g.format(w.IdentityPicker_SelectedIdentities,i._selectedItems.length+i._unresolvedItems.length)):u&&u.text(""));i._$container.triggerHandler("focus")}));if(this._options.showMruOnClick&&this._options.showMru)this._$input.on("mouseup.identityPicker",ut(this,function(n){i._identityPickerDropdown&&!i._identityPickerDropdown.isVisible()&&n.button===0&&i._showAllMruInDropdown(!1,!0)}));if(this._options.multiIdentitySearch&&(this._options.highlightResolved=!1,this._options.watermark=null),this._options.highlightResolved||(this._options.watermark=null),this._options.watermark&&this._showWatermark(),this._options.getFilterByScope||(this._options.getFilterByScope=function(){return null}),this._showContactCard=this._options.showContactCard==!1?!1:!0,v.ServiceHelpers.isAuthenticatedMember()){this._element.on("keydown.identityPicker",ut(this,this._onInputKeyDown));this._$input.on("keyup.identityPicker",ut(this,this._onInputKeyUp));this._$input.on("blur.identityPicker",ut(this,this._onInputBlur));this._$input.on("input.identityPicker",ut(this,this._onInputChange));this._$input.on("click.identityPicker",ut(this,this._onInputClick));this._externalEventDelegate=ut(this,this._onInputBlur);this._dropdownShowEventDelegate=ut(this,this._attachHandlersOnShowDropdown);this._dropdownHideEventDelegate=ut(this,this._detachHandlersOnHideDropdown);this._updateActiveDescendantIdEventDelegate=ut(this,this._updateActiveDescendantId);o=this._dropdownContainerDelegate();this._identityPickerDropdownUniqueId=ft.getRandomString();c.getService().attachEvent(lt.SHOW_DROPDOWN_EVENT_INTERNAL,this._dropdownShowEventDelegate);c.getService().attachEvent(lt.HIDE_DROPDOWN_EVENT_INTERNAL,this._dropdownHideEventDelegate);c.getService().attachEvent(lt.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantIdEventDelegate);h={pageSize:this._options.pageSize,useRemainingSpace:this._options.useRemainingSpace,smallScreenRender:this._options.smallScreenRender,dialogAppendTo:this._options.dialogAppendTo,onItemSelect:ut(this,function(n){if(i._resolveItem(n),i.focusOnSearchInput(),i._options.callbacks&&i._options.callbacks.onItemSelect)i._options.callbacks.onItemSelect(n)}),identityType:this._identityType,operationScope:this._operationScope,httpClient:this._options.httpClient?this._options.httpClient:null,showContactCard:this._showContactCard,showMru:this._isShowMruEnabledInDropdown(),showNoIdentitiesFound:this._options.showNoIdentitiesFound,getFilterByScope:this._options.getFilterByScope,preDropdownRender:this._preDropdownRender,onDirectorySearchFinished:this._onDirectorySearchFinished,loadOnCreate:this._loadOnCreate,extensionData:this._options.extensionData,size:this._options.dropdownSize!==null&&this._options.dropdownSize!==undefined?this._options.dropdownSize:st.Large,width:this._options.dropdownWidth,focusElementOnContactCardClose:this._$input,eventOptions:{uniqueId:this._identityPickerDropdownUniqueId},alignment:{positioningElement:this._$container},consumerId:this._options.consumerId};this._identityPickerDropdown=s.create(lt,o,h);this._attachHandlersOnShowDropdown({uniqueId:this._identityPickerDropdownUniqueId})}else this._showContactCard=!1,this._loadOnCreate=!1,this._options.showMru=!1,this._options.forceOpen=!1,this.enableReadOnlyMode();r&&((typeof r=="string"||r instanceof String)&&r?this.setEntities([],r.trim().split(";")):r instanceof Array&&r.length>0&&this.setEntities(r,[]));this._loadOnCreate&&this.load();this._options.forceOpen&&this._showAllMruInDropdownWithoutDefaultSelection();$(this._onDocumentLoad)},t.prototype.load=function(){var n=this;return this._controlLoaded?this._controlLoaded.promise:(this._controlLoaded=rt.defer(),this._identityPickerDropdown.load().then(ut(this,function(){n._controlLoaded.resolve(!0)}),ut(this,function(){n._controlLoaded.resolve(!1)})))},t.prototype.getIdentitySearchResult=function(){return{resolvedEntities:this._selectedItems,unresolvedQueryTokens:this._unresolvedItems}},t.prototype.clear=function(){this._element&&(this._clearSearchControl(),!this._options.multiIdentitySearch&&this._options.watermark&&this._showWatermark())},t.prototype.isDropdownVisible=function(){return this._identityPickerDropdown&&this._identityPickerDropdown.isVisible()},t.prototype.isDropdownFiltered=function(){return this._identityPickerDropdown&&this._identityPickerDropdown.isFiltered()},t.prototype.addIdentitiesToMru=function(n){if(v.ServiceHelpers.isAuthenticatedMember()){var t=n.map(function(n){if(et.isDirectoryEntityType(n))return n.localId});this._identityPickerDropdown.addIdentitiesToMru(t)}},t.prototype.setEntities=function(n,t,i){var o=n?n.length:0,s=t?t.length:0,l,a,u,e,r,h,c,f;if(o+s!=0){if(!this._options.multiIdentitySearch&&o+s>1){l={source:"setEntities",message:"Can't set more than one entity for a single select control"};throw l;}if(a={UID:!0},s>0){if(u="",this._options.multiIdentitySearch||(u=t[0]?t[0].trim():u),this._options.showTemporaryDisplayName){this._options.watermark&&$(".identity-picker-resolved:has(> .identity-picker-watermark-name)",this._element).off(".identityPicker").remove();e=[];for(f in t)r=t[f].trim(),r.charAt(r.length-1)==">"&&r.indexOf("<")>=0?(h=r.substring(0,r.indexOf("<")-1).trim(),c=r.substring(r.indexOf("<")+1,r.length-1).trim(),e.push(c),this._createTemporaryItem(h,c.toLowerCase()),this._options.multiIdentitySearch||(u=h)):e.push(r);t=e}this._resolveInputToIdentities(t.join(";"),a,i,u)}if(o>0)for(f in n)n[f]&&this._resolveItem(n[f])}},t.prototype.getDropdownPrefix=function(){return this._identityPickerDropdown?this._identityPickerDropdown.getPrefix():""},t.prototype.showMruDropdown=function(){this._showMruExpander&&this._$mruTriangle.trigger("click")},t.prototype.focusOnSearchInput=function(){if(this._$currentlyFocusedItem=null,this._$input.is(":visible"))this._$input.focus();else{var n=$(".identity-picker-resolved:visible",this._element);n.length<=0?(this._$input.show(),this._$input.focus()):($(n[0]).focus(),this._$currentlyFocusedItem=$(n[0]))}this._$container.triggerHandler("focus")},t.prototype.enableReadOnlyMode=function(){this._readOnlyMode=!0;this._showMruExpander=!1;this._hideMruTriangle();this._$container.addClass("identity-picker-readonly");$(".identity-picker-resolved-name",this._element).removeAttr("tabindex");$(".identity-picker-watermark-name",this._element).removeAttr("tabindex");$(".identity-picker-resolved-close",this._element).hide();$(".identity-picker-resolved-name",this._element).attr("aria-label",g.format(w.ReadOnlyPrefix,this._options.ariaLabel?this._options.ariaLabel:this._placeholderText));this._element.removeAttr("aria-label");var n=$(".identity-picker-resolved",this._element);n.removeAttr("aria-describedby");n.attr("tabindex","-1");n.attr("aria-disabled","true");$("visually-hidden",n).remove();this._$input.attr("disabled","");this._$input.removeAttr("role");this._$input.removeAttr("aria-expanded")},t.prototype.disableReadOnlyMode=function(){this._readOnlyMode=!1;this._showMruExpander=this._options.showMruTriangle?!0:!1;this._showMruTriangle();this._$container.removeClass("identity-picker-readonly");this._element.attr("aria-label",this._options.ariaLabel?this._options.ariaLabel:this._placeholderText);$(".identity-picker-watermark-name",this._element).attr("tabindex","0");var t=$(".identity-picker-resolved",this._element),n=$(".identity-picker-resolved-name",this._element);n.length&&(this._options.highlightResolved&&n.attr("tabindex","0"),n.removeAttr("aria-label"),this._element.find(".identity-picker-resolved-close").show(),this._showContactCard&&!this._options.highlightResolved&&t.attr("aria-haspopup","true"));this._$input.prop("disabled",!1);this._$input.attr("role","combobox");this._$input.attr("aria-expanded","false");this._options.highlightResolved||t.attr("tabindex","0");this._setResolvedItemRole(t,n.text())},t.prototype.hasPendingRequests=function(){return this._queryTokensRequested&&Object.keys(this._queryTokensRequested).length>0},t.prototype.dispose=function(){this._detachHandlersOnHideDropdown({uniqueId:this._identityPickerDropdownUniqueId});this._dropdownShowEventDelegate&&c.getService().detachEvent(lt.SHOW_DROPDOWN_EVENT_INTERNAL,this._dropdownShowEventDelegate);this._dropdownHideEventDelegate&&c.getService().detachEvent(lt.HIDE_DROPDOWN_EVENT_INTERNAL,this._dropdownHideEventDelegate);this._updateActiveDescendantIdEventDelegate&&c.getService().detachEvent(lt.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantIdEventDelegate);this._identityPickerDropdown&&this._identityPickerDropdown.dispose();this._$input&&this._$input.off(".identityPicker");this._showMruExpander&&this._$mruTriangle&&this._$mruTriangle.off(".identityPicker");this._element&&this._element.off(".identityPicker");$(window).off("resize.identityPicker");n.prototype.dispose.call(this)},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=b.getService(yt)),this._entityOperationsFacade},t.prototype._isReadOnly=function(){return this._readOnlyMode||!v.ServiceHelpers.isAuthenticatedMember()},t.prototype._hideMruTriangle=function(){this._$mruTriangle&&this._$mruTriangle.addClass("identity-picker-element-hide")},t.prototype._showMruTriangle=function(){this._showMruExpander&&this._$mruTriangle&&this._$mruTriangle.removeClass("identity-picker-element-hide")},t.prototype._getAriaDescribedby=function(n){var t=this._$input.attr("aria-describedby");return t?t.concat(" "+n):n},t.prototype._resetSearchControl=function(n,t){n===void 0&&(n=!0);t===void 0&&(t=!0);this._options.watermark&&!this._options.forceOpen?n?this._showWatermark():this._clearWatermark():(this._$input.show(),this._recalculateInputWidth());this._showMruTriangle();t&&this.focusOnSearchInput()},t.prototype._clearSearchControl=function(){$(".identity-picker-resolved",this._element).off(".identityPicker").remove();this._queryTokensRequested={};this._options.multiIdentitySearch||this._resetSearchControl(!1,!1);this._selectedItems=[];this._unresolvedItems=[];this._$currentlyFocusedItem=null;this._resolvedIEntity=null;this._setInputText("");this._fireInvalidInput()},t.prototype._showAllMruInDropdownWithoutDefaultSelection=function(n){n===void 0&&(n=!0);this._showAllMruInDropdown(n,!1)},t.prototype._showAllMruInDropdown=function(n,t){var i=this,r;n===void 0&&(n=!0);t===void 0&&(t=!0);r=function(t){i._element&&((t&&t.length>0||n)&&i._showDropdown(),i._$input.off("input.identityPicker"),i.focusOnSearchInput(),d.delay(i,0,function(){i._$input.on("input.identityPicker",ut(i,i._onInputChange))}))};this._isSearchEverIssued=!0;this._identityPickerDropdown.showAllMruIdentities(t).then(r)},t.prototype._showProgressCursor=function(){this._fire(t.SEARCH_STARTED_EVENT,null);$(".identity-picker-input",this._element).css("cursor","progress")},t.prototype._stopProgressCursor=function(){this._fire(t.SEARCH_FINISHED_EVENT,null);$(".identity-picker-input",this._element).css("cursor","text")},t.prototype._fireInvalidInput=function(){this._fire(t.INVALID_INPUT_EVENT,null)},t.prototype._fireValidInput=function(){this._fire(t.VALID_INPUT_EVENT,null)},t.prototype._fireRemoveResolvedInput=function(n){this._fire(t.RESOLVED_INPUT_REMOVED_EVENT,n?!0:null)},t.prototype._updateActiveDescendantId=function(n){n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId&&this._$input.attr("aria-activedescendant",n.activeDescendantId)},t.prototype._isShowMruEnabledInDropdown=function(){return this._options.showMru||this._showMruExpander},t.prototype._attachHandlersOnShowDropdown=function(n){if(n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId){if(this._element)this._element.parents().on("scroll.identityPicker resize.identityPicker",ut(this,this._onInputBlur));this.isDropdownVisible()&&(this._$input.attr("aria-expanded","true"),this._$input.attr("aria-owns",this._identityPickerDropdown.getItemsListId()));c.getService().attachEvent(t.DIALOG_MOVE_EVENT,this._externalEventDelegate)}},t.prototype._detachHandlersOnHideDropdown=function(n){n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId&&(this._element&&this._element.parents().off("scroll.identityPicker resize.identityPicker"),this._$input.attr("aria-expanded","false"),this._$input.removeAttr("aria-activedescendant"),c.getService().detachEvent(t.DIALOG_MOVE_EVENT,this._externalEventDelegate))},t.prototype._hideDropdown=function(n){this._identityPickerDropdown&&!this._options.forceOpen&&(this._detachHandlersOnHideDropdown({uniqueId:this._identityPickerDropdownUniqueId}),this._identityPickerDropdown.hide(n),this._$input.removeAttr("aria-activedescendant"))},t.prototype._showDropdown=function(){this._attachHandlersOnShowDropdown({uniqueId:this._identityPickerDropdownUniqueId});this._identityPickerDropdown.show()},t.prototype._compareInputOnInputChangeEvent=function(n){return n=n?n:"",this._previousInput==n},t.prototype._setInputText=function(n){n=n?n:"";this._$input.val(n);this._previousInput=n;this._options.smallScreenRender&&n&&this._$closeInput.show()},t.prototype._resetPreviousInput=function(){this._previousInput=""},t.prototype._onInputChange=function(n){var i=this,t;this._delaySearchTimer||(t=function(){i._inputChangeActions(n)},this._delaySearchTimer=new d.DelayedFunction(this,this._delaySearchTimeOutValue,"inputFieldChanged",t));this._delaySearchTimer.reset()},t.prototype._inputChangeActions=function(n){var t=this.getInputText(),i,r,u,f;if(this._options.smallScreenRender&&(t?this._$closeInput.show():this._$closeInput.hide()),this._compareInputOnInputChangeEvent(t))return!0;if(t=t?t:"",this._previousInput=t,this._resolvedIEntity=null,this._recalculateInputWidth(),t&&t.indexOf(";")<=0?this._fireInvalidInput():this._fireInputValidityEvent(),!t||!this._options.multiIdentitySearch||t.indexOf(";")<0){if(this._isSearchEverIssued=!0,t&&!this._options.multiIdentitySearch){i=t.split(";");r="";for(u in i)if(f=i[u]?i[u].trim():"",f){r=f;break}t=r}return this._identityPickerDropdown.getIdentities(t),!0}this._resolveInputToIdentities(this.getInputText());n.stopPropagation()},t.prototype._onInputClick=function(n){var t=this.getInputText();t&&(this._isSearchEverIssued?this._showDropdown(n):this._options.showMru&&this._showAllMruInDropdown(!1))},t.prototype._onMruTriangleMousedown=function(n){n.preventDefault();n.stopPropagation()},t.prototype._onMruTriangleClick=function(n){if(this._isReadOnly())return!1;this.isDropdownVisible()?this._hideDropdown(n):this._showAllMruInDropdownWithoutDefaultSelection();this.focusOnSearchInput();n.stopPropagation()},t.prototype._isDropdownHovered=function(){return this._identityPickerDropdown.getElement()&&$(this._identityPickerDropdown.getElement()).filter(":hover").length>0},t.prototype._isContactCardHovered=function(){return $(".idcard-dialog").length>0&&$(".idcard-dialog").filter(":hover").length>0},t.prototype._onInputBlur=function(n){if(this._identityPickerDropdown&&!this._isDropdownHovered()&&!($(".idcard-dialog").length||$(".idcard-dialog-content").length)&&this._$input.is(":visible")){var t=!1;this._trackTabKeyDown&&(this.isDropdownVisible()&&this._identityPickerDropdown.getSelectedItem()&&(this._resolveSelectedItem(!0),t=!0),this._trackTabKeyDown=!1);this._options.highlightResolved&&!t&&(this._resolvedIEntity?this._resolveItem(this._resolvedIEntity):this._options.watermark&&!this.getInputText()&&(this._showWatermark(),this._showMruTriangle()));this.isDropdownVisible()&&this._hideDropdown(n);this._options.callbacks&&this._options.callbacks.onInputBlur&&this._options.callbacks.onInputBlur()}},t.prototype._focusOnResolvedItem=function(n){n.is(":visible")?(n.focus(),this._$container.triggerHandler("focus")):this.focusOnSearchInput()},t.prototype._onInputKeyDown=function(n){var i,t;if(!n||this._isReadOnly())return!0;if(n.keyCode===ot.ESCAPE&&this.isDropdownVisible()&&n.stopPropagation(),n.keyCode===ot.UP)return this.isDropdownVisible()&&this._identityPickerDropdown.handleKeyEvent(n),n.preventDefault(),!0;if(n.keyCode===ot.DOWN)return this._identityPickerDropdown&&(this._identityPickerDropdown.isVisible()?this._identityPickerDropdown.handleKeyEvent(n):this._isShowMruEnabledInDropdown()?this._showAllMruInDropdown():this._showDropdown(n)),n.preventDefault(),!0;if(n.keyCode===ot.TAB)return this._trackTabKeyDown=!0,!0;if(n.keyCode===ot.ENTER)return this.isDropdownVisible()?(this.focusOnSearchInput(),this._resolveSelectedItem(),!1):this._options.multiIdentitySearch&&this._$currentlyFocusedItem?(this._$currentlyFocusedItem.click(),!1):!0;if(n.keyCode===ot.RIGHT&&this._showContactCard&&this.isDropdownVisible()&&this._identityPickerDropdown.getSelectedItem()&&this._$input[0].selectionEnd==this._$input.val().length||n.keyCode===ot.DELETE&&this._isShowMruEnabledInDropdown()&&this.isDropdownVisible()&&(i=this._identityPickerDropdown.getSelectedItem(),i&&i.isMru&&et.isDirectoryEntityType(i)))return this._identityPickerDropdown.handleKeyEvent(n),n.preventDefault(),!1;if(!this._$currentlyFocusedItem&&this._$input[0]===document.activeElement&&this._$input[0].selectionStart>0)return!0;if(this._options.callbacks&&this._options.callbacks.onKeyPress)this._options.callbacks.onKeyPress(n.keyCode);switch(n.keyCode){case ot.LEFT:return this._options.multiIdentitySearch?this._$currentlyFocusedItem&&this._$currentlyFocusedItem.prev(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem.blur(),this._$currentlyFocusedItem=this._$currentlyFocusedItem.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem),!1):!this._$currentlyFocusedItem&&(this._selectedItems&&this._selectedItems.length>0||this._unresolvedItems&&this._unresolvedItems.length>0)&&this._$input[0]===document.activeElement&&!this._$input[0].selectionStart?(this._$currentlyFocusedItem=this._$input.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem),!1):!0:!0;case ot.RIGHT:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(this._$currentlyFocusedItem.blur(),this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),!1):!0:!0;case ot.BACKSPACE:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(t=this._$currentlyFocusedItem,this._$currentlyFocusedItem.prev(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),this._removeFromResolved(t.attr("data-signin")),this._removeFromUnresolved(t.attr("data-signin")),t.off(".identityPicker").remove(),this._recalculateInputWidth(),!1):(this._selectedItems&&this._selectedItems.length>0||this._unresolvedItems&&this._unresolvedItems.length>0)&&this._$input[0]===document.activeElement&&!this._$input[0].selectionStart?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._removeFromUnresolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").off(".identityPicker").remove(),this._recalculateInputWidth(),!1):!0:this._selectedItems&&this._selectedItems.length>0?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").off(".identityPicker").remove(),this._resetSearchControl(),!1):!0;case ot.DELETE:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(t=this._$currentlyFocusedItem,this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),this._removeFromResolved(t.attr("data-signin")),this._removeFromUnresolved(t.attr("data-signin")),t.off(".identityPicker").remove(),this._recalculateInputWidth(),!1):!0:this._selectedItems&&this._selectedItems.length>0?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").off(".identityPicker").remove(),this._resetSearchControl(),!1):!0;case ot.SPACE:return this._options.multiIdentitySearch&&this._$currentlyFocusedItem?(this._$currentlyFocusedItem.click(),!1):!0;default:return!0}},t.prototype._fireInputValidityEvent=function(){!this.getInputText().length&&this._selectedItems&&this._selectedItems.length>0&&(!this._unresolvedItems||!this._unresolvedItems.length)?this._fireValidInput():this._fireInvalidInput()},t.prototype._resolveSelectedItem=function(n){if(n===void 0&&(n=!1),this.isDropdownVisible()){var t=this._identityPickerDropdown.getSelectedItem();if(t&&(this._resolveItem(t,!0,null,n),this._options.callbacks&&this._options.callbacks.onItemSelect))this._options.callbacks.onItemSelect(t)}},t.prototype._onInputKeyUp=function(n){return n&&n.keyCode!==ot.DOWN&&n.keyCode!==ot.UP&&n.keyCode!==ot.RIGHT&&this._identityPickerDropdown&&this._identityPickerDropdown.handleKeyEvent(n),!0},t.prototype._removeFromUnresolved=function(n){for(var i=this._getSearchPrefix(n).toLowerCase(),t=this._unresolvedItems.indexOf(i);t>=0;)this._unresolvedItems.splice(t,1),t=this._unresolvedItems.indexOf(i);this._fireInputValidityEvent()},t.prototype._removeFromResolved=function(n,t){function r(t){var i=et.getUniqueIdentifierForDisambiguation(t);return i.toLowerCase()===n.toLowerCase()?($(".idcard-dialog").each(function(){if($(this).is(":visible")&&$(this).attr("data-prefix")&&n.toLowerCase().indexOf($(this).attr("data-prefix").toLowerCase())===0)return $(".ui-dialog-content",$(this)).dialog("close"),!1}),!1):!0}var i=this._selectedItems.filter(r);i.length!=this._selectedItems.length&&(this._selectedItems=i,this._fireInputValidityEvent(),this._fireRemoveResolvedInput(t))},t.prototype.getInputText=function(){return this._$input.val().trim()},t.prototype._resolveInputToIdentities=function(n,i,r,u){var f=this,b=function(n){if(f._element){if(!n||!n.queryToken||!n.identities){l();return}if(n.identities.length!=1)if(i&&i.UID){var e=g.htmlEncode(n.queryToken),r={entityId:t.INACTIVE_ENTITY_ID_PREFIX+"_"+e,entityType:t.INACTIVE_ENTITY_TYPE,originDirectory:ft.VisualStudioDirectory,originId:t.INACTIVE_ORIGIN_ID_PREFIX+"_"+e,isMru:!1,active:!1,displayName:u?u:n.queryToken,signInAddress:n.queryToken,samAccountName:ft.isOnPremiseEnvironment()&&n.queryToken.indexOf("\\")>=0?n.queryToken.split("\\",2)[1]:"",scopeName:ft.isOnPremiseEnvironment()&&n.queryToken.indexOf("\\")>=0?n.queryToken.split("\\",1)[0]:""};r.image=v.ServiceHelpers.getDefaultIdentityImage(r);f._resolveItem(r,!1,n.queryToken)}else f._fireInvalidInput();else n.queryToken.toLowerCase().trim()in f._queryTokensRequested&&f._resolveItem(n.identities[0],!1,n.queryToken);f._hideDropdown();f._stopProgressCursor()}},l=function(n){f._element&&(f._stopProgressCursor(),f._fireValidInput());n&&h.logError("_resolveInputToIdentities/getIdentitiesErrorCallback:"+JSON.stringify(n))},p=n.split(v.ServiceHelpers.GetIdentities_Prefix_Separator),o=[],y,s,w,k,e,d,nt,c;for(s in p)y=p[s]?p[s].trim():"",y.length>0&&(o.push(y),this._unresolveItem(y));this._options.multiIdentitySearch||(this._queryTokensRequested={});for(s in o)this._queryTokensRequested[o[s].toLowerCase().trim()]=!0;if(w=o.length,w)for(this._showProgressCursor(),k=function(){var n=o.slice(50*c,50*c+50);d={identityServiceOptions:{operationScope:r?r:e._operationScope,identityType:e._identityType,httpClient:e._options.httpClient,extensionData:e._options.extensionData},identityExtensionOptions:{consumerId:e._options?e._options.consumerId:a.ConsumerId.UnknownConsumer},prefix:n.join(";"),queryTypeHint:i,sources:[ct.Directory],filterByScope:e._options.getFilterByScope()};nt=e._getEntityOperationsFacade().search(d).then(function(t){if(f._options.retainInputIdentitiesSequenceWithinPage)f._resolveIdentityResponseInSequence(t,n,b,l);else for(var i in t.queryTokenResponse)t.queryTokenResponse[i].then(b,l)},l)},e=this,c=0;c<=w/50;c++)k()},t.prototype._resolveIdentityResponseInSequence=function(n,i,r,u){var o=this,f=[];for(var e in n.queryTokenResponse)n.queryTokenResponse.hasOwnProperty(e)&&f.push(n.queryTokenResponse[e]);rt.allSettled(f).then(function(n){for(var l,e,v,k,f,s,y,d,p=[],w=[],h=0,b=n;h<b.length;h++)f=b[h],f.state===a.PromiseResultStatus.Fulfilled?p.push(f.value):f.state===a.PromiseResultStatus.Rejected&&w.push(f.reason);for(l={},p.forEach(function(n){return l[n.queryToken]=n}),e=0,v=i;e<v.length;e++)k=v[e],f=l[k],f&&r(f);for(s=0,y=w;s<y.length;s++)d=y[s],u(d);c.getService().fire(t.SEQUENCED_IDENTITIES_IN_PAGE_RESOLVED_EVENT_INTERNAL,o)},u)},t.prototype._replaceAndCleanup=function(n){for(var i=!1,t=new RegExp("(( *;+ *)+|^ *)("+n.replace(/[.^$*+?()[{\\|\]-]/g,"\\$&")+")(( *;+ *)+| *$)","gi");this.getInputText().search(t)>=0;)this._setInputText(this.getInputText().replace(t,";")),i=!0;return t=new RegExp("^( *;+ *)+$"),this.getInputText().search(t)||this._setInputText(""),i},t.prototype._findInSelectedItems=function(n){var i=-1,t,r;if(!n)return i;for(t=0,r=this._selectedItems.length;t<r;t++)if(this._selectedItems[t].entityId===n.entityId){i=t;break}return i},t.prototype._showIdCardDialog=function(n){if(this._showContactCard&&v.ServiceHelpers.isAuthenticatedMember()){var t={identity:n.identity,anchor:n.anchor,leftValue:n.leftValue,topValue:n.topValue,operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null,consumerId:this._options.consumerId,appendTo:this._options.dialogAppendTo,useOfficeFabricProfileCard:this._options.useOfficeFabricProfileCard};s.Enhancement.enhance(wt,"<div/>",t)}},t.prototype._clearWatermark=function(){this.isDropdownVisible()&&this._hideDropdown();!this._options.forceOpen&&this._identityPickerDropdown&&this._identityPickerDropdown.reset();this._$input.hide();this._options.smallScreenRender&&this._$closeInput.hide();this._setInputText("")},t.prototype._showWatermark=function(){var n=this,a=this._isControlInFocus(),r,i,e,s,h,c,f,o,l;this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH);this._clearWatermark();r=this._options.watermark;i=$("<span/>").addClass("identity-picker-resolved").addClass("identity-picker-resolved-single-search");i.attr("tabindex","-1");i.blur(ut(this,function(t){n._identityPickerDropdown&&!n._isDropdownHovered()&&!n._isContactCardHovered()&&i.is(":visible")&&(n.isDropdownVisible()&&n._hideDropdown(t),n._options.callbacks&&n._options.callbacks.onInputBlur&&n._options.callbacks.onInputBlur())}));ft.styleElementBySize(i,this._size,!0);this._options.smallScreenRender?e=$("<span/>").addClass("icon identity-picker-text-search-icon bowtie-icon bowtie-search"):(h=v.ServiceHelpers.getDefaultIdentityImage(r),r.image&&(s=r.image),e=ft.createImgElement(h,s,"user-picture-resolved",r.entityId));ft.styleElementBySize(e,this._size,!1);c=et.getDisplayName(r);f=$("<span/>").addClass("identity-picker-watermark-name").addClass("text-cursor").text(c);i.append(e).append(f).insertBefore(this._$input);i.width(this._controlWidth-t.OUTER_PADDING_PX-(this._showMruExpander?t.TRIANGLE_WIDTH_PX:0));f.attr("tabindex","0");o=function(t){t.stopPropagation();i.off(".identityPicker").remove();n._$input.show();n._showMruTriangle();n._recalculateInputWidth();n.focusOnSearchInput();n._setInputText("")};f.on("focus.identityPicker",ut(this,function(t){if(n._isReadOnly())return!1;o(t)}));i.on("mousedown.identityPicker",ut(this,function(t){if(n._isReadOnly())return!1;t.preventDefault();o(t);n._showAllMruInDropdown(!1)}));a&&this.focusOnSearchInput();this._options.callbacks&&this._options.callbacks.getCustomTooltip&&(l=ft.createTooltip(r,this._options.callbacks.getCustomTooltip()),u.RichContentTooltip.add(l,f,{showOnFocus:!this._options.smallScreenRender}))},t.prototype._createTemporaryItem=function(n,t){var i=$("<span/>").addClass("identity-picker-resolved identity-picker-temp").attr("data-signin",ft.replaceBackslash(t)).attr("tabindex","-1"),f,r;ft.styleElementBySize(i,this._size,!0);f=ft.createImgElement(v.ServiceHelpers.DefaultUserImage,"","user-picture-resolved");ft.styleElementBySize(f,this._size,!1);r=$("<span/>").addClass("identity-picker-resolved-name").text(n);this._options.multiIdentitySearch?(i.addClass("identity-picker-resolved-bg"),r.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([]))):(i.addClass("identity-picker-resolved-single-search"),this._options.highlightResolved||(i.attr("tabindex","0"),i.addClass("identity-picker-resolved-single-bg")),$(".identity-picker-resolved",this._element).off(".identityPicker").remove());this._options.highlightResolved&&r.addClass("text-cursor");i.append(f).append(r).insertBefore(this._$input);this._options.multiIdentitySearch?this._recalculateInputWidth():(this._$input.hide(),this._options.smallScreenRender&&this._$closeInput.hide());this._isControlInFocus()&&this.focusOnSearchInput();this._options.callbacks&&this._options.callbacks.getCustomTooltip&&u.RichContentTooltip.add(n,r,{showOnFocus:!this._options.smallScreenRender})},t.prototype._isControlInFocus=function(){var n=$(document.activeElement);return n.length>0&&(this._element.is(n[0])||this._element.has(n[0]).length>0)},t.prototype._createResolvedItem=function(n){var t=$("<span/>").addClass("identity-picker-resolved").attr("data-signin",ft.replaceBackslash(n));return this._isReadOnly()||t.attr("tabindex","-1"),this._options.multiIdentitySearch?t.addClass("identity-picker-resolved-bg"):(t.addClass("identity-picker-resolved-single-search"),this._showMruExpander&&this._options.highlightResolved&&t.addClass("identity-picker-drop-icon-padding"),this._options.highlightResolved||(t.attr("tabindex","0"),!this._options.ariaDescribedby||t.attr("aria-describedby",this._getAriaDescribedby(this._options.ariaDescribedby)),t.addClass("identity-picker-resolved-single-bg"))),t},t.prototype._setResolvedItemRole=function(n,t){n.attr("role","button").attr("aria-disabled","false").attr("aria-label",g.format(w.IdentityPicker_ButtonResolvedItemLabel,g.htmlEncodeJavascriptAttribute(t)));var i=s.getId().toString(),r=$("<div/>").attr("id",i).addClass("visually-hidden").appendTo(n);n.attr("aria-describedby",this._getAriaDescribedby(i));this._options.highlightResolved?r.text(w.IdentityPicker_FocusChangeValue):r.text(g.format(w.IdentityPicker_ButtonResolvedItemDescription,g.htmlEncodeJavascriptAttribute(t))+". "+(this._showContactCard&&!this._options.highlightResolved?w.IdentityPicker_EnterSpaceMessage+". ":"")+w.IdentityPicker_DeleteBackspaceMessage)},t.prototype._resolveItem=function(n,i,r,f){var e=this,d,c,a,o,nt,tt,y,l,s,h,k,p,b;if(i===void 0&&(i=!0),r===void 0&&(r=null),f===void 0&&(f=!1),this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH),n){if(d=this._isControlInFocus(),!this._options.multiIdentitySearch&&this._selectedItems&&this._selectedItems.length>0&&this._clearSearchControl(),this.isDropdownVisible()&&this._hideDropdown(),!this._options.forceOpen&&(this._options.multiIdentitySearch||!this._options.highlightResolved)&&this._identityPickerDropdown&&this._identityPickerDropdown.reset(),this._resetPreviousInput(),i&&this._setInputText(""),c=r?this._getSearchPrefix(r):"",c&&(this._replaceAndCleanup(c.toLowerCase()),this._removeFromUnresolved(c.toLowerCase()),this._element.find('.identity-picker-resolved[data-signin="'+ft.replaceBackslash(c.toLowerCase())+'"][data-unresolved="true"]').off(".identityPicker").remove()),this._options.showTemporaryDisplayName&&(this._options.multiIdentitySearch?this._element.find('.identity-picker-temp[data-signin="'+ft.replaceBackslash(c.toLowerCase())+'"]').remove():$(".identity-picker-temp",this._element).remove()),this._findInSelectedItems(n)!=-1){this._fireInputValidityEvent();return}if(this._selectedItems.push(n),$(".ui-dialog-content",$(".idcard-dialog:visible")).dialog("close"),a=et.getUniqueIdentifierForDisambiguation(n),this._$input.width(10),o=this._createResolvedItem(a.toLowerCase()),ft.styleElementBySize(o,this._size,!0),tt=v.ServiceHelpers.getDefaultIdentityImage(n),n.image&&(nt=n.image),y=ft.createImgElement(tt,nt,"user-picture-resolved",n.entityId),ft.styleElementBySize(y,this._size,!1),l=et.getDisplayName(n),this._options.smallScreenRender&&this._$closeInput.hide(),s=this._createCloseButton(),this._options.multiIdentitySearch&&s.addClass("identity-picker-resolved-bg"),this._options.highlightResolved||s.addClass("identity-picker-resolved-single-bg"),ft.styleElementBySize(s,this._size,!1),s.click(ut(this,function(n){if(e._removeFromResolved(a.toLowerCase(),!0),o.off(".identityPicker").remove(),e._identityPickerDropdown&&e._identityPickerDropdown.updatePrefix(""),e._resolvedIEntity=null,!e._options.multiIdentitySearch){e._resetSearchControl();return}e._recalculateInputWidth();e.focusOnSearchInput();n.stopPropagation()})),o.append(y).append(s).insertBefore(this._$input),h=$("<span/>").addClass("identity-picker-resolved-name").text(l),this._readOnlyMode&&h.attr("aria-label",g.format(w.ReadOnlyPrefix,this._options.ariaLabel?this._options.ariaLabel:this._placeholderText)),this._options.multiIdentitySearch&&h.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([y,s])),this._options.highlightResolved?h.addClass("text-cursor"):et.isDirectoryEntityType(n)&&h.addClass("pointer-cursor"),n.active!==!1||et.isAadGroup(n)||h.addClass("identity-picker-inactive-name"),this._isReadOnly()?s.hide():this._setResolvedItemRole(o,l),o.append(h),this._options.multiIdentitySearch?this._recalculateInputWidth():(this._$input.hide(),this._options.smallScreenRender&&this._$closeInput.hide(),this._showMruExpander&&this._hideMruTriangle(),this._options.watermark&&$(".identity-picker-resolved:has(> .identity-picker-watermark-name)",this._element).off(".identityPicker").remove(),this._options.highlightResolved&&!this._isReadOnly()&&h.attr("tabindex","0")),k=function(t){t.stopPropagation();e._resolvedIEntity=n;e._removeFromResolved(a.toLowerCase());o.off(".identityPicker").remove();e._$input.show();e._showMruTriangle();e._recalculateInputWidth();e.focusOnSearchInput();e._setInputText(l);e._identityPickerDropdown&&e._identityPickerDropdown.updatePrefix(l);e._$input.select()},this._options.highlightResolved)h.on("focus.identityPicker",ut(this,function(n){if(e._isReadOnly())return!1;k(n)}));p=function(t){if($.contains(s[0],t.target)||s[0]===t.target)return!0;if(e._isReadOnly())return!1;if(b)return b=!1,!1;if(b=!0,t.preventDefault(),e._options.highlightResolved)k(t);else if(t.stopPropagation(),et.isDirectoryEntityType(n)){e._showIdCardDialog({anchor:o,identity:n,leftValue:0,consumerId:e._options.consumerId});var i=function(n){n.stopPropagation();o.off("click.identityPicker",i)};o.on("click.identityPicker",i)}e._options.highlightResolved&&e._showAllMruInDropdownWithoutDefaultSelection(!1)};b=!1;o.on("mousedown.identityPicker",ut(this,function(n){p(n)}));o.on("click.identityPicker",ut(this,function(n){p(n)}));if(!this._options.multiIdentitySearch&&!this._options.highlightResolved)o.on("keypress.identityPicker",ut(this,function(n){n&&n.keyCode===ot.ENTER&&p(n)}));o.blur(ut(this,function(n){e._identityPickerDropdown&&!e._isDropdownHovered()&&!e._isContactCardHovered()&&o.is(":visible")&&(e.isDropdownVisible()&&e._hideDropdown(n),e._options.callbacks&&e._options.callbacks.onInputBlur&&e._options.callbacks.onInputBlur())}));this._isReadOnly()||!this._showContactCard||this._options.highlightResolved||o.attr("aria-haspopup","true");this._fireInputValidityEvent();this._$container[0].scrollTop=this._$container[0].scrollHeight;d&&!f&&this.focusOnSearchInput();this._options.highlightResolved&&v.ServiceHelpers.isAuthenticatedMember()&&u.RichContentTooltip.add(ft.createTooltip(n),h,{showOnFocus:!this._options.smallScreenRender})}},t.prototype._getItemNameContainerMaxWidth=function(n){var t=this._controlWidth-ft.SCROLL_BAR_WIDTH_PX;for(var i in n)n.hasOwnProperty(i)&&(t-=parseInt(n[i].css("width"),10));return t},t.prototype._createCloseButton=function(){var n=$("<span/>").addClass("identity-picker-resolved-close-icon bowtie-icon");return n.addClass(this._options.smallScreenRender?"bowtie-edit-remove":"bowtie-edit-delete"),$("<span/>").addClass("identity-picker-resolved-close").append(n)},t.prototype._getSearchPrefix=function(n){var t=/^.*[(<{\[]\s*([^\s]+@[^\s]+\.[^\s]+[^)>}\]])\s*[)>}\]]+\s*$/.exec(n);return t&&t[0]===n?t[1]:n},t.prototype._unresolveItem=function(n){var o=this,f,i,h,r,e,c,l;if(this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH),this._resetPreviousInput(),n){if(f=this._getSearchPrefix(n),this._unresolvedItems.indexOf(f.toLowerCase())!=-1){this._replaceAndCleanup(n.toLowerCase());return}if(!this._replaceAndCleanup(n.toLowerCase()))return;this._options.showTemporaryDisplayName&&(this._options.multiIdentitySearch?this._element.find('.identity-picker-temp[data-signin="'+ft.replaceBackslash(f.toLowerCase())+'"]').remove():$(".identity-picker-temp",this._element).remove());this._fireInvalidInput();this._unresolvedItems.push(f.toLowerCase());this._$input.width(10);i=this._createResolvedItem(f.toLowerCase()).attr("data-unresolved","true");ft.styleElementBySize(i,this._size,!0);h=$("<span/>").addClass("identity-picker-resolved-close-icon bowtie-icon bowtie-edit-delete");h.addClass(this._options.smallScreenRender?"bowtie-edit-remove":"bowtie-edit-delete");r=$("<span/>").addClass("identity-picker-resolved-close").append(h);this._options.multiIdentitySearch?r.addClass("identity-picker-resolved-bg"):this._options.highlightResolved||r.addClass("identity-picker-resolved-single-bg");ft.styleElementBySize(r,this._size,!1);r.click(ut(this,function(){o._removeFromUnresolved(n.toLowerCase());i.off(".identityPicker").remove();o._recalculateInputWidth();o.focusOnSearchInput()}));i.append(r).insertBefore(this._$input);e=$("<span/>").addClass("identity-picker-unresolved-name").text(g.decodeHtmlSpecialChars(n));this._options.multiIdentitySearch&&e.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([r]));i.attr("role","button").attr("aria-label",g.format(w.IdentityPicker_ButtonUnresolvedItemLabel,n));c=s.getId().toString();l=$("<div/>").attr("id",c).addClass("visually-hidden").appendTo(i);l.text(g.format(w.IdentityPicker_ButtonUnresolvedItemDescription,n)+". "+w.IdentityPicker_DeleteBackspaceMessage);i.attr("aria-describedby",c);i.append(e);this._recalculateInputWidth();this.focusOnSearchInput();this._$container[0].scrollTop=this._$container[0].scrollHeight;u.RichContentTooltip.add(w.IdentityPicker_UnresolvedIdentity+": "+n,e,{showOnFocus:!this._options.smallScreenRender})}},t.prototype._generatePlaceHolder=function(n){return this._isInArray(v.ServiceHelpers.UserEntity,n)&&this._isInArray(v.ServiceHelpers.GroupEntity,n)?w.IdentityPicker_PlaceholderTextUserGroup:this._isInArray(v.ServiceHelpers.UserEntity,n)&&!this._isInArray(v.ServiceHelpers.GroupEntity,n)?w.IdentityPicker_PlaceholderTextUser:!this._isInArray(v.ServiceHelpers.UserEntity,n)&&this._isInArray(v.ServiceHelpers.GroupEntity,n)?w.IdentityPicker_PlaceholderTextGroup:w.IdentityPicker_PlaceholderTextPrefix},t.prototype._isInArray=function(n,t){return t.indexOf(n)>=0},t.INVALID_INPUT_EVENT="identity-picker-search-invalid-input",t.VALID_INPUT_EVENT="identity-picker-search-valid-input",t.RESOLVED_INPUT_REMOVED_EVENT="identity-picker-resolved-input-removed",t.SEARCH_STARTED_EVENT="identity-picker-search-started",t.SEARCH_FINISHED_EVENT="identity-picker-search-finished",t.DIALOG_MOVE_EVENT="dialog-move",t.SEQUENCED_IDENTITIES_IN_PAGE_RESOLVED_EVENT_INTERNAL="identity-picker-sequenced-identities-in-page-resolved-internal",t.SEARCH_MRU_TRIANGLE_CLASS="identity-picker-search-drop-icon",t.DEFAULT_WIDTH=140,t.OUTER_PADDING_PX=2,t.TRIANGLE_WIDTH_PX=19,t.NAME_PADDING_PX=8,t.INACTIVE_ENTITY_TYPE="inactive_entitytype",t.INACTIVE_ENTITY_ID_PREFIX="INACTIVE_ENTITY_ID",t.INACTIVE_ORIGIN_ID_PREFIX="INACTIVE_ORIGIN_ID",t}(s.Control);t.IdentityPickerSearchControl=dt,function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large"}(st=t.IdentityPickerControlSize||(t.IdentityPickerControlSize={})),function(n){n[n.AvatarText=0]="AvatarText";n[n.AvatarOnly=1]="AvatarOnly";n[n.TextOnly=2]="TextOnly"}(pt=t.EDisplayControlType||(t.EDisplayControlType={})),function(n){n[n.ExpiredAccessToken=0]="ExpiredAccessToken";n[n.IsGuestUser=1]="IsGuestUser"}(kt||(kt={}));gt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._displayedEntity=null,i._identityType=t.identityType?t.identityType:{User:!0},i._operationScope=t.operationScope?t.operationScope:{IMS:!0},i._size=t.size!==null&&t.size!==undefined?t.size:st.Medium,i._turnOffHover=t.turnOffHover?t.turnOffHover:!1,i}return __extends(t,n),t.prototype.initialize=function(){var t,i;if(n.prototype.initialize.call(this),v.ServiceHelpers.isAuthenticatedMember()||(this._turnOffHover=!0),t=this._options.item,!t||(typeof t=="string"||t instanceof String)&&!t.trim()){i={source:"IdentityDisplayControl.initialize()",message:"The item argument to the IdentityDisplayControl cannot be null or empty"};throw i;}this._displayType=this._options.displayType?this._options.displayType:pt.AvatarText;(typeof t=="string"||t instanceof String)&&t?(t=t.trim(),this._displayString(t),this._resolveStringToEntity(t)):this._displayEntity(t,"")},t.prototype.getDisplayedEntity=function(){if(this._displayedEntity)return this._displayedEntity;throw{source:"getResolvedEntity",message:"No resolved entity found."};},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=b.getService(yt)),this._entityOperationsFacade},t.prototype._resolveStringToEntity=function(n){var t=this,r=function(i){if(t._element){if(!i||!i.queryToken||!i.identities)return;if(i.identities.length!=1)return;t._getEntityOperationsFacade().queryTokenEntityImageCache.set(n,i.identities[0].image);t._displayEntity(i.identities[0],n)}},i=function(n){n&&h.logWarning("_resolveStringToEntity/getIdentitiesErrorCallback:"+JSON.stringify(n))},u={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:a.ConsumerId.UnknownConsumer},prefix:n,queryTypeHint:{UID:!0},sources:[ct.Directory]},f=this._getEntityOperationsFacade().search(u).then(function(n){for(var u in n.queryTokenResponse)n.queryTokenResponse[u].then(ut(t,r),ut(t,i))},i)},t.prototype._showIdCardDialog=function(n){v.ServiceHelpers.isAuthenticatedMember()&&s.Enhancement.enhance(wt,"<div/>",{identity:n.identity,anchor:n.anchor,leftValue:n.leftValue,operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null,consumerId:this._options.consumerId,appendTo:this._options.dialogAppendTo})},t.prototype._displayString=function(n){var t=$("<span/>").addClass("identity-picker-display").attr("data-item",n).attr("tabindex","-1"),i,r,f,e;this._turnOffHover||u.RichContentTooltip.add(this._options.friendlyDisplayName?this._options.friendlyDisplayName+" <"+n+">":n,t);ft.styleElementBySize(t,this._size,!0);i=null;this._displayType!=pt.TextOnly&&(r=this._getEntityOperationsFacade().queryTokenEntityImageCache.get(n),f=r?r:v.ServiceHelpers.DefaultUserImage,i=ft.createImgElement(f,"","user-picture-resolved"),ft.styleElementBySize(i,this._size,!1),t.append(i));this._displayType!=pt.AvatarOnly?(e=$("<span/>").addClass("identity-picker-resolved-name").text(this._options.friendlyDisplayName?this._options.friendlyDisplayName:n),t.append(e)):i.attr("alt",this._options.friendlyDisplayName?this._options.friendlyDisplayName+" <"+n+">":n);t.appendTo(this._element)},t.prototype._displayEntity=function(n,i){var r=this,f,o,c,s,l,a;if(n){this._displayedEntity=n;var e=et.getDisplayName(this._displayedEntity),y=et.getUniqueIdentifierForDisambiguation(this._displayedEntity),u=$("<span/>").addClass("identity-picker-display").attr("data-signin",ft.replaceBackslash(y.toLowerCase())).attr("tabindex","-1");if(ft.styleElementBySize(u,this._size,!0),f=null,o=null,this._displayType!=pt.TextOnly&&(c=v.ServiceHelpers.getDefaultIdentityImage(this._displayedEntity),f=ft.createImgElement(c,this._displayedEntity.image?this._displayedEntity.image:"","user-picture-resolved",this._displayedEntity.entityId),ft.styleElementBySize(f,this._size,!1),u.append(f)),this._displayType!=pt.AvatarOnly?(o=$("<span/>").addClass("identity-picker-resolved-name").text(e),$('.identity-picker-display[data-item="'+i+'"]',this._element).remove(),u.append(o)):(s=et.getSignInAddress(this._displayedEntity),f.attr("alt",e!==s?e+" <"+s+">":e)),l=function(){var n=$('.idcard-dialog[data-objectid="'+r._displayedEntity.entityId+'"]');n.length&&$(".ui-dialog-content",n).dialog("close")},a=function(){r._hoverIdCardEnterTimer=new d.DelayedFunction(r,t.DEFAULT_HOVER_WAIT_ENTER_INTERVAL,"showDisplayControlContactCard",function(){r._element.parent().length>0&&r._element.is(":visible")&&r._showIdCardDialog({anchor:u,identity:r._displayedEntity,leftValue:0,consumerId:r._options.consumerId})})},!this._turnOffHover&&et.isDirectoryEntityType(this._displayedEntity))u.on("mouseenter",function(){r._hoverIdCardEnterTimer?r._hoverIdCardEnterTimer.reset():(a(),r._hoverIdCardEnterTimer.start())}).on("mouseleave",function(){r._hoverIdCardEnterTimer&&r._hoverIdCardEnterTimer.cancel();var n=$('.idcard-dialog[data-objectid="'+r._displayedEntity.entityId+'"]'),i=function(){r._hoverIdCardExitTimer?r._hoverIdCardExitTimer.reset():(r._hoverIdCardExitTimer=new d.DelayedFunction(r,t.DEFAULT_HOVER_WAIT_EXIT_INTERVAL,"closeDisplayControlContactCard",l),r._hoverIdCardExitTimer.start())};n&&n.length&&n.mouseenter(function(){r._hoverIdCardExitTimer.cancel();n.mouseleave(function(){i()})});i()});this._element.empty();u.appendTo(this._element)}},t.DEFAULT_HOVER_WAIT_ENTER_INTERVAL=800,t.DEFAULT_HOVER_WAIT_EXIT_INTERVAL=200,t.MIN_WIDTH=100,t.OUTER_PADDING_PX=2,t}(s.Control);t.IdentityDisplayControl=gt;ft=function(){function n(){}return n.styleElementBySize=function(n,t,i){i===void 0&&(i=!0);switch(t){case st.Small:i?n.addClass("element-height-small"):n.addClass("element-2d-small");n.hasClass("identity-picker-resolved-single-search")&&n.addClass("element-height-small-compensate-padding");break;case st.Medium:i?n.addClass("element-height-medium"):n.addClass("element-2d-medium");n.hasClass("identity-picker-resolved-single-search")&&n.addClass("element-height-medium-compensate-padding");break;case st.Large:i?n.addClass("element-height-large"):n.addClass("element-2d-large");n.hasClass("identity-picker-resolved-single-search")&&n.addClass("element-height-large-compensate-padding")}},n.createImgElement=function(n,t,i,r){t===void 0&&(t="");i===void 0&&(i="");r===void 0&&(r="");var u=$("<img>").css("background","url('".concat(n,"') no-repeat")).css("background-size","100%").attr("src",t?t:n).attr("alt","").attr("draggable","false").on("dragstart",function(){return!1});u.on("error",function(){u.attr("src")&&u.attr("src")===n?(u.off("error"),u.css("background-color","#7d7d7d").css("background-size","100%")):u.attr("src",n)});u.on("load",function(){u.attr("src")&&u.attr("src")!==n&&u.css("background-image","none")});return i&&u.addClass(i),r&&u.attr("data-objectid",r),u},n.getRandomString=function(){return Math.random().toString(36).substring(5)},n.getSizePx=function(n){switch(n){case st.Small:return 16;case st.Medium:return 24;case st.Large:return 32}},n.isValidEmail=function(n){var t=n.split("@");return t.length===2&&t[0].length>=1&&t[1].length>=1?!0:!1},n.isOnPremiseEnvironment=function(){return!o.getPageContext().webAccessConfiguration.isHosted==!0},n.sortGroupMembersByName=function(n){return n.sort(function(n,t){return!n||!n.displayName?-1:!t||!t.displayName?1:n.displayName.toLocaleLowerCase().localeCompare(t.displayName.toLocaleLowerCase())})},n.createTooltip=function(t,i){var u,r,f;return i?i:t?(u=t.displayName&&t.displayName.trim()?t.displayName:"",r="",n.isOnPremiseEnvironment()?t.samAccountName&&t.samAccountName.trim()&&(r="("+(t.scopeName&&t.scopeName.trim()?t.scopeName+"\\":"")+t.samAccountName+")"):t.signInAddress&&t.signInAddress.trim()&&(r="<"+t.signInAddress+">"),f="",t.active!==!1||et.isAadGroup(t)||(f=" - "+(t.entityType.toLowerCase().trim()==v.ServiceHelpers.UserEntity?w.IdentityPicker_InactiveUser:t.entityType.toLowerCase().trim()==v.ServiceHelpers.GroupEntity?w.IdentityPicker_InactiveGroup:w.IdentityPicker_InactiveIdentity)),(u?u:"")+(r?" "+r:"")+f):""},n.replaceBackslash=function(n){return n.replace(/\\/g,"%")},n.UserEntityType=v.ServiceHelpers.UserEntity,n.GroupEntityType=v.ServiceHelpers.GroupEntity,n.VisualStudioDirectory=v.ServiceHelpers.VisualStudioDirectory,n.AzureActiveDirectory=v.ServiceHelpers.AzureActiveDirectory,n.SourceDirectory=v.ServiceHelpers.SourceDirectory,n.FIXED_POSTIION_CLASS="identity-picker-fixed-position",n.SCROLL_BAR_WIDTH_PX=20,n.IDENTITY_ITEM_BUFFER_WIDTH_PX=18,n}();at=function(){function n(){}return n.createStringEntity=function(t,i){var r=g.htmlEncode(t),u={entityId:n.STRING_ENTITY_ID_PREFIX+"_"+r,entityType:n.STRING_ENTITY_TYPE,originDirectory:n.STRING_DIRECTORY,originId:n.STRING_ORIGIN_ID_PREFIX+"_"+r,localDirectory:n.STRING_DIRECTORY,localId:n.STRING_LOCAL_ID_PREFIX+"_"+r,isMru:!1,displayName:r};return u.image=i||v.ServiceHelpers.getDefaultIdentityImage(u),u},n.isStringEntityId=function(t){return!t||!t.trim()?!1:t.indexOf(n.STRING_ENTITY_ID_PREFIX)==0?!0:!1},n.isStringPrefixedLocalId=function(t){return!t||!t.trim()?!1:t.indexOf(n.STRING_LOCAL_ID_PREFIX)==0},n.STRING_ENTITY_TYPE="string_entitytype",n.STRING_ENTITY_ID_PREFIX="STRING_ENTITYID",n.STRING_DIRECTORY="STRING_DIRECTORY",n.STRING_ORIGIN_ID_PREFIX="STRING_ORIGINID",n.STRING_LOCAL_ID_PREFIX="STRING_LOCALID",n}();t.EntityFactory=at;var et=function(){function n(){}return n.isDirectoryEntityType=function(n){return n.entityType?n.entityType.toLowerCase().trim()==v.ServiceHelpers.UserEntity||n.entityType.toLowerCase().trim()==v.ServiceHelpers.GroupEntity:!1},n.isAadGroup=function(n){return n.entityType&&n.entityType.toLowerCase().trim()==v.ServiceHelpers.GroupEntity&&n.originDirectory.toLowerCase().trim()==v.ServiceHelpers.AzureActiveDirectory},n.getUniqueIdentifierForDisambiguation=function(n){return ft.isOnPremiseEnvironment()||n.entityType.toLowerCase().trim()!=v.ServiceHelpers.UserEntity?n.entityId:n.signInAddress&&ft.isValidEmail(n.signInAddress)?n.signInAddress:n.entityId},n.getDisplayName=function(t){return t.displayName&&t.displayName.trim()?t.displayName:n.getSignInAddress(t,n.isGitHubIdentity(t))},n.isGitHubIdentity=function(n){return n.originDirectory&&n.originDirectory.toLowerCase().trim()==v.ServiceHelpers.GitHubDirectory},n.getNonDiacriticDisplayName=function(n){return this.replaceDiacriticCharacters(this.getDisplayName(n))},n.replaceDiacriticCharacters=function(n){var t,i,r;if(n){for(t=n,i=0;i<t.length;i++)r=t.charAt(i),r in a.diacriticsRemovalMap&&(t=t.replace(r,a.diacriticsRemovalMap[r]));return t}return n},n.getSignInAddress=function(n,t){return(t===void 0&&(t=!1),ft.isOnPremiseEnvironment()&&n.samAccountName&&n.samAccountName.trim())?(n.scopeName&&n.scopeName.trim()?n.scopeName+"\\":"")+n.samAccountName:!t&&n.signInAddress&&n.signInAddress.trim()?n.signInAddress:!t&&n.mail&&n.mail.trim()?n.mail:n.mailNickname&&n.mailNickname.trim()?n.mailNickname:""},n}(),ri=function(){function n(){}return n.prototype.getIdentityAttributes=function(n){if(n.entityType.trim().toLowerCase()==v.ServiceHelpers.UserEntity)return new ti(n);if(n.entityType.trim().toLowerCase()==v.ServiceHelpers.GroupEntity)return new ii(n);throw{source:"getIdentityAttributes",message:"identity entityType do not match existing type"};},n}(),vt=function(){function n(n,t,i){this._displayTitle=n;this._displayContent=t;this._needWordWrap=i?i:!1}return n.prototype.getDisplayTitle=function(){return this._displayTitle},n.prototype.getDisplayContent=function(){return this._displayContent},n.prototype.constructAttribute=function(n){var r=$("<div/>").addClass("identity-picker-idcard-attribute-name").attr("id","identity-picker-idcard-attribute-name_"+n).text(this.getDisplayTitle()),i=this.getDisplayContent(),t=$("<div/>").addClass("identity-picker-idcard-ellipsis-overflow"),f;return u.RichContentTooltip.addIfOverflow(i,t,{menuContainer:t}),this._isValidSendEmailAttribute()?f=$("<a/>").attr({"aria-labelledby":"identity-picker-idcard-attribute-name_"+n,href:"mailto:"+i,tabindex:"0"}).text(i).appendTo(t):t.text(this.getDisplayContent()),this._needWordWrap&&t.addClass("identity-picker-idcard-word-wrap"),[r,t]},n.prototype._isValidSendEmailAttribute=function(){return w.IdentityPicker_IdCardMail.toLowerCase()==this.getDisplayTitle().toLowerCase().trim()&&ft.isValidEmail(this.getDisplayContent())},n}(),ui=function(){function n(){this._withContactCard=!1;this._smallScreenRender=!1;this._withContactCard=!0;this._focusElementOnContactCardClose=null}return n.prototype.withPrefix=function(n){return this._prefix=n,this},n.prototype.withEntity=function(n){return this._entity=n,this},n.prototype.withContactCard=function(n,t){return this._withContactCard=n,this._withContactCard&&(this._focusElementOnContactCardClose=t),this},n.prototype.forControlOfSize=function(n){return this._size=n,this},n.prototype.withIdentityServiceOptions=function(n){return this._identityServiceOptions=n,this},n.prototype.withIdentityExtensionOptions=function(n){return this._identityExtensionOptions=n,this},n.prototype.withHoverSupport=function(n){return this._supportsHover=n,this},n.prototype.withSmallScreenRender=function(n){return this._smallScreenRender=n,this},n.prototype.withDialogAppendTo=function(n){return this._dialogAppendTo=n,this},n.prototype.registerCallbacks=function(n){return this._callbacks=n,this},n.prototype.build=function(){var i=this,t,c,f,e,o,s,r,l,h,v,y;if(!this._entity||this._size===null||this._size===undefined||!this._identityServiceOptions||!this._identityServiceOptions.identityType||!this._identityServiceOptions.operationScope||!this._callbacks)return null;if(t=$("<li/>").attr("role","option"),this._smallScreenRender&&(c=$("<i/>").addClass("ms-Icon ms-Icon--CheckMark"),f=$("<span/>").addClass("container"),c.appendTo(f),e=$("<span/>").addClass("selected-fade"),f.appendTo(e),e.appendTo(t)),ft.styleElementBySize(t,this._size,!0),n._appendImage(this._entity,t,this._size),o=et.isGitHubIdentity(this._entity),s=!o&&this._withContactCard&&et.isDirectoryEntityType(this._entity),this._entity.isMru&&et.isDirectoryEntityType(this._entity)&&(r=$("<div/>").addClass("bowtie-icon bowtie-edit-delete bowtie-icon-small identity-picker-delete-icon").attr("role","button").appendTo(t),u.RichContentTooltip.add(w.IdentityPicker_RemoveFromMru,r,{menuContainer:r}),ft.styleElementBySize(r,this._size,!1),s&&r.addClass("with-idcard"),r.hide(),l=ut(this,function(){var n={};n[a.TelemetryProperties.entityId]=i._entity.entityId;n[a.TelemetryProperties.consumerId]=i._identityExtensionOptions?i._identityExtensionOptions.consumerId:a.ConsumerId.UnknownConsumer;tt.publishEvent(new tt.TelemetryEventData(a.Telemetry.Area,a.Telemetry.Feature_Click_Remove_Mru,n));i._callbacks.deleteIconClickDelegate(i._entity,t)}),this._callbacks.deleteIconClickDelegate&&r.click(l)),s&&!et.isGitHubIdentity(this._entity)&&n._appendIdCard(this._entity,t,this._size,this._identityServiceOptions,this._identityExtensionOptions,this._callbacks,this._focusElementOnContactCardClose,this._dialogAppendTo),h=n._appendTextContainer(this._entity,t,this._size,this._prefix,this._smallScreenRender),this._size==st.Small&&(v=this._entity.entityType.toLowerCase().trim()==at.STRING_ENTITY_TYPE?this._entity.displayName:et.getSignInAddress(this._entity,o),u.RichContentTooltip.add(v,h,{menuContainer:h})),y=function(){var n,r;i._smallScreenRender&&(n=17,d.delay(null,n,function(){t.children(".selected-fade").attr("class","selected-fade-active")}),r=400,d.delay(null,n+r,function(){t.children(".selected-fade").attr("class","selected-fade")}));i._callbacks.entityListItemClickDelegate(i._entity)},this._callbacks.entityListItemClickDelegate&&t.click(y),this._entity.isMru&&this._supportsHover)t.on("mouseenter",ut(this,function(){t.children(".identity-picker-delete-icon").show()})).on("mouseleave",ut(this,function(){t.children(".identity-picker-delete-icon").hide()}));return t},n._appendTextContainer=function(t,i,r,u,f){var s,o,e;return f===void 0&&(f=!1),s=et.isGitHubIdentity(t)&&!(t.displayName&&t.displayName.trim()),s?o=$("<div/>").addClass("item-text-container").append($("<div/>").append($("<div/>").addClass("bowtie-icon bowtie-brand-github list-icon")).addClass("title-only").addClass(r==st.Large?"large":"").append(n._highlightPrefix(et.getDisplayName(t),u,!0))):(o=$("<div/>").addClass("item-text-container").append($("<div/>").addClass("title").addClass(r==st.Large?"large":"").append(n._highlightPrefix(et.getDisplayName(t),u,!0))),e=et.getSignInAddress(t,et.isGitHubIdentity(t)),e=g.isGuid(e)?"":e,r!=st.Small&&e&&e.trim()&&o.append($("<div/>").append($("<div/>").addClass(et.isGitHubIdentity(t)?"bowtie-icon bowtie-brand-github list-icon":"")).addClass("subtitle").addClass(r==st.Large?"large":"").append(n._highlightPrefix(e,u)))),o.appendTo(i),f||o.height(ft.getSizePx(r)+lt.IMAGE_MARGINS_PX),o},n._appendImage=function(n,t,i){var f=v.ServiceHelpers.getDefaultIdentityImage(n),r,u;n.image&&(r=n.image);u=ft.createImgElement(f,r,r&&r.trim()?"identity-picture":"identity-picture hidden",n.entityId).appendTo(t);ft.styleElementBySize(u,i,!1)},n._appendIdCard=function(n,t,i,r,f,e,o,h){var c=$("<div/>").addClass("bowtie-icon bowtie-contact-card identity-picker-contact-card-icon").attr("role","button").appendTo(t),l;u.RichContentTooltip.add(w.IdentityPicker_ShowContactCardTitle,c,{menuContainer:c});ft.styleElementBySize(c,i,!1);l=ut(this,function(t){t.stopPropagation();var u={identity:n,anchor:c,operationScope:r.operationScope,identityType:r.identityType,httpClient:r.httpClient?r.httpClient:null,focusElementOnClose:o,leftValue:c.offset().left,topValue:c.offset().top+c.outerHeight(),consumerId:f.consumerId,appendTo:h},i={};i[a.TelemetryProperties.entityId]=n.entityId;i[a.TelemetryProperties.consumerId]=f?f.consumerId:a.ConsumerId.UnknownConsumer;tt.publishEvent(new tt.TelemetryEventData(a.Telemetry.Area,a.Telemetry.Feature_Click_IdCard,i));s.Enhancement.enhance(wt,"<div/>",u)});c.click(l)},n._highlightPrefix=function(n,t,i){var u;if(i===void 0&&(i=!1),!n)return null;var o=et.replaceDiacriticCharacters(n),s=et.replaceDiacriticCharacters(t),r=o.toLowerCase().indexOf(s.toLowerCase()),f=function(n,t,i){return $("<span/>").append(g.htmlEncode(n.substring(0,i))).append($("<b>").text(n.substr(i,t))).append(g.htmlEncode(n.substr(i+t)))},e=function(n,t,i,r){for(var u=et.replaceDiacriticCharacters(n),e=et.replaceDiacriticCharacters(t);i>0&&u.charAt(i-1)!=r;)i=u.toLowerCase().indexOf(e.toLowerCase(),i+1);return i>0?f(n,t.length,i):null};if(r){if(r>0){if(i&&(u=e(n,t,r," "),u)||ft.isOnPremiseEnvironment()&&t.indexOf("\\")<0&&(u=e(n,t,r,"\\"),u))return u}else if(ft.isOnPremiseEnvironment()&&t.indexOf("\\")>0)if(t=t.substring(t.indexOf("\\")+1),r=o.toLowerCase().indexOf(s.toLowerCase()),r){if(i&&(u=e(n,t,r," "),u))return u}else return f(n,t.length,r)}else return f(n,t.length,r);return $("<span/>").text(n)},n}(),ct=function(){function n(){}return n.Directory="Directory",n.Mru="Mru",n.Persistent="Persistent",n.String="String",n}();t.SourceId=ct,function(n){n[n.Sync=0]="Sync";n[n.Async=1]="Async"}(ni=t.SourceType||(t.SourceType={}));bt=function(){function n(){}return n.PreferFirst="preferfirst",n.PreferSecond="prefersecond",n}();yt=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._mruEntities={},t._syncSources={},t._requestStack=[],t._deferredStack=[],t._userMruReady={},t._entityRetrieverPrepComplete={},t._mruEntitiesPromise={},t._mruEntities={},t.registerSyncSource({id:ct.Mru,sourceType:ni.Sync,getEntities:t._mruSourceGetEntitiesHandler,sortRank:10}),t.queryTokenEntityImageCache=new y.HashCache,t}return __extends(t,n),t.prototype.registerSyncSource=function(n){if(!(n.id in this._syncSources)){for(var t in this._syncSources)if(this._syncSources[t].sortRank==n.sortRank)return;this._syncSources[n.id]=n}},t.prototype.search=function(n){var i=this,e,u,f;if(!n.sources||n.sources.length==0||!n.identityServiceOptions){e={source:"EntityOperationsFacade: search",message:"missing arguments"};throw e;}var o=rt.defer(),s=o.promise,r=l.FilterByScope.GetHashCode(n.filterByScope);return typeof this._requestStack[r]=="undefined"&&(this._requestStack[r]=[]),this._requestStack[r].push(n),typeof this._deferredStack[r]=="undefined"&&(this._deferredStack[r]=[]),this._deferredStack[r].push(o),u=ut(this,function(){for(var e=function(){var e=i._requestStack[r].pop(),o=i._deferredStack[r].pop();n=[];f=i._getRegisteredSyncSourcesSorted().filter(function(n){return e.sources.indexOf(n)!=-1});f&&f.forEach(ut(i,function(r){var u=i._syncSources[r].getEntities.bind(i),f=u(n,e);n=t.mergeEntities(f,n)}));u={entityResponse:[],queryTokenResponse:{}};e.sources.indexOf(ct.Directory)!=-1&&(u.queryTokenResponse=i._directorySourceGetEntities(n,e));n.length>0?i.getImagesForEntities(n,e).then(function(t){n.forEach(ut(i,function(n){t.hasOwnProperty(n.entityId)&&(n.image=t[n.entityId])}));u.entityResponse=n;o.resolve(u)}):o.resolve(u)},n,f,u;i._requestStack[r].length>0;)e()}),f=this.load({loadMru:n.sources.indexOf(ct.Mru)!=-1,filterByScope:n.filterByScope}),f.isFulfilled()?u():f.then(u,u),s},t.prototype.isUserMruReady=function(n){return this._userMruReady[l.FilterByScope.GetHashCode(n)]},t.prototype.getMruEntitiesUnchecked=function(n){return this._mruEntities[l.FilterByScope.GetHashCode(n)]},t.prototype.refreshUserMru=function(n){return this._getUserMruEntities(null,null,n)},t.prototype.load=function(n){var i=this,t=l.FilterByScope.GetHashCode(n.filterByScope);return this._entityRetrieverPrepComplete[t]&&(!n.loadMru||this._userMruReady[t])?this._entityRetrieverPrepComplete[t].promise:(this._entityRetrieverPrepComplete[t]=rt.defer(),n.loadMru?this._mruEntitiesPromise[t]?this._mruEntitiesPromise[t].then(ut(this,function(){i._entityRetrieverPrepComplete[t].resolve(!0)}),ut(this,function(){i._entityRetrieverPrepComplete[t].resolve(!1)})):(this._mruEntitiesPromise[t]=this._getUserMruEntities(null,null,n.filterByScope),this._mruEntitiesPromise[t].then(ut(this,function(){i._entityRetrieverPrepComplete[t].resolve(!0)}),ut(this,function(){i._entityRetrieverPrepComplete[t].resolve(!1)}))):this._entityRetrieverPrepComplete[t].resolve(!0),this._entityRetrieverPrepComplete[t].promise)},t.filterEntities=function(n,t){return!n||n.length==0?[]:n.filter(function(n){return n.displayName&&et.getNonDiacriticDisplayName(n).toLowerCase().indexOf(et.replaceDiacriticCharacters(t))==0?!0:ft.isOnPremiseEnvironment()&&n.samAccountName&&n.samAccountName.trim().toLowerCase().indexOf(t)==0||ft.isOnPremiseEnvironment()&&n.scopeName&&n.samAccountName&&(n.scopeName+"\\"+n.samAccountName).trim().toLowerCase().indexOf(t)==0||n.signInAddress&&n.signInAddress.trim().toLowerCase().indexOf(t)==0||!n.signInAddress&&n.mail&&n.mail.trim().toLowerCase().indexOf(t)==0||!n.signInAddress&&!n.mail&&n.mailNickname&&n.mailNickname.trim().toLowerCase().indexOf(t)==0?!0:!1})},t.mergeEntities=function(n,i,r){var u,f,e;if(r===void 0&&(r=bt.PreferFirst),u={},f=[],!n&&!i)return[];if(!i||i.length==0)return n?n:[];if(!n||n.length==0)return i?i:[];n.forEach(function(n){var i=t._getMergingKeyFromEntity(n);u[i]=u.hasOwnProperty(i)?t._mergeSimilarEntities(u[i],n,r):n});i.forEach(function(n){var i=t._getMergingKeyFromEntity(n),f;i in u?(f=t._mergeSimilarEntities(u[i],n,r),u[i]=f):u[i]=n});for(e in u)u[e].isMru?f.unshift(u[e]):f.push(u[e]);return f},t.prototype.getImagesForEntities=function(n,t){var r=rt.defer(),s=r.promise,e={},c=b.getService(v.IdentityService),u,f,o;try{u=c.getIdentityImages(n,{httpClient:t&&t.identityServiceOptions&&t.identityServiceOptions.httpClient?t.identityServiceOptions.httpClient:null});f=[];for(o in u)f.push(u[o]);rt.allSettled(f).then(function(n){n.forEach(function(n){if(n.state==a.PromiseResultStatus.Fulfilled){if(!n.value||Object.keys(n.value).length!=1||!Object.keys(n.value)[0]||!Object.keys(n.value)[0].trim())return;var i=Object.keys(n.value)[0],t=n.value[i];if(!t||!t.trim())return;e[i]=t}else n.state==a.PromiseResultStatus.Rejected&&n.reason&&h.logError("_getImagesForEntities/_getImagesForEntitiesErrorCallback:"+JSON.stringify(n.reason))});r.resolve(e)},function(n){n&&h.logError("_getImagesForEntities/_getImagesForEntitiesErrorCallback:"+JSON.stringify(n));r.reject(n)})}catch(i){if(i!==Object(i)||!("source"in i)||i.source!="IdentityService")throw i;}return s},t._getMergingKeyFromEntity=function(n){var t,i;return ft.isOnPremiseEnvironment()&&n&&n.entityType&&n.localId&&n.localDirectory.toLowerCase().trim()==v.ServiceHelpers.VisualStudioDirectory&&(n.entityType.toLowerCase().trim()==v.ServiceHelpers.UserEntity||n.entityType.toLowerCase().trim()==v.ServiceHelpers.GroupEntity)?n.localId:n.entityType.toLowerCase().trim()==v.ServiceHelpers.UserEntity?(t=et.getSignInAddress(n),i=t?t:n.entityId,i):n.entityType.toLowerCase().trim()==v.ServiceHelpers.GroupEntity?n.displayName&&n.displayName.trim()?n.mailNickname&&n.mailNickname.trim()?n.displayName+n.mailNickname:n.mail&&n.mail.trim()?n.displayName+n.mail:n.displayName:n.entityId:n.entityType.toLowerCase().trim()==at.STRING_ENTITY_TYPE?n.entityId:void 0},t._mergeSimilarEntities=function(n,i,r){var f,u,e;if(r===void 0&&(r=bt.PreferFirst),n==null)return i;if(i==null)return n;f={entityId:t._computeValue("entityId",n,i,r),entityType:t._computeValue("entityType",n,i,r),originDirectory:t._computeValue("originDirectory",n,i,r),originId:t._computeValue("originId",n,i,r),localDirectory:t._computeValue("localDirectory",n,i,r),localId:t._computeValue("localId",n,i,r)};u=["displayName","scopeName","department","jobTitle","mail","mailNickname","physicalDeliveryOfficeName","signInAddress","surname","guest","description","image","isMru","samAccountName","active","telephoneNumber",];for(e in u)f[u[e]]=t._computeValue(u[e],n,i,r);return f},t._computeValue=function(n,t,i,r){r===void 0&&(r=bt.PreferFirst);return r==bt.PreferFirst?t[n]?typeof t[n]=="string"||t[n]instanceof String?t[n].trim()?t[n]:i[n]:t[n]:i[n]:i[n]?typeof i[n]=="string"||i[n]instanceof String?i[n].trim()?i[n]:t[n]:i[n]:t[n]},t._filterMruEntitiesByIdentityType=function(n,t){if(!n.identityServiceOptions||!n.identityServiceOptions.identityType)return t;var i=v.ServiceHelpers.getIdentityTypeList(n.identityServiceOptions.identityType);return t.filter(function(n){return i.indexOf(n.entityType.trim().toLowerCase())>=0})},t.prototype._mruSourceGetEntitiesHandler=function(n,i){var r=t._filterMruEntitiesByIdentityType(i,this._mruEntities[l.FilterByScope.GetHashCode(i.filterByScope)]);return i.prefix&&(r=t.filterEntities(r,i.prefix)),r},t.prototype._directorySourceGetEntities=function(n,i){var e=this,c,o,u,l;if(!i||!i.prefix)return{};var r={},s={},a=b.getService(v.IdentityService);try{c={httpClient:i.identityServiceOptions.httpClient,minResults:i.identityServiceOptions.minResults?i.identityServiceOptions.minResults:n?n.length>v.IdentityService.MIN_RESULTS?0:v.IdentityService.MIN_RESULTS-n.length:v.IdentityService.MIN_RESULTS,maxResults:i.identityServiceOptions.minResults?i.identityServiceOptions.minResults:v.IdentityService.MAX_RESULTS,extensionData:i.identityServiceOptions.extensionData,getFilterByScope:function(){return i.filterByScope}};o=a.getIdentities(i.prefix,i.identityServiceOptions.operationScope,i.identityServiceOptions.identityType,c,i.queryTypeHint,i.identityExtensionOptions);for(u in o)l=ut(this,function(u){o[u].then(ut(e,function(f){i.prefix&&i.prefix.length>=1&&(f.identities=f&&f.identities?t.mergeEntities(f.identities,n):n);f.identities.length>0?e.getImagesForEntities(f.identities,i).then(function(n){f.identities.forEach(function(t){n.hasOwnProperty(t.entityId)&&(t.image=n[t.entityId])});r[u].resolve(f)}):r[u].resolve(f)}),ut(e,function(n){n&&h.logWarning("_directorySourceGetEntities/getIdentitiesErrorCallback:"+JSON.stringify(n));r[u].reject(n?n:null)}))}),l(u),r[u]=rt.defer(),s[u]=r[u].promise}catch(f){if(f!==Object(f)||!("source"in f)||f.source!="IdentityService")throw f;}return s},t.prototype._getRegisteredSyncSourcesSorted=function(){var n=this,t=Object.keys(this._syncSources);return t.sort(function(t,i){return n._syncSources[t].sortRank>n._syncSources[i].sortRank?1:-1}),t},t.prototype._getUserMruEntities=function(n,t,i){var f=this,e=rt.defer(),c=e.promise,r=l.FilterByScope.GetHashCode(i),o,s,h;try{return(this._userMruReady[r]=!1,o=ut(this,function(n){f._userMruReady[r]=!0;f._mruEntities[r]=n.filter(function(n){return n.active!==!1});f._mruEntities[r].forEach(function(n){n.image=v.ServiceHelpers.getDefaultIdentityImage(n)});e.resolve(!0)}),s=ut(this,function(){f._mruEntities[r]=[];e.resolve(!1)}),l.FilterByScope.isFilterByScopeEmpty(i))?rt(o([])):(h=b.getService(v.MruService),h.getMruIdentities({IMS:!0},v.MruService.DEFAULT_IDENTITY_ID,v.MruService.DEFAULT_FEATURE_ID,{httpClient:n?n.httpClient:null,filterByScope:i},{consumerId:t?t.consumerId:a.ConsumerId.UnknownConsumer}).then(o,s))}catch(u){if(u!==Object(u)||!("source"in u)||u.source!="MruService")throw u;}return c},t}(b.VssService);t.EntityOperationsFacade=yt;ti=function(){function n(n){this._attributes=this._mapEntityPropertiesToAttributes(n)}return n.prototype._mapEntityPropertiesToAttributes=function(n){var t=[];return n.jobTitle&&t.push(new vt(w.IdentityPicker_IdCardJobTitle,n.jobTitle)),n.mailNickname&&!g.isGuid(n.mailNickname)&&t.push(new vt(w.IdentityPicker_IdCardAlias,n.mailNickname)),n.physicalDeliveryOfficeName&&t.push(new vt(w.IdentityPicker_IdCardOffice,n.physicalDeliveryOfficeName)),n.department&&t.push(new vt(w.IdentityPicker_IdCardDepartment,n.department)),t},n.prototype.isEmpty=function(){return!(this._attributes.length>0)},n.prototype._appendAttributeBlock=function(t,i){var r=this._attributes[t].constructAttribute(n._idCardEntityAttributeCounter++);for(var u in r)r[u].appendTo(i)},n.prototype.toRows=function(){var i=[],n,r,t,u,f;for(r in this._attributes)t=parseInt(r),this._isEven(t)?(n&&i.push(n),n=$("<div/>").addClass("identity-picker-idcard-row"),u=$("<div/>").addClass("identity-picker-idcard-left-attribute").appendTo(n),this._appendAttributeBlock(t,u)):(f=$("<div/>").addClass("identity-picker-idcard-right-attribute").appendTo(n),this._appendAttributeBlock(t,f));return n&&i.push(n),i},n.prototype._isEven=function(n){return n%2==0},n._idCardEntityAttributeCounter=0,n}();ii=function(){function n(n){this._attributes=this._mapEntityPropertiesToAttributes(n)}return n.prototype._mapEntityPropertiesToAttributes=function(n){var t=[],i=new vt(w.IdentityPicker_IdCardDescription,n.description?n.description:"",!0);return t.push(i),n.scopeName&&t.push(new vt(w.IdentityPicker_IdCardGroupSource,this._getScopeNameByDirectoryType(n))),n.mail&&t.push(new vt(w.IdentityPicker_IdCardMail,n.mail)),n.mailNickname&&!g.isGuid(n.mailNickname)&&t.push(new vt(w.IdentityPicker_IdCardAlias,n.mailNickname)),t},n.prototype._getScopeNameByDirectoryType=function(n){var t=n.originDirectory.trim().toLowerCase()==v.ServiceHelpers.VisualStudioDirectory?w.IdentityPicker_IdCardImsGroupSource:w.IdentityPicker_IdCardAadGroupSource;return g.format(t,n.scopeName)},n.prototype.isEmpty=function(){return!(this._attributes.length>0)},n.prototype._appendAttributeBlock=function(t,i){var r=this._attributes[t].constructAttribute(n._idCardEntityAttributeCounter++);for(var u in r)r[u].appendTo(i)},n.prototype.toRows=function(){var t=$("<div/>").addClass("identity-picker-idcard-info"),r,n,u,f,e,o,i;if(this._isValidIndex(1))for(r=$("<div/>").addClass("identity-picker-idcard-column").appendTo(t),n=1;this._isValidIndex(n);)u=$("<div/>").addClass("identity-picker-idcard-row").appendTo(r),f=$("<div/>").addClass("identity-picker-idcard-left-attribute").appendTo(u),this._appendAttributeBlock(n,f),n++;return this._attributes[0].getDisplayContent()&&(e=$("<div/>").addClass("identity-picker-idcard-column").appendTo(t),o=$("<div/>").addClass("identity-picker-idcard-left-attribute").appendTo(e),this._appendAttributeBlock(0,o)),i=[],i.push(t),i},n.prototype._isValidIndex=function(n){return typeof this._attributes[n]!="undefined"},n._idCardEntityAttributeCounter=0,n}()});

define("VSS/Controls/Panels",["require","exports","VSS/Ajax","VSS/Controls","VSS/Diag","VSS/Resources/VSS.Resources.Platform","VSS/Controls/StatusIndicator","VSS/Utils/Core","VSS/Utils/UI","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h){var a,v;Object.defineProperty(t,"__esModule",{value:!0});t.AjaxPanel=t.AjaxPanelO=t.CollapsiblePanel=void 0;var c=s.domElem,y=h.getErrorMessage,l=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({collapsed:!0,iconCss:"icon",iconCollapseCss:"bowtie-icon bowtie-toggle-tree-collapsed",iconExpandCss:"bowtie-icon bowtie-toggle-tree-expanded"},t))},t.prototype._swapDefaultToggleIconForCustom=function(n){this._$toggleIcon.remove();this._$toggleIcon=n;this._header.addClass(t._defaultToggleIconOverrideClass)},t.prototype._createControl=function(){var t=this,n=this._options;if(this._isDisabled=!1,n.hoverCss)this.getElement().on("mouseenter",function(){$(this).addClass(n.hoverCss)}).on("mouseleave",function(){$(this).removeClass(n.hoverCss)});this._header=$(c("div","tfs-collapsible-header"));this._options.headerNotFocusable?this._header.attr("role","presentation"):this._header.attr({tabIndex:"0",role:"button","aria-expanded":String(this.isExpanded())});n.headerCss&&this._header.addClass(n.headerCss);this._header.on("click.CollapsiblePanel",function(){return t.toggleExpandedState()});this._header.on("keydown",function(n){if(n.target===n.currentTarget&&(n.keyCode===s.KeyCode.ENTER||n.keyCode===s.KeyCode.SPACE)&&!s.KeyUtils.isModifierKey(n))return t.toggleExpandedState()});this._header.on("mouseenter focus",function(n){return n.preventDefault(),t._header.addClass("focus"),!1});this._header.on("mouseleave blur",function(n){return n.preventDefault(),t._header.removeClass("focus"),!1});return this._$toggleIcon=$(c("span","tfs-collapsible-collapse")).attr("aria-hidden","true").addClass(n.iconCss).addClass(n.collapsed?n.iconCollapseCss:n.iconExpandCss),n.collapseCss&&this._$toggleIcon.addClass(n.collapseCss),this._header.append(this._$toggleIcon),this.getElement().append(this._header),this._content=$(c("div","tfs-collapsible-content")),n.contentCss&&this._content.addClass(n.contentCss),n.collapsed&&this._content.hide(),this.getElement().append(this._content),this.getElement()},t.prototype._createIn=function(t){n.prototype._createIn.call(this,t);this._createControl()},t.prototype._enhance=function(n){if(this._options.collapsed=n.hasClass("collapsed"),this._createElement(),this._createControl(),n.after(this.getElement()),this.appendContent(n),this._options.headerText)this.appendHeaderText(this._options.headerText);else if(this._options.headerContent)this.appendHeader(this._options.headerContent),this._options.customToggleIcon&&this._swapDefaultToggleIconForCustom(this._options.customToggleIcon);else{var t=n.attr("title");t&&(n.hasClass("header")&&(n.removeClass("header"),this._header.addClass("header")),this.appendHeader(t))}},t.prototype.replaceHeaderTextIfPresent=function(n){return $("span.tfs-collapsible-text",this._header).text(n)},t.prototype.appendHeaderText=function(n){this._header.attr("title",n);var t=$("<span/>").text(n).addClass("tfs-collapsible-text");return(this._options.headingLevel===undefined||this._options.headingLevel>0)&&t.attr({role:"heading","aria-level":this._options.headingLevel?String(this._options.headingLevel):"2"}),this.appendHeader(t)},t.prototype.appendHeader=function(n){return this._header.append(n),this},t.prototype.prependHeader=function(n){return this._header.prepend(n),this},t.prototype.appendContent=function(n){var i=this._options,t;return typeof n=="function"?i.collapsed?(this._dynamicContents||(this._dynamicContents=[]),this._dynamicContents.push(n)):t=n.call(this):t=n,t&&typeof t!="function"&&(this._content.append(t),this.getElement().removeClass("collapsed")),this},t.prototype.isExpanded=function(){return this._options.collapsed?!1:!0},t.prototype.expand=function(){this.isExpanded()||this.toggleExpandedState()},t.prototype.collapse=function(){this.isExpanded()&&this.toggleExpandedState()},t.prototype.toggleExpandedState=function(){var n=this._options,r=this._content,o=this._dynamicContents,u,i,f,e;if(this._isDisabled)return!1;if(n.collapsed=!n.collapsed,u=this._$toggleIcon,u.removeClass(n.iconCollapseCss+" "+n.iconExpandCss),u.addClass(n.collapsed?n.iconCollapseCss:n.iconExpandCss),this._options.headerNotFocusable||this._header.attr("aria-expanded",String(!n.collapsed)),n.collapsed)r.hide(),n.expandCss&&this.getElement().removeClass(n.expandCss),this._fire(t.EVENT_CONTENT_COLLAPSED);else{if(o){for(i=0,f=o;i<f.length;i++)e=f[i],typeof e=="function"&&r.append(e.apply(undefined));this._dynamicContents=null}r.show();n.expandCss&&this.getElement().addClass(n.expandCss);this._fire(t.EVENT_CONTENT_EXPANDED)}if(this._options.onToggleCallback&&typeof this._options.onToggleCallback=="function")this._options.onToggleCallback(this.isExpanded());return!1},t.prototype.setDisabled=function(n){this._isDisabled!==n&&(n?(this._header.addClass("disabled"),this._$toggleIcon.hide(),this._header.removeAttr("tabindex")):(this._header.removeClass("disabled"),this._$toggleIcon.show(),this._header.attr("tabindex","0")),this._isDisabled=n)},t.prototype.isCollapsiblePanelDisabled=function(){return this._isDisabled},t.EVENT_CONTENT_EXPANDED="collapsible-panel-expanded",t.EVENT_CONTENT_COLLAPSED="collapsible-panel-collapsed",t.enhancementTypeName="tfs.collapsiblepanel",t._defaultToggleIconOverrideClass="custom-toggle-icon",t}(r.Control);t.CollapsiblePanel=l;r.Enhancement.registerJQueryWidget(l,"collapsible");r.Enhancement.registerEnhancement(l,".tfs-collapsible");a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"ajax-panel",replaceContent:!0,cache:!0},t))},t.prototype.initialize=function(){var t=this._options.url;n.prototype.initialize.call(this);t&&this.beginLoad(t,this._options.urlParams,this._options.success,this._options.error)},t.prototype._dispose=function(){this._cancelPendingLoad();n.prototype._dispose.call(this)},t.prototype.beginLoad=function(n,t,s,h){var l=this,c,a;u.logTracePoint("AjaxPanel.beginLoad.start");this._cancelPendingLoad();c=new o.Cancelable(this);this._cancelable=c;this.getElement().empty();this._options.showStatusIndicator!==!1&&(a=r.BaseControl.createIn(e.StatusIndicator,this.getElement(),{center:!0,imageClass:"big-status-progress",message:f.Loading}),a.start());this._element.attr("aria-busy","true");i.issueRequest(n,{type:"GET",data:t,dataType:"html",traditional:!0,cache:this._options.cache}).then(c.wrap(function(n){l.onLoadCompleted(n);typeof s=="function"&&s.call(self,n)}),c.wrap(function(n){var t;typeof h=="function"&&(t=h.call(self,n)===!0);l.onLoadError(n,t)}))},t.prototype.onLoadCompleted=function(n){this.getElement()&&this._options.replaceContent&&(this.getElement().empty(),this.getElement().html(n),r.Enhancement.ensureEnhancements(this.getElement()));this._element.removeAttr("aria-busy");u.logTracePoint("AjaxPanel.beginLoad.complete")},t.prototype.onLoadError=function(n,t){t||this.showError(n);this._element.removeAttr("aria-busy");u.logTracePoint("AjaxPanel.beginLoad.complete")},t.prototype.showError=function(n){this.getElement().empty();$(c("div","error")).appendTo(this.getElement()).text(y(n))},t.prototype._cancelPendingLoad=function(){this._cancelable&&(this._cancelable.cancel(),this._cancelable=null)},t.enhancementTypeName="tfs.ajaxPanel",t}(r.Control);t.AjaxPanelO=a;v=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(a);t.AjaxPanel=v});

define("VSS/Controls/Dialogs",["require","exports","VSS/Controls","VSS/Diag","VSS/Events/Services","VSS/Navigation/HubsService","VSS/Controls/Panels","VSS/Controls/PopupContent","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Accessibility","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","q","jQueryUI/button","jQueryUI/dialog","jQueryUI/tabbable","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function rt(n,t){t&&a.BrowserCheckUtils.isEdge()&&$.each(t,function(t,i){var r=i.click;r&&(i.click=function(t){t&&!$(t.currentTarget).is(":disabled")&&r.apply(n[0],arguments)})})}function ut(n,t){var r=t||"",i;return i=typeof n=="string"?n.split(" "):n,r.split(" ").concat(i).filter(function(n,t,i){return i.indexOf(n)===t}).join(" ")}function st(n,t){return w.show(n,t)}function ht(n,t){return b.showMessageDialog(n,t)}function ct(n,t){return ht(n,{title:t||s.UnsavedChangesMessageTitle,noDefaultButton:!0,buttons:[{id:"leave",text:s.UnsavedChangesLeaveButton,reject:!1},{id:"stay",text:s.UnsavedChangesStayButton,reject:!0},]})}var p,it,k,w,d,g,nt,ft,et,tt,b,ot;Object.defineProperty(t,"__esModule",{value:!0});t.showConfirmNavigationDialog=t.showMessageDialog=t.show=t.CopyContentDialog=t.MessageDialog=t.MessageDialogO=t.ConfirmationDialog=t.ConfirmationDialogO=t.ModalDialog=t.ModalDialogO=t.Dialog=t.DialogO=t.preventClickingDisabledButtons=void 0;p=c.delegate;it=a.domElem,function(){var n=[".ms-Layer",".bolt-portal"];$.widget("ui.dialog",$.ui.dialog,{_allowInteraction:function(t){var i,r,u;if(this._super(t)||a.BrowserCheckUtils.isFirefox()&&t.type==="focusin"&&t.target==document)return!0;for(i=0,r=n;i<r.length;i++)if(u=r[i],$(t.target).closest(u).length)return!0}})}();t.preventClickingDisabledButtons=rt;k=function(n){function t(t){var i=n.call(this,t)||this;return i._closedByNavigation=!1,i._resizing=!1,i._onWindowResizeDelegate=p(i,i._onWindowResize),i}return __extends(t,n),t.beginExecuteDialogAction=function(n){w._dialogActionInProgress||(w._dialogActionInProgress=!0,n(function(){w._dialogActionInProgress=!1}))},t.create=function(n,t){var o=t&&t.content||$("<div />"),r,u,f,e;return t&&t.contentText&&o.text(t.contentText),r=i.Enhancement.enhance(n,o,t),u=this._getNextDialogZIndex(),r._element.parent().css("z-index",u),r._options.modal&&(f=r._element.parent().next("div.ui-widget-overlay").css("z-index",u-1),(a.BrowserCheckUtils.isIE()||a.BrowserCheckUtils.isEdge())&&(e=f.clone().insertAfter(f),f.css("width","50%"),e.css({"z-index":u-1,width:"50%",left:"50%"}),r._secondOverlay=e)),r._element.parent().children("div.ui-icon-gripsmall-diagonal-se").addClass("ui-icon-grip-diagonal-se"),r},t._getNextDialogZIndex=function(){var n,i,t=0;return $("div.ui-dialog").each(function(){n=Number($(this).css("z-index"));!isNaN(n)&&n>t&&(t=n)}),$("div.ms-Modal").closest("div.ms-Layer").each(function(){n=Number($(this).css("z-index"));!isNaN(n)&&n>t&&(t=n)}),$("div.bolt-portal-host").each(function(n,i){(i.querySelector("div.work-item-form-dialog")||i.querySelector("div.run-with-options-dialog-callout-element"))&&(t=1e6)}),t<10001?i=10002:(i=t+2,i%2!=0&&i++),i},t.show=function(n,t){return this.create(n,$.extend({autoOpen:!0},t))},t.prototype.initializeOptions=function(t){var i,r,u,f;this._options=this._options||{};n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"dialog",widthPct:.8,heightPct:.8,modal:!0,draggable:!0,resizable:!0,autoOpen:!1,dynamicSize:!0,disposeOnClose:!0,closeText:s.CloseButtonLabelText},t));i=this._options;r=$(window);i.height==="auto"&&(i.height=null);i.minWidth=Math.max(240,parseInt(i.minWidth,10)||0);i.minHeight=Math.max(192,parseInt(i.minHeight,10)||0);this._specifiedMaxWidth=parseInt(i.maxWidth,10);this._specifiedMaxHeight=parseInt(i.maxHeight,10);this._setMaxSize();this._ensureCtaButton();i.dynamicSize?(i.width=r.width()*i.widthPct,i.height=r.height()*i.heightPct):!i.useLegacyStyle&&i.height&&(u=66,i.subtitle&&(u+=22),f=typeof i.height=="number"?i.height:parseInt(i.height,10),f+=u,i.height=f);i.height&&!isNaN(i.height)&&(i.height=Math.min(i.height,r.height()));i.width&&!isNaN(i.width)&&(i.width=Math.min(i.width,r.width()));i.hideCloseButton&&(i.dialogClass=ut("no-close",i.dialogClass));this._options.useLegacyStyle&&(i.dialogClass=ut("ui-dialog-legacy",i.dialogClass))},t.prototype.initialize=function(){var t=this,s,l,c,h;n.prototype.initialize.call(this);var e=this,v=$(window),i=$.extend({},this._options);i.dialogClass&&(i.classes={"ui-dialog":i.dialogClass},delete i.dialogClass);i.title=this.getTitle();i.close=function(n){t._options.close&&t._options.close(__assign(__assign({},n),{closedByNavigation:t._closedByNavigation}));t._removeSecondOverlay();t.onClose(n)};i.beforeClose=function(n){if(t._options.beforeClose)return t._options.beforeClose(__assign(__assign({},n),{closedByNavigation:t._closedByNavigation}))};i.open=function(n){e._options.open&&e._options.open.call(this,n);e.onOpen(n)};this._bind("dialogdragstart dialogdragstop",function(){u.getService().fire("dialog-move",t);t._onDialogMove()});this._options.attachResize&&this._bind("dialogresizestop",this.onDialogResize.bind(this));this._options.resizable&&(this._bind("dialogresize",this._onDialogResizing.bind(this)),this._bind("dialogresizestart",this._onDialogResizeStart.bind(this)),this._bind("dialogresizestop",this._onDialogResizeStop.bind(this)));i.dynamicSize&&(u.getService().attachEvent("window-resize",this._onWindowResizeDelegate),this._bind("dialogclose",function(){var n=u.getService();n.fire("dialog-close",e);n.detachEvent("window-resize",e._onWindowResizeDelegate)}));i.url||r.logTracePoint("Dialog.initialize.complete");rt(this.getElement(),i.buttons);this._options.contentMargin===!1&&this.getElement().addClass("no-margin");this.getElement().dialog(i);this._options.useLegacyStyle||(s=this.getElement().parent(),l=s.find(".ui-dialog-titlebar"),l.addClass("bowtie").append($("<div />").addClass("ui-dialog-subtitle")),c=$("span.ui-dialog-title",l),c.attr({role:"heading","aria-level":1}),a.tooltipIfOverflow(c[0],{titleTarget:c[0],titleText:this.getTitle()}),s.find(".ui-dialog-buttonpane").addClass("bowtie"),h=s.find("button.ui-dialog-titlebar-close"),this._closeTooltip=o.RichContentTooltip.add(this._options.closeText,h),h.removeAttr("title"),h.attr("aria-label",this._options.closeText),h.find(".ui-button-icon").addClass("bowtie-icon bowtie-navigate-close"),(this._options.useBowtieStyle||this._options.bowtieVersion>0)&&s.addClass("bowtie-style"));this.setSubtitle(this.getSubtitle());this.getElement().keydown(function(n){var i,r,t;if(n.keyCode===$.ui.keyCode.ENTER){if(t=$(n.target),t.attr("role")==="combobox"||t.attr("role")==="radio")return!0;if((!n.shiftKey&&t.is("input[type='text']")||t.is("textarea")&&n.ctrlKey)&&e._options.defaultButton&&e._options.buttons)return i=e._options.buttons[e._options.defaultButton],i&&(r=$("#"+i.id).button("option"),r.disabled||i.click.apply(this,[n])),!1;if(!t.is("textarea")&&!t.is("a")&&!t.is("button")&&!t.hasClass("propagate-keydown-event"))return!1}});this._options.resizable&&this._addResizeKeydownHandler();setTimeout(function(){t._autoSizeAndPosition();t.onInitialize()},0);w._dialogActionInProgress=!1;this._onHubNavigateDelegate=function(){t._closedByNavigation=!0;t.close()};u.getService().attachEvent(f.HubEventNames.PreXHRNavigate,this._onHubNavigateDelegate);a.attachResize(this.getElement(),p(this,this._onWindowResize))},t.prototype._addResizeKeydownHandler=function(){var i=this,n=this.getElement(),t=n.siblings(".ui-icon-gripsmall-diagonal-se");if(t.length>0){t.attr({tabindex:0,role:"button","aria-label":s.DialogResizeLabel});this._resizeIconTooltip=o.RichContentTooltip.add(s.DialogResizeLabel,t);t.removeAttr("title");var r=n.dialog("option","minWidth")||150,u=n.dialog("option","minHeight")||150,f=n.dialog("option","maxWidth")||Number.MAX_VALUE,e=n.dialog("option","maxHeight")||Number.MAX_VALUE;t.keydown(function(n){switch(n.keyCode){case a.KeyCode.LEFT:i._resize("width",!1,r,Math.max);h.announce(s.DialogSizeDecreased);break;case a.KeyCode.RIGHT:i._resize("width",!0,f,Math.min);h.announce(s.DialogSizeIncreased);break;case a.KeyCode.UP:i._resize("height",!1,u,Math.max);h.announce(s.DialogSizeDecreased);break;case a.KeyCode.DOWN:i._resize("height",!0,e,Math.min);h.announce(s.DialogSizeIncreased)}})}},t.prototype._resize=function(n,i,r,u){var f=this.getElement(),e=f.dialog("option",n),o;e==="auto"&&(e=f.parent().height());o=u(e+t.RESIZE_STEP*(i?1:-1),r);f.dialog("option",n,o);f.trigger("dialogresizestop",{size:{width:f.dialog("option","width"),height:f.dialog("option","height")}})},t.prototype._autoSizeAndPosition=function(){var n=this.getElement(),t=this._options;n&&n.length>0&&$.contains(document.body,n[0])&&(t.preventAutoResize||(t.position&&n.dialog("option","position",t.position),t.height?n.dialog("option","height",t.height):n.dialog("option","height","auto"),this._setMaxHeight()),n.show())},t.prototype._ensureCtaButton=function(){var n=this._options,r,u,t,i;n.noAutoCta!==!0&&(r=/(^cta$)|(^cta\ )|(\ cta\ )|( cta$)/,u=/(^warning$)|(^warning\ )|(\ warning\ )|( warning$)/,Array.isArray(n.buttons)&&n.buttons.length>0&&!n.buttons.some(function(n){return r.test(n.class)})&&!n.buttons.some(function(n){return u.test(n.class)})?(i=n.buttons[0].class||"",n.buttons[0].class=i+" cta"):n.buttons&&typeof n.buttons=="object"&&(t=Object.keys(n.buttons),t.length>0&&(t.some(function(t){return r.test(n.buttons[t].class)})||t.some(function(t){return u.test(n.buttons[t].class)})||(i=n.buttons[t[0]].class||"",n.buttons[t[0]].class=i+" cta"))))},t.prototype.onLoadCompleted=function(t){n.prototype.onLoadCompleted.call(this,t);this.setInitialFocus();r.logTracePoint("Dialog.initialize.complete")},t.prototype.setInitialFocus=function(){var n=this._options.initialFocusSelector||":visible:tabbable";this.getElement().find(n).first().focus()},t.prototype.setFormFocusDelayed=function(n){c.delay(this,300,function(){n.eq(0).focus().select()})},t.prototype.setTitle=function(n){this._title=n;this._updateTitle()},t.prototype.getTitle=function(){return this._title||this._options.title||this.getElement().attr("title")||""},t.prototype.setSubtitle=function(n){this._subtitle=n;this._updateSubtitle()},t.prototype.getSubtitle=function(){var n=this._subtitle;return(n===null||n===undefined)&&(n=this._options.subtitle),n||""},t.prototype.centerDialog=function(){this.getElement().dialog("option","position",{my:"center",at:"center",of:window});this._setMaxHeight()},t.prototype.getDialogResult=function(){return this._dialogResult},t.prototype.setDialogResult=function(n){this._dialogResult=n},t.prototype.show=function(){this.getElement().dialog("open")},t.prototype.onOpen=function(){if(!this._options||this._options.hasProgressElement!==!1){var n=$("<div />").addClass("ui-dialog-titlebar-progress-container").appendTo(this.getElement().parent().find(".ui-dialog-titlebar"));this._progressElement=$("<div />").addClass("ui-dialog-titlebar-progress-element").appendTo(n);v.globalProgressIndicator.registerProgressElement(this._progressElement)}u.getService().fire("dialog-open",this)},t.prototype.onClose=function(){u.getService().fire("dialog-close",this);this._progressElement&&v.globalProgressIndicator.unRegisterProgressElement(this._progressElement);this._removeSecondOverlay();this._options.disposeOnClose&&this.dispose();var n=$(".ui-dialog").slice(-1);n.length&&!this._options.noFocusOnClose&&n.focus()},t.prototype.onInitialize=function(){typeof this._options.initialize=="function"&&this._options.initialize.call(this)},t.prototype.close=function(){this.getElement()&&this.getElement().dialog("close")},t.prototype.dispose=function(){this._removeSecondOverlay();u.getService().detachEvent(f.HubEventNames.PreXHRNavigate,this._onHubNavigateDelegate);a.detachResize(this.getElement());this._closeTooltip&&(this._closeTooltip.dispose(),this._closeTooltip=null);this._resizeIconTooltip&&(this._resizeIconTooltip.dispose(),this._resizeIconTooltip=null);n.prototype.dispose.call(this)},t.prototype._removeSecondOverlay=function(){this._secondOverlay&&(this._secondOverlay.remove(),this._secondOverlay=null)},t.prototype._updateSubtitle=function(){if(this._initialized&&this.getElement()){var n=this.getElement().parent().find(".ui-dialog-subtitle"),t=this.getSubtitle()||"";n.text(t);a.tooltipIfOverflow(n[0],{titleTarget:n[0],titleText:t});n.toggle(t.length>0)}},t.prototype.onDialogResize=function(){},t.prototype._updateTitle=function(){if(this._initialized&&this.getElement()){var t=this.getElement().dialog("option","title",this.getTitle()),n=$("span.ui-dialog-title",t.parent());a.tooltipIfOverflow(n[0],{titleTarget:n[0],titleText:this.getTitle()})}},t.prototype._onWindowResize=function(){if(!this._resizing){var t=$(window),n=this._options;n.dynamicSize&&(this._setMaxSize(),this.getElement().dialog("option",{width:t.width()*n.widthPct,height:t.height()*n.heightPct,maxHeight:parseInt(this._options.maxHeight,10),maxWidth:parseInt(this._options.maxWidth,10)}));this.getElement().dialog("option","position",{my:"center",at:"center",of:window})}},t.prototype._onDialogResizing=function(n,t){var u=$(window),i,r;t&&t.position&&t.size&&(i=Math.min(t.size.height,u.height()-t.position.top),r=Math.min(t.size.width,u.width()-t.position.left),(i!==t.size.height||r!==t.size.width)&&this.getElement().dialog("option",{width:r,height:i}))},t.prototype._onDialogMove=function(){this._options.preventAutoResize||(this._setMaxHeight(),this._ensureDialogContentHeight());this._hideCloseButtonTooltip();this._hideResizeIconTooltip()},t.prototype._onDialogResizeStart=function(){this._resizing=!0;this._hideCloseButtonTooltip();this._hideResizeIconTooltip()},t.prototype._onDialogResizeStop=function(){this._resizing=!1},t.prototype._ensureDialogContentHeight=function(){var n=this.getElement().parent().css("height");n!=="auto"?this.getElement().css("height",this.getElement().outerHeight()):this.getElement().css("height","auto")},t.prototype._setMaxHeight=function(){var n=this.getElement().prev().outerHeight(!0)+this.getElement().next().outerHeight(!0);this.getElement().css("maxHeight",window.innerHeight-this.getElement().parent().position().top-n)},t.prototype._setMaxSize=function(){this._options.maxWidth=Math.min(window.innerWidth,this._specifiedMaxWidth||Infinity);this._options.maxHeight=Math.min(window.innerHeight,this._specifiedMaxHeight||Infinity)},t.prototype._hideCloseButtonTooltip=function(){this._closeTooltip&&this._closeTooltip.hide()},t.prototype._hideResizeIconTooltip=function(){this._resizeIconTooltip&&this._resizeIconTooltip.hide()},t.enhancementTypeName="tfs.dialog",t._dialogActionInProgress=!1,t.RESIZE_STEP=25,t}(e.AjaxPanelO);t.DialogO=k;w=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(k);t.Dialog=w;d=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"dialog modal-dialog",modal:!0,dynamicSize:!1,width:500,height:"auto",defaultButton:"ok",buttons:{ok:{id:"ok",text:t&&t.okText||s.ModalDialogOkButton,click:p(this,this.onOkClick),"class":"cta",disabled:"disabled"},cancel:{id:"cancel",text:t&&t.cancelText||s.ModalDialogCancelButton,click:p(this,this.onCancelClick)}}},t))},t.prototype.initialize=function(){this._bind(g.EVENT_BUTTON_STATUS_CHANGE,p(this,this.onButtonStatusChange));this._bind("resultReady",p(this,this.onResultReady));n.prototype.initialize.call(this)},t.prototype.updateOkButton=function(n){this.getElement()&&this.getElement().trigger(g.EVENT_BUTTON_STATUS_CHANGE,{enabled:n===!0})},t.prototype.processResult=function(n){var t=this._options.okCallback;n&&(typeof t=="function"&&(t.call(this,n),r.logTracePoint(this.getTypeName()+".callback-complete")),this.close())},t.prototype.onOkClick=function(){r.logTracePoint(this.getTypeName()+".OkClicked");this.processResult(this.getDialogResult())},t.prototype.onResultReady=function(n,t){this.processResult(t)},t.prototype.onCancelClick=function(){typeof this._options.cancelCallback=="function"&&this._options.cancelCallback();this.close()},t.prototype.onButtonStatusChange=function(n,t){var i=this.getElement().siblings(".ui-dialog-buttonpane").find("#"+(t.button||"ok"));i.button("option","disabled",!t.enabled);this.setAttribute("aria-disabled",t.enabled?"false":"true",i)},t.enhancementTypeName="tfs.modaldialog",t.EVENT_BUTTON_STATUS_CHANGE="buttonStatusChange",t}(k);t.ModalDialogO=d;g=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(d);t.ModalDialog=g;nt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:400,height:200,resizable:!1,cssClass:"confirmation-dialog"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.$errorContainer=$(it("div")).addClass("confirmation-dialog-error").prependTo(this.getElement()).hide();this.updateOkButton(!0)},t.prototype._onSuccess=function(){this._fire("resultReady",!0);var n=this._options.successCallback;typeof n=="function"&&(n.apply(this,arguments),r.logTracePoint(this.getTypeName()+".callback-complete"))},t.prototype._onError=function(n){this.$errorContainer.text(n.message).show()},t.prototype.onOkClick=function(t){this.updateOkButton(!1);n.prototype.onOkClick.call(this,t)},t}(d);t.ConfirmationDialogO=nt;ft=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(nt);t.ConfirmationDialog=ft;et=function(){function n(n){this.button=n}return n.prototype.toString=function(){return"MessageDialogResult: Button: "+(this.button?this.button.id:"?")+" ("+v.ErrorHandler.ignoreRejectedPromiseTag+")"},n}();tt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){var u=this,i=$.extend({width:500,height:"auto",hideCloseButton:!0,coreCssClass:"dialog modal-dialog message-dialog",modal:!0,dynamicSize:!1},t),r;i.buttons instanceof Array&&i.buttons.length>0&&(r={},i.buttons.forEach(function(n){r[n.id]=u.getButtonOptions(n)}),t.noDefaultButton||(i.defaultButton=i.buttons[0].id),this.setDialogResult(i.buttons[i.buttons.length-1]),i.buttons=r);t.escapeButton&&this.setDialogResult(t.escapeButton);t.initialFocusButton&&c.delay(this,100,function(){document.getElementById(t.initialFocusButton.id).focus()});n.prototype.initializeOptions.call(this,i)},t.prototype.initialize=function(){var i,t;n.prototype.initialize.call(this);this._options.requiredTypedConfirmation&&this.initializeTypedConfirmation();for(i in this._options.buttons)t=this._options.buttons[i],t.style&&$("#"+t.id).addClass(t.style)},t.prototype.initializeTypedConfirmation=function(){var u=this,f=this.getElement(),n=$("<input type='text' class='textbox message-dialog-confirm-textbox no-match' />"),t=$(),i,r;for(i in this._options.buttons)this._options.buttons[i].reject||(t=t.add($("#"+this._options.buttons[i].id)));r=function(){l.ignoreCaseComparer(n.val(),u._options.requiredTypedConfirmation)==0?(n.removeClass("no-match").addClass("match"),t.button("option","disabled","")):(n.addClass("no-match").removeClass("match"),t.button("option","disabled","disabled"))};n.on("input keyup",r);f.append($("<div class='message-dialog-confirm'><\/div>").append(n));r(null);c.delay(this,100,function(){n.focus();n.select()})},t.prototype.getPromise=function(){return this._deferred||(this._deferred=y.defer()),this._deferred.promise},t.showMessageDialog=function(n,t){var i,r;return t=t||{},i=$.extend({buttons:[b.buttons.ok,b.buttons.cancel],useBowtieStyle:!0,minWidth:t.width,minHeight:t.height,title:s.Confirm},t),i.content=typeof n=="string"?$("<div />").text(n):n,r=st(b,i),r.getPromise()},t.prototype.onClose=function(t){if(this._deferred){var i=new et(this.getDialogResult());this._options.beforeClose&&this._options.beforeClose(i.button);i.button.reject?this._deferred.reject(i):this._deferred.resolve(i)}return n.prototype.onClose.call(this,t)},t.prototype.getButtonOptions=function(n){var t=this;return $.extend({click:function(){t.setDialogResult(n);t.close()}},n)},t.buttons={ok:{id:"ok",text:s.ModalDialogOkButton,reject:!1},cancel:{id:"cancel",text:s.ModalDialogCancelButton,reject:!0},yes:{id:"yes",text:s.ModalDialogYesButton,reject:!1},no:{id:"no",text:s.ModalDialogNoButton,reject:!0},close:{id:"close",text:s.CloseButtonLabelText,reject:!0}},t}(k);t.MessageDialogO=tt;b=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(tt);t.MessageDialog=b;ot=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:t.width||600,minWidth:400,height:t.height||450,minHeight:200,attachResize:!0,defaultButton:"close",buttons:[{id:"close",text:s.CloseButtonLabelText,click:p(this,this.close)},]},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.setTitle(s.CopyContentDialogTitle);this._decorate()},t.prototype._decorate=function(){var r=this.getElement(),n,i=$("<div/>").text(this._options.dialogLabel||this._getDefaultLabelText()),t;this._options.dialogLabelExtend&&i.append(this._options.dialogLabelExtend);t=$("<div class='copy-dialog-container'/>").append(i).append($("<p/>"));this._options.excludeTextPanel||(n=$("<div/>"),t.append(n),this._options.copyAsHtml?this._initializeRichEditor(n):(this._initializeTextPanel(n),this._options.preventAutoTextSelection||c.delay(this,100,function(){this._$textArea.focus();this._$textArea.select()})),this._bind("dialogresize",function(){n.css("height",t.height()-i.height()-40+"px")}));r.append(t);this._options.excludeTextPanel||n.css("height",t.height()-i.height()-40+"px")},t.prototype._getDefaultLabelText=function(){return a.BrowserCheckUtils.isMacintosh()?s.CopyContentMacintoshHelpText:s.CopyContentPcHelpText},t.prototype._initializeRichEditor=function(n){var t=this;v.using(["VSS/Controls/RichEditor"],function(r){var u=i.BaseControl.createIn(r.RichEditor,n,{noToolbar:!0,height:"100%",pageHtml:t._options.pageHtml,internal:!0});u.ready(function(){u.setValue(t._options.data);u.bindOnCopy(p(t,function(){c.delay(this,0,function(){this.close()})}));c.delay(t,100,function(){u.selectText();u.setEnabled(!1)})})})},t.prototype._initializeTextPanel=function(n){var t="copy-content-textarea";this._options.textAreaCopyClass&&(t=this._options.textAreaCopyClass);this._$textArea=$("<textarea/>").addClass(t).text(this._options.data);this._$textArea.attr("aria-label",s.CopyTextAreaName);this._options.disableEdit&&(this._$textArea.attr("readonly","readonly"),this._$textArea.focus(function(){this._$textArea.select()}));this._$textArea[0].oncopy=p(this,function(){c.delay(this,0,function(){this.close()})});n.append(this._$textArea)},t.enhancementTypeName="CopyContentDialog",t}(d);t.CopyContentDialog=ot;t.show=st;t.showMessageDialog=ht;t.showConfirmNavigationDialog=ct});

define("Mention/Scripts/TFS.Mention.People",["require","exports","q","VSS/Diag","Mention/Scripts/TFS.Mention","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/Events/Services","VSS/FeatureAvailability/Services","VSS/Graph/RestClient","VSS/Identities/Picker/Controls","VSS/Utils/Core","VSS/WebApi/Constants","VSS/WebApi/Constants","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Social.Telemetry","Presentation/Scripts/URI","VSS/Utils/UI","VSS/Context","VSS/Controls","VSS/Controls/Dialogs","VSS/Identities/Picker/Services","VSS/Service","VSS/Utils/UI","VSS/Utils/String","Mention/Scripts/Resources/TFS.Resources.Mention"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){function vt(n){var t=ft.getIdentityAttribute(n);return ft.useStorageKeysInMentions()?u.createHtmlMention("#","@".concat(n.displayName),t,"2.0"):u.createHtmlMention("".concat(u.Constants.HTML_MENTION_LEGACY_FORMAT_HREF).concat(ft.getIdentityId(n)),"@".concat(n.displayName),t)}function bt(){return ot.getDefault()}var ht,wt,ft,yt,ct,lt,st,pt,ot,at,et;Object.defineProperty(t,"__esModule",{value:!0});t.getDisplayNameStorageKeyTranslatorInstance=t.createPeopleHtmlMention=t.PeopleProvider=t.MaterializeIdentityProvider=t.DisplayNameStorageKeyTranslationProvider=t.PeopleMentionProcessor=t.PeopleMentionParser=t.PeopleHtmlMentionsRenderingProvider=t.PeopleMentionsRenderingProvider=t.PersonAutocompleteProvider=t.Helpers=t.PeopleGroup=void 0;ht={Source:!0,IMS:!0},function(n){n[n.Everyone=0]="Everyone"}(wt=t.PeopleGroup||(t.PeopleGroup={}));ft=function(){function n(){}return n.regexMention=function(){return n.REGEX_MENTION_USERS_AND_MATERIALIZEDGROUPS},n.metadataContainsValidVersion=function(n){return rt.startsWith(n,u.Constants.HTML_MENTION_VERSION_10)||rt.startsWith(n,u.Constants.HTML_MENTION_VERSION_20)},n.matchAndRemoveWordStartSeparator=function(n,t){var i=n.exec(t),u,r;return i?(u=i[1]&&i[1].length?i[1].length:0,r=[i[0].substring(u)],r=r.concat(i.slice(2)),r.index=i.index+u,r.input=i.input,r):null},n.getMentionTrigger=function(t,i){var u,e=0,f,o,r;for(n.REGEX_NAME_TRIGGER_HEAD.lastIndex=0;u=n.REGEX_NAME_TRIGGER_HEAD.exec(t);)e=u.index;return(i?(n.REGEX_NAME_TRIGGER_WHEN_OPEN.lastIndex=e,u=n.matchAndRemoveWordStartSeparator(n.REGEX_NAME_TRIGGER_WHEN_OPEN,t)):(n.REGEX_NAME_TRIGGER_WHEN_CLOSED.lastIndex=e,u=n.matchAndRemoveWordStartSeparator(n.REGEX_NAME_TRIGGER_WHEN_CLOSED,t)),u&&(n.regexMention().lastIndex=0,f=n.regexMention().exec(u[0]),o=f&&f.index===0&&f[0].length<u[0].length,!o))?(r=u[1]||"",n.REGEX_CONSECUTIVE_WHITESPACES.exec(r))?null:(r.indexOf("<")===0&&(r=r.substring(1)),r.indexOf(">")===r.length-1&&(r=r.substring(0,r.length-1)),{prefix:r,index:u.index,match:u[0]}):null},n.useNotificationsPipeline=function(){return s.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.UseNotificationPipelineForMentions)&&s.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.AllowGroupMentions)},n.useStorageKeysInMentions=function(){return s.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.UseStorageKeyInMentions)},n.getSupportedEntityTypes=function(){return{User:!0,Group:n.useNotificationsPipeline()}},n.getIdentityId=function(t){return k.getPageContext().webAccessConfiguration.isHosted?n.useStorageKeysInMentions()?t.displayName:t.signInAddress!=null?t.signInAddress:t.displayName:t.entityType===v.DirectoryEntityType.Group?"[".concat(t.scopeName,"]\\").concat(t.samAccountName):"".concat(t.scopeName,"\\").concat(t.samAccountName)},n.getMetadataFromTextMention=function(n){if(n){var t=n.lastIndexOf("]"),i=n.lastIndexOf(" [",t);if(i>=0&&t>i)return n.substring(i+2,t)}return null},n.getVsidFromMetadata=function(t){var i,r;return!t||!n.metadataContainsValidVersion(t)?null:(i=n.getDataFromMetadata(t,u.Constants.HTML_MENTION_ID_ATTR),i||(r=t.split(","),r.length===2&&(i=r[1])),i&&rt.isGuid(i))?i:null},n.getDataFromMetadata=function(n,t){var e,r,f,i;if(!n||!t)return null;for(e=n.split(","),t=t+u.Constants.METADATA_ATTR_SEPARATOR,r=0,f=e;r<f.length;r++)if(i=f[r],i=i.trim(),i.indexOf(t)===0)return i.substr(t.length);return null},n.formatUniqueId=function(t){return!t||t.length===0?"":n.formatIdentifier(u.Constants.HTML_MENTION_ID_ATTR_PREFIX+t)},n.formatIdentityAttribute=function(t){var i=n.getIdentityAttribute(t);return i&&t.entityType===v.DirectoryEntityType.Group?n.formatIdentifier(i):""},n.getIdentityAttribute=function(t){var i;return n.useStorageKeysInMentions()?t&&(i=t.localId):t&&t.entityType===v.DirectoryEntityType.Group&&t.localId&&(i=u.Constants.HTML_MENTION_ID_ATTR_PREFIX+t.localId),i},n.formatIdentifier=function(n){return"[".concat(n,"]")},n.PersonArtifactType="Person",n.PATTERN_WORD_START_SEPARATOR="(?:^|[\\s\\(])",n.PATTERN_WORD_END_SEPARATOR="(?:$|[\\s\\)])",n.PATTERN_NAME_ONE_WORD="[^\\s]+",n.PATTERN_NAME_MULTI_WORD="".concat(n.PATTERN_NAME_ONE_WORD,"(\\s+[^\\s]*){0,4}"),n.REGEX_NAME_TRIGGER_HEAD=new RegExp("(".concat(n.PATTERN_WORD_START_SEPARATOR,")@"),"g"),n.REGEX_NAME_TRIGGER_WHEN_OPEN=new RegExp("(".concat(n.PATTERN_WORD_START_SEPARATOR,")@(").concat(n.PATTERN_NAME_MULTI_WORD,")?$"),"g"),n.REGEX_NAME_TRIGGER_WHEN_CLOSED=new RegExp("(".concat(n.PATTERN_WORD_START_SEPARATOR,")@(").concat(n.PATTERN_NAME_ONE_WORD,")?$"),"g"),n.REGEX_MENTION_USERS_AND_MATERIALIZEDGROUPS=new RegExp("@<([^\\s;]{1,256}?)>|@<(.{1,256}? \\[id:[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\\])>|@<(\\S[^\\n\\r;]{1,256}?\\S)>|@<([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})>","g"),n.REGEX_PERSON_MENTION_IN_WORKITEM_DISC=new RegExp("".concat(u.Constants.HTML_MENTION_VERSION_20,",[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"),"i"),n.REGEX_CONSECUTIVE_WHITESPACES=/\s\s/,n}();t.Helpers=ft;yt=function(){function n(n){var t=this;this._updateActiveDescendantHandler=function(n){var i=t._getMentionTextArea();i&&n&&n.uniqueId===t._identityPickerDropdownId&&l.delay(t,0,function(){i.attr("aria-activedescendant",n.activeDescendantId)})};this._options=n||{}}return n.prototype.initialize=function(){var n=this,t;this._identityPickerDropdownId=e.GUIDUtils.newGuid();t={operationScope:ht,identityType:ft.getSupportedEntityTypes(),onItemSelect:y.delegate(this,function(t){n._selectIdentity({},t)}),onHide:function(t){t||(t=$.Event("identityPickerHide"));n._inputText&&n._inputText.textBeforeSelection!=="@"&&!/\s@$/.test(n._inputText.textBeforeSelection)&&n.close(t,n._inputText)},showMru:!0,showContactCard:ft.useStorageKeysInMentions(),useRemainingSpace:this._options.useRemainingSpace,alignment:{positioningElement:this._options.positioningElement},consumerId:u.Constants.IDENTITY_PICKER_CONSUMER_ID,eventOptions:{uniqueId:this._identityPickerDropdownId},preDropdownRender:function(t){return ft.useStorageKeysInMentions()?t:n.filterEntities(t)}};this._identityPickerDropdown=d.create(c.IdentityPickerDropdownControl,this._getMenuContainer(),t);this._identityPickerDropdown.hide()},n.prototype.filterEntities=function(n){return n&&n.length>0?n.filter(function(n){return n.localId!==null||n.entityType!==v.DirectoryEntityType.Group}):n},n.prototype.getPluginName=function(){return"PersonAutocompleteProvider"},n.prototype.canOpen=function(n){var t=ft.getMentionTrigger(n.textBeforeSelection,this._isOpen);return!t?null:{start:t.index,end:n.textBeforeSelection.length}},n.prototype.open=function(n,t){var i,r;this._inputText=t;this._isOpen=!0;i=this._getMentionTextArea();i&&(r=i.length&&i[0].tagName==="DIV",i.attr({"aria-owns":this._identityPickerDropdown.getId(),"aria-expanded":r?null:"true","aria-autocomplete":"list"}),o.getService().attachEvent(c.IdentityPickerDropdownControl.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantHandler))},n.prototype.suggest=function(n,t){var i=this,r=$.Deferred(),e=(new Date).getTime();this._inputText=t;var u=ft.getMentionTrigger(t.textBeforeSelection,!0),f=function(n){i._isOpen!==i._identityPickerDropdown.isVisible()&&(i._isOpen?i._identityPickerDropdown.show():i._identityPickerDropdown.hide());r.resolve({result:void 0,telemetry:{suggestionsCount:"".concat(n.length),durationInMSec:"".concat((new Date).getTime()-e)}})},o=function(n){r.reject(n)};return u.prefix?this._identityPickerDropdown.getIdentities(u.prefix).then(y.delegate(this,f),y.delegate(this,o)):this._identityPickerDropdown.showAllMruIdentities().then(y.delegate(this,f)),r},n.prototype.close=function(n,t){var i,r;this._isOpen&&(this._inputText=t,this._isOpen=!1,this._identityPickerDropdown.hide(),i=this._getMentionTextArea(),i&&(r=i.length&&i[0].tagName==="DIV",i.attr({"aria-owns":null,"aria-autocomplete":null,"aria-activedescendant":null,"aria-expanded":r?null:"false"}),o.getService().detachEvent(c.IdentityPickerDropdownControl.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantHandler)),this._options.close&&this._options.close(n,this._inputText))},n.prototype.handle=function(n){if(n.type==="blur")this._identityPickerDropdown.isVisible()&&!$(".identity-picker-dropdown:hover",this._getMenuContainer()).length&&this.close(n,this._inputText);else if(n.type==="keydown"&&!y.eventHasPrintableCharacter(n)){if(n.keyCode===it.KeyCode.ENTER||n.keyCode===it.KeyCode.TAB){var t=this._identityPickerDropdown.getSelectedItem();if(t)return this._selectIdentity(n,t),!1}return this._identityPickerDropdown.handleKeyEvent(n)}},n.prototype.dispose=function(){o.getService().detachEvent(c.IdentityPickerDropdownControl.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantHandler);this._identityPickerDropdown.dispose()},n.prototype.prefetch=function(){this._identityPickerDropdown&&this._identityPickerDropdown.load()},n.prototype._selectIdentity=function(n,t){var r=this,h=this._identityPickerDropdown.getSelectedIndex(),c=ft.getMentionTrigger(this._inputText.textBeforeSelection,!0),f=ft.getIdentityId(t),u="",e=function(t,i,f){var e,o,s;f&&(e={textBeforeSelection:r._inputText.textBeforeSelection.substr(0,c.index)+"@<"+t+u+"> ",textInSelection:"",textAfterSelection:r._inputText.textAfterSelection},r._inputText=e,r._options.select&&(o={getPlainText:function(){return e},getHtml:function(){return vt(f)}},s={selectionIndex:"".concat(h),identity:f},r._options.select(n,o,s)),r.close(n,r._inputText),f.localId&&r._identityPickerDropdown.addIdentitiesToMru([f.localId]));r._identityPickerDropdown.hide()},o,s;ft.useStorageKeysInMentions()?(o=ot.getDefault(),t.localId?(s=o.addDisplayNameAndStorageKey(f,t.localId),e(s,u,t)):(p.EventLogging.publishMaterializeIdentityEvent({identity:t}),o.getStorageKeyFollowingMaterialization(t).then(function(n){return et.getInstance().getByUniqueId(n).then(function(t){if(t){var r=ft.getIdentityId(t),f=o.addDisplayNameAndStorageKey(r,n);return e(f,u,t),t}return i.reject("pickerIdentity is null after materialization")})}).then(null,function(n){r._handleMaterializationError(t,n,f);r._identityPickerDropdown.hide()}))):t.entityType===v.DirectoryEntityType.Group?(u=" "+ft.formatIdentityAttribute(t),e(f,u,t)):e(f,u,t)},n.prototype._handleMaterializationError=function(n,t,i){var r=$("<div/>").css("font-weight","bold").html(rt.format(ut.MentionMaterializeIdentityFailError,lt.CSS_CLASS_PERSON_MENTION,rt.htmlEncode(i))),u=function(){g.showMessageDialog(r,{title:ut.MentionMaterializeErrorDialogTitle,buttons:[g.MessageDialog.buttons.close]}).then(function(){return null})};p.EventLogging.publishMaterializeIdentityError({identity:n,error:t});u(i)},n.prototype._getMenuContainer=function(){return this._options.menuContainer?this._options.menuContainer():$(document.body)},n.prototype._getMentionTextArea=function(){return this._options.textElement?this._options.textElement():null},n}();t.PersonAutocompleteProvider=yt;ct=function(){function n(){}return n.getDefault=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getArtifactType=function(){return ft.PersonArtifactType},n.prototype.renderPerson=function(t,i,r){var f,e;return r===void 0&&(r=!0),f=function(t){var o,e,f;return t?(o=ft.getIdentityId(t),e=$("<span/>").addClass(n.CSS_CLASS_PERSON_MENTION).text("@"+t.displayName),o!==t.displayName&&e.attr("title",o),et.getInstance().isIdentityCurrentUser(t)&&e.addClass(n.CSS_CLASS_PERSON_MENTION_ME),f=i(e[0].outerHTML).attr(u.Constants.HTML_RENDERED_MENTION_ATTR_NAME,"people").attr("aria-label","@"+t.displayName),r&&(f.attr("role","button").attr("tabindex","0").addClass(n.CSS_CLASS_PERSON_MENTION_CLICKABLE),f.attr(n._IDENTITY_DATA_ATTRIBUTE,JSON.stringify(t)),n._registerMentionClickHandler(f,t)),{htmlComponent:f,displayText:"@"+t.displayName,identity:t}):null},t?t.id?et.getInstance().getByUniqueId(t.id).then(function(n){return f(n)}):ft.useStorageKeysInMentions()?rt.isGuid(t.name)?et.getInstance().getByUniqueId(t.name).then(function(n){return n&&ot.getDefault().addDisplayNameAndStorageKey(ft.getIdentityId(n),t.name),f(n)}):(e=ot.getDefault().getStorageKeyUsingDisplayName(t.name),e?et.getInstance().getByUniqueId(e).then(function(n){return f(n)}):et.getInstance().getByUniqueName(t.name).then(function(n){return f(n)})):et.getInstance().getByUniqueName(t.name).then(function(n){return f(n)}):void 0},n.prototype.renderMention=function(n,t,i){var s;i===void 0&&(i=!0);var h=ft.getMetadataFromTextMention(n.ArtifactId),e=ft.getDataFromMetadata(h,u.Constants.HTML_MENTION_ID_ATTR),f=n.ArtifactId,o=n.Text;return e&&(s=" "+ft.formatUniqueId(e),f=f.replace(s,""),o=o.replace(s,"")),this.renderPerson({name:f,id:e},t,i).then(function(n){if(!n){var i=$("<span/>").text(o),r=t(i[0].outerHTML);return{htmlComponent:r,displayText:"@"+f}}return n})},n.prototype.getTelemetryMentionSummary=function(n){return"".concat(this.getArtifactType(),":").concat(n.ArtifactId)},n.registerMentionClickHandler=function(n,t){var r=$(n),i=$(".".concat(this.CSS_CLASS_PERSON_MENTION_CLICKABLE,":not(.").concat(this.CSS_CLASS_MENTION_CLICK_HANDLED,")"),r);i.length>0&&(i.addClass(this.CSS_CLASS_MENTION_CLICK_HANDLED),this._registerMentionClickHandler(i,undefined,t))},n._registerMentionClickHandler=function(n,t,i){var r=this;n.click(function(n){var u=t;u||(u=JSON.parse(n.target.getAttribute(r._IDENTITY_DATA_ATTRIBUTE)));r._renderMentionDialog($(n.target),u,n,i)});n.keydown(function(n){var u=t;u||(u=JSON.parse(n.target.getAttribute(r._IDENTITY_DATA_ATTRIBUTE)));(n.which===b.KeyCode.ENTER||n.which===b.KeyCode.SPACE)&&r._renderMentionDialog($(n.target),u,n,i)})},n._renderMentionDialog=function(t,i,r,f){r.stopPropagation();var e=y.getWindow(t[0]),o=e&&window!==e&&e.frameElement?$(e.frameElement):null,s=d.Enhancement.enhance(c.IdCardDialog,"<div/>",{uniqueIdentifier:i.entityId,anchor:t,anchorContainer:o,xvalue:0,operationScope:ht,identityType:ft.getSupportedEntityTypes(),httpClient:null,consumerId:u.Constants.IDENTITY_PICKER_CONSUMER_ID});s.getElement().closest(".ui-dialog").addClass(n.CSS_CLASS_PERSON_MENTION_CARD);p.EventLogging.publishPeopleClickEvent({identity:i},f)},n.CSS_CLASS_PERSON_MENTION="mention-preview-person",n.CSS_CLASS_PERSON_MENTION_ME="mention-preview-me",n.CSS_CLASS_PERSON_MENTION_CARD="mention-card",n.CSS_CLASS_PERSON_MENTION_CLICKABLE="mention-preview-person-clickable",n.CSS_CLASS_MENTION_CLICK_HANDLED="mention-click-handled",n._IDENTITY_DATA_ATTRIBUTE="data-identity",n}();t.PeopleMentionsRenderingProvider=ct;lt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.renderMention=function(n,t){var i=ft.getMetadataFromTextMention(n.ArtifactId),f=i?ft.getDataFromMetadata(i,u.Constants.HTML_MENTION_ID_ATTR):ft.useStorageKeysInMentions()?ot.getDefault().getStorageKeyUsingDisplayName(n.ArtifactId):null,e=function(n){if(n){var i=vt(n),r=t(i);return{htmlComponent:r,displayText:"@"+n.displayName}}return null};return f?et.getInstance().getByUniqueId(f).then(function(n){return e(n)}):et.getInstance().getByUniqueName(n.ArtifactId).then(function(n){return e(n)})},t}(ct);t.PeopleHtmlMentionsRenderingProvider=lt;st=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.getDefault=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.parseFromText=function(n){var r=[],i=ft.regexMention(),t;for(i.lastIndex=0;t=i.exec(n);)r.push({index:{start:t.index,end:i.lastIndex},id:t[4]||t[3]||t[2]||t[1]});return r},t.prototype.parseFromHtml=function(n,t){var i=this,f=n.find('a[href^="'.concat(u.Constants.HTML_MENTION_LEGACY_FORMAT_HREF,'"]')),r;f.each(function(n,r){var u=$(r),f=i.parseFromMailtoAnchor(u);f&&t(u,f)});r=n.find("a[".concat(u.Constants.HTML_MENTION_ATTR_NAME,'^="').concat(u.Constants.HTML_MENTION_VERSION_20,'"]'));r.each(function(n,r){var u=$(r),f=i.parseFromAnchor(u);f&&t(u,f)})},t.prototype.parseFromHtmlBatch=function(n){var i=this,t=[],f=n.find('a[href^="'.concat(u.Constants.HTML_MENTION_LEGACY_FORMAT_HREF,'"]')),r;return f.each(function(n,r){var u=$(r),f=i.parseFromMailtoAnchor(u);f&&t.push({$a:u,mention:f})}),r=n.find("a[".concat(u.Constants.HTML_MENTION_ATTR_NAME,'^="').concat(u.Constants.HTML_MENTION_VERSION_20,'"]')),r.each(function(n,r){var u=$(r),f=i.parseFromAnchor(u);f&&t.push({$a:u,mention:f})}),t},t.prototype.getArtifactType=function(){return ft.PersonArtifactType},t.prototype.parseFromMailtoAnchor=function(n){var t=n.attr("href"),i=new w(t),r=n.attr(u.Constants.HTML_MENTION_ATTR_NAME),f=ft.getDataFromMetadata(r,u.Constants.HTML_MENTION_ID_ATTR);return{name:decodeURI(i.path()),id:f}},t.prototype.parseFromAnchor=function(n){var t=n.attr(u.Constants.HTML_MENTION_ATTR_NAME),i=ft.getVsidFromMetadata(t),r=n.text();return{name:r,id:i}},t}(u.ArtifactMentionParser);t.PeopleMentionParser=st;pt=function(){function n(){}return n.processHtml=function(n,t){var i,r;return t===void 0&&(t=!0),i=[],st.getDefault().parseFromHtml(n,function(n,t){i.push({$a:n,mention:t})}),r=i.map(function(n){return ct.getDefault().renderPerson(n.mention,function(n){return $("<span/>").append(n)},t).then(function(t){t&&n.$a.replaceWith(t.htmlComponent)})}),Promise.all(r)},n.processHtmlBatch=function(n,t){t===void 0&&(t=!0);var i=st.getDefault().parseFromHtmlBatch(n),r=i.map(function(n){return ct.getDefault().renderPerson(n.mention,function(n){return $("<span/>").append(n)},t).then(function(t){return t&&n.$a.replaceWith(t.htmlComponent),t})});return Promise.all(r)},n}();t.PeopleMentionProcessor=pt;ot=function(){function n(){this.displayNameToStorageKeyMap={};this.storageKeyToDisplayNameMap={}}return n.getDefault=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.addDisplayNameAndStorageKey=function(n,t){var i=n;return t&&n&&rt.isGuid(t)&&(this.isDisplayNameAndStorageKeyAlreadyAdded(t,n)||(i=this.checkIfDisplayNameExistsInMapAndMangle(n),this.displayNameToStorageKeyMap[i]=t.toUpperCase(),this.storageKeyToDisplayNameMap[t.toUpperCase()]={originalDisplayName:n,mangledDisplayName:i})),i},n.prototype.getDisplayNameRecordUsingStorageKeyAsync=function(n){var r=this,t;return n&&rt.isGuid(n)?(t=n.toUpperCase(),this.storageKeyToDisplayNameMap[t]&&this.storageKeyToDisplayNameMap.hasOwnProperty(t)?i.resolve(this.storageKeyToDisplayNameMap[t]):et.getInstance().getByUniqueId(n).then(function(i){if(i){var u=ft.getIdentityId(i);return r.addDisplayNameAndStorageKey(u,n),r.storageKeyToDisplayNameMap[t]}return null},function(){return i.resolve(null)})):i.resolve(null)},n.prototype.getStorageKeyUsingDisplayName=function(n){return n&&this.displayNameToStorageKeyMap[n]&&this.displayNameToStorageKeyMap.hasOwnProperty(n)?this.displayNameToStorageKeyMap[n]:null},n.prototype.translateDisplayNamesToStorageKeys=function(n){var r=this,t=[],i=u.MentionProcessor.getDefault(),f=i.parseCodeBlocksFromText(n),e=i.parseContainersFromText(n),o=st.getDefault().parseMentions(n,0,f.concat(e));return o.forEach(function(n){var i,f;n.Type===u.TextPartType.Mention?(i=n,i.ArtifactType===ft.PersonArtifactType?(f=r.getStorageKeyUsingDisplayName(i.ArtifactId),f?t.push("@<"+f+">"):t.push(n.Text)):t.push(n.Text)):t.push(n.Text)}),t.join("")},n.prototype.translateStorageKeysToDisplayNames=function(n){var e=this,r=i.defer(),t=[],f=u.MentionProcessor.getDefault(),o=f.parseCodeBlocksFromText(n),s=f.parseContainersFromText(n),h=st.getDefault().parseMentions(n,0,o.concat(s));return h.forEach(function(n,r){if(n.Type===u.TextPartType.Mention){var f=n;t[r]=f.ArtifactType===ft.PersonArtifactType?e.getDisplayNameRecordUsingStorageKeyAsync(f.ArtifactId).then(function(t){return t&&t.mangledDisplayName?i.resolve("@<"+t.mangledDisplayName+">"):i.resolve(n.Text)}):i.resolve(n.Text)}else t[r]=i.resolve(n.Text)}),i.all(t).then(function(n){r.resolve(n.join(""))}),r.promise},n.prototype.getStorageKeyFollowingMaterialization=function(n){return at.getInstance().MaterializeIdentity(n).then(function(n){return n?n:i.reject("MaterializeIdentityProvider.MaterializeIdentity returned empty storageKey")})},n.prototype.isDisplayNameAndStorageKeyAlreadyAdded=function(n,t){return this.storageKeyToDisplayNameMap[n.toUpperCase()]&&this.storageKeyToDisplayNameMap.hasOwnProperty(n.toUpperCase())&&this.storageKeyToDisplayNameMap[n.toUpperCase()].originalDisplayName===t&&this.displayNameToStorageKeyMap[t]&&this.displayNameToStorageKeyMap.hasOwnProperty(t)&&this.displayNameToStorageKeyMap[t]===n.toUpperCase()},n.prototype.checkIfDisplayNameExistsInMapAndMangle=function(n){var t=n,i;if(this.displayNameToStorageKeyMap[n]&&this.displayNameToStorageKeyMap.hasOwnProperty(n))for(i=1,t=n+"("+i+")";this.displayNameToStorageKeyMap[t];)i++,t=n+"("+i+")";return t},n}();t.DisplayNameStorageKeyTranslationProvider=ot;at=function(){function n(){this._graphHttpClient=tt.VssConnection.getConnection().getHttpClient(h.GraphHttpClient,a.ServiceInstanceTypes.SPS)}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.MaterializeIdentity=function(n){var t=this;if(n&&n.entityType&&n.originId){if(n.entityType===v.DirectoryEntityType.User)return this.MaterializeAadUser(n.originId).then(function(n){return t.getStorageKey(n)}).then(function(n){return n.value});if(n.entityType===v.DirectoryEntityType.Group)return this.MaterializeAadGroup(n.originId).then(function(n){return t.getStorageKey(n)}).then(function(n){return n.value})}return i.resolve(null)},n.prototype.MaterializeAadGroup=function(n){if(n)return this._graphHttpClient.createGroup({originId:n});throw new Error("Origin Id cannot be null or empty!");},n.prototype.MaterializeAadUser=function(n){if(n)return this._graphHttpClient.createUser({originId:n});throw new Error("Origin Id cannot be null or empty!");},n.prototype.getStorageKey=function(n){if(n)return this._graphHttpClient.getStorageKey(n.descriptor);throw new Error("Graph member cannot be null!");},n}();t.MaterializeIdentityProvider=at;et=function(){function n(){var t=this;this._cache=new u.ArtifactsCache(function(n){return t._loadPeople(n)},n.QUEUE_WAIT_MSEC,n.MAX_BATCH_SIZE);this._cacheById=new u.ArtifactsCache(function(n){return t._loadPeopleByIds(n)},n.QUEUE_WAIT_MSEC,n.MAX_BATCH_SIZE)}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getArtifactType=function(){return ft.PersonArtifactType},n.prototype.getByUniqueName=function(n){return this._cache.getArtifactPromise(n.toUpperCase())},n.prototype.getByUniqueId=function(n){return this._cacheById.getArtifactPromise(n.toUpperCase())},n.prototype.isIdentityCurrentUser=function(n){var t=k.getDefaultWebContext().user.id;return!t||!n||!n.localId?!1:t.toUpperCase()===n.localId.toUpperCase()},n.prototype._getIdentityPickerService=function(){return tt.VssConnection.getConnection().getService(nt.IdentityService)},n.prototype._loadPeople=function(n){var t={},e={},h=this._getIdentityPickerService(),r,u,o,f,s;for(n=n.map(function(n){return n.toUpperCase()}),r=0;r<n.length;r++)u=n[r],t[u]=i.defer(),e[u]=t[u].promise;o=n.join(";");f=h.getIdentities(o,ht,ft.getSupportedEntityTypes());for(s in f)f[s].then(function(n){var u=n.queryToken.toUpperCase(),i,r;if(t.hasOwnProperty(u))if(i=t[u],n&&n.queryToken&&n.identities)if(k.getPageContext().webAccessConfiguration.isHosted)i.resolve(n.identities.length>0?n.identities.filter(function(t){return rt.ignoreCaseComparer(t.signInAddress,n.queryToken)===0})[0]:null);else{r=u.split("\\");r.length!=2&&i.reject("Invalid unique ID");var e=r[0],o=r[1],f=n.identities.filter(function(n){return rt.ignoreCaseComparer(n.samAccountName,o)==0&&rt.ignoreCaseComparer(n.scopeName,e)==0});i.resolve(f.length>0?f[0]:null)}else i.reject("Invalid result object")},function(i){n.forEach(function(n){t[n].reject(i)})});return e},n.prototype._loadPeopleByIds=function(n){var t={},f={},s=this._getIdentityPickerService(),r,u,o;for(n=n.map(function(n){return n.toUpperCase()}),r=0;r<n.length;r++)u=n[r],t[u]=i.defer(),f[u]=t[u].promise;var h=n.join(";"),e=s.getIdentities(h,ht,ft.getSupportedEntityTypes(),undefined,{UID:!0});for(o in e)e[o].then(function(n){var r=n.queryToken.toUpperCase(),i;t.hasOwnProperty(r)&&(i=t[r],n&&n.queryToken&&n.identities?i.resolve(n.identities.length>0?n.identities[0]:null):i.reject("Invalid result object"))},function(i){n.forEach(function(n){t[n].reject(i)})});return f},n.QUEUE_WAIT_MSEC=10,n.MAX_BATCH_SIZE=50,n}();t.PeopleProvider=et;t.createPeopleHtmlMention=vt;t.getDisplayNameStorageKeyTranslatorInstance=bt});

define("Mention/Scripts/TFS.Mention.WorkItems.Registration",["require","exports","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.WorkItems"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});i.MentionsRenderer.getDefault().registerProvider(r.WorkItemMentionsRenderingProvider.getDefault);i.MentionProcessor.getDefault().registerParser(r.WorkItemsMentionParser.getDefault)});

define("Mention/Scripts/TFS.Mention.People.Registration",["require","exports","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.People"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});i.MentionProcessor.getDefault().registerParser(r.PeopleMentionParser.getDefault);i.MentionsRenderer.getDefault().registerProvider(r.PeopleMentionsRenderingProvider.getDefault);i.MentionProcessor.getDefault().setMentionTranslationProvider(r.DisplayNameStorageKeyTranslationProvider.getDefault())});

define("Mention/Scripts/TFS.Mention.PluginRegistration",["require","exports","q","VSS/VSS","Mention/Scripts/TFS.Mention.WorkItems","Mention/Scripts/TFS.Mention.People","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Mention/Scripts/TFS.Mention.WorkItems.Registration","Mention/Scripts/TFS.Mention.People.Registration"],function(n,t,i,r,u,f,e,o){function l(n){var o=[];return n.forEach(function(n){if(n===s.WorkItem)o.push({factory:function(n){return new u.WorkItemAutocompleteProvider(n)}});else if(n===s.Person)o.push({factory:function(n){return new f.PersonAutocompleteProvider(n)}});else{var h=c[n];h?h.pluginConfig?o.push(h.pluginConfig):(!h.featureFlag||e.FeatureAvailabilityService.isFeatureEnabled(h.featureFlag,!1))&&(h.pluginConfig={factoryPromise:i.Promise(function(i,u){r.using(h.requiredModules,function(n){i(function(t){return n.createPlugin(t)})},function(){u({message:"Failed to find required module for ".concat(n," plugin"),type:t.ERROR_FAILED_TO_FIND_PLUGIN_TYPE})})})},o.push(h.pluginConfig)):o.push({factoryPromise:i.reject({message:"No autocomplete plugin exists for the given plugin type '".concat(n,"'."),type:t.ERROR_NO_REGISTERED_PLUGIN_TYPE})})}}),o}var h,s,c;Object.defineProperty(t,"__esModule",{value:!0});t.getMentionPlugins=t.ERROR_FEATURE_FLAG_DISABLED_TYPE=t.ERROR_FAILED_TO_FIND_PLUGIN_TYPE=t.ERROR_NO_REGISTERED_PLUGIN_TYPE=t.MentionPluginType=void 0,function(n){n[n.WorkItem=0]="WorkItem";n[n.Person=1]="Person";n[n.PullRequest=2]="PullRequest"}(s=t.MentionPluginType||(t.MentionPluginType={}));c=(h={},h[s.PullRequest]={requiredModules:["VersionControl/Scripts/Mentions/PullRequestMentionAutocomplete"],featureFlag:o.FeatureAvailabilityFlags.WebAccessVersionControlPullRequestsMentions},h);t.ERROR_NO_REGISTERED_PLUGIN_TYPE="NoMentionPluginRegisteredError";t.ERROR_FAILED_TO_FIND_PLUGIN_TYPE="FailToFindMentionPluginError";t.ERROR_FEATURE_FLAG_DISABLED_TYPE="MentionPluginFeatureFlagDisabledError";t.getMentionPlugins=l});

define("Mention/Scripts/TFS.Social.RichText.Autocomplete",["require","exports","Mention/Scripts/Resources/TFS.Resources.Mention","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.Autocomplete.Controls","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Mention.People","Mention/Scripts/TFS.Mention.PluginRegistration","Mention/Scripts/TFS.Mention.WorkItems","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/Controls","VSS/Diag","VSS/Events/Services","VSS/FeatureAvailability/Services","VSS/Identities/Picker/Controls","VSS/Utils/Accessibility","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","Mention/Scripts/TFS.Mention.People.Registration","Mention/Scripts/TFS.Mention.WorkItems.Registration"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g){function it(n,t){if(!n)throw new Error(t);}function tt(n,t){it(!!n,"".concat(t," is required"))}var nt,ut,ft,rt,et,ot,st;Object.defineProperty(t,"__esModule",{value:!0});t.RichTextAutocompleteControl=t.RichTextAutocompleteHighlightShadow=t.RichTextAutocompleteHighlight=t.EditableHelpers=t.TextAtCursor=t.Selection=t.Dom=void 0,function(n){function r(n,t,i){return(i===void 0&&(i=!1),!i&&!n&&!t)?!1:n===t}function u(n,t,i,r){tt(n,"parent");tt(r,"node");it(!t||t.parentNode===n,"prevSibling's parent matches the parent argument");it(!i||i.parentNode===n,"nextSibling's parent matches the parent argument");it(!t||t.nextSibling===i,"prevSibling.nextSibling matches the nextSibling parameter");it(!i||i.previousSibling===t,"nextSibling.previousSibling matches the prevSibling parameter");i?n.insertBefore(r,i):n.appendChild(r)}function f(n){tt(n,"node");var r=t(n.childNodes);return r.every(function(n){return i(n)})}function t(n){return[].slice.apply(n)}function i(n){return tt(n,"node"),n.nodeType===Node.TEXT_NODE}function e(n){return tt(n,"node"),n.nodeType===Node.ELEMENT_NODE}function o(n,t){return tt(n,"editable"),rt.getDocument(n).createTextNode(t)}function s(n){return tt(n,"editable"),rt.getDocument(n).createElement("SPAN")}function h(n){tt(n,"node");var t=n.parentNode;return it(!t||t.nodeType==Node.ELEMENT_NODE,"expected parent to be an element node"),t}function c(i){var r,f,u;if(tt(i,"node"),r=n.getParent(i),it(!!r,"node must have a parent"),f=t(r.childNodes),u=w.findIndex(f,function(n){return n===i}),u===-1)throw new Error("child not found in parent's childNodes");return u}n.isSameNode=r;n.insertNode=u;n.areAllChildrenTextNodes=f;n.createArrayFromNodeList=t;n.isTextNode=i;n.isElementNode=e;n.createTextNode=o;n.createSpanElement=s;n.getParent=h;n.getIndexInParent=c}(nt=t.Dom||(t.Dom={})),function(n){function i(n,i,r){t(n,i,function(n){n.setStart(i,r);n.setEnd(i,r)})}function r(n,i){t(n,i,function(n){n.setStartBefore(i);n.setEndAfter(i)})}function u(n,i){t(n,i,function(n){n.selectNodeContents(i);n.collapse(!1)})}function t(n,t,i){var f,r,u;tt(n,"editable");tt(t,"cursorNode");f=rt.getDocument(n);r=rt.getWindow(n).getSelection();it(!!r,"window selection is not null");u=f.createRange();i(u);r.removeAllRanges();r.addRange(u)}function f(n,t){var r,u,f;tt(n,"editable");tt(t,"node");r=nt.getParent(t);it(!!r,"node must have a parent");u=function(){var n=nt.createArrayFromNodeList(r.childNodes),i=w.indexOf(n,t);return i>=0?i+1:n.length};f=u();i(n,r,f)}function e(n){var r,t,i;tt(n,"editable");r=rt.getDocument(n);t=rt.getWindow(n).getSelection();it(!!t,"window selection is not null");t.rangeCount>0&&(i=t.getRangeAt(0),i.collapse(!1),t.removeAllRanges(),t.addRange(i))}function o(n){var t,i;return(tt(n,"editable"),t=rt.getWindow(n).getSelection(),t.rangeCount>0)?(i=t.getRangeAt(0),{startContainer:i.startContainer,startPosition:i.startOffset}):null}function s(t){tt(t,"editable");var i=nt.createSpanElement(t),r=rt.getDocument(t),u=r.body;i.innerText=" ";u.appendChild(i);n.setCursorSelectNode(t,i);r.execCommand("removeFormat");$(i).remove()}n.setCursor=i;n.setCursorSelectNode=r;n.setCursorAtEnd=u;n.setCursorImmediatelyAfter=f;n.collapseSelectionToEnd=e;n.getCurrentSelection=o;n.clearCursorFormatting=s}(ut=t.Selection||(t.Selection={})),function(n){function r(n,t,i){return(i===void 0&&(i=!1),!n&&!t)?i:!n||!t?!1:n===t?!0:n.parent===n.editable&&n.text===""?!0:nt.isSameNode(n.parent,t.parent)&&nt.isSameNode(n.prevSibling,t.prevSibling,!0)}function t(n){return tt(n,"textAtCursor"),{editable:n.editable,parent:n.parent,prevSibling:n.prevSibling,nextSibling:n.nextSibling,nodes:n.nodes.slice(),text:n.text,cursorPosition:n.cursorPosition}}function u(n){var t,u,i,r;if(tt(n,"textAtCursor"),!n.parent.childNodes.length)return{node:n.parent,position:0};if(n.nodes.length===0)return u=0,n.prevSibling&&(u=nt.getIndexInParent(n.prevSibling)+1),{node:n.parent,position:u};for(t=n.prevSibling?n.prevSibling.nextSibling:n.parent.childNodes[0],i=0,r=t.textContent.length;t&&i+r<n.cursorPosition;)i+=r,t=t.nextSibling,r=t.textContent.length;return{node:t,position:n.cursorPosition-i}}function f(n){var r,t,u;if(tt(n,"editable"),r=ut.getCurrentSelection(n),!r)return console.log("selection was null"),null;if(t=r.startContainer,nt.isTextNode(t))u=i({editable:n,parent:nt.getParent(t),prevSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:[t],text:t.textContent,cursorPosition:r.startPosition});else if(nt.isElementNode(t))u=e(n,t,r.startPosition);else return t.nodeType===Node.COMMENT_NODE?null:(l.logWarning("unexpected node type"),null);return u}function e(n,t,r){var u,f,e;return(tt(n,"editable"),tt(t,"container"),u=t.childNodes,r>u.length)?(l.logWarning("selection cursorPosition doesn't make sense"),null):(f=r<=0?null:u[r-1],e=r>=u.length?null:u[r],i({editable:n,parent:t,prevSibling:f,nextSibling:e,nodes:[],text:"",cursorPosition:0}))}function i(n){var i,r,u,f;for(tt(n,"textAtCursor"),n=t(n),i=[];n.prevSibling&&nt.isTextNode(n.prevSibling);)r=n.prevSibling.textContent,i.push(n.prevSibling),n.text=r+n.text,n.cursorPosition+=r.length,n.prevSibling=n.prevSibling.previousSibling;for(i.length>0&&(i.reverse(),n.nodes=i.concat(n.nodes)),u=[];n.nextSibling&&nt.isTextNode(n.nextSibling);)f=n.nextSibling.textContent,u.push(n.nextSibling),n.text=n.text+f,n.nextSibling=n.nextSibling.nextSibling;return n.nodes=n.nodes.concat(u),n}n.areSameTextBlock=r;n.clone=t;n.extractCursorNodeAndPosition=u;n.getFromCurrentSelection=f}(ft=t.TextAtCursor||(t.TextAtCursor={})),function(n){function r(n){return tt(n,"editable"),i(n).frameElement}function t(n){return tt(n,"editable"),n.ownerDocument}function i(n){return tt(n,"editable"),t(n).defaultView}n.getFrame=r;n.getDocument=t;n.getWindow=i}(rt=t.EditableHelpers||(t.EditableHelpers={}));et=function(){function n(){}return n.prototype.getElement=function(){return this._element},n.prototype.getEditable=function(){return this._editor},n.prototype.isInHighlight=function(n){return this._isHighlightElement(n&&n.parent)},n.prototype.deleteHighlightAndContents=function(t){var i,r;this._element&&(i=nt.getParent(this._element),it(!!parent,"this._element must have a parent"),r=nt.getIndexInParent(this._element),$(this._element).removeClass(n.AUTOCOMPLETE_HIGHLIGHT_CSS_CLASS),$(this._element).remove(),ut.clearCursorFormatting(t.editable),this._editor&&ut.setCursor(this._editor,i,r));this._element=null;this._editor=null},n.prototype.checkForAndDeleteOrphanedHighlight=function(n){if(this._element&&!nt.getParent(this._element)){if(n&&n.editable===this._editor){var t=ft.extractCursorNodeAndPosition(n);ut.clearCursorFormatting(n.editable);ut.setCursor(n.editable,t.node,t.position)}return this._element=null,this._editor=null,!0}return!1},n.prototype.replaceHighlightWithHtml=function(n){var t,i;this._element&&(t=$.parseHTML(n,this._element.ownerDocument),t&&t.length===2&&t[0].nodeName==="A"&&this._isElementAPersonMention(t[0])&&this._isElementAPersonMention(this._element.parentElement)?$(this._element.parentElement).replaceWith(t):$(this._element).replaceWith(t),i=t,i.length>0&&ut.setCursorImmediatelyAfter(this._editor,i[i.length-1]));this._element=null;this._editor=null},n.prototype.createHighlightFromTextSegment=function(t,i,r){var f,o,u,e,s;for(it(!this._element&&!this._editor,"a selection is already active"),f=0;f<t.nodes.length;f++)o=t.nodes[f],$(o).remove();u=t.prevSibling;i>0&&(e=nt.createTextNode(t.editable,t.text.substr(0,i)),nt.insertNode(t.parent,u,t.nextSibling,e),u=e);this._editor=t.editable;this._element=nt.createSpanElement(t.editable);$(this._element).addClass(n.AUTOCOMPLETE_HIGHLIGHT_CSS_CLASS);this._element.textContent=t.text.substr(i,r-i);nt.insertNode(t.parent,u,t.nextSibling,this._element);u=this._element;r<t.text.length&&(s=nt.createTextNode(t.editable,t.text.substr(r)),nt.insertNode(t.parent,u,t.nextSibling,s));ut.setCursorAtEnd(this._editor,this._element)},n.prototype.revertHighlightToTextSegment=function(n){var i,t;if(this._element&&!this.checkForAndDeleteOrphanedHighlight(n)){if(i=nt.getParent(this._element),!this._element.childNodes.length){this.deleteHighlightAndContents(n);return}n&&this._editor&&n.editable===this._editor&&(t=ft.extractCursorNodeAndPosition(n));$(this._element).replaceWith(nt.createArrayFromNodeList(this._element.childNodes));t&&(ut.clearCursorFormatting(n.editable),this._editor&&ut.setCursor(this._editor,t.node,t.position));this._element=null;this._editor=null}},n.prototype.stashHighlight=function(n){if(it(!!this._element,"requires an active selection"),this._element&&!this.checkForAndDeleteOrphanedHighlight(n)){if(!n||!nt.isSameNode(n.parent,this._element)){this.revertHighlightToTextSegment(n);return}var t=ft.extractCursorNodeAndPosition(n),i=this._editor.ownerDocument.createTextNode(this._element.textContent);$(this._element).replaceWith(i);this._stashedHighlight={placeholderNode:i,cursorNode:t.node,cursorPosition:t.position}}},n.prototype.unstashHighlight=function(){var n=this._stashedHighlight,t;n&&(this._stashedHighlight=null,it(!nt.getParent(this._element),"stashed element should not have a parent"),t=nt.getParent(n.placeholderNode),t)&&($(n.placeholderNode).replaceWith(this._element),ut.setCursor(this._editor,n.cursorNode,n.cursorPosition))},n.prototype._isHighlightElement=function(t){if(!t)return!1;var i=nt.isElementNode(t)&&$(t).hasClass(n.AUTOCOMPLETE_HIGHLIGHT_CSS_CLASS);return i&&this._element&&!nt.isSameNode(t,this._element)&&l.logWarning("found autocomplete selection node which does not match the stored one"),i},n.prototype._isElementAPersonMention=function(n){if(n&&n.nodeName==="A"){var t=n.getAttribute(r.Constants.HTML_MENTION_ATTR_NAME);if(t)return d.startsWith(t,r.Constants.HTML_MENTION_VERSION_10)&&d.startsWith(n.getAttribute("href"),r.Constants.HTML_MENTION_LEGACY_FORMAT_HREF)||e.Helpers.REGEX_PERSON_MENTION_IN_WORKITEM_DISC.test(t)}return!1},n.AUTOCOMPLETE_HIGHLIGHT_CSS_CLASS="richtext-autocomplete-highlight",n}();t.RichTextAutocompleteHighlight=et;ot=function(){function n(t,i){var r=this;this._autocompleteHighlight=t;this._width=i;this.update=k.throttledDelegate(this,n.CHANGE_DELAY_MS,function(){var i=r._autocompleteHighlight.getElement(),n=r._autocompleteHighlight.getEditable(),t,u,f;if(i&&n){if(t=rt.getFrame(n),u=rt.getDocument(n),!u){l.logWarning("editable does not have a document. aborting operation.");return}var o=t?$(t):null,s=$(u),h={top:s.scrollTop(),left:s.scrollLeft()};n.contains(i)||(f=ft.getFromCurrentSelection(n),f&&(i=f.parent));var e=i.getBoundingClientRect(),a=t?g.Positioning.getZIndex(o):g.Positioning.getZIndex($(n)),c=t?o.offset():{left:0,top:0};r._$element.css({width:r._width,height:e.height,left:c.left+e.left-h.left,top:c.top+e.top-h.top,"z-index":a||""})}},undefined,k.ThrottledDelegateOptions.Immediate+k.ThrottledDelegateOptions.QueueNext);this._$element=$("<div/>").css("position","absolute").css("visibility","hidden")}return n.prototype.initialize=function(n){this._$element.appendTo(n)},n.prototype.getElement=function(){return this._$element},n.CHANGE_DELAY_MS=400,n}();t.RichTextAutocompleteHighlightShadow=ot;st=function(n){function t(i){var r=__construct(this,n,[i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._inComposition=!1,r._isFirstAnnounce=!0,r._artifactContextStack=[],r._updatePeopleActiveDescendantHandler=function(n){var t=$("#".concat(n.activeDescendantId)),i="".concat(t.find(".title").text(),". ").concat(t.find(".subtitle").text());r._announceSelection(i)},r._autocompleteHighlight=t._createRichTextAutocompleteHighlight(),r._autocompleteManager=t._createAutocompleteManager({pluginConfigs:r._options.pluginConfigs,open:f.delegate(r,r._sessionOpen),close:f.delegate(r,r._sessionClose),select:f.delegate(r,r._sessionSelect),getMentionArtifactContext:function(){return r.getCurrentArtifactContext()},focus:f.delegate(r,r._workItemMentionFocusChange)},{menuContainer:f.delegate(r,r.getElement),positioningElement:function(){return r._autocompleteHighlightShadow.getElement()},isMenuWidthOverridable:!0,textElement:function(){var n=r._lastHandleEventEditor;return t._isInlineEditor(n)?$(n):r._autocompleteHighlightShadow.getElement()}}),r._autocompleteHighlightShadow=t._createRichTextAutocompleteHighlightShadow(r._autocompleteHighlight,t.MENU_WIDTH),r}return __extends(t,n),t._createAutocompleteManager=function(n,t){return new u.AutocompleteManager(n,t)},t._createRichTextAutocompleteHighlight=function(){return new et},t._createRichTextAutocompleteHighlightShadow=function(n,t){return new ot(n,t)},t._getDocument=function(){return $(document)},t._getWindow=function(){return $(window)},t._getBody=function(){return $(document.body)},t._isInlineEditor=function(n){return n&&n.classList.contains("text-element")},t.getInstance=function(){if(!t._instance){var r=t._getAutocompleteOptions(),n=$("<div/>"),i=t._getBody().find("> .ui-dialog");i.length?n.insertBefore(i):n.appendTo(t._getBody());t._instance=c.Control.createIn(t,n,r)}return t._instance},t._getAutocompleteOptions=function(){var n=o.getMentionPlugins([o.MentionPluginType.Person,o.MentionPluginType.PullRequest]);return n.push({factory:function(n){return new s.WorkItemAutocompleteProvider(n)},options:{allowHorizontalShift:!0,disablePrefetch:v.FeatureAvailabilityService.isFeatureEnabled(h.FeatureAvailabilityFlags.DisableRichTextWorkItemPrefetch,!1)}}),{pluginConfigs:n}},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._autocompleteManager.initialize();this._autocompleteHighlightShadow.initialize(this.getElement());this._attachContainerDocumentAndWindowEvents()},t.prototype.prefetch=function(){this._autocompleteManager.prefetch()},t.prototype.pushArtifactContext=function(n){this._artifactContextStack.push(n)},t.prototype.popArtifactContext=function(){this._artifactContextStack.pop()},t.prototype.getCurrentArtifactContext=function(){return this._artifactContextStack.length>0?this._artifactContextStack[this._artifactContextStack.length-1]:undefined},t.prototype.attachToEditable=function(n){var t=!document.body.contains(n);tt(n,"editable");it(n.isContentEditable||t,"editable must be contenteditable");it(!!rt.getDocument(n),"editable must be attached to a Document");it(!!rt.getWindow(n),"editable must be attached to a Window");this._attachEditorEvents(n)},t.prototype.resetEditable=function(n,t){this._autocompleteHighlight.getEditable()===t&&this._forceCancelAutocomplete(n)},t.prototype.stashHighlight=function(n){if(n===this._autocompleteHighlight.getEditable()){var t=ft.getFromCurrentSelection(n);t&&this._autocompleteHighlight.stashHighlight(t)}},t.prototype.unstashHighlight=function(n){n===this._autocompleteHighlight.getEditable()&&this._autocompleteHighlight.unstashHighlight()},t.prototype.cleanUpEditor=function(n){var t=this._autocompleteHighlight.getEditable(),i;t&&t.id===n.id&&(i=$.Event("editorCleanUp"),this._forceCancelAutocomplete(i))},t.prototype.closeActiveAutocomplete=function(){this._forceCancelAutocomplete(t.MANUAL_EVENT)},t.prototype.suggest=function(n){var i,r,u;(tt(n,"editable"),i=ft.getFromCurrentSelection(n),i)&&(r=i.text.substring(0,i.cursorPosition),u={textBeforeSelection:r,textInSelection:"",textAfterSelection:""},this._handleEvent(t.MANUAL_EVENT,i,u))},t.prototype._sessionOpen=function(n){if(this._isFirstAnnounce=!0,this._lastHandleEventEditor){var t=ft.getFromCurrentSelection(this._lastHandleEventEditor);this._autocompleteHighlight.createHighlightFromTextSegment(t,n.start,n.end);this._autocompleteHighlightShadow.update()}a.getService().attachEvent(y.IdentityPickerDropdownControl.UPDATE_ACTIVE_DESCENDANT_ID,this._updatePeopleActiveDescendantHandler);this._options.open&&this._options.open(n)},t.prototype._sessionClose=function(){if(this._lastHandleEventEditor){var n=ft.getFromCurrentSelection(this._lastHandleEventEditor);this._autocompleteHighlight.revertHighlightToTextSegment(n)}a.getService().detachEvent(y.IdentityPickerDropdownControl.UPDATE_ACTIVE_DESCENDANT_ID,this._updatePeopleActiveDescendantHandler);this._options.close&&this._options.close()},t.prototype._sessionSelect=function(n){var i=this._autocompleteHighlight.getEditable();this._autocompleteHighlight.replaceHighlightWithHtml(n.getHtml());ut.collapseSelectionToEnd(i);i.dispatchEvent(new CustomEvent(t.SELECTED_EVENT_NAME))},t.prototype._workItemMentionFocusChange=function(n){var t=$(n.getHtml()).text();this._announceSelection(t)},t.prototype._attachContainerDocumentAndWindowEvents=function(){var n=this;t._getDocument().on("scroll",function(t){n._forceCancelAutocomplete(t)});t._getWindow().on("resize",function(t){n._forceCancelAutocomplete(t)})},t.prototype._attachEditorEvents=function(n){var t=this,i=$(n),r;i.on("keyup keydown keypress input click",function(i){if(i.key==="Unidentified"&&(t._inComposition=!1),!t._inComposition)return t._handleEditorUserInputEvent(i,n);i.stopPropagation()});i.on("compositionstart",function(){t._inComposition=!0});i.on("compositionend",function(){t._inComposition=!1});i.on("blur",function(n){var i=$(document.activeElement);i.is(".identity-picker-dropdown")||i.is(".mention-autocomplete-menu")||t._forceCancelAutocomplete(n)});i.on("focus",function(){t.prefetch()});i.on("paste",function(i){return t._handleEditorPasteEvent(i,n)});r=$(rt.getDocument(n));r.on("scroll",function(n){t._forceCancelAutocomplete(n)})},t.prototype._announceSelection=function(n){if(!t._isInlineEditor(this._lastHandleEventEditor)&&n){var u=d.format(i.WorkItemMentionOptionSelected,n),r=!0;this._isFirstAnnounce&&(r=!1,this._isFirstAnnounce=!1);b.delay(this,0,function(){return p.announce(u,r)})}},t.prototype._forceCancelAutocomplete=function(n){return this._autocompleteManager.close(n,{textBeforeSelection:"",textInSelection:"",textAfterSelection:""})},t.prototype._handleEvent=function(n,i,r){this._lastHandleEventEditor=i.editable;var u=this._autocompleteManager.isActive(),f=this._autocompleteManager.handleEvent(n,r);return u&&t.INTERCEPTED_EVENT_KEYCODES.some(function(t){return t===n.keyCode})?(n.preventDefault(),n.stopPropagation(),!1):f},t.prototype._handleEditorUserInputEvent=function(n,t){var i,u,r;if(tt(t,"editable"),i=ft.getFromCurrentSelection(t),this._autocompleteHighlight.checkForAndDeleteOrphanedHighlight(i)&&this._forceCancelAutocomplete(n),n.type==="keydown")this._lastKeydownTextAtCursor=i;else if(n.type==="keyup")if(this._autocompleteHighlight.isInHighlight(i))if(i.text){if(this._lastKeydownTextAtCursor.text!==i.text)return r={textBeforeSelection:i.text,textInSelection:"",textAfterSelection:""},this._autocompleteHighlightShadow.update(),this._handleEvent(n,i,r)}else return this._forceCancelAutocomplete(n);else return ft.areSameTextBlock(this._lastKeydownTextAtCursor,i)&&this._lastKeydownTextAtCursor.text!==i.text?(u=i.text.substring(0,i.cursorPosition),r={textBeforeSelection:u,textInSelection:"",textAfterSelection:""},this._handleEvent(n,i,r)):this._forceCancelAutocomplete(n);else if(n.type==="click"&&!this._autocompleteHighlight.isInHighlight(i))return this._forceCancelAutocomplete(n);if(this._autocompleteManager.isActive())return this._handleEvent(n,i)},t.prototype._handleEditorPasteEvent=function(n,t){var f=ft.getFromCurrentSelection(t),i,u,s;if(this._autocompleteHighlight.isInHighlight(f)){for(n.preventDefault(),n.stopImmediatePropagation(),i=n;i.originalEvent;)i=i.originalEvent;if(i.clipboardData&&(u=i.clipboardData.getData("text/plain"),u)){var o=ft.extractCursorNodeAndPosition(f),r=o.node,e=o.position;return it(nt.isTextNode(r),"Expected cursor to be in a text node."),r.data=r.data.substring(0,e)+u+r.data.substring(e),ut.setCursor(t,r,e+u.length),s={textBeforeSelection:r.data,textInSelection:"",textAfterSelection:""},this._autocompleteHighlightShadow.update(),this._handleEvent(n,f,s)}}},t.SELECTED_EVENT_NAME="autocompleteSelect",t.MENU_WIDTH="300px",t.INTERCEPTED_EVENT_KEYCODES=[g.KeyCode.ESCAPE,g.KeyCode.TAB,g.KeyCode.ENTER],t.MANUAL_EVENT=jQuery.Event("manual"),t}(c.Control);t.RichTextAutocompleteControl=st});

define("RoosterReact/rooster-react-amd",["react","OfficeFabric/FocusZone","OfficeFabric/Utilities","OfficeFabric/Button","OfficeFabric/Tooltip","OfficeFabric/Icon","OfficeFabric/TextField","react-dom","OfficeFabric/Callout","OfficeFabric/CommandBar","OfficeFabric/Dialog"],(function(e,t,n,o,r,i,a,s,l,u,c){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=100)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(26);t.NodeBlockElement=o.default;var r=n(8);t.getBlockElementAtNode=r.default;var i=n(47);t.getFirstLastBlockElement=i.default;var a=n(45);t.StartEndBlockElement=a.default;var s=n(30);t.ContentTraverser=s.default;var l=n(121);t.PositionContentSearcher=l.default;var u=n(13);t.getInlineElementAtNode=u.default;var c=n(48);t.ImageInlineElement=c.default;var d=n(49);t.LinkInlineElement=d.default;var f=n(20);t.NodeInlineElement=f.default;var h=n(22);t.PartialInlineElement=h.default;var p=n(31);t.applyTextStyle=p.default;var m=n(53);t.Browser=m.Browser,t.getBrowserInfo=m.getBrowserInfo;var g=n(122);t.applyFormat=g.default;var v=n(54);t.changeElementTag=v.default;var y=n(27);t.collapseNodes=y.default;var b=n(4);t.contains=b.default;var C=n(123);t.extractClipboardEvent=C.default;var E=n(19);t.findClosestElementAncestor=E.default;var _=n(46);t.fromHtml=_.default;var S=n(21);t.getComputedStyles=S.default,t.getComputedStyle=S.getComputedStyle;var O=n(124);t.getPendableFormatState=O.default,t.PendableFormatCommandMap=O.PendableFormatCommandMap;var P=n(5);t.getTagOfNode=P.default;var N=n(28);t.isBlockElement=N.default;var w=n(35);t.isNodeEmpty=w.default;var k=n(125);t.isRtl=k.default;var D=n(29);t.isVoidHtmlElement=D.default;var T=n(126);t.matchLink=T.default;var I=n(127);t.adjustNodeInsertPosition=I.default;var B=n(56);t.queryElements=B.default;var L=n(16);t.splitParentNode=L.default,t.splitBalancedNodeRange=L.splitBalancedNodeRange;var x=n(57);t.unwrap=x.default;var A=n(18);t.wrap=A.default;var M=n(14);t.getNextLeafSibling=M.getNextLeafSibling,t.getPreviousLeafSibling=M.getPreviousLeafSibling;var R=n(51);t.getFirstLeafNode=R.getFirstLeafNode,t.getLastLeafNode=R.getLastLeafNode;var j=n(128);t.getTextContent=j.default;var F=n(32);t.splitTextNode=F.default;var H=n(58);t.VTable=H.default;var U=n(7);t.Position=U.default;var z=n(10);t.createRange=z.default,t.getRangeFromSelectionPath=z.getRangeFromSelectionPath;var K=n(129);t.getPositionRect=K.default;var W=n(55);t.isPositionAtBeginningOf=W.default;var V=n(59);t.getSelectionPath=V.default;var G=n(130);t.getHtmlWithSelectionPath=G.default;var q=n(131);t.setHtmlWithSelectionPath=q.default;var Z=n(132);t.addSnapshot=Z.default;var X=n(36);t.canMoveCurrentSnapshot=X.default;var Y=n(60);t.clearProceedingSnapshots=Y.default;var J=n(133);t.moveCurrentSnapsnot=J.default;var Q=n(134);t.createSnapshots=Q.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(135);t.Keys=o.Keys;var r=n(136);t.Editor=r.default;var i=n(70);t.Undo=i.default;var a=n(64);t.EditPlugin=a.default;var s=n(68);t.MouseUpPlugin=s.default;var l=n(63);t.DOMEventPlugin=l.default;var u=n(69);t.TypeInContainerPlugin=u.default;var c=n(65);t.FirefoxTypeAfterLink=c.default;var d=n(61);t.CopyPlugin=d.default;var f=n(37);t.cacheGetEventData=f.default;var h=n(67);t.clearEventDataCache=h.default;var p=n(66);t.cacheGetContentSearcher=p.cacheGetContentSearcher,t.clearContentSearcherCache=p.clearContentSearcherCache;var m=n(150);t.cacheGetElementAtCursor=m.default;var g=n(72);t.isModifierKey=g.default;var v=n(71);t.isCharacterValue=v.default;var y=n(151);t.isCtrlOrMetaPressed=y.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(201);t.registerDefaultString=o.registerDefaultString,t.getString=o.getString;var r=n(202);t.NullFunction=r.NullFunction;var i=n(203);t.closest=i.closest;var a=n(204);t.setNonCompatIndentation=a.setNonCompatIndentation,t.toggleNonCompatBullet=a.toggleNonCompatBullet,t.toggleNonCompatNumbering=a.toggleNonCompatNumbering;var s=n(88);t.css=s.css,t.getDataAndAriaProps=s.getDataAndAriaProps;var l=n(39);t.ImageManager=l.default;var u=n(207);t.ContentChangedPlugin=u.default;var c=n(208);t.DoubleClickImagePlugin=c.default;var d=n(209);t.PasteImagePlugin=d.default;var f=n(210);t.IgnorePasteImagePlugin=f.default;var h=n(211);t.UndoWithImagePlugin=h.default;var p=n(89);t.Base64Svgs=p.Base64Svgs;var m=n(212);t.AriaAttributes=m.AriaAttributes},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(152);t.changeFontSize=o.default,t.FONT_SIZES=o.FONT_SIZES;var r=n(153);t.clearBlockFormat=r.default,t.TAGS_TO_UNWRAP=r.TAGS_TO_UNWRAP,t.TAGS_TO_STOP_UNWRAP=r.TAGS_TO_STOP_UNWRAP,t.ATTRIBUTES_TO_PRESERVE=r.ATTRIBUTES_TO_PRESERVE;var i=n(154);t.clearFormat=i.default;var a=n(155);t.createLink=a.default;var s=n(156);t.getFormatState=s.default,t.getElementBasedFormatState=s.getElementBasedFormatState,t.getStyleBasedFormatState=s.getStyleBasedFormatState;var l=n(157);t.insertImage=l.default;var u=n(158);t.insertTable=u.default;var c=n(159);t.editTable=c.default;var d=n(160);t.formatTable=d.default;var f=n(161);t.removeLink=f.default;var h=n(162);t.replaceWithNode=h.default;var p=n(163);t.setAlignment=p.default;var m=n(76);t.setBackgroundColor=m.default;var g=n(79);t.setTextColor=g.default;var v=n(164);t.setDirection=v.default;var y=n(77);t.setFontName=y.default;var b=n(78);t.setFontSize=b.default;var C=n(165);t.setImageAltText=C.default;var E=n(166);t.setIndentation=E.default;var _=n(80);t.toggleBold=_.default;var S=n(167);t.toggleBullet=S.default;var O=n(81);t.toggleItalic=O.default;var P=n(168);t.toggleNumbering=P.default;var N=n(169);t.toggleBlockQuote=N.default;var w=n(170);t.toggleCodeBlock=w.default;var k=n(171);t.toggleStrikethrough=k.default;var D=n(172);t.toggleSubscript=D.default;var T=n(173);t.toggleSuperscript=T.default;var I=n(82);t.toggleUnderline=I.default;var B=n(174);t.toggleHeader=B.default;var L=n(0);t.getPendableFormatState=L.getPendableFormatState},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return!(!e||!t)&&(!(!n||e!=t)||(t instanceof Node||(t=t&&t.commonAncestorContainer,n=!0),t&&3==t.nodeType&&(t=t.parentNode,n=!0),1!=e.nodeType?!!n&&e==t:!(!n&&e==t)&&e.contains(t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&1==e.nodeType?e.tagName.toUpperCase():""}},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),r=n(15),i=function(){function e(e,t){switch(e.node?(this.node=e.node,t=e.offset):this.node=e,t){case-2:this.offset=a(this.node),this.node=this.node.parentNode,this.isAtEnd=!1;break;case-3:this.offset=a(this.node)+1,this.isAtEnd=!this.node.nextSibling,this.node=this.node.parentNode;break;case-1:this.offset=s(this.node),this.isAtEnd=!0;break;default:var n=s(this.node);this.offset=Math.max(0,Math.min(t,n)),this.isAtEnd=t>0&&t>=n}this.element=o.default(this.node)}return e.prototype.normalize=function(){if(3==this.node.nodeType||!this.node.firstChild)return this;for(var t=this.node,n=this.isAtEnd?-1:this.offset;1==t.nodeType;){var o=0==n?t.firstChild:-1==n?t.lastChild:t.childNodes[n];if(!o)break;t=o,n=this.isAtEnd?-1:0}return new e(t,n)},e.prototype.equalTo=function(e){return e&&(this==e||this.node==e.node&&this.offset==e.offset&&this.isAtEnd==e.isAtEnd)},e.prototype.isAfter=function(e){return this.node==e.node?this.isAtEnd&&!e.isAtEnd||this.offset>e.offset:r.default(this.node,e.node)},e.prototype.move=function(t){return new e(this.node,Math.max(this.offset+t,0))},e.getStart=function(t){return new e(t.startContainer,t.startOffset)},e.getEnd=function(t){return new e(t.endContainer,t.endOffset)},e}();function a(e){for(var t=0;e=e.previousSibling;)t++;return t}function s(e){return 3==e.nodeType?e.nodeValue.length:1==e.nodeType?e.childNodes.length:1}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(27),r=n(4),i=n(5),a=n(28),s=n(26),l=n(45);function u(e,t,n){var o=e;if("BR"==i.default(o)&&n)return o;for(;o;){for(var r=e;!(r=n?e.nextSibling:e.previousSibling);)if((e=e.parentNode)==t)return o;for(;r;){if(a.default(r))return o;if("BR"==i.default(r))return n?r:o;e=r,r=n?e.firstChild:e.lastChild}o=e}return o}t.default=function(e,t){if(!r.default(e,t))return null;var n=l.default.getBlockContext(t);if(n==t)return new s.default(n);var i=u(t,n,!1),c=u(t,n,!0),d=o.default(e,i,c,!1);if(i=d[0],c=d[d.length-1],i.parentNode!=c.parentNode)return new l.default(e,i,c);for(;!i.previousSibling&&!c.nextSibling;){var f=i.parentNode;if(f==n){n!=e&&(i=c=f);break}i=c=f}return i==c&&a.default(i)?new s.default(i):new l.default(e,i,c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=null;t.default=function(e,t){e.focus();var n=function(){return e.getDocument().execCommand(t,!1,null)},i=e.getSelectionRange();i&&i.collapsed?(e.addUndoSnapshot(),n(),function(e){r||(r=Object.keys(o.PendableFormatCommandMap).map((function(e){return o.PendableFormatCommandMap[e]})));return r.indexOf(e)>=0}(t)&&e.triggerPluginEvent(12,{formatState:o.getPendableFormatState(e.getDocument())})):e.addUndoSnapshot(n,"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(29),r=n(7);function i(e,t,n,o){var i,u;if(s(e)?(i=e,u=s(t)?t:null):e instanceof Node&&(t instanceof Array?(i=l(e,t),u=n instanceof Array?l(e,n):null):"number"==typeof t?(i=new r.default(e,t),u=n instanceof Node?new r.default(n,o):null):(t instanceof Node||!t)&&(i=new r.default(e,-2),u=new r.default(t||e,-3))),i&&i.node){var c=i.node.ownerDocument.createRange();return i=a(i),u=a(u||i),c.setStart(i.node,i.offset),c.setEnd(u.node,u.offset),c}return null}function a(e){return 1==e.node.nodeType&&o.default(e.node)?new r.default(e.node,e.isAtEnd?-3:-2):e}function s(e){return e&&e.node}function l(e,t){if(!e||!t)return null;for(var n,o=0;o<t.length&&(n=t[o],o<t.length-1&&e&&1==e.nodeType&&e.childNodes.length>n);o++)e=e.childNodes[n];return new r.default(e,n)}t.default=i,t.getRangeFromSelectionPath=function(e,t){return i(e,t.start,t.end)}},function(e,t,n){"use strict";(function(e){var n,o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"==typeof window?e:window,i=function(){var e=r.__themeState__||{theme:void 0,lastStyleElement:void 0,registeredStyles:[]};e.runState||(e=o({},e,{perf:{count:0,duration:0},runState:{flushTimer:0,mode:0,buffer:[]}}));e.registeredThemableStyles||(e=o({},e,{registeredThemableStyles:[]}));return r.__themeState__=e,e}(),a=/[\'\"]\[theme:\s*(\w+)\s*(?:\,\s*default:\s*([\\"\']?[\.\,\(\)\#\-\s\w]*[\.\,\(\)\#\-\w][\"\']?))?\s*\][\'\"]/g,s=1e4,l=function(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()};function u(e){var t=l();e();var n=l();i.perf.duration+=n-t}function c(){u((function(){var e=i.runState.buffer.slice();i.runState.buffer=[];var t=[].concat.apply([],e);t.length>0&&d(t)}))}function d(e,t){i.loadStyles?i.loadStyles(m(e).styleString,e):n?function(e,t){var n=document.getElementsByTagName("head")[0],o=i.registeredStyles,r=i.lastStyleElement,a=r?r.styleSheet:void 0,l=a?a.cssText:"",u=o[o.length-1],c=m(e).styleString;(!r||l.length+c.length>s)&&((r=document.createElement("style")).type="text/css",t?(n.replaceChild(r,t.styleElement),t.styleElement=r):n.appendChild(r),t||(u={styleElement:r,themableStyle:e},o.push(u)));r.styleSheet.cssText+=p(c),Array.prototype.push.apply(u.themableStyle,e),i.lastStyleElement=r}(e,t):function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("style"),o=m(e),r=o.styleString,a=o.themable;n.type="text/css",n.appendChild(document.createTextNode(r)),i.perf.count++,t.appendChild(n);var s={styleElement:n,themableStyle:e};a?i.registeredThemableStyles.push(s):i.registeredStyles.push(s)}(e)}function f(e){void 0===e&&(e=3),3!==e&&2!==e||(h(i.registeredStyles),i.registeredStyles=[]),3!==e&&1!==e||(h(i.registeredThemableStyles),i.registeredThemableStyles=[])}function h(e){e.forEach((function(e){var t=e&&e.styleElement;t&&t.parentElement&&t.parentElement.removeChild(t)}))}function p(e){return e&&(e=m(g(e)).styleString),e}function m(e){var t=i.theme,n=!1;return{styleString:(e||[]).map((function(e){var o=e.theme;if(o){n=!0;var r=t?t[o]:void 0,i=e.defaultValue||"inherit";return!t||r||!console||o in t||"undefined"==typeof DEBUG||!DEBUG||console.warn('Theming value not provided for "'+o+'". Falling back to "'+i+'".'),r||i}return e.rawString})).join(""),themable:n}}function g(e){var t=[];if(e){for(var n=0,o=void 0;o=a.exec(e);){var r=o.index;r>n&&t.push({rawString:e.substring(n,r)}),t.push({theme:o[1],defaultValue:o[2]}),n=a.lastIndex}t.push({rawString:e.substring(n)})}return t}t.loadStyles=function(e,t){void 0===t&&(t=!1),u((function(){var o=Array.isArray(e)?e:g(e);void 0===n&&(n=function(){var e=!1;if("undefined"!=typeof document){var t=document.createElement("style");t.type="text/css",e=!!t.styleSheet}return e}());var r=i.runState,a=r.mode,s=r.buffer,l=r.flushTimer;t||1===a?(s.push(o),l||(i.runState.flushTimer=setTimeout((function(){i.runState.flushTimer=0,c()}),0))):d(o)}))},t.configureLoadStyles=function(e){i.loadStyles=e},t.configureRunMode=function(e){i.runState.mode=e},t.flush=c,t.loadTheme=function(e){i.theme=e,function(){if(i.theme){for(var e=[],t=0,n=i.registeredThemableStyles;t<n.length;t++){var o=n[t];e.push(o.themableStyle)}e.length>0&&(f(1),d([].concat.apply([],e)))}}()},t.clearStyles=f,t.detokenize=p,t.splitStyles=g}).call(this,n(206))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(101);t.HtmlSanitizer=o.default;var r=n(44);t.htmlToDom=r.default,t.splitWithFragment=r.splitWithFragment;var i=n(43);t.getInheritableStyles=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),r=n(5),i=n(48),a=n(49),s=n(20);t.default=function(e,t){var n=e instanceof Node?o.default(e,t):e;return t&&n&&function(e,t){for(var n,o=[e],l=e.parentNode;l&&t.contains(l);l=l.parentNode)o.push(l);for(var u=o.length-1;u>=0&&!n;u--){var c=o[u],d=r.default(c);"A"==d?n=new a.default(c,t):"IMG"==d&&(n=new i.default(c,t))}return n||new s.default(e,t)}(t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(33);function i(e,t,n){var i=null,a=n?function(e){return e.nextSibling}:function(e){return e.previousSibling},s=n?function(e){return e.firstChild}:function(e){return e.lastChild};if(o.default(e,t))for(var l=t,u=!0;u;){var c=l.parentNode;for(l=a(l);!l&&c!=e;)l=a(c),c=c.parentNode;for(;l&&s(l);)l=s(l);if(!(u=l&&r.default(l))){i=l;break}}return i}t.getLeafSibling=i,t.getNextLeafSibling=function(e,t){return i(e,t,!0)},t.getPreviousLeafSibling=function(e,t){return i(e,t,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return!(!e||!t||4!=(4&t.compareDocumentPosition(e)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(15);function r(e,t){if(!e||!e.parentNode)return null;var n=e.parentNode,o=n.cloneNode(!1);if(o.removeAttribute("id"),t)for(;n.firstChild&&n.firstChild!=e;)o.appendChild(n.firstChild);else for(;e.nextSibling;)o.appendChild(e.nextSibling);return o.firstChild&&""!=o.innerHTML?n.parentNode.insertBefore(o,t?n:n.nextSibling):o=null,o}t.default=r,t.splitBalancedNodeRange=function(e){var t=e instanceof Array?e[0]:e,n=e instanceof Array?e[e.length-1]:e,i=t&&n&&t.parentNode==n.parentNode?t.parentNode:null;if(i){if(o.default(t,n)){var a=n;n=t,t=a}r(t,!0),r(n,!1)}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r="";t.default=function(e,t){e.focus();var n=e.getSelectionRange();if(n&&n.collapsed){var i=n.startContainer;if("SPAN"==o.getTagOfNode(i)&&(!i.firstChild||"BR"==o.getTagOfNode(i.firstChild)&&!i.firstChild.nextSibling))e.addUndoSnapshot(),t(i);else i&&3==i.nodeType&&i.nodeValue==r&&"SPAN"==o.getTagOfNode(i.parentNode)||(e.addUndoSnapshot(),i=e.getDocument().createTextNode(r),n.insertNode(i)),o.applyTextStyle(i,t),e.select(i,-1)}else e.addUndoSnapshot((function(){for(var n,o,r=e.getSelectionTraverser(),i=r&&r.currentInlineElement;i;){var a=r.getNextInlineElement();i.applyStyle((function(e,r){t(e,r),n=n||e,o=e})),i=a}n&&o&&e.select(n,-2,o,-3)}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(46);t.default=function(e,t){if(0==(e=e?e instanceof Node?[e]:e:[]).length||!e[0])return null;if(!(t instanceof Element)){var n=e[0].ownerDocument;t=/^\w+$/.test(t=t||"div")?n.createElement(t):o.default(t,n)[0]}var r=e[0].parentNode;r&&r.insertBefore(t,e[0]);for(var i=0,a=e;i<a.length;i++){var s=a[i];t.appendChild(s)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4);t.default=function(e,t,n){var r=(e=e?1==e.nodeType?e:e.parentNode:null)&&1==e.nodeType?e:null;if(r&&n)if(r.closest)r=r.closest(n);else for(;r&&r!=t&&!(r.matches||r.msMatchesSelector).call(r,n);)r=r.parentElement;return!t||o.default(t,r)?r:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),r=n(15),i=n(7),a=function(){function e(e,t){this.containerNode=e,this.parentBlock=t}return e.prototype.getTextContent=function(){return 3==this.containerNode.nodeType?this.containerNode.nodeValue:this.containerNode.textContent},e.prototype.getContainerNode=function(){return this.containerNode},e.prototype.getParentBlock=function(){return this.parentBlock},e.prototype.getStartPosition=function(){return new i.default(this.containerNode,0).normalize()},e.prototype.getEndPosition=function(){return new i.default(this.containerNode,-1).normalize()},e.prototype.isTextualInlineElement=function(){return this.containerNode&&3==this.containerNode.nodeType},e.prototype.isAfter=function(e){return e&&r.default(this.containerNode,e.getContainerNode())},e.prototype.contains=function(e){var t=this.getStartPosition(),n=this.getEndPosition();return e&&e.isAfter(t)&&n.isAfter(e)},e.prototype.applyStyle=function(e){o.default(this.containerNode,e)},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(19);function r(e,t){void 0===t&&(t=["font-family","font-size","color","background-color"]);var n=o.default(e),r=[];if(t=t instanceof Array?t:[t],n){var a=(n.ownerDocument.defaultView||window).getComputedStyle(n);if(a)for(var s=0,l=t;s<l.length;s++){var u=l[s],c=(a.getPropertyValue(u)||"").toLowerCase();c="font-size"==u?i(c):c,r.push(c)}}return r}function i(e){return e&&e.indexOf("px")==e.length-2?Math.round(75*parseFloat(e)+.05)/100+"pt":e}t.default=r,t.getComputedStyle=function(e,t){return r(e,t)[0]||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),r=n(10),i=n(7),a=n(14),s=function(){function e(e,t,n){this.inlineElement=e,this.start=t,this.end=n}return e.prototype.getDecoratedInline=function(){return this.inlineElement},e.prototype.getContainerNode=function(){return this.inlineElement.getContainerNode()},e.prototype.getParentBlock=function(){return this.inlineElement.getParentBlock()},e.prototype.getTextContent=function(){return r.default(this.getStartPosition(),this.getEndPosition()).toString()},e.prototype.getStartPosition=function(){return this.start||this.inlineElement.getStartPosition()},e.prototype.getEndPosition=function(){return this.end||this.inlineElement.getEndPosition()},Object.defineProperty(e.prototype,"nextInlineElement",{get:function(){return this.end&&new e(this.inlineElement,this.end,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousInlineElement",{get:function(){return this.start&&new e(this.inlineElement,null,this.start)},enumerable:!0,configurable:!0}),e.prototype.contains=function(e){return e&&e.isAfter(this.getStartPosition())&&this.getEndPosition().isAfter(e)},e.prototype.isTextualInlineElement=function(){return this.inlineElement&&this.inlineElement.isTextualInlineElement()},e.prototype.isAfter=function(e){var t=this.getStartPosition(),n=e&&e.getEndPosition();return n&&(t.isAfter(n)||t.equalTo(n))},e.prototype.applyStyle=function(e){var t=this.getStartPosition().normalize(),n=this.getEndPosition().normalize(),r=this.getContainerNode();if(t.isAtEnd){var s=a.getNextLeafSibling(r,t.node);t=s?new i.default(s,0):null}if(0==n.offset){var l=a.getPreviousLeafSibling(r,n.node);n=l?new i.default(l,-1):null}o.default(r,e,t,n)},e}();t.default=s},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";var o,r;Object.defineProperty(t,"__esModule",{value:!0});var i=h("1f60a",":) :-)"),a=h("1f609",";) ;-)"),s=h("02764","<3"),l=h("1f61e",":( :-("),u=h("1f603",":D :-D");t.MoreEmoji={key:"more",description:"emjDMore",codePoint:""},t.CommonEmojis=[i,a,s,l,u,t.MoreEmoji];var c=((o={}).People=[h("1f601"),h("1f602"),u,h("1f604"),h("1f605"),h("1f606"),h("1f607"),a,i,h("1f642"),h("1f60b"),h("1f60c"),h("1f60d"),h("1f618"),h("1f61a"),h("1f61c"),h("1f61d",":p :P :-p :-P"),h("1f60e","B) B-)"),h("1f60f"),h("1f636"),h("1f610",":| :-|"),h("1f612"),h("1f633"),l,h("1f620"),h("1f621"),h("1f614"),h("1f623"),h("1f616"),h("1f62b"),h("1f629"),h("1f624"),h("1f631"),h("1f628"),h("1f630"),h("1f625"),h("1f622"),h("1f62a"),h("1f613"),h("1f62d"),h("1f635"),h("1f632",":o :O :-o :-O"),h("1f637"),h("1f4a4"),p("1f608"),h("1f47f"),p("1f479"),p("1f47a"),h("1f480"),h("1f47b"),h("1f47d"),h("1f63a"),h("1f638"),h("1f639"),h("1f63b"),h("1f63c"),h("1f63d"),p("1f640"),h("1f63f"),h("1f63e"),h("1f64c"),h("1f44f"),h("1f44b"),h("1f44d"),h("1f44e"),h("1f44a"),h("0270a"),h("0270b"),h("0270c"),h("1f44c"),p("1f450"),p("1f596"),h("1f4aa"),h("1f64f"),h("1f446"),h("1f447"),h("1f448"),h("1f449"),h("1f485"),h("1f444"),h("1f445"),h("1f442"),h("1f443"),h("1f440"),p("1f464"),h("1f476"),h("1f466"),h("1f467"),h("1f468"),h("1f469"),h("1f471"),h("1f474"),h("1f475"),p("1f472"),p("1f473"),h("1f46e"),h("1f477"),h("1f482"),h("1f385"),h("1f47c"),h("1f478"),h("1f470"),h("1f6b6"),h("1f3c3"),h("1f483"),h("1f46f"),h("1f46b"),p("1f647"),h("1f481"),h("1f645"),h("1f646"),h("1f64b"),h("1f64e"),h("1f64d"),h("1f487"),h("1f486"),h("1f491"),h("1f48f"),h("1f46a"),h("1f45a"),h("1f455"),h("1f456"),h("1f454"),h("1f457"),h("1f459"),h("1f458"),h("1f484"),h("1f48b"),h("1f463"),p("1f460"),h("1f461"),h("1f462"),h("1f45e"),h("1f45f"),h("1f452"),h("1f3a9"),h("1f393"),h("1f451"),h("1f392"),h("1f45d"),h("1f45b"),h("1f45c"),h("1f4bc"),h("1f453"),h("1f48d"),h("1f302")],o.Nature=[h("1f436"),h("1f431"),h("1f42d"),h("1f439"),h("1f430"),h("1f43b"),h("1f43c"),p("1f428"),h("1f42f"),h("1f42e"),h("1f437"),h("1f43d"),h("1f438"),h("1f419"),h("1f435"),h("1f648"),h("1f649"),h("1f64a"),h("1f412"),h("1f427"),h("1f426"),p("1f424"),h("1f423"),h("1f425"),h("1f43a"),h("1f417"),h("1f434"),h("1f41d"),h("1f41b"),h("1f40c"),h("1f41e"),h("1f41c"),h("1f40d"),h("1f422"),h("1f420"),h("1f41f"),h("1f421"),h("1f42c"),h("1f433"),h("1f414"),h("1f42b"),h("1f418"),h("1f411"),h("1f40e"),h("1f429"),h("1f43e"),h("1f432"),h("1f335"),h("1f384"),h("1f334"),h("1f331"),h("1f33f"),h("1f340"),p("1f38d"),p("1f38b"),h("1f343"),h("1f342"),h("1f341"),h("1f33e"),h("1f33a"),h("1f33b"),h("1f339"),h("1f33c"),h("1f337"),h("1f338"),h("1f344"),h("1f490"),h("1f330"),h("1f383"),h("1f41a"),p("1f30f"),h("1f315"),h("1f311"),h("1f313"),h("1f314"),h("1f31b"),h("1f319"),h("02b50"),h("1f31f"),p("1f4ab"),h("02728"),p("02600"),p("026c5"),h("02601"),h("026a1"),h("1f525"),h("1f4a5"),h("02744"),h("026c4"),h("1f4a8"),h("02614"),p("1f4a7"),p("1f4a6"),h("1f30a")],o.Activities=[h("026bd"),h("1f3c0"),h("1f3c8"),h("026be"),h("1f3be"),h("1f3b1"),h("026f3"),h("1f3bf"),h("1f3c2"),h("1f3a3"),h("1f3ca"),h("1f3c4"),h("1f3c6"),h("1f3bd"),h("1f3ab"),h("1f3ad"),h("1f3a8"),h("1f3aa"),h("1f3a4"),h("1f3a7"),h("1f3bc"),h("1f3b9"),h("1f3b7"),h("1f3ba"),h("1f3b8"),h("1f3bb"),h("1f3ac"),h("1f3ae"),h("1f47e"),h("1f3af"),h("1f3b2"),h("1f3b0"),h("1f3b3")],o.Food=[h("1f34f"),h("1f34e"),h("1f34a"),h("1f34c"),h("1f349"),h("1f347"),h("1f353"),h("1f348"),h("1f352"),h("1f351"),h("1f34d"),h("1f345"),h("1f346"),h("1f33d"),h("1f360"),h("1f35e"),h("1f357"),h("1f356"),h("1f364"),h("1f373"),h("1f354"),h("1f35f"),h("1f355"),h("1f35d"),h("1f35c"),h("1f372"),h("1f365"),h("1f363"),h("1f371"),h("1f35b"),h("1f359"),h("1f35a"),h("1f358"),h("1f362"),h("1f361"),p("1f367"),h("1f368"),h("1f366"),h("1f370"),h("1f36f"),h("1f382"),h("1f36e"),h("1f36c"),h("1f36d"),h("1f36b"),h("1f369"),h("1f36a"),h("1f37a"),h("1f37b"),h("1f377"),h("1f378"),h("1f379"),h("1f376"),h("1f375"),h("02615"),h("1f374")],o.Travel=[h("1f697"),h("1f695"),h("1f687"),p("1f699"),h("1f68c"),h("1f693"),h("1f69a"),p("1f691"),h("1f692"),h("1f6b2"),h("1f6a8"),h("1f683"),h("1f684"),p("1f685"),h("1f689"),h("02708"),h("026f5"),p("1f6a4"),h("1f680"),h("1f4ba"),h("02693"),h("1f6a7"),h("026fd"),h("1f68f"),h("1f6a5"),h("1f3c1"),h("1f6a2"),h("1f3a1"),h("1f3a2"),h("1f3a0"),h("1f301"),p("1f5fc"),h("1f3ed"),h("026f2"),p("1f391"),p("1f5fb"),p("1f30b"),p("1f5fe"),h("1f305"),h("1f304"),h("1f307"),h("1f306"),h("1f303"),h("1f309"),h("1f30c"),h("1f387"),h("1f386"),h("1f308"),h("1f3f0"),p("1f3ef"),h("1f5fd"),h("1f3e0"),h("1f3e1"),h("1f3e2"),h("1f3ec"),h("026fa"),p("1f3e3"),p("1f3e5"),h("1f3e6"),h("1f3e8"),h("1f3ea"),h("1f3eb"),p("1f3e9"),h("1f492"),h("026ea"),h("1f320")],o.Symbols=[s,h("1f49b"),h("1f49a"),h("1f499"),h("1f494"),h("1f49c"),h("1f495"),h("1f493"),h("1f49e"),h("1f497"),h("1f498"),h("1f496"),h("1f49d"),h("1f49f"),p("1f52f"),p("026ce"),h("02648"),h("02649"),h("0264a"),h("0264b"),h("0264c"),h("0264d"),h("0264e"),h("0264f"),h("02650"),h("02651"),h("02652"),h("02653"),p("1f194"),p("1f4f4"),p("1f4f3"),p("1f19a"),p("1f4ae"),p("1f18e"),p("1f191"),p("1f198"),p("026d4"),h("1f4db"),h("1f6ab"),p("0274c"),p("02b55"),p("1f4a2"),h("02668"),p("1f51e"),p("02757"),p("02755"),p("02753"),p("02754"),p("02049"),p("1f4af"),h("1f531"),p("0303d"),h("026a0"),p("1f530"),p("1f22f"),p("1f4b9"),h("02733"),p("0274e"),p("02705"),p("1f4a0"),h("1f300"),h("1f3e7"),h("0267f"),h("1f6ad"),p("1f6be"),h("02734"),h("1f17f"),h("1f6b9"),h("1f6ba"),p("1f6bc"),h("1f6bb"),h("1f3a6"),h("1f4f6"),p("1f201"),p("1f196"),p("0267b"),p("1f197"),p("1f192"),h("02747"),p("1f195"),p("1f193"),p("1f51f"),p("1f522"),p("023ea"),p("023e9"),p("1f53c"),p("1f53d"),p("023eb"),p("023ec"),p("1f199"),p("02139"),p("1f524"),p("1f521"),p("1f520"),p("1f523"),h("1f3b5"),h("1f3b6"),p("03030"),p("027bf"),p("02714"),h("1f503"),p("02795"),p("02796"),p("02797"),p("02716"),p("027b0"),p("1f4b2"),p("1f4b1"),p("1f51a"),p("1f519"),p("1f51b"),p("1f51d"),p("1f51c"),p("02611"),p("1f518"),p("026ab"),p("1f534"),p("1f535"),p("1f539"),p("1f538"),p("1f536"),p("1f537"),p("1f53a"),p("1f53b"),p("02b1b"),p("02b1c"),p("1f532"),p("1f533"),p("1f50a"),h("1f4e3"),p("1f4e2"),h("1f514"),p("1f004"),h("1f0cf"),p("1f3b4"),p("1f4ac"),h("1f550"),h("1f551"),h("1f552"),h("1f553"),h("1f554"),h("1f555"),h("1f556"),h("1f557"),h("1f558"),h("1f559"),h("1f55a"),h("1f55b"),p("1f236"),p("1f250"),p("1f239"),p("1f21a"),p("1f232"),p("1f251"),p("1f234"),p("1f233"),p("1f23a"),p("1f235")],o.Objects=[p("0231a"),h("1f4f1"),p("1f4f2"),h("1f4bb"),p("1f4bd"),h("1f4be"),h("1f4bf"),h("1f4c0"),h("1f4fc"),h("1f4f7"),h("1f4f9"),h("1f3a5"),h("1f4de"),p("0260e"),h("1f4df"),h("1f4e0"),h("1f4fa"),h("1f4fb"),p("023f0"),p("0231b"),p("023f3"),h("1f4e1"),h("1f50b"),h("1f50c"),h("1f4a1"),h("1f526"),p("1f4b8"),h("1f4b5"),h("1f4b4"),h("1f4b0"),h("1f4b3"),h("1f48e"),h("1f527"),h("1f528"),h("1f529"),p("1f52b"),h("1f4a3"),h("1f52a"),h("1f6ac"),h("1f52e"),h("1f488"),h("1f48a"),h("1f489"),h("1f516"),h("1f6bd"),h("1f6c0"),h("1f511"),h("1f6aa"),p("1f5ff"),h("1f388"),p("1f38f"),h("1f380"),h("1f381"),h("1f38a"),h("1f389"),p("1f38e"),h("1f390"),p("1f38c"),p("1f3ee"),h("02709"),h("1f4e9"),h("1f4e8"),h("1f48c"),h("1f4e7"),h("1f4ee"),h("1f4ea"),h("1f4eb"),h("1f4e6"),p("1f4e5"),p("1f4e4"),p("1f4dc"),p("1f4c3"),p("1f4d1"),h("1f4ca"),h("1f4c8"),h("1f4c9"),p("1f4c4"),h("1f4c5"),p("1f4c6"),p("1f4c7"),h("1f4cb"),h("1f4c1"),p("1f4c2"),h("1f4f0"),h("1f4d3"),p("1f4d5"),p("1f4d7"),p("1f4d8"),p("1f4d9"),p("1f4d4"),h("1f4d2"),h("1f4da"),p("1f4d6"),p("1f517"),h("1f4ce"),h("02702"),p("1f4d0"),h("1f4cf"),h("1f4cc"),h("1f4cd"),p("1f6a9"),h("1f510"),h("1f512"),h("1f513"),h("1f50f"),p("02712"),h("1f4dd"),h("0270f"),h("1f50d"),p("1f50e")],o);function d(e){for(var t=0,n=Object.keys(c);t<n.length;t++){var o=n[t];if(!e(c[o],o))break}}function f(e){var t,n=parseInt(e,16);if(isNaN(n))return null;n>=126976&&n<=128768?t=[Math.floor((n-65536)/1024)+55296,(n-65536)%1024+56320]:n>=35&&n<=16384&&(t=[n]);return String.fromCharCode.apply(String,t)}function h(e,t){return{key:e,description:"emjD"+e,keywords:"emjK"+e,shortcut:t,codePoint:f(e)}}function p(e){return{key:e,description:"emjD"+e,codePoint:f(e)}}t.default=c,t.EmojiFabricIconCharacterMap=((r={}).Activities="Soccer",r.Food="EatDrink",r.Nature="FangBody",r.Objects="Lightbulb",r.People="Emoji2",r.Symbols="Heart",r.Travel="Car",r),t.forEachEmojiFamily=d,t.forEachEmoji=function(e){d((function(t){for(var n=0,o=t;n<o.length;n++){var r=o[n];if(!e(r))return!1}return!0}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(15),i=function(){function e(e){this.element=e}return e.prototype.collapseToSingleElement=function(){return this.element},e.prototype.getStartNode=function(){return this.element},e.prototype.getEndNode=function(){return this.element},e.prototype.equals=function(e){return this.element==e.getStartNode()},e.prototype.isAfter=function(e){return r.default(this.element,e.getEndNode())},e.prototype.contains=function(e){return o.default(this.element,e,!0)},e.prototype.getTextContent=function(){return this.element.textContent},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(16);function i(e,t,n,i,a){for(;t.parentNode!=e&&!o.default(t.parentNode,n);){if(i&&t.previousSibling||!i&&t.nextSibling){if(!a)break;r.default(t,i)}t=t.parentNode}return t}t.default=function(e,t,n,r){if(!o.default(e,t)||!o.default(e,n))return[];if(t=i(e,t,n,!0,r),n=i(e,n,t,!1,r),o.default(t,n,!0))return[t];if(o.default(n,t))return[n];if(t.parentNode==n.parentNode){var a=[].slice.call(t.parentNode.childNodes),s=a.indexOf(t),l=a.indexOf(n);return a.slice(s,l+1)}return[t,n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r="ADDRESS,ARTICLE,ASIDE,BLOCKQUOTE,CANVAS,DD,DIV,DL,DT,FIELDSET,FIGCAPTION,FIGURE,FOOTER,FORM,H1,H2,H3,H4,H5,H6,HEADER,HR,LI,MAIN,NAV,NOSCRIPT,OL,OUTPUT,P,PRE,SECTION,TABLE,TD,TH,TFOOT,UL,VIDEO".split(","),i=["block","list-item","table-cell"];t.default=function(e){var t=o.default(e);return!(!t||!(i.indexOf(e.style.display)>=0||r.indexOf(t)>=0))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r="AREA,BASE,BR,COL,COMMAND,EMBED,HR,IMG,INPUT,KEYGEN,LINK,META,PARAM,SOURCE,TRACK,WBR".split(",");t.default=function(e){return!!e&&r.indexOf(o.default(e))>=0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(118),r=n(52),i=n(8),a=n(13),s=n(22),l=n(119),u=n(120),c=n(34),d=n(14),f=function(){function e(e){this.scoper=e}return e.createBodyTraverser=function(t,n){return new e(new o.default(t,n))},e.createSelectionTraverser=function(t,n){return new e(new u.default(t,n))},e.createBlockTraverser=function(t,n,o){return void 0===o&&(o=3),new e(new l.default(t,n,o))},Object.defineProperty(e.prototype,"currentBlockElement",{get:function(){return this.currentBlock||(this.currentBlock=this.scoper.getStartBlockElement()),this.currentBlock},enumerable:!0,configurable:!0}),e.prototype.getNextBlockElement=function(){return this.getPreviousNextBlockElement(!0)},e.prototype.getPreviousBlockElement=function(){return this.getPreviousNextBlockElement(!1)},e.prototype.getPreviousNextBlockElement=function(e){var t=this.currentBlockElement,n=d.getLeafSibling(this.scoper.rootNode,e?t.getEndNode():t.getStartNode(),e),o=n?i.default(this.scoper.rootNode,n):null;return o&&this.scoper.isBlockInScope(o)&&(e&&o.isAfter(t)||!e&&t.isAfter(o))?(this.currentBlock=o,this.currentBlock):null},Object.defineProperty(e.prototype,"currentInlineElement",{get:function(){return this.currentInline||(this.currentInline=this.scoper.getStartInlineElement()),this.currentInline instanceof r.default?null:this.currentInline},enumerable:!0,configurable:!0}),e.prototype.getNextInlineElement=function(){return this.getPreviousNextInlineElement(!0)},e.prototype.getPreviousInlineElement=function(){return this.getPreviousNextInlineElement(!1)},e.prototype.getPreviousNextInlineElement=function(e){var t,n=this.currentInlineElement||this.currentInline;return n instanceof r.default?(t=c.getInlineElementBeforeAfter(this.scoper.rootNode,n.getStartPosition(),e))&&!n.getParentBlock().contains(t.getContainerNode())&&(t=null):t=(t=function(e,t,n){if(!t)return null;if(t instanceof s.default){var o=n?t.nextInlineElement:t.previousInlineElement;if(o)return o}var r=t.getContainerNode();return r=d.getLeafSibling(e,r,n),a.default(e,r)}(this.scoper.rootNode,n,e))&&n&&(e&&t.isAfter(n)||!e&&n.isAfter(t))?t:null,t&&(t=this.scoper.trimInlineElement(t))?(this.currentInline=t,this.currentInline):null},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=n(7),i=n(32),a=n(18),s=n(14),l=n(16),u="SPAN,B,I,U,EM,STRONG,STRIKE,S,SMALL".split(",");function c(e,t){e&&1==e.nodeType&&t(e,!0)}t.default=function(e,t,n,d){void 0===n&&(n=new r.default(e,0).normalize()),void 0===d&&(d=new r.default(e,-1).normalize());for(var f=[];n&&d&&d.isAfter(n);){var h=n.node,p=o.default(h.parentNode),m=s.getNextLeafSibling(e,h);3==h.nodeType&&["TR","TABLE"].indexOf(p)<0&&(h!=d.node||d.isAtEnd||(h=i.default(h,d.offset,!0)),n.offset>0&&(h=i.default(h,n.offset,!1)),f.push(h)),n=m&&new r.default(m,0)}if(f.length>0){if(f.every((function(e){return e.parentNode==f[0].parentNode}))){var g=f.shift();f.forEach((function(e){g.nodeValue+=e.nodeValue,e.parentNode.removeChild(e)})),f=[g]}f.forEach((function(e){for(;"SPAN"!=o.default(e)&&u.indexOf(o.default(e.parentNode))>=0;)c(e,t),e=l.splitBalancedNodeRange(e);"SPAN"!=o.default(e)&&(c(e,t),e=a.default(e,"SPAN")),t(e)}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o=e.nodeValue.substr(0,t),r=e.nodeValue.substr(t),i=e.ownerDocument.createTextNode(n?o:r);return e.nodeValue=n?r:o,e.parentNode.insertBefore(i,n?e:e.nextSibling),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=/^[\r\n]+$/gm;t.default=function(e){return 3==e.nodeType?!e.nodeValue||""==e.textContent||r.test(e.nodeValue):1!=e.nodeType||"none"==o.getComputedStyle(e,"display")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),r=n(22),i=n(33),a=n(14);function s(e,t,n){if(!e||!t||!t.node)return null;var s=(t=t.normalize()).node,l=t.offset,u=t.isAtEnd,c=!1;!n&&0==l&&!u||n&&u?s=a.getLeafSibling(e,s,n):3==s.nodeType&&(!n&&!u||n&&l>0)&&(c=!0),s&&i.default(s)&&(s=a.getLeafSibling(e,s,n));var d=o.default(e,s);return d&&(c||d.contains(t))&&(d=n?new r.default(d,t,null):new r.default(d,null,t)),d}t.getInlineElementBefore=function(e,t){return s(e,t,!1)},t.getInlineElementAfter=function(e,t){return s(e,t,!0)},t.getInlineElementBeforeAfter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=["IMG"],i=["TABLE","IMG","LI"].join(","),a=/\u200b/g;function s(e,t){return e=e.replace(a,""),t?e.trim():e}t.default=function(e,t){if(!e)return!1;if(3==e.nodeType)return""==s(e.nodeValue,t);if(1==e.nodeType){var n=e;if(""!=s(n.textContent,t)||r.indexOf(o.default(n))>=0||n.querySelectorAll(i)[0])return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.currentIndex+t;return n>=0&&n<e.snapshots.length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o=e&&e.eventDataCache&&e.eventDataCache.hasOwnProperty(t)?e.eventDataCache[t]:n();return e&&(e.eventDataCache=e.eventDataCache||{},e.eventDataCache[t]=o),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r="ROOSTERJS_TEMP_NODE_FOR_LIST",i='<img class="'+r+'">';t.default=function(e,t){var n,a;if(o.Browser.isChrome&&"outdent"==t){var s=e.getElementAtCursor("LI");if(s){var l=e.getSelectionRange();(l.collapsed||e.getElementAtCursor("LI",l.startContainer)==s&&e.getElementAtCursor("LI",l.endContainer)==s)&&(a=o.getSelectionPath(s,l),n=s.cloneNode(!0))}!function(e){var t=e.getSelectionTraverser(),n=t&&t.currentBlockElement;for(;n;){var r=n.getStartNode();if(r){var a=o.fromHtml(i,e.getDocument())[0];o.isVoidHtmlElement(r)||!o.isBlockElement(r)?r.parentNode.insertBefore(a,r):r.insertBefore(a,r.firstChild)}n=t.getNextBlockElement()}}(e)}var u,c=e.getElementAtCursor("OL,UL");e.getDocument().execCommand(t,!1,null),e.queryElements("."+r,(function(t){u=t.parentNode,e.deleteNode(t)}));var d=e.getElementAtCursor("OL,UL");if(d==c&&(d=null),d&&n&&u&&n instanceof HTMLElement&&(u instanceof HTMLElement&&n.tagName==u.tagName&&d.replaceChild(n,u),a&&document.body.contains(n))){var f=o.getRangeFromSelectionPath(n,a);e.select(f)}return d}},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(89),i=n(205),a=n(88);t.PlaceholderDataAttribute="data-paste-image-placeholder-804b751e",t.hasPlaceholder=function(e){return e.indexOf(t.PlaceholderDataAttribute)>-1};var s=function(){function e(e){var t=this;this.idToUrlImageCache={},this.defaultCreateImagePlaceholder=function(e,n){if(e.isDisposed())return null;var o=e.getDocument().createElement("img");return o.src=r.Base64Svgs.RoosterJsReactSpinner,o.className=a.css(i.roosterjsReactSpinner,t.options.placeholderImageClassName),o},this.options=o({},e),this.options.createImagePlaceholder=this.options.createImagePlaceholder||this.defaultCreateImagePlaceholder,this.placeholderImageClasses=this.options.placeholderImageClassName?this.options.placeholderImageClassName.split(" "):void 0}return e.prototype.upload=function(n,o,r){var i=this;if(!o||0===o.size)return null;var a=this.options.createImagePlaceholder(n,o);if(null===a)return null;var s="";s=r?this.options.fallbackAltValue:o.name||this.options.fallbackAltValue;var l=(e.Id++).toString(10);return a.setAttribute(t.PlaceholderDataAttribute,l),this.options.uploadImage(o).then((function(e){i.idToUrlImageCache[l]=e,!n.isDisposed()&&n.contains(a)&&(i.replacePlaceholder(a,e,n,s||"Image"),i.triggerChangeEvent(n))}),(function(){!n.isDisposed()&&n.contains(a)&&(i.idToUrlImageCache[l]=null,i.removePlaceholder(a,n),i.triggerChangeEvent(n))})),a},e.prototype.updatePlaceholders=function(e){var n=document.createElement("div");n.innerHTML=e;for(var o=n.querySelectorAll("["+t.PlaceholderDataAttribute+"]"),r=!0,i=0;i<o.length;++i){var a=o[i],s=a.getAttribute(t.PlaceholderDataAttribute),l=this.idToUrlImageCache[s];void 0!==l?null===l?this.removePlaceholder(a):this.replacePlaceholder(a,l):r=!1}return{html:n.innerHTML,resolvedAll:r}},e.prototype.triggerChangeEvent=function(e){e.triggerContentChangedEvent("ImageManager")},e.prototype.removePlaceholder=function(e,t){if(t)t.deleteNode(e),t.addUndoSnapshot();else{var n=e.parentNode;n&&n.removeChild(e)}},e.prototype.replacePlaceholder=function(e,n,o,r){var a,s;if("IMG"===e.tagName)(s=e).src=n,(a=s.classList).remove.apply(a,[i.roosterjsReactSpinner].concat(this.placeholderImageClasses)),e.removeAttribute(t.PlaceholderDataAttribute),0===s.classList.length&&e.removeAttribute("class");else{var l=o?o.getDocument():document;(s=l.createElement("img")).src=n,o?(o.replaceNode(e,s),o.addUndoSnapshot()):l.replaceChild(s,e)}s.setAttribute("alt",r)},e.Id=0,e}();t.default=s},function(e,t){e.exports=o},function(e,t){e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign?function(e,t){return Object.assign(t||{},e)}:function(e,t){var n=t||{};if(e)for(var o=0,r=Object.keys(e);o<r.length;o++){var i=r[o];n[i]=e[i]}return n};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="border-spacing,caption-side,color,cursor,direction,empty-cells,font-family,font-size,font-style,font-variant,font-weight,font,letter-spacing,line-height,list-style-image,list-style-position,list-style-type,list-style,orphans,quotes,text-align,text-indent,text-transform,visibility,white-space,widows,word-spacing".split(",");t.default=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView,n=t&&t.getComputedStyle(e),r={};return o.forEach((function(e){return r[e]=n&&n.getPropertyValue(e)||""})),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="\x3c!--StartFragment--\x3e",r="\x3c!--EndFragment--\x3e";function i(e,t){var n=a(t)[0];e.body.innerHTML=n}function a(e){var t=e.indexOf(o),n=e.lastIndexOf(r);if(t>=0&&n>=0&&n>=t+o.length){var i=e.substr(0,t),a=e.substr(n+r.length);return[e=e.substring(t+o.length,n),i,a]}return[e,null,null]}t.default=function(e,t,n){var o=(new DOMParser).parseFromString(e||"","text/html");return o&&o.body&&o.body.firstChild?(t&&(n||i)(o,e),o):null},t.splitWithFragment=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(27),r=n(4),i=n(5),a=n(28),s=n(15),l=n(18),u=n(16),c=n(10),d=["TD","TH","LI","BLOCKQUOTE"],f=function(){function e(e,t,n){this.rootNode=e,this.startNode=t,this.endNode=n}return e.getBlockContext=function(e){for(;e&&!a.default(e);)e=e.parentNode;return e},e.prototype.collapseToSingleElement=function(){for(var t=o.default(e.getBlockContext(this.startNode),this.startNode,this.endNode,!0),n=e.getBlockContext(this.startNode);t[0]&&t[0]!=n&&t[0].parentNode!=this.rootNode&&d.indexOf(i.default(t[0].parentNode))<0;)t=[u.splitBalancedNodeRange(t)];return 1==t.length&&a.default(t[0])?t[0]:l.default(t)},e.prototype.getStartNode=function(){return this.startNode},e.prototype.getEndNode=function(){return this.endNode},e.prototype.equals=function(e){return this.startNode==e.getStartNode()&&this.endNode==e.getEndNode()},e.prototype.isAfter=function(e){return s.default(this.getStartNode(),e.getEndNode())},e.prototype.contains=function(e){return r.default(this.startNode,e,!0)||r.default(this.endNode,e,!0)||s.default(e,this.startNode)&&s.default(this.endNode,e)},e.prototype.getTextContent=function(){return c.default(this.getStartNode(),this.getEndNode()).toString()},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.createElement("DIV");return n.innerHTML=e,[].slice.call(n.childNodes)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);function r(e,t){var n=e;do{n=n&&(t?n.firstChild:n.lastChild)}while(n&&n.firstChild);return n&&o.default(e,n)}t.default=r,t.getFirstBlockElement=function(e){return r(e,!0)},t.getLastBlockElement=function(e){return r(e,!1)}},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t}(n(20).default);t.default=i},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t}(n(20).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),r=n(51);t.getFirstInlineElement=function(e){var t=r.getFirstLeafNode(e);return t?o.default(e,t):null},t.getLastInlineElement=function(e){var t=r.getLastLeafNode(e);return t?o.default(e,t):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(33),r=n(14);function i(e,t){for(var n=function(e){return t?e.firstChild:e.lastChild},i=n(e);i&&n(i);)i=n(i);return i&&o.default(i)&&(i=r.getLeafSibling(e,i,t)),i}t.getFirstLeafNode=function(e){return i(e,!0)},t.getLastLeafNode=function(e){return i(e,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.position=e,this.parentBlock=t}return e.prototype.getTextContent=function(){return""},e.prototype.getContainerNode=function(){return this.position.node},e.prototype.getParentBlock=function(){return this.parentBlock},e.prototype.getStartPosition=function(){return this.position},e.prototype.getEndPosition=function(){return this.position},e.prototype.isAfter=function(e){return e&&this.position.isAfter(e.getEndPosition())},e.prototype.isTextualInlineElement=function(){return!1},e.prototype.contains=function(e){return!1},e.prototype.applyStyle=function(e){},e}();t.default=o},function(e,t,n){"use strict";function o(e,t){var n=-1!=e.indexOf("rv:")&&-1!=e.indexOf("Trident"),o=-1!=e.indexOf("MSIE")||n,r=!1,i=!1,a=!1,s=!1,l=-1!=e.indexOf("WebKit");return o||(r=-1!=e.indexOf("Chrome"),i=-1!=e.indexOf("Firefox"),-1!=e.indexOf("Safari")&&(a=-1==e.indexOf("Chrome")&&-1==e.indexOf("Android")),(s=-1!=e.indexOf("Edge"))&&(l=r=i=!1)),{isMac:-1!=t.indexOf("Mac"),isWin:-1!=t.indexOf("Win")||-1!=t.indexOf("NT"),isWebKit:l,isIE:o,isIE11OrGreater:n,isSafari:a,isChrome:r,isFirefox:i,isEdge:s,isIEOrEdge:o||s}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserInfo=o,t.Browser=window?o(window.navigator.userAgent,window.navigator.appVersion):{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=n(5);t.default=function(e,t){var n;if(!e||!t)return null;for(var i=e.ownerDocument.createElement(t),a=0;a<e.attributes.length;a++){var s=e.attributes[a];i.setAttribute(s.name,s.value)}for(;e.firstChild;)i.appendChild(e.firstChild);return"P"!=r.default(e)&&"P"!=r.default(i)||(n=o.default(e,["margin-top","margin-bottom"]),i.style.marginTop=n[0],i.style.marginBottom=n[1]),e.parentNode&&e.parentNode.replaceChild(i,e),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(5),i=n(35);function a(e){for(;e.previousSibling;)if(e=e.previousSibling,"BR"==r.default(e)||!i.default(e))return!1;return!0}t.default=function(e,t){if(e){var n=e.normalize(),r=n.node;if(0==n.offset){for(;o.default(t,r)&&a(r);)r=r.parentNode;return r==t}}return!1}},function(e,t,n){"use strict";function o(e,t){return t.some((function(t){return 0==t?0==e:(e&t)==t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){if(void 0===r&&(r=0),!e||!t)return[];var a=[].slice.call(e.querySelectorAll(t));return 0!=r&&i&&(a=a.filter((function(e){return function(e,t,n){var r=e.compareDocumentPosition(t.startContainer),i=e.compareDocumentPosition(t.endContainer),a=[0,8];n||a.push(16);return o(r,a)||o(i,a)||o(r,[2])&&o(i,[4])&&!o(i,[16])}(e,i,2==r)}))),n&&a.forEach(n),a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e?e.parentNode:null;if(!t)return null;for(;e.firstChild;)t.insertBefore(e.firstChild,e);return t.removeChild(e),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;if(this.trs=[],this.table=e instanceof HTMLTableElement?e:function(e){for(var t=e;t&&"TABLE"!=t.tagName;t=t.parentElement);return t}(e),this.table){var n=e instanceof HTMLTableElement?null:e,o=[].slice.call(this.table.rows);this.cells=o.map((function(e){return[]})),o.forEach((function(e,o){t.trs[o%2]=e;for(var r=0,i=0;r<e.cells.length;r++){for(;t.cells[o][i];i++);var a=e.cells[r];a==n&&(t.col=i,t.row=o);for(var s=0;s<a.colSpan;s++,i++)for(var l=0;l<a.rowSpan;l++)t.cells[o+l][i]={td:s+l==0?a:null,spanLeft:s>0,spanAbove:l>0}}}))}}return e.prototype.writeBack=function(){var e=this;this.cells?(s(this.table),this.cells.forEach((function(t,n){var o=a(e.trs[n%2]||e.trs[0]);e.table.appendChild(o),t.forEach((function(t,r){t.td&&(e.recalcSpans(n,r),o.appendChild(t.td))}))}))):this.table&&this.table.parentNode.removeChild(this.table)},e.prototype.applyFormat=function(e){e&&this.table&&(this.table.style.borderCollapse="collapse",this.trs[0].style.backgroundColor=e.bgColorOdd||"transparent",this.trs[1]&&(this.trs[1].style.backgroundColor=e.bgColorEven||"transparent"),this.cells.forEach((function(t){return t.filter((function(e){return e.td})).forEach((function(t){t.td.style.borderTop=r(e.topBorderColor),t.td.style.borderBottom=r(e.bottomBorderColor),t.td.style.borderLeft=r(e.verticalBorderColor),t.td.style.borderRight=r(e.verticalBorderColor)}))})))},e.prototype.edit=function(e){var t=this;if(this.table){var n=this.cells[this.row],o=n[this.col];switch(e){case 0:this.cells.splice(this.row,0,n.map(i));break;case 1:var r=this.row+this.countSpanAbove(this.row,this.col);this.cells.splice(r,0,this.cells[r-1].map((function(e,n){var o=t.getCell(r,n);if(o.spanAbove)return i(o);if(e.spanLeft){var s=i(e);return s.spanAbove=!1,s}return{td:a(t.getTd(t.row,n))}})));break;case 2:this.forEachCellOfCurrentColumn((function(e,n){n.splice(t.col,0,i(e))}));break;case 3:var l=this.col+this.countSpanLeft(this.row,this.col);this.forEachCellOfColumn(l-1,(function(e,n,o){var r,s=t.getCell(o,l);s.spanLeft?r=i(s):e.spanAbove?(r=i(e)).spanLeft=!1:r={td:a(t.getTd(o,t.col))},n.splice(l,0,r)}));break;case 6:this.forEachCellOfCurrentRow((function(e,n){var o=t.getCell(t.row+1,n);e.td&&e.td.rowSpan>1&&o.spanAbove&&(o.td=e.td)})),this.cells.splice(this.row,1);break;case 5:this.forEachCellOfCurrentColumn((function(e,n,o){var r=t.getCell(o,t.col+1);e.td&&e.td.colSpan>1&&r.spanLeft&&(r.td=e.td),n.splice(t.col,1)}));break;case 7:case 8:for(var u=7==e?-1:1,c=this.row+u;c>=0&&c<this.cells.length;c+=u){if((m=this.getCell(c,this.col)).td&&!m.spanAbove){var d=c<this.row?m:o,f=c<this.row?o:m;d.td.colSpan==f.td.colSpan&&(s(f.td,d.td),f.td=null,f.spanAbove=!0);break}}break;case 9:case 10:for(var h=9==e?-1:1,p=this.col+h;p>=0&&p<this.cells[this.row].length;p+=h){var m;if((m=this.getCell(this.row,p)).td&&!m.spanLeft){var g=p<this.col?m:o,v=p<this.col?o:m;g.td.rowSpan==v.td.rowSpan&&(s(v.td,g.td),v.td=null,v.spanLeft=!0);break}}break;case 4:this.cells=null;break;case 12:if(o.td.rowSpan>1)this.getCell(this.row+1,this.col).td=a(o.td);else{var y=n.map((function(e){return{td:e==o?a(e.td):null,spanAbove:e!=o,spanLeft:e.spanLeft}}));this.cells.splice(this.row+1,0,y)}break;case 11:o.td.colSpan>1?this.getCell(this.row,this.col+1).td=a(o.td):this.forEachCellOfCurrentColumn((function(e,o){o.splice(t.col+1,0,{td:o==n?a(e.td):null,spanAbove:e.spanAbove,spanLeft:o!=n})}))}}},e.prototype.forEachCellOfCurrentColumn=function(e){this.forEachCellOfColumn(this.col,e)},e.prototype.forEachCellOfCurrentRow=function(e){this.forEachCellOfRow(this.row,e)},e.prototype.getCell=function(e,t){return this.cells&&this.cells[e]&&this.cells[e][t]||{}},e.prototype.getCurrentTd=function(){return this.getTd(this.row,this.col)},e.prototype.getTd=function(e,t){if(this.cells)for(e=Math.min(this.cells.length-1,e),t=Math.min(this.cells[e].length-1,t);e>=0&&t>=0;){var n=this.getCell(e,t);if(n.td)return n.td;if(n.spanLeft)t--;else{if(!n.spanAbove)break;e--}}return null},e.prototype.forEachCellOfColumn=function(e,t){for(var n=0;n<this.cells.length;n++)t(this.getCell(n,e),this.cells[n],n)},e.prototype.forEachCellOfRow=function(e,t){for(var n=0;n<this.cells[e].length;n++)t(this.getCell(e,n),n)},e.prototype.recalcSpans=function(e,t){var n=this.getCell(e,t).td;n&&(n.colSpan=this.countSpanLeft(e,t),n.rowSpan=this.countSpanAbove(e,t),1==n.colSpan&&n.removeAttribute("colSpan"),1==n.rowSpan&&n.removeAttribute("rowSpan"))},e.prototype.countSpanLeft=function(e,t){for(var n=1,o=t+1;o<this.cells[e].length;o++){var r=this.getCell(e,o);if(r.td||!r.spanLeft)break;n++}return n},e.prototype.countSpanAbove=function(e,t){for(var n=1,o=e+1;o<this.cells.length;o++){var r=this.getCell(o,t);if(r.td||!r.spanAbove)break;n++}return n},e}();function r(e){return"solid 1px "+(e||"transparent")}function i(e){return{td:a(e.td),spanAbove:e.spanAbove,spanLeft:e.spanLeft}}function a(e){var t=e?e.cloneNode(!1):null;return t&&t instanceof HTMLTableCellElement&&(t.removeAttribute("id"),t.firstChild||t.appendChild(e.ownerDocument.createElement("br"))),t}function s(e,t){for(;e.firstChild;)t?t.appendChild(e.firstChild):e.removeChild(e.firstChild)}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(7);function i(e,t){if(!e||!t)return[];var n,r=e.node,i=e.offset,a=[];if(!o.default(t,r,!0))return[];if(3==r.nodeType){for(n=r.parentNode;r.previousSibling&&3==r.previousSibling.nodeType;)i+=r.previousSibling.nodeValue.length,r=r.previousSibling;a.unshift(i)}else n=r,r=r.childNodes[i];do{i=0;for(var s=!1,l=n.firstChild;l&&l!=r;l=l.nextSibling){if(3==l.nodeType){if(0==l.nodeValue.length||s)continue;s=!0}else s=!1;i++}a.unshift(i),r=n,n=n.parentNode}while(r&&r!=t);return a}t.default=function(e,t){return t?{start:i(r.default.getStart(t),e),end:i(r.default.getEnd(t),e)}:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(36);t.default=function(e){if(o.default(e,1)){for(var t=0,n=e.currentIndex+1;n<e.snapshots.length;n++)t+=e.snapshots[n].length;e.snapshots.splice(e.currentIndex+1),e.totalSize-=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(62),r=function(){function e(){var e=this;this.onExtract=function(t){return function(n){if(e.editor&&e.editor.isDarkMode()){var r=e.editor.getSelectionRange();if(r&&!r.collapsed){var i=n,a=e.editor.getSelectionRange().cloneContents(),s=o.default(a),l=e.editor.getDocument().createElement("div");l.setAttribute("contenteditable","true"),l.innerHTML=s,i.clipboardData.setData("text/html",s),i.clipboardData.setData("text/plain",l.innerText),t&&e.editor.getSelectionRange().deleteContents(),n.preventDefault()}}}}}return e.prototype.getName=function(){return"Copy"},e.prototype.initialize=function(e){this.editor=e,this.eventDisposer=e.addDomEventHandler({copy:this.onExtract(!1),cut:this.onExtract(!0)})},e.prototype.dispose=function(){this.eventDisposer(),this.eventDisposer=null,this.editor=null},e}();t.default=r},function(e,t,n){"use strict";function o(e){return e&&"undefined"!=e&&"null"!=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.createElement("div");t.setAttribute("contenteditable","true"),e instanceof DocumentFragment?t.appendChild(e):t.innerHTML=e;var n=t.getElementsByTagName("*");return[].forEach.call(n,(function(e){e.dataset&&(e.style.color=o(e.dataset.ogsc)?e.dataset.ogsc:"",e.style.backgroundColor=o(e.dataset.ogsb)?e.dataset.ogsb:"",o(e.dataset.ogac)?e.setAttribute("color",e.dataset.ogac):e.removeAttribute("color"),o(e.dataset.ogab)?e.setAttribute("bgcolor",e.dataset.ogab):e.removeAttribute("bgcolor"),e.dataset.ogsc&&delete e.dataset.ogsc,e.dataset.ogsb&&delete e.dataset.ogsb,e.dataset.ogac&&delete e.dataset.ogac,e.dataset.ogab&&delete e.dataset.ogab)})),t.innerHTML}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(e){var t=this;this.disableRestoreSelectionOnFocus=e,this.inIme=!1,this.onNativeEvent=function(e){t.editor.runAsync((function(){t.editor.addUndoSnapshot((function(){}),"cut"==e.type?"Cut":"Drop")}))},this.onFocus=function(){if(t.disableRestoreSelectionOnFocus){if(t.cachedPosition&&t.cachedFormatState){var e=t.editor.getSelectionRange();e.collapsed&&o.Position.getStart(e).normalize().equalTo(t.cachedPosition)?t.restorePendingFormatState():t.clear()}}else t.editor.restoreSavedRange()},this.onBlur=function(){t.editor.saveSelectionRange()},this.onScroll=function(e){t.editor.triggerPluginEvent(14,{rawEvent:e,scrollContainer:t.editor.getScrollContainer()})}}return e.prototype.getName=function(){return"DOMEvent"},e.prototype.initialize=function(e){var t,n=this;this.editor=e,this.disposer=e.addDomEventHandler(((t={compositionstart:function(){return n.inIme=!0},compositionend:function(t){n.inIme=!1,e.triggerPluginEvent(3,{rawEvent:t})},drop:this.onNativeEvent,cut:this.onNativeEvent,focus:this.onFocus})[o.Browser.isIEOrEdge?"beforedeactivate":"blur"]=this.onBlur,t)),this.editor.getScrollContainer().addEventListener("scroll",this.onScroll)},e.prototype.dispose=function(){this.editor.getScrollContainer().removeEventListener("scroll",this.onScroll),this.disposer(),this.disposer=null,this.editor=null,this.clear()},e.prototype.onPluginEvent=function(e){switch(e.eventType){case 12:this.cachedPosition=this.getCurrentPosition(),this.cachedFormatState=e.formatState;break;case 0:case 4:case 6:this.cachedPosition&&!this.cachedPosition.equalTo(this.getCurrentPosition())&&this.clear()}},e.prototype.restorePendingFormatState=function(){var e=this;if(this.cachedFormatState){var t=o.getPendableFormatState(this.editor.getDocument());Object.keys(o.PendableFormatCommandMap).forEach((function(n){e.cachedFormatState[n]!=t[n]&&e.editor.getDocument().execCommand(o.PendableFormatCommandMap[n],!1,null)})),this.cachedPosition=this.getCurrentPosition()}},e.prototype.isInIME=function(){return this.inIme},e.prototype.clear=function(){this.cachedPosition=null,this.cachedFormatState=null},e.prototype.getCurrentPosition=function(){var e=this.editor.getSelectionRange();return e&&o.Position.getStart(e).normalize()},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=function(){function e(){this.featureMap={},this.autoCompleteSnapshot=null,this.autoCompleteChangeSource=null}return e.prototype.getName=function(){return"Edit"},e.prototype.initialize=function(e){var t=this;this.editor=e,this.addFeature({keys:[8],shouldHandleEvent:function(){return null!==t.autoCompleteSnapshot},handleEvent:function(e,n){e.rawEvent.preventDefault(),n.setContent(t.autoCompleteSnapshot,!1)}})},e.prototype.dispose=function(){this.editor=null},e.prototype.onPluginEvent=function(e){var t=!1,n=this.findFeature(e);switch(e.eventType){case 6:t=this.autoCompleteChangeSource!=e.source;break;case 4:case 0:t=!0}n&&n.handleEvent(e,this.editor),t&&(this.autoCompleteSnapshot=null,this.autoCompleteChangeSource=null)},e.prototype.addFeature=function(e){var t=this;e.keys.forEach((function(n){var o=t.featureMap[n]||[];o.push(e),t.featureMap[n]=o}))},e.prototype.performAutoComplete=function(e,t){var n=this;this.editor.addUndoSnapshot((function(o,r,i){var a=e();return n.autoCompleteSnapshot=i,n.autoCompleteChangeSource=t,a}),t)},e.prototype.findFeature=function(e){var t,n=this,r=!1,i=!1;if(0==e.eventType){var a=e.rawEvent;i=o.isCtrlOrMetaPressed(a),r=i||a.altKey,t=this.featureMap[a.which]}else 6==e.eventType&&(t=this.featureMap[2048]);return t&&t.filter((function(t){return(t.allowFunctionKeys||!r)&&t.shouldHandleEvent(e,n.editor,i)}))[0]},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(66),r=n(0),i=function(){function e(){}return e.prototype.getName=function(){return"FirefoxTypeAfterLink"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor=null},e.prototype.onPluginEvent=function(e){if(1==e.eventType){var t=this.editor.getSelectionRange();if(t&&t.collapsed&&this.editor.getElementAtCursor("A[href]")){var n=o.cacheGetContentSearcher(e,this.editor).getInlineElementBefore();n instanceof r.LinkInlineElement&&this.editor.select(new r.Position(n.getContainerNode(),-3))}}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(37),r=n(67),i="CONTENTSEARCHER";t.cacheGetContentSearcher=function(e,t){return o.default(e,i,(function(){return t.getContentSearcherOfCursor()}))},t.clearContentSearcherCache=function(e){r.default(e,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e&&e.eventDataCache&&e.eventDataCache.hasOwnProperty(t)&&delete e.eventDataCache[t]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){var e=this;this.onMouseUp=function(t){e.editor&&(e.removeMouseUpEventListener(),e.editor.triggerPluginEvent(5,{rawEvent:t}))}}return e.prototype.getName=function(){return"MouseUp"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.removeMouseUpEventListener(),this.editor=null},e.prototype.onPluginEvent=function(e){4!=e.eventType||this.mouseUpEventListerAdded||(this.editor.getDocument().addEventListener("mouseup",this.onMouseUp,!0),this.mouseUpEventListerAdded=!0)},e.prototype.removeMouseUpEventListener=function(){this.mouseUpEventListerAdded&&(this.mouseUpEventListerAdded=!1,this.editor.getDocument().removeEventListener("mouseup",this.onMouseUp,!0))},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(){}return e.prototype.getName=function(){return"TypeInContainer"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor=null},e.prototype.onPluginEvent=function(e){1==e.eventType&&this.onKeyPress(e)},e.prototype.ensureTypeInElement=function(e,t){var n,r=e.normalize(),i=this.editor.getBlockElementAtNode(r.node);if(i){n=i.collapseToSingleElement();var a=o.isNodeEmpty(n)||t&&this.wasNodeJustCreatedByKeyboardEvent(t,n);n=n&&a?n:null}else n=o.fromHtml(o.Browser.isEdge?"<div><span><br></span></div>":"<div><br></div>",this.editor.getDocument())[0],this.editor.insertNode(n,{position:1,updateCursor:!1,replaceSelection:!1,insertOnNewLine:!1}),r=new o.Position(n.firstChild,0);return n&&o.applyFormat(n,this.editor.getDefaultFormat(),this.editor.isDarkMode()),r},e.prototype.onKeyPress=function(e){var t=this,n=this.editor.getSelectionRange();n&&!this.editor.contains(o.findClosestElementAncestor(n.startContainer))&&(n.collapsed?this.tryNormalizeTyping(e,n):n.collapsed||this.editor.runAsync((function(){t.tryNormalizeTyping(e)})))},e.prototype.tryNormalizeTyping=function(e,t){var n=this.ensureTypeInElement(o.Position.getStart(t||this.editor.getSelectionRange()),e);this.editor.select(n)},e.prototype.wasNodeJustCreatedByKeyboardEvent=function(e,t){return e.rawEvent.target instanceof Node&&e.rawEvent.target.contains(t)&&e.rawEvent.key===t.innerText},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(139),r=n(1),i=function(){function e(e,t){void 0===t&&(t=1e7),this.preserveSnapshots=e,this.maxBufferSize=t}return e.prototype.getName=function(){return"Undo"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor=null,this.preserveSnapshots||this.clear()},e.prototype.onPluginEvent=function(e){if(!this.editor.isInIME())switch(e.eventType){case 9:this.preserveSnapshots&&(this.canUndo()||this.canRedo())||this.addUndoSnapshot();break;case 0:this.onKeyDown(e.rawEvent);break;case 1:this.onKeyPress(e.rawEvent);break;case 3:this.clearRedoForInput(),this.addUndoSnapshot();break;case 6:this.isRestoring||this.clearRedoForInput()}},e.prototype.clear=function(){this.undoSnapshots=null,this.hasNewContent=!1},e.prototype.undo=function(){this.hasNewContent&&this.addUndoSnapshot(),this.restoreSnapshot(-1)},e.prototype.redo=function(){this.restoreSnapshot(1)},e.prototype.canUndo=function(){return this.hasNewContent||this.getSnapshotsManager().canMove(-1)},e.prototype.canRedo=function(){return this.getSnapshotsManager().canMove(1)},e.prototype.addUndoSnapshot=function(){var e=this.editor.getContent(!1,!0);return this.getSnapshotsManager().addSnapshot(e),this.hasNewContent=!1,e},e.prototype.getSnapshotsManager=function(){return this.undoSnapshots||(this.undoSnapshots=new o.default(this.maxBufferSize)),this.undoSnapshots},e.prototype.restoreSnapshot=function(e){var t=this.getSnapshotsManager().move(e);if(null!=t)try{this.isRestoring=!0,this.editor.setContent(t)}finally{this.isRestoring=!1}},e.prototype.onKeyDown=function(e){if(8==e.which||46==e.which){var t=this.editor.getSelectionRange();!t||t.collapsed&&this.lastKeyPress==e.which&&!r.isCtrlOrMetaPressed(e)||this.addUndoSnapshot(),this.hasNewContent=!0,this.lastKeyPress=e.which}else e.which>=33&&e.which<=40&&(this.hasNewContent&&this.addUndoSnapshot(),this.lastKeyPress=0)},e.prototype.onKeyPress=function(e){if(!e.metaKey){var t=this.editor.getSelectionRange();t&&!t.collapsed||32==e.which&&32!=this.lastKeyPress||13==e.which?(this.addUndoSnapshot(),13==e.which&&(this.hasNewContent=!0)):this.clearRedoForInput(),this.lastKeyPress=e.which}},e.prototype.clearRedoForInput=function(){this.getSnapshotsManager().clearRedo(),this.lastKeyPress=0,this.hasNewContent=!0},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(72);t.default=function(e){return!o.default(e)&&e.key&&1==e.key.length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="Control",r="Alt",i="Meta";t.default=function(e){var t=e.ctrlKey||e.key===o,n=e.altKey||e.key===r,a=e.metaKey||e.key===i;return t||n||a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r={backgroundColors:{darkModeColor:"rgb(51,51,51)",lightModeColor:"rgb(255,255,255)"},textColors:{darkModeColor:"rgb(255,255,255)",lightModeColor:"rgb(0,0,0)"}};t.calculateDefaultFormat=function(e,t,n){if(n&&(t.backgroundColors||(t.backgroundColors=r.backgroundColors),t.textColors||(t.textColors=r.textColors)),t&&0===Object.keys(t).length)return{};var i=(t=t||{}).fontFamily,a=t.fontSize,s=t.textColor,l=t.textColors,u=t.backgroundColor,c=t.backgroundColors,d=t.bold,f=t.italic,h=t.underline,p=i&&a&&(s||l)?null:o.getComputedStyles(e);return{fontFamily:i||p[0],fontSize:a||p[1],get textColor(){return l?n?l.darkModeColor:l.lightModeColor:s||p[2]},textColors:l,get backgroundColor(){return c?n?c.darkModeColor:c.lightModeColor:u||""},backgroundColors:c,bold:d,italic:f,underline:h}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.hasFocus=function(e){var t=e.document.activeElement;return t&&o.contains(e.contentDiv,t,!0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);function r(e){var t=e.getStartNode();return e instanceof o.StartEndBlockElement&&t==e.getEndNode()&&3==t.nodeType&&["TR","TABLE"].indexOf(o.getTagOfNode(t.parentNode))>=0}t.default=function(e,t){for(var n=e.getSelectionTraverser(),o=n&&n.currentBlockElement,i=[];o;)r(o)||i.push(o),o=n.getNextBlockElement();i.forEach((function(e){var n=e.collapseToSingleElement();t(n)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17);t.default=function(e,t){if("string"==typeof t){var n=t.trim();o.default(e,(function(e,t){e.style.backgroundColor=t?"":n}))}else{var r=e.isDarkMode(),i=r?t.darkModeColor:t.lightModeColor;o.default(e,(function(e,n){e.style.backgroundColor=n?"":i,r&&(e.dataset.ogsb=t.lightModeColor)}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17);t.default=function(e,t){t=t.trim(),o.default(e,(function(e,n){e.style.fontFamily=n?"":t}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=n(0);t.default=function(e,t){t=t.trim(),o.default(e,(function(e,n){e.style.fontSize=n?"":t,"normal"!=r.getComputedStyle(e,"line-height")&&(e.style.lineHeight="normal")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17);t.default=function(e,t){if("string"==typeof t){var n=t.trim();o.default(e,(function(e,t){e.style.color=t?"":n}))}else{var r=e.isDarkMode(),i=r?t.darkModeColor:t.lightModeColor;o.default(e,(function(e,n){e.style.color=n?"":i,r&&(e.dataset.ogsc=t.lightModeColor)}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9);t.default=function(e){o.default(e,"bold")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9);t.default=function(e){o.default(e,"italic")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9);t.default=function(e){o.default(e,"underline")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r="&#8203;",i="LI,THEAD,TBODY,TR,TD,TH".split(","),a=function(e){};t.default=function(e,t,n,s,l){void 0===s&&(s=function(e){return o.wrap(e,t)}),void 0===l&&(l=o.unwrap),e.focus(),e.addUndoSnapshot((function(u,c){var d,f=e.getSelectionRange();if(f&&0==e.queryElements(t,1,l).length){var h=o.Position.getStart(f).normalize().node,p=e.getBlockElementAtNode(h),m=o.Position.getEnd(f).normalize().node,g=e.getBlockElementAtNode(m),v=p&&g?e.collapseNodes(p.getStartNode(),g.getEndNode(),!0):[];if(0==v.length)v=o.fromHtml("<DIV>"+(o.Browser.isIEOrEdge?r:"<BR>")+"</DIV>",e.getDocument()),e.insertNode(v[0]),e.select(v[0],0);else if(1==v.length){var y=o.getTagOfNode(v[0]);"BR"==y?v=[o.wrap(v[0])]:"LI"!=y&&"TD"!=y||(v=[].slice.call(v[0].childNodes))}else for(;v[0]&&e.contains(v[0].parentNode)&&v.some((function(e){return i.indexOf(o.getTagOfNode(e))>=0}));)v=[o.splitBalancedNodeRange(v)];d=s(v),(n||a)(d)}return!e.select(u,c)&&d&&e.select(d),d}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(175);t.HyperLink=o.default;var r=n(176);t.ContentEdit=r.default;var i=n(184);t.Paste=i.default;var a=n(85);t.getDefaultContentEditFeatures=a.getDefaultContentEditFeatures;var s=n(196);t.Watermark=s.default;var l=n(197);t.TableResize=l.default;var u=n(198);t.CustomReplace=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.getDefaultContentEditFeatures=function(){return{autoLink:!0,indentWhenTab:!0,outdentWhenShiftTab:!0,outdentWhenBackspaceOnEmptyFirstLine:!0,outdentWhenEnterOnEmptyLine:o.Browser.isIE,mergeInNewLineWhenBackspaceOnFirstChar:!1,unquoteWhenBackspaceOnEmptyFirstLine:!0,unquoteWhenEnterOnEmptyLine:!0,autoBullet:!0,tabInTable:!0,upDownInTable:o.Browser.isChrome||o.Browser.isSafari,insertLineBeforeStructuredNodeFeature:!1,defaultShortcut:!0,unlinkWhenBackspaceAfterLink:!1,noCycleCursorMove:o.Browser.isChrome,smartOrderedList:!1,smartOrderedListStyles:["lower-alpha","lower-roman","decimal"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="NodeId";function r(e,t){var n=t.getAttribute(o);return n||(n=e.nextNodeId.toString(),e.nextNodeId++,t.setAttribute(o,n)),n}t.createCustomData=function(){return{dict:{},nextNodeId:1}},t.setObject=function(e,t,n,o){if(1==t.nodeType){var i=r(e,t);""!=i&&(e.dict[i]||(e.dict[i]={}),e.dict[i][n]=o)}},t.getObject=function(e,t,n){if(1==t.nodeType){var o=r(e,t);if(""!=o)return e.dict[o]&&e.dict[o][n]}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLevelLists=function(){return{listsMetadata:{},currentUniqueListId:-1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={object:function(e,t){for(var n in e)e[n]&&t.push(n)},string:function(e,t){return t.push(e)}};t.css=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r],s=o[typeof a];a&&s&&s(a,n)}return n.join(" ")},t.getDataAndAriaProps=function(e){return n=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},(t=e||{})?Object.keys(t).reduce((function(e,o){return n(o)&&(e[o]=t[o]),e}),{}):t;var t,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base64Svgs={RoosterJsReactSpinner:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiI+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2IoMCwgMTIwLCAyMTIpIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0iTSAxNC41IDggQSA2LjUgNi41IDAgMCAwIDggMS41IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgLz48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9InJnYigxOTksIDIyNCwgMjQ0KSIgc3Ryb2tlLXdpZHRoPSIxLjUiIGQ9Ik0gNy45OTk5OTk5OTk5OTk5OTkgMS41IEEgNi41IDYuNSAwIDEgMCAxNC41IDgiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiAvPjwvc3ZnPg=="}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(217);t.createEditorViewState=o.default;var r=n(218);t.createFormatState=r.default;var i=n(219);t.FocusOutShell=i.default;var a=n(220);t.LeanRooster=a.default},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),i=n(92),a=n(41),s=n(6),l=n(2),u={};function c(e){var t=e||{},n=t.customCacheKey,c=t.assets,d=t.highContrastAssetName,f=t.tooltipDirectionHint,h=null!=n?n:c?c.map((function(e){return e.name})).join("."):"";if(!u[h]){var p=void 0;c&&c.length>1&&(p=function(){return s.createElement("div",{className:"stacked-icon-container"},c.map((function(e,t){return s.createElement(i.Icon,{key:t,iconName:e.name,className:l.css("stacked-icon",e.className||"stacked-icon-"+e.name)})})),d&&s.createElement(i.Icon,{iconName:d,className:l.css("stacked-icon","high-contrast-icon")}))});var m=null;u[h]=function(e){return s.createElement(a.TooltipHost,{hostClassName:"command-button-tool-tip",content:e.name,key:e.key,directionalHint:f},s.createElement(r.CommandBarButton,o({componentRef:function(e){return m=e}},e,{ariaLabel:e.name,menuProps:e.subMenuProps&&o({},e.subMenuProps,{onDismiss:function(t){e.subMenuProps.onDismiss(t),m.dismissMenu()}}),className:l.css("rooster-command-bar-button",e.buttonClassName),onRenderIcon:p})))}}return u[h]}t.getIconOnRenderDelegate=function(e){void 0===e&&(e=null);for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return c({highContrastAssetName:e,assets:t})},t.getIconOnRenderDelegateWithCustomCacheKey=function(e,t){void 0===t&&(t=null);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return c({customCacheKey:e,highContrastAssetName:t,assets:n})},t.getIconButtonOnRenderDelegate=c},function(e,t){e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(40),r=n(23),i=n(6),a=n(3),s=n(2),l=n(222);t.RoosterCommandBarIconClassName="rooster-command-bar-icon",t.RoosterCommandBarButtonRootClassName="rooster-command-button-root",t.RoosterCommandBarStringKeys={LinkPrompt:"linkPrompt"},t.RoosterCommmandBarButtonKeys={Header:"header",Bold:"bold",Italic:"italic",Underline:"underline",BulletedList:"bulleted-list",NumberedList:"numbered-list",Link:"link",Highlight:"highlight",ClearFormat:"clear-format",Emoji:"emoji",InsertImage:"insert-image",Indent:"indent",Outdent:"outdent",Strikethrough:"strikethrough",FontColor:"font-color",Unlink:"unlink",Code:"code"};function u(e){return{className:t.RoosterCommandBarIconClassName,iconName:e}}function c(e){return e.headerLevel===this.headerLevel}function d(e,t,n){n.formatState.headerLevel===this.headerLevel?a.toggleHeader(e,0):a.toggleHeader(e,this.headerLevel)}function f(e){var t=e.data,n=t.color,r=t.cellBorderColor;return i.createElement(o.DefaultButton,{className:"rooster-command-bar-color-button",title:e.title,key:e.key,onClick:function(t){return e.onClick(t,e)}},r&&i.createElement("div",{className:"rooster-command-bar-color-cell-border",style:{borderColor:r}}),i.createElement("svg",{className:"rooster-command-bar-color-cell",viewBox:"0 0 30 30",fill:n,focusable:"false"},i.createElement("rect",{width:"100%",height:"100%"})))}function h(e){var t=this.data.color;a.setTextColor(e,t)}function p(e){var t=this.data.color,n=e.getSelection(),o=!1;if(!n.isCollapsed){var r=e.getDocument().createRange();r.setStart(n.anchorNode,n.anchorOffset),r.setEnd(n.focusNode,n.focusOffset),o=r.collapsed}a.setBackgroundColor(e,t),o?n.collapseToStart():n.collapseToEnd()}t.OutOfBoxCommandBarButtons=[{key:t.RoosterCommmandBarButtonKeys.Bold,name:"Bold",iconProps:u("Bold"),canCheck:!0,getChecked:function(e){return e.isBold},handleChange:function(e){return a.toggleBold(e)}},{key:t.RoosterCommmandBarButtonKeys.Italic,name:"Italic",iconProps:u("Italic"),canCheck:!0,getChecked:function(e){return e.isItalic},handleChange:function(e){return a.toggleItalic(e)}},{key:t.RoosterCommmandBarButtonKeys.Underline,name:"Underline",iconProps:u("Underline"),canCheck:!0,getChecked:function(e){return e.isUnderline},handleChange:function(e){return a.toggleUnderline(e)}},{key:t.RoosterCommmandBarButtonKeys.BulletedList,name:"Bulleted list",iconProps:u("BulletedList"),onRenderOptions:{customCacheKey:null,highContrastAssetName:"BulletedList",assets:[{name:"BulletedListText"},{name:"BulletedListBullet"}]},canCheck:!0,getChecked:function(e){return e.isBullet},handleChange:function(e,t){return(t.disableListWorkaround?s.toggleNonCompatBullet:a.toggleBullet)(e)}},{key:t.RoosterCommmandBarButtonKeys.NumberedList,name:"Numbered list",iconProps:u("NumberedList"),onRenderOptions:{customCacheKey:null,highContrastAssetName:"NumberedList",assets:[{name:"NumberedListText"},{name:"NumberedListNumber"}]},canCheck:!0,getChecked:function(e){return e.isNumbering},handleChange:function(e,t){return(t.disableListWorkaround?s.toggleNonCompatNumbering:a.toggleNumbering)(e)}},{key:t.RoosterCommmandBarButtonKeys.Highlight,name:"Highlight",iconProps:u("Highlight"),onRenderOptions:{highContrastAssetName:"FabricTextHighlightComposite",assets:[{name:"FontColorSwatch",className:"highlight-swatch"},{name:"FabricTextHighlight"}]},subMenuProps:{className:"rooster-command-bar-color-container",key:"highlight-sub",shouldFocusOnMount:!0,directionalHint:4,focusZoneProps:{direction:r.FocusZoneDirection.bidirectional},items:l.HighlightColorInfoList.map((function(e){return{className:"rooster-command-bar-color-item",key:e.key,title:e.title,onRender:f,data:e,handleChange:p}}))}},{key:t.RoosterCommmandBarButtonKeys.FontColor,name:"Font color",iconProps:u("FontColor"),onRenderOptions:{highContrastAssetName:"FontColor",assets:[{name:"FontColorSwatch",className:"color-swatch"},{name:"FontColorA"}]},subMenuProps:{className:"rooster-command-bar-color-container",key:"font-color-sub",shouldFocusOnMount:!0,directionalHint:4,focusZoneProps:{direction:r.FocusZoneDirection.bidirectional},items:l.FontColorInfoList.map((function(e){return{className:"rooster-command-bar-color-item",key:e.key,title:e.title,onRender:f,data:e,handleChange:h}}))}},{key:t.RoosterCommmandBarButtonKeys.Emoji,name:"Emoji",iconProps:{className:t.RoosterCommandBarIconClassName+" rooster-emoji"},handleChange:function(e,t){return t.emojiPlugin.startEmoji()}},{key:t.RoosterCommmandBarButtonKeys.Outdent,name:"Decrease indent",iconProps:u("DecreaseIndentLegacy"),onRenderOptions:{customCacheKey:null,highContrastAssetName:"DecreaseIndentLegacy",assets:[{name:"DecreaseIndentText"},{name:"DecreaseIndentArrow"}]},handleChange:function(e,t){return(t.disableListWorkaround?s.setNonCompatIndentation:a.setIndentation)(e,1)}},{key:t.RoosterCommmandBarButtonKeys.Indent,name:"Increase indent",iconProps:u("IncreaseIndentLegacy"),onRenderOptions:{customCacheKey:null,highContrastAssetName:"IncreaseIndentLegacy",assets:[{name:"IncreaseIndentText"},{name:"IncreaseIndentArrow"}]},handleChange:function(e,t){return(t.disableListWorkaround?s.setNonCompatIndentation:a.setIndentation)(e,0)}},{key:t.RoosterCommmandBarButtonKeys.Strikethrough,name:"Strikethrough",iconProps:u("Strikethrough"),getChecked:function(e){return e.isStrikeThrough},handleChange:function(e){return a.toggleStrikethrough(e)}},{key:t.RoosterCommmandBarButtonKeys.Header,name:"Header",iconProps:u("FontSize"),onRenderOptions:{assets:[{name:"FontSize"}]},subMenuProps:{key:"header-sub",shouldFocusOnMount:!0,directionalHint:4,items:[{key:"header1",name:"Header 1",className:"rooster-command-bar-header1",headerLevel:1,canCheck:!0,getChecked:c,isContextMenuItem:!0,handleChange:d,iconProps:null},{key:"header2",name:"Header 2",className:"rooster-command-bar-header2",headerLevel:2,canCheck:!0,getChecked:c,isContextMenuItem:!0,handleChange:d,iconProps:null},{key:"header3",name:"Header 3",className:"rooster-command-bar-header3",headerLevel:3,canCheck:!0,getChecked:c,isContextMenuItem:!0,handleChange:d,iconProps:null}]}},{key:t.RoosterCommmandBarButtonKeys.Code,name:"Code",iconProps:u("Embed"),handleChange:function(e){return a.toggleCodeBlock(e)}},{key:t.RoosterCommmandBarButtonKeys.ClearFormat,name:"Clear format",iconProps:u("ClearFormatting"),onRenderOptions:{customCacheKey:null,highContrastAssetName:"ClearFormatting",assets:[{name:"ClearFormattingA"},{name:"ClearFormattingEraser"}]},handleChange:function(e,t){return t.roosterCommandBarPlugin.clearFormat()}},{key:t.RoosterCommmandBarButtonKeys.InsertImage,name:"Insert image",iconProps:u("Photo2"),onRenderOptions:{customCacheKey:null,assets:[{name:"Photo2Fill"},{name:"Photo2"}]}},{key:t.RoosterCommmandBarButtonKeys.Link,name:"Link",iconProps:u("Link"),handleChange:function(e,t){return t.roosterCommandBarPlugin.promptForLink()}},{key:t.RoosterCommmandBarButtonKeys.Unlink,name:"Unlink",iconProps:u("RemoveLink"),onRenderOptions:{customCacheKey:null,highContrastAssetName:"RemoveLink",assets:[{name:"RemoveLinkChain"},{name:"RemoveLinkX"}]},getDisabled:function(e){return!e.canUnlink},handleChange:function(e){return a.removeLink(e)}}],t.OutOfBoxCommandBarButtons.forEach((function(e){var n={name:e.name};e.onRenderOptions=e.onRenderOptions||{customCacheKey:null,assets:[n]},e.className=t.RoosterCommandBarButtonRootClassName})),t.OutOfBoxCommandBarButtonMap=t.OutOfBoxCommandBarButtons.reduce((function(e,t){return e[t.key]=t,e}),{})},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(224),s=n(40),l=n(225),u=n(95),c=n(24),d=n(6),f=n(96),h=n(3),p=n(2);t.InsertLinkStringKeys={LinkFieldLabel:"linkFieldLabel",Title:"linkPromptTitle",InsertButton:"insertLinkText",CancelButton:"cancelLinkText"};var m=function(e){function n(t){var n=e.call(this,t)||this;return n.onLinkFieldRef=function(e){n.linkField=e},n.onLinkFieldChanged=function(e){n.setState({insertButtonDisabled:0===e.trim().length})},n.onLinkFieldKeyDown=function(e){13===e.which&&(n.insertLink(),e.preventDefault(),e.stopPropagation())},n.insertLink=function(){var e=n.props,t=e.editor,o=e.selectionRange;n.linkField&&t&&!t.isDisposed()&&(t&&!t.isDisposed()&&t.select(o),n.linkInserted=!0,h.createLink(t,n.linkField.value),n.dismissDialog())},n.dismissDialog=function(e){var t=n.props,o=t.editor,r=t.onDismiss,i=void 0===r?p.NullFunction:r,a=t.selectionRange;i(e),!n.linkInserted&&o&&!o.isDisposed()&&o.select(a)},n.state={insertButtonDisabled:!0},n}return r(n,e),n.prototype.render=function(){var e=this.props,n=e.strings,o=void 0===n?{}:n,r=e.className;return d.createElement(l.Dialog,{onDismiss:this.dismissDialog,dialogContentProps:{type:l.DialogType.normal,title:o[t.InsertLinkStringKeys.Title]},hidden:!1,modalProps:{isBlocking:!0},className:c.css(a.modal,r)},d.createElement(u.TextField,{label:o[t.InsertLinkStringKeys.LinkFieldLabel]||"Link",componentRef:this.onLinkFieldRef,onKeyDown:this.onLinkFieldKeyDown,required:!0,onChanged:this.onLinkFieldChanged}),d.createElement(l.DialogFooter,null,d.createElement(s.PrimaryButton,{onClick:this.insertLink,text:o[t.InsertLinkStringKeys.InsertButton]||"Insert",disabled:this.state.insertButtonDisabled}),d.createElement(s.DefaultButton,{onClick:this.dismissDialog,text:o[t.InsertLinkStringKeys.CancelButton]||"Cancel"})))},n.prototype.componentDidMount=function(){this.linkField&&this.linkField.focus()},n}(d.PureComponent);t.createLinkDialog=function(e,t,n){var o=t.editor,r=t.onDismiss,a=e.createElement("div");e.body.appendChild(a);var s=function(){a&&(f.unmountComponentAtNode(a),a.setAttribute("tabindex","0"),n&&a.setAttribute("class",n),a.focus(),o&&!o.isDisposed()&&o.focus(),a.parentElement.removeChild(a),a=null)},l=o&&!o.isDisposed()?o.getSelectionRange():null;return f.render(d.createElement(m,i({},t,{selectionRange:l,onDismiss:function(e){s(),r&&r(e)},className:c.css(n,t.className)})),a),s}},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(25);function r(e){var t;return e=" "+e+" ",o.forEachEmoji((function(n){return!(n.shortcut&&(" "+n.shortcut+" ").indexOf(e)>=0)||(t=n,!1)})),t}t.searchEmojis=function(e,t){var n=r(e);e=e.toLowerCase();var i=n?[n]:[],a=[],s=" "+(":"==e[0]?e.substr(1):e);return o.forEachEmoji((function(e){var n=t[e.keywords]||"",o=e.keywords?" "+n.toLowerCase()+" ":"",r=o.indexOf(s);return r>=0&&(" "==o[r+s.length]?i:a).push(e),!0})),i.concat(a)},t.matchShortcut=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11).loadStyles([{rawString:'.rooster-emoji-pane{padding:1px}.rooster-emoji-pane button{outline:0;position:relative}.rooster-emoji-pane .rooster-emoji-selected{background-color:#eaeaea}@media screen and (-ms-high-contrast: active){.rooster-emoji-pane .rooster-emoji-selected{background-color:Highlight;color:HighlightText;-ms-high-contrast-adjust:none}}.is-focusVisible .rooster-emoji-pane.quick-picker .rooster-emoji-selected::after,.is-focusVisible .rooster-emoji-pane button:focus::after{content:"";position:absolute;left:0px;top:0px;bottom:0px;right:0px;z-index:1;border-width:1px;border-style:solid;border-color:#fff;-o-border-image:initial;border-image:initial;outline:#666 solid 1px}.emoji_b12fbd63{background:white;font-size:18px;width:40px;height:40px;border:0}.emoji_b12fbd63::-moz-focus-inner{border:0}.emojiTextInput_b12fbd63{padding:6px}.fullList_b12fbd63{position:relative}.quickPicker_b12fbd63{overflow-y:hidden}.partialList_b12fbd63,.fullListBody_b12fbd63{max-height:245px;overflow:hidden;overflow-y:scroll}.fullListBody_b12fbd63{height:245px}.fullListContentContainer_b12fbd63{margin:43px 0 1px 0}.partialListContent_b12fbd63,.fullListContent_b12fbd63{width:282px;padding:0 1px}.tooltip_b12fbd63{padding:8px}\n'}]),t.emoji="emoji_b12fbd63",t.emojiTextInput="emojiTextInput_b12fbd63",t.fullList="fullList_b12fbd63",t.quickPicker="quickPicker_b12fbd63",t.partialList="partialList_b12fbd63",t.fullListBody="fullListBody_b12fbd63",t.fullListContentContainer="fullListContentContainer_b12fbd63",t.partialListContent="partialListContent_b12fbd63",t.fullListContent="fullListContent_b12fbd63",t.tooltip="tooltip_b12fbd63"},function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),o(n(12)),o(n(103)),o(n(0)),o(n(1)),o(n(3)),o(n(84)),o(n(199)),o(n(2)),o(n(213)),o(n(90)),o(n(227))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(42),r=n(43),i=n(44),a=n(102),s=function(){function e(e){e=e||{},this.elementCallbacks=o.default(e.elementCallbacks),this.styleCallbacks=a.getStyleCallbacks(e.styleCallbacks),this.attributeCallbacks=o.default(e.attributeCallbacks),this.allowedTags=a.getAllowedTags(e.additionalAllowedTags),this.allowedAttributes=a.getAllowedAttributes(e.additionalAllowAttributes),this.defaultStyleValues=a.getDefaultStyleValues(e.additionalDefaultStyleValues),this.additionalGlobalStyleNodes=e.additionalGlobalStyleNodes||[],this.allowPreserveWhiteSpace=e.allowPreserveWhiteSpace}return e.convertInlineCss=function(t,n){return new e({additionalGlobalStyleNodes:n}).exec(t,!0)},e.sanitizeHtml=function(t,n){var o=new e(n=n||{}),i=n.currentElementOrStyle instanceof HTMLElement?r.default(n.currentElementOrStyle):n.currentElementOrStyle;return o.exec(t,n.convertCssOnly,n.preserveFragmentOnly,i)},e.prototype.exec=function(e,t,n,o){var r=i.default(e,n);return r&&(this.convertGlobalCssToInlineCss(r),t||this.sanitize(r.body,o)),r&&r.body&&r.body.innerHTML||""},e.prototype.sanitize=function(e,t){if(!e)return"";t=o.default(t,r.default(null)),this.processNode(e,t,{})},e.prototype.convertGlobalCssToInlineCss=function(e){for(var t=l(e.querySelectorAll("style")),n=0,o=this.additionalGlobalStyleNodes.reverse().map((function(e){return e.sheet})).concat(t.map((function(e){return e.sheet})).reverse()).filter((function(e){return e}));n<o.length;n++)for(var r=o[n],i=function(t){var n=r.cssRules[t],o=n&&n.style?n.style.cssText:null;if(n.type!=CSSRule.STYLE_RULE||!o||!n.selectorText)return"continue";for(var i=0,a=n.selectorText.split(",");i<a.length;i++){var s=a[i];if(s&&s.trim()&&!(s.indexOf(":")>=0))l(e.querySelectorAll(s)).forEach((function(e){return e.setAttribute("style",o+(e.getAttribute("style")||""))}))}},a=r.cssRules.length-1;a>=0;a--)i(a);t.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},e.prototype.processNode=function(e,t,n){var r=e.nodeType,i=r==Node.ELEMENT_NODE,a=r==Node.TEXT_NODE,s=e,l=i?s.tagName.toUpperCase():"";if(i&&!this.allowElement(s,l,n)||a&&/^[\r\n]*$/g.test(e.nodeValue)&&!t.insidePRE||!i&&!a)e.parentNode.removeChild(e);else if(a&&!this.allowPreserveWhiteSpace&&"pre"==t["white-space"])e.nodeValue=e.nodeValue.replace(/^ /gm,"").replace(/ {2}/g," ");else if(i){var u=o.default(t);this.processAttributes(s,n),this.processCss(s,l,u,n),"PRE"==l&&(u.insidePRE="true");for(var c=s.firstChild,d=void 0;c;c=d)d=c.nextSibling,this.processNode(c,u,n)}},e.prototype.processCss=function(e,t,n,o){var r=this,i=e.getAttributeNode("style");if(i){var a=i.value.split(";"),s=a.filter((function(t){var i;if(!t||""==t.trim()||2!=(i=t.split(":")).length)return!1;var a=i[0].trim().toLowerCase(),s=i[1].trim().toLowerCase(),l=r.styleCallbacks[a],u=null!=n[a],c=(!l||l(s,e,o))&&"inherit"!=s&&s.indexOf("expression")<0&&"-"!=a.substr(0,1)&&r.defaultStyleValues[a]!=s&&(u&&s!=n[a]||!u&&"initial"!=s&&"normal"!=s);return c&&u&&(n[a]=s),c&&(r.allowPreserveWhiteSpace||"white-space"!=a)}));a.length!=s.length&&(s.length>0?e.setAttribute("style",s.map((function(e){return e.trim()})).join("; ")):e.removeAttribute("style"))}},e.prototype.processAttributes=function(e,t){for(var n=e.attributes.length-1;n>=0;n--){var o=e.attributes[n],r=o.name.toLowerCase().trim(),i=o.value,a=this.attributeCallbacks[r];a?i=a(i,e,t):this.allowedAttributes.indexOf(r)<0&&(i=null),null==i||i.toLowerCase().indexOf("script:")>=0?e.removeAttribute(r):o.value=i}},e.prototype.allowElement=function(e,t,n){var o=this.elementCallbacks[t];return o?o(e,n):this.allowedTags.indexOf(t)>=0||t.indexOf(":")>0},e}();function l(e){return[].slice.call(e)}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(42),r="BODY,H1,H2,H3,H4,H5,H6,FORM,P,BR,NOBR,HR,ACRONYM,ABBR,ADDRESS,B,BDI,BDO,BIG,BLOCKQUOTE,CENTER,CITE,CODE,DEL,DFN,EM,FONT,I,INS,KBD,MARK,METER,PRE,PROGRESS,Q,RP,RT,RUBY,S,SAMP,SMALL,STRIKE,STRONG,SUB,SUP,TEMPLATE,TIME,TT,U,VAR,WBR,XMP,INPUT,TEXTAREA,BUTTON,SELECT,OPTGROUP,OPTION,LABEL,FIELDSET,LEGEND,DATALIST,OUTPUT,IMG,MAP,AREA,CANVAS,FIGCAPTION,FIGURE,PICTURE,A,NAV,UL,OL,LI,DIR,UL,DL,DT,DD,MENU,MENUITEM,TABLE,CAPTION,TH,TR,TD,THEAD,TBODY,TFOOT,COL,COLGROUP,DIV,SPAN,HEADER,FOOTER,MAIN,SECTION,ARTICLE,ASIDE,DETAILS,DIALOG,SUMMARY,DATA".split(","),i="accept,align,alt,checked,cite,color,cols,colspan,contextmenu,coords,datetime,default,dir,dirname,disabled,download,face,headers,height,hidden,high,href,hreflang,ismap,kind,label,lang,list,low,max,maxlength,media,min,multiple,open,optimum,pattern,placeholder,readonly,rel,required,reversed,rows,rowspan,scope,selected,shape,size,sizes,span,spellcheck,src,srclang,srcset,start,step,style,tabindex,target,title,translate,type,usemap,value,width,wrap".split(","),a={"background-color":"transparent","border-bottom-color":"rgb(0, 0, 0)","border-bottom-style":"none","border-bottom-width":"0px","border-image-outset":"0","border-image-repeat":"stretch","border-image-slice":"100%","border-image-source":"none","border-image-width":"1","border-left-color":"rgb(0, 0, 0)","border-left-style":"none","border-left-width":"0px","border-right-color":"rgb(0, 0, 0)","border-right-style":"none","border-right-width":"0px","border-top-color":"rgb(0, 0, 0)","border-top-style":"none","border-top-width":"0px","outline-color":"transparent","outline-style":"none","outline-width":"0px",overflow:"visible","text-decoration":"none","-webkit-text-stroke-width":"0px","word-wrap":"break-word","margin-left":"0px","margin-right":"0px",padding:"0px","padding-top":"0px","padding-left":"0px","padding-right":"0px","padding-bottom":"0px",border:"0px","border-top":"0px","border-left":"0px","border-right":"0px","border-bottom":"0px","vertical-align":"baseline",float:"none"};function s(){return null}function l(e,t){var n=t.tagName;return!("LI"==n||"DIV"==n)}function u(e){return e.filter((function(e,t,n){return n.indexOf(e)==t}))}t.getAllowedTags=function(e){return u(r.concat(e||[])).map((function(e){return e.toUpperCase()}))},t.getAllowedAttributes=function(e){return u(i.concat(e||[])).map((function(e){return e.toLocaleLowerCase()}))},t.getDefaultStyleValues=function(e){var t=o.default(a);return e&&Object.keys(e).forEach((function(n){var o=e[n];null!=o?t[n]=o:delete t[n]})),t},t.getStyleCallbacks=function(e){var t=o.default(e);return t.position=t.position||s,t.width=t.width||l,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(104);t.DocumentCommand=o.DocumentCommand;var r=n(105);t.DocumentPosition=r.DocumentPosition;var i=n(106);t.NodeType=i.NodeType;var a=n(107);t.Alignment=a.Alignment;var s=n(108);t.ChangeSource=s.ChangeSource;var l=n(109);t.ContentPosition=l.ContentPosition;var u=n(110);t.Direction=u.Direction;var c=n(111);t.FontSizeChange=c.FontSizeChange;var d=n(112);t.Indentation=d.Indentation;var f=n(113);t.PasteOption=f.PasteOption;var h=n(114);t.PositionType=h.PositionType;var p=n(115);t.QueryScope=p.QueryScope;var m=n(116);t.TableOperation=m.TableOperation;var g=n(117);t.PluginEventType=g.PluginEventType},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AutoUrlDetect="AutoUrlDetect",e.BackColor="backColor",e.Bold="bold",e.ClearAuthenticationCache="ClearAuthenticationCache",e.ContentReadOnly="contentReadOnly",e.Copy="copy",e.CreateLink="createLink",e.Cut="cut",e.DecreaseFontSize="decreaseFontSize",e.DefaultParagraphSeparator="defaultParagraphSeparator",e.Delete="delete",e.EnableInlineTableEditing="enableInlineTableEditing",e.EnableObjectResizing="enableObjectResizing",e.FontName="fontName",e.FontSize="fontSize",e.ForeColor="foreColor",e.FormatBlock="formatBlock",e.ForwardDelete="forwardDelete",e.Heading="heading",e.HiliteColor="hiliteColor",e.IncreaseFontSize="increaseFontSize",e.Indent="indent",e.InsertBrOnReturn="insertBrOnReturn",e.InsertHorizontalRule="insertHorizontalRule",e.InsertHTML="insertHTML",e.InsertImage="insertImage",e.InsertOrderedList="insertOrderedList",e.InsertUnorderedList="insertUnorderedList",e.InsertParagraph="insertParagraph",e.InsertText="insertText",e.Italic="italic",e.JustifyCenter="justifyCenter",e.JustifyFull="justifyFull",e.JustifyLeft="justifyLeft",e.JustifyRight="justifyRight",e.Outdent="outdent",e.Paste="paste",e.Redo="redo",e.RemoveFormat="removeFormat",e.SelectAll="selectAll",e.StrikeThrough="strikeThrough",e.Subscript="subscript",e.Superscript="superscript",e.Underline="underline",e.Undo="undo",e.Unlink="unlink",e.StyleWithCSS="styleWithCSS"}(t.DocumentCommand||(t.DocumentCommand={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Same=0]="Same",e[e.Disconnected=1]="Disconnected",e[e.Preceding=2]="Preceding",e[e.Following=4]="Following",e[e.Contains=8]="Contains",e[e.ContainedBy=16]="ContainedBy"}(t.DocumentPosition||(t.DocumentPosition={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Element=1]="Element",e[e.Text=3]="Text",e[e.ProcessingInstruction=7]="ProcessingInstruction",e[e.Comment=8]="Comment",e[e.Document=9]="Document",e[e.DocumentType=10]="DocumentType",e[e.DocumentFragment=11]="DocumentFragment"}(t.NodeType||(t.NodeType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(t.Alignment||(t.Alignment={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AutoLink="AutoLink",e.CreateLink="CreateLink",e.Format="Format",e.ImageResize="ImageResize",e.Paste="Paste",e.SetContent="SetContent",e.Cut="Cut",e.Drop="Drop"}(t.ChangeSource||(t.ChangeSource={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Begin=0]="Begin",e[e.End=1]="End",e[e.DomEnd=2]="DomEnd",e[e.SelectionStart=3]="SelectionStart",e[e.Outside=4]="Outside",e[e.Range=5]="Range"}(t.ContentPosition||(t.ContentPosition={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LeftToRight=0]="LeftToRight",e[e.RightToLeft=1]="RightToLeft"}(t.Direction||(t.Direction={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(t.FontSizeChange||(t.FontSizeChange={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(t.Indentation||(t.Indentation={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.PasteHtml=0]="PasteHtml",e[e.PasteText=1]="PasteText",e[e.PasteImage=2]="PasteImage"}(t.PasteOption||(t.PasteOption={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Begin=0]="Begin",e[e.End=-1]="End",e[e.Before=-2]="Before",e[e.After=-3]="After"}(t.PositionType||(t.PositionType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Body=0]="Body",e[e.OnSelection=1]="OnSelection",e[e.InSelection=2]="InSelection"}(t.QueryScope||(t.QueryScope={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.InsertAbove=0]="InsertAbove",e[e.InsertBelow=1]="InsertBelow",e[e.InsertLeft=2]="InsertLeft",e[e.InsertRight=3]="InsertRight",e[e.DeleteTable=4]="DeleteTable",e[e.DeleteColumn=5]="DeleteColumn",e[e.DeleteRow=6]="DeleteRow",e[e.MergeAbove=7]="MergeAbove",e[e.MergeBelow=8]="MergeBelow",e[e.MergeLeft=9]="MergeLeft",e[e.MergeRight=10]="MergeRight",e[e.SplitHorizontally=11]="SplitHorizontally",e[e.SplitVertically=12]="SplitVertically"}(t.TableOperation||(t.TableOperation={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.KeyDown=0]="KeyDown",e[e.KeyPress=1]="KeyPress",e[e.KeyUp=2]="KeyUp",e[e.CompositionEnd=3]="CompositionEnd",e[e.MouseDown=4]="MouseDown",e[e.MouseUp=5]="MouseUp",e[e.ContentChanged=6]="ContentChanged",e[e.ExtractContent=7]="ExtractContent",e[e.BeforePaste=8]="BeforePaste",e[e.EditorReady=9]="EditorReady",e[e.BeforeDispose=10]="BeforeDispose",e[e.Input=11]="Input",e[e.PendingFormatStateChanged=12]="PendingFormatStateChanged",e[e.DarkModeChanged=13]="DarkModeChanged",e[e.Scroll=14]="Scroll"}(t.PluginEventType||(t.PluginEventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),r=n(8),i=n(13),a=n(47),s=n(50),l=function(){function e(e,t){this.rootNode=e,this.startNode=o.default(e,t)?t:null}return e.prototype.getStartBlockElement=function(){return this.startNode?r.default(this.rootNode,this.startNode):a.getFirstBlockElement(this.rootNode)},e.prototype.getStartInlineElement=function(){return this.startNode?i.default(this.rootNode,this.startNode):s.getFirstInlineElement(this.rootNode)},e.prototype.isBlockInScope=function(e){return o.default(this.rootNode,e.getStartNode())},e.prototype.trimInlineElement=function(e){return e},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(52),r=n(8),i=n(13),a=n(26),s=n(7),l=n(34),u=n(50),c=function(){function e(e,t,n){this.rootNode=e,this.startFrom=n,t=t instanceof Range?s.default.getStart(t):t,this.position=t.normalize(),this.block=r.default(this.rootNode,this.position.node)}return e.prototype.getStartBlockElement=function(){return this.block},e.prototype.getStartInlineElement=function(){if(this.block)switch(this.startFrom){case 0:case 1:case 2:return function(e,t){if(e instanceof a.default){var n=e.getStartNode();return t?u.getFirstInlineElement(n):u.getLastInlineElement(n)}return i.default(e,t?e.getStartNode():e.getEndNode())}(this.block,0==this.startFrom);case 3:var e=l.getInlineElementAfter(this.rootNode,this.position);return e&&this.block.contains(e.getContainerNode())?e:new o.default(this.position,this.block)}return null},e.prototype.isBlockInScope=function(e){return!(!this.block||!e)&&this.block.equals(e)},e.prototype.trimInlineElement=function(e){return this.block&&e&&this.block.contains(e.getContainerNode())?e:null},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),r=n(22),i=n(7),a=n(34),s=function(){function e(e,t){this.rootNode=e,this.start=i.default.getStart(t).normalize(),this.end=i.default.getEnd(t).normalize()}return e.prototype.getStartBlockElement=function(){return this.startBlock||(this.startBlock=o.default(this.rootNode,this.start.node)),this.startBlock},e.prototype.getStartInlineElement=function(){return this.startInline||(this.startInline=this.trimInlineElement(a.getInlineElementAfter(this.rootNode,this.start))),this.startInline},e.prototype.isBlockInScope=function(e){if(!e)return!1;var t=!1,n=this.getStartBlockElement();if(this.start.equalTo(this.end))t=n&&n.equals(e);else{var r=o.default(this.rootNode,this.end.node);t=n&&r&&(e.equals(n)||e.equals(r)||e.isAfter(n)&&r.isAfter(e))}return t},e.prototype.trimInlineElement=function(e){if(!e||this.start.equalTo(this.end))return null;var t=e.getStartPosition(),n=e.getEndPosition();if(t.isAfter(this.end)||this.start.isAfter(n))return null;var o=!1,i=!1;return this.start.isAfter(t)&&(t=this.start,o=!0),n.isAfter(this.end)&&(n=this.end,i=!0),t.isAfter(n)||t.equalTo(n)?null:o||i?new r.default(e,o&&t,i&&n):e},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),r=n(10),i=/[\s\u00A0\u200B\u3000]+([^\s\u00A0\u200B\u3000]*)$/i,a=function(){function e(e,t){this.rootNode=e,this.position=t,this.text="",this.inlineElements=[]}return e.prototype.getWordBefore=function(){var e=this;return this.word||this.traverse((function(){return e.word})),this.word},e.prototype.getInlineElementBefore=function(){return this.inlineBefore||this.traverse(null),this.inlineBefore},e.prototype.getInlineElementAfter=function(){return this.inlineAfter||(this.inlineAfter=o.default.createBlockTraverser(this.rootNode,this.position).currentInlineElement),this.inlineAfter},e.prototype.getSubStringBefore=function(e){var t=this;return this.text.length<e&&this.traverse((function(){return t.text.length>=e})),this.text.substr(Math.max(0,this.text.length-e))},e.prototype.getRangeFromText=function(e,t){if(!e)return null;var n,o,i=e.length-1;return this.forEachTextInlineElement((function(r){for(var a=r.getTextContent()||"",s=a.length-1;s>=0&&i>=0;s--)if(e.charCodeAt(i)==a.charCodeAt(s))i--,o||(o=r.getStartPosition().move(s+1));else if(t||o)return!0;return-1==i&&(n=r.getStartPosition().move(s+1),!0)})),n&&o&&r.default(n,o)},e.prototype.forEachTextInlineElement=function(e){this.inlineElements.some(e)||this.traverse(e)},e.prototype.getNearestNonTextInlineElement=function(){var e=this;return this.nearestNonTextInlineElement||this.traverse((function(){return e.nearestNonTextInlineElement})),this.nearestNonTextInlineElement},e.prototype.traverse=function(e){if(this.traverser=this.traverser||o.default.createBlockTraverser(this.rootNode,this.position),this.traverser&&!this.traversingComplete)for(var t=this.traverser.getPreviousInlineElement();!this.traversingComplete;){if(this.inlineBefore=this.inlineBefore||t,!t||!t.isTextualInlineElement()){this.nearestNonTextInlineElement=t,this.traversingComplete=!0,this.word||(this.word=this.text);break}var n=t.getTextContent();if(!this.word){var r=i.exec(n);r&&2==r.length&&(this.word=r[1]+this.text)}if(this.text=n+this.text,this.inlineElements.push(t),e&&e(t))break;t=this.traverser.getPreviousInlineElement()}},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(t){var o=e.style,r=t.fontFamily,i=t.fontSize,a=t.textColor,s=t.textColors,l=t.backgroundColor,u=t.backgroundColors,c=t.bold,d=t.italic,f=t.underline;r&&(o.fontFamily=r),i&&(o.fontSize=i),(a||s)&&(s&&n&&(e.dataset.ogsc=s.lightModeColor),o.color=a),(l||u)&&(u&&n&&(e.dataset.ogsb=u.lightModeColor),o.backgroundColor=l),c&&(o.fontWeight="bold"),d&&(o.fontStyle="italic"),f&&(o.textDecoration="underline")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(53),r=/^Version:[0-9\.]+\s+StartHTML:\s*([0-9]+)\s+EndHTML:\s*([0-9]+)\s+/i;function i(e){for(var t=e.items?e.items.length:0,n=0;n<t;n++){var o=e.items[n];if(o.type&&0==o.type.indexOf("image/"))return o.getAsFile()}t=e.files?e.files.length:0;for(n=0;n<t;n++){var r=e.files.item(n);if(r.type&&0==r.type.indexOf("image/"))return r}return null}function a(e){var t=r.exec(e);if(t&&3==t.length){var n=parseInt(t[1]),o=parseInt(t[2]);n>0&&o>n&&(e=e.substring(n,o))}return e}t.default=function(e,t){var n=e.clipboardData||e.target.ownerDocument.defaultView.clipboardData,r={types:n.types?[].slice.call(n.types):[],text:n.getData("text"),image:i(n),html:void 0};if(e.clipboardData&&e.clipboardData.items){e.preventDefault();for(var s=e.clipboardData.items,l=0;l<s.length;l++){var u=s[l];if(u.type&&0==u.type.indexOf("text/html"))return void u.getAsString((function(e){r.html=o.Browser.isEdge?a(e):e,t(r)}))}r.html=null}t(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendableFormatCommandMap={isBold:"bold",isItalic:"italic",isUnderline:"underline",isStrikeThrough:"strikeThrough",isSubscript:"subscript",isSuperscript:"superscript"},t.default=function(e){return Object.keys(t.PendableFormatCommandMap).reduce((function(n,o){return n[o]=e.queryCommandState(t.PendableFormatCommandMap[o]),n}),{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(21);t.default=function(e){return"rtl"==o.getComputedStyle(e,"direction")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=/^[^?]+%[^0-9a-f]+|^[^?]+%[0-9a-f][^0-9a-f]+|^[^?]+%00|^[^?]+%$|^https?:\/\/[^?\/]+@|^www\.[^?\/]+@/i,r="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)*[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\\:[0-9]+)?(?:[\\/\\?]\\S*)?",i={http:{match:new RegExp("^(?:microsoft-edge:)?http:\\/\\/"+r+"|www\\."+r,"i"),except:o,normalizeUrl:function(e){return new RegExp("^(?:microsoft-edge:)?http:\\/\\/","i").test(e)?e:"http://"+e}},https:{match:new RegExp("^(?:microsoft-edge:)?https:\\/\\/"+r,"i"),except:o},mailto:{match:new RegExp("^mailto:\\S+@\\S+\\.\\S+","i")},notes:{match:new RegExp("^notes:\\/\\/\\S+","i")},file:{match:new RegExp("^file:\\/\\/\\/?\\S+","i")},unc:{match:new RegExp("^\\\\\\\\\\S+","i")},ftp:{match:new RegExp("^ftp:\\/\\/"+r+"|ftp\\."+r,"i"),normalizeUrl:function(e){return new RegExp("^ftp:\\/\\/","i").test(e)?e:"ftp://"+e}},news:{match:new RegExp("^news:(\\/\\/)?"+r,"i")},telnet:{match:new RegExp("^telnet:(\\/\\/)?"+r,"i")},gopher:{match:new RegExp("^gopher:\\/\\/"+r,"i")},wais:{match:new RegExp("^wais:(\\/\\/)?"+r,"i")}};t.default=function(e){if(e)for(var t=0,n=Object.keys(i);t<n.length;t++){var o=n[t],r=i[o],a=e.match(r.match);if(a&&a[0]==e&&(!r.except||!r.except.test(e)))return{scheme:o,originalUrl:e,normalizedUrl:r.normalizeUrl?r.normalizeUrl(e):e}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(54),r=n(4),i=n(10),a=n(19),s=n(8),l=n(5),u=n(35),c=n(55),d=n(29),f=n(7),h=n(56),p=n(32),m=n(57),g=n(58),v=n(18),y=n(16),b=[function(e,t,n){var o=s.default(e,n.node);if(o){var a=h.default(e,"a[href]",null,1,i.default(n)).filter((function(e){return o.contains(e)}))[0];if(a&&u.default(a)&&(n=new f.default(a,-2),C(a),a=null),a&&t.querySelector&&t.querySelector("a[href]")){var l=n.normalize(),c=l.node.parentNode,d=3==l.node.nodeType?p.default(l.node,l.offset,!1):l.isAtEnd?l.node.nextSibling:l.node,m=e.ownerDocument.createTextNode("");for(c.insertBefore(m,d);r.default(a,m);)m=y.splitBalancedNodeRange(m);n=new f.default(m,-2),C(m)}}return n},function(e,t,n){var o=t;if(11==o.nodeType){var r=[].slice.call(o.childNodes).filter((function(e){return"BR"!=l.default(e)}));o=1==r.length?r[0]:null}var i=l.default(o),s=i&&"BR"==l.default(o.nextSibling),u=a.default(n.node,e,"LI"),d=u&&a.default(u,e,"OL,UL"),h=a.default(n.node,e,"TD,TH"),p=h&&a.default(h,e,"TR");"LI"==i&&(i=d?l.default(d):"UL",o=v.default(o,i));if("OL"!=i&&"UL"!=i||"LI"!=l.default(o.firstChild)){if("TABLE"==i&&p){var y=new g.default(o),b=new g.default(h);0==b.col&&h==b.getCell(b.row,0).td&&y.cells[0]&&y.cells[0].length==b.cells[0].length&&c.default(n,h)&&("TBODY"!=l.default(o.firstChild)||o.firstChild.nextSibling||m.default(o.firstChild),m.default(o),n=new f.default(p,-3))}}else{var E=!o.firstChild.nextSibling&&!s;s&&o.parentNode&&C(o.nextSibling),E?(m.default(o.firstChild),m.default(o)):l.default(d)==i&&(m.default(o),n=new f.default(u,c.default(n,u)?-2:-3))}return n},function(e,t,n){if("P"==l.default(n.node)){var r=n.normalize(),i=o.default(n.node,"div");r.node!=i&&(n=r)}return n},function(e,t,n){d.default(n.node)&&(n=new f.default(n.node,n.isAtEnd?-3:-2));return n}];function C(e){e&&e.parentNode&&e.parentNode.removeChild(e)}t.default=function(e,t,n){return b.forEach((function(o){n=o(e,t,n)})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(30);t.default=function(e){for(var t=o.default.createBodyTraverser(e),n=t&&t.currentBlockElement,r=[];n;)r.push(n.getTextContent()),n=t.getNextBlockElement();return r.join("\n")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(10);function r(e){var t=e||{},n=t.left,o=t.right,r=t.top,i=t.bottom;return n+o+r+i>0?{left:Math.round(n),right:Math.round(o),top:Math.round(r),bottom:Math.round(i)}:null}t.default=function(e){if(!e)return null;var t=o.default(e),n=t.getBoundingClientRect&&r(t.getBoundingClientRect());if(n)return n;e=e.normalize();var i=t.getClientRects&&t.getClientRects();if(n=i&&1==i.length&&r(i[0]))return n;if(3==e.node.nodeType){var a=document.createElement("SPAN");if(a.innerHTML="",(t=o.default(e)).insertNode(a),n=a.getBoundingClientRect&&r(a.getBoundingClientRect()),a.parentNode.removeChild(a),n)return n}var s=e.element;return s&&s.getBoundingClientRect&&(n=r(s.getBoundingClientRect()))?n:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(59);t.default=function(e,t){if(!e)return"";var n=e.innerHTML,r=t&&o.default(e,t);return r?n+"\x3c!--"+JSON.stringify(r)+"--\x3e":n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(10);t.default=function(e,t){e.innerHTML=t||"";var n=null,r=e.lastChild;try{(n=r&&8==r.nodeType&&JSON.parse(r.nodeValue))&&n.end&&n.end.length>0&&n.start&&n.start.length>0?e.removeChild(r):n=null}catch(e){}return n&&o.default(e,n.start,n.end)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(60);t.default=function(e,t){if(e.currentIndex<0||t!=e.snapshots[e.currentIndex]){o.default(e),e.snapshots.push(t),e.currentIndex++,e.totalSize+=t.length;for(var n=0;n<e.snapshots.length&&e.totalSize>e.maxSize;)e.totalSize-=e.snapshots[n].length,n++;n>0&&(e.snapshots.splice(0,n),e.currentIndex-=n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(36);t.default=function(e,t){return o.default(e,t)?(e.currentIndex+=t,e.snapshots[e.currentIndex]):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{snapshots:[],totalSize:0,currentIndex:-1,maxSize:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NULL=0]="NULL",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SPACE=32]="SPACE",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.B=66]="B",e[e.I=73]="I",e[e.U=85]="U",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.FORWARDSLASH=191]="FORWARDSLASH",e[e.Ctrl=256]="Ctrl",e[e.Meta=512]="Meta",e[e.Shift=1024]="Shift",e[e.CONTENTCHANGED=2048]="CONTENTCHANGED",e[e.MOUSEDOWN=4096]="MOUSEDOWN"}(t.Keys||(t.Keys={}))},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(137),i=n(138),a=n(62),s=n(148),l=n(73),u=n(149),c=n(0),d=function(){function e(e,t){var n=this;if(void 0===t&&(t={}),"DIV"!=c.getTagOfNode(e))throw new Error("contentDiv must be an HTML DIV element");if(this.core=i.default(e,t),this.core.plugins.forEach((function(e){return e.initialize(n)})),this.setContent(t.initialContent||e.innerHTML||"",!1),this.eventDisposers=s.default(this.core),t.additionalEditFeatures&&t.additionalEditFeatures.forEach((function(e){return n.addContentEditFeature(e)})),!t.omitContentEditableAttributeChanges&&!e.isContentEditable){e.setAttribute("contenteditable","true");var o=e.style;o.userSelect=o.msUserSelect=o.webkitUserSelect="text",this.contenteditableChanged=!0}r.default(),this.triggerPluginEvent(9,{},!0),this.core.corePlugins.typeInContainer.ensureTypeInElement(this.getFocusedPosition()||new c.Position(e,0))}return e.prototype.dispose=function(){this.triggerPluginEvent(10,{},!0),this.core.plugins.forEach((function(e){return e.dispose()})),this.eventDisposers.forEach((function(e){return e()})),this.eventDisposers=null;for(var e=0,t=Object.keys(this.core.customData);e<t.length;e++){var n=t[e],o=this.core.customData[n];o&&o.disposer&&o.disposer(o.value),delete this.core.customData[n]}if(this.contenteditableChanged){var r=this.core.contentDiv.style;r.userSelect=r.msUserSelect=r.webkitUserSelect="",this.core.contentDiv.removeAttribute("contenteditable")}this.core=null},e.prototype.isDisposed=function(){return!this.core},e.prototype.insertNode=function(e,t){var n=this.getDarkModeOptions(),o=this.isDarkMode()?u.convertContentToDarkMode(e,n&&n.onExternalContentTransform?n.onExternalContentTransform:void 0):null,r=!!e&&this.core.api.insertNode(this.core,e,t);return r&&o&&o(),r},e.prototype.deleteNode=function(e){return!(!e||!this.contains(e))&&(e.parentNode.removeChild(e),!0)},e.prototype.replaceNode=function(e,t){return!!(e&&t&&this.contains(e))&&(e.parentNode.replaceChild(t,e),!0)},e.prototype.getInlineElementAtNode=function(e){return c.getInlineElementAtNode(this.core.contentDiv,e)},e.prototype.getBlockElementAtNode=function(e){return c.getBlockElementAtNode(this.core.contentDiv,e)},e.prototype.contains=function(e){return c.contains(this.core.contentDiv,e)},e.prototype.queryElements=function(e,t,n){void 0===t&&(t=0);var o=t instanceof Function?0:t;n=t instanceof Function?t:n;var r=0==o?null:this.getSelectionRange();return c.queryElements(this.core.contentDiv,e,n,o,r)},e.prototype.collapseNodes=function(e,t,n){return c.collapseNodes(this.core.contentDiv,e,t,n)},e.prototype.isEmpty=function(e){return c.isNodeEmpty(this.core.contentDiv,e)},e.prototype.getContent=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);var n=c.getHtmlWithSelectionPath(this.core.contentDiv,t&&this.getSelectionRange());return e&&(n=this.triggerPluginEvent(7,{content:n},!0).content),this.core.inDarkMode&&(n=a.default(n)),n},e.prototype.getTextContent=function(){return c.getTextContent(this.core.contentDiv)},e.prototype.setContent=function(e,t){void 0===t&&(t=!0);var n=this.core.contentDiv,o=!1;if(n.innerHTML!=e){var r=c.setHtmlWithSelectionPath(n,e);this.select(r),o=!0}if(this.core.inDarkMode){var i=this.getDarkModeOptions(),a=u.convertContentToDarkMode(n,i&&i.onExternalContentTransform?i.onExternalContentTransform:void 0,!0);a&&(a(),o=!0)}t&&o&&this.triggerContentChangedEvent()},e.prototype.insertContent=function(e,t){if(e){var n=c.fromHtml(e,this.core.document);t&&t.insertOnNewLine&&n.length>1&&(n=[c.wrap(n)]);for(var o=0;o<n.length;o++)this.insertNode(n[o],t)}},e.prototype.getSelectionRange=function(){return this.core.api.getSelectionRange(this.core,!0)},e.prototype.hasFocus=function(){return this.core.api.hasFocus(this.core)},e.prototype.focus=function(){this.core.api.focus(this.core)},e.prototype.select=function(e,t,n,o){var r=e instanceof Range?e:c.createRange(e,t,n,o);return this.contains(r)&&this.core.api.selectRange(this.core,r)},e.prototype.getSelection=function(){return this.core.document.defaultView.getSelection()},e.prototype.saveSelectionRange=function(){this.core.cachedSelectionRange=this.core.api.getSelectionRange(this.core,!1)},e.prototype.restoreSavedRange=function(){this.select(this.core.cachedSelectionRange),this.core.cachedSelectionRange=null},e.prototype.getFocusedPosition=function(){var e=this.getSelection();if(this.contains(e&&e.focusNode))return new c.Position(e.focusNode,e.focusOffset);var t=this.getSelectionRange();return t?c.Position.getStart(t):null},e.prototype.getCursorRect=function(){var e=this.getFocusedPosition();return e&&c.getPositionRect(e)},e.prototype.getElementAtCursor=function(e,t){if(!t){var n=this.getFocusedPosition();t=n&&n.node}return t&&c.findClosestElementAncestor(t,this.core.contentDiv,e)},e.prototype.isPositionAtBeginning=function(e){return c.isPositionAtBeginningOf(e,this.core.contentDiv)},e.prototype.addDomEventHandler=function(e,t){var n=this;if(e instanceof Object){var o=Object.keys(e).map((function(t){return e[t]&&n.core.api.attachDomEvent(n.core,t,null,e[t])})).filter((function(e){return e}));return function(){return o.forEach((function(e){return e()}))}}return this.core.api.attachDomEvent(this.core,e,null,t)},e.prototype.triggerPluginEvent=function(e,t,n){var r=o({eventType:e},t);return this.core.api.triggerEvent(this.core,r,n),r},e.prototype.triggerEvent=function(e,t){void 0===t&&(t=!0),this.core.api.triggerEvent(this.core,e,t)},e.prototype.triggerContentChangedEvent=function(e,t){void 0===e&&(e="SetContent"),this.triggerPluginEvent(6,{source:e,data:t})},e.prototype.undo=function(){this.focus(),this.core.corePlugins.undo.undo()},e.prototype.redo=function(){this.focus(),this.core.corePlugins.undo.redo()},e.prototype.addUndoSnapshot=function(e,t){this.core.api.editWithUndo(this.core,e,t)},e.prototype.performAutoComplete=function(e,t){this.core.corePlugins.edit.performAutoComplete(e,t)},e.prototype.canUndo=function(){return this.core.corePlugins.undo.canUndo()},e.prototype.canRedo=function(){return this.core.corePlugins.undo.canRedo()},e.prototype.getDocument=function(){return this.core.document},e.prototype.getScrollContainer=function(){return this.core.scrollContainer},e.prototype.getCustomData=function(e,t,n){return this.core.api.getCustomData(this.core,e,t,n)},e.prototype.isInIME=function(){return this.core.corePlugins.domEvent.isInIME()},e.prototype.getDefaultFormat=function(){return this.core.defaultFormat},e.prototype.getBodyTraverser=function(e){return c.ContentTraverser.createBodyTraverser(this.core.contentDiv,e)},e.prototype.getSelectionTraverser=function(){return this.getSelectionRange()&&c.ContentTraverser.createSelectionTraverser(this.core.contentDiv,this.getSelectionRange())},e.prototype.getBlockTraverser=function(e){void 0===e&&(e=3);var t=this.getSelectionRange();return t&&c.ContentTraverser.createBlockTraverser(this.core.contentDiv,t,e)},e.prototype.getContentSearcherOfCursor=function(){var e=this.getSelectionRange();return e&&new c.PositionContentSearcher(this.core.contentDiv,c.Position.getStart(e))},e.prototype.runAsync=function(e){var t=this;(this.core.contentDiv.ownerDocument.defaultView||window).requestAnimationFrame((function(){!t.isDisposed()&&e&&e()}))},e.prototype.setEditorDomAttribute=function(e,t){null===t?this.core.contentDiv.removeAttribute(e):this.core.contentDiv.setAttribute(e,t)},e.prototype.addContentEditFeature=function(e){this.core.corePlugins.edit.addFeature(e)},e.prototype.setDarkModeState=function(e){if(this.isDarkMode()!=e){var t=this.getContent(void 0,!0);this.core.inDarkMode=e,this.core.defaultFormat=l.calculateDefaultFormat(this.core.contentDiv,this.core.defaultFormat,this.core.inDarkMode),this.setContent(t),this.triggerPluginEvent(13,{changedToDarkMode:e})}},e.prototype.isDarkMode=function(){return this.core.inDarkMode},e.prototype.getDarkModeOptions=function(){return this.core.darkModeOptions},e}();t.default=d},function(e,t,n){"use strict";var o,r;Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=i.Browser.isFirefox?((o={}).enableObjectResizing=!1,o.enableInlineTableEditing=!1,o):i.Browser.isIE?((r={}).defaultParagraphSeparator="div",r.AutoUrlDetect=!1,r):{};t.default=function(){Object.keys(a).forEach((function(e){try{document.execCommand(e,!1,a[e])}catch(e){}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(61),r=n(63),i=n(64),a=n(65),s=n(68),l=n(69),u=n(70),c=n(140),d=n(0),f=n(73),h=n(141),p=n(142),m=n(143),g=n(144),v=n(74),y=n(145),b=n(146),C=n(147);function E(e){return{attachDomEvent:(e=e||{}).attachDomEvent||c.attachDomEvent,editWithUndo:e.editWithUndo||h.editWithUndo,focus:e.focus||p.focus,getCustomData:e.getCustomData||m.getCustomData,getSelectionRange:e.getSelectionRange||g.getSelectionRange,hasFocus:e.hasFocus||v.hasFocus,insertNode:e.insertNode||y.insertNode,select:e.select||b.select,selectRange:e.selectRange||b.selectRange,triggerEvent:e.triggerEvent||C.triggerEvent}}t.default=function(e,t){var n,c={undo:t.undo||new u.default,edit:new i.default,typeInContainer:new l.default,mouseUp:new s.default,domEvent:new r.default(t.disableRestoreSelectionOnFocus),firefoxTypeAfterLink:d.Browser.isFirefox&&new a.default,copyPlugin:!d.Browser.isIE&&new o.default},h=function(e,t){return[e.typeInContainer,e.edit,e.mouseUp].concat(t||[],[e.firefoxTypeAfterLink,e.undo,e.domEvent,e.copyPlugin]).filter((function(e){return!!e}))}(c,t.plugins),p=h.filter((function(e){return e.onPluginEvent||e.willHandleEventExclusively}));return{contentDiv:e,scrollContainer:t.scrollContainer||e,document:e.ownerDocument,defaultFormat:f.calculateDefaultFormat(e,t.defaultFormat,t.inDarkMode),corePlugins:c,currentUndoSnapshot:null,customData:(n=t.customData||{},Object.keys(n).reduce((function(e,t){return e[t]={value:n[t]},e}),{})),cachedSelectionRange:null,plugins:h,eventHandlerPlugins:p,api:E(t.coreApiOverride),defaultApi:E(),inDarkMode:t.inDarkMode,darkModeOptions:t.darkModeOptions}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=1e7,i=function(){function e(e){void 0===e&&(e=r),this.maxSize=e,this.snapshots=o.createSnapshots(e)}return e.prototype.canMove=function(e){return o.canMoveCurrentSnapshot(this.snapshots,e)},e.prototype.move=function(e){return o.moveCurrentSnapsnot(this.snapshots,e)},e.prototype.addSnapshot=function(e){o.addSnapshot(this.snapshots,e)},e.prototype.clearRedo=function(){o.clearProceedingSnapshots(this.snapshots)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(71);t.attachDomEvent=function(e,t,n,r){var i=function(t){var i;(("keydown"==(i=t).type||"keypress"==i.type||"keyup"==i.type)&&o.default(t)||11==n)&&t.stopPropagation(),r&&r(t),null!=n&&e.api.triggerEvent(e,{eventType:n,rawEvent:t},!1)};return e.contentDiv.addEventListener(t,i),function(){e.contentDiv.removeEventListener(t,i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.editWithUndo=function(e,t,n){var r,i=null!==e.currentUndoSnapshot;i||(e.currentUndoSnapshot=e.corePlugins.undo.addUndoSnapshot());try{if(t){var a=e.api.getSelectionRange(e,!0);r=t(a&&o.Position.getStart(a).normalize(),a&&o.Position.getEnd(a).normalize(),e.currentUndoSnapshot),i||e.corePlugins.undo.addUndoSnapshot()}}finally{i||(e.currentUndoSnapshot=null)}if(t&&n){var s={eventType:6,source:n,data:r};e.api.triggerEvent(e,s,!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.focus=function(e){if(!(e.api.hasFocus(e)&&e.api.getSelectionRange(e,!1)||e.cachedSelectionRange&&e.api.selectRange(e,e.cachedSelectionRange,!0))){var t=o.getFirstLeafNode(e.contentDiv)||e.contentDiv;e.api.selectRange(e,o.createRange(t,0),!0)}e.cachedSelectionRange=null,e.api.hasFocus(e)||e.contentDiv.focus()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomData=function(e,t,n,o){return(e.customData[t]=e.customData[t]||{value:n?n():void 0,disposer:o}).value}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.getSelectionRange=function(e,t){var n=null;if(!t||e.api.hasFocus(e)){var r=e.document.defaultView.getSelection();if(r&&r.rangeCount>0){var i=r.getRangeAt(0);o.contains(e.contentDiv,i)&&(n=i)}}return!n&&t&&(n=e.cachedSelectionRange),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.insertNode=function(e,t,n){n=n||{position:3,insertOnNewLine:!1,updateCursor:!0,replaceSelection:!0};var r=e.contentDiv;switch(n.updateCursor&&e.api.focus(e),n.position){case 0:case 1:var i,a=0==n.position,s=o.getFirstLastBlockElement(r,a);if(s){var l=a?s.getStartNode():s.getEndNode();i=n.insertOnNewLine||3==l.nodeType||o.isVoidHtmlElement(l)?l.parentNode.insertBefore(t,a?l:l.nextSibling):l.insertBefore(t,a?l.firstChild:null)}else i=r.appendChild(t);i&&n.insertOnNewLine&&!o.isBlockElement(i)&&o.wrap(i);break;case 2:var u=r.appendChild(t);u&&n.insertOnNewLine&&!o.isBlockElement(u)&&o.wrap(u);break;case 5:case 3:var c=function(e,t){var n=e.api.getSelectionRange(e,!0),o=null;return 5==t.position?(o=n,n=t.range):n&&(o=n.cloneRange()),{range:n,rangeToRestore:o}}(e,n),d=c.range,f=c.rangeToRestore;if(!d)return;n.replaceSelection&&!d.collapsed&&d.deleteContents();var h=o.Position.getStart(d),p=void 0;h=n.insertOnNewLine&&(p=o.getBlockElementAtNode(r,h.normalize().node))?new o.Position(p.getEndNode(),-3):o.adjustNodeInsertPosition(r,t,h);var m=11==t.nodeType?t.lastChild:t;(d=o.createRange(h)).insertNode(t),n.updateCursor&&m&&(f=o.createRange(new o.Position(m,-3).normalize())),e.api.selectRange(e,f);break;case 4:e.contentDiv.parentNode.insertBefore(t,r.nextSibling)}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(74);t.selectRange=function(e,t,n){var i,a=!0;if(!o.contains(e.contentDiv,t)||!(i=e.document.defaultView.getSelection()))return!1;if(i.rangeCount>0)try{var s=void 0;(n||o.Browser.isEdge)&&(s=1==i.rangeCount?i.getRangeAt(0):null)&&s.startContainer==t.startContainer&&s.startOffset==t.startOffset&&s.endContainer==t.endContainer&&s.endOffset==t.endOffset?a=!1:i.removeAllRanges()}catch(e){}return a&&i.addRange(t),r.hasFocus(e)||(e.cachedSelectionRange=t),t.collapsed&&e.corePlugins.domEvent.restorePendingFormatState(),!0},t.select=function(e,t,n,r,i){var a=t instanceof Range?t:o.createRange(t,n,r,i);return e.api.selectRange(e,a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerEvent=function(e,t,n){!n&&e.eventHandlerPlugins.some((function(e){return function(e,t){if(t.onPluginEvent&&t.willHandleEventExclusively&&t.willHandleEventExclusively(e))return t.onPluginEvent(e),!0;return!1}(t,e)}))||e.eventHandlerPlugins.forEach((function(e){e.onPluginEvent&&e.onPluginEvent(t)}))}},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var r=((o={keypress:1,keydown:0,keyup:2,mousedown:4})[n(0).Browser.isIE?"textinput":"input"]=11,o);t.default=function(e){return Object.keys(r).map((function(t){return e.api.attachDomEvent(e,t,r[t])}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertContentToDarkMode=function(e,t,n){var o=[];return e instanceof HTMLElement?(o=Array.prototype.slice.call(e.getElementsByTagName("*")),n||o.unshift(e)):e instanceof DocumentFragment&&(o=Array.prototype.slice.call(e.querySelectorAll("*"))),o.length>0?function(){o.forEach((function(e){t?t(e):(e.style.color=null,e.style.backgroundColor=null)}))}:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(37),r="GET_ELEMENT_AT_CURSOR_";t.default=function(e,t,n){return o.default(t,r+n,(function(){return e.getElementAtCursor(n)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0).Browser.isMac?function(e){return e.metaKey}:function(e){return e.ctrlKey};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=n(0);t.FONT_SIZES=[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72];var i=1,a=1e3;function s(e,t,n){e=1==t?Math.floor(e):Math.ceil(e);var o=n[n.length-1];if(e<=n[0])e=Math.max(e+t,i);else if(e>o||e==o&&1==t)e/=10,e=1==t?Math.floor(e):Math.ceil(e),e=Math.min(Math.max(10*(e+t),o),a);else if(1==t){for(var r=0;r<n.length;r++)if(e<n[r]){e=n[r];break}}else for(r=n.length-1;r>=0;r--)if(e>n[r]){e=n[r];break}return e}t.default=function(e,n,i){void 0===i&&(i=t.FONT_SIZES);var a=0==n?1:-1;o.default(e,(function(e){var t=parseFloat(r.getComputedStyle(e,"font-size"));e.style.fontSize=s(t,a,i)+"pt","normal"!=r.getComputedStyle(e,"line-height")&&(e.style.lineHeight="normal")}))},t.getNewFontSize=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(75),r=n(0);function i(e,t){return e.indexOf(r.getTagOfNode(t))<0}t.TAGS_TO_UNWRAP="B,I,U,STRONG,EM,SUB,SUP,STRIKE,FONT,CENTER,H1,H2,H3,H4,H5,H6,UL,OL,LI,SPAN,P,BLOCKQUOTE,CODE,S,PRE".split(","),t.TAGS_TO_STOP_UNWRAP=["TD","TH","TR","TABLE","TBODY","THEAD"],t.ATTRIBUTES_TO_PRESERVE=["href"],t.default=function(e,n,a,s){void 0===n&&(n=t.TAGS_TO_UNWRAP),void 0===a&&(a=t.TAGS_TO_STOP_UNWRAP),void 0===s&&(s=t.ATTRIBUTES_TO_PRESERVE),e.focus(),e.addUndoSnapshot((function(t,l){var u=[{}],c=a.join(",");o.default(e,(function(t){var n=u[u.length-1],o=e.getElementAtCursor(c,t);o!=n.td&&n.first&&u.push(n={}),n.td=o,n.first=n.first||t,n.last=t})),u.filter((function(e){return e.first})).forEach((function(t){var o=e.collapseNodes(t.first,t.last,!0);if(i(a,o[0]))for(;e.contains(o[0].parentNode)&&i(a,o[0].parentNode);)o=[r.splitBalancedNodeRange(o)];if(o.forEach((function(e){return function e(t,n,o,a){if(1!=t.nodeType||"BR"==r.getTagOfNode(t))return!1;var s=[].slice.call(t.childNodes).map((function(t){return e(t,n,o,a)})).reduce((function(e,t){return e&&t}),!0);if(!i(o,t))return!1;var l=r.isBlockElement(t);n.indexOf(r.getTagOfNode(t))>=0||s?(l&&!s&&r.wrap(t),r.unwrap(t)):function(e,t){for(var n=0,o=[].slice.call(e.attributes);n<o.length;n++){var r=o[n];t.indexOf(r.name.toLowerCase())<0&&0!=r.name.indexOf("data-")&&e.removeAttribute(r.name)}}(t,a);return l}(e,n,a,s)})),t.td){var l=t.td.getAttribute("style")||"",u=l.split(";");(l=(u=u.filter((function(e){return 0==e.trim().toLowerCase().indexOf("border")}))).join(";"))?t.td.setAttribute("style",l):t.td.removeAttribute("style")}})),e.select(t,l)}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),r=n(76),i=n(77),a=n(78),s=n(79),l=n(80),u=n(81),c=n(82),d=["font","text-decoration","color","background"];t.default=function(e){e.focus(),e.addUndoSnapshot((function(){o.default(e,"removeFormat"),e.queryElements("[class]",1,(function(e){return e.removeAttribute("class")}));var t=e.getDefaultFormat(),n=0===Object.keys(t).length;e.queryElements("[style]",2,(function(e){d.forEach((function(t){return e.style.removeProperty(t)})),n&&""===e.getAttribute("style")&&e.removeAttribute("style")})),n||(t.fontFamily&&i.default(e,t.fontFamily),t.fontSize&&a.default(e,t.fontSize),t.textColor&&(t.textColors?s.default(e,t.textColors):s.default(e,t.textColor)),t.backgroundColor&&(t.backgroundColors?r.default(e,t.backgroundColors):r.default(e,t.backgroundColor)),t.bold&&l.default(e),t.italic&&u.default(e),t.underline&&c.default(e))}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=/^[a-zA-Z]+:/i,i=/^[\w.%+-]+@/i,a=/^ftp\./i,s="istemptitle";function l(e){return e.queryElements("a[href]",1)[0]}function u(e,t){t&&e.textContent!=t&&(e.textContent=t)}t.default=function(e,t,n,c){e.focus();var d=t?t.trim():"";if(d){var f=o.matchLink(d),h=f?f.normalizedUrl:function(e){if(!e)return e;var t="";return e.search(r)<0&&(t=0==e.search(i)?"mailto:":0==e.search(a)?"ftp://":"http://"),t+e}(d),p=f?f.originalUrl:d;e.addUndoSnapshot((function(){var t=e.getSelectionRange(),o=null;return t&&t.collapsed?(o=l(e))?(o.href=h,u(o,c)):((o=e.getDocument().createElement("A")).textContent=c||p,o.href=h,e.insertNode(o)):(e.getDocument().execCommand("createLink",!1,h),u(o=l(e),c)),n&&o&&(o.removeAttribute(s),o.title=n),o}),"CreateLink")}}},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(0),a=n(0);function s(e,t){var n=i.getTagOfNode(r.cacheGetElementAtCursor(e,t,"OL,UL")),o=i.getTagOfNode(r.cacheGetElementAtCursor(e,t,"H1,H2,H3,H4,H5,H6"));return{isBullet:"UL"==n,isNumbering:"OL"==n,headerLevel:o&&parseInt(o[1])||0,canUnlink:!!e.queryElements("a[href]",1)[0],canAddImageAltText:!!e.queryElements("img",1)[0],isBlockQuote:!!e.queryElements("blockquote",1)[0]}}function l(e){var t=e.getSelectionRange(),n=t&&i.Position.getStart(t).normalize().node,o=n?i.getComputedStyles(n):[];return{fontName:o[0],fontSize:o[1],textColor:o[2],backgroundColor:o[3]}}t.getElementBasedFormatState=s,t.getStyleBasedFormatState=l,t.default=function(e,t){return o({},a.getPendableFormatState(e.getDocument()),s(e,t),l(e),{canUndo:e.canUndo(),canRedo:e.canRedo()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=new FileReader;n.onload=function(t){e.isDisposed()||e.addUndoSnapshot((function(){var n=e.getDocument().createElement("img");n.src=t.target.result,n.style.maxWidth="100%",e.insertNode(n)}),"Format")},n.readAsDataURL(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);function r(e){return e<=4?"120px":e<=6?"100px":"70px"}t.default=function(e,t,n,i){var a=e.getDocument(),s=a.createDocumentFragment(),l=a.createElement("table");s.appendChild(l),l.cellSpacing="0",l.cellPadding="1";for(var u=0;u<n;u++){var c=a.createElement("tr");l.appendChild(c);for(var d=0;d<t;d++){var f=a.createElement("td");c.appendChild(f),f.appendChild(a.createElement("br")),f.style.width=r(t)}}e.focus(),e.addUndoSnapshot((function(){var t=new o.VTable(l);t.applyFormat(i||{bgColorEven:"#FFF",bgColorOdd:"#FFF",topBorderColor:"#ABABAB",bottomBorderColor:"#ABABAB",verticalBorderColor:"#ABABAB"}),t.writeBack(),e.insertNode(s),e.runAsync((function(){return e.select(new o.Position(l,0).normalize())}))}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default=function(e,t){var n=e.getElementAtCursor("TD,TH");n&&e.addUndoSnapshot((function(r,i){var a=new o.VTable(n);a.edit(t),a.writeBack(),e.focus(),e.select(r,i)||e.select(e.contains(n)?n:a.getCurrentTd())}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default=function(e,t,n){(n=n||e.getElementAtCursor("TABLE"))&&e.addUndoSnapshot((function(r,i){var a=new o.VTable(n);a.applyFormat(t),a.writeBack(),e.focus(),e.select(r,i)}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default=function(e){e.focus(),e.addUndoSnapshot((function(t,n){e.queryElements("a[href]",1,o.unwrap),e.select(t,n)}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,r){if(!t||!n)return!1;var i;if(i="string"==typeof t?(r=r||e.getContentSearcherOfCursor())&&r.getRangeFromText(t,o):t){var a=e.getSelectionRange();return a.collapsed&&i.endContainer==a.startContainer&&i.endOffset==a.startOffset&&(o=!0),e.insertNode(n,{position:5,updateCursor:o,replaceSelection:!0,insertOnNewLine:!1,range:i}),!0}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9);t.default=function(e,t){var n="justifyLeft",r="left";1==t?(n="justifyCenter",r="center"):2==t&&(n="justifyRight",r="right"),e.addUndoSnapshot((function(){o.default(e,n),e.queryElements("[align]",1,(function(e){return e.style.textAlign=r}))}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(75);t.default=function(e,t){e.focus(),e.addUndoSnapshot((function(n,r){o.default(e,(function(e){e.setAttribute("dir",0==t?"ltr":"rtl"),e.style.textAlign=0==t?"left":"right"})),e.select(n,r)}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.focus(),e.addUndoSnapshot((function(){e.queryElements("img",1,(function(e){return e.setAttribute("alt",t)}))}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(38);t.default=function(e,t){var n=0==t?"indent":"outdent";e.addUndoSnapshot((function(){var t;return e.focus(),e.getElementAtCursor("OL,UL")?t=o.default(e,n):(e.getDocument().execCommand(n,!1,null),e.queryElements("BLOCKQUOTE",1,(function(e){t=t||e,e.style.marginTop="0px",e.style.marginBottom="0px"}))),t}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(38);t.default=function(e){e.focus(),e.addUndoSnapshot((function(){return o.default(e,"insertUnorderedList")}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(38);t.default=function(e){e.focus(),e.addUndoSnapshot((function(){return o.default(e,"insertOrderedList")}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),r="blockquote",i=function(e){e.style.borderLeft="3px solid",e.style.borderColor="#C8C8C8",e.style.paddingLeft="10px",e.style.color="#666666"};t.default=function(e,t){o.default(e,r,t||i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),r=n(0),i="pre",a="code",s="CODE";function l(e){var t=r.wrap(e,a);return r.wrap(t,i)}function u(e){if(!e)return null;var t=e.childNodes[0];return 1==e.childNodes.length&&r.getTagOfNode(t)==s&&r.unwrap(t),r.unwrap(e)}t.default=function(e,t){o.default(e,i,t,l,u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9);t.default=function(e){o.default(e,"strikeThrough")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9);t.default=function(e){o.default(e,"subscript")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9);t.default=function(e){o.default(e,"superscript")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default=function(e,t){t=Math.min(Math.max(Math.round(t),0),6),e.addUndoSnapshot((function(){e.focus();var n=!1;if(e.queryElements("H1,H2,H3,H4,H5,H6",1,(function(t){n||(e.getDocument().execCommand("formatBlock",!1,"<DIV>"),n=!0);for(var o=e.getDocument().createElement("div");t.firstChild;)o.appendChild(t.firstChild);e.replaceNode(t,o)})),t>0){for(var r=e.getSelectionTraverser(),i=r?r.currentInlineElement:null;i;){var a=o.findClosestElementAncestor(i.getContainerNode());a&&(a.style.fontSize=""),i=r.getNextInlineElement()}e.getDocument().execCommand("formatBlock",!1,"<H"+t+">")}}),"Format")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(1),i=function(){function e(e,t,n){var o=this;void 0===e&&(e=function(e){return e}),this.getTooltipCallback=e,this.target=t,this.onLinkClick=n,this.onMouse=function(e){var t=o.editor.getElementAtCursor("a[href]",e.target),n=o.tryGetHref(t);n&&o.editor.setEditorDomAttribute("title","mouseover"==e.type?o.getTooltipCallback(n,t):null)}}return e.prototype.getName=function(){return"Hyperlink"},e.prototype.initialize=function(e){this.editor=e,this.disposer=this.getTooltipCallback&&e.addDomEventHandler({mouseover:this.onMouse,mouseout:this.onMouse})},e.prototype.dispose=function(){this.disposer&&(this.disposer(),this.disposer=null),this.editor=null},e.prototype.onPluginEvent=function(e){if(5==e.eventType){var t=this.editor.getElementAtCursor("A",e.rawEvent.srcElement);if(t){if(this.onLinkClick&&!1!==this.onLinkClick(t,e.rawEvent))return;var n=void 0;if(!o.Browser.isFirefox&&(n=this.tryGetHref(t))&&r.isCtrlOrMetaPressed(e.rawEvent)&&0===e.rawEvent.button)try{var i=this.target||"_blank";this.editor.getDocument().defaultView.open(n,i)}catch(e){}}}},e.prototype.tryGetHref=function(e){try{return e?e.href:null}catch(e){}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(85),r=n(177),i=n(178),a=n(179),s=n(180),l=n(181),u=n(182),c=n(183),d=function(){function e(e){this.featureSet=e}return e.prototype.getName=function(){return"ContentEdit"},e.prototype.initialize=function(e){var t=this;this.editor=e,this.getFilteredFeatures().forEach((function(e){return t.editor.addContentEditFeature(e)}))},e.prototype.dispose=function(){this.editor=null},e.prototype.getFilteredFeatures=function(){var e=this.featureSet||o.getDefaultContentEditFeatures(),t={indentWhenTab:u.IndentWhenTab,outdentWhenShiftTab:u.OutdentWhenShiftTab,outdentWhenBackspaceOnEmptyFirstLine:u.OutdentWhenBackOn1stEmptyLine,outdentWhenEnterOnEmptyLine:u.OutdentWhenEnterOnEmptyLine,mergeInNewLineWhenBackspaceOnFirstChar:u.MergeInNewLine,unquoteWhenBackspaceOnEmptyFirstLine:c.UnquoteWhenBackOnEmpty1stLine,unquoteWhenEnterOnEmptyLine:c.UnquoteWhenEnterOnEmptyLine,tabInTable:l.TabInTable,upDownInTable:l.UpDownInTable,insertLineBeforeStructuredNodeFeature:a.InsertLineBeforeStructuredNodeFeature,autoBullet:u.AutoBullet,autoLink:r.AutoLink,unlinkWhenBackspaceAfterLink:r.UnlinkWhenBackspaceAfterLink,defaultShortcut:i.DefaultShortcut,noCycleCursorMove:s.NoCycleCursorMove,smartOrderedList:u.getSmartOrderedList(e.smartOrderedListStyles)};return Object.keys(t).filter((function(t){return e[t]})).map((function(e){return t[e]}))},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(3),i=n(1),a=/[.+=\s:;"',>]+$/i,s=5;function l(e,t){return 0==e.eventType||6==e.eventType&&"Paste"==e.source?i.cacheGetEventData(e,"LINK_DATA",(function(){var n=6==e.eventType&&"Paste"==e.source&&e.data,r=o.matchLink((n.text||"").trim()),l=i.cacheGetContentSearcher(e,t);if(r&&l.getRangeFromText(r.originalUrl,!1))return r;var u=l&&l.getWordBefore();if(u&&u.length>s){var c=(u.match(a)||[])[0]||"",d=u.substring(0,u.length-c.length);return["()","{}","[]"].forEach((function(e){d[d.length-1]==e[1]&&d.indexOf(e[0])<0&&(d=d.substr(0,d.length-1))})),o.matchLink(d)}return null})):null}t.AutoLink={keys:[13,32,2048],shouldHandleEvent:l,handleEvent:function(e,t){var n=t.getDocument().createElement("a"),o=l(e,t),a=t.getContentSearcherOfCursor();n.textContent=o.originalUrl,n.href=o.normalizedUrl,t.runAsync((function(){t.performAutoComplete((function(){return r.replaceWithNode(t,o.originalUrl,n,!1,a),i.clearContentSearcherCache(e),n}),"AutoLink")}))}},t.UnlinkWhenBackspaceAfterLink={keys:[8],shouldHandleEvent:function(e,t){return i.cacheGetContentSearcher(e,t).getInlineElementBefore()instanceof o.LinkInlineElement},handleEvent:function(e,t){e.rawEvent.preventDefault(),r.removeLink(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(3);function a(e,t,n){return{winKey:e,macKey:t,action:n}}var s=[a(322,578,i.toggleBold),a(329,585,i.toggleItalic),a(341,597,i.toggleUnderline),a(346,602,(function(e){return e.undo()})),a(345,1626,(function(e){return e.redo()})),a(446,702,i.toggleBullet),a(447,703,i.toggleNumbering),a(1470,1726,(function(e){return i.changeFontSize(e,0)})),a(1468,1724,(function(e){return i.changeFontSize(e,1)}))];function l(e){return r.cacheGetEventData(e,"DEFAULT_SHORT_COMMAND",(function(){var t=e.rawEvent,n=0!=e.eventType||t.altKey?0:t.which|(t.metaKey&&512)|(t.shiftKey&&1024)|(t.ctrlKey&&256);return n&&s.filter((function(e){return(o.Browser.isMac?e.macKey:e.winKey)==n}))[0]}))}t.DefaultShortcut={allowFunctionKeys:!0,keys:[66,73,85,89,90,188,190,191],shouldHandleEvent:l,handleEvent:function(e,t){var n=l(e);n&&(n.action(t),e.rawEvent.preventDefault(),e.rawEvent.stopPropagation())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(0),i=r.Browser.isEdge?"<div><span><br></span></div>":"<div><br></div>",a={TD:"TABLE",TH:"TABLE",LI:"OL,UL"},s=Object.keys(a).join(",");function l(e,t){return o.cacheGetEventData(e,"FIRST_STRUCTURE",(function(){var n=e.rawEvent.shiftKey?null:t.getElementAtCursor(s);if(n){var o=t.getSelectionRange();if(o&&o.collapsed&&r.isPositionAtBeginningOf(r.Position.getStart(o),n)&&!t.getBodyTraverser(n).getPreviousBlockElement())return t.getElementAtCursor(a[r.getTagOfNode(n)])}return null}))}t.InsertLineBeforeStructuredNodeFeature={keys:[13],shouldHandleEvent:l,handleEvent:function(e,t){var n=l(e,t),o=r.fromHtml(i,t.getDocument())[0];t.addUndoSnapshot((function(){n.parentNode.insertBefore(o,n),"TABLE"==r.getTagOfNode(n)&&t.select(new r.Position(o,0).normalize())})),e.rawEvent.preventDefault()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.NoCycleCursorMove={keys:[37,39],allowFunctionKeys:!0,shouldHandleEvent:function(e,t,n){var r,i;if(!(n&&(r=t.getSelectionRange())&&r.collapsed&&(i=o.Position.getStart(r))&&t.isPositionAtBeginning(i)))return!1;var a=o.isRtl(i.element),s=e.rawEvent;return!a&&37==s.which||a&&39==s.which},handleEvent:function(e){e.rawEvent.preventDefault()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(0);function i(e,t){return o.cacheGetEventData(e,"TABLECELL_FOR_TABLE_FEATURES",(function(){var e=t.getFocusedPosition(),n=t.getElementAtCursor("TD,TH,LI",e.node);return"LI"==r.getTagOfNode(n)?null:n}))}t.TabInTable={keys:[9],shouldHandleEvent:i,handleEvent:function(e,t){for(var n=e.rawEvent.shiftKey,o=i(e,t),a=new r.VTable(o),s=n?-1:1,l=a.row,u=a.col+s;;u+=s){if(u<0||u>=a.cells[l].length){if((l+=s)<0||l>=a.cells.length){t.select(a.table,n?-2:-3);break}u=n?a.cells[l].length-1:0}var c=a.getCell(l,u);if(c.td){t.select(c.td,0);break}}e.rawEvent.preventDefault()}},t.UpDownInTable={keys:[38,40],shouldHandleEvent:i,handleEvent:function(e,t){for(var n=i(e,t),o=new r.VTable(n),a=38==e.rawEvent.which,s=a?-1:1,l=null,u=e.rawEvent.shiftKey,c=t.getSelection(),d=c.anchorNode,f=c.anchorOffset,h=o.row;h>=0&&h<o.cells.length;h+=s){var p=o.getCell(h,o.col);if(p.td&&p.td!=n){l=p.td;break}}t.runAsync((function(){var e=t.getElementAtCursor();if(r.contains(o.table,e)&&!r.contains(n,e,!0)){var i=l?new r.Position(l,0):new r.Position(o.table,a?-2:-3);u?(i=1==i.node.nodeType&&r.isVoidHtmlElement(i.node)?new r.Position(i.node,i.isAtEnd?-3:-2):i,t.getSelection().setBaseAndExtent(d,f,i.node,i.offset)):t.select(i)}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(1),i=n(0);function a(e,t){var n=s(e,t);if(n){var r=n[0],a=i.getTagOfNode(r);"UL"==a?o.toggleBullet(t):"OL"==a&&o.toggleNumbering(t),t.focus(),e.rawEvent.preventDefault()}}function s(e,t){var n=r.cacheGetElementAtCursor(t,e,"LI,TABLE"),o=n&&"LI"==i.getTagOfNode(n)&&t.getElementAtCursor("UL,OL",n);return o?[o,n]:null}t.IndentWhenTab={keys:[9],shouldHandleEvent:function(e,t){return!e.rawEvent.shiftKey&&s(e,t)},handleEvent:function(e,t){o.setIndentation(t,0),e.rawEvent.preventDefault()}},t.OutdentWhenShiftTab={keys:[9],shouldHandleEvent:function(e,t){return e.rawEvent.shiftKey&&s(e,t)},handleEvent:function(e,t){o.setIndentation(t,1),e.rawEvent.preventDefault()}},t.MergeInNewLine={keys:[8],shouldHandleEvent:function(e,t){var n=r.cacheGetElementAtCursor(t,e,"LI"),o=t.getSelectionRange();return n&&o&&i.isPositionAtBeginningOf(i.Position.getStart(o),n)},handleEvent:function(e,t){r.cacheGetElementAtCursor(t,e,"LI").previousSibling?t.runAsync((function(){var e=t.getDocument().createElement("BR");t.insertNode(e),t.select(e,-3)})):a(e,t)}},t.OutdentWhenBackOn1stEmptyLine={keys:[8],shouldHandleEvent:function(e,t){var n=r.cacheGetElementAtCursor(t,e,"LI");return n&&i.isNodeEmpty(n)&&!n.previousSibling},handleEvent:a},t.OutdentWhenEnterOnEmptyLine={keys:[13],shouldHandleEvent:function(e,t){var n=r.cacheGetElementAtCursor(t,e,"LI");return!e.rawEvent.shiftKey&&n&&i.isNodeEmpty(n)},handleEvent:function(e,t){t.performAutoComplete((function(){return a(e,t)}))}},t.AutoBullet={keys:[32],shouldHandleEvent:function(e,t){if(!s(e,t)){var n=r.cacheGetContentSearcher(e,t),o=n.getSubStringBefore(3);return["*","-","1."].indexOf(o)>=0&&!n.getNearestNonTextInlineElement()}return!1},handleEvent:function(e,t){t.runAsync((function(){t.performAutoComplete((function(){var e=t.getContentSearcherOfCursor(),n=e.getSubStringBefore(3),r=e.getRangeFromText(n,!0);r&&r.deleteContents();var a=t.getDocument().createElement("BR");(i.Browser.isChrome||i.Browser.isSafari||i.Browser.isIE11OrGreater)&&t.insertNode(a),0==n.indexOf("1.")?o.toggleNumbering(t):o.toggleBullet(t),t.deleteNode(a)}))}))}},t.getSmartOrderedList=function(e){return{keys:[2048],shouldHandleEvent:function(e,t){return e.data instanceof HTMLOListElement},handleEvent:function(t,n){var o=t.data,r=n.getElementAtCursor("OL",o.parentNode);if(r){var i=e&&e.length>0?e:["decimal"];o.style.listStyle=i[(i.indexOf(r.style.listStyle)+1)%i.length]}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(0),i="BLOCKQUOTE",a=[i,"LI","TD","TH"].join(",");function s(e,t){return o.cacheGetEventData(e,"QUOTE_CHILD",(function(){var e=t.getElementAtCursor(a);if(e&&r.getTagOfNode(e)==i){var n=t.getFocusedPosition(),o=n&&t.getBlockElementAtNode(n.normalize().node);if(o){var s=o.getStartNode()==e?o.getStartNode():o.collapseToSingleElement();return r.isNodeEmpty(s)?s:null}}return null}))}function l(e,t){t.addUndoSnapshot((function(){var n,o=s(e,t);r.getTagOfNode(o)==i&&(o=r.wrap([].slice.call(o.childNodes))),n=r.splitBalancedNodeRange(o),r.unwrap(n),t.select(o,0)})),e.rawEvent.preventDefault()}t.UnquoteWhenBackOnEmpty1stLine={keys:[8],shouldHandleEvent:function(e,t){var n=s(e,t);return n&&r.isNodeEmpty(n)&&!n.previousSibling},handleEvent:l},t.UnquoteWhenEnterOnEmptyLine={keys:[13],shouldHandleEvent:function(e,t){var n=s(e,t);return!e.rawEvent.shiftKey&&n&&r.isNodeEmpty(n)},handleEvent:function(e,t){return t.performAutoComplete((function(){return l(e,t)}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(185),r=n(186),i=n(195),a=n(3),s=n(3),l=n(12),u=n(0),c=function(){function e(e,t){var n=this;this.onPaste=function(e){o.default(e,n.editor,(function(e){n.pasteOriginal({snapshotBeforePaste:null,originalFormat:n.getCurrentFormat(),types:e.types,image:e.image,text:e.text,rawHtml:e.html,html:e.html?n.sanitizeHtml(e.html):i.default(e.text)})}))},this.applyFormatting=function(e,t){return function(n){u.applyFormat(n,e,t)}},this.sanitizer=new l.HtmlSanitizer({attributeCallbacks:t})}return e.prototype.getName=function(){return"Paste"},e.prototype.initialize=function(e){this.editor=e,this.pasteDisposer=e.addDomEventHandler("paste",this.onPaste)},e.prototype.dispose=function(){this.pasteDisposer(),this.pasteDisposer=null,this.editor=null},e.prototype.pasteOriginal=function(e){this.paste(e,this.detectPasteOption(e))},e.prototype.pasteText=function(e){this.paste(e,1)},e.prototype.pasteAndMergeFormat=function(e){this.paste(e,this.detectPasteOption(e),!0)},e.prototype.detectPasteOption=function(e){return e.text||!e.image?0:2},e.prototype.paste=function(e,t,n){var o=this.editor.getDocument(),r=o.createDocumentFragment();if(0==t)for(var i=e.html,a=0,s=u.fromHtml(i,o);a<s.length;a++){var l=s[a];n&&this.applyToElements(l,this.applyFormatting(e.originalFormat,this.editor.isDarkMode())),r.appendChild(l)}var c=this.editor.triggerPluginEvent(8,{clipboardData:e,fragment:r,pasteOption:t},!0);this.internalPaste(c)},e.prototype.internalPaste=function(e){var t=this,n=e.clipboardData,o=e.fragment,r=e.pasteOption;this.editor.focus(),this.editor.addUndoSnapshot((function(){switch(null==n.snapshotBeforePaste?n.snapshotBeforePaste=t.editor.getContent(!1,!0):t.editor.setContent(n.snapshotBeforePaste),r){case 0:t.editor.insertNode(o);break;case 1:var e=i.default(n.text);t.editor.insertContent(e);break;case 2:s.insertImage(t.editor,n.image)}return n}),"Paste")},e.prototype.applyToElements=function(e,t){for(var n=u.getFirstLeafNode(e),o=[];n;)3==n.nodeType&&n.parentNode&&o.indexOf(n.parentNode)<0&&o.push(n.parentNode),n=u.getNextLeafSibling(e,n);o.push(e);for(var r=0,i=o;r<i.length;r++){t(i[r])}},e.prototype.getCurrentFormat=function(){var e=a.getFormatState(this.editor);return e?{fontFamily:e.fontName,fontSize:e.fontSize,textColor:e.textColor,backgroundColor:e.backgroundColor,bold:e.isBold,italic:e.isItalic,underline:e.isUnderline}:{}},e.prototype.sanitizeHtml=function(e){var t=l.htmlToDom(e,!0,r.default);if(t&&t.body){this.sanitizer.convertGlobalCssToInlineCss(t);var n=this.editor.getSelectionRange(),o=n&&u.Position.getStart(n).normalize().element,i=l.getInheritableStyles(o);return this.sanitizer.sanitize(t.body,i),t.body.innerHTML}return""},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r='<div contenteditable style="width: 1px; height: 1px; overflow: hidden; position: fixed; top: 0; left; 0; -webkit-user-select: text"></div>';t.default=function(e,t,n){o.extractClipboardEvent(e,(function(e){void 0===e.html?function(e,t){var n=e.getSelectionRange(),i=function(e){var t=e.getCustomData("PasteDiv",(function(){var t=o.fromHtml(r,e.getDocument())[0];return e.insertNode(t,{position:4,updateCursor:!1,replaceSelection:!1,insertOnNewLine:!1}),t}),(function(e){e.parentNode.removeChild(e)}));return t.style.display="",t}(e);i.focus(),e.runAsync((function(){e.select(n),t(i.innerHTML),i.style.display="none",i.innerHTML=""}))}(t,(function(t){e.html=t,n(e)})):n(e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(187),r=n(188),i=n(192),a=n(0),s=n(12),l="xmlns:w",u="urn:schemas-microsoft-com:office:word",c="xmlns:x",d="urn:schemas-microsoft-com:office:excel",f=/<\/\s*td\s*>((?!<\/\s*tr\s*>)[\s\S])*$/i,h=/<\/\s*tr\s*>((?!<\/\s*table\s*>)[\s\S])*$/i,p=/<tr[^>]*>[^<]*/i,m=/<table[^>]*>[^<]*/i;t.default=function(e,t){var n=s.splitWithFragment(t),g=n[0],v=n[1],y=e&&e.body&&e.querySelector("html");if("HTML"==a.getTagOfNode(y))if(y.getAttribute(l)==u)e.body.innerHTML=g,r.default(e);else if(i.isWordOnlineWithList(y))i.default(e);else if(y.getAttribute(c)==d){if(g.match(f)){var b=v.match(p);g=(b?b[0]:"<TR>")+g+"</TR>"}if(g.match(h)){var C=v.match(m);g=(C?C[0]:"<TABLE>")+g+"</TABLE>"}e.body.innerHTML=g,o.default(e)}else e.body.innerHTML=g}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(12);t.default=function(e){var t=new o.HtmlSanitizer({styleCallbacks:{border:function(e,t){return"none"!=e||"none"!=t.style.border}},additionalAllowAttributes:["class"]});t.sanitize(e.body);var n=e.createElement("style");e.body.appendChild(n),n.innerHTML="td {border: solid 1px #d4d4d4}",t.convertGlobalCssToInlineCss(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(189),r=n(190),i=n(12),a=n(191);t.default=function(e){var t;new i.HtmlSanitizer({elementCallbacks:(t={},t["O:P"]=function(e){return"&nbsp;"==e.innerHTML},t),additionalAllowAttributes:["class"]}).sanitize(e.body);var n=o.createWordConverter(),s=e.querySelectorAll("p");s.length>0&&(n.wordConverterArgs=r.createWordConverterArguments(s),a.processNodesDiscovery(n)&&a.processNodeConvert(n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(86);t.createWordConverter=function(){return{nextUniqueId:1,numBulletsConverted:0,numNumberedConverted:0,wordConverterArgs:null,customData:o.createCustomData()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(87);t.createWordConverterArguments=function(e){return{nodes:e,currentIndex:0,lists:{},listItems:[],currentListIdsByLevels:[o.createLevelLists()],lastProcessedItem:null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(87),r=n(86),i=n(0),a=5,s="UniqueListId",l="mso-list",u=/[\n|\r]/gi;function c(e,t,n,o){var a=function e(t,n,o){var r=null;var a;1==n?a=g(t):(r=e(t,n-1,null),a=r.lastChild);if(a&&1==a.nodeType){var s=i.getTagOfNode(a);if("UL"==s||"OL"==s)return a}var l=t.ownerDocument.createElement(o?o.tagName:"UL");1==n?t.parentNode.insertBefore(l,t):r.appendChild(l);return l}(t,n.level,o),l=r.getObject(e.customData,a,s);if(l&&l!=n.uniqueListId||!l&&a.firstChild){var u=t.ownerDocument.createElement(o.tagName);a.parentNode.insertBefore(u,a.nextSibling),a=u}return r.setObject(e.customData,a,s,n.uniqueListId),function(e,t,n){if(n.tagName!=i.getTagOfNode(t)){var o=t.ownerDocument.createElement(n.tagName);for(r.setObject(e.customData,o,s,r.getObject(e.customData,t,s));t.firstChild;)o.appendChild(t.firstChild);t.parentNode.insertBefore(o,t),t.parentNode.removeChild(t),t=o}return t}(e,a,o)}function d(e,t){for(var n=[],o=e.firstChild;o;o=o.nextSibling)1==o.nodeType&&t>1&&d(o,t-1),(b(o=m(o,!0))||y(o))&&n.push(o);n.forEach((function(t){return e.removeChild(t)}))}function f(e){if(1==e.nodeType){var t=C(e,l);if(t&&t.length>0)try{var n=t.split(" ");if(3==n.length)return{level:parseInt(n[1].substr("level".length)),wordListId:t,originalNode:e,uniqueListId:0}}catch(e){}}return null}function h(e){return["o","","","-"].indexOf(e)>=0}function p(e,t){for(var n=null,o=e.firstChild;!n&&o;)y(o=m(o,!0))?0==(n=o.textContent.trim()).length&&(n="o"):1==o.nodeType&&t>1&&(n=p(o,t-1)),o=o.nextSibling;return n}function m(e,t){if(8==e.nodeType){var n=e.data;if(n&&"[if !supportlists]"==n.trim().toLowerCase()){for(var o=e,r=null,i=0;i<4&&(o=v(o));i++)if(8==o.nodeType&&(n=o.data)&&"[endif]"==n.trim().toLowerCase()){r=o;break}if(r){var a=e.ownerDocument.createElement("span");for(a.setAttribute("style","mso-list: ignore"),o=v(e);o!=r;)o=o.nextSibling,a.appendChild(o.previousSibling);r.parentNode.insertBefore(a,r),t&&(e.parentNode.removeChild(e),r.parentNode.removeChild(r)),e=a}}}return e}function g(e){var t=e;do{t=t.previousSibling}while(t&&E(t));return t}function v(e){var t=e;do{t=t.nextSibling}while(t&&E(t));return t}function y(e){if(1==e.nodeType){var t=C(e,l);if(t&&t.length>0&&"ignore"==t.trim().toLowerCase())return!0}return!1}function b(e){return"SPAN"==i.getTagOfNode(e)&&!e.firstChild}function C(e,t){var n=e.getAttribute("style");if(n&&n.length>0&&n.indexOf(t)>=0)for(var o=n.split(";"),r=0;r<o.length;r++){var i=o[r].split(":");if(2==i.length&&i[0].trim()==t)return i[1].trim()}return null}function E(e){if(!e)return!0;if(3==e.nodeType){var t=e.nodeValue;return 0==(t=t.replace(u,"")).trim().length}var n=i.getTagOfNode(e);return e.firstChild==e.lastChild&&("SPAN"==n||"FONT"==n)&&E(e.firstChild)}function _(e){for(var t=0;t<e.currentListIdsByLevels.length;t++){var n=e.currentListIdsByLevels[t];n&&(n.currentUniqueListId=-1)}}t.processNodesDiscovery=function(e){for(var t,n=e.wordConverterArgs;n.currentIndex<n.nodes.length;){var r=n.nodes.item(n.currentIndex),i=f(r);if(i){var s=n.currentListIdsByLevels[i.level-1]||o.createLevelLists();n.currentListIdsByLevels[i.level-1]=s,n.lastProcessedItem&&g(r)!=n.lastProcessedItem&&_(n);var l=s.listsMetadata[i.wordListId];if(l){if(!l.ignore&&1==l.numberOfItems){var u=p(r,a);l.tagName=l.firstFakeBullet==u?"UL":"OL"}}else{var c=p(r,a);l={numberOfItems:0,uniqueListId:e.nextUniqueId++,firstFakeBullet:c,ignore:!c||0==c.length,tagName:(t=c,h(t)?"UL":"OL")},s.listsMetadata[i.wordListId]=l,n.lists[l.uniqueListId.toString()]=l}i.uniqueListId=l.uniqueListId,l.ignore||"OL"==l.tagName&&l.numberOfItems>0&&s.currentUniqueListId!=i.uniqueListId?(l.ignore=!0,n.currentListIdsByLevels[0].currentUniqueListId=-1,n.currentListIdsByLevels=n.currentListIdsByLevels.slice(0,1)):(n.currentListIdsByLevels.length>i.level&&(n.currentListIdsByLevels=n.currentListIdsByLevels.slice(0,i.level)),s.currentUniqueListId=i.uniqueListId,n.listItems.push(i),l.numberOfItems++),n.lastProcessedItem=r}else{var d=n.lastProcessedItem;if(d&&g(r)==d&&r.tagName==d.tagName&&r.className==d.className){for(d.appendChild(d.ownerDocument.createElement("br")),d.appendChild(d.ownerDocument.createElement("br"));null!=r.firstChild;)d.appendChild(r.firstChild);r.parentNode.removeChild(r)}}n.currentIndex++}return n.listItems.length>0},t.processNodeConvert=function(e){var t=e.wordConverterArgs;for(t.currentIndex=0;t.currentIndex<t.listItems.length;){var n=t.listItems[t.currentIndex],o=n.originalNode,r=t.lists[n.uniqueListId.toString()];if(!r.ignore){var i=c(e,o,n,r);if(i){d(o,a);for(var s=o.ownerDocument.createElement("LI");o.firstChild;)s.appendChild(o.firstChild);i.appendChild(s),o.parentNode.removeChild(o),"UL"==r.tagName?e.numBulletsConverted++:e.numNumberedConverted++}}t.currentIndex++}return e.numBulletsConverted>0||e.numNumberedConverted>0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(193),r=n(0),i=n(194);function a(e,t,n){if(e){var o,r=n.insertPositionNode;if(r)(o=r.parentElement)&&o.insertBefore(e,r);else(o=n.startElement.parentElement)?o.appendChild(e):t.append(e)}}t.isWordOnlineWithList=function(e){return!(!e||!e.querySelector(o.WORD_ONLINE_IDENTIFYING_SELECTOR))},t.default=function(e){!function(e){e.querySelectorAll(o.WORD_ORDERED_LIST_SELECTOR+", "+o.WORD_UNORDERED_LIST_SELECTOR).forEach((function(e){var t=new RegExp("\\b"+o.LIST_CONTAINER_ELEMENT_CLASS_NAME+"\\b","g");if(e.previousSibling){var n=r.splitParentNode(e,!0);n.className=n.className.replace(t,"")}if(e.nextSibling){var i=r.splitParentNode(e,!1);i.className=i.className.replace(t,"")}}))}(e),function(e){for(var t,n=e.getElementsByClassName(o.LIST_CONTAINER_ELEMENT_CLASS_NAME),a=[],s=0;s<n.length;s++){var l=n[s];if(t){var u=t.listItemContainers,c=u[u.length-1];l==c.nextSibling||r.getFirstLeafNode(l)==r.getNextLeafSibling(e.body,c)?(u.push(l),t.endElement=l):(t.endElement=c,a.push(t),t=i.createListItemBlock(l))}else t=i.createListItemBlock(l)}t.listItemContainers.length>0&&a.push(t);return a}(e).forEach((function(t){var n,i,s;n=e.body,i=t,r.collapseNodes(n,i.startElement,i.endElement,!0).forEach((function(e){"DIV"==r.getTagOfNode(e.firstChild)&&r.unwrap(e)})),t.insertPositionNode=t.endElement.nextSibling,t.listItemContainers.forEach((function(n){var i=function(e){var t=r.getTagOfNode(e.firstChild);return t==o.UNORDERED_LIST_TAG_NAME||t==o.ORDERED_LIST_TAG_NAME?t:null}(n);s||(s=e.createElement(i)),n.querySelectorAll("li").forEach((function(n){var l=parseInt(n.getAttribute("data-aria-level"));r.getTagOfNode(s)!=i&&1==l&&(a(s,e.body,t),s=e.createElement(i)),function(e,t,n,i){if(!n)return;var a=parseInt(t.getAttribute("data-aria-level")),s=e;t.style.margin=null,t.style.display=null;for(;a>1;){if(s.firstChild){var l=s.lastElementChild,u=r.getTagOfNode(l);u==o.UNORDERED_LIST_TAG_NAME||u==o.ORDERED_LIST_TAG_NAME?s=l:(s.append(i.createElement(n)),s=s.lastElementChild)}else s.append(i.createElement(n)),s=s.firstElementChild;a--}s.appendChild(t)}(s,n,i,e)}))})),a(s,e.body,t);var l=t.startElement.parentNode;l&&t.listItemContainers.forEach((function(e){l.removeChild(e)}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WORD_ORDERED_LIST_SELECTOR='div.ListContainerWrapper > ul[class^="BulletListStyle"]',t.WORD_UNORDERED_LIST_SELECTOR='div.ListContainerWrapper > ol[class^="NumberListStyle"]',t.WORD_ONLINE_IDENTIFYING_SELECTOR=t.WORD_ORDERED_LIST_SELECTOR+","+t.WORD_UNORDERED_LIST_SELECTOR,t.LIST_CONTAINER_ELEMENT_CLASS_NAME="ListContainerWrapper",t.UNORDERED_LIST_TAG_NAME="UL",t.ORDERED_LIST_TAG_NAME="OL"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createListItemBlock=function(e){return void 0===e&&(e=null),{startElement:e,endElement:e,insertPositionNode:null,listItemContainers:e?[e]:[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r="&#8203;";t.default=function(e){var t=(e=(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/^ /gm,"&nbsp;").replace(/\r/g,"")).split("\n");if(2==t.length)e="<span>"+t[0]+"<br></span><span>"+t[1]+"</span>";else if(t.length>2){e="";var n=o.Browser.isIEOrEdge?r:"<br>";t.forEach((function(o,r){0==r?e+="<span>"+o+"<br></span>":r==t.length-1?e+="<span>"+o+"</span>":e+="<div>"+o+n+"</div>"}))}return e=e.replace(/ {2}/g," &nbsp;")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=new RegExp("<span[^>]*id=['\"]?_rooster_watermarkSpan['\"]?[^>]*>[^<]*</span>","ig"),i=function(){function e(e,t){var n=this;this.watermark=e,this.format=t,this.handleWatermark=function(){n.showHideWatermark(!1)},this.format=this.format||{fontSize:"14px",textColor:"#aaa"}}return e.prototype.getName=function(){return"Watermark"},e.prototype.initialize=function(e){this.editor=e,this.showHideWatermark(!1),this.disposer=this.editor.addDomEventHandler({focus:this.handleWatermark,blur:this.handleWatermark})},e.prototype.dispose=function(){this.disposer(),this.disposer=null,this.hideWatermark(),this.editor=null},e.prototype.onPluginEvent=function(e){6==e.eventType?this.showHideWatermark("SetContent"==e.source):7==e.eventType&&this.isWatermarkShowing&&this.removeWartermarkFromHtml(e)},e.prototype.showHideWatermark=function(e){this.editor.hasFocus()&&(e||this.isWatermarkShowing)?(this.hideWatermark(),this.editor.focus()):this.editor.hasFocus()||!e&&this.isWatermarkShowing||!this.editor.isEmpty(!0)||this.showWatermark()},e.prototype.showWatermark=function(){var e=this.editor.getDocument(),t=o.wrap(e.createTextNode(this.watermark),'<span id="_rooster_watermarkSpan"></span>');o.applyFormat(t,this.format,this.editor.isDarkMode()),this.editor.insertNode(t,{position:0,updateCursor:!1,replaceSelection:!1,insertOnNewLine:!1}),this.isWatermarkShowing=!0},e.prototype.hideWatermark=function(){var e=this;this.editor.queryElements('span[id="_rooster_watermarkSpan"]',(function(t){var n=t.parentNode;e.editor.deleteNode(t),e.editor.contains(n)&&"DIV"==o.getTagOfNode(n)&&!n.firstChild&&n.appendChild(e.editor.getDocument().createElement("BR"))})),this.isWatermarkShowing=!1},e.prototype.removeWartermarkFromHtml=function(e){var t=e.content;t=t.replace(r,""),e.content=t},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(){var e=this;this.pageX=-1,this.onMouseOver=function(t){var n=t.srcElement||t.target;e.pageX<0&&n&&("TD"==n.tagName||"TH"==n.tagName)&&n!=e.td&&(e.td=n,e.calcAndShowHandle())},this.onMouseDown=function(t){e.editor&&!e.editor.isDisposed()&&(e.pageX=t.pageX,e.initialPageX=t.pageX,e.attachMouseEvents(),e.getResizeHandle().style.borderWidth="0 1px",e.cancelEvent(t))},this.onMouseMove=function(t){e.adjustHandle(t.pageX),e.cancelEvent(t)},this.onMouseUp=function(t){e.detachMouseEvents(),e.getResizeHandle().style.borderWidth="0";var n=e.editor.getElementAtCursor("TABLE",e.td),r=parseInt(n.cellPadding);if(r=isNaN(r)?0:r,t.pageX!=e.initialPageX){var i=e.td.clientWidth-2*r+(t.pageX-e.initialPageX)*(o.isRtl(n)?-1:1);e.editor.addUndoSnapshot((function(t,n){e.setTableColumnWidth(i+"px"),e.editor.select(t,n)}),"Format")}e.pageX=-1,e.calcAndShowHandle(),e.editor.focus(),e.cancelEvent(t)}}return e.prototype.initialize=function(e){this.editor=e,this.onMouseOverDisposer=this.editor.addDomEventHandler("mouseover",this.onMouseOver)},e.prototype.getName=function(){return"TableResize"},e.prototype.dispose=function(){this.detachMouseEvents(),this.editor=null,this.onMouseOverDisposer()},e.prototype.onPluginEvent=function(e){this.td&&(0==e.eventType||6==e.eventType||4==e.eventType&&!this.clickIntoCurrentTd(e))&&(this.td=null,this.calcAndShowHandle())},e.prototype.clickIntoCurrentTd=function(e){var t=e.rawEvent.target;return t instanceof Node&&o.contains(this.td,t,!0)},e.prototype.calcAndShowHandle=function(){if(this.td){var e=this.editor.getElementAtCursor("TR",this.td),t=this.editor.getElementAtCursor("TABLE",e);if(e&&t){var n=this.getPosition(t),r=n[0],i=n[1],a=this.getResizeHandle();r+=this.td.offsetLeft+(o.isRtl(t)?0:this.td.offsetWidth-6),a.style.display="",a.style.top=i+"px",a.style.height=t.offsetHeight+"px",a.style.left=r+"px"}}else this.getResizeHandle().style.display="none"},e.prototype.adjustHandle=function(e){var t=this.getResizeHandle();t.style.left=t.offsetLeft+e-this.pageX+"px",this.pageX=e},e.prototype.getPosition=function(e){var t=e.offsetParent,n=t?this.getPosition(t):[0,0],o=n[0],r=n[1];return[o+e.offsetLeft-e.scrollLeft,r+e.offsetTop-e.scrollTop]},e.prototype.getResizeHandle=function(){var e=this;return this.editor.getCustomData("TABLE_RESIZE_HANDLE",(function(){var t=e.editor.getDocument(),n=o.fromHtml('<div style="position: fixed; cursor: col-resize; width: 6px; border: solid 0 #C6C6C6;"></div>',t)[0];return e.editor.insertNode(n,{position:4,updateCursor:!1,replaceSelection:!1,insertOnNewLine:!1}),n.addEventListener("mousedown",e.onMouseDown),n}),(function(t){t.removeEventListener("mousedown",e.onMouseDown),t.parentNode.removeChild(t)}))},e.prototype.cancelEvent=function(e){e.stopPropagation(),e.preventDefault()},e.prototype.attachMouseEvents=function(){if(this.editor&&!this.editor.isDisposed()){var e=this.editor.getDocument();e.addEventListener("mousemove",this.onMouseMove,!0),e.addEventListener("mouseup",this.onMouseUp,!0)}},e.prototype.detachMouseEvents=function(){if(this.editor&&!this.editor.isDisposed()){var e=this.editor.getDocument();e.removeEventListener("mousemove",this.onMouseMove,!0),e.removeEventListener("mouseup",this.onMouseUp,!0)}},e.prototype.setTableColumnWidth=function(e){var t=this,n=new o.VTable(this.td);return n.table.style.width="",n.table.width="",n.forEachCellOfCurrentColumn((function(n){n.td&&(n.td.style.width=n.td==t.td?e:"")})),n.writeBack(),this.editor.contains(this.td)?this.td:n.getCurrentTd()},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=function(e,t,n){return{sourceString:e,replacementHTML:t,matchSourceCaseSensitive:n}},i=[r(":)","",!0),r(";)","",!0),r(":O","",!0),r(":o","",!0),r("<3","",!0)],a=function(){function e(e){void 0===e&&(e=i),this.updateReplacements(e)}return e.prototype.updateReplacements=function(e){var t;this.replacements=e,this.longestReplacementLength=(t=this.replacements,Math.max.apply(null,t.map((function(e){return e.sourceString.length})))),this.replacementEndCharacters=function(e){for(var t=new Set,n=0,o=e;n<o.length;n++){var r=o[n],i=r.sourceString;if(0!=i.length){var a=i[i.length-1];r.matchSourceCaseSensitive?t.add(a):(t.add(a.toLocaleLowerCase()),t.add(a.toLocaleUpperCase()))}}return t}(this.replacements)},e.prototype.getName=function(){return"CustomReplace"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor=null},e.prototype.onPluginEvent=function(e){var t=this;if(!this.editor.isInIME()&&11==e.eventType&&(e.rawEvent.data&&this.replacementEndCharacters.has(e.rawEvent.data)&&null!=this.editor.getSelectionRange())){var n=o.cacheGetContentSearcher(e,this.editor),r=n.getSubStringBefore(this.longestReplacementLength),i=this.getMatchingReplacement(r);if(null!=i){var a=n.getSubStringBefore(i.sourceString.length),s=n.getRangeFromText(a,!0),l=document.createElement("span");l.innerHTML=i.replacementHTML;var u=1==l.childNodes.length?l.childNodes[0]:l;this.editor.performAutoComplete((function(){s.deleteContents(),s.insertNode(u),t.editor.select(u,-1)}))}}},e.prototype.getMatchingReplacement=function(e){if(0==e.length)return null;for(var t=e.toLocaleLowerCase(),n=0,o=this.replacements;n<o.length;n++){var r=o[n],i=r.matchSourceCaseSensitive?[e,r.sourceString]:[t,r.sourceString.toLocaleLowerCase()],a=i[0],s=i[1];if(a.substring(a.length-s.length)==s)return r}return null},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(200);t.ImageResize=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r="RoosterJsImageResizingBegin",i="RoosterJsImageResizingEnd",a=new RegExp("\x3c!--"+r+"--\x3e[\\s\\S]*(<img\\s[^>]+>)[\\s\\S]*\x3c!--"+i+"--\x3e","gim"),s=function(){function e(e,t,n,o,a){var s=this;void 0===e&&(e=10),void 0===t&&(t=10),void 0===n&&(n="#DB626C"),void 0===o&&(o=!1),void 0===a&&(a="img"),this.minWidth=e,this.minHeight=t,this.selectionBorderColor=n,this.forcePreserveRatio=o,this.resizableImageSelector=a,this.startResize=function(e){var t=s.getSelectedImage();if(s.editor&&t){s.startPageX=e.pageX,s.startPageY=e.pageY,s.startWidth=t.clientWidth,s.startHeight=t.clientHeight,s.editor.addUndoSnapshot();var n=s.editor.getDocument();n.addEventListener("mousemove",s.doResize,!0),n.addEventListener("mouseup",s.finishResize,!0),s.direction=(e.srcElement||e.target).style.cursor}s.stopEvent(e)},this.doResize=function(e){var t=s.getSelectedImage();if(s.editor&&t){var n=e.pageX-s.startPageX,o=e.pageY-s.startPageY,r=Math.max(s.startWidth+(s.isWest(s.direction)?-n:n),s.minWidth),i=Math.max(s.startHeight+(s.isNorth(s.direction)?-o:o),s.minHeight);if(s.forcePreserveRatio||e.shiftKey){var a=s.startWidth>0&&s.startHeight>0?1*s.startWidth/s.startHeight:0;a>0&&(r<i*a?r=i*a:i=r/a)}t.style.width=r+"px",t.style.height=i+"px"}s.stopEvent(e)},this.finishResize=function(e){var t=s.getSelectedImage();if(s.editor&&t){var n=s.editor.getDocument();n.removeEventListener("mousemove",s.doResize,!0),n.removeEventListener("mouseup",s.finishResize,!0);var o=t.clientWidth,r=t.clientHeight;t.style.width=o+"px",t.style.height=r+"px",t.width=o,t.height=r,s.resizeDiv.style.width="",s.resizeDiv.style.height=""}s.direction=null,s.editor.addUndoSnapshot(),s.editor.triggerContentChangedEvent("ImageResize"),s.stopEvent(e)},this.stopEvent=function(e){e.stopPropagation(),e.preventDefault()},this.removeResizeDivIfAny=function(e){var t=e&&e.parentNode,n=t&&t.previousSibling,o=t&&t.nextSibling;n&&8==n.nodeType&&n.nodeValue==r&&o&&8==o.nodeType&&o.nodeValue==i&&(t.parentNode.insertBefore(e,t),s.removeResizeDiv(t))},this.onBlur=function(e){s.hideResizeHandle()},this.onDragStart=function(e){(e.srcElement||e.target)==s.getSelectedImage()&&s.hideResizeHandle(!0)}}return e.prototype.getName=function(){return"ImageResize"},e.prototype.initialize=function(e){this.editor=e,this.disposer=e.addDomEventHandler({dragstart:this.onDragStart,blur:this.onBlur})},e.prototype.dispose=function(){this.resizeDiv&&this.hideResizeHandle(),this.disposer(),this.disposer=null,this.editor=null},e.prototype.onPluginEvent=function(e){var t=this;if(4==e.eventType){var n=e.rawEvent,r=n.srcElement||n.target;if("IMG"==o.getTagOfNode(r)){var i=r.parentNode;if((i?[].slice.call(i.querySelectorAll(this.resizableImageSelector)):[]).indexOf(r)<0)return;r.contentEditable="false";var a=this.getSelectedImage();a&&a!=r&&this.hideResizeHandle(),this.resizeDiv||this.showResizeHandle(r)}else this.resizeDiv&&!o.contains(this.resizeDiv,r)&&this.hideResizeHandle()}else if(0==e.eventType&&this.resizeDiv){var s=e.rawEvent;46==s.which||8==s.which?(this.editor.addUndoSnapshot((function(){t.removeResizeDiv(t.resizeDiv)})),this.resizeDiv=null,s.preventDefault(),this.resizeDiv=null):16!=s.which&&17!=s.which&&18!=s.which&&this.hideResizeHandle(!0)}else if(6==e.eventType&&"ImageResize"!=e.source)this.editor.queryElements("img",this.removeResizeDivIfAny),this.resizeDiv=null;else if(7==e.eventType){var l=e;l.content=this.extractHtml(l.content)}},e.prototype.showResizeHandle=function(e){this.resizeDiv=this.createResizeDiv(e),e.contentEditable="false",this.editor.select(this.resizeDiv,-3)},e.prototype.hideResizeHandle=function(e){var t=this.getSelectedImage(),n=this.resizeDiv&&this.resizeDiv.parentNode;if(n){if(t){t.removeAttribute("contentEditable");var o=this.resizeDiv.previousSibling&&8==this.resizeDiv.previousSibling.nodeType?this.resizeDiv.previousSibling:this.resizeDiv;n.insertBefore(t,o),e?this.editor.select(t):this.editor.select(t,-3)}this.removeResizeDiv(this.resizeDiv),this.resizeDiv=null}},e.prototype.createResizeDiv=function(e){var t=this,n=this.editor.getDocument(),o=n.createElement("DIV"),a=e.parentNode;a.insertBefore(o,e),a.insertBefore(n.createComment(r),o),a.insertBefore(n.createComment(i),o.nextSibling),o.style.position="relative",o.style.display="inline-flex",o.contentEditable="false",o.addEventListener("click",this.stopEvent),o.appendChild(e),["nw","ne","sw","se"].forEach((function(e){var r=n.createElement("DIV");o.appendChild(r),r.style.position="absolute",r.style.width="7px",r.style.height="7px",r.style.backgroundColor=t.selectionBorderColor,r.style.cursor=e+"-resize",t.isNorth(e)?r.style.top="-3px":r.style.bottom="-3px",t.isWest(e)?r.style.left="-3px":r.style.right="-3px",r.addEventListener("mousedown",t.startResize)}));var s=n.createElement("DIV");return o.appendChild(s),s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.right="0",s.style.bottom="0",s.style.border="solid 1px "+this.selectionBorderColor,s.style.pointerEvents="none",o},e.prototype.removeResizeDiv=function(e){var t=this;this.editor&&this.editor.contains(e)&&([e.previousSibling,e.nextSibling].forEach((function(e){e&&8==e.nodeType&&t.editor.deleteNode(e)})),this.editor.deleteNode(e))},e.prototype.extractHtml=function(e){return e.replace(a,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1].replace(/(\s*contenteditable="false"(\/?>)|contenteditable="false"\s*)/im,"$2")}))},e.prototype.getSelectedImage=function(){return this.resizeDiv?this.resizeDiv.getElementsByTagName("IMG")[0]:null},e.prototype.isNorth=function(e){return e&&"n"==e.substr(0,1)},e.prototype.isWest=function(e){return e&&"w"==e.substr(1,1)},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};t.registerDefaultString=function(e,t){o[e]=t},t.getString=function(e,t,n){var r=(n||{})[t];return null==r&&(r=o[e][t]),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullFunction=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closest=function(e,t){if(e&&e.closest)return e.closest(t);for(;e&&!(e.matches||e.msMatchesSelector).call(e,t);)e=e.parentElement;return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);function r(e,t,n){e.focus();var o=function(){return e.getDocument().execCommand(t,!1,null)},r=e.getSelectionRange();r&&r.collapsed&&!n?o():e.addUndoSnapshot(o)}t.toggleNonCompatNumbering=function(e){r(e,"insertOrderedList",!0)},t.toggleNonCompatBullet=function(e){r(e,"insertUnorderedList",!0)},t.setNonCompatIndentation=function(e,t){e.focus();var n=0==t?"indent":"outdent";e.addUndoSnapshot((function(){var t=o.getFormatState(e);e.getDocument().execCommand(n,!1,null),t.isBullet||t.isNumbering||e.queryElements("blockquote",1,(function(e){e.style.marginTop="0",e.style.marginBottom="0"}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11).loadStyles([{rawString:"@-webkit-keyframes roosterjsReactSpin_5a63875e{0%{-webkit-transform:rotateZ(0deg);transform:rotateZ(0deg)}100%{-webkit-transform:rotateZ(360deg);transform:rotateZ(360deg)}}@keyframes roosterjsReactSpin_5a63875e{0%{-webkit-transform:rotateZ(0deg);transform:rotateZ(0deg)}100%{-webkit-transform:rotateZ(360deg);transform:rotateZ(360deg)}}.roosterjsReactSpinner_5a63875e{-webkit-animation-name:roosterjsReactSpin_5a63875e;animation-name:roosterjsReactSpin_5a63875e;-webkit-animation-duration:1.3s;animation-duration:1.3s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:cubic-bezier(0.53, 0.21, 0.29, 0.67);animation-timing-function:cubic-bezier(0.53, 0.21, 0.29, 0.67);padding:0 4px}\n"}]),t.roosterjsReactSpinner="roosterjsReactSpinner_5a63875e",t.roosterjsReactSpin="roosterjsReactSpin_5a63875e"},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this.onChange=e,this.onChangeEvent=function(){t.onChange(t.editor.getContent())}}return e.prototype.getName=function(){return"ContentChanged"},e.prototype.initialize=function(e){this.editor=e,this.changeDisposer=this.editor.addDomEventHandler("input",this.onChangeEvent),this.textInputDisposer=this.editor.addDomEventHandler("textinput",this.onChangeEvent),this.pasteDisposer=this.editor.addDomEventHandler("paste",this.onChangeEvent)},e.prototype.onPluginEvent=function(e){e&&6===e.eventType&&this.onChangeEvent()},e.prototype.dispose=function(){this.changeDisposer&&(this.changeDisposer(),this.changeDisposer=null),this.textInputDisposer&&(this.textInputDisposer(),this.textInputDisposer=null),this.pasteDisposer&&(this.pasteDisposer(),this.pasteDisposer=null),this.editor=null},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(){function e(e){void 0===e&&(e="img");var t=this;this.doubleClickImageSelector=e,this.onDoubleClick=function(e){var n=e.target;if("IMG"===o.getTagOfNode(n)){var r=n.getAttribute("src");if(r){var i=n.parentNode;if(!((i?[].slice.call(i.querySelectorAll(t.doubleClickImageSelector)):[]).indexOf(n)<0)){var a=0===r.indexOf("data:"),s=window.open(a?null:r,"_blank");s&&(s.opener=null,a&&(s.document.body.innerHTML='<img src="'+r+'">'))}}}}}return e.prototype.getName=function(){return"DoubleClickImage"},e.prototype.initialize=function(e){this.editor=e,this.onDoubleClickDisposer=this.editor.addDomEventHandler("dblclick",this.onDoubleClick)},e.prototype.dispose=function(){this.editor&&(this.editor=null,this.onDoubleClickDisposer())},e.prototype.getEditor=function(){return this.editor},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(39),r=new RegExp("<img [^>]*"+o.PlaceholderDataAttribute+'="\\d+"[^>]*>',"gm"),i=function(){function e(e,t){void 0===t&&(t=!1),this.imageManager=e,this.preventImagePaste=t}return e.prototype.getName=function(){return"PasteImage"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor&&(this.editor=null)},e.prototype.onPluginEvent=function(e){if(7!==e.eventType){if(8===e.eventType){var t=e;if(2===t.pasteOption){var n=this.getEditor();if(n)if(this.preventImagePaste)t.pasteOption=1;else{var i=t.clipboardData.image,a=this.imageManager.upload(n,i,!0);null!==a&&(t.fragment.appendChild(a),t.clipboardData.html=a.outerHTML,t.pasteOption=0)}}}}else{var s=e,l=s.content;o.hasPlaceholder(l)&&(s.content=l.replace(r,""))}},e.prototype.setPreventImagePaste=function(e){void 0===e&&(e=!0),this.preventImagePaste=e},e.prototype.getEditor=function(){return this.editor},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return e.InternalInstance},enumerable:!0,configurable:!0}),e.prototype.getName=function(){return"IgnorePasteImage"},e.prototype.initialize=function(e){this.editor=e},e.prototype.dispose=function(){this.editor&&(this.editor=null)},e.prototype.onPluginEvent=function(e){if(8===e.eventType){var t=e;if(2===t.pasteOption)this.getEditor()&&(t.pasteOption=1)}},e.prototype.getEditor=function(){return this.editor},e.InternalInstance=new e,e}();t.default=o},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(39),s=1e7,l=function(){function e(e,t){this.imageManager=e,this.maxSize=t,this.snapshots=[],this.totalSize=0,this.currentIndex=-1}return e.prototype.canMove=function(e){var t=this.currentIndex+e;return t>=0&&t<this.snapshots.length},e.prototype.move=function(e){if(!this.canMove(e))return null;var t=this.currentIndex;this.currentIndex+=e;var n=this.snapshots[this.currentIndex];if(n.hasPlaceholder){var o=n.value,r=this.imageManager.updatePlaceholders(o);n.hasPlaceholder=!r.resolvedAll,n.value=r.html;var i=o.length-r.html.length,a=this.snapshots[t];if(a&&a.value===n.value&&0!==e)return this.totalSize-=n.value.length,this.snapshots.splice(t),this.move(e<0?-1:1);this.totalSize-=i}return n.value},e.prototype.addSnapshot=function(e){if(!(this.currentIndex>-1&&e===this.snapshots[this.currentIndex].value)){this.clearRedo(),this.snapshots.push({value:e,hasPlaceholder:a.hasPlaceholder(e)}),++this.currentIndex,this.totalSize+=e.length;for(var t=0;t<this.snapshots.length&&this.totalSize>this.maxSize;)this.totalSize-=this.snapshots[t].value.length,t++;t>0&&(this.snapshots.splice(0,t),this.currentIndex-=t)}},e.prototype.clearRedo=function(){if(this.canMove(1)){for(var e=0,t=this.currentIndex+1;t<this.snapshots.length;++t)e+=this.snapshots[t].value.length;this.snapshots.splice(this.currentIndex+1),this.totalSize-=e}},e}(),u=function(e){function t(t,n,o){void 0===o&&(o=s);var r=e.call(this,n,o)||this;return r.imageManager=t,r.bufferSize=o,r}return r(t,e),t.prototype.getSnapshotsManager=function(){return this.undoSnapshots||(this.undoSnapshots=new l(this.imageManager,this.bufferSize)),this.undoSnapshots},t.prototype.reset=function(e){this.clear(),this.getSnapshotsManager().addSnapshot(e)},t}(i.Undo);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AriaAttributes={ActiveDescendant:"aria-activedescendant",AutoComplete:"aria-autocomplete",Controls:"aria-controls",Expanded:"aria-expanded",HasPopup:"aria-haspopup",Owns:"aria-owns",Pressed:"aria-pressed"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(214);t.RoosterCommandBar=o.default;var r=n(223);t.RoosterCommandBarPlugin=r.default;var i=n(93);t.RoosterCommandBarStringKeys=i.RoosterCommandBarStringKeys,t.RoosterCommmandBarButtonKeys=i.RoosterCommmandBarButtonKeys;var a=n(91);t.getIconOnRenderDelegate=a.getIconOnRenderDelegate,t.getIconOnRenderDelegateWithCustomCacheKey=a.getIconOnRenderDelegateWithCustomCacheKey,t.getIconButtonOnRenderDelegate=a.getIconButtonOnRenderDelegate;var s=n(94);t.createLinkDialog=s.createLinkDialog,t.InsertLinkStringKeys=s.InsertLinkStringKeys},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),n(215);var a=n(216),s=n(23),l=n(24),u=n(6),c=n(3),d=n(2),f=n(90),h=n(91),p=n(93),m={display:"none"},g=function(e){function t(n){var o=e.call(this,n)||this;return o._id=t.IdCounter++,o._fileInputOnRef=function(e){o._fileInput=e},o._fileInputOnChange=function(){var e=o.props,t=e.roosterCommandBarPlugin,n=e.imageManager,r=t.getEditor(),i=o._fileInput.files[0];if(r&&!r.isDisposed()&&i){if(n){var a=n.upload(r,i);r.insertNode(a),r.triggerContentChangedEvent("Format"),r.addUndoSnapshot()}else c.insertImage(r,i);o._fileInput.value=""}},o._refreshButtonStatesCore=function(e,t){if(!e)return null;var n=o.state.formatState;if(e.getChecked){var r=e.getChecked(n);e.checked=r,e.isContextMenuItem||(e[d.AriaAttributes.Pressed]=r)}return e.getDisabled&&(e.disabled=e.getDisabled(n)),e.subMenuProps&&e.subMenuProps.items&&e.subMenuProps.items.forEach(o._refreshChildButtonStates),e},o._refreshButtonStates=function(e){return o._refreshButtonStatesCore(e,!0)},o._refreshChildButtonStates=function(e){return o._refreshButtonStatesCore(e,!1)},o._createButton=function(e,t){if(void 0===t&&(t=!0),!e)return null;var n=o.props,r=n.strings,a=n.calloutClassName,s=n.calloutOnDismiss,u=n.tooltipDirectionHint,c=e.className||"",d=c.split(" ").indexOf(p.RoosterCommandBarButtonRootClassName)<0?p.RoosterCommandBarButtonRootClassName:void 0,f=i({},e,{className:l.css(d,{"first-level":t},c)});if(!f.onRender&&f.onRenderOptions){var m=f.onRenderOptions.customCacheKey,g=void 0===m?""+f.key+o._id:m;f.onRender=h.getIconButtonOnRenderDelegate(i({},f.onRenderOptions,{customCacheKey:g,tooltipDirectionHint:u}))}if(f.onClick=f.onClick||o._onCommandBarButtonClick.bind(o,f),f.iconOnly=!0,f.iconProps){var v=f.iconProps.className,y=void 0===v?"":v;f.iconProps=i({},f.iconProps,{className:y.split(" ").indexOf(p.RoosterCommandBarIconClassName)<0?l.css(p.RoosterCommandBarIconClassName,y):y})}return r&&null!=r[f.key]&&(f.name=r[f.key],f.title&&(f.title=f.name)),f.subMenuProps&&f.subMenuProps.items&&(f.subMenuProps=i({},f.subMenuProps),f.subMenuProps.items=f.subMenuProps.items.map(o._createChildButton),f.subMenuProps.calloutProps={className:a},f.subMenuProps.onDismiss=s),o._refreshButtonStatesCore(f,t),f},o._createChildButton=function(e){return o._createButton(e,!1)},o._onCommandBarButtonClick=function(e){var t=o.props,n=t.roosterCommandBarPlugin,r=t.onButtonClicked,i=n.getEditor();i&&e.handleChange&&e.handleChange(i,o.props,o.state);e.key===p.RoosterCommmandBarButtonKeys.InsertImage&&o._fileInput.click(),o._updateFormatState(),r&&r(e.key)},o._updateFormatState=function(){var e=o.props.roosterCommandBarPlugin.getEditor(),t=e?c.getFormatState(e):null;t&&o._hasFormatStateChanged(t)&&o.setState({formatState:t})},o.state={formatState:f.createFormatState()},o._initButtons(n),o._async=new l.Async,o._updateFormatStateDebounced=o._async.debounce((function(){return o._updateFormatState()}),100),o}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.calloutClassName,o=e.calloutOnDismiss,r=e.overflowMenuProps,c=e.commandBarClassName,d=e.ellipsisAriaLabel;return this._buttons.forEach(this._refreshButtonStates),u.createElement("div",{className:l.css("rooster-command-bar",t)},u.createElement(a.CommandBar,{className:l.css("rooster-command-bar-base",c),items:this._buttons,overflowMenuProps:i({},r,{calloutProps:{className:n},onDismiss:o,className:l.css("rooster-command-bar-overflow",r&&r.className),focusZoneProps:{direction:s.FocusZoneDirection.horizontal}}),elipisisAriaLabel:d}),u.createElement("input",{type:"file",ref:this._fileInputOnRef,accept:"image/*",style:m,onChange:this._fileInputOnChange}))},t.prototype.componentDidMount=function(){this.props.roosterCommandBarPlugin.registerRoosterCommandBar(this)},t.prototype.componentWillUnmount=function(){this.props.roosterCommandBarPlugin.unregisterRoosterCommandBar(this),this._async&&(this._async.dispose(),this._async=null)},t.prototype.componentWillReceiveProps=function(e,t){e.buttonOverrides!==this.props.buttonOverrides&&this._initButtons(e)},t.prototype.refreshFormatState=function(){this._updateFormatStateDebounced()},t.prototype._initButtons=function(e){for(var t=this,n=e.buttonOverrides,o=void 0===n?[]:n,r=e.emojiPlugin,a=i({},p.OutOfBoxCommandBarButtonMap),s=p.OutOfBoxCommandBarButtons.map((function(e){return e.key})),u=0,c=o;u<c.length;u++){var d=c[u];if(d){var f=a[d.key];if(f){a[d.key]=i({},f,d);var h=f.subMenuProps,m=d.subMenuPropsOverride;h&&m&&(a[d.key].subMenuProps=i({},h,m,{className:l.css(h.className,m.className)}))}else a[d.key]=d;-1===s.indexOf(d.key)&&s.push(d.key)}}if(!r){var g=s.indexOf(p.RoosterCommmandBarButtonKeys.Emoji);g>-1&&s.splice(g,1)}this._buttons=s.map((function(e){return t._createButton(a[e])})).filter((function(e){return!!e&&!e.exclude})),this._buttons.sort((function(e,t){return e.order!==t.order?(null==e.order?Number.MAX_VALUE:e.order)-(null==t.order?Number.MAX_VALUE:t.order):s.indexOf(e.key)-s.indexOf(t.key)}))},t.prototype._hasFormatStateChanged=function(e){var t=this.state.formatState;for(var n in t)if(t[n]!==e[n])return!0;return!1},t.IdCounter=0,t}(u.PureComponent);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11).loadStyles([{rawString:'.rooster-command-bar .rooster-command-bar-base{background:#fff}.rooster-command-bar .ms-CommandBar-primaryCommands{margin:0 4px}.rooster-command-bar .ms-CommandBar-sideCommands{padding:0}.rooster-command-button-root.first-level:not(:last-child){padding-right:2px}.rooster-command-bar-button{min-width:32px;line-height:40px;height:40px;border-color:transparent}html[dir="ltr"] .rooster-command-bar .ms-CommandBar-primaryCommands,html[dir="rtl"] .rooster-command-bar .ms-CommandBar-primaryCommands{margin:0 4px}html[dir="ltr"] .rooster-command-bar .ms-CommandBar-sideCommands,html[dir="rtl"] .rooster-command-bar .ms-CommandBar-sideCommands{padding:0}.rooster-command-bar .command-button-tool-tip,.rooster-command-bar-overflow .command-button-tool-tip{display:block}.rooster-command-bar .stacked-icon-container,.rooster-command-bar-overflow .stacked-icon-container{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;position:relative}.rooster-command-bar .stacked-icon-container>.stacked-icon,.rooster-command-bar-overflow .stacked-icon-container>.stacked-icon{font-size:16px;position:absolute;left:0;top:0}.rooster-command-bar .stacked-icon-container>.stacked-icon:first-child,.rooster-command-bar-overflow .stacked-icon-container>.stacked-icon:first-child{position:relative}.rooster-command-bar .stacked-icon-container .highlight-swatch,.rooster-command-bar-overflow .stacked-icon-container .highlight-swatch{color:#ff0}.rooster-command-bar .stacked-icon-container .stacked-icon-RemoveLinkX,.rooster-command-bar .stacked-icon-container .color-swatch,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-RemoveLinkX,.rooster-command-bar-overflow .stacked-icon-container .color-swatch{color:#e81123}.rooster-command-bar .stacked-icon-container .stacked-icon-ClearFormattingEraser,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-ClearFormattingEraser{color:#e68497}.rooster-command-bar .stacked-icon-container .stacked-icon-IncreaseIndentArrow,.rooster-command-bar .stacked-icon-container .stacked-icon-DecreaseIndentArrow,.rooster-command-bar .stacked-icon-container .stacked-icon-BulletedListBullet,.rooster-command-bar .stacked-icon-container .stacked-icon-NumberedListNumber,.rooster-command-bar .stacked-icon-container .stacked-icon-Photo2Fill,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-IncreaseIndentArrow,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-DecreaseIndentArrow,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-BulletedListBullet,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-NumberedListNumber,.rooster-command-bar-overflow .stacked-icon-container .stacked-icon-Photo2Fill{color:#0078d4}.rooster-command-bar .stacked-icon-container .high-contrast-icon,.rooster-command-bar-overflow .stacked-icon-container .high-contrast-icon{display:none}@media screen and (-ms-high-contrast: active){.rooster-command-bar .stacked-icon-container .high-contrast-icon,.rooster-command-bar-overflow .stacked-icon-container .high-contrast-icon{display:block}}.rooster-command-bar .rooster-command-bar-icon,.rooster-command-bar-overflow .rooster-command-bar-icon{color:#212121}@media screen and (-ms-high-contrast: active){.rooster-command-bar .rooster-command-bar-icon,.rooster-command-bar-overflow .rooster-command-bar-icon{color:ButtonText}}.rooster-command-bar .rooster-command-bar-icon.rooster-emoji,.rooster-command-bar-overflow .rooster-command-bar-icon.rooster-emoji{font-style:normal}.rooster-command-bar .rooster-command-bar-icon.rooster-emoji:before,.rooster-command-bar-overflow .rooster-command-bar-icon.rooster-emoji:before{content:"\\1F642"}.rooster-command-bar button:not(:hover):not(:active):not(:focus):not(.is-checked),.rooster-command-bar-overflow button:not(:hover):not(:active):not(:focus):not(.is-checked){background:#fff;border-color:transparent}@media screen and (-ms-high-contrast: active){.rooster-command-bar button:hover:not([disabled])::after,.rooster-command-bar-overflow button:hover:not([disabled])::after{content:"";position:absolute;left:0;top:0;bottom:0;right:0;border:1px solid WindowText}}.rooster-command-bar button:hover:not([disabled]) .rooster-command-bar-icon,.rooster-command-bar-overflow button:hover:not([disabled]) .rooster-command-bar-icon{color:#212121}@media screen and (-ms-high-contrast: active){.rooster-command-bar button:hover:not([disabled]) .rooster-command-bar-icon,.rooster-command-bar-overflow button:hover:not([disabled]) .rooster-command-bar-icon{color:ButtonText}}.rooster-command-bar button.is-checked,.rooster-command-bar-overflow button.is-checked{background:#dadada}@media screen and (-ms-high-contrast: active){.rooster-command-bar button.is-checked,.rooster-command-bar button.is-checked:hover,.rooster-command-bar button.is-checked:active,.rooster-command-bar-overflow button.is-checked,.rooster-command-bar-overflow button.is-checked:hover,.rooster-command-bar-overflow button.is-checked:active{background-color:Highlight;-ms-high-contrast-adjust:none}.rooster-command-bar button.is-checked,.rooster-command-bar button.is-checked .rooster-command-bar-icon,.rooster-command-bar button.is-checked:hover,.rooster-command-bar button.is-checked:hover .rooster-command-bar-icon,.rooster-command-bar button.is-checked:active,.rooster-command-bar button.is-checked:active .rooster-command-bar-icon,.rooster-command-bar-overflow button.is-checked,.rooster-command-bar-overflow button.is-checked .rooster-command-bar-icon,.rooster-command-bar-overflow button.is-checked:hover,.rooster-command-bar-overflow button.is-checked:hover .rooster-command-bar-icon,.rooster-command-bar-overflow button.is-checked:active,.rooster-command-bar-overflow button.is-checked:active .rooster-command-bar-icon{color:HighlightText}}.rooster-command-bar-overflow div{min-width:0}.rooster-command-bar-overflow ul{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden}.rooster-command-bar-overflow li{display:inline-block}.rooster-command-bar-header1 span{font-size:28px;font-weight:bold}.rooster-command-bar-header2 span{font-size:21px;font-weight:bold}.rooster-command-bar-header3 span{font-size:16px;font-weight:bold}.rooster-command-bar-color-container{padding:2px;overflow:hidden;background:#fff}@media screen and (-ms-high-contrast: active){.rooster-command-bar-color-container{background-color:Background}}.rooster-command-bar-color-container ul{width:180px}.rooster-command-bar-color-cell-border{border-width:1px;border-style:solid;position:absolute;left:1px;right:1px;bottom:1px;top:1px}.rooster-command-bar-color-item{display:inline-block;width:30px;height:30px;background:#fff}@media screen and (-ms-high-contrast: active){.rooster-command-bar-color-item{background-color:Background}}.rooster-command-bar-color-item button{padding:0;min-width:0;border:0}.rooster-command-bar-color-item button:before{content:"";position:absolute;left:0;right:0;top:0;bottom:0;border:2px solid #fff}@media screen and (-ms-high-contrast: active){.rooster-command-bar-color-item button:before{border-color:Background}}.rooster-command-bar-color-item button:hover:before{display:none}.rooster-command-bar-color-item button:hover .rooster-command-bar-color-cell-border{left:0;right:0;top:0;bottom:0}.rooster-command-bar-color-button{height:30px;border:0}.rooster-command-bar-color-cell{width:30px;height:30px}\n'}])},function(e,t){e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(12);t.default=function(e,t){return{content:o.HtmlSanitizer.sanitizeHtml(e,t)||"",isDirty:!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{fontName:"",fontSize:"",isBold:!1,isItalic:!1,isUnderline:!1,backgroundColor:"",textColor:"",isBullet:!1,isNumbering:!1,isStrikeThrough:!1,isSubscript:!1,isSuperscript:!1,isBlockQuote:!1,canUnlink:!1,canAddImageAltText:!1,canUndo:!1,canRedo:!1}}},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(0),s=n(2),l=function(e){function t(n){var o=e.call(this,n)||this;return o._calloutClassName=t.CalloutClassName+"-"+t.NextId++,o._calloutOnDismiss=function(e){if(e){var t=e.target;o._shouldCallBlur(t)&&requestAnimationFrame((function(){var t=o.props.onBlur;(void 0===t?s.NullFunction:t)(e),o.setState({isFocused:!1})}))}},o._onBlur=function(e){var t=e.relatedTarget;if(o._shouldCallBlur(t)){var n=o.props.onBlur;(void 0===n?s.NullFunction:n)(e),o.setState({isFocused:!1})}},o._shouldCallBlurDefault=function(e){return(!e||!o._containerDiv.contains(e))&&(null==e&&a.Browser.isIE&&(e=document.activeElement),!e||!s.closest(e,"."+o._calloutClassName))},o._onFocus=function(e){if(!o.state.isFocused){var t=o.props.onFocus;(void 0===t?s.NullFunction:t)(e)}},o._onFocusNative=function(e){o.setState({isFocused:!0})},o._onMouseDown=function(e){var t=o.props.allowMouseDown;(void 0===t?s.NullFunction:t)(e.target)||e.preventDefault()},o._containerDivOnRef=function(e){o._containerDiv=e;o._containerDiv&&o._containerDiv.removeEventListener("focusin",o._onFocusNative),e&&e.addEventListener("focusin",o._onFocusNative)},o.state={isFocused:!1},o}return r(t,e),t.prototype.render=function(){var e=this.props,n=e.className,o=e.children;return i.createElement("div",{className:s.css(t.BaseClassName,n,{"is-focused":this.state.isFocused}),ref:this._containerDivOnRef,onBlur:this._onBlur,onFocus:this._onFocus,onMouseDown:this._onMouseDown},o(this._calloutClassName,this._calloutOnDismiss))},t.prototype._shouldCallBlur=function(e){var t=this.props.shouldCallBlur;return(void 0===t?this._shouldCallBlurDefault:t)(e,this._shouldCallBlurDefault)},t.BaseClassName="focus-out-shell",t.CalloutClassName=t.BaseClassName+"-callout",t.NextId=0,t}(i.PureComponent);t.default=l},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),n(221);var a=n(6),s=n(1),l=n(0),u=n(84),c=n(2),d={userSelect:"text",msUserSelect:"text",WebkitUserSelect:"text"},f=function(e){function t(t){var n=e.call(this,t)||this;return n._mode=0,n._initialContent=void 0,n._editorOptions=null,n._hasPlaceholder=!1,n._placeholderVisible=!1,n._refreshPlaceholder=function(){var e=n.props.placeholder&&n.isEmpty(),t=n._placeholderVisible,o=n._editor&&n._editor.hasFocus();n._hasPlaceholder=e,n._placeholderVisible=e&&!o,t!==n._placeholderVisible&&n.forceUpdate()},n._onHyperlinkClick=function(e,t){var o=n.props.onHyperlinkClick;return(void 0===o?function(e){return!1}:o)(e,t)},n._hyperlinkToolTipCallback=function(e,t){var o=n.props.hyperlinkToolTipCallback;return(void 0===o?function(e,t){return e}:o)(e,t)},n._updateViewState=function(e,t,o){if(e.content!==t&&(e.content=t,!o)){var r=n._initialContent?n._initialContent.__html:null;e.isDirty=t!==r}},n._onMouseDown=function(e){var t=e.target;if(n._getAnchorForClickOpenHyperlink(e,t))return e.preventDefault(),void e.stopPropagation();n._placeholderVisible=!1;n._trySwithToEditMode(!0)},n._onMouseUp=function(e){var t=e.target,o=n._getAnchorForClickOpenHyperlink(e,t);if(o){var r=n.props.onHyperlinkClick;if(n.hasActivated&&r)return;if(!r||!1===r(o,e.nativeEvent))try{window.open(o.getAttribute("href"),"_blank")}catch(e){}}else n._editor&&!n._editor.hasFocus()&&n._editor.focus()},n._onBlur=function(e){var t=n.props.onBlur,o=void 0===t?c.NullFunction:t;n._hasPlaceholder=!1,null!==n._updateContentToViewState()&&n._refreshPlaceholder(),o(e)},n._onDragEnter=function(e){var t=n.props.onDragEnter;(void 0===t?c.NullFunction:t)(e)},n._onDragLeave=function(e){var t=n.props.onDragLeave;(void 0===t?c.NullFunction:t)(e)},n._onDragOver=function(e){var t=n.props.onDragOver;(void 0===t?c.NullFunction:t)(e)},n._onFocus=function(e){var t=n.props.onFocus;(void 0===t?c.NullFunction:t)(e)},n._onFocusNative=function(e){var t=!1;n._placeholderVisible&&(n._placeholderVisible=!1,t=!0),n._trySwithToEditMode(t)&&n._editor.focus()},n._onDrop=function(e){var t=n.props.onDrop,o=void 0===t?c.NullFunction:t;n._contentDiv&&n.focus(),o(e)},n._contentDivOnRef=function(e){var t=n.props,o=t.contentDivRef,r=void 0===o?c.NullFunction:o,i=t.plugins;n._contentDiv&&n._contentDiv.removeEventListener("focus",n._onFocusNative),e&&e.addEventListener("focus",n._onFocusNative),n._contentDiv=e,i.forEach((function(t){return t.initializeContentEditable&&t.initializeContentEditable(e)})),r(e)},n._setInitialReactContent(!0),n._editorOptions=n._createEditorOptions(),n}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.isRtl,n=e.readonly;return(a.createElement("div",i({},c.getDataAndAriaProps(this.props),{className:this._getClassName(this.props),"data-placeholder":this.props.placeholder,contentEditable:!n,dir:this._getDirValue(t),onBlur:this._onBlur,onFocus:this._onFocus,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onDragEnter:this._onDragEnter,onDragLeave:this._onDragLeave,onDragOver:this._onDragOver,onDrop:this._onDrop,ref:this._contentDivOnRef,style:d,suppressContentEditableWarning:!0,tabIndex:0,dangerouslySetInnerHTML:this._initialContent,"aria-multiline":"true",role:"textbox"})))},t.prototype.componentDidMount=function(){var e=this.props,t=e.readonly,n=e.activateRoosterOnMount,o=e.activateInViewMode;!t&&n?o?(this._editor=new s.Editor(this._contentDiv,this._editorOptions),this._updateContentToViewState(!0)):this._trySwithToEditMode():this._hasPlaceholder||this._refreshPlaceholder()},t.prototype.componentWillUnmount=function(){this._updateContentToViewState(),this._editor&&(this._editor.dispose(),this._editor=null)},t.prototype.componentWillReceiveProps=function(e,t){var n=this._contentDiv;if(n){var o=e.className,r=e.readonly,i=e.isRtl,a=e.placeholder;o!==this.props.className&&n.setAttribute("class",this._getClassName(e)),r!==this.props.readonly&&(r?n.classList.add("readonly"):n.classList.remove("readonly"),n.setAttribute("contentEditable",(!r).toString())),i!==this.props.isRtl&&n.setAttribute("dir",this._getDirValue(i)),a!==this.props.placeholder&&n.setAttribute("data-placeholder",null==a?"":a)}},t.prototype.shouldComponentUpdate=function(){return!1},Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(e){1===e?this._trySwithToEditMode():this._trySwitchToViewMode()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasActivated",{get:function(){return!!this._editor},enumerable:!0,configurable:!0}),t.prototype.hasPlaceholder=function(){return this._hasPlaceholder},t.prototype.focus=function(){this._editor?this._editor.focus():this._contentDiv&&this._contentDiv.focus()},t.prototype.reloadContent=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=this.props.viewState;this._editor?(this._editor.setContent(n.content,e),t&&this._editorOptions.undo&&(this._editorOptions.undo.clear(),this._editor.addUndoSnapshot()),this._refreshPlaceholder()):(this._setInitialReactContent(),this.forceUpdate(this._refreshPlaceholder))},t.prototype.triggerContentChangedEvent=function(e){this._editor&&this._editor.triggerContentChangedEvent(e)},t.prototype.selectAll=function(){var e=this._contentDiv;if(e)if(this._editor&&!this._editor.isDisposed()){(t=this._editor.getDocument().createRange()).selectNodeContents(e),this._editor.select(t)}else{var t;(t=e.ownerDocument.createRange()).selectNodeContents(e);var n=window.getSelection();try{n.removeAllRanges()}catch(e){}n.addRange(t)}},t.prototype.isEmpty=function(){var e=this.props,t=e.trimWithEmptyCheck,n=void 0!==t&&t,o=e.thresholdForIsEmptyCheck,r=e.viewState,i=e.isEmptyFunction,a=void 0===i?l.isNodeEmpty:i;return this._contentDiv?!(o&&this._contentDiv.innerHTML.length>=o)&&a(this._contentDiv,n):!r.content||0===r.content.length},t.prototype.getContent=function(){return this._editor?this._editor.getContent():this._contentDiv.innerHTML},t.prototype._getClassName=function(e){var t=e.className,n=e.readonly,o=0===this.mode?"view-mode":"edit-mode";return c.css("lean-rooster",t,o,{readonly:n,"show-placeholder":this._placeholderVisible})},t.prototype._getDirValue=function(e){return e?"rtl":"ltr"},t.prototype._setInitialReactContent=function(e){void 0===e&&(e=!1);var t=this.props.viewState,n=null!=t.content&&t.content.length>0;e&&(this._hasPlaceholder=this.props.placeholder&&!n,this._placeholderVisible=this._hasPlaceholder),this._initialContent=n?{__html:t.content}:void 0},t.prototype._updateContentToViewState=function(e){if(this._editor&&!this._editor.isDisposed()){var t=this.props,n=t.updateViewState,o=void 0===n?this._updateViewState:n,r=t.viewState,i=this._editor.getContent();return o(r,i,e),i}return null},t.prototype._createEditorOptions=function(){var e=this.props,t=e.plugins,n=void 0===t?[]:t,o=e.undo,r=void 0===o?new s.Undo:o,a=e.defaultFormat,l=void 0===a?{}:a,c=e.contentEditFeatures,d=e.enableRestoreSelectionOnFocus,f=e.coreApiOverride,h=e.sanitizeAttributeCallbacks;return{plugins:[new u.ContentEdit(i({},u.getDefaultContentEditFeatures(),{defaultShortcut:!1,smartOrderedList:!0},c)),new u.HyperLink(this._hyperlinkToolTipCallback,void 0,this._onHyperlinkClick),new u.Paste(null,i({istemptitle:function(e){return e}},h))].concat(n),defaultFormat:l,undo:r,disableRestoreSelectionOnFocus:!d,omitContentEditableAttributeChanges:!0,coreApiOverride:f}},t.prototype._trySwithToEditMode=function(e){void 0===e&&(e=!1);var t=this.props,n=t.readonly,o=t.onBeforeModeChange,r=void 0===o?c.NullFunction:o,i=t.onAfterModeChange,a=void 0===i?c.NullFunction:i;if(n)return!1;if(1===this.mode)return e&&this.forceUpdate(),!1;if(!r(1)){var l=!this._editor;return l&&(this._editor=new s.Editor(this._contentDiv,this._editorOptions)),this._mode=1,this._updateContentToViewState(l),this.forceUpdate(),a(1),!0}},t.prototype._trySwitchToViewMode=function(){var e=this.props,t=e.onBeforeModeChange,n=void 0===t?c.NullFunction:t,o=e.onAfterModeChange,r=void 0===o?c.NullFunction:o;return 0!==this.mode&&(!n(0)&&(this._updateContentToViewState(),this._mode=0,this.forceUpdate(),r(0),!0))},t.prototype._getAnchorForClickOpenHyperlink=function(e,t){var n=this.props,o=n.clickOpenHyperlinkViewMode,r=n.readonly;if(!(0===e.button)||!o||r||0!==this.mode)return null;var i=l.Browser.isMac?e.metaKey:e.ctrlKey;if(this._editor&&i||l.Browser.isFirefox&&i)return null;var a=l.findClosestElementAncestor(t,this._contentDiv,"a[href]");return a||null},t}(a.Component);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11).loadStyles([{rawString:".lean-rooster{padding:4px}.lean-rooster img{max-width:100%;-ms-flex-item-align:center;align-self:center}.lean-rooster.show-placeholder::before{color:rgba(0,0,0,0.55);content:attr(data-placeholder);cursor:text;font-style:italic;pointer-events:none}\n"}])},function(e,t,n){"use strict";function o(e,t){var n=t.title;t.key=""+e+n.replace(/\s/g,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.FontColorInfoList=[{title:"Light Blue",color:"#51a7f9"},{title:"Light Green",color:"#6fc040"},{title:"Light Yellow",color:"#f5d427"},{title:"Light Orange",color:"#f3901d"},{title:"Light Red",color:"#ed5c57"},{title:"Light Purple",color:"#b36ae2"},{title:"Blue",color:"#0c64c0"},{title:"Green",color:"#0c882a"},{title:"Yellow",color:"#dcbe22"},{title:"Orange",color:"#de6a19"},{title:"Red",color:"#c82613"},{title:"Purple",color:"#763e9b"},{title:"Dark Blue",color:"#174e86"},{title:"Dark Green",color:"#0f5c1a"},{title:"Dark Yellow",color:"#c3971d"},{title:"Dark Orange",color:"#be5b17"},{title:"Dark Red",color:"#861106"},{title:"Dark Purple",color:"#5e327c"},{title:"Darker Blue",color:"#002451"},{title:"Darker Green",color:"#06400c"},{title:"Darker Yellow",color:"#a37519"},{title:"Darker Orange",color:"#934511"},{title:"Darker Red",color:"#570606"},{title:"Darker Purple",color:"#3b204d"},{title:"White",color:"#ffffff",cellBorderColor:"#bebebe"},{title:"Light Gray",color:"#cccccc"},{title:"Gray",color:"#999999"},{title:"Dark Gray",color:"#666666"},{title:"Darker Gray",color:"#333333"},{title:"Black",color:"#000000"}],t.HighlightColorInfoList=[{title:"Cyan",color:"#00ffff"},{title:"Green",color:"#00ff00"},{title:"Yellow",color:"#ffff00"},{title:"Orange",color:"#ff8000"},{title:"Red",color:"#ff0000"},{title:"Magenta",color:"#ff00ff"},{title:"Light Cyan",color:"#80ffff"},{title:"Light Green",color:"#80ff80"},{title:"Light Yellow",color:"#ffff80"},{title:"Light Orange",color:"#ffc080"},{title:"Light Red",color:"#ff8080"},{title:"Light Magenta",color:"#ff80ff"},{title:"White",color:"#ffffff",cellBorderColor:"#bebebe"},{title:"Light Gray",color:"#cccccc"},{title:"Gray",color:"#999999"},{title:"Dark Gray",color:"#666666"},{title:"Darker Gray",color:"#333333"},{title:"Black",color:"#000000"}],t.FontColorInfoList.forEach(o.bind(this,"fontColor")),t.HighlightColorInfoList.forEach(o.bind(this,"highlight"))},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(2),a=n(94),s=n(226);t.InsertLinkStringKeys={LinkFieldLabel:"linkFieldLabel",Title:"linkPromptTitle",InsertButton:"insertLinkText",CancelButton:"cancelLinkText"};var l=function(){function e(e){void 0===e&&(e={}),this.options=e,this.commandBars=[]}return e.prototype.getName=function(){return"RoosterCommandBar"},e.prototype.initialize=function(e){if(this.editor=e,e)this.editor.getDocument()},e.prototype.dispose=function(){var e=this;this.dialogDismiss&&(this.dialogDismiss(),this.dialogDismiss=null),this.editor&&(this.editor=null),this.commandBars.length>0&&(this.commandBars.forEach((function(t,n){return e.commandBars[n]=void 0})),this.commandBars=[])},e.prototype.onPluginEvent=function(t){this.commandBars&&e.EventTypesToRefreshFormatState[t.eventType]?this.commandBars.forEach((function(e){return e.refreshFormatState()})):0===t.eventType&&this.handleShortcuts(t)},e.prototype.handleShortcuts=function(e){var t=e.rawEvent;if(!t.defaultPrevented){var n=s.getCommandFromEvent(e);if("None"!==n){var o=this.options,a=o.disableListWorkaround,l=o.onShortcutTriggered,u=void 0===l?i.NullFunction:l,c=this.editor,d=!0;switch(n){case"Bold":r.toggleBold(c);break;case"Italic":r.toggleItalic(c);break;case"Underline":r.toggleUnderline(c);break;case"Undo":c.undo();break;case"Redo":c.redo();break;case"Bullet":(a?i.toggleNonCompatBullet:r.toggleBullet)(c);break;case"Numbering":(a?i.toggleNonCompatNumbering:r.toggleNumbering)(c);break;case"InsertLink":this.promptForLink();break;case"ClearFormat":this.clearFormat();break;default:d=!1}d&&(u(n),t.preventDefault(),t.stopPropagation())}}},e.prototype.getEditor=function(){return this.editor},e.prototype.registerRoosterCommandBar=function(e){this.commandBars.indexOf(e)<0&&this.commandBars.push(e)},e.prototype.unregisterRoosterCommandBar=function(e){var t=this.commandBars.indexOf(e);t>=0&&this.commandBars.splice(t,1)},e.prototype.promptForLink=function(){var e=this.options,t=e.strings,n=void 0===t?{}:t,o=e.calloutOnDismiss,r=e.calloutClassName,i=e.linkDialogClassName;this.dialogDismiss=a.createLinkDialog(document,{editor:this.editor,strings:n,onDismiss:o,className:i},r)},e.prototype.clearFormat=function(){var e=this,t=this.editor;this.editor.addUndoSnapshot((function(){e.options.useLegacyClearFormat?(r.clearFormat(t),r.toggleHeader(t,0)):r.clearBlockFormat(t)}))},e.EventTypesToRefreshFormatState=((o={})[2]=!0,o[4]=!0,o[5]=!0,o[6]=!0,o),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11).loadStyles([{rawString:"div.modal_9e2a2401{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:250px 0 10px;position:static}\n"}]),t.modal="modal_9e2a2401"},function(e,t){e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=[{metaKey:!0,ctrlKey:!1,shiftKey:!1,which:66,command:"Bold"},{metaKey:!0,ctrlKey:!1,shiftKey:!1,which:73,command:"Italic"},{metaKey:!0,ctrlKey:!1,shiftKey:!1,which:85,command:"Underline"},{metaKey:!0,ctrlKey:!1,shiftKey:!1,which:90,command:"Undo"},{metaKey:!0,ctrlKey:!1,shiftKey:!0,which:90,command:"Redo"},{metaKey:!0,ctrlKey:!1,shiftKey:!1,which:190,command:"Bullet"},{metaKey:!0,ctrlKey:!1,shiftKey:!1,which:191,command:"Numbering"},{metaKey:!0,ctrlKey:!1,shiftKey:!1,which:75,command:"InsertLink"},{metaKey:!0,ctrlKey:!1,shiftKey:!1,which:32,command:"ClearFormat"}],i=[{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:66,command:"Bold"},{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:73,command:"Italic"},{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:85,command:"Underline"},{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:90,command:"Undo"},{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:89,command:"Redo"},{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:190,command:"Bullet"},{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:191,command:"Numbering"},{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:75,command:"InsertLink"},{metaKey:!1,ctrlKey:!0,shiftKey:!1,which:32,command:"ClearFormat"}];t.getCommandFromEvent=function(e){if(0!==e.eventType)return"None";for(var t=o.Browser.isMac?r:i,n=e.rawEvent,a=0,s=t;a<s.length;a++){var l=s[a];if(!n.altKey&&l.ctrlKey===n.ctrlKey&&l.metaKey===n.metaKey&&l.shiftKey===n.shiftKey&&l.which===n.which)return l.command}return"None"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(228);t.EmojiPlugin=o.default},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(97),i=n(24),a=n(6),s=n(96),l=n(3),u=n(1),c=n(2),d=n(229),f=n(25),h=n(98),p=/([\u0023-\u0039][\u20e3]|[\ud800-\udbff][\udc00-\udfff]|[\u00a9-\u00ae]|[\u2122-\u3299])*([:;][^:]*)/,m=function(){function e(e){void 0===e&&(e={});var t=this;this.options=e,this._onModeChanged=function(e){0!==e&&t._removeAutoCompleteAriaAttributes()},this._paneRef=function(e){t._pane=e},this._calloutRef=function(e){t._callout=e},this._calloutOnDismissInternal=function(e){t._setIsSuggesting(!1),t.options.calloutOnDismiss&&t.options.calloutOnDismiss(e)},this._onSelectFromPane=function(e,n){e!==f.MoreEmoji?t._insertEmoji(e,n):t._pane.showFullPicker(n)},this._async=new i.Async,this._refreshCalloutDebounced=this._async.debounce((function(){return t._refreshCallout()}),100),this._strings=e.strings}return e.prototype.getName=function(){return"Emoji"},e.prototype.initialize=function(e){this._editor=e;var t=e.getDocument();this._contentDiv=t.createElement("div"),t.body.appendChild(this._contentDiv)},e.prototype.initializeContentEditable=function(e){this._contentEditable=e},e.prototype.setStrings=function(e){this._strings=e},e.prototype.dispose=function(){this._setIsSuggesting(!1),this._contentDiv&&(s.unmountComponentAtNode(this._contentDiv),this._contentDiv.parentElement.removeChild(this._contentDiv),this._contentDiv=null),this._editor=null,this._contentEditable=null,this._async&&(this._async.dispose(),this._async=null)},e.prototype.willHandleEventExclusively=function(e){return this._isSuggesting&&(0===e.eventType||2===e.eventType||5===e.eventType)},e.prototype.onPluginEvent=function(e){var t=e,n=t.rawEvent;0===e.eventType?(this._eventHandledOnKeyDown=!1,this._isSuggesting?this._onKeyDownSuggestingDomEvent(t):8===n.which&&this._canUndoEmoji&&(this._editor.undo(),this._handleEventOnKeyDown(t),this._canUndoEmoji=!1)):2!==e.eventType||this._isModifierKey(n.key)?5===e.eventType&&(this._canUndoEmoji=!1,this._setIsSuggesting(!1)):this._isSuggesting?this._onKeyUpSuggestingDomEvent(t):this._onKeyUpDomEvent(t)},e.prototype.startEmoji=function(e){void 0===e&&(e=":");var t=this._editor;t&&(this._setIsSuggesting(!0),t.insertContent(e),this._triggerChangeEvent())},e.prototype._setIsSuggesting=function(e,t){var n=this;void 0===t&&(t=!0),this._isSuggesting!==e&&(this._isSuggesting=e,this._isSuggesting?(s.render(this._getCallout(),this._contentDiv),setTimeout((function(){var e=n._contentEditable;e&&(e.setAttribute(c.AriaAttributes.AutoComplete,"list"),e.setAttribute(c.AriaAttributes.Owns,n._pane.listId),e.setAttribute(c.AriaAttributes.ActiveDescendant,n._pane.getEmojiElementIdByIndex(0)))}),0),this._editor.saveSelectionRange()):(s.unmountComponentAtNode(this._contentDiv),this._removeAutoCompleteAriaAttributes(),t&&this._editor.restoreSavedRange()))},e.prototype._removeAutoCompleteAriaAttributes=function(){var e=this._contentEditable;e&&(e.removeAttribute(c.AriaAttributes.AutoComplete),e.removeAttribute(c.AriaAttributes.Owns),e.removeAttribute(c.AriaAttributes.ActiveDescendant))},e.prototype._onKeyDownSuggestingDomEvent=function(e){var t,n=e.rawEvent,o=this._pane.getSelectedEmoji(),r=this._getWordBeforeCursor(e);switch(n.which){case 32:(t=r?h.matchShortcut(r):null)||this._setIsSuggesting(!1,!1);break;case 13:if(this._tryShowFullPicker(e,o,r))break;t=this._timer?h.matchShortcut(r):o;break;case 37:case 39:var i=this._pane.navigate(37===n.which?-1:1);i>=0&&this._contentEditable.setAttribute(c.AriaAttributes.ActiveDescendant,this._pane.getEmojiElementIdByIndex(i)),this._handleEventOnKeyDown(e);break;case 27:this._setIsSuggesting(!1),this._handleEventOnKeyDown(e)}t&&(this._canUndoEmoji=this._insertEmoji(t,r))&&this._handleEventOnKeyDown(e)},e.prototype._tryShowFullPicker=function(e,t,n){return t===f.MoreEmoji&&(this._handleEventOnKeyDown(e),this._pane.showFullPicker(n),!0)},e.prototype._onKeyUpSuggestingDomEvent=function(e){var t=this;if(!this._eventHandledOnKeyDown){var n=e.rawEvent;(1===n.key.length&&32!==n.which||8===n.which)&&(window.clearTimeout(this._timer),this._timer=null);var o=this._getWordBeforeCursor(e);o?this._timer=window.setTimeout((function(){t._pane&&(t._pane.setSearch(o),t._timer=null)}),300):this._setIsSuggesting(!1)}},e.prototype._onKeyUpDomEvent=function(e){if(!this._eventHandledOnKeyDown){var t=e.rawEvent,n=this._getWordBeforeCursor(e);if(186!==t.which&&59!==t.which||":"!==n){if(n){var o=u.cacheGetContentSearcher(e,this._editor),r=o?o.getSubStringBefore(1):null;if(t.key===r){var i=h.matchShortcut(n);i&&this._insertEmoji(i,n)&&(u.clearContentSearcherCache(e),this._canUndoEmoji=!0)}}}else{var a=this.options.onKeyboardTriggered,s=void 0===a?c.NullFunction:a;this._setIsSuggesting(!0),s()}}},e.prototype._insertEmoji=function(e,t){var n=this,o=!1;this._editor.addUndoSnapshot();var r=this._editor.getDocument().createElement("span");return r.innerText=e.codePoint,t&&l.replaceWithNode(this._editor,t,r,!1)?(o=!0,this._canUndoEmoji=!0,window.requestAnimationFrame((function(){n._editor&&n._editor.contains(r)&&(n._editor.select(r,-3),n._editor.addUndoSnapshot())}))):o=this._editor.insertNode(r),o&&this._triggerChangeEvent(),this._tryPatchEmojiFont(),this._setIsSuggesting(!1),o},e.prototype._triggerChangeEvent=function(){this._editor.triggerContentChangedEvent("Emoji")},e.prototype._isModifierKey=function(e){return"Shift"===e||"Control"===e||"Alt"===e||"Command"===e},e.prototype._handleEventOnKeyDown=function(e){this._eventHandledOnKeyDown=!0,e.rawEvent.preventDefault(),e.rawEvent.stopImmediatePropagation()},e.prototype._getCallout=function(){var e=this.options,t=e.calloutClassName,n=e.emojiPaneProps,i=void 0===n?{}:n,s=this._editor.getCursorRect(),l={x:s.left,y:(s.top+s.bottom)/2},u=(s.bottom-s.top)/2+5;return a.createElement(r.Callout,{className:t,target:l,directionalHint:7,isBeakVisible:!1,gapSpace:u,onDismiss:this._calloutOnDismissInternal,ref:this._calloutRef},a.createElement(d.default,o({},i,{ref:this._paneRef,onSelect:this._onSelectFromPane,strings:this._strings||{},onLayoutChanged:this._refreshCalloutDebounced,onModeChanged:this._onModeChanged,navBarProps:i.navBarProps,statusBarProps:i.statusBarProps,searchDisabled:!this._strings||i.searchDisabled,hideStatusBar:!this._strings})))},e.prototype._refreshCallout=function(){this._callout.forceUpdate()},e.prototype._tryPatchEmojiFont=function(){var e=this._editor.getSelectionRange(),t=e?this._editor.getInlineElementAtNode(e.startContainer):null,n=t?t.getParentBlock():null;if(n){var o=n.getStartNode(),r=o.style.fontFamily;if(r&&r.toLowerCase().indexOf("emoji")<0)return o.style.fontFamily=r+",EmojiFont,'Apple Color Emoji','Segoe UI Emoji', NotoColorEmoji,'Segoe UI Symbol','Android Emoji',EmojiSymbols",!0}return!1},e.prototype._getWordBeforeCursor=function(e){var t=u.cacheGetContentSearcher(e,this._editor),n=t?t.getWordBefore():null,o=p.exec(n);return o&&o.length>2&&o[0]===n?o[2]:null},e}();t.default=m},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(97),s=n(23),l=n(95),u=n(6),c=n(2),d=n(25),f=n(98),h=n(99),p=n(230),m=n(231),g=n(233),v=7,y=5,b=6,C=40,E=[38,40],_=[37,39,38,40,36,35],S={isBeakVisible:!0,beakWidth:16,gapSpace:0,setInitialFocus:!0,doNotLayer:!1,directionalHint:5},O=function(e){function t(n){var o=e.call(this,n)||this;return o._baseId=t.IdCounter++,o._listId="EmojiPane"+o._baseId,o._onSearchFocus=function(e){o._input=e.target},o._onSearchKeyPress=function(e){if(e&&13===e.which){var t=o.state,n=t.index,r=t.currentEmojiList;n>=0&&r&&r.length>0&&o._onSelect(e,r[n])}},o._onSearchKeyDown=function(e){if(e&&!(_.indexOf(e.which)<0)){e.preventDefault(),e.stopPropagation();var t=o._emojiBody;if(36===e.which)return o.setState({index:0}),void(t.scrollTop=0);if(35===e.which)return o.setState({index:o.state.currentEmojiList.length-1}),void(t.scrollTop=t.scrollHeight);var n=E.indexOf(e.which)<0?0:1,r=o.navigate(37===e.which||38===e.which?-1:1,n);if(r>-1){var i=2===o.state.mode?y:b,a=Math.floor(r/v),s=t.scrollTop,l=a*C;if(s<=l&&s+i*C>=l+C)return;t.scrollTop=a*C}}},o._onEmojiBodyRef=function(e){o._emojiBody=e},o._pivotClick=function(e){var t=e;o.setState({currentEmojiList:d.default[t],currentFamily:t})},o._getTabId=function(e){return"family_"+e+"_"+o._baseId},o._searchRefCallback=function(e){o._searchBox=e,o._searchBox&&(o._searchBox.focus(),o._searchBox.setSelectionStart(o._searchBox.value.length))},o._focusZoneRefCallback=function(e){if(o.props.searchDisabled&&e&&e.focus(),o._input){o._input.removeAttribute(c.AriaAttributes.ActiveDescendant);var t=o._getEmojiIconId(o.getSelectedEmoji());t&&setTimeout((function(){return o._input.setAttribute(c.AriaAttributes.ActiveDescendant,t)}),0)}},o._onSearchChange=function(e){var t=o._normalizeSearchText(e,!1),n=0===t.length?2:1;o.setState({index:2===n?-1:0,currentEmojiList:o._getSearchResult(t,o.state.mode),searchInBox:e,mode:n})},o._onSelect=function(e,t){e.stopPropagation(),e.preventDefault(),o.props.onSelect&&o.props.onSelect(t,o.state.search)},o.state={index:0,mode:0,currentEmojiList:d.CommonEmojis,currentFamily:"People",search:":",searchInBox:""},o}return r(t,e),t.prototype.render=function(){return 0===this.state.mode?this._renderQuickPicker():this._renderFullPicker()},t.prototype.componentDidUpdate=function(e,t){var n=this.props,o=n.onLayoutChanged,r=n.onModeChanged,i=this.state,a=i.currentEmojiList,s=i.mode,l=i.currentFamily;if(s!==t.mode)return r(s,t.mode),void o();var u=a?a.length:d.default[l].length,c=t.currentEmojiList?t.currentEmojiList.length:d.default[t.currentFamily].length;0===s||u===c||o()},t.prototype.navigate=function(e,t){void 0===t&&(t=0);var n=this.state,o=n.index,r=n.currentEmojiList;1===t&&-1!==o&&(e*=v);var i=o+e,a=r.length;return i>=0&&i<a?(this.setState({index:i}),i):-1},t.prototype.getEmojiElementIdByIndex=function(e){var t=this.state.currentEmojiList[e];return t?this._getEmojiIconId(t):null},t.prototype.getSelectedEmoji=function(){var e=this.state;return e.currentEmojiList[e.index]},t.prototype.showFullPicker=function(e){var t=this._normalizeSearchText(e,!0),n=0===t.length?2:1;this.setState({index:2===n?-1:0,mode:n,currentEmojiList:this._getSearchResult(t,n),search:e,searchInBox:t})},t.prototype.setSearch=function(e){var t=this._normalizeSearchText(e,!1);this.setState({index:0,currentEmojiList:this._getSearchResult(t,this.state.mode),search:e})},Object.defineProperty(t.prototype,"listId",{get:function(){return this._listId},enumerable:!0,configurable:!0}),t.prototype._normalizeSearchText=function(e,t){return null==e?"":(t&&(e=e.substr(1)),e.trim())},t.prototype._getSearchResult=function(e,t){var n=0===t;if(!e)return n?this.state.currentEmojiList:d.default[this.state.currentFamily];var o=f.searchEmojis(e,this.props.strings);return n?o.slice(0,5).concat([d.MoreEmoji]):o},t.prototype._renderQuickPicker=function(){var e=this.props,t=e.quickPickerClassName,n=e.tooltipClassName,o=e.strings,r=this.getSelectedEmoji(),s=r?"#"+this._getEmojiIconId(r):void 0,l=r?o[r.description]:void 0;return u.createElement("div",{id:this._listId,role:"listbox",className:c.css(h.quickPicker,"rooster-emoji-pane","quick-picker",t)},this._renderCurrentEmojiIcons(),u.createElement(a.Callout,i({},S,{role:"tooltip",target:s,hidden:!l,className:c.css(h.tooltip,n)}),l))},t.prototype._renderFullPicker=function(){var e,t=this.props,n=t.fullPickerClassName,o=t.searchDisabled,r=t.searchPlaceholder,a=t.searchInputAriaLabel,s=this._getEmojiIconId(this.getSelectedEmoji()),d=((e={})[c.AriaAttributes.AutoComplete]="list",e[c.AriaAttributes.Expanded]="true",e[c.AriaAttributes.HasPopup]="listbox",e[c.AriaAttributes.Owns]=this._listId,e);return s&&(d[c.AriaAttributes.ActiveDescendant]=s),u.createElement("div",{className:c.css("rooster-emoji-pane",n)},!o&&u.createElement(l.TextField,i({role:"combobox",ref:this._searchRefCallback,value:this.state.searchInBox,onChanged:this._onSearchChange,inputClassName:h.emojiTextInput,onKeyPress:this._onSearchKeyPress,onKeyDown:this._onSearchKeyDown,onFocus:this._onSearchFocus,placeholder:r,ariaLabel:a},d)),2===this.state.mode?this._renderFullList():this._renderPartialList())},t.prototype._renderCurrentEmojiIcons=function(){var e=this,t=this.props,n=t.strings,o=t.emojiIconProps,r=this.state.currentEmojiList;return r.map((function(t,a){return u.createElement(p.default,i({strings:n},o,{id:e._getEmojiIconId(t),key:t.key,onMouseOver:function(){return e.setState({index:a})},onFocus:function(){return e.setState({index:a})},emoji:t,isSelected:a===e.state.index,onClick:function(n){return e._onSelect(n,t)},"aria-posinset":a+1,"aria-setsize":r.length}))}))},t.prototype._getEmojiIconId=function(e){return e?this._listId+"-"+e.key:void 0},t.prototype._renderPartialList=function(){var e=this.props,t=e.partialListClassName,n=e.strings,o=e.hideStatusBar,r=e.statusBarProps,a=this.state.currentEmojiList,l=a&&a.length>0;return u.createElement("div",null,u.createElement("div",{className:c.css(h.partialList,t),"data-is-scrollable":!0,tabIndex:-1,ref:this._onEmojiBodyRef},u.createElement(s.FocusZone,{id:this._listId,role:"listbox",className:h.partialListContent,ref:this._focusZoneRefCallback},this._renderCurrentEmojiIcons())),!o&&u.createElement(g.default,i({strings:n},r,{hasResult:l,emoji:this.getSelectedEmoji()})))},t.prototype._renderFullList=function(){var e=this.props,t=e.fullListClassName,n=e.fullListContentClassName,o=e.strings,r=e.hideStatusBar,a=e.navBarProps,l=e.statusBarProps,d=this.state.currentEmojiList,f=d&&d.length>0;return u.createElement("div",{className:c.css(h.fullList,t)},u.createElement("div",{className:h.fullListBody,"data-is-scrollable":!0,tabIndex:-1,ref:this._onEmojiBodyRef},u.createElement(m.default,i({strings:o},a,{onClick:this._pivotClick,currentSelected:this.state.currentFamily,getTabId:this._getTabId})),u.createElement("div",{className:h.fullListContentContainer,role:"tabpanel","aria-labelledby":this._getTabId(this.state.currentFamily)},u.createElement("div",null,u.createElement(s.FocusZone,{id:this._listId,role:"listbox",className:c.css(h.fullListContent,n),ref:this._focusZoneRefCallback},this._renderCurrentEmojiIcons())))),!r&&u.createElement(g.default,i({strings:o},l,{hasResult:f,emoji:this.getSelectedEmoji()})))},t.IdCounter=0,t.defaultProps={onLayoutChanged:c.NullFunction,onModeChanged:c.NullFunction},t}(u.PureComponent);t.default=O},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(24),s=n(6),l=n(2),u=n(99),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t=this.props,n=t.emoji,o=t.onClick,r=t.isSelected,c=t.onMouseOver,d=t.onFocus,f=t.strings,h=t.id,p=t.className,m=t.selectedClassName,g=f[n.description];return s.createElement("button",i({id:h,role:"option",className:a.css(u.emoji,p,(e={"rooster-emoji-selected":r},e[m]=r,e)),onClick:o,onMouseOver:c,onFocus:d,"data-is-focusable":!0,"aria-label":g,"aria-selected":r},l.getDataAndAriaProps(this.props)),n.codePoint||"")},t}(s.Component);t.default=c},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),a=n(92),s=n(41),l=n(6),u=n(2),c=n(25),d=n(232),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.currentSelected,o=t.getTabId,r=t.strings,f=void 0===r?{}:r,h=t.className,p=t.buttonClassName,m=t.selectedButtonClassName,g=t.iconClassName,v=Object.keys(c.default);return l.createElement("div",{className:u.css(d.navBar,h),role:"tablist"},l.createElement(i.FocusZone,{direction:i.FocusZoneDirection.horizontal},v.map((function(t,r){var i,h=t===n,y=f[t];return l.createElement(s.TooltipHost,{hostClassName:d.navBarTooltip,content:y,key:t},l.createElement("button",{className:u.css(d.navBarButton,p,"emoji-nav-bar-button",(i={},i[d.selected]=h,i[m]=h,i)),key:t,onClick:e.onFamilyClick.bind(e,t),id:o(t),role:"tab","aria-selected":h,"aria-label":y,"data-is-focusable":"true","aria-posinset":r+1,"aria-setsize":v.length},l.createElement(a.Icon,{iconName:c.EmojiFabricIconCharacterMap[t],className:g})))}))))},t.prototype.onFamilyClick=function(e){this.props.onClick&&this.props.onClick(e)},t}(l.Component);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11).loadStyles([{rawString:".navBar_d3ee17b9{height:40px;position:absolute;left:0;z-index:10;padding:2px 1px 0;background:#fff}.navBarButton_d3ee17b9{background:#fff;height:40px;width:40px;border:0;border-bottom:solid 1px #dadada;display:inline-block;padding:0;margin:0}.navBarButton_d3ee17b9::-moz-focus-inner{border:0}.navBarButton_d3ee17b9:hover{background:#eaeaea;cursor:default}@media screen and (-ms-high-contrast: active){.navBarButton_d3ee17b9:hover{background-color:Highlight;color:HighlightText;-ms-high-contrast-adjust:none}}@media screen and (-ms-high-contrast: active){.navBarButton_d3ee17b9:hover .selected_d3ee17b9{border:1px solid Highlight;background:none}}.selected_d3ee17b9{border-bottom:2px solid #0078d4}@media screen and (-ms-high-contrast: active){.selected_d3ee17b9{border-bottom-color:Highlight}}.navBarTooltip_d3ee17b9{display:inline-block}\n"}]),t.navBar="navBar_d3ee17b9",t.navBarButton="navBarButton_d3ee17b9",t.selected="selected_d3ee17b9",t.navBarTooltip="navBarTooltip_d3ee17b9"},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(41),a=n(6),s=n(2),l=n(234),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.emoji,n=e.strings,o=e.className;if(!e.hasResult){var r=n.emjDNoSuggetions;return a.createElement("div",{className:s.css(l.statusBar,o)},a.createElement("div",{style:{display:"none"},"aria-live":"polite"},r),a.createElement("div",{className:l.statusBarNoResultDetailsContainer},a.createElement(i.TooltipHost,{content:r,overflowMode:i.TooltipOverflowMode.Parent},a.createElement("span",{role:"alert"},r))))}var u=t?t.codePoint:"",c=t?n[t.description]:"";return a.createElement("div",{className:s.css(l.statusBar,o)},a.createElement("i",{className:l.statusBarIcon,role:"presentation","aria-hidden":"true"},u),a.createElement("div",{className:l.statusBarDetailsContainer},a.createElement("div",{className:l.statusBarDetails},a.createElement(i.TooltipHost,{content:c,overflowMode:i.TooltipOverflowMode.Parent},c))))},t}(a.Component);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11).loadStyles([{rawString:".statusBar_e8b85e50{background-color:#f4f4f4;border-top:solid 1px #dadada;height:50px;overflow:hidden;position:relative}.statusBarIcon_e8b85e50{padding:4px;font-size:25px;display:inline-block;font-style:normal;font-weight:normal;line-height:40px}.statusBarDetailsContainer_e8b85e50,.statusBarNoResultDetailsContainer_e8b85e50{padding:0 4px;line-height:50px;position:absolute;display:inline-block;left:40px;right:0;top:0}.statusBarDetails_e8b85e50{font-weight:bold;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.statusBarNoResultDetailsContainer_e8b85e50{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;left:0;padding:0 8px}\n"}]),t.statusBar="statusBar_e8b85e50",t.statusBarIcon="statusBarIcon_e8b85e50",t.statusBarDetailsContainer="statusBarDetailsContainer_e8b85e50",t.statusBarNoResultDetailsContainer="statusBarNoResultDetailsContainer_e8b85e50",t.statusBarDetails="statusBarDetails_e8b85e50"}])}));
//# sourceMappingURL=rooster-react-amd-min.js.map

define("WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.RoosterJs.Emoji",["require","exports"],function(require,exports){var e=exports;e.Emoji_More="More";e.EmojiFamily_Activities="Activities";e.EmojiFamily_Nature="Nature";e.EmojiFamily_Objects="Objects";e.EmojiFamily_People="People";e.EmojiFamily_Travel="Travel";e.Emoji_1f004="Mahjong tile red dragon";e.Emoji_1f19a="Squared VS";e.Emoji_1f18e="Squared AB";e.Emoji_1f191="Squared CL";e.Emoji_1f193="Squared FREE";e.Emoji_1f192="Squared COOL";e.Emoji_1f195="Squared NEW";e.Emoji_1f194="Squared ID";e.Emoji_1f197="Squared OK";e.Emoji_1f196="Squared NG";e.Emoji_1f199="Squared UP!";e.Emoji_1f198="Squared SOS";e.Emoji_1f171="Squared Latin capital letter B";e.Emoji_1f170="Squared Latin capital letter A";e.Emoji_1f17f="Squared Latin capital letter P";e.Emoji_1f17e="Squared Latin capital letter O";e.Emoji_1f3b8="Guitar";e.Emoji_1f3b9="Musical keyboard";e.Emoji_1f3b0="Slot machine";e.Emoji_1f3b1="Billiards";e.Emoji_1f3b2="Game die";e.Emoji_1f3b3="Bowling";e.Emoji_1f3b4="Flower playing cards";e.Emoji_1f3b5="Musical note";e.Emoji_1f3b6="Multiple musical notes";e.Emoji_1f3b7="Saxophone";e.Emoji_1f3ca="Swimmer";e.Emoji_1f3ba="Trumpet";e.Emoji_1f3bb="Violin";e.Emoji_1f3bc="Musical score";e.Emoji_1f3bd="Running shirt with sash";e.Emoji_1f3be="Tennis racquet and ball";e.Emoji_1f3bf="Ski and ski boot";e.Emoji_1f3c8="American football";e.Emoji_1f3c1="Checkered flag";e.Emoji_1f3c0="Basketball and hoop";e.Emoji_1f3c3="Runner";e.Emoji_1f3c2="Snowboarder";e.Emoji_1f3c4="Surfer";e.Emoji_1f3c6="Trophy";e.Emoji_1f3f0="European castle";e.Emoji_1f3a9="Top hat";e.Emoji_1f3a8="Artist palette";e.Emoji_1f3a3="Fishing pole and fish";e.Emoji_1f3a2="Roller coaster";e.Emoji_1f3a1="Ferris wheel";e.Emoji_1f3a0="Carousel horse";e.Emoji_1f3a7="Headphones";e.Emoji_1f3a6="Cinema";e.Emoji_1f3a5="Movie camera";e.Emoji_1f3a4="Microphone";e.Emoji_1f3ac="Clapper board";e.Emoji_1f3ab="Ticket";e.Emoji_1f3aa="Circus tent";e.Emoji_1f3af="Direct hit";e.Emoji_1f3ae="Video game";e.Emoji_1f3ad="Performing arts";e.Emoji_1f3e9="Love hotel";e.Emoji_1f3e8="Hotel";e.Emoji_1f3e7="Automated teller machine";e.Emoji_1f3e6="Bank";e.Emoji_1f3e5="Hospital";e.Emoji_1f3e3="Japanese post office";e.Emoji_1f3e2="Office building";e.Emoji_1f3e1="House with garden";e.Emoji_1f3e0="House building";e.Emoji_1f3ef="Japanese castle";e.Emoji_1f3ee="Izakaya lantern";e.Emoji_1f3ed="Factory";e.Emoji_1f3ec="Department store";e.Emoji_1f3eb="School";e.Emoji_1f3ea="Convenience store";e.Emoji_1f22f="Squared CJK Unified Ideograph-6307";e.Emoji_1f23a="Squared CJK Unified Ideograph-55b6";e.Emoji_1f238="Squared CJK Unified Ideograph-7533";e.Emoji_1f239="Squared CJK Unified Ideograph-5272";e.Emoji_1f232="Squared CJK Unified Ideograph-7981";e.Emoji_1f233="Squared CJK Unified Ideograph-7a7a";e.Emoji_1f234="Squared CJK Unified Ideograph-5408";e.Emoji_1f235="Squared CJK Unified Ideograph-6e80";e.Emoji_1f236="Squared CJK Unified Ideograph-6709";e.Emoji_1f237="Squared CJK Unified Ideograph-6708";e.Emoji_1f202="Squared Katakana Sa";e.Emoji_1f201="Squared Katakana Koko";e.Emoji_1f21a="Squared CJK Unified Ideograph-7121";e.Emoji_1f250="Circled Ideograph advantage";e.Emoji_1f251="Circled Ideograph accept";e.Emoji_1f0cf="Playing card Joker";e.Emoji_1f382="Birthday cake";e.Emoji_1f383="Jack-o-lantern";e.Emoji_1f380="Ribbon";e.Emoji_1f381="Wrapped present";e.Emoji_1f386="Fireworks";e.Emoji_1f387="Firework sparkler";e.Emoji_1f384="Christmas tree";e.Emoji_1f385="Father Christmas";e.Emoji_1f388="Balloon";e.Emoji_1f389="Party popper";e.Emoji_1f38b="Tanabata tree";e.Emoji_1f38c="Crossed flags";e.Emoji_1f38a="Confetti ball";e.Emoji_1f38f="Carp streamer";e.Emoji_1f38d="Pine decoration";e.Emoji_1f38e="Japanese dolls";e.Emoji_1f393="Graduation cap";e.Emoji_1f392="School backpack";e.Emoji_1f391="Moon-viewing ceremony";e.Emoji_1f390="Wind chime";e.Emoji_1f320="Shooting star";e.Emoji_1f36d="Lollipop";e.Emoji_1f36e="Custard";e.Emoji_1f36f="Honey pot";e.Emoji_1f36a="Cookie";e.Emoji_1f36b="Chocolate bar";e.Emoji_1f36c="Candy";e.Emoji_1f308="Rainbow";e.Emoji_1f309="Bridge at night";e.Emoji_1f302="Closed umbrella";e.Emoji_1f303="Night with stars";e.Emoji_1f300="Cyclone";e.Emoji_1f301="Foggy";e.Emoji_1f306="Cityscape at dusk";e.Emoji_1f307="Sunset over buildings";e.Emoji_1f304="Sunrise over mountains";e.Emoji_1f305="Sunrise";e.Emoji_1f31b="First quarter moon with face";e.Emoji_1f31f="Glowing star";e.Emoji_1f339="Rose";e.Emoji_1f338="Cherry blossom";e.Emoji_1f331="Seedling";e.Emoji_1f330="Chestnut";e.Emoji_1f335="Cactus";e.Emoji_1f334="Palm tree";e.Emoji_1f337="Tulip";e.Emoji_1f30b="Volcano";e.Emoji_1f30c="Milky Way";e.Emoji_1f30a="Water wave";e.Emoji_1f30f="Earth globe Asia-Australia";e.Emoji_1f368="Ice cream";e.Emoji_1f369="Doughnut";e.Emoji_1f364="Fried shrimp";e.Emoji_1f365="Fish cake with swirl design";e.Emoji_1f366="Soft ice cream";e.Emoji_1f367="Shaved ice";e.Emoji_1f360="Roasted sweet potato";e.Emoji_1f361="Dango";e.Emoji_1f362="Oden";e.Emoji_1f363="Sushi";e.Emoji_1f33a="Hibiscus";e.Emoji_1f33c="Blossom";e.Emoji_1f33b="Sunflower";e.Emoji_1f33e="Ear of rice";e.Emoji_1f33d="Ear of corn";e.Emoji_1f33f="Herb";e.Emoji_1f319="Crescent moon";e.Emoji_1f313="First quarter moon";e.Emoji_1f311="New moon";e.Emoji_1f315="Full moon";e.Emoji_1f314="Waxing gibbous moon";e.Emoji_1f348="Melon";e.Emoji_1f349="Watermelon";e.Emoji_1f346="Eggplant";e.Emoji_1f347="Grapes";e.Emoji_1f344="Mushroom";e.Emoji_1f345="Tomato";e.Emoji_1f342="Fallen leaf";e.Emoji_1f343="Leaf fluttering in wind";e.Emoji_1f340="Four leaf clover";e.Emoji_1f341="Maple leaf";e.Emoji_1f35f="French fries";e.Emoji_1f35e="Bread";e.Emoji_1f35d="Spaghetti";e.Emoji_1f35c="Steaming bowl";e.Emoji_1f35b="Curry and rice";e.Emoji_1f35a="Cooked rice";e.Emoji_1f379="Tropical drink";e.Emoji_1f378="Cocktail glass";e.Emoji_1f375="Teacup without handle";e.Emoji_1f374="Fork and knife";e.Emoji_1f377="Wine glass";e.Emoji_1f376="Sake bottle and cup";e.Emoji_1f371="Bento box";e.Emoji_1f370="Shortcake";e.Emoji_1f373="Cooking";e.Emoji_1f372="Pot of food";e.Emoji_1f34f="Green apple";e.Emoji_1f34d="Pineapple";e.Emoji_1f34e="Red apple";e.Emoji_1f34c="Banana";e.Emoji_1f34a="Tangerine";e.Emoji_1f37a="Beer mug";e.Emoji_1f37b="Clinking beer mugs";e.Emoji_1f359="Rice ball";e.Emoji_1f358="Rice cracker";e.Emoji_1f357="Poultry leg";e.Emoji_1f356="Meat on bone";e.Emoji_1f355="Slice of pizza";e.Emoji_1f354="Hamburger";e.Emoji_1f353="Strawberry";e.Emoji_1f352="Cherries";e.Emoji_1f351="Peach";e.Emoji_1f485="Nail polish";e.Emoji_1f484="Lipstick";e.Emoji_1f487="Haircut";e.Emoji_1f486="Face massage";e.Emoji_1f481="Information desk person";e.Emoji_1f480="Skull";e.Emoji_1f483="Dancer";e.Emoji_1f482="Guardsman";e.Emoji_1f489="Syringe";e.Emoji_1f488="Barber pole";e.Emoji_1f494="Broken heart";e.Emoji_1f495="Two hearts";e.Emoji_1f496="Sparkling heart";e.Emoji_1f497="Growing heart";e.Emoji_1f490="Bouquet";e.Emoji_1f491="Couple with heart";e.Emoji_1f492="Wedding";e.Emoji_1f493="Beating heart";e.Emoji_1f498="Heart with arrow";e.Emoji_1f499="Blue heart";e.Emoji_1f48e="Gemstone";e.Emoji_1f48d="Ring";e.Emoji_1f48f="Kiss";e.Emoji_1f48a="Pill";e.Emoji_1f48c="Love letter";e.Emoji_1f48b="Kiss mark";e.Emoji_1f49d="Heart with ribbon";e.Emoji_1f49e="Revolving hearts";e.Emoji_1f49f="Heart decoration";e.Emoji_1f49a="Green heart";e.Emoji_1f49b="Yellow heart";e.Emoji_1f49c="Purple heart";e.Emoji_1f46b="Man and woman holding hands";e.Emoji_1f46a="Family";e.Emoji_1f46f="Woman with bunny ears";e.Emoji_1f46e="Police officer";e.Emoji_1f449="Right-pointing backhand index finger";e.Emoji_1f448="Left-pointing backhand index finger";e.Emoji_1f440="Eyes";e.Emoji_1f443="Nose";e.Emoji_1f442="Ear";e.Emoji_1f445="Tongue";e.Emoji_1f444="Mouth";e.Emoji_1f447="Down-pointing backhand index finger";e.Emoji_1f446="Up-pointing backhand index finger";e.Emoji_1f47b="Ghost";e.Emoji_1f47c="Baby angel";e.Emoji_1f47a="Japanese goblin";e.Emoji_1f47f="Imp";e.Emoji_1f47d="Extraterrestrial alien";e.Emoji_1f47e="Alien monster";e.Emoji_1f458="Kimono";e.Emoji_1f459="Bikini";e.Emoji_1f450="Open hands";e.Emoji_1f451="Crown";e.Emoji_1f452="Woman\u0027s hat";e.Emoji_1f453="Eyeglasses";e.Emoji_1f454="Necktie";e.Emoji_1f455="T-shirt";e.Emoji_1f456="Jeans";e.Emoji_1f457="Dress";e.Emoji_1f44a="Fist bump";e.Emoji_1f44c="OK hand";e.Emoji_1f44b="Waving hand";e.Emoji_1f44e="Thumbs down";e.Emoji_1f44d="Thumbs up";e.Emoji_1f44f="Clapping hands";e.Emoji_1f469="Woman";e.Emoji_1f468="Man";e.Emoji_1f463="Footprints";e.Emoji_1f462="Woman\u0027s boots";e.Emoji_1f461="Woman\u0027s sandal";e.Emoji_1f460="High-heeled shoe";e.Emoji_1f467="Girl";e.Emoji_1f466="Boy";e.Emoji_1f464="Bust in silhouette";e.Emoji_1f45a="Woman\u0027s clothes";e.Emoji_1f45b="Purse";e.Emoji_1f45c="Handbag";e.Emoji_1f45d="Pouch";e.Emoji_1f45e="Man\u0027s shoe";e.Emoji_1f45f="Athletic shoe";e.Emoji_1f478="Princess";e.Emoji_1f479="Japanese ogre";e.Emoji_1f472="Man with gua pi mao";e.Emoji_1f473="Man with turban";e.Emoji_1f470="Bride with veil";e.Emoji_1f471="Person with blond hair";e.Emoji_1f476="Baby";e.Emoji_1f477="Construction worker";e.Emoji_1f474="Older man";e.Emoji_1f475="Older woman";e.Emoji_1f42f="Tiger face";e.Emoji_1f42e="Cow face";e.Emoji_1f42d="Mouse face";e.Emoji_1f42c="Dolphin";e.Emoji_1f42b="Bactrian camel";e.Emoji_1f43d="Pig nose";e.Emoji_1f43e="Paw prints";e.Emoji_1f43b="Bear face";e.Emoji_1f43c="Panda face";e.Emoji_1f43a="Wolf face";e.Emoji_1f418="Elephant";e.Emoji_1f419="Octopus";e.Emoji_1f414="Chicken";e.Emoji_1f417="Boar";e.Emoji_1f411="Sheep";e.Emoji_1f412="Monkey";e.Emoji_1f40e="Horse";e.Emoji_1f40d="Snake";e.Emoji_1f40c="Snail";e.Emoji_1f429="Poodle";e.Emoji_1f428="Koala";e.Emoji_1f427="Penguin";e.Emoji_1f426="Bird";e.Emoji_1f425="Front-facing baby chick";e.Emoji_1f424="Baby chick";e.Emoji_1f423="Hatching chick";e.Emoji_1f422="Turtle";e.Emoji_1f421="Blowfish";e.Emoji_1f420="Tropical fish";e.Emoji_1f41d="Honeybee";e.Emoji_1f41e="Ladybug";e.Emoji_1f41f="Fish";e.Emoji_1f41a="Spiral shell";e.Emoji_1f41b="Bug";e.Emoji_1f41c="Ant";e.Emoji_1f438="Frog face";e.Emoji_1f439="Hamster face";e.Emoji_1f436="Dog face";e.Emoji_1f437="Pig face";e.Emoji_1f434="Horse face";e.Emoji_1f435="Monkey face";e.Emoji_1f432="Dragon face";e.Emoji_1f433="Spouting whale";e.Emoji_1f430="Rabbit face";e.Emoji_1f431="Cat face";e.Emoji_1f6b9="Men\u0027s symbol";e.Emoji_1f6b6="Pedestrian";e.Emoji_1f6b2="Bicycle";e.Emoji_1f6c0="Bath";e.Emoji_1f6ad="No smoking symbol";e.Emoji_1f6ab="No entry";e.Emoji_1f6ac="Smoking symbol";e.Emoji_1f6aa="Door";e.Emoji_1f6be="Water closet";e.Emoji_1f6bd="Toilet";e.Emoji_1f6ba="Women\u0027s symbol";e.Emoji_1f6bc="Baby symbol";e.Emoji_1f6bb="Restroom";e.Emoji_1f6a8="Police car\u0027s revolving light";e.Emoji_1f6a9="Triangular flag on post";e.Emoji_1f6a7="Construction";e.Emoji_1f6a4="Speedboat";e.Emoji_1f6a5="Horizontal traffic light";e.Emoji_1f6a2="Ship";e.Emoji_1f595="Middle finger";e.Emoji_1f596="Raised hand with part between middle and ring fingers";e.Emoji_1f590="Raised hand with fingers splayed";e.Emoji_1f55a="Clock face eleven o\u0027clock";e.Emoji_1f55b="Clock face twelve o\u0027clock";e.Emoji_1f559="Clock face ten o\u0027clock";e.Emoji_1f558="Clock face nine o\u0027clock";e.Emoji_1f551="Clock face two o\u0027clock";e.Emoji_1f550="Clock face one o\u0027clock";e.Emoji_1f553="Clock face four o\u0027clock";e.Emoji_1f552="Clock face three o\u0027clock";e.Emoji_1f555="Clock face six o\u0027clock";e.Emoji_1f554="Clock face five o\u0027clock";e.Emoji_1f557="Clock face eight o\u0027clock";e.Emoji_1f556="Clock face seven o\u0027clock";e.Emoji_1f52f="Six-pointed star with middle dot";e.Emoji_1f52e="Crystal ball";e.Emoji_1f52b="Pistol";e.Emoji_1f52a="Hocho";e.Emoji_1f503="Clockwise downward and upward open circle arrows";e.Emoji_1f51e="No one under eighteen";e.Emoji_1f51d="Top with upward arrow above";e.Emoji_1f51f="Keycap ten";e.Emoji_1f51a="End with left-facing arrow above";e.Emoji_1f51c="Soon with right-facing arrow above";e.Emoji_1f51b="On with exclamation mark with left right arrow above";e.Emoji_1f50d="Left-leaning magnifying glass";e.Emoji_1f50e="Right-leaning magnifying glass";e.Emoji_1f50f="Lock with ink pen";e.Emoji_1f50a="Speaker with three sound waves";e.Emoji_1f50b="Battery";e.Emoji_1f50c="Electric plug";e.Emoji_1f528="Hammer";e.Emoji_1f529="Nut and bolt";e.Emoji_1f526="Flashlight";e.Emoji_1f527="Wrench";e.Emoji_1f524="Input Latin letters";e.Emoji_1f525="Fire";e.Emoji_1f522="Input numbers";e.Emoji_1f523="Input symbols";e.Emoji_1f520="Input Latin uppercase";e.Emoji_1f521="Input Latin lowercase";e.Emoji_1f519="Back with left-facing arrow above";e.Emoji_1f518="Radio button";e.Emoji_1f514="Bell";e.Emoji_1f517="Link";e.Emoji_1f516="Bookmark";e.Emoji_1f511="Key";e.Emoji_1f510="Closed lock with key";e.Emoji_1f513="Open lock";e.Emoji_1f512="Lock";e.Emoji_1f539="Small blue diamond";e.Emoji_1f538="Small orange diamond";e.Emoji_1f537="Large blue diamond";e.Emoji_1f536="Large orange diamond";e.Emoji_1f535="Large blue circle";e.Emoji_1f534="Large red circle";e.Emoji_1f533="White square button";e.Emoji_1f532="Black square button";e.Emoji_1f531="Trident emblem";e.Emoji_1f530="Japanese symbol for beginner";e.Emoji_1f53d="Down-pointing small red triangle";e.Emoji_1f53c="Up-pointing small red triangle";e.Emoji_1f53b="Down-pointing red triangle";e.Emoji_1f53a="Up-pointing red triangle";e.Emoji_1f687="Metro";e.Emoji_1f685="High-speed train with bullet nose";e.Emoji_1f684="High-speed train";e.Emoji_1f683="Railway car";e.Emoji_1f680="Rocket";e.Emoji_1f689="Station";e.Emoji_1f697="Automobile";e.Emoji_1f695="Taxi";e.Emoji_1f692="Fire engine";e.Emoji_1f693="Police car";e.Emoji_1f691="Ambulance";e.Emoji_1f699="Recreational vehicle";e.Emoji_1f68f="Bus stop";e.Emoji_1f68c="Bus";e.Emoji_1f69a="Delivery truck";e.Emoji_1f62d="Loudly crying face";e.Emoji_1f62a="Sleepy face";e.Emoji_1f62b="Tired face";e.Emoji_1f649="Hear-no-evil monkey";e.Emoji_1f648="See-no-evil monkey";e.Emoji_1f642="Slightly smiling face";e.Emoji_1f641="Slightly frowning face";e.Emoji_1f640="Weary cat face";e.Emoji_1f647="Person bowing deeply";e.Emoji_1f646="Face with OK gesture";e.Emoji_1f645="Face with No Good gesture";e.Emoji_1f63d="Kissing cat face with closed eyes";e.Emoji_1f63e="Pouting cat face";e.Emoji_1f63f="Crying cat face";e.Emoji_1f63a="Smiling cat face with open mouth";e.Emoji_1f63b="Smiling cat face with heart-shaped eyes";e.Emoji_1f63c="Cat face with wry smile";e.Emoji_1f64c="Person raising both hands in celebration";e.Emoji_1f64b="Happy person raising one hand";e.Emoji_1f64a="Speak-no-evil monkey";e.Emoji_1f64f="Person with folded hands";e.Emoji_1f64e="Person with pouting face";e.Emoji_1f64d="Person frowning";e.Emoji_1f629="Weary face";e.Emoji_1f628="Fearful face";e.Emoji_1f625="Disappointed but relieved face";e.Emoji_1f624="Face with look of triumph";e.Emoji_1f621="Pouting face";e.Emoji_1f620="Angry face";e.Emoji_1f623="Persevering face";e.Emoji_1f622="Crying face";e.Emoji_1f638="Grinning cat face with smiling eyes";e.Emoji_1f639="Cat face with tears of joy";e.Emoji_1f635="Dizzy face";e.Emoji_1f636="Face without mouth";e.Emoji_1f637="Face with medical mask";e.Emoji_1f630="Face with open mouth and cold sweat";e.Emoji_1f631="Face screaming in fear";e.Emoji_1f632="Astonished face";e.Emoji_1f633="Flushed face";e.Emoji_1f609="Winking face";e.Emoji_1f608="Smiling face with horns";e.Emoji_1f607="Smiling face with halo";e.Emoji_1f606="Smiling face with open mouth and tightly closed eyes";e.Emoji_1f605="Smiling face with open mouth and cold sweat";e.Emoji_1f604="Smiling face with open mouth and smiling eyes";e.Emoji_1f603="Smiling face with open mouth";e.Emoji_1f602="Face with tears of joy";e.Emoji_1f601="Grinning face with smiling eyes";e.Emoji_1f618="Face throwing a kiss";e.Emoji_1f616="Confounded face";e.Emoji_1f614="Pensive face";e.Emoji_1f612="Unamused face";e.Emoji_1f613="Face with cold sweat";e.Emoji_1f610="Neutral face";e.Emoji_1f60f="Smirking face";e.Emoji_1f60e="Smiling face with sunglasses";e.Emoji_1f60d="Smiling face with heart-shaped eyes";e.Emoji_1f60c="Relieved face";e.Emoji_1f60b="Face savoring delicious food";e.Emoji_1f60a="Smiling face with smiling eyes";e.Emoji_1f61d="Face with stuck-out tongue and tightly closed eyes";e.Emoji_1f61e="Disappointed face";e.Emoji_1f61c="Face with stuck-out tongue and winking eye";e.Emoji_1f61a="Kissing face with closed eyes";e.Emoji_1f4da="Books";e.Emoji_1f4dc="Scroll";e.Emoji_1f4db="Name badge";e.Emoji_1f4de="Telephone receiver";e.Emoji_1f4dd="Memo";e.Emoji_1f4df="Pager";e.Emoji_1f4ea="Closed mailbox with lowered flag";e.Emoji_1f4eb="Closed mailbox with raised flag";e.Emoji_1f4ee="Postbox";e.Emoji_1f4d9="Orange book";e.Emoji_1f4d8="Blue book";e.Emoji_1f4d1="Bookmark tabs";e.Emoji_1f4d0="Triangular ruler";e.Emoji_1f4d3="Notebook";e.Emoji_1f4d2="Ledger";e.Emoji_1f4d5="Closed book";e.Emoji_1f4d4="Notebook with decorative cover";e.Emoji_1f4d7="Green book";e.Emoji_1f4d6="Open book";e.Emoji_1f4e8="Incoming envelope";e.Emoji_1f4e9="Envelope with downward-facing arrow above";e.Emoji_1f4e0="Fax machine";e.Emoji_1f4e1="Satellite antenna";e.Emoji_1f4e2="Public address loudspeaker";e.Emoji_1f4e3="Cheering megaphone";e.Emoji_1f4e4="Outbox tray";e.Emoji_1f4e5="Inbox tray";e.Emoji_1f4e6="Package";e.Emoji_1f4e7="Email";e.Emoji_1f4f9="Video camera";e.Emoji_1f4f3="Vibration mode";e.Emoji_1f4f2="Mobile phone with right-facing arrow at left";e.Emoji_1f4f1="Mobile phone";e.Emoji_1f4f0="Newspaper";e.Emoji_1f4f7="Camera";e.Emoji_1f4f6="Antenna with bars";e.Emoji_1f4f4="Mobile phone off";e.Emoji_1f4ae="White flower";e.Emoji_1f4af="Hundred points";e.Emoji_1f4aa="Flexed biceps";e.Emoji_1f4ab="Dizzy";e.Emoji_1f4ac="Speech balloon";e.Emoji_1f4fc="Videocassette";e.Emoji_1f4fb="Radio";e.Emoji_1f4fa="Television";e.Emoji_1f4a8="Dash";e.Emoji_1f4a9="Pile of poo";e.Emoji_1f4a4="Sleeping";e.Emoji_1f4a5="Collision";e.Emoji_1f4a6="Splashing sweat";e.Emoji_1f4a7="Droplet";e.Emoji_1f4a0="Diamond shape with a dot inside";e.Emoji_1f4a1="Electric light bulb";e.Emoji_1f4a2="Anger";e.Emoji_1f4a3="Bomb";e.Emoji_1f4b9="Chart with upwards trend and yen sign";e.Emoji_1f4b8="Money with wings";e.Emoji_1f4b5="Banknote with dollar sign";e.Emoji_1f4b4="Banknote with yen sign";e.Emoji_1f4b3="Credit card";e.Emoji_1f4b2="Heavy dollar sign";e.Emoji_1f4b1="Currency exchange";e.Emoji_1f4b0="Money bag";e.Emoji_1f4c8="Chart with upward trend";e.Emoji_1f4c9="Chart with downward trend";e.Emoji_1f4c6="Tear-off calendar";e.Emoji_1f4c7="Card index";e.Emoji_1f4c4="Page facing up";e.Emoji_1f4c5="Calendar";e.Emoji_1f4c2="Open file folder";e.Emoji_1f4c3="Page with curl";e.Emoji_1f4c0="DVD";e.Emoji_1f4c1="File folder";e.Emoji_1f4bf="Optical disc";e.Emoji_1f4be="Floppy disk";e.Emoji_1f4bd="Minidisc";e.Emoji_1f4bc="Briefcase";e.Emoji_1f4bb="Personal computer";e.Emoji_1f4ba="Seat";e.Emoji_1f4cf="Straight ruler";e.Emoji_1f4cd="Round pushpin";e.Emoji_1f4ce="Paper clip";e.Emoji_1f4cb="Clipboard";e.Emoji_1f4cc="Pushpin";e.Emoji_1f4ca="Bar chart";e.Emoji_1f5fb="Mount Fuji";e.Emoji_1f5fc="Tokyo Tower";e.Emoji_1f5ff="Moyai";e.Emoji_1f5fd="Statue of Liberty";e.Emoji_1f5fe="Silhouette of Japan";e.Emoji_02b50="White medium star";e.Emoji_02b55="Heavy large circle";e.Emoji_02b06="Black arrow pointing right";e.Emoji_02b07="Downwards black arrow";e.Emoji_02b05="Black arrow pointing left";e.Emoji_02b1c="White large square";e.Emoji_02b1b="Black large square";e.Emoji_02934="Arrow pointing right then curving upward";e.Emoji_02935="Arrow pointing right then curving downward";e.Emoji_025b6="Black right-pointing triangle";e.Emoji_025c0="Black left-pointing triangle";e.Emoji_025fc="Black medium square";e.Emoji_025fb="White medium square";e.Emoji_024c2="Circled Latin capital letter M";e.Emoji_021a9="Left-facing arrow with hook";e.Emoji_021aa="Right-facing arrow with hook";e.Emoji_02796="Heavy minus sign";e.Emoji_02797="Heavy division sign";e.Emoji_02795="Heavy plus sign";e.Emoji_02728="Sparkles";e.Emoji_0270c="Victory hand";e.Emoji_0270b="Raised hand";e.Emoji_0270a="Raised fist";e.Emoji_0270f="Pencil";e.Emoji_02733="Eight-spoked asterisk";e.Emoji_02734="Eight-pointed star";e.Emoji_02709="Envelope";e.Emoji_02708="Airplane";e.Emoji_02702="Scissors";e.Emoji_02705="White heavy check mark";e.Emoji_02712="Nib";e.Emoji_02716="Heavy multiplication x";e.Emoji_02714="Heavy check mark";e.Emoji_02764="Red heart";e.Emoji_0274e="Squared cross mark";e.Emoji_0274c="Cross mark";e.Emoji_02747="Sparkle";e.Emoji_02744="Snowflake";e.Emoji_02757="Heavy exclamation mark";e.Emoji_02754="White question mark ornament";e.Emoji_02755="White exclamation mark ornament";e.Emoji_02753="question mark ornament";e.Emoji_02693="Anchor";e.Emoji_0260e="Telephone";e.Emoji_02600="Sun with rays";e.Emoji_02601="Cloud";e.Emoji_02668="Hot springs";e.Emoji_0264f="Scorpio";e.Emoji_0264d="Virgo";e.Emoji_0264e="Libra";e.Emoji_0264b="Cancer";e.Emoji_0264c="Leo";e.Emoji_0264a="Gemini";e.Emoji_02611="Ballot box with check";e.Emoji_02615="Hot beverage";e.Emoji_02614="Umbrella with rain drops";e.Emoji_0267f="Wheelchair";e.Emoji_0267b="Recycling symbol";e.Emoji_02648="Aries";e.Emoji_02649="Taurus";e.Emoji_0261d="White up-pointing index";e.Emoji_02653="Pisces";e.Emoji_02652="Aquarius";e.Emoji_02651="Capricorn";e.Emoji_02650="Sagittarius";e.Emoji_027bf="Double curly loop";e.Emoji_027b0="Curly loop";e.Emoji_027a1="Black right-facing arrow";e.Emoji_02139="Information source";e.Emoji_026bd="Soccer ball";e.Emoji_026be="Baseball";e.Emoji_026fd="Fuel pump";e.Emoji_026fa="Tent";e.Emoji_026ab="Medium black circle";e.Emoji_026aa="Medium white circle";e.Emoji_026c5="Sun behind cloud";e.Emoji_026c4="Snowman without snow";e.Emoji_026f5="Sailboat";e.Emoji_026f2="Fountain";e.Emoji_026f3="Flag in hole";e.Emoji_026ce="Ophiuchus";e.Emoji_026a1="High Voltage";e.Emoji_026a0="Warning";e.Emoji_026d4="No Entry";e.Emoji_026ea="Church";e.Emoji_02049="Exclamation question mark";e.Emoji_0231b="Hourglass";e.Emoji_0231a="Watch";e.Emoji_023f0="Alarm clock";e.Emoji_023f3="Hourglass with flowing sand";e.Emoji_023e9="Right-pointing double triangle";e.Emoji_023eb="Up-pointing double triangle";e.Emoji_023ec="Down-pointing double triangle";e.Emoji_023ea="Left-pointing double triangle";e.Emoji_03030="Wavy dash";e.Emoji_0303d="Part alternation mark";e.Emoji_03297="Circled Ideograph congratulation";e.Emoji_03299="Circled Ideograph secret";e.EmojiSearchTags_02b50="star";e.EmojiSearchTags_026fa="tent camp camping";e.EmojiSearchTags_026fd="gas fuel gasoline pump";e.EmojiSearchTags_026f3="golf";e.EmojiSearchTags_026f2="fountain";e.EmojiSearchTags_026f5="sailboat sailing sail";e.EmojiSearchTags_026ea="church temple";e.EmojiSearchTags_026be="baseball";e.EmojiSearchTags_026bd="soccer ball";e.EmojiSearchTags_026a0="warning attention caution hazzard";e.EmojiSearchTags_026a1="high voltage zap lightning";e.EmojiSearchTags_026c4="winter snow snowman";e.EmojiSearchTags_0264a="gemini zodiac";e.EmojiSearchTags_0264c="leo zodiac";e.EmojiSearchTags_0264b="cancer zodiac";e.EmojiSearchTags_0264e="libra zodiac";e.EmojiSearchTags_0264d="virgo zodiac";e.EmojiSearchTags_0264f="scorpio zodiac";e.EmojiSearchTags_02649="taurus zodiac";e.EmojiSearchTags_02648="aries zodiac";e.EmojiSearchTags_02650="sagittarius zodiac";e.EmojiSearchTags_02651="capricorn zodiac";e.EmojiSearchTags_02652="aquarius zodiac";e.EmojiSearchTags_02653="pisces zodiac";e.EmojiSearchTags_02668="hot springs";e.EmojiSearchTags_0261d="up";e.EmojiSearchTags_02601="cloud gloomy cloudy";e.EmojiSearchTags_02614="drops raining rain rainy raindrops umbrella";e.EmojiSearchTags_02615="coffee tea";e.EmojiSearchTags_0267f="accessible accessibility wheelchair";e.EmojiSearchTags_02693="anchor";e.EmojiSearchTags_02744="winter snow snowflake snowing snowed christmas xmas blizzard";e.EmojiSearchTags_02747="star sparkle glitter";e.EmojiSearchTags_02764="love heart";e.EmojiSearchTags_0270f="pencil";e.EmojiSearchTags_0270a="fist pump punch";e.EmojiSearchTags_0270b="hand";e.EmojiSearchTags_0270c="peace victory";e.EmojiSearchTags_02702="scissors cut";e.EmojiSearchTags_02708="airplane flight airline plane travel vacation";e.EmojiSearchTags_02709="envelope mail";e.EmojiSearchTags_02728="sparkles twinkle twinkling glitter shiny sparkly glittery";e.EmojiSearchTags_02734="star";e.EmojiSearchTags_02733="star asterisk";e.EmojiSearchTags_1f5fd="statue liberty nyc new york city";e.EmojiSearchTags_1f62b="sleepy tired yawn";e.EmojiSearchTags_1f62a="sleepy tired";e.EmojiSearchTags_1f62d="crying sad";e.EmojiSearchTags_1f601="happy grin lol funny grinning hehe";e.EmojiSearchTags_1f602="happy lol funny joy lmao rofl";e.EmojiSearchTags_1f603="smiling happy excited woo woohoo woot";e.EmojiSearchTags_1f604="smiling happy grin excited";e.EmojiSearchTags_1f605="relieved phew whew sheesh";e.EmojiSearchTags_1f606="lol haha laughing lmao";e.EmojiSearchTags_1f607="saint angel innocent";e.EmojiSearchTags_1f609="haha winking wink winky";e.EmojiSearchTags_1f61a="kiss love kisses kissing smooch";e.EmojiSearchTags_1f61c="goofy wassup nyah kidding";e.EmojiSearchTags_1f61e="disappointed sad";e.EmojiSearchTags_1f61d="gross yuck eww blech";e.EmojiSearchTags_1f60a="smile happy smiling yay";e.EmojiSearchTags_1f60b="dinner hungry lunch food yummy yum delicious tasty mmmmm";e.EmojiSearchTags_1f60c="relieved phew whew relief";e.EmojiSearchTags_1f60d="love love you loving love u";e.EmojiSearchTags_1f60e="cool";e.EmojiSearchTags_1f60f="haha winking wink smirking smirk heh";e.EmojiSearchTags_1f622="crying sad";e.EmojiSearchTags_1f623="persevering";e.EmojiSearchTags_1f620="mad angry grrr";e.EmojiSearchTags_1f621="pouting sad pout";e.EmojiSearchTags_1f624="triumph congratulations grats congrats yahoo ftw woot wahoo";e.EmojiSearchTags_1f625="relieved phew";e.EmojiSearchTags_1f628="scared fearful";e.EmojiSearchTags_1f629="scared anxious uncertain unsure";e.EmojiSearchTags_1f610="ok umm";e.EmojiSearchTags_1f613="scared yikes scary uh oh";e.EmojiSearchTags_1f612="mad angry unamused not funny amused bleh blah";e.EmojiSearchTags_1f614="alas thinking sigh";e.EmojiSearchTags_1f616="confused confounded huh";e.EmojiSearchTags_1f618="kiss love kisses kissing";e.EmojiSearchTags_1f645="bad";e.EmojiSearchTags_1f646="ok awesome";e.EmojiSearchTags_1f642="smile happy smiling";e.EmojiSearchTags_1f648="monkey see no evil";e.EmojiSearchTags_1f649="monkey hear no evil";e.EmojiSearchTags_1f633="wow flushed";e.EmojiSearchTags_1f632="wow astonished";e.EmojiSearchTags_1f631="scared yikes fear whoa";e.EmojiSearchTags_1f630="relieved phew whew";e.EmojiSearchTags_1f637="sick flu";e.EmojiSearchTags_1f636="unsure";e.EmojiSearchTags_1f635="dizzy drunk confused";e.EmojiSearchTags_1f639="cat rofl lol tears laughter tears joy funny";e.EmojiSearchTags_1f638="cat grin happy";e.EmojiSearchTags_1f64d="disappointed sad frown";e.EmojiSearchTags_1f64e="pouting sad depressed";e.EmojiSearchTags_1f64f="pray praying prayer";e.EmojiSearchTags_1f64a="monkey speak no evil";e.EmojiSearchTags_1f64b="wave hi bye hey aloha";e.EmojiSearchTags_1f64c="yay celebrate";e.EmojiSearchTags_1f63c="cat heh";e.EmojiSearchTags_1f63b="cat love";e.EmojiSearchTags_1f63a="cat smile";e.EmojiSearchTags_1f63f="cat cry cries sad";e.EmojiSearchTags_1f63e="cat pout pouting sad";e.EmojiSearchTags_1f63d="cat kiss kisses";e.EmojiSearchTags_1f689="station";e.EmojiSearchTags_1f680="rocket spaceship space";e.EmojiSearchTags_1f683="train caboose";e.EmojiSearchTags_1f684="train light rail monorail";e.EmojiSearchTags_1f687="bus transit metro";e.EmojiSearchTags_1f69a="delivery truck";e.EmojiSearchTags_1f68c="bus transit";e.EmojiSearchTags_1f68f="bus stop";e.EmojiSearchTags_1f693="cop police";e.EmojiSearchTags_1f692="fire truck fire engine";e.EmojiSearchTags_1f695="taxi cab";e.EmojiSearchTags_1f697="car vehicle automobile";e.EmojiSearchTags_1f4b0="cash loot";e.EmojiSearchTags_1f4b3="money credit debt debit credit card";e.EmojiSearchTags_1f4b4="yen money";e.EmojiSearchTags_1f4b5="cash money dollar";e.EmojiSearchTags_1f4ca="chart graph";e.EmojiSearchTags_1f4cc="pushpin";e.EmojiSearchTags_1f4cb="clipboard";e.EmojiSearchTags_1f4ce="paperclip clippy";e.EmojiSearchTags_1f4cd="drawing pin";e.EmojiSearchTags_1f4cf="ruler measure";e.EmojiSearchTags_1f4ba="seat";e.EmojiSearchTags_1f4bb="pc computer laptop tablet";e.EmojiSearchTags_1f4bc="briefcase brief case";e.EmojiSearchTags_1f4be="floppy disk diskette";e.EmojiSearchTags_1f4bf="cd compact disc";e.EmojiSearchTags_1f4c1="file folder";e.EmojiSearchTags_1f4c0="dvd";e.EmojiSearchTags_1f4c5="calendar";e.EmojiSearchTags_1f4c9="chart graph record losses trending down downwards";e.EmojiSearchTags_1f4c8="chart graph record profits trending up upwards skyrocketed";e.EmojiSearchTags_1f4f6="wifi signal";e.EmojiSearchTags_1f4f7="camera picture photo";e.EmojiSearchTags_1f4f0="newspaper news";e.EmojiSearchTags_1f4f1="phone cell call";e.EmojiSearchTags_1f4f9="video camera";e.EmojiSearchTags_1f4df="pager";e.EmojiSearchTags_1f4dd="memo note";e.EmojiSearchTags_1f4de="telephone call phone";e.EmojiSearchTags_1f4db="name badge";e.EmojiSearchTags_1f4da="book books";e.EmojiSearchTags_1f4a3="bomb";e.EmojiSearchTags_1f4a1="light bulb idea";e.EmojiSearchTags_1f4a5="collision bang traffic accident crash";e.EmojiSearchTags_1f4a4="sleepy tired sleep zzz";e.EmojiSearchTags_1f4a9="poop turd shit";e.EmojiSearchTags_1f4a8="dash gotta go gotta run";e.EmojiSearchTags_1f4d2="ledger";e.EmojiSearchTags_1f4d3="notebook";e.EmojiSearchTags_1f4fa="tv television";e.EmojiSearchTags_1f4fb="radio";e.EmojiSearchTags_1f4fc="videotape videocassette cassette vcr";e.EmojiSearchTags_1f4aa="strong work out muscles biceps";e.EmojiSearchTags_1f4e7="email mail";e.EmojiSearchTags_1f4e6="present package parcel";e.EmojiSearchTags_1f4e3="megaphone cheering";e.EmojiSearchTags_1f4e1="satellite antenna";e.EmojiSearchTags_1f4e0="fax machine";e.EmojiSearchTags_1f4e9="mail email letter sending send";e.EmojiSearchTags_1f4e8="incoming message mail email letter";e.EmojiSearchTags_1f4ee="mail post";e.EmojiSearchTags_1f4eb="mail";e.EmojiSearchTags_1f4ea="empty mailbox";e.EmojiSearchTags_1f52a="knife";e.EmojiSearchTags_1f52e="crystal ball clairvoyance clairvoyant psychic mystic";e.EmojiSearchTags_1f525="fire";e.EmojiSearchTags_1f527="wrench";e.EmojiSearchTags_1f526="flashlight";e.EmojiSearchTags_1f529="nuts bolts";e.EmojiSearchTags_1f528="hammer hammers";e.EmojiSearchTags_1f531="trident";e.EmojiSearchTags_1f503="reload refresh loading";e.EmojiSearchTags_1f512="lock locked";e.EmojiSearchTags_1f513="unlock unlocked";e.EmojiSearchTags_1f510="secure secret";e.EmojiSearchTags_1f511="key";e.EmojiSearchTags_1f516="bookmark";e.EmojiSearchTags_1f514="bell alarm";e.EmojiSearchTags_1f50c="plug plugged in";e.EmojiSearchTags_1f50b="battery charged";e.EmojiSearchTags_1f50f="privacy";e.EmojiSearchTags_1f50d="search searching";e.EmojiSearchTags_1f556="7pm 7am dinnertime";e.EmojiSearchTags_1f557="8pm 8am morning";e.EmojiSearchTags_1f554="5pm 5am late afternoon";e.EmojiSearchTags_1f555="6pm 6am";e.EmojiSearchTags_1f552="3pm 3am";e.EmojiSearchTags_1f553="4pm 4am";e.EmojiSearchTags_1f550="1pm 1am early afternoon";e.EmojiSearchTags_1f551="2pm 2am afternoon";e.EmojiSearchTags_1f558="9pm 9am";e.EmojiSearchTags_1f559="10pm 10am bedtime";e.EmojiSearchTags_1f55b="12pm 12am midnight noon lunchtime";e.EmojiSearchTags_1f55a="11pm 11am nighttime";e.EmojiSearchTags_1f42b="camel desert";e.EmojiSearchTags_1f42c="dolphin";e.EmojiSearchTags_1f42d="mouse eek mice squeak";e.EmojiSearchTags_1f42e="cow moo";e.EmojiSearchTags_1f42f="tiger roar rawr";e.EmojiSearchTags_1f420="fish";e.EmojiSearchTags_1f421="blowfish fish";e.EmojiSearchTags_1f422="turtle";e.EmojiSearchTags_1f423="chick easter";e.EmojiSearchTags_1f425="chick easter";e.EmojiSearchTags_1f426="bird";e.EmojiSearchTags_1f427="penguin";e.EmojiSearchTags_1f429="poodle dog";e.EmojiSearchTags_1f46e="police officer cop";e.EmojiSearchTags_1f46f="bunny ears costume";e.EmojiSearchTags_1f46a="family";e.EmojiSearchTags_1f46b="couple engaged";e.EmojiSearchTags_1f41c="ant ants insect bug";e.EmojiSearchTags_1f41b="bug insect centipede millipede";e.EmojiSearchTags_1f41a="seashell shell";e.EmojiSearchTags_1f41f="fish goldfish";e.EmojiSearchTags_1f41e="ladybug ladybugs";e.EmojiSearchTags_1f41d="bee bees honeybee honeybees";e.EmojiSearchTags_1f431="cat kitty kitten meow";e.EmojiSearchTags_1f430="rabbit bunny easter";e.EmojiSearchTags_1f433="whale moby dick";e.EmojiSearchTags_1f432="dragon roar smaug";e.EmojiSearchTags_1f435="monkey";e.EmojiSearchTags_1f434="horse";e.EmojiSearchTags_1f437="pig oink piggy piglet";e.EmojiSearchTags_1f436="dog woof puppy bark doggy";e.EmojiSearchTags_1f439="hamster guinea pig";e.EmojiSearchTags_1f438="frog croak ribbit";e.EmojiSearchTags_1f40c="snail slow";e.EmojiSearchTags_1f40d="snake";e.EmojiSearchTags_1f40e="horse horsey pony";e.EmojiSearchTags_1f466="boy";e.EmojiSearchTags_1f467="girl";e.EmojiSearchTags_1f461="sandal heels heel shoe shoes sandals pumps";e.EmojiSearchTags_1f462="boots boot";e.EmojiSearchTags_1f463="footprints barefoot";e.EmojiSearchTags_1f468="man";e.EmojiSearchTags_1f469="woman";e.EmojiSearchTags_1f43a="wolf howl";e.EmojiSearchTags_1f43c="bear panda";e.EmojiSearchTags_1f43b="bear teddy";e.EmojiSearchTags_1f43e="paw prints paws";e.EmojiSearchTags_1f43d="pig pig noise smelly";e.EmojiSearchTags_1f412="monkey";e.EmojiSearchTags_1f411="bah sheep";e.EmojiSearchTags_1f417="boar";e.EmojiSearchTags_1f414="chicken bawk rooster";e.EmojiSearchTags_1f419="octopus";e.EmojiSearchTags_1f418="elephant";e.EmojiSearchTags_1f446="up click";e.EmojiSearchTags_1f447="down";e.EmojiSearchTags_1f444="kiss mouth";e.EmojiSearchTags_1f445="tongue lick taste drool";e.EmojiSearchTags_1f442="ear listen";e.EmojiSearchTags_1f443="nose smell";e.EmojiSearchTags_1f440="eyes snoop";e.EmojiSearchTags_1f448="left";e.EmojiSearchTags_1f449="right";e.EmojiSearchTags_1f45f="shoe shoes";e.EmojiSearchTags_1f45e="shoe shoes";e.EmojiSearchTags_1f45d="pouch clutch";e.EmojiSearchTags_1f45c="handbag purse";e.EmojiSearchTags_1f45b="purse";e.EmojiSearchTags_1f45a="clothes";e.EmojiSearchTags_1f475="grandma old lady old woman grandmother";e.EmojiSearchTags_1f474="grandpa old man gramps grandfather";e.EmojiSearchTags_1f477="construction";e.EmojiSearchTags_1f476="baby kid toddler newborn infant";e.EmojiSearchTags_1f471="blond";e.EmojiSearchTags_1f470="bride marriage bridezilla";e.EmojiSearchTags_1f478="princess";e.EmojiSearchTags_1f44f="yay clapping applause clap";e.EmojiSearchTags_1f44d="ok thumbs up";e.EmojiSearchTags_1f44e="bad thumbs down wrong boo";e.EmojiSearchTags_1f44b="wave hi bye waving high five";e.EmojiSearchTags_1f44c="ok okay perfect";e.EmojiSearchTags_1f44a="punch fist pump chuck norris bam";e.EmojiSearchTags_1f47e="scared monster";e.EmojiSearchTags_1f47d="alien ufo";e.EmojiSearchTags_1f47f="imp pixie loki leprechaun";e.EmojiSearchTags_1f47c="cherub angel";e.EmojiSearchTags_1f47b="scared halloween ghost boo";e.EmojiSearchTags_1f457="dress";e.EmojiSearchTags_1f456="jeans pants";e.EmojiSearchTags_1f455="tshirt tshirts";e.EmojiSearchTags_1f454="tie";e.EmojiSearchTags_1f453="glasses hipster";e.EmojiSearchTags_1f452="hat sunday best";e.EmojiSearchTags_1f451="crown king queen";e.EmojiSearchTags_1f459="bikini bathing suit swimsuit swim";e.EmojiSearchTags_1f458="kimono";e.EmojiSearchTags_1f488="barber barbershop";e.EmojiSearchTags_1f489="syringe shot needle";e.EmojiSearchTags_1f482="guardsman";e.EmojiSearchTags_1f483="party dancer dance dancing";e.EmojiSearchTags_1f480="scared skull danger die death poison";e.EmojiSearchTags_1f481="information desk support desk";e.EmojiSearchTags_1f486="massage";e.EmojiSearchTags_1f487="haircut";e.EmojiSearchTags_1f484="lipstick makeup";e.EmojiSearchTags_1f485="nail polish manicure";e.EmojiSearchTags_1f49c="heart";e.EmojiSearchTags_1f49b="heart";e.EmojiSearchTags_1f49a="heart";e.EmojiSearchTags_1f49f="heart";e.EmojiSearchTags_1f49e="heart";e.EmojiSearchTags_1f49d="heart love";e.EmojiSearchTags_1f48b="kiss xoxo love kisses kissing mwah";e.EmojiSearchTags_1f48c="love letter";e.EmojiSearchTags_1f48a="pill pills drug drugs";e.EmojiSearchTags_1f48f="kiss love";e.EmojiSearchTags_1f48d="ring marry fiance engaged engage engagement ring engagement diamond ring bling";e.EmojiSearchTags_1f48e="diamond stone gem";e.EmojiSearchTags_1f499="heart";e.EmojiSearchTags_1f498="heart love cupid";e.EmojiSearchTags_1f493="heart love heartbeat";e.EmojiSearchTags_1f492="wedding marry church";e.EmojiSearchTags_1f491="couple engaged married marry marriage";e.EmojiSearchTags_1f490="flowers bouquet love";e.EmojiSearchTags_1f497="love heart";e.EmojiSearchTags_1f496="heart love";e.EmojiSearchTags_1f495="love hearts";e.EmojiSearchTags_1f494="heartbroken sorrow sad broken heart brokenhearted";e.EmojiSearchTags_1f6b2="bike bicycle biking";e.EmojiSearchTags_1f6b6="walking pedestrian";e.EmojiSearchTags_1f6b9="toilet bathroom";e.EmojiSearchTags_1f6a2="ship cruise ferry yacht cruise travel vacation";e.EmojiSearchTags_1f6a5="traffic traffic light";e.EmojiSearchTags_1f6a7="construction detour";e.EmojiSearchTags_1f6a8="police siren emergency";e.EmojiSearchTags_1f6bb="restroom toilet washroom bathroom";e.EmojiSearchTags_1f6ba="toilet bathroom";e.EmojiSearchTags_1f6bd="toilet bathroom potty restroom washroom";e.EmojiSearchTags_1f6c0="bath bathing bathtub tub";e.EmojiSearchTags_1f6aa="door";e.EmojiSearchTags_1f6ac="smoke smoking";e.EmojiSearchTags_1f6ab="no entry no admittance";e.EmojiSearchTags_1f6ad="no smoking";e.EmojiSearchTags_1f36c="candy sweet sweets treat";e.EmojiSearchTags_1f36b="chocolate chocolates candy bar chocolate bar sweets";e.EmojiSearchTags_1f36a="cookie cookies food sweets";e.EmojiSearchTags_1f36f="honey pot";e.EmojiSearchTags_1f36e="custard";e.EmojiSearchTags_1f36d="lollipop candy treat sucker";e.EmojiSearchTags_1f341="maple leaf";e.EmojiSearchTags_1f340="luck lucky st. patrick\u0027s day shamrock";e.EmojiSearchTags_1f343="leaf windy";e.EmojiSearchTags_1f342="leaf autumn";e.EmojiSearchTags_1f345="food vegetable fruit tomato";e.EmojiSearchTags_1f344="mushroom shroom";e.EmojiSearchTags_1f347="grapes fruit food";e.EmojiSearchTags_1f346="eggplant food vegetable";e.EmojiSearchTags_1f349="watermelon melon food fruit";e.EmojiSearchTags_1f348="melon honeydew food fruit";e.EmojiSearchTags_1f37b="cheers beers alcohol";e.EmojiSearchTags_1f37a="beer alcohol";e.EmojiSearchTags_1f351="peach peaches fruit food";e.EmojiSearchTags_1f352="cherry cherries fruit food";e.EmojiSearchTags_1f353="strawberries stawberry fruit food berry berries";e.EmojiSearchTags_1f354="hamburger fast burger hamburgers burgers food hungry";e.EmojiSearchTags_1f355="pizza fast food hungry dinner lunch";e.EmojiSearchTags_1f356="meat dinner lunch hungry food";e.EmojiSearchTags_1f357="chicken leg turkey leg meat chicken turkey hungry dinner lunch food drumstick";e.EmojiSearchTags_1f358="onigiri";e.EmojiSearchTags_1f359="onigiri";e.EmojiSearchTags_1f34a="tangerine fruit food orange mandarin clementine slice slices";e.EmojiSearchTags_1f34c="banana fruit food";e.EmojiSearchTags_1f34e="apple";e.EmojiSearchTags_1f34d="pineapple fruit food";e.EmojiSearchTags_1f34f="apple";e.EmojiSearchTags_1f363="sushi food maki";e.EmojiSearchTags_1f362="oden";e.EmojiSearchTags_1f361="dango";e.EmojiSearchTags_1f360="potato potatoes vegetable food";e.EmojiSearchTags_1f366="ice cream dessert treat sweets";e.EmojiSearchTags_1f365="rice ball fish cake";e.EmojiSearchTags_1f364="fried shrimp shrimp seafood food tempura";e.EmojiSearchTags_1f369="doughnut doughnuts donut donuts food sweets";e.EmojiSearchTags_1f368="ice cream dessert treat sundae sweets";e.EmojiSearchTags_1f35a="rice dinner hungry lunch food";e.EmojiSearchTags_1f35b="curry katsu";e.EmojiSearchTags_1f35c="noodles ramen food dinner lunch";e.EmojiSearchTags_1f35d="spaghetti dinner noodles food hungry";e.EmojiSearchTags_1f35e="bread food";e.EmojiSearchTags_1f35f="fries fast food french fries food";e.EmojiSearchTags_1f372="soup pot of food stew";e.EmojiSearchTags_1f373="frying cooking";e.EmojiSearchTags_1f370="pie food hungry cake dessert cheesecake shortcake sweets";e.EmojiSearchTags_1f371="bento box";e.EmojiSearchTags_1f376="sake alcohol";e.EmojiSearchTags_1f377="alcohol wine";e.EmojiSearchTags_1f374="food dinner fork knife eat hungry meal restaurant";e.EmojiSearchTags_1f375="tea coffee";e.EmojiSearchTags_1f378="alcohol cocktail drinks martini happy hour";e.EmojiSearchTags_1f379="alcohol tropical drink";e.EmojiSearchTags_1f305="sunrise";e.EmojiSearchTags_1f304="sunrise";e.EmojiSearchTags_1f307="skyline sunset";e.EmojiSearchTags_1f306="dusk";e.EmojiSearchTags_1f301="foggy";e.EmojiSearchTags_1f300="cyclone typhoon hurricane";e.EmojiSearchTags_1f303="skyline starry stars night";e.EmojiSearchTags_1f302="umbrella";e.EmojiSearchTags_1f309="bridge night";e.EmojiSearchTags_1f308="rainbow love";e.EmojiSearchTags_1f33f="herb herbs";e.EmojiSearchTags_1f33d="maize corn";e.EmojiSearchTags_1f33e="rice";e.EmojiSearchTags_1f33b="sunflower";e.EmojiSearchTags_1f33c="blossom daisy flower";e.EmojiSearchTags_1f33a="hibiscus flower";e.EmojiSearchTags_1f314="moon";e.EmojiSearchTags_1f315="moon full";e.EmojiSearchTags_1f311="moon";e.EmojiSearchTags_1f313="moon";e.EmojiSearchTags_1f319="moon crescent";e.EmojiSearchTags_1f30a="wave tsunami";e.EmojiSearchTags_1f30c="milky way night sky galaxy universe";e.EmojiSearchTags_1f320="luck shooting star wish comet asteroid meteor meteroid";e.EmojiSearchTags_1f31f="star twinkle";e.EmojiSearchTags_1f31b="moon";e.EmojiSearchTags_1f337="tulip flower";e.EmojiSearchTags_1f334="palm tree vacation";e.EmojiSearchTags_1f335="cactus hot desert";e.EmojiSearchTags_1f330="chestnut";e.EmojiSearchTags_1f331="seed seedling planting";e.EmojiSearchTags_1f338="cherry blossom sakura flower";e.EmojiSearchTags_1f339="rose love romance flower";e.EmojiSearchTags_1f389="party fun congratulations celebrate congrats";e.EmojiSearchTags_1f388="party fun balloon";e.EmojiSearchTags_1f385="merry christmas santa claus father xmas";e.EmojiSearchTags_1f384="merry christmas tree happy holidays";e.EmojiSearchTags_1f387="fireworks sparkler july 4th";e.EmojiSearchTags_1f386="fireworks sparkler july 4th";e.EmojiSearchTags_1f381="gift present presents ribbon";e.EmojiSearchTags_1f380="ribbon";e.EmojiSearchTags_1f383="happy halloween trick treat halloween pumpkin";e.EmojiSearchTags_1f382="birthday cake happy cake";e.EmojiSearchTags_1f390="chime";e.EmojiSearchTags_1f392="backpack school bag back pack";e.EmojiSearchTags_1f393="graduation college high school graduated graduating graduate grad";e.EmojiSearchTags_1f38a="party confetti surprise";e.EmojiSearchTags_1f0cf="cards card joker blackjack poker";e.EmojiSearchTags_1f17f="parking parking spot";e.EmojiSearchTags_1f3ea="convenience store";e.EmojiSearchTags_1f3eb="school college study teacher learn studying";e.EmojiSearchTags_1f3ec="department store shopping";e.EmojiSearchTags_1f3ed="factory";e.EmojiSearchTags_1f3e0="house home";e.EmojiSearchTags_1f3e1="garden greenhouse";e.EmojiSearchTags_1f3e2="office work";e.EmojiSearchTags_1f3e6="bank";e.EmojiSearchTags_1f3e7="atm";e.EmojiSearchTags_1f3e8="hotel motel bed sleep";e.EmojiSearchTags_1f3f0="castle";e.EmojiSearchTags_1f3ad="performing arts drama shakespeare theatre theater play actor actress";e.EmojiSearchTags_1f3ae="xbox video game video games controller";e.EmojiSearchTags_1f3af="bullseye archery darts arrow";e.EmojiSearchTags_1f3aa="circus";e.EmojiSearchTags_1f3ab="ticket stub ticket stub admission";e.EmojiSearchTags_1f3ac="film action movie";e.EmojiSearchTags_1f3a4="microphone sing karaoke singing";e.EmojiSearchTags_1f3a5="video camera film movie movie camera";e.EmojiSearchTags_1f3a6="theatre theater cinema";e.EmojiSearchTags_1f3a7="music headphones headphone";e.EmojiSearchTags_1f3a0="carousel carnival";e.EmojiSearchTags_1f3a1="ferris wheel amusement park";e.EmojiSearchTags_1f3a2="roller coaster";e.EmojiSearchTags_1f3a3="fish fishing fishing pole";e.EmojiSearchTags_1f3a8="paint artist palette artist";e.EmojiSearchTags_1f3a9="top hat black tie";e.EmojiSearchTags_1f3b7="music saxophone sax";e.EmojiSearchTags_1f3b6="music melody song singing tune jingle";e.EmojiSearchTags_1f3b5="music musical note melody musical";e.EmojiSearchTags_1f3b3="bowling bowl";e.EmojiSearchTags_1f3b2="die dice game craps gambling casino gamble";e.EmojiSearchTags_1f3b1="pool billiards";e.EmojiSearchTags_1f3b0="slot slots machine casino gamble gambling";e.EmojiSearchTags_1f3b9="music piano";e.EmojiSearchTags_1f3b8="music guitar";e.EmojiSearchTags_1f3c6="win trophy champions champion";e.EmojiSearchTags_1f3c4="wave surf surfer surfers surfs surfing";e.EmojiSearchTags_1f3c2="sports winter snowboard snowboarder snowboarding snowboards";e.EmojiSearchTags_1f3c3="race run marathon runner sprinting running late";e.EmojiSearchTags_1f3c0="basketball bball hoops";e.EmojiSearchTags_1f3c1="race finish nascar";e.EmojiSearchTags_1f3c8="football superbowl sports nfl";e.EmojiSearchTags_1f3bf="sports winter ski skiing skis";e.EmojiSearchTags_1f3be="wimbledon tennis raquet tennis sports racquet";e.EmojiSearchTags_1f3bd="exercise exercising";e.EmojiSearchTags_1f3bc="treble clef sheet music music musical score";e.EmojiSearchTags_1f3bb="music violin";e.EmojiSearchTags_1f3ba="music trumpet";e.EmojiSearchTags_1f3ca="swim swimmer swimming swims";e.EmojiFamily_Food="Food";e.EmojiFamily_Symbols="Symbols";});

define("WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking",["require","exports"],function(require,exports){var e=exports;e.SucessfullySavedNWisButFailedToSave="Successfully saved {0} work item(s), but failed to save {1} work item(s).";e.StateTransitionGraphViewAllChangesTitle="View all state transitions";e.MoveWorkItemDiscussionLabel="Add a reason for moving the work item";e.InvalidWorkItemUrl="WorkItem url not valid: {0}";e.CustomRollupTotalOptionSubtitle="A total number of the linked descendants will be added at the parent level. Choose between sum of any numeric field or a simple count of items.";e.LinksControlTestResultText="Test Result";e.CommandBarTitle_CopyWorkItems="(Ctrl+C)";e.DirectLinksFlattenedMessage="Your direct links query results will be flattened to flat list format due to possible duplicate work items.";e.UnableToFindQueryDefinition="Unable to find query definition: {0}.";e.DeleteSingleAttachmentDialogConfirmationText="Are you sure you want to delete {0}?";e.TextFilterResultCountMessage="Filtering {0} out of {1} items. {2}";e.FormGroupCollapseAriaLabel="{0} section.";e.MultiFieldRemoveFieldTooltip="Remove this field";e.CreateCopyOfWorkItemProject="Project";e.ConfirmWorkItemRefresh="You have unsaved changes to this work item which will be lost. Are you sure you want to refresh this work item?";e.WorkItemLogControlLinksHeader="Links";e.LinkTopologyTreeReverseImageAltText="This is a directional link that creates a one-to-many relationship. Once this link is created, no more links of this type can be added to the linked items.";e.DefaultingCurrentIterationTeam="Use of the \u003ca href=\"https://go.microsoft.com/fwlink/?linkid=865408\"\u003e@CurrentIteration macro\u003c/a\u003e requires explicit specification of a team. You may want to update your query and save it with a team of your choice.";e.CustomFollowDialogAssignedToCheckbox="Assigned To Changed";e.WorkItemMethodSelectionText="Select one of the following methods to find available work items:";e.FilterValidWorkItems="Valid work items";e.ReactionTypeEmojiConfoundedFace="Upset";e.WorkItemDeleteError="Failed to delete work item: {0}. Error Details: {1}";e.ExportToCSVError="Not all work item results were exported.";e.ImporCsvNoTerminatingDoubleQuotesError="Non-terminating double-quotes at line {0}, column {1}.";e.WorkItemTemplateDoesNotExist="VS403203: No template was applied because the indicated template does not exist.";e.LinkTopologyDirectedNetworkImageAltText="This is a directional link that can be created between any set of work items.";e.AttachmentsOversizedDialogTitle="Attachment(s) over size limit";e.WorkItemDetailsRoleTitle="Work item details";e.LinkWorkItemTypeNotValid="Could not find the specified work item type.";e.EmptyTeamFavoriteGroupTextLink="Browse shared queries";e.BeginGetWorkItemArgumentNull="Cannot load work items. Array null or undefined.";e.HistoryControlSingleLinkAdornmentText="{0} was added";e.WorkItemDiscussionAdornmentOverLimitNumberDisplay="{0}+ comments";e.WorkItemLogControlAttachmentAdded="added an attachment";e.FieldCannotBeEdited="{0}, this field cannot be edited";e.SaveHotkeyWithControl="(Ctrl+S)";e.Backlog="Backlog";e.CreateCopyCopiedWithAllAttachmentsFrom="Copied with all attachments from {0}";e.SaveHotkeyWithCommand="(+S)";e.LinkTopologyDependencyImageAltText="This is a directional link that can be created between any set of work items, but can not create closed loops.";e.WorkItemArtifactLastUpdatedByLabel="Updated by {0} on {1}";e.HistoryControlAgoLastThirtyDays="Last thirty days";e.MoveWorkItemPermissionError="You have insufficient permissions to move a work item to another project.";e.ChangeTypeDiscussionLabel="Add a reason for changing the type";e.DateTimePicker_AMPMDownAriaLabel="Switch AM PM";e.WorkItemLogControlDeletedComment="deleted a comment";e.Edited="Edited";e.HistoryControlAssignmentAdornmentText="Assigned to {0}";e.FieldStatusInvalidUnknownError="There is an unknown problem with field \u0027{0}\u0027.";e.ColumnOptionsAllWorkItemTypes="All Work Item Types";e.AttachmentUploadSuccessNotification="Attachment(s) uploaded successfully.";e.WorkItemPaneFilter_OffAriaLabel="Work item panel off";e.BulkEditTagsAdd="Add";e.AddReaction="Add {0} reaction";e.WorkItemTemplates_CaptureTemplateMenuItem_Text="Capture...";e.FieldAlreadyAdded="This field has already been added";e.MVCActionToDpIdMappingNotFoundError="There is no dataprovider id mapped for the passed action {0}";e.ChildTestSuites=" Child Test Suites";e.RemoveColumn="Remove this column";e.FilterNoTypes="No types available";e.HistoryControlAssignmentDefaultAdornmentText="Assigned to edited";e.Picker_FilterWatermark="Search";e.WorkItemArtifactLinkGitHubCannotRender="GitHub link not found or no permission to access it.";e.NewFeatureViewBoardLinkTitle="View your board";e.DeleteWorkItemDialogConfirmationTextWithCleanUpScheduled="You can restore deleted work items from the Recycle Bin until they are permanently deleted based on auto-delete settings (enabled). {0}.";e.DiscardChanges="Leave";e.AttachmentAsLinkType="Attachment";e.FailedToSaveNWorkItems="Failed to save the following {0} work item(s).";e.AttachmentUploadFailDialogTitle="Attachment(s) failed to upload";e.TestWorkItemDeleteButtonText="Permanently delete";e.UnsavedWorkItemsQuery="Unsaved work items";e.DestroyWorkItemDialogConfirmationText="Are you sure you want to permanently delete the selected work item(s)? Permanently deleted work item(s) cannot be restored.";e.WorkItemTemplateDialog_Description="Description";e.DownloadAttachments="Download attachments";e.CustomFollowDialogIterationPathCheckbox="Iteration Changed";e.SavingWorkItems="Saving work items";e.FavoriteQueryFailed="Unable to favorite query \"{0}\"";e.PreviewAttachment="Preview attachment";e.Searching="Searching...";e.Updated="updated";e.KeyboardShortcutDescription_ReturnToQuery="Return to query";e.Wiql_MacroMe="Me";e.RemoteLinkDialogAddressTitleWatermark="Enter remote work item url";e.LinksControlTestText="Test";e.QueryReferencesFieldThatDoesNotExist="TF51005: The query references a field that does not exist.";e.RenameQuery="Rename";e.WorkItemEditorWindowTitle="{0}: {1}";e.BulkEditTagsRemove="Remove";e.FilterByTypes="Types";e.SendWorkItemsInEmailDialogTitle="Send work items in email";e.KeyboardShortcutDescription_Save="Save changes";e.AggregationFieldLabel="Select a field.";e.LinkValidationFailed="Link validation failed";e.Folder="Folder";e.DirectLinksQuery="Direct Links Query";e.LinkToolTypeRemoteWork="Remote Work";e.TriagePreviousWorkItemToolTip="Previous work item in the \"{0}\" query (Alt + P)";e.TagCountAriaLabel="{0} count: {1}";e.LinksControlChangesetText="Changeset";e.TagAriaLabel="Item {0} of {1}. Text {2}.";e.LinkToExistingDialogLinkTypeTitle="Link type";e.QueryHierarchyItemAriaLabel="{0}, {1}, Level {2}, ";e.QueryEditorTargetFilterGroupingText="Filters for linked work items";e.SaveResultsToolTip="Save results";e.NewQuery="New query";e.WorkItemTemplates_ContextMenuItem_Text="Templates";e.EmptyTeamFavoriteGroupTextSuffix="to add the ones important for your team.";e.Delete="Delete";e.WorkItemTemplateDialog_RemoveUnmodified="Remove unmodified fields";e.AddAttachmentFileNotFoundError="TF20004: Could not find the specified file \"{0}\". Check the file name and try again.";e.MobileDiscussionUnsaved="Remember to send your comment";e.LinksControlTagsText="Tag";e.Backlog_DisplayName="{0} backlog";e.ConfirmWorkItemDiscardNew="You have unsaved changes to this work item which will be lost. Are you sure you want to discard this work item?";e.HyperLinkText="Hyperlink";e.QueryEditorQueryTypeTree="Tree of work items";e.QueryEditorQueryTypeLink="Work items and direct links";e.LinksControlGitHubIssueText="GitHub Issue";e.BulkEdit_ApplyTemplateButton="Apply";e.WorkItemTemplateDialog_CopyLinkDisabledMessage="Save the template in order to enable Copy link.";e.AssignedToPrefix="Assigned to";e.WorkItemUnsavedDiscussionAriaLabel="Discussion: Remember to send your comment. Click here to view discussion.";e.QueryResultsGridLinkQueryStatusTextFormat="{0} work items ({1} top level, {2} linked and {3} selected)";e.NewLinkedWorkItemTitle="Title";e.AttachmentsNotSupported="Invalid link type, Attachments not supported";e.WorkItemFinderWorkItemTypes="Work Item Types";e.WorkItemLogControlOtherLinkAdded="added other link";e.AddARollupColumn="Add a rollup column";e.InvalidTestWorkItem="Invalid test work item type";e.ImporCsvEmptyDatasetError="Empty dataset found.";e.CustomFollowWorkItem="Notification Settings";e.AddTagText="Add tag";e.VisualizeYourWorkText="Kanban boards provide an interactive, customizable visualization of your backlog to help monitor the flow of your work items from idea to completion.";e.Cancel="Cancel";e.KeyboardShortcutGroup_WorkItemForm="Work Item Form";e.GitHubInputNotValid="The URL is not a valid {0} URL.";e.WorkItems="Work items";e.WorkItemChartsTreeQueryDisallowedMessage="You can create a chart for a flat list query, but not for a tree query or a direct links query.";e.ReasonField="Reason Field";e.KeyboardShortcutDescription_Previous_Item="Previous item";e.AddAttachment="Add attachment";e.ReasonLabel="Reason";e.QueryEditor="Query Editor";e.NameLabel="Name";e.GitHubZeroDataCommitLinkTypeText="commit";e.LinkText="Link";e.QueryEditorQueryModeLabel="Filter options";e.ImportFromCsv="Import from CSV";e.HistoryControlOldValueText="Old Value";e.MoveWorkItemDestinationLabel="Destination project";e.SearchResults="Search results";e.AggregationModeLabel="Select an aggregation mode.";e.DeleteWorkItemDialogTitle="Delete work item(s)";e.QueryFolder="Query folder";e.EmptyTeamFavoriteGroupTextPrefix="No team favorites yet!";e.FieldStatusInvalidValueInOtherFieldError="The field \u0027{0}\u0027 is unsupported because of a value in another field.";e.ColumnOptionsAllProjects="All Projects";e.WorkItemIDListString="Select items to add to the work item list";e.Import="Import";e.ConfirmDiscardCommentDraft="Are you sure you want to discard this draft?";e.QueryManageDialog_Validator_FolderSelfReferential="Folder cannot refer to self as a parent or ancestor.";e.ErrorSendingEmail="Error sending email";e.ColumnOptionsSorting="Sorting";e.ChangeTypeMessage="Learn more about changing the type";e.ConfirmDeleteComment="Are you sure you want to delete this comment?";e.NoData="[No data]";e.WorkItemPublicVisibilityLearnMoreLink="https://aka.ms/public-project-learn-more";e.LinksControlGitHubCommitText="GitHub Commit";e.LinksControlPullRequestText="Pull Request";e.DeleteAttachment="Delete attachment";e.LinkToExistingDialogFormNotFound="Form not found for link type {0}.";e.RollupTotalNumberOptionsHeadingText="Total number";e.LastVisitedGroupName="Continue where you left off";e.LinkDialog_SameTypeHierarchyError_LearnMore="Learn more";e.MoveWorkItemPathInvalid="The selected value does not exist.";e.CopyWorkItemToPublicProjectMessage="You are copying this work item into a public project.";e.SaveAll="Save all";e.WorkItemControlReadOnly="{0} is read-only.";e.WorkItemLogControlLinkAdded="added {0}link";e.QueriesView_FavoritesPivotName="Favorites";e.SaveQueryAs="Save as...";e.WorkItemCountDisplayStringPlural="{0} Work Items";e.FlatQuery="Flat Query";e.FilterByAreaPath="Area";e.StoryboardLinkInvalid="TF400063: You have entered an invalid storyboard link: {0}. You must provide a valid UNC path to a file or URL to a storyboard stored on a shared resource. Correct the link and try again.";e.WorkItemFinderQuery="Query";e.ProjectNameRequired="Project must be specified.";e.Update="Update";e.WorkItemFinderTypes="and type";e.DeleteAttachmentsDialogConfirmationText="Are you sure you want to delete the following?";e.ReactionTypeEmojiPartyPopper="Hooray";e.FieldStatusInvalidEmptyError="Field \u0027{0}\u0027 cannot be empty.";e.HistoryControlAgoLastSevenDays="Last seven days";e.DateTimePicker_ClearDate="Clear date and time";e.DestroyWorkItemsTooltip="Permanently delete selected work item(s)";e.DateTimePicker_MinuteDownAriaLabel="Decrease minute";e.CreateCopyCopiedWithAllLinksFrom="Copied with all links from {0}";e.LinkToolTypeRequirements="Requirements";e.CorrectWisAndTryAgain="Please correct the unsaved work item(s) and try again.";e.ColumnOptionsPanelKeyboardShortCutWithControl="Ctrl+Up or Ctrl+Down.";e.ImporCsvExcessFieldValuesError="Excess field value(s) at line {0}, column(s) {1}.";e.ColumnOptionsPanelKeyboardShortCutWithCommand="+Up or +Down.";e.ContributionBlockingWITSave="Saving the work item is blocked by the extension {0}.";e.EditTagsAriaLabel="Edit {0}";e.LinkingDialog_LoadingEnd="Link form loaded";e.NoQueryFolderChildren="No sub-folders.";e.WorkItemCountDisplayStringSingular="{0} Work Item";e.ImporCsvNonIntegerWorkItemIdError="{0} value should be numberic. Please correct the value at line {1}, column {2}.";e.LinkDialog_LinkMultipleWorkItemsAsParentsError="A work item can only have one link of this type. Remove the existing link and try again.";e.ErrorEmailEmptyQueryResults="TF242408: The query you selected does not return any work items. Select a query that contains at least one work item, and try again.";e.QueryFolderPicker_ErrorMessage_FolderRequired="Folder selection cannot be empty.";e.StateField="State Field";e.RollupColumn_TotalBy_WorkItemType="Count of {0}";e.AdditionalDisplayFieldFocusZoneLabel="{0}, press right arrow to choose a different field";e.WorkItemFinderSelectQueryText="\u003cSelect a Query\u003e";e.StateLabel="Stat\u0026e";e.WorkItemTemplates_NoTemplatesDisabledMenuItemTitle="Capture to add a template";e.ConfirmWorkItemRevert="You have unsaved changes to this work item which will be lost. Are you sure you want to revert your changes to the work item?";e.DeleteAttachmentsDialogTitle="Delete attachment(s)";e.MaxQuerySearchResultMessage="Showing the first {0} queries that match: {1}";e.NewChartText="New chart";e.CommentEditedFormat="commented {0} (edited)";e.LinksControlRelatedText="Related";e.WorkItemFinderDialogTitle="Choose Linked Work Items";e.NewMenuTitle="New";e.MobileDiscussionViewNumberOfCommentsSingle="View 1 comment";e.RollupColumn_TotalBy_FieldName="Sum of {0}";e.ReactionTypeEmojiSmilingFace="Laugh";e.WorkItemBulkSaveFailed="One or more work items could not be saved. You might have lost the connection to your server. Refresh your browser, and then try again. If the problem persists, you might not have the area path permissions required to edit work items.";e.EditComments="Edit comments";e.WorkItemsChartsTabTitle="Charts";e.KeyboardShortcutDescription_OpenBacklog="Open backlog";e.WorkItemFinderFindButtonText="Find";e.Queries="Queries";e.EmailQueryResult="Send query as an email";e.WorkItemTemplateDialog_Name="Name";e.ImportWorkItems="Import Work Items";e.ShowMoreWorkItemsMessage="Showing the first {0} items. {1}";e.DestroyWorkItemDialogTitle="Permanently delete work item(s)";e.HistoryControlAttachmentDeletedText="Attachment Deleted";e.LinkToExistingItemToolTip="Link to an existing item";e.ExportingCsvProgressButtonText="Exporting...";e.LinkToolTypeGitHub="GitHub";e.RefreshTooltip="Refresh";e.DevelopmentControlWorkHasntStartedMessage="Development hasn\u0027t started on this item.";e.SaveAndCloseWorkItemText="Save \u0026 Close";e.CreateCopyOfWorkItem_CopiedWorkItemSuffix=" - Copy";e.WorkItemLinkTypeDoesNotExists="Work item link type \u0027{0}\u0027 does not exist.";e.KeyboardShortcutDescription_LeftTab="Move to left tab";e.LinkDialog_ExistingWorkItem_SameTypeHierarchyError="The {1} you have selected is of the same type with work item {0}. Please change the link type or select a {1} work item that is not on the same hierarchy level to avoid a limited experience. ";e.FieldStatusInvalidPathError="The area or iteration provided for field \u0027{0}\u0027 could not be found.";e.LinksControlCommentColumnText="Comment";e.FullscreenEnterIconText="Enter full screen mode (Z)";e.DateTimePicker_HourUpAriaLabel="Increase hour";e.FilterByAssignedTo="Assigned to";e.AttachmentLoading="Loading attachment...";e.IdColonText=" ID: ";e.FiltersForLinkedWorkItems="Filters for linked work items";e.ProjectDoesNotExist="Project \u0027{0}\u0027 does not exist.";e.QueryEditorTreeTypeLabel="Type of tree";e.CommentedJustNow="just now";e.ColumnOptionsInvalidWidth="Column width must be a value between 0 and 65536.";e.DevelopmentControlCreateBranchTitle="Create a new branch";e.AddParentText1="Add an existing work item";e.AddParentText2=" as a parent";e.WorkItemTemplateDialog_SavingAnnouncerEnd="Template saved";e.ColumnOptionsAtLeastOneColumnIsRequired="At least one column is required";e.TagEdit_Separator="Suggested Tags";e.WorkItemsHubComments="Comments";e.LinkingDialog_LoadingStart="Loading link form";e.HistoryControlCommentDeletedAdornmentText="Comment deleted";e.FilterByKeyword="Filter by keyword";e.HistoryControlViaTextEnd=")";e.CustomizeWorkItemsNewFeatureTitle="Customize your work items";e.ProgressBarLoading="Loading";e.RemoteLinkStatusSuccess="Success";e.DialogClose="Close";e.CopyToClipboard="Copy to clipboard";e.QueryBreadcrumbAriaLabel="{0} breadcrumb item picker";e.NameLabel_Watermark="Enter name";e.ShowMoreComments="Show more";e.ErrorExpectingNumericValue="Expecting numeric value.";e.WorkItemBulkDestroyError="We were unable to destroy some work item(s). They are not present in the recycle bin or access is denied. Please refresh to see the failed items.";e.WorkItemPaneFilter_BottomAriaLabel="Work item panel bottom";e.GoToDiscussionShortcutWithControl="(Ctrl+Shift+D)";e.GoToDiscussionShortcutWithCommand="(+Shift+D)";e.ErrorDateTimeValueOutOfRange="The DateTime value is out of range.";e.WorkItemFinderResultStatusString="{0} work item(s) found.";e.QueriesHub_NewFolderCreated_MessageText="New folder \"{0}\" has been created.";e.ImportCSVPanelText="Import work items via CSV file import.";e.MobileDiscussionLoading="Loading";e.Picker_EmptyInput="Empty";e.WorkItemLogControlAttachmentsHeader="Attachments";e.KeyboardShortcutDescription_ToggleFullScreen="Toggle full screen mode";e.WorkItemTemplates_CaptureTemplateMenuItem_TooManyItemsTooltip="Templates can only be generated from individual work items";e.MoveWorkItemDialogTitle="Move work item";e.QueryEditorQueryModeMayHave="Return all top level items";e.FieldStatusInvalidOldValueError="The value for field \u0027{0}\u0027 must be updated, the current value is no longer supported.";e.HistoryControlLinkAddedText="Link Added";e.TestWorkItemDeletedItems="Deleted items";e.SaveAndCloseHotkeyWithCommand="(+Enter)";e.SaveAndCloseHotkeyWithControl="(Ctrl+Enter)";e.WorkItemFieldLabelTitleFormat="[Field Name: {0}]";e.ImportEmptyDataSet="Dataset is empty.";e.BulkEdit_ApplyTemplateTitle="Apply template";e.WorkItemIdOutOfRange="Cannot load work item. Id out of range.";e.LinkDialog_WorkItemNotFoundError="Work item {0} does not exist or you do not have permission to access it.";e.RenameQueryFolderTitle="Rename query folder";e.ImporCsvReadonlyFieldModifiedError="Value of a readonly field {0} was modified. Please revert the {0} values or remove the column from the input file and and try to import again.";e.WorkItemDeleteError_ClickHere="click here";e.ImportEmptyColumn="Empty columns at col(s): {0}.";e.AddTagPlusText="+";e.Unknown="\u003cunknown\u003e";e.ImportCSVPanelLoadingText="Please wait while we load your CSV changes.";e.ImportCSVErrorHeader="There were issues while importing this CSV file.";e.CustomizeWorkItemsText="Personalize your work items with custom fields, picklists and states or add your own custom work items to match your business process.";e.KeyboardShortcutDescription_Next_Item="Next item";e.RestoreWorkItemDialogConfirmationText="Are you sure you want to restore the selected work item(s)?";e.CopyNameTemplate="{0} ({1})";e.WorkItemDeleteError_MoreInfo="For more information on what might cause this error,";e.UnsavedWorkItemActionsMessage="You can leave to discard your changes, or cancel to continue editing.";e.LinksControlAddLinkDisabledTooltip="You cannot add a link to an item in read-only mode";e.WorkItemFinder_AriaLabel_FindResultsGrid="Work item search results";e.LoadingQueryResults="Loading query results...";e.ReturnLinksOfAnyType="Return links of any type";e.MobileDiscussionViewNumberOfComments="View {0} comments";e.MultiFieldInsertNewFieldTooltip="Insert new field";e.DateTimePicker_MinuteUpAriaLabel="Increase minute";e.FilterNoStatuses="No status available";e.InvalidQuerySyntax="{0} The error is caused by {1}.";e.DateTimePicker_GoToToday="Go to today";e.MoveWorkItemBulkTypeError="Work item type(s) {0} may not exist in {1}.  Change the type of all selected work items below, or exit the dialog and move work items separately.";e.ErrorExpectingTeam="Expecting team value.";e.RecycleBin="Recycle Bin";e.HistoryControlWorkItemTagAddedAdornmentText="Tag added";e.StartStoryboarding="Start storyboarding";e.InsertImageEditLabel="Image";e.TextFilterNextItemsMessage="Filter the next {0} items";e.WorkItemChartsPageNotReady="TF401194: The Work item charts page is in an unready state.";e.WorkItemFormIsReadonly="Work item form is readonly";e.WorkItemLogControlWorkItemTypeChange="changed type from {0} to {1}";e.HistoryControlMultipleLinksAdornmentText="Multiple links were added";e.TabErrorAriaLabel="{0} contains invalid fields.";e.LinksControlLinkTypeColumnText="Link Type";e.CannotResolveExternalLinkResource="The \u0027{0}\u0027 url cannot be resolved. Please check the url and try again.";e.CreateCopyCopiedFrom="Copied from {0}";e.FieldStatusInvalidListValueError="The field \u0027{0}\u0027 contains the value \u0027{1}\u0027 that is not in the list of supported values.";e.FilterByTags="Tags";e.EmptyQueryChartList="Choose \u0027New chart\u0027 to create the first chart for \u0027{0}\u0027 query.";e.ImportDuplicateNonRequiredHeaders="Duplicate non-required column headers: {0}.";e.WorkItemLogControlOtherLinkDeleted="deleted other link";e.GitHubZeroDataText3=" to see the status of your development. ";e.GitHubZeroDataText2=" or ";e.GitHubZeroDataText1="Link a GitHub ";e.HistoryControlMultipleAttachmentsAdornmentText="Multiple attachments were added";e.WorkItemLogControlLinkDeleted="deleted {0}link";e.DateTimePicker_PreviousMonthAriaLabel="Go to previous month";e.ExportToCSV="Export to CSV";e.GithubPRLinkDialogAddressTitleWatermark="Enter GitHub pull request url";e.ColumnOptionsColumns="Columns";e.CommentEditedTag="(edited)";e.ProgressBarTooltip="{0}/{1} {2} completed.";e.WorkItemFinderIds="IDs";e.WorkItemTemplateDialog_CopyLinkEnabledMessage="Copy the URL to add a work item using this template.";e.DeleteWorkItemDialogConfirmationTextLearnMoreLink="Learn more";e.RollupColumnFieldRowAriaLabel="Rollup column {0}";e.LinksControlSameHostRemoteLink="A remote work item cannot link to the same organization.";e.SaveResults="Save results";e.ChangeType="Change type...";e.HistoryControlLinkDeletedText="Link Deleted";e.Confirm="Confirm";e.WorkItemTemplateDialog_AddComment="Add a comment";e.ClosePanel="Close panel";e.CustomFollowDialogAllNotificationsRadioDescription="Receive all notifications from this work item.";e.DragFavoriteFailed="The query \u0027{0}\u0027 could not be added to favorites. The underlying error was: \u0027{1}\u0027";e.MoveWorkItemIterationPathLabel="Iteration path";e.QueryResultsGridRoleTitle="Query results grid";e.QueryManageDialog_Validator_FolderInvalid="Folder is invalid.";e.QueryFolderPicker_ErrorMessage_NameExceededLimit="Query name should be less than {0} characters, actual is {1}";e.TestSuites=" Test Suites";e.Customize="Customize";e.NoValueForMultiLineControl="No {0}";e.TriageSummary="{0} of {1}";e.FieldCannotBeEmpty="Field name cannot be empty";e.FilterNoArea="No areas available";e.FilterNoTags="No tags available";e.WorkItemChartsUnsavedQuery="Please save your query before creating a chart.";e.MobileDiscussionMessageSend="Send";e.WorkItemFinderAnyProject="Any Project";e.WorkItemDiscussionAddWithPRCommentHelpText="Add a comment. Use hash symbol to link a work item, exclamation mark to link a pull request, or at symbol to mention a person.";e.WorkItemFinderFavorites="Favorite Query";e.HistoryControlWorkItemTagRemovedAdornmentText="Tag removed";e.CreateCopyOfWorkItemTitle="Copy Work Item";e.WorkItemNotFoundClientException="TF401232: Work item {0} does not exist, or you do not have permissions to read it.";e.LinksControlResultAttachmentText="Result Attachment";e.DeleteWorkItemsToSeeMore="There are more items in the recycle bin.";e.ReadOnlyFieldIconLabel="Field {0} is readonly";e.TitleEmptyText="Enter Title";e.SaveChanges="Save changes";e.TagEdit_ZeroData="No tags have been added";e.WorkItemPaneFilter_FilterWorkItems="Filter work items";e.WorkItemTypeNameRequired="Work item type must be specified.";e.WorkItemLogControlEditedComment="edited a comment";e.ImporCsvMaxRowsExceededError="Max number of work items allowed on import is {0}.";e.ReadonlyWorkItemSaveButtonTooltip="You don\u0027t have permission to edit this work item.";e.WithUnsavedComment="{0} with unsaved comment";e.TestSuiteDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e and all its child Test Suites, Tests across all configurations and testers along with their Test Result History will be permanently deleted. {2}";e.MultiFieldAddNewField="Add new field";e.UnsavedWorkItemPrompt="You have modified this work item. You can save your changes, discard your changes, or cancel to continue editing.";e.LinksControlGitHubPullRequestText="GitHub Pull Request";e.TriageViewWorkItemSaveError="Work item {0}:";e.WorkItemFinderAllWorkItemTypes="All Work Item Types";e.UseWorkItemAsATemplate="Clone work item";e.ImporCsvInvalidWorkItemIdError="{0} value can\u0027t be 0. Please specify the correct value at line {1}, column {2}.";e.EnterDetails="Enter Details";e.DiscussionViewNumberOfComments="{0} comments";e.CommentEditedTooltip="Edited {0}";e.AddYourReaction="Add your reaction";e.WorkItemTemplates_CaptureTemplateDialogTitle="Capture Template";e.DeleteWorkItemDialogRefreshWarningMessage="After deleting selected work items, you need to refresh the page to reflect the changes.";e.DeleteAttachments="Delete attachments";e.CreateCopyCopiedWithAllLinksAndAttachmentsFrom="Copied with all attachments and links from {0}";e.MoveWorkItemProjectWatermark="Select a project";e.NoResultsFound="No results found";e.ColumnOptionsTooltip="Column options";e.QueryColumnLastModifiedBy="Last modified by";e.CommentedFormat="commented {0}";e.WorkItemTypeChangeInProgress="Change type is almost complete! Simply click Save.";e.HistoryControlCommentEditedAdornmentText="Comment edited";e.ColumnOptionsSortDescending="Sort descending";e.QueryAcrossProjects="Query across projects";e.RemoteLinkStatusPendingDelete="Deleting";e.LinkFormResultAttachmentMessage="To link an attachment from a test result to this work item, you must open the test result that contains the attachment and associate the work item with the test result.";e.DialogSave="Save";e.WorkItemDiscussionLabel="Discussion";e.TreeLinksQuery="Tree Links Query";e.DeleteSelectedWorkItems="Delete";e.EmailWorkItems_NoSelection="You have not selected any items to email";e.SaveAndClose="Save and close";e.NewFeatureCustomizeProcessLinkTitle="Customize process";e.ErrorExtensionService_CannotRevertWorkItem="You cannot revert a work item that is new or not dirty";e.QueryFolderPicker_ErrorMessage_FolderDoesNotExist="Specified folder does not exist.";e.BulkEditDialogFieldsRoleTitle="Fields";e.NoCommentsText="No Comments";e.ConfirmDeleteQuery="Are you sure you want to delete \u0027{0}\u0027?";e.RollupColumn_TotalBy_AllDescendants="Count of Work Items";e.MoveWorkItemToPublicProjectMessage="You are moving this work item into a public project.";e.CopyQueryURL="Copy query URL";e.DeletedAreaPath="(removed area path)";e.AttachmentUploadFailPermissionsMessage="You do not have permission to attach files to work items in the current area path.";e.LinkFormWorkItemNotFound="Work item not found or no permission to access it.";e.LinksControlIntegratedInBuildText="Integrated in build";e.TrackChangesNewFeatureTitle="Track changes to work items and code";e.UnsavedComment="Unsaved comment";e.LinksControlBranchText="Branch";e.ImporCsvInvalidFieldValueError="Invalid work item type {0} specified in column {1} at line {2}, column(s) {3}.";e.QueryItemAlreadyExist="Query item \u0027{0}\u0027 already exists.";e.ItemsPlural="{0} items";e.HistoryControlAgoYesterday="Yesterday";e.QueryEditorQueryModeMustHave="Only return items that have matching links";e.WorkItemLogControlProjectChange="changed project from {0} to {1}";e.LinkDialog_QueuedLinkDuplicateWorkItemsError="Work item {0} is already in the list of items to link.";e.KeyboardShortcutDescription_CopyWorkItemTitle="Copy work item title";e.WorkItemEditorDirtyCaption="{0}*";e.CustomRollupTotalOptionTitle="Rollup as Total";e.RollupColumn_TotalBy_Backlog="Count of {0}";e.TagEdit_FilterWatermark="Add tag";e.WorkItemLogControlAttachmentDeleted="deleted an attachment";e.WorkItemEditorCaption="{0} {1}";e.CopyQueryURLDataTooLargeException="VS402348: The query definition is too large to share. Please save the query as a Shared Query and share the link to the saved query.";e.QueryDirtyDocumentTitleFormat="Query: {0}";e.AttachmentDropMessageHeader="Upload files";e.BooleanFieldTrueValue="True";e.LinksControlAddLinkToExistingItem="Existing item";e.LinksControlZeroData="No links have been added";e.ColumnOptions="Column options";e.WorkItemTemplateDialog_CopyLink="Copy link";e.LinksControlGitHubHelpText_about="about GitHub integration with Azure Boards.";e.GithubIssueLinkDialogAddressTitleWatermark="Enter GitHub issue url";e.WorkItemDiscussionAddWithPRComment="Add a comment. Use # to link a work item, ! to link a pull request, or @ to mention a person.";e.WorkItemTemplateDialog_NoMemberTeamsError="You cannot capture this template because you are not a member of any team in this project";e.CustomRollupProgressOptionSubtitle="A percentage calculation of the linked descendant will be added at the parent level. Progress is calculated as completed work items out of all work items.";e.MoveWorkItemChangeTypeWatermark="Select a work item type";e.CustomFollowDialogNoNotificationRadio="Not Subscribed";e.TestWorkItemDeletePermissionError="You don\u0027t have sufficient permissions to delete this work item. You must have work item and test artifacts delete permissions.";e.QueryResultsGridNumSelectedSecondaryTextFormat="{0} selected";e.EmailQuery="Email query";e.WorkItemDiscussionMentionLinkComment="{0} mentioned work item #{1} in #{2} discussions";e.AreaLabel="\u0026Area";e.FollowingWisCouldNotBeSaved="The following work item(s) could not be saved:";e.WorkItemRevert="Revert changes";e.FieldStatusInvalidCharactersError="The value for field \u0027{0}\u0027 has unsupported characters.";e.CustomRollupTypeOptionLabel="Select rollup type";e.MoveWorkItemAreaPathLabel="Area path";e.VisualizeYourWorkNewFeatureTitle="Visualize Your Work";e.AttachmentUploadCancelledMessage="You have refreshed the work item or reverted changes. The file upload has been canceled.";e.WorkItemLogControlMadeOtherChanges="made other changes";e.ReturnSelectedLinkTypes="Return selected link types";e.LinksControlCommitText="Commit";e.Of="of";e.OK="OK";e.CustomFollowDialogTitle="Notification Settings";e.LinksControlDuplicateHyperlink="Duplicate hyperlink.";e.LinksControlHyperlinkText="Hyperlink";e.MoreSaveOptions="More save options";e.KeyboardShortcutDescription_SaveAndClose="Save and close";e.RollupColumn_ProgressBy_AllCompletedDescendants="Progress by all Work Items";e.RecentWorkItems="Recent work items";e.CannotGetRegisteredInstance="Cannot get registered instance for : {0}";e.LinkTopologyTreeForwardImageAltText="This is a directional link that creates a one-to-many relationship. Once this link is created, no more links of this type can be added to this work item.";e.WorkItemPaneFilter_Off="Off";e.LinksControlFoundInBuildText="Found in build";e.LinksControlBuildText="Build";e.FullscreenExitIconText="Exit full screen mode (Z)";e.QueriesView_FolderPivotName="Folder";e.ImportErrorMessageTitle="Found the following header errors:";e.HistoryControlAgoOlder="Older";e.ExportToCsvQueryResultTooBig="The number of work items returned exceeds the limit for export to CSV. Please change the query to return fewer than {0} items and try again.";e.KeyboardShortcutDescription_HistoryTab="Move to history tab";e.ReactionTypeEmojiThumbsDown="Dislike";e.ZeroDataImageAltText="Zero Data Image";e.EmailSelectedWorkItemToolTip="Email the selected work item";e.HistoryControlAgoToday="Today";e.LinkFormTestResultMessage="To link a test result to this work item, you must open the test result and associate the work item with the test result.";e.ErrorExpectingIntegerValue="Expecting integer value.";e.FileThrottleDialogTitle="Too many files";e.EmailWorkItem="Email work item";e.DateTimePicker_NextMonthAriaLabel="Go to next month";e.FieldErrorAriaLabel="Invalid {0}";e.ImporCsvExtraFieldsFoundError="Excess number of field values found at line {0}: expected {1} but read {0}.";e.BulkEditSelectedWorkItems="Edit...";e.LinkDialogCommentTitle="Comment";e.InvalidErrorParameter="Invalid Error Parameter";e.FieldCannotBeRemoved="This field cannot be removed.";e.ExternalLinkText="External link";e.AddAttachmentUnknownError="Unknown Attachment Error.";e.LinksControlDescriptionColumnText="Description";e.QueryFilterErrorEmptyValue="The value for row {0} is not filled correctly.";e.WorkItemLogControlCreatedWorkItem="created the {0}";e.WorkItemIdUndefined="Cannot load work item. Id undefined.";e.AzureReposZeroDataText1="Link an Azure Repos ";e.AzureReposZeroDataText2="You can also ";e.AzureReposZeroDataText3=" to get started.";e.ErrorExpectingBooleanValue="Expecting boolean value.";e.Bug="Bug #{0}";e.Sum="Sum";e.LinkDialog_CircularWorkItemRelationshipError="Adding a {0} link between work items {1} and {2} would result in a circular relationship. To create this link, evaluate the existing links, and remove one of the other links in the cycle.";e.TestResults=" Test Result History";e.Count="Count";e.Items="items";e.WorkItemBulkRestoreError="We were unable to restore some work item(s). They are not present in the recycle bin or access is denied. Please refresh to see the failed items.";e.WorkItemLinkText="Work item link";e.TitleField="Title Field";e.Query="Query";e.EditComment="Edit comment";e.Tests=" Tests";e.WorkItemIsReadOnlyError="This action does not apply because the work is read-only.";e.AssignedToEmptyText="Unassigned";e.RollupColumn_TotalBy_Filter_Field="Sum of {0} {1}";e.ImportNonConsecutiveTreeHeader="Non-consecutive tree column headers at col(s): {0}.";e.QueryEditorLinkTypeLabel="Types of links";e.QueryColumnTitle="Title";e.WorkItemChartsUnrecognizedQueryMessage="Query Type is unrecognized - You can create a chart for a flat list query.";e.StateEmptyText="Select State";e.FollowedWorkItemsQuery="Followed work items";e.LinksControlCreateNewLink="New item";e.RemoteLinkStatusPendingUpdate="Updating";e.ExportToCsvNoQueryResultsMessage="The query you selected does not return any work items. Select a query that contains at least one work item, and try again.";e.WorkItemsHubTruncatedCommentCount="{0}+";e.UpdatedDateByMessage="Updated {0} by {1}";e.CopyQueryURLExpirationMessage="Note: The query URL will expire in {0} days.";e.WorkItemMoveInProgress="Your move is almost complete! Simply click Save.";e.CreateaBranchText="create a branch";e.LinksControlAddLinkDisplayText="Add link";e.NoLicenseEmptyQueryChartList="To author charts, you must have the correct license and configuration. For more information, \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkId=256033\u0027 target=\u0027_blank\u0027\u003esee visualstudio.com\u003c/a\u003e.";e.LinksControlVersionedItemText="Versioned Item";e.WarningExportingDirectLinksTitle="Direct links export";e.WorkItemTypeDoesNotExist="Work item type \u0027{0}\u0027 does not exist.";e.AttachmentsGridViewIconAriaLabel="Click to toggle to Attachments Grid View";e.AdditionalSortFieldFocusZoneLabel="{0}, {1}, press right arrow to choose a different field";e.TabHeaderTooltip="{0}";e.QueryEditorQueryMatchTopLevelItems="Match top-level work items first";e.HistoryControlWorkItemRestoredAdornmentText="Work item restored";e.KeyboardShortcutDescription_NewQuery="New query";e.AttachmentDropMessage="Drag and drop your files here.";e.RichEditorMaximizeName="Maximize {0}";e.RestoreWorkItemsTooltip="Restore selected work item(s)";e.ErrorCannotCreateLegacyExtension="Cannot create work item control of type \"{0}\". Legacy extensions are no longer supported in new work item form.";e.CreateCopyOfWorkItem_Failed="Failed to copy work item: ";e.HistoryControlWorkItemDeletedAdornmentText="Work item deleted";e.HistoryOutdatedWithUnsavedChangesWarning="History details is outdated. Please save your changes, or discard them to see the latest details.";e.WorkItemPaneFilter_Bottom="Bottom";e.LinkDialogTypeNotValid="Could not find the specified link type.";e.AttachmentsGridCommentsColumn="Comments";e.KeyboardShortcutDescription_OpenTaskBoard="Open task board";e.RefreshHotkey="(Alt+R)";e.WorkItemTypeChangeInProgressWithErrors="Change type is almost complete! Fix the errors and click Save.";e.ChartEditor_Query_GroupingTooltip="The columns you have specified in your query will show up as grouping for the chart.";e.LinksControlIssueText="Issue";e.UnableToCreateBugOfType="Unable to create work item of type: {0}.";e.PreviewUnhandled="It looks like this file doesn\u0027t have a preview we can show you.";e.MobileGoBackAriaLabel="Go back";e.LinkWorkItemsNoFavorites="You do not have any favorite queries";e.InsertImageInvalidFileType="TF400116 Unsupported file type.  Valid file types are: {0}.";e.NewFolder="New folder";e.GithubCommitLinkDialogAddressTitleWatermark="Enter GitHub commit url";e.PickAColumn="Pick a Column";e.WorkItemArtifactLastUpdatedLabel="Updated {0}";e.MobileDiscussionZeroData="Be the first to add a comment";e.StateTransitionGraphViewAllChangesText="Show all";e.WorkItemDiscussionAdornmentTooltipSingular="Go to discussion. There is 1 comment available";e.AttachmentUploadingEnd="One or more attachments uploaded.";e.FolderLabel="Folder";e.ImporCsvDuplicateWorkItemIdColumnError="Duplicate {0} for work item id {1} at line {2}, column {3}.";e.ScopedIdentityTooltipWithSuffix="This field is scoped to: {0} and more.";e.NoLicenseHostedEmptyQueryChartList="No charts exist for this query.";e.InvalidCSVFileFormat="Only CSV files are accepted.";e.Wiql_MacroCurrentIteration="CurrentIteration";e.HistoryControlStateAdornmentText="Set to {0} state";e.LinkDialogErrorWorkItemTypesToAdd="The filter for the link control is defined so that no work items of any type can be added. Modify the filter definition and import it again.";e.WorkItemsHubEditorTabTitle="Editor";e.LinksControlZeroDataBranchText="branch";e.QueryColumnFolder="Folder";e.NewLinkedWorkItemTypeTitle="Work item type";e.Rollup_EffortFieldName="Effort";e.ErrorCannotCreateWorkItemControl="Cannot create work item control of type \"{0}\"";e.LoadingWorkItem="Loading work item";e.WorkItemLinkTypeEndDoesNotExist="Work item link type end \u0027{0}\u0027 does not exist.";e.WorkItemRestoreError="Failed to restore work item: {0}. Error Details: {1}";e.NewFeatureLearnMoreLinkTitle="Learn more";e.LinkDialogWorkItemIdsTitle="Work items to link";e.InsertImageUploadingDialogTitle="Uploading Image...";e.NewLinkedWorkItem="New linked work item";e.InternalServerError="Internal Server Error:";e.CustomFollowDialogCustomNotificationRadio="Custom";e.QueryEditorRoleTitle="Query editor";e.WorkItemPaneFilter_RightAriaLabel="Work item panel right";e.RollupColumnInfo="Add a Rollup column to display percentage of progress or sum of work items based on hierarchical parent/child relationships.";e.AdhocQueryDefaultName="Custom query";e.FollowingWorkItem="Following";e.QueryMyFavoriteLabel="My favorites";e.AssignedToMeQuery="Assigned to me";e.WorkItemIdDisplayStringSingular="Work Item {0}";e.MoveWorkItemTitle="Move to team project...";e.GroupErrorAriaLabel="{0} contains invalid fields.";e.WorkItemTypePicker_Label="Backlog level or work item type";e.GitHubLinkAlreadyExists="A {0} link with the same URL already exists.";e.RollupColumn_ProgressBy_WorkItemType="Progress by {0}";e.BulkEditDialogHistoryRoleTitle="History";e.RevertQueryChanges="Revert changes";e.AttachmentsGrid_PlaceholderPrefixText="Uploading ";e.GithubPRLinkDialogAddressTitle="GitHub pull request url";e.WorkItemTemplate_FailedToLoad="Failed to load template.";e.WorkItemTemplate_FailedToSave="Failed to save template.";e.LinksControlDuplicateRemoteLink="A remote work item link already exist.";e.LinksControlStoryboardText="Storyboard";e.WorkItemFinderProject="Project";e.LinkDialog_LinkSelfWorkItemError="You cannot link a work item to itself so work item {0} was not added to the list.";e.CopySelectedWorkItemsAsHtml="Copy as HTML";e.UnsavedCommentPrompt="You have an unsaved comment. Close and lose changes?";e.WorkItemTemplateDialog_ConfirmClosePrompt="You have modified this template. Close and lose changes?";e.LinksControlCircularRemoteLink="A remote work item link already exists in the other direction, circular link cannot be established.";e.WorkItemDiscussionCommentAriaLabel="Comment {0} of {1}.";e.QueryEditorQueryMatchLinkedItems="Match linked work items first";e.ColumnOptionsTitle="Column Options";e.Heading_SuggestedValues="Suggested Values";e.PrivacyStatement="Your privacy is important to us.";e.WorkItemLogControlDeletedWorkItem="deleted the work item";e.HistoryControlProjectAdornmentText="Work item moved to {0} project";e.RunQuery_PromptUnsavedWorkItemChanges_MessageTitle="Are you sure you want to run query?";e.MovingQueryLabel="{0} *";e.DiscardWorkItem="Discard";e.WorkItemDiscussionAdornmentTooltip="Go to discussion. There are {0} comments available";e.KeyboardShortcutDescription_AssignToMe="Assign work item to me";e.AddAttachmentDialogFieldComment="Comment";e.HistoryOutdatedFromUnsavedChangesWarning="History details is outdated. Please save your changes, revert them, or refresh to see the latest details.";e.BackToQuery="Back to query";e.WorkItemDelete_NoPermission="We were unable to delete the work item(s), you do not have sufficient permissions to delete.";e.FetchingImplications="Fetching implications...";e.EditQuery_PromptQueryRevert_MessageContentText="You have unsaved changes that will be lost:";e.DestroyWorkItemDeleteButtonText="Permanently delete";e.HtmlFieldPlaceholder="Click to add {0}";e.DeleteQueryFolder="Delete";e.LinkToExistingItem="Link to an existing item...";e.QueryResultsNewQueryGridStatusText="Run to see the query results.";e.QuerySaveDialog_FolderCombo_ExpandButtonAriaLabel="Expand";e.KeyboardShortcutDescription_Discussion="Go to discussion";e.LoadingTeamFavorites="Loading Team";e.DiscussionViewNumberOfCommentsSingle="1 comment";e.WorkItemDiscussionAddComment="Add a comment. Use # to link a work item or @ to mention a person";e.WorkItemChartsDisallowedAdhocQuery="TF401195: This generated query is not supported for use with Charting.";e.RecyclebinCleanupMessage="Recycle Bin items older than {0} days will be permanently deleted.";e.WorkItemHtmlFieldMentionLinkComment="{0} mentioned work item #{1} in #{2}";e.DeleteOrRestoreConfirmationMessage="Work items are still being deleted or restored. The operation may be canceled if you navigate away.";e.TagsLabelText="Tags";e.ImportEmptyColumnHeaders="Empty column headers at col(s): {0}.";e.MoveWorkItemMessage="Learn more about moving a work item";e.TriageNextWorkItemToolTip="Next work item in the \"{0}\" query (Alt + N)";e.QueriesView_PivotTitle="Queries";e.ExportingWorkItems="Exporting work items";e.RollupProgressBarOptionsHeadingText="Progress bar";e.InvalidArgumentExpectingArray="Invalid argument, expecting array of WorkItemRelations";e.DeletedIterationPath="(removed iteration path)";e.SelectedWorkItemsLabel="Selected Work Items";e.LinksControlDuplicateStoryboard="The current work item already contains a link to this storyboard: {0}";e.MoveWorkItemDialogCurrentProjLabel="(current project)";e.FieldValueIdentityPickerAriaLabel="Search users and groups for field {0}";e.RollupDataQualityException="Unable to get quality data.";e.HistoryControlTreeAriaLabel="History";e.GitHubPromoteZeroDataText1="We noticed that you\u0027ve used GitHub with Azure Pipelines in this project. ";e.GitHubPromoteZeroDataText2="Connect Azure Boards with GitHub";e.FieldStatusInvalidDateErrorError="The value for field \u0027{0}\u0027 is not a recognized date.";e.FilterNoAssignedTo="No users available";e.HistoryControlCommentAddedAdornmentText="Comment added";e.GithubCommitLinkDialogAddressTitle="GitHub commit url";e.RefreshCharts="Refresh charts";e.InsertImageName="Insert image";e.InformationIcon="Information Icon: {0}";e.ErrorExpectingDateTime="Expecting DateTime value.";e.FieldStatusInvalidValueNotInOtherFieldError="The field \u0027{0}\u0027 is unsupported because a value is missing in another field.";e.BooleanFieldFalseValue="False";e.ImportDuplicateRequiredHeaders="Duplicate required column headers: {0}.";e.LinksControlEnterStoryboardUrl="You must specify a link to the storyboard. A valid UNC path to a file or URL to a storyboard stored on a shared resource is required.";e.LinkDialog_LinkChildWorkItemWhichHasAParentError="Work item {0} already has a {1} link so a new one cannot be added.";e.DragQueryMoveFailed="Can\u0027t move query \u0027{0}\u0027 . The underlying error is: \u0027{1}\u0027";e.KeyboardShortcutDescription_RefreshQuery="Refresh query";e.GenericRollupError="Something went wrong while fetching rollup data.";e.QueryEditorQueryTypeLabel="Type of query";e.CreateCopyOfWorkItem_IncludeChildren="Include child work items";e.QueryEditorSourceFilterGroupingText="Filters for top level work items";e.ChangeTypeBlockedCase="Work item type {0} cannot be changed.";e.NoActiveWorkItem="Active work item document does not exist in the current context";e.FieldStatusInvalidComputedFieldError="The value for field \u0027{0}\u0027 is computed and cannot be changed.";e.DeleteWorkItemDialogConfirmationText="Are you sure you want to delete the selected work item(s)?";e.KeyboardShortcutDescription_RightTab="Move to right tab";e.BackToQueryResults="Return to the \"{0}\" query (Alt + Q)";e.DateTimePicker_AMPMUpAriaLabel="Switch AM PM";e.RestoreWorkItemDeleteButtonText="Restore";e.AttachmentsGridNameColumn="Name";e.CustomRollupPanelTitle="Custom rollup column";e.QueryEditorQueryTypeSimple="Flat list of work items";e.ImportMissingRequiredHeaders="Missing required column headers: {0}.";e.AttachmentsTitle="Attachments";e.WorkItemDiscussionAddCommentHelpText="Add a comment. Use hash symbol to link a work item or at symbol to mention a person";e.TestWorkItemAffectedItems="Affected items";e.WorkItemTemplates_UserDoesNotHaveTeamPermission="You do not have permission to edit templates for this team.";e.LinkDialog_LinkUnsupportWorkItemTypeError="A work item of type {0} cannot be used for the {1} link type.";e.QueryEditorNewQueryNameFormat="New Query {0}";e.AriaLabelForActions="Actions";e.LastUpdatedDateLabel="Updated";e.RunQuery_PromptUnsavedWorkItemChanges_MessageContentText="You have unsaved work item changes and they will be lost if you continue to run the query:";e.FileThrottleMessage="You have attempted to upload more files than the maximum allowed at once: {0}";e.ContributionNotFound="Contribution not found.";e.HistoryControlAttachmentAddedText="Attachment Added";e.TriageView="Triage View";e.ImporCsvIncorrectTreeStructureError="Field values that do not adhere to correct tree structure at line {0}, column(s) {1}.";e.AttachmentUploadFailMessage="You have attempted to upload files that either don\u0027t exist or are folders: {0}";e.CopySelectedWorkitemsOpenAsQuery="Open as query";e.CreateCopyOfWorkItem_IncludeLinks="Include existing links";e.WorkItemLogControlStateGraphTitle="State Graph";e.WorkItemFinderTitleContainsAndType="Title contains and type";e.FormGroupExpandAriaLabel="{0} section.";e.RunQuery_PromptUnsavedWorkItemChanges_ProceedButtonText="Continue";e.QueryEditorQueryModeDoesNotContain="Only return items that do not have matching links";e.DialogCloseButtonText="Close (ESC)";e.CopyQueryURLNotFoundException="VS402349: The custom query does not exist or is expired.";e.FieldStatusInvalidNotEmptyOrOldValueError="The value for field \u0027{0}\u0027 must be empty or the same as the original value.";e.FieldStatusInvalidNotOldValueError="The value for field \u0027{0}\u0027 must be the same as the original value.";e.FilterByStates="States";e.AggregationTypePickerLabel="Column Metric";e.ConfigureCustomRollupColumn="Configure custom rollup";e.EmailResolveIdentityFailed="We were unable to resolve one or more identities. Please try again.";e.AssignedToLabel="Assi\u0026gned To";e.AssignedToField="Assigned To Field";e.QuerySaveDialog_ErrorMessage_NameAlreadyExists="A query or folder with this name already exists in the specified folder.";e.CommandBarTitle_DeleteWorkItems="(Del)";e.WorkItemsHubResultsTabTitle="Results";e.CustomFollowDialogCustomNotificationRadioDescription="You will only be notified for the events selected from the list below or when you are @mentioned in this work item.";e.SuccessfulUnfollowFromEmail="You are no longer following this work item.";e.InvalidQuery="Invalid Query";e.ContributionTimedOut="\"Timed-out waiting for contribution source provider for contribution: {0}";e.QueryConfirmDragDropOperation="Are you sure you want to move the selected item from \u0027{0}\u0027 to \u0027{1}\u0027? Doing so prevents others from accessing it.";e.WorkItemLogControlUserViaUser="{0} (via {1})";e.SharedParameterDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e will be permanently deleted. {2}";e.QueryResultsGridStatusTextFormat="{0} work items ({1} selected)";e.CopySelectedWorkItemsIdColumnTitle="ID";e.WorkItemMoveInProgressWithErrors="Your move is almost complete! Fix the errors and click Save.";e.GithubIssueLinkDialogAddressTitle="GitHub issue url";e.SaveQueryAsTooltip="Save query as...";e.AddARollupColumnFromQuicklist="From quick list";e.LinksControlEnterUrl="Enter a URL.";e.LinkDialogWorkItemPickerInputWatermark="Enter ID or search for work items";e.QuerySaveDialog_ErrorMessage_NameInvalid="Name cannot contain the following characters: /\\\u003c\u003e*?\"|:";e.LinkToolTypeCode="Code";e.LinkToolTypeWork="Work";e.LinkToolTypeWiki="Wiki";e.LinkToolTypeTest="Test";e.ReactionUserListHeaderSingular="User with {0} reaction";e.LastUpdatedLabel="Updated by ";e.MissingUri="Missing uri property for contribution : {0}";e.FutureIterations="Future Iterations";e.FieldStatusInvalidEmptyOrOldValueError="Field \u0027{0}\u0027 cannot be empty, and must be different from the original value.";e.FieldStatusInvalidNotEmptyError="The value for field \u0027{0}\u0027 must be empty.";e.FieldValueComboAriaLabel="Value for field {0}";e.LoadingWorkItems="Loading work items";e.LiveReloadWorkItemDeleteNotificationMessage="The work item you are currently viewing has been deleted.";e.QueryingStatusText="Querying...";e.ColumnOptionsPanelText="Add or remove columns. To change the column order, drag and drop a field, or use the keyboard shortcuts, ";e.WorkItemTypeChangedNotificationMessage="The work item type has changed.";e.ImporCsvErrorsFound="Found field value error(s):\r\n{0}";e.FilterInvalidWorkItems="Invalid work items";e.CreateCopyOfWorkItemType="Work item type";e.WorkItemTemplates_ManageMenuItem_Text="Manage...";e.QueryFavoriteItemAriaLabel="{0}, Level 0, ";e.AttachmentsThumbnailViewIconAriaLabel="Click to toggle to Attachments Thumbnail View";e.QueryTeamFavoriteLabel="{0} favorites";e.LinkFormTestMessage="To link a test to this work item, you must open a test result for the test and associate the work item with the test result.";e.ShowMoreWorkItemsLinkMessage="Show all items";e.KeyboardShortcutGroup_Work="Work";e.DateTimePicker_SelectDateTime="Select date and time";e.ScopedIdentityTooltip="This field is scoped to: {0}.";e.Refresh="Refresh";e.MoveSourceWorkItemBlockedCase="Work item type {0} cannot be moved because it is disabled, hidden or not supported in the source project {1}.";e.HistoryControlTooltipAdditionalTextMessage="See history details for full text";e.RemoveReaction="Remove your {0} reaction";e.WorkItemsCreatedByMeQuery="Work items created by me";e.CreateCopyCopiedFromNewWorkItem="Copied from new work item";e.RollupColumn_ProgressBy_Filter_Field="Progress by {0} {1}";e.KeyboardShortcutDescription_FilterResults="Filter results";e.FilterByWorkItemStatus="Status";e.ReactionTypeEmojiThumbsUp="Like";e.DeleteWorkItemDeleteButtonText="Delete";e.TestCaseDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e across all configurations and testers along with their Test Result History will be permanently deleted. {2}";e.MissingRollupCalculationError="Rollup calculation for this field is missing. Please remove the field and try adding it back";e.RenameQueryFolder="Rename";e.AdditionalFieldEmptyFocusZoneLabel="Select a field";e.NoSuggestionsFound="No suggestions found";e.BulkEditWorkItemsNotesForHistoryLabel="Notes for History";e.IterationLabel="Ite\u0026ration";e.MoveWorkItem="Move to team project";e.QuerySaveDialog_ErrorMessage_NameRequired="Name cannot be empty.";e.ReactionUserListHeaderPlural="Users with {0} reaction";e.WorkItemChangedReproDescriptionMessage="Copied from {0} when changed from {1} to {2}";e.EmailWorkItemLimit="Only the first {0} work items are retrieved for the email.";e.WorkItemLogControlRestoredWorkItem="restored the work item";e.WorkItemPaneFilter_Right="Right";e.TriageViewSaveErrorTitle="Error saving work items";e.MoveWorkItemTypeError="Work item type {0} does not exist in {1}.";e.BulkUnfollowWorkItems="Unfollow";e.WorkItemTemplateDialog_TeamName="Team";e.HistoryControlNewValueText="New Value";e.CustomFollowDialogNoNotificationRadioDescription="Only receive notifications from this work item when you have been @mentioned.";e.TestWorkItemDeleteDialogInputLabel="Type {0} ID to confirm:";e.CustomFollowDialogAllNotificationsRadio="Subscribed";e.KeyboardShortcutDescription_AttachmentsTab="Move to attachments tab";e.InvalidRemoteWorkItemUrl="Remote workitem url is not valid.";e.ReactionTypeEmojiRedHeart="Heart";e.UnfavoriteQueryFailed="Unable to unfavorite query \"{0}\"";e.AttachmentsGridSizeColumn="Size";e.LinkDialog_LinkDuplicateWorkItemsError="A {0} link to work item {1} already exists.";e.WorkItemTemplates_LegacyCopyMenuItem_Title="Generate a URL that will create a new work item with the modified field values of this work item.";e.WorkItemIdNaN="Cannot load work item. Id not a number.";e.CustomRollupProgressOptionTitle="Rollup as Progress Bar";e.WorkItemsText="Work Items";e.WorkItemDestroyError="Failed to destroy work item: {0}. Error Details: {1}";e.CannotFindRollupData="Unable to find rollup data for this work item.";e.EmailSelectedWorkItem="Email selected work item...";e.MoveWorkItemKeepType="Keep current type(s)";e.AttachmentsZeroData="No attachments have been added";e.UpdatedDateMessage="Updated {0}";e.WorkItemZeroDataDiscussionAriaLabel="Discussion: Be the first to add a comment. Click here to view discussion.";e.ErrorEmailUnsavedQuery="You have unsaved changes made to the query \u0027{0}\u0027. Save the modified query before proceeding.";e.FormGridSectionLabel="Section {0}";e.UnfollowWorkItem="Unfollow";e.WorkItemFinderSelectFavoriteText="\u003cSelect a Favorite Query\u003e";e.LinksControlUnsafeUrl="The URL specified has a potentially unsafe URL protocol.  Please specify a different URL.";e.HistoryControlLinksTitle="Links";e.WorkItemTemplateNotApplied="VS403204: No template was applied.";e.CreateCopyOfWorkItem_IncludeAttachments="Include existing attachments";e.WorkItemMoveCopyPublicVisibilityLearnMoreLinkText="Learn more about public projects";e.TestWorkItemDeleteDialogTitle="Permanently delete test artifact(s)";e.WorkItemTemplateDialog_SavingAnnouncerStart="Saving template";e.KeyboardShortcutDescription_OpenWorkItems="Open work items";e.WorkItemTemplates_LegacyCopyMenuItem_Text="Copy template URL";e.AddAttachmentDialogTitle="Add Attachment(s)";e.ImportInvalidColumnHeaders="Invalid column headers: {0}.";e.WorkItemTemplateDialog_SavingAnnouncerError="Error saving template";e.WorkItemLogControlStateChange="changed state from {0} to {1}";e.EditQuery_PromptQueryRevert_MessageTitle="Are you sure you want to revert changes?";e.QueryTree_Loading="Loading";e.StateTransitionAriaLabel="Transition {0}: To state: {1}, reason for transition: {2}, changed by {3} on {4}.";e.WorkItemLogControlLinkRestored="restored link";e.TooManyChildItemsToCopy="Cannot copy a work item with more than {0} children.";e.LinksControlAddNewItemDisabledTooltip="You cannot link new work items to an item that has not been saved";e.WorkItemEditorCaptionNew="New {0} {1}";e.LinkToolTypeBuild="Build";e.WorkItemLogControlHistoryHeader="History";e.WorkItemLogControlAddedComment="added a comment";e.RemoteLinkStatusFailed="Failed";e.QueryFolderDoesNotExist="Parent folder \u0027{0}\u0027 does not exist, if you have renamed the folder please refresh before continuing.";e.KeyboardShortcutGroup_Queries="Queries";e.WorkItemFinderQueryInProgress="Query in progress...";e.CopyQueryURLNotifyMessage="The query URL is copied to the clipboard.";e.CreateWorkitemIVURLSuccess="Successfully copied the template URL to the clipboard.";e.ProgressPercentage="{0}%";e.FailedUnfollowFromEmail="Unfollow was not successful";e.RemoteLinkStatusPendingAdd="Adding";e.QueryFilterErrorUnrecognizedOperator="The operator for row {0} is not recognized.";e.MoveWorkItemIterationPathWatermark="Select an iteration path";e.MyFavoritesGroupName="My";e.HistoryControlChangesHeader="Change details";e.BrowseAllQueries="Browse all queries";e.NewQueryFolder="New subfolder";e.AttachmentUploadProgressNotification="Attachment(s) uploading...";e.WorkItemLogControlMadeChangeWithValue="changed {0} to {1}";e.QueryFilterErrorMissingOperator="The operator for row {0} is missing.";e.SaveQueryAsDialogTitle="Save query as";e.DeleteWorkItemDialogConfirmationTextWithoutCleanUpScheduled="You can restore deleted work items from the Recycle Bin.";e.ColumnOptionsSortAscending="Sort ascending";e.TrackChangesText="View your code artifacts right from the work item form. Creating a new branch or pull request for a bug fix is just a click away.";e.LinkDialogStoryboardLinkAddressTitle="Location";e.ExportingWorkItemsLoading="Exporting work items...";e.LinkDialogDescription="You are adding a link from:";e.QueryMoveOrRename_QueryItemAlreadyExists="A query or folder with the same name already exists in the target folder. Please resolve the name conflict before moving or renaming.";e.GenericHistoryRetrievalError="Error retrieving work item history";e.RollupColumn_LearnMore="Learn more about Rollup.";e.LinkDialog_NewWorkItem_SameTypeHierarchyError="The work item type you have selected is of the same type with work item {0}. Please change the link type or select a {1} work item that is not on the same hierarchy level to avoid a limited experience. ";e.FilterNoStates="No states available";e.NoTeamFavoriteQueries="Drag shared queries here to add them to your team favorites.";e.TestPlanDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e and all its child Test Suites, Tests across all configurations and testers along with their Test Result History will be permanently deleted. {2}";e.LinkSelectedItemsToNewWorkItem="Link to a new work item...";e.BrowserRefreshRequired="VS402831: Changes have been made to the process that require you to refresh your browser.";e.RollupColumn_ProgressBy_Backlog="Progress by {0}";e.BulkEdit_ApplyTemplateMessage="Are you sure you want to apply the template \u0027{0}\u0027? The selected work items will be automatically saved.";e.EmptyMyFavoriteGroupTextPrefix="No favorites yet! Favorite a query";e.FieldCannotBeEditedNorRemoved="{0}, this field cannot be edited nor removed";e.LinksControlUnknownLinkTypeText="Unknown link type to execute.";e.CopyWorkItemTitle="Copy work item title (Shift+Alt+C)";e.QueryResultsGridStatusNoResultsText="Query returned no results.";e.ImporCsvDoubleQuoteTerminatedEarlyError="Double-quoted value possibly terminated too early or missing delimiter at line {0}, column {1}.";e.WorkItemSaveLabel="Save";e.FilterStatusFieldName="work-item-status";e.WorkItemFinderResetButtonText="Reset";e.BulkUnfollowsFailed="One or more items could not be unfollowed. Refresh the query and try again.";e.MobileDiscussionAddComment="Add a comment";e.ChangeTypeTooltipDisabled="Not supported when querying across projects";e.QueriesHub_NewFolderCreated_LinkText="Click to open it.";e.EmptyMyFavoriteGroupTextSuffix="to quickly access it here.";e.CreateCopyOfWorkItemSourceFormat="Creating a copy of {0} {1}: {2}";e.HistoryControlViaText=" (via ";e.LoadingWorkItemsLoading="Loading work items...";e.FilesUploadedExceedMaxMb="The following file(s) can\u0027t be uploaded because they exceed our {0} MB file size limit: {1}";e.ErrorEmailUnsavedWorkItems="The selected work items cannot be emailed. You have new work items that have not yet been saved. To proceed, exclude the new work items from the selection.";e.QueriesView_AllPivotName="All";e.EmailSelectedWorkItems="Email...";e.SaveItems="Save items";e.WorkItemFinderTitleContains="Title contains";e.SaveQuery="Save query";e.MoveTargetWorkItemBlockedCase="Work item type {0} cannot be moved because it is disabled, hidden or not supported in the destination project {1}.";e.TagsDeleteButton_AriaLabel="Delete {0} tag";e.DownloadAttachment="Download attachment";e.DeleteQuery="Delete";e.FieldStatusInvalidTooLongError="The value for field \u0027{0}\u0027 is too long.";e.BulkEditWorkItemsTitle="Edit work items";e.OpenInNewTab="Open in new window";e.ChangeTypeDialogTitle="Change work item type";e.RichEditorRestoreName="Restore {0}";e.HistoryControlSingleAttachmentAdornmentText="{0} was added";e.LinksControlWikiPageText="Wiki page";e.WorkItemProjectChangedNotificationMessage="The work item now belongs to a different project.";e.NoMyFavoriteQueries="Drag queries here to add them to your favorites.";e.LinkTopologyNetworkImageAltText="This is a non-directional link that can be created between any set of work items";e.CreateCopyOfWorkItem="Create copy of work item...";e.GitHubZeroDataPullRequestTypeText="pull request";e.CustomFollowDialogStateCheckbox="State Changed";e.EditQuery="Edit";e.RemoteLinkDialogAddressTitle="Remote work item url";e.ErrorExtensionService_CannotRefreshWorkItem="You cannot refresh a work item that is new";e.RunQuery="Run query";e.RenameQueryTitle="Rename query";e.FollowWorkItem="Follow";e.DateTimePicker_HourDownAriaLabel="Decrease hour";e.ImporCsvEmptyFieldValuesError="Empty field value at line {0}, column(s) {1}.";e.AddAColumn="Add a column";e.FieldDoesNotExist="This field does not exist";e.ImporCsvDoubleQuoteNotEnclosedError="Double-quote not enclosed in double-quotes at line {0}, column {1}.";e.QueryFilterInvalidMacro="TF20036: The macro \u0027{0}\u0027 is not recognized. Available macros include @Me, @Project, @Today and @CurrentIteration. ";e.MoveWorkItemAreaPathWatermark="Select an area path";e.SavingWorkItemsLoading="Saving work items...";e.HistoryControlSummaryAssigned="Assigned";e.KeyboardShortcutDescription_LinksTab="Move to links tab";e.RestoreWorkItemDialogTitle="Restore work item(s)";e.StatusMessage_FatalError="An error has occurred while attempting to save your changes. Discard your changes and refresh the page. Error details: {0}";e.IdField="ID Field";e.WorkItemNotSaveable="Work item can not be saved in its current state. Its either not changed or has errors.";e.HistoryControlCommentAriaLabel="Comment";e.AttachmentsGridDateAttachedColumn="Date Attached";e.FieldStatusInvalidFormatError="The value for field \u0027{0}\u0027 is not in a recognized format.";e.AddAttachmentDialogFieldAttachment="Attachment(s)";e.WorkItemDiscussionPreviewAriaLabel="Discussion: Total comments {0}. Click here to view discussion.";e.ErrorCopyingChildItem="Error copying child item {0}: {1}";e.WorkItemBulkDeleteError="We were unable to delete some work item(s). They no longer exist or access is denied. Please refresh to see the failed items.";e.SaveAttachment="Save attachment";e.EditCommentDialogLabel="Comment:";e.RollupColumn_ProgressBy_EffortField="Progress by {0}";e.QuoteReply="Quote reply";e.UntitledQuery="Untitled query";e.RunQuery_PromptUnsavedWorkItemChanges_RejectButtonText="Cancel";e.LinkDialogHyperlinkAddressTitle="Address";e.Edit="Edit";e.Open="Open";e.Save="Save";e.KeyboardShortcutDescription_OpenCurrentIteration="Open sprint";e.WorkItemLogControlMadeChanges="made field changes";e.WorkItemCommentsRetrievalError="Unable to retrieve comments";e.AttachmentUploadingStart="One or more attachments are uploading.";e.RollupTotalByTooltip="{0} {1}";e.AttachmentUploadingError="Error happened when uploading one or more attachments.";e.NewQueryHotkey="(C Q)";e.SharedStepDeleteConfirmationDialogText="Are you sure you want to delete this work item? \u003cb\u003e{0} ID: {1}\u003c/b\u003e will be permanently deleted. {2}";e.ReactionAdditionalUsersCount="+{0} users";e.FieldStatusInvalidTypeError="The value for field \u0027{0}\u0027 is not of the right type.";e.ChangeTypeLabel="Type";e.CopyQueryURLTitle="Copies the query URL to the clipboard.";e.QueryResultsGridLinkQueryStatusSecondaryTextFormat="{0} top level, {1} linked and {2} selected";e.WorkItemLogControlMadeChange="changed {0}";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/Components/HtmlEditor.Emoji.Strings",["require","exports","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.RoosterJs.Emoji","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r){var u;Object.defineProperty(t,"__esModule",{value:!0});t.EmojiLocaleStrings=void 0;t.EmojiLocaleStrings=(u={},u.Activities=i.EmojiFamily_Activities,u.Food=i.EmojiFamily_Food,u.Nature=i.EmojiFamily_Nature,u.Objects=i.EmojiFamily_Objects,u.People=i.EmojiFamily_People,u.Symbols=i.EmojiFamily_Symbols,u.Travel=i.EmojiFamily_Travel,u.emjDNoSuggetions=r.NoSuggestionsFound,u.emjDMore=i.Emoji_More,u.emjD0270a=i.Emoji_0270a,u.emjD0270b=i.Emoji_0270b,u.emjD0270c=i.Emoji_0270c,u.emjD02764=i.Emoji_02764,u.emjD1f440=i.Emoji_1f440,u.emjD1f442=i.Emoji_1f442,u.emjD1f443=i.Emoji_1f443,u.emjD1f444=i.Emoji_1f444,u.emjD1f445=i.Emoji_1f445,u.emjD1f446=i.Emoji_1f446,u.emjD1f447=i.Emoji_1f447,u.emjD1f448=i.Emoji_1f448,u.emjD1f449=i.Emoji_1f449,u.emjD1f44a=i.Emoji_1f44a,u.emjD1f44b=i.Emoji_1f44b,u.emjD1f44c=i.Emoji_1f44c,u.emjD1f44d=i.Emoji_1f44d,u.emjD1f44e=i.Emoji_1f44e,u.emjD1f44f=i.Emoji_1f44f,u.emjD1f450=i.Emoji_1f450,u.emjD1f590=i.Emoji_1f590,u.emjD1f595=i.Emoji_1f595,u.emjD1f596=i.Emoji_1f596,u.emjD1f464=i.Emoji_1f464,u.emjD1f466=i.Emoji_1f466,u.emjD1f467=i.Emoji_1f467,u.emjD1f468=i.Emoji_1f468,u.emjD1f469=i.Emoji_1f469,u.emjD1f46a=i.Emoji_1f46a,u.emjD1f46b=i.Emoji_1f46b,u.emjD1f46e=i.Emoji_1f46e,u.emjD1f46f=i.Emoji_1f46f,u.emjD1f470=i.Emoji_1f470,u.emjD1f471=i.Emoji_1f471,u.emjD1f472=i.Emoji_1f472,u.emjD1f473=i.Emoji_1f473,u.emjD1f474=i.Emoji_1f474,u.emjD1f475=i.Emoji_1f475,u.emjD1f476=i.Emoji_1f476,u.emjD1f477=i.Emoji_1f477,u.emjD1f481=i.Emoji_1f481,u.emjD1f482=i.Emoji_1f482,u.emjD1f48b=i.Emoji_1f48b,u.emjD1f493=i.Emoji_1f493,u.emjD1f494=i.Emoji_1f494,u.emjD1f495=i.Emoji_1f495,u.emjD1f496=i.Emoji_1f496,u.emjD1f497=i.Emoji_1f497,u.emjD1f498=i.Emoji_1f498,u.emjD1f499=i.Emoji_1f499,u.emjD1f49a=i.Emoji_1f49a,u.emjD1f49b=i.Emoji_1f49b,u.emjD1f49c=i.Emoji_1f49c,u.emjD1f49d=i.Emoji_1f49d,u.emjD1f49e=i.Emoji_1f49e,u.emjD1f49f=i.Emoji_1f49f,u.emjD1f601=i.Emoji_1f601,u.emjD1f602=i.Emoji_1f602,u.emjD1f603=i.Emoji_1f603,u.emjD1f604=i.Emoji_1f604,u.emjD1f605=i.Emoji_1f605,u.emjD1f606=i.Emoji_1f606,u.emjD1f607=i.Emoji_1f607,u.emjD1f608=i.Emoji_1f608,u.emjD1f609=i.Emoji_1f609,u.emjD1f60a=i.Emoji_1f60a,u.emjD1f60b=i.Emoji_1f60b,u.emjD1f60c=i.Emoji_1f60c,u.emjD1f60d=i.Emoji_1f60d,u.emjD1f60e=i.Emoji_1f60e,u.emjD1f60f=i.Emoji_1f60f,u.emjD1f610=i.Emoji_1f610,u.emjD1f612=i.Emoji_1f612,u.emjD1f613=i.Emoji_1f613,u.emjD1f614=i.Emoji_1f614,u.emjD1f616=i.Emoji_1f616,u.emjD1f618=i.Emoji_1f618,u.emjD1f61a=i.Emoji_1f61a,u.emjD1f61c=i.Emoji_1f61c,u.emjD1f61d=i.Emoji_1f61d,u.emjD1f61e=i.Emoji_1f61e,u.emjD1f620=i.Emoji_1f620,u.emjD1f621=i.Emoji_1f621,u.emjD1f622=i.Emoji_1f622,u.emjD1f623=i.Emoji_1f623,u.emjD1f624=i.Emoji_1f624,u.emjD1f625=i.Emoji_1f625,u.emjD1f628=i.Emoji_1f628,u.emjD1f629=i.Emoji_1f629,u.emjD1f62a=i.Emoji_1f62a,u.emjD1f62b=i.Emoji_1f62b,u.emjD1f62d=i.Emoji_1f62d,u.emjD1f630=i.Emoji_1f630,u.emjD1f631=i.Emoji_1f631,u.emjD1f632=i.Emoji_1f632,u.emjD1f633=i.Emoji_1f633,u.emjD1f635=i.Emoji_1f635,u.emjD1f636=i.Emoji_1f636,u.emjD1f637=i.Emoji_1f637,u.emjD1f645=i.Emoji_1f645,u.emjD1f646=i.Emoji_1f646,u.emjD1f647=i.Emoji_1f647,u.emjD1f648=i.Emoji_1f648,u.emjD1f649=i.Emoji_1f649,u.emjD1f641=i.Emoji_1f641,u.emjD1f642=i.Emoji_1f642,u.emjD1f64a=i.Emoji_1f64a,u.emjD1f64b=i.Emoji_1f64b,u.emjD1f64c=i.Emoji_1f64c,u.emjD1f64d=i.Emoji_1f64d,u.emjD1f64e=i.Emoji_1f64e,u.emjD1f64f=i.Emoji_1f64f,u.emjD02600=i.Emoji_02600,u.emjD02601=i.Emoji_02601,u.emjD02614=i.Emoji_02614,u.emjD0267b=i.Emoji_0267b,u.emjD026c4=i.Emoji_026c4,u.emjD026c5=i.Emoji_026c5,u.emjD02728=i.Emoji_02728,u.emjD02733=i.Emoji_02733,u.emjD02734=i.Emoji_02734,u.emjD02744=i.Emoji_02744,u.emjD02747=i.Emoji_02747,u.emjD02b50=i.Emoji_02b50,u.emjD1f300=i.Emoji_1f300,u.emjD1f301=i.Emoji_1f301,u.emjD1f302=i.Emoji_1f302,u.emjD1f303=i.Emoji_1f303,u.emjD1f304=i.Emoji_1f304,u.emjD1f305=i.Emoji_1f305,u.emjD1f306=i.Emoji_1f306,u.emjD1f307=i.Emoji_1f307,u.emjD1f308=i.Emoji_1f308,u.emjD1f309=i.Emoji_1f309,u.emjD1f30a=i.Emoji_1f30a,u.emjD1f30b=i.Emoji_1f30b,u.emjD1f30c=i.Emoji_1f30c,u.emjD1f311=i.Emoji_1f311,u.emjD1f313=i.Emoji_1f313,u.emjD1f314=i.Emoji_1f314,u.emjD1f315=i.Emoji_1f315,u.emjD1f319=i.Emoji_1f319,u.emjD1f31b=i.Emoji_1f31b,u.emjD1f31f=i.Emoji_1f31f,u.emjD1f320=i.Emoji_1f320,u.emjD1f330=i.Emoji_1f330,u.emjD1f331=i.Emoji_1f331,u.emjD1f334=i.Emoji_1f334,u.emjD1f335=i.Emoji_1f335,u.emjD1f337=i.Emoji_1f337,u.emjD1f338=i.Emoji_1f338,u.emjD1f339=i.Emoji_1f339,u.emjD1f33a=i.Emoji_1f33a,u.emjD1f33b=i.Emoji_1f33b,u.emjD1f33c=i.Emoji_1f33c,u.emjD1f33d=i.Emoji_1f33d,u.emjD1f33e=i.Emoji_1f33e,u.emjD1f33f=i.Emoji_1f33f,u.emjD1f340=i.Emoji_1f340,u.emjD1f341=i.Emoji_1f341,u.emjD1f342=i.Emoji_1f342,u.emjD1f343=i.Emoji_1f343,u.emjD1f344=i.Emoji_1f344,u.emjD1f40c=i.Emoji_1f40c,u.emjD1f40d=i.Emoji_1f40d,u.emjD1f40e=i.Emoji_1f40e,u.emjD1f411=i.Emoji_1f411,u.emjD1f412=i.Emoji_1f412,u.emjD1f414=i.Emoji_1f414,u.emjD1f417=i.Emoji_1f417,u.emjD1f418=i.Emoji_1f418,u.emjD1f419=i.Emoji_1f419,u.emjD1f41a=i.Emoji_1f41a,u.emjD1f41b=i.Emoji_1f41b,u.emjD1f41c=i.Emoji_1f41c,u.emjD1f41d=i.Emoji_1f41d,u.emjD1f41e=i.Emoji_1f41e,u.emjD1f41f=i.Emoji_1f41f,u.emjD1f420=i.Emoji_1f420,u.emjD1f421=i.Emoji_1f421,u.emjD1f422=i.Emoji_1f422,u.emjD1f423=i.Emoji_1f423,u.emjD1f424=i.Emoji_1f424,u.emjD1f425=i.Emoji_1f425,u.emjD1f426=i.Emoji_1f426,u.emjD1f427=i.Emoji_1f427,u.emjD1f428=i.Emoji_1f428,u.emjD1f429=i.Emoji_1f429,u.emjD1f42b=i.Emoji_1f42b,u.emjD1f42c=i.Emoji_1f42c,u.emjD1f42d=i.Emoji_1f42d,u.emjD1f42e=i.Emoji_1f42e,u.emjD1f42f=i.Emoji_1f42f,u.emjD1f430=i.Emoji_1f430,u.emjD1f431=i.Emoji_1f431,u.emjD1f432=i.Emoji_1f432,u.emjD1f433=i.Emoji_1f433,u.emjD1f434=i.Emoji_1f434,u.emjD1f435=i.Emoji_1f435,u.emjD1f436=i.Emoji_1f436,u.emjD1f437=i.Emoji_1f437,u.emjD1f438=i.Emoji_1f438,u.emjD1f439=i.Emoji_1f439,u.emjD1f43a=i.Emoji_1f43a,u.emjD1f43b=i.Emoji_1f43b,u.emjD1f43c=i.Emoji_1f43c,u.emjD1f43d=i.Emoji_1f43d,u.emjD1f43e=i.Emoji_1f43e,u.emjD1f638=i.Emoji_1f638,u.emjD1f639=i.Emoji_1f639,u.emjD1f63a=i.Emoji_1f63a,u.emjD1f63b=i.Emoji_1f63b,u.emjD1f63c=i.Emoji_1f63c,u.emjD1f63d=i.Emoji_1f63d,u.emjD1f63e=i.Emoji_1f63e,u.emjD1f63f=i.Emoji_1f63f,u.emjD1f640=i.Emoji_1f640,u.emjD0260e=i.Emoji_0260e,u.emjD026bd=i.Emoji_026bd,u.emjD026be=i.Emoji_026be,u.emjD1f004=i.Emoji_1f004,u.emjD1f380=i.Emoji_1f380,u.emjD1f381=i.Emoji_1f381,u.emjD1f382=i.Emoji_1f382,u.emjD1f383=i.Emoji_1f383,u.emjD1f384=i.Emoji_1f384,u.emjD1f385=i.Emoji_1f385,u.emjD1f386=i.Emoji_1f386,u.emjD1f387=i.Emoji_1f387,u.emjD1f388=i.Emoji_1f388,u.emjD1f389=i.Emoji_1f389,u.emjD1f38a=i.Emoji_1f38a,u.emjD1f38b=i.Emoji_1f38b,u.emjD1f38c=i.Emoji_1f38c,u.emjD1f38d=i.Emoji_1f38d,u.emjD1f38e=i.Emoji_1f38e,u.emjD1f38f=i.Emoji_1f38f,u.emjD1f390=i.Emoji_1f390,u.emjD1f391=i.Emoji_1f391,u.emjD1f392=i.Emoji_1f392,u.emjD1f393=i.Emoji_1f393,u.emjD1f3a0=i.Emoji_1f3a0,u.emjD1f3a1=i.Emoji_1f3a1,u.emjD1f3a2=i.Emoji_1f3a2,u.emjD1f3a3=i.Emoji_1f3a3,u.emjD1f3a4=i.Emoji_1f3a4,u.emjD1f3a5=i.Emoji_1f3a5,u.emjD1f3a6=i.Emoji_1f3a6,u.emjD1f3a7=i.Emoji_1f3a7,u.emjD1f3a8=i.Emoji_1f3a8,u.emjD1f3a9=i.Emoji_1f3a9,u.emjD1f3aa=i.Emoji_1f3aa,u.emjD1f3ab=i.Emoji_1f3ab,u.emjD1f3ac=i.Emoji_1f3ac,u.emjD1f3ad=i.Emoji_1f3ad,u.emjD1f3ae=i.Emoji_1f3ae,u.emjD1f3af=i.Emoji_1f3af,u.emjD1f3b0=i.Emoji_1f3b0,u.emjD1f3b1=i.Emoji_1f3b1,u.emjD1f3b2=i.Emoji_1f3b2,u.emjD1f3b3=i.Emoji_1f3b3,u.emjD1f3b4=i.Emoji_1f3b4,u.emjD1f3b5=i.Emoji_1f3b5,u.emjD1f3b6=i.Emoji_1f3b6,u.emjD1f3b7=i.Emoji_1f3b7,u.emjD1f3b8=i.Emoji_1f3b8,u.emjD1f3b9=i.Emoji_1f3b9,u.emjD1f3ba=i.Emoji_1f3ba,u.emjD1f3bb=i.Emoji_1f3bb,u.emjD1f3bc=i.Emoji_1f3bc,u.emjD1f3bd=i.Emoji_1f3bd,u.emjD1f3be=i.Emoji_1f3be,u.emjD1f3bf=i.Emoji_1f3bf,u.emjD1f3c0=i.Emoji_1f3c0,u.emjD1f3c1=i.Emoji_1f3c1,u.emjD1f3c2=i.Emoji_1f3c2,u.emjD1f3c3=i.Emoji_1f3c3,u.emjD1f3c4=i.Emoji_1f3c4,u.emjD1f3c6=i.Emoji_1f3c6,u.emjD1f3c8=i.Emoji_1f3c8,u.emjD1f3ca=i.Emoji_1f3ca,u.emjD1f478=i.Emoji_1f478,u.emjD1f479=i.Emoji_1f479,u.emjD1f47a=i.Emoji_1f47a,u.emjD1f47b=i.Emoji_1f47b,u.emjD1f47c=i.Emoji_1f47c,u.emjD1f47d=i.Emoji_1f47d,u.emjD1f47e=i.Emoji_1f47e,u.emjD1f47f=i.Emoji_1f47f,u.emjD1f480=i.Emoji_1f480,u.emjD1f483=i.Emoji_1f483,u.emjD1f484=i.Emoji_1f484,u.emjD1f485=i.Emoji_1f485,u.emjD1f486=i.Emoji_1f486,u.emjD1f487=i.Emoji_1f487,u.emjD1f488=i.Emoji_1f488,u.emjD1f489=i.Emoji_1f489,u.emjD1f48a=i.Emoji_1f48a,u.emjD1f48c=i.Emoji_1f48c,u.emjD1f48d=i.Emoji_1f48d,u.emjD1f48e=i.Emoji_1f48e,u.emjD1f48f=i.Emoji_1f48f,u.emjD1f490=i.Emoji_1f490,u.emjD1f491=i.Emoji_1f491,u.emjD1f492=i.Emoji_1f492,u.emjD1f4f7=i.Emoji_1f4f7,u.emjD1f4f9=i.Emoji_1f4f9,u.emjD1f4fa=i.Emoji_1f4fa,u.emjD1f4fb=i.Emoji_1f4fb,u.emjD1f4fc=i.Emoji_1f4fc,u.emjD02615=i.Emoji_02615,u.emjD02702=i.Emoji_02702,u.emjD02709=i.Emoji_02709,u.emjD0270f=i.Emoji_0270f,u.emjD02712=i.Emoji_02712,u.emjD1f345=i.Emoji_1f345,u.emjD1f346=i.Emoji_1f346,u.emjD1f347=i.Emoji_1f347,u.emjD1f348=i.Emoji_1f348,u.emjD1f349=i.Emoji_1f349,u.emjD1f34a=i.Emoji_1f34a,u.emjD1f34c=i.Emoji_1f34c,u.emjD1f34d=i.Emoji_1f34d,u.emjD1f34e=i.Emoji_1f34e,u.emjD1f34f=i.Emoji_1f34f,u.emjD1f351=i.Emoji_1f351,u.emjD1f352=i.Emoji_1f352,u.emjD1f353=i.Emoji_1f353,u.emjD1f354=i.Emoji_1f354,u.emjD1f355=i.Emoji_1f355,u.emjD1f356=i.Emoji_1f356,u.emjD1f357=i.Emoji_1f357,u.emjD1f358=i.Emoji_1f358,u.emjD1f359=i.Emoji_1f359,u.emjD1f35a=i.Emoji_1f35a,u.emjD1f35b=i.Emoji_1f35b,u.emjD1f35c=i.Emoji_1f35c,u.emjD1f35d=i.Emoji_1f35d,u.emjD1f35e=i.Emoji_1f35e,u.emjD1f35f=i.Emoji_1f35f,u.emjD1f360=i.Emoji_1f360,u.emjD1f361=i.Emoji_1f361,u.emjD1f362=i.Emoji_1f362,u.emjD1f363=i.Emoji_1f363,u.emjD1f364=i.Emoji_1f364,u.emjD1f365=i.Emoji_1f365,u.emjD1f366=i.Emoji_1f366,u.emjD1f367=i.Emoji_1f367,u.emjD1f368=i.Emoji_1f368,u.emjD1f369=i.Emoji_1f369,u.emjD1f36a=i.Emoji_1f36a,u.emjD1f36b=i.Emoji_1f36b,u.emjD1f36c=i.Emoji_1f36c,u.emjD1f36d=i.Emoji_1f36d,u.emjD1f36e=i.Emoji_1f36e,u.emjD1f36f=i.Emoji_1f36f,u.emjD1f370=i.Emoji_1f370,u.emjD1f371=i.Emoji_1f371,u.emjD1f372=i.Emoji_1f372,u.emjD1f373=i.Emoji_1f373,u.emjD1f374=i.Emoji_1f374,u.emjD1f375=i.Emoji_1f375,u.emjD1f376=i.Emoji_1f376,u.emjD1f377=i.Emoji_1f377,u.emjD1f378=i.Emoji_1f378,u.emjD1f379=i.Emoji_1f379,u.emjD1f37a=i.Emoji_1f37a,u.emjD1f37b=i.Emoji_1f37b,u.emjD1f451=i.Emoji_1f451,u.emjD1f452=i.Emoji_1f452,u.emjD1f453=i.Emoji_1f453,u.emjD1f454=i.Emoji_1f454,u.emjD1f455=i.Emoji_1f455,u.emjD1f456=i.Emoji_1f456,u.emjD1f457=i.Emoji_1f457,u.emjD1f458=i.Emoji_1f458,u.emjD1f459=i.Emoji_1f459,u.emjD1f45a=i.Emoji_1f45a,u.emjD1f45b=i.Emoji_1f45b,u.emjD1f45c=i.Emoji_1f45c,u.emjD1f45d=i.Emoji_1f45d,u.emjD1f45e=i.Emoji_1f45e,u.emjD1f45f=i.Emoji_1f45f,u.emjD1f460=i.Emoji_1f460,u.emjD1f461=i.Emoji_1f461,u.emjD1f462=i.Emoji_1f462,u.emjD1f463=i.Emoji_1f463,u.emjD1f4ba=i.Emoji_1f4ba,u.emjD1f4bb=i.Emoji_1f4bb,u.emjD1f4bc=i.Emoji_1f4bc,u.emjD1f4bd=i.Emoji_1f4bd,u.emjD1f4be=i.Emoji_1f4be,u.emjD1f4bf=i.Emoji_1f4bf,u.emjD1f4c0=i.Emoji_1f4c0,u.emjD1f4c1=i.Emoji_1f4c1,u.emjD1f4c2=i.Emoji_1f4c2,u.emjD1f4c3=i.Emoji_1f4c3,u.emjD1f4c4=i.Emoji_1f4c4,u.emjD1f4c5=i.Emoji_1f4c5,u.emjD1f4c6=i.Emoji_1f4c6,u.emjD1f4c7=i.Emoji_1f4c7,u.emjD1f4c8=i.Emoji_1f4c8,u.emjD1f4c9=i.Emoji_1f4c9,u.emjD1f4ca=i.Emoji_1f4ca,u.emjD1f4cb=i.Emoji_1f4cb,u.emjD1f4cc=i.Emoji_1f4cc,u.emjD1f4cd=i.Emoji_1f4cd,u.emjD1f4ce=i.Emoji_1f4ce,u.emjD1f4cf=i.Emoji_1f4cf,u.emjD1f4d0=i.Emoji_1f4d0,u.emjD1f4d1=i.Emoji_1f4d1,u.emjD1f4d2=i.Emoji_1f4d2,u.emjD1f4d3=i.Emoji_1f4d3,u.emjD1f4d4=i.Emoji_1f4d4,u.emjD1f4d5=i.Emoji_1f4d5,u.emjD1f4d6=i.Emoji_1f4d6,u.emjD1f4d7=i.Emoji_1f4d7,u.emjD1f4d8=i.Emoji_1f4d8,u.emjD1f4d9=i.Emoji_1f4d9,u.emjD1f4da=i.Emoji_1f4da,u.emjD1f4db=i.Emoji_1f4db,u.emjD1f4dc=i.Emoji_1f4dc,u.emjD1f4dd=i.Emoji_1f4dd,u.emjD1f4de=i.Emoji_1f4de,u.emjD1f4df=i.Emoji_1f4df,u.emjD1f4e0=i.Emoji_1f4e0,u.emjD1f4e1=i.Emoji_1f4e1,u.emjD1f4e2=i.Emoji_1f4e2,u.emjD1f4e3=i.Emoji_1f4e3,u.emjD1f4e4=i.Emoji_1f4e4,u.emjD1f4e5=i.Emoji_1f4e5,u.emjD1f4e6=i.Emoji_1f4e6,u.emjD1f4e7=i.Emoji_1f4e7,u.emjD1f4e8=i.Emoji_1f4e8,u.emjD1f4e9=i.Emoji_1f4e9,u.emjD1f4ea=i.Emoji_1f4ea,u.emjD1f4eb=i.Emoji_1f4eb,u.emjD1f4ee=i.Emoji_1f4ee,u.emjD1f4f0=i.Emoji_1f4f0,u.emjD1f4f1=i.Emoji_1f4f1,u.emjD1f4f2=i.Emoji_1f4f2,u.emjD1f4f3=i.Emoji_1f4f3,u.emjD1f4f4=i.Emoji_1f4f4,u.emjD1f4f6=i.Emoji_1f4f6,u.emjD1f525=i.Emoji_1f525,u.emjD1f526=i.Emoji_1f526,u.emjD1f527=i.Emoji_1f527,u.emjD1f528=i.Emoji_1f528,u.emjD1f529=i.Emoji_1f529,u.emjD1f52a=i.Emoji_1f52a,u.emjD1f52b=i.Emoji_1f52b,u.emjD1f52e=i.Emoji_1f52e,u.emjD1f52f=i.Emoji_1f52f,u.emjD1f531=i.Emoji_1f531,u.emjD1f550=i.Emoji_1f550,u.emjD1f551=i.Emoji_1f551,u.emjD1f552=i.Emoji_1f552,u.emjD1f553=i.Emoji_1f553,u.emjD1f554=i.Emoji_1f554,u.emjD1f555=i.Emoji_1f555,u.emjD1f556=i.Emoji_1f556,u.emjD1f557=i.Emoji_1f557,u.emjD1f558=i.Emoji_1f558,u.emjD1f559=i.Emoji_1f559,u.emjD1f55a=i.Emoji_1f55a,u.emjD1f55b=i.Emoji_1f55b,u.emjD02668=i.Emoji_02668,u.emjD0267f=i.Emoji_0267f,u.emjD02693=i.Emoji_02693,u.emjD026a0=i.Emoji_026a0,u.emjD026a1=i.Emoji_026a1,u.emjD026d4=i.Emoji_026d4,u.emjD026ea=i.Emoji_026ea,u.emjD026f2=i.Emoji_026f2,u.emjD026f3=i.Emoji_026f3,u.emjD026f5=i.Emoji_026f5,u.emjD026fa=i.Emoji_026fa,u.emjD026fd=i.Emoji_026fd,u.emjD02708=i.Emoji_02708,u.emjD1f17f=i.Emoji_1f17f,u.emjD1f3e0=i.Emoji_1f3e0,u.emjD1f3e1=i.Emoji_1f3e1,u.emjD1f3e2=i.Emoji_1f3e2,u.emjD1f3e3=i.Emoji_1f3e3,u.emjD1f3e5=i.Emoji_1f3e5,u.emjD1f3e6=i.Emoji_1f3e6,u.emjD1f3e7=i.Emoji_1f3e7,u.emjD1f3e8=i.Emoji_1f3e8,u.emjD1f3e9=i.Emoji_1f3e9,u.emjD1f3ea=i.Emoji_1f3ea,u.emjD1f3eb=i.Emoji_1f3eb,u.emjD1f3ec=i.Emoji_1f3ec,u.emjD1f3ed=i.Emoji_1f3ed,u.emjD1f3ee=i.Emoji_1f3ee,u.emjD1f3ef=i.Emoji_1f3ef,u.emjD1f3f0=i.Emoji_1f3f0,u.emjD1f530=i.Emoji_1f530,u.emjD1f680=i.Emoji_1f680,u.emjD1f683=i.Emoji_1f683,u.emjD1f684=i.Emoji_1f684,u.emjD1f685=i.Emoji_1f685,u.emjD1f687=i.Emoji_1f687,u.emjD1f689=i.Emoji_1f689,u.emjD1f68c=i.Emoji_1f68c,u.emjD1f68f=i.Emoji_1f68f,u.emjD1f691=i.Emoji_1f691,u.emjD1f692=i.Emoji_1f692,u.emjD1f693=i.Emoji_1f693,u.emjD1f695=i.Emoji_1f695,u.emjD1f697=i.Emoji_1f697,u.emjD1f699=i.Emoji_1f699,u.emjD1f69a=i.Emoji_1f69a,u.emjD1f6a2=i.Emoji_1f6a2,u.emjD1f6a4=i.Emoji_1f6a4,u.emjD1f6a5=i.Emoji_1f6a5,u.emjD1f6a7=i.Emoji_1f6a7,u.emjD1f6a8=i.Emoji_1f6a8,u.emjD1f6a9=i.Emoji_1f6a9,u.emjD1f6aa=i.Emoji_1f6aa,u.emjD1f6ab=i.Emoji_1f6ab,u.emjD1f6ac=i.Emoji_1f6ac,u.emjD1f6ad=i.Emoji_1f6ad,u.emjD1f6b2=i.Emoji_1f6b2,u.emjD1f6b6=i.Emoji_1f6b6,u.emjD1f6b9=i.Emoji_1f6b9,u.emjD1f6ba=i.Emoji_1f6ba,u.emjD1f6bb=i.Emoji_1f6bb,u.emjD1f6bc=i.Emoji_1f6bc,u.emjD1f6bd=i.Emoji_1f6bd,u.emjD1f6be=i.Emoji_1f6be,u.emjD1f6c0=i.Emoji_1f6c0,u.emjD02049=i.Emoji_02049,u.emjD02139=i.Emoji_02139,u.emjD021a9=i.Emoji_021a9,u.emjD021aa=i.Emoji_021aa,u.emjD0231a=i.Emoji_0231a,u.emjD0231b=i.Emoji_0231b,u.emjD023e9=i.Emoji_023e9,u.emjD023ea=i.Emoji_023ea,u.emjD023eb=i.Emoji_023eb,u.emjD023ec=i.Emoji_023ec,u.emjD023f0=i.Emoji_023f0,u.emjD023f3=i.Emoji_023f3,u.emjD024c2=i.Emoji_024c2,u.emjD025b6=i.Emoji_025b6,u.emjD025c0=i.Emoji_025c0,u.emjD025fb=i.Emoji_025fb,u.emjD025fc=i.Emoji_025fc,u.emjD026ce=i.Emoji_026ce,u.emjD02611=i.Emoji_02611,u.emjD0261d=i.Emoji_0261d,u.emjD02648=i.Emoji_02648,u.emjD02649=i.Emoji_02649,u.emjD0264a=i.Emoji_0264a,u.emjD0264b=i.Emoji_0264b,u.emjD0264c=i.Emoji_0264c,u.emjD0264d=i.Emoji_0264d,u.emjD0264e=i.Emoji_0264e,u.emjD0264f=i.Emoji_0264f,u.emjD02650=i.Emoji_02650,u.emjD02651=i.Emoji_02651,u.emjD02652=i.Emoji_02652,u.emjD02653=i.Emoji_02653,u.emjD026aa=i.Emoji_026aa,u.emjD026ab=i.Emoji_026ab,u.emjD02705=i.Emoji_02705,u.emjD02714=i.Emoji_02714,u.emjD02716=i.Emoji_02716,u.emjD0274c=i.Emoji_0274c,u.emjD0274e=i.Emoji_0274e,u.emjD02753=i.Emoji_02753,u.emjD02754=i.Emoji_02754,u.emjD02755=i.Emoji_02755,u.emjD02757=i.Emoji_02757,u.emjD02795=i.Emoji_02795,u.emjD02796=i.Emoji_02796,u.emjD02797=i.Emoji_02797,u.emjD027a1=i.Emoji_027a1,u.emjD027b0=i.Emoji_027b0,u.emjD027bf=i.Emoji_027bf,u.emjD02934=i.Emoji_02934,u.emjD02935=i.Emoji_02935,u.emjD02b05=i.Emoji_02b05,u.emjD02b06=i.Emoji_02b06,u.emjD02b07=i.Emoji_02b07,u.emjD02b1b=i.Emoji_02b1b,u.emjD02b1c=i.Emoji_02b1c,u.emjD02b55=i.Emoji_02b55,u.emjD03030=i.Emoji_03030,u.emjD0303d=i.Emoji_0303d,u.emjD03297=i.Emoji_03297,u.emjD03299=i.Emoji_03299,u.emjD1f0cf=i.Emoji_1f0cf,u.emjD1f170=i.Emoji_1f170,u.emjD1f171=i.Emoji_1f171,u.emjD1f17e=i.Emoji_1f17e,u.emjD1f18e=i.Emoji_1f18e,u.emjD1f191=i.Emoji_1f191,u.emjD1f192=i.Emoji_1f192,u.emjD1f193=i.Emoji_1f193,u.emjD1f194=i.Emoji_1f194,u.emjD1f195=i.Emoji_1f195,u.emjD1f196=i.Emoji_1f196,u.emjD1f197=i.Emoji_1f197,u.emjD1f198=i.Emoji_1f198,u.emjD1f199=i.Emoji_1f199,u.emjD1f19a=i.Emoji_1f19a,u.emjD1f201=i.Emoji_1f201,u.emjD1f202=i.Emoji_1f202,u.emjD1f21a=i.Emoji_1f21a,u.emjD1f22f=i.Emoji_1f22f,u.emjD1f232=i.Emoji_1f232,u.emjD1f233=i.Emoji_1f233,u.emjD1f234=i.Emoji_1f234,u.emjD1f235=i.Emoji_1f235,u.emjD1f236=i.Emoji_1f236,u.emjD1f237=i.Emoji_1f237,u.emjD1f238=i.Emoji_1f238,u.emjD1f239=i.Emoji_1f239,u.emjD1f23a=i.Emoji_1f23a,u.emjD1f250=i.Emoji_1f250,u.emjD1f251=i.Emoji_1f251,u.emjD1f30f=i.Emoji_1f30f,u.emjD1f4a0=i.Emoji_1f4a0,u.emjD1f4a1=i.Emoji_1f4a1,u.emjD1f4a2=i.Emoji_1f4a2,u.emjD1f4a3=i.Emoji_1f4a3,u.emjD1f4a4=i.Emoji_1f4a4,u.emjD1f4a5=i.Emoji_1f4a5,u.emjD1f4a6=i.Emoji_1f4a6,u.emjD1f4a7=i.Emoji_1f4a7,u.emjD1f4a8=i.Emoji_1f4a8,u.emjD1f4a9=i.Emoji_1f4a9,u.emjD1f4aa=i.Emoji_1f4aa,u.emjD1f4ab=i.Emoji_1f4ab,u.emjD1f4ac=i.Emoji_1f4ac,u.emjD1f4ae=i.Emoji_1f4ae,u.emjD1f4af=i.Emoji_1f4af,u.emjD1f4b0=i.Emoji_1f4b0,u.emjD1f4b1=i.Emoji_1f4b1,u.emjD1f4b2=i.Emoji_1f4b2,u.emjD1f4b3=i.Emoji_1f4b3,u.emjD1f4b4=i.Emoji_1f4b4,u.emjD1f4b5=i.Emoji_1f4b5,u.emjD1f4b8=i.Emoji_1f4b8,u.emjD1f4b9=i.Emoji_1f4b9,u.emjD1f503=i.Emoji_1f503,u.emjD1f50a=i.Emoji_1f50a,u.emjD1f50b=i.Emoji_1f50b,u.emjD1f50c=i.Emoji_1f50c,u.emjD1f50d=i.Emoji_1f50d,u.emjD1f50e=i.Emoji_1f50e,u.emjD1f50f=i.Emoji_1f50f,u.emjD1f510=i.Emoji_1f510,u.emjD1f511=i.Emoji_1f511,u.emjD1f512=i.Emoji_1f512,u.emjD1f513=i.Emoji_1f513,u.emjD1f514=i.Emoji_1f514,u.emjD1f516=i.Emoji_1f516,u.emjD1f517=i.Emoji_1f517,u.emjD1f518=i.Emoji_1f518,u.emjD1f519=i.Emoji_1f519,u.emjD1f51a=i.Emoji_1f51a,u.emjD1f51b=i.Emoji_1f51b,u.emjD1f51c=i.Emoji_1f51c,u.emjD1f51d=i.Emoji_1f51d,u.emjD1f51e=i.Emoji_1f51e,u.emjD1f51f=i.Emoji_1f51f,u.emjD1f520=i.Emoji_1f520,u.emjD1f521=i.Emoji_1f521,u.emjD1f522=i.Emoji_1f522,u.emjD1f523=i.Emoji_1f523,u.emjD1f524=i.Emoji_1f524,u.emjD1f532=i.Emoji_1f532,u.emjD1f533=i.Emoji_1f533,u.emjD1f534=i.Emoji_1f534,u.emjD1f535=i.Emoji_1f535,u.emjD1f536=i.Emoji_1f536,u.emjD1f537=i.Emoji_1f537,u.emjD1f538=i.Emoji_1f538,u.emjD1f539=i.Emoji_1f539,u.emjD1f53a=i.Emoji_1f53a,u.emjD1f53b=i.Emoji_1f53b,u.emjD1f53c=i.Emoji_1f53c,u.emjD1f53d=i.Emoji_1f53d,u.emjD1f5fb=i.Emoji_1f5fb,u.emjD1f5fc=i.Emoji_1f5fc,u.emjD1f5fd=i.Emoji_1f5fd,u.emjD1f5fe=i.Emoji_1f5fe,u.emjD1f5ff=i.Emoji_1f5ff,u.emjK1f607=i.EmojiSearchTags_1f607,u.emjK1f47c=i.EmojiSearchTags_1f47c,u.emjK1f34e=i.EmojiSearchTags_1f34e,u.emjK1f34f=i.EmojiSearchTags_1f34f,u.emjK1f477=i.EmojiSearchTags_1f477,u.emjK1f6a7=i.EmojiSearchTags_1f6a7,u.emjK1f491=i.EmojiSearchTags_1f491,u.emjK1f46b=i.EmojiSearchTags_1f46b,u.emjK1f622=i.EmojiSearchTags_1f622,u.emjK1f62d=i.EmojiSearchTags_1f62d,u.emjK1f525=i.EmojiSearchTags_1f525,u.emjK1f692=i.EmojiSearchTags_1f692,u.emjK1f386=i.EmojiSearchTags_1f386,u.emjK1f387=i.EmojiSearchTags_1f387,u.emjK1f44a=i.EmojiSearchTags_1f44a,u.emjK0270a=i.EmojiSearchTags_0270a,u.emjK1f498=i.EmojiSearchTags_1f498,u.emjK1f496=i.EmojiSearchTags_1f496,u.emjK1f497=i.EmojiSearchTags_1f497,u.emjK1f493=i.EmojiSearchTags_1f493,u.emjK1f368=i.EmojiSearchTags_1f368,u.emjK1f366=i.EmojiSearchTags_1f366,u.emjK1f48b=i.EmojiSearchTags_1f48b,u.emjK1f444=i.EmojiSearchTags_1f444,u.emjK1f618=i.EmojiSearchTags_1f618,u.emjK1f61a=i.EmojiSearchTags_1f61a,u.emjK1f48f=i.EmojiSearchTags_1f48f,u.emjK1f435=i.EmojiSearchTags_1f435,u.emjK1f64a=i.EmojiSearchTags_1f64a,u.emjK1f649=i.EmojiSearchTags_1f649,u.emjK1f648=i.EmojiSearchTags_1f648,u.emjK1f3b6=i.EmojiSearchTags_1f3b6,u.emjK1f3b5=i.EmojiSearchTags_1f3b5,u.emjK1f44c=i.EmojiSearchTags_1f44c,u.emjK1f646=i.EmojiSearchTags_1f646,u.emjK1f621=i.EmojiSearchTags_1f621,u.emjK1f64e=i.EmojiSearchTags_1f64e,u.emjK1f60c=i.EmojiSearchTags_1f60c,u.emjK1f630=i.EmojiSearchTags_1f630,u.emjK1f605=i.EmojiSearchTags_1f605,u.emjK1f380=i.EmojiSearchTags_1f380,u.emjK1f381=i.EmojiSearchTags_1f381,u.emjK1f613=i.EmojiSearchTags_1f613,u.emjK1f631=i.EmojiSearchTags_1f631,u.emjK1f629=i.EmojiSearchTags_1f629,u.emjK1f628=i.EmojiSearchTags_1f628,u.emjK1f45e=i.EmojiSearchTags_1f45e,u.emjK1f45f=i.EmojiSearchTags_1f45f,u.emjK1f60a=i.EmojiSearchTags_1f60a,u.emjK1f642=i.EmojiSearchTags_1f642,u.emjK1f603=i.EmojiSearchTags_1f603,u.emjK1f604=i.EmojiSearchTags_1f604,u.emjK1f6bd=i.EmojiSearchTags_1f6bd,u.emjK1f6ba=i.EmojiSearchTags_1f6ba,u.emjK1f6b9=i.EmojiSearchTags_1f6b9,u.emjK1f684=i.EmojiSearchTags_1f684,u.emjK1f683=i.EmojiSearchTags_1f683,u.emjK1f446=i.EmojiSearchTags_1f446,u.emjK0261d=i.EmojiSearchTags_0261d,u.emjK1f64b=i.EmojiSearchTags_1f64b,u.emjK1f44b=i.EmojiSearchTags_1f44b,u.emjK1f601=i.EmojiSearchTags_1f601,u.emjK1f602=i.EmojiSearchTags_1f602,u.emjK1f606=i.EmojiSearchTags_1f606,u.emjK1f609=i.EmojiSearchTags_1f609,u.emjK1f60f=i.EmojiSearchTags_1f60f,u.emjK1f645=i.EmojiSearchTags_1f645,u.emjK1f44e=i.EmojiSearchTags_1f44e,u.emjK1f60d=i.EmojiSearchTags_1f60d,u.emjK1f495=i.EmojiSearchTags_1f495,u.emjK1f44d=i.EmojiSearchTags_1f44d,u.emjK1f610=i.EmojiSearchTags_1f610,u.emjK1f620=i.EmojiSearchTags_1f620,u.emjK1f612=i.EmojiSearchTags_1f612,u.emjK1f47b=i.EmojiSearchTags_1f47b,u.emjK1f480=i.EmojiSearchTags_1f480,u.emjK1f47e=i.EmojiSearchTags_1f47e,u.emjK1f365=i.EmojiSearchTags_1f365,u.emjK1f61e=i.EmojiSearchTags_1f61e,u.emjK1f64d=i.EmojiSearchTags_1f64d,u.emjK1f494=i.EmojiSearchTags_1f494,u.emjK1f625=i.EmojiSearchTags_1f625,u.emjK1f62b=i.EmojiSearchTags_1f62b,u.emjK1f4a4=i.EmojiSearchTags_1f4a4,u.emjK1f62a=i.EmojiSearchTags_1f62a,u.emjK1f632=i.EmojiSearchTags_1f632,u.emjK1f633=i.EmojiSearchTags_1f633,u.emjK1f3c4=i.EmojiSearchTags_1f3c4,u.emjK1f44f=i.EmojiSearchTags_1f44f,u.emjK1f64c=i.EmojiSearchTags_1f64c,u.emjK1f48d=i.EmojiSearchTags_1f48d,u.emjK1f483=i.EmojiSearchTags_1f483,u.emjK1f389=i.EmojiSearchTags_1f389,u.emjK1f388=i.EmojiSearchTags_1f388,u.emjK1f38a=i.EmojiSearchTags_1f38a,u.emjK1f383=i.EmojiSearchTags_1f383,u.emjK1f385=i.EmojiSearchTags_1f385,u.emjK1f384=i.EmojiSearchTags_1f384,u.emjK1f3eb=i.EmojiSearchTags_1f3eb,u.emjK1f392=i.EmojiSearchTags_1f392,u.emjK1f41f=i.EmojiSearchTags_1f41f,u.emjK1f3a3=i.EmojiSearchTags_1f3a3,u.emjK1f3a5=i.EmojiSearchTags_1f3a5,u.emjK1f4f9=i.EmojiSearchTags_1f4f9,u.emjK1f3a6=i.EmojiSearchTags_1f3a6,u.emjK1f3ad=i.EmojiSearchTags_1f3ad,u.emjK1f3bc=i.EmojiSearchTags_1f3bc,u.emjK1f3b9=i.EmojiSearchTags_1f3b9,u.emjK1f3a7=i.EmojiSearchTags_1f3a7,u.emjK1f3b7=i.EmojiSearchTags_1f3b7,u.emjK1f3ba=i.EmojiSearchTags_1f3ba,u.emjK1f3b8=i.EmojiSearchTags_1f3b8,u.emjK1f3bb=i.EmojiSearchTags_1f3bb,u.emjK1f3ac=i.EmojiSearchTags_1f3ac,u.emjK1f48e=i.EmojiSearchTags_1f48e,u.emjK1f3be=i.EmojiSearchTags_1f3be,u.emjK1f3c8=i.EmojiSearchTags_1f3c8,u.emjK1f3bf=i.EmojiSearchTags_1f3bf,u.emjK1f3c2=i.EmojiSearchTags_1f3c2,u.emjK026c4=i.EmojiSearchTags_026c4,u.emjK02744=i.EmojiSearchTags_02744,u.emjK1f3c1=i.EmojiSearchTags_1f3c1,u.emjK1f3c3=i.EmojiSearchTags_1f3c3,u.emjK1f375=i.EmojiSearchTags_1f375,u.emjK02615=i.EmojiSearchTags_02615,u.emjK1f377=i.EmojiSearchTags_1f377,u.emjK1f378=i.EmojiSearchTags_1f378,u.emjK1f379=i.EmojiSearchTags_1f379,u.emjK1f68c=i.EmojiSearchTags_1f68c,u.emjK1f687=i.EmojiSearchTags_1f687,u.emjK1f43b=i.EmojiSearchTags_1f43b,u.emjK1f43c=i.EmojiSearchTags_1f43c,u.emjK1f340=i.EmojiSearchTags_1f340,u.emjK1f320=i.EmojiSearchTags_1f320,u.emjK1f303=i.EmojiSearchTags_1f303,u.emjK1f307=i.EmojiSearchTags_1f307,u.emjK1f31f=i.EmojiSearchTags_1f31f,u.emjK02747=i.EmojiSearchTags_02747,u.emjK1f4b0=i.EmojiSearchTags_1f4b0,u.emjK1f4b5=i.EmojiSearchTags_1f4b5,u.emjK1f4b4=i.EmojiSearchTags_1f4b4,u.emjK1f4b3=i.EmojiSearchTags_1f4b3,u.emjK1f60b=i.EmojiSearchTags_1f60b,u.emjK1f60e=i.EmojiSearchTags_1f60e,u.emjK1f614=i.EmojiSearchTags_1f614,u.emjK1f616=i.EmojiSearchTags_1f616,u.emjK1f61c=i.EmojiSearchTags_1f61c,u.emjK1f61d=i.EmojiSearchTags_1f61d,u.emjK1f623=i.EmojiSearchTags_1f623,u.emjK1f624=i.EmojiSearchTags_1f624,u.emjK1f635=i.EmojiSearchTags_1f635,u.emjK1f636=i.EmojiSearchTags_1f636,u.emjK1f637=i.EmojiSearchTags_1f637,u.emjK1f440=i.EmojiSearchTags_1f440,u.emjK1f442=i.EmojiSearchTags_1f442,u.emjK1f443=i.EmojiSearchTags_1f443,u.emjK1f445=i.EmojiSearchTags_1f445,u.emjK1f447=i.EmojiSearchTags_1f447,u.emjK1f448=i.EmojiSearchTags_1f448,u.emjK1f449=i.EmojiSearchTags_1f449,u.emjK1f64f=i.EmojiSearchTags_1f64f,u.emjK0270b=i.EmojiSearchTags_0270b,u.emjK0270c=i.EmojiSearchTags_0270c,u.emjK1f466=i.EmojiSearchTags_1f466,u.emjK1f467=i.EmojiSearchTags_1f467,u.emjK1f468=i.EmojiSearchTags_1f468,u.emjK1f469=i.EmojiSearchTags_1f469,u.emjK1f46a=i.EmojiSearchTags_1f46a,u.emjK1f46e=i.EmojiSearchTags_1f46e,u.emjK1f46f=i.EmojiSearchTags_1f46f,u.emjK1f470=i.EmojiSearchTags_1f470,u.emjK1f471=i.EmojiSearchTags_1f471,u.emjK1f474=i.EmojiSearchTags_1f474,u.emjK1f475=i.EmojiSearchTags_1f475,u.emjK1f476=i.EmojiSearchTags_1f476,u.emjK1f382=i.EmojiSearchTags_1f382,u.emjK1f390=i.EmojiSearchTags_1f390,u.emjK1f393=i.EmojiSearchTags_1f393,u.emjK1f0cf=i.EmojiSearchTags_1f0cf,u.emjK1f3a0=i.EmojiSearchTags_1f3a0,u.emjK1f3a1=i.EmojiSearchTags_1f3a1,u.emjK1f3a2=i.EmojiSearchTags_1f3a2,u.emjK1f3a4=i.EmojiSearchTags_1f3a4,u.emjK1f3a8=i.EmojiSearchTags_1f3a8,u.emjK1f3a9=i.EmojiSearchTags_1f3a9,u.emjK1f3aa=i.EmojiSearchTags_1f3aa,u.emjK1f3ab=i.EmojiSearchTags_1f3ab,u.emjK1f3ae=i.EmojiSearchTags_1f3ae,u.emjK1f3af=i.EmojiSearchTags_1f3af,u.emjK1f3b0=i.EmojiSearchTags_1f3b0,u.emjK1f3b1=i.EmojiSearchTags_1f3b1,u.emjK1f3b2=i.EmojiSearchTags_1f3b2,u.emjK1f3b3=i.EmojiSearchTags_1f3b3,u.emjK1f4f7=i.EmojiSearchTags_1f4f7,u.emjK1f4fa=i.EmojiSearchTags_1f4fa,u.emjK1f4fb=i.EmojiSearchTags_1f4fb,u.emjK1f4fc=i.EmojiSearchTags_1f4fc,u.emjK1f478=i.EmojiSearchTags_1f478,u.emjK1f47d=i.EmojiSearchTags_1f47d,u.emjK1f47f=i.EmojiSearchTags_1f47f,u.emjK1f484=i.EmojiSearchTags_1f484,u.emjK1f485=i.EmojiSearchTags_1f485,u.emjK1f486=i.EmojiSearchTags_1f486,u.emjK1f487=i.EmojiSearchTags_1f487,u.emjK1f488=i.EmojiSearchTags_1f488,u.emjK1f489=i.EmojiSearchTags_1f489,u.emjK1f48a=i.EmojiSearchTags_1f48a,u.emjK1f48c=i.EmojiSearchTags_1f48c,u.emjK1f490=i.EmojiSearchTags_1f490,u.emjK1f492=i.EmojiSearchTags_1f492,u.emjK1f3c0=i.EmojiSearchTags_1f3c0,u.emjK1f3c6=i.EmojiSearchTags_1f3c6,u.emjK1f3ca=i.EmojiSearchTags_1f3ca,u.emjK026bd=i.EmojiSearchTags_026bd,u.emjK026be=i.EmojiSearchTags_026be,u.emjK1f451=i.EmojiSearchTags_1f451,u.emjK1f453=i.EmojiSearchTags_1f453,u.emjK1f454=i.EmojiSearchTags_1f454,u.emjK1f455=i.EmojiSearchTags_1f455,u.emjK1f456=i.EmojiSearchTags_1f456,u.emjK1f457=i.EmojiSearchTags_1f457,u.emjK1f459=i.EmojiSearchTags_1f459,u.emjK1f45b=i.EmojiSearchTags_1f45b,u.emjK1f45c=i.EmojiSearchTags_1f45c,u.emjK1f45d=i.EmojiSearchTags_1f45d,u.emjK1f461=i.EmojiSearchTags_1f461,u.emjK1f462=i.EmojiSearchTags_1f462,u.emjK1f463=i.EmojiSearchTags_1f463,u.emjK1f4dd=i.EmojiSearchTags_1f4dd,u.emjK1f4de=i.EmojiSearchTags_1f4de,u.emjK1f4df=i.EmojiSearchTags_1f4df,u.emjK1f4e0=i.EmojiSearchTags_1f4e0,u.emjK1f4e1=i.EmojiSearchTags_1f4e1,u.emjK1f4e3=i.EmojiSearchTags_1f4e3,u.emjK1f4e6=i.EmojiSearchTags_1f4e6,u.emjK1f4e7=i.EmojiSearchTags_1f4e7,u.emjK1f4ee=i.EmojiSearchTags_1f4ee,u.emjK1f4f0=i.EmojiSearchTags_1f4f0,u.emjK1f4f1=i.EmojiSearchTags_1f4f1,u.emjK1f4f6=i.EmojiSearchTags_1f4f6,u.emjK1f526=i.EmojiSearchTags_1f526,u.emjK1f527=i.EmojiSearchTags_1f527,u.emjK1f528=i.EmojiSearchTags_1f528,u.emjK1f529=i.EmojiSearchTags_1f529,u.emjK1f52a=i.EmojiSearchTags_1f52a,u.emjK1f52e=i.EmojiSearchTags_1f52e,u.emjK1f531=i.EmojiSearchTags_1f531,u.emjK1f354=i.EmojiSearchTags_1f354,u.emjK1f355=i.EmojiSearchTags_1f355,u.emjK1f356=i.EmojiSearchTags_1f356,u.emjK1f357=i.EmojiSearchTags_1f357,u.emjK1f35a=i.EmojiSearchTags_1f35a,u.emjK1f35c=i.EmojiSearchTags_1f35c,u.emjK1f35d=i.EmojiSearchTags_1f35d,u.emjK1f35e=i.EmojiSearchTags_1f35e,u.emjK1f35f=i.EmojiSearchTags_1f35f,u.emjK1f360=i.EmojiSearchTags_1f360,u.emjK1f363=i.EmojiSearchTags_1f363,u.emjK1f364=i.EmojiSearchTags_1f364,u.emjK1f369=i.EmojiSearchTags_1f369,u.emjK1f36a=i.EmojiSearchTags_1f36a,u.emjK1f36b=i.EmojiSearchTags_1f36b,u.emjK1f36c=i.EmojiSearchTags_1f36c,u.emjK1f36d=i.EmojiSearchTags_1f36d,u.emjK1f36e=i.EmojiSearchTags_1f36e,u.emjK1f36f=i.EmojiSearchTags_1f36f,u.emjK1f370=i.EmojiSearchTags_1f370,u.emjK1f371=i.EmojiSearchTags_1f371,u.emjK1f372=i.EmojiSearchTags_1f372,u.emjK1f374=i.EmojiSearchTags_1f374,u.emjK1f376=i.EmojiSearchTags_1f376,u.emjK1f37a=i.EmojiSearchTags_1f37a,u.emjK1f37b=i.EmojiSearchTags_1f37b,u.emjK1f345=i.EmojiSearchTags_1f345,u.emjK1f346=i.EmojiSearchTags_1f346,u.emjK1f347=i.EmojiSearchTags_1f347,u.emjK1f348=i.EmojiSearchTags_1f348,u.emjK1f349=i.EmojiSearchTags_1f349,u.emjK1f34a=i.EmojiSearchTags_1f34a,u.emjK1f34c=i.EmojiSearchTags_1f34c,u.emjK1f34d=i.EmojiSearchTags_1f34d,u.emjK1f351=i.EmojiSearchTags_1f351,u.emjK1f352=i.EmojiSearchTags_1f352,u.emjK1f353=i.EmojiSearchTags_1f353,u.emjK1f4ba=i.EmojiSearchTags_1f4ba,u.emjK1f4bb=i.EmojiSearchTags_1f4bb,u.emjK1f4bc=i.EmojiSearchTags_1f4bc,u.emjK1f4be=i.EmojiSearchTags_1f4be,u.emjK1f4bf=i.EmojiSearchTags_1f4bf,u.emjK1f4c0=i.EmojiSearchTags_1f4c0,u.emjK1f4c1=i.EmojiSearchTags_1f4c1,u.emjK1f4c5=i.EmojiSearchTags_1f4c5,u.emjK1f4cb=i.EmojiSearchTags_1f4cb,u.emjK1f4cc=i.EmojiSearchTags_1f4cc,u.emjK1f4cd=i.EmojiSearchTags_1f4cd,u.emjK1f4ce=i.EmojiSearchTags_1f4ce,u.emjK1f4cf=i.EmojiSearchTags_1f4cf,u.emjK1f4d2=i.EmojiSearchTags_1f4d2,u.emjK1f4d3=i.EmojiSearchTags_1f4d3,u.emjK1f4da=i.EmojiSearchTags_1f4da,u.emjK1f4db=i.EmojiSearchTags_1f4db,u.emjK02702=i.EmojiSearchTags_02702,u.emjK02709=i.EmojiSearchTags_02709,u.emjK0270f=i.EmojiSearchTags_0270f,u.emjK1f3e0=i.EmojiSearchTags_1f3e0,u.emjK1f3e1=i.EmojiSearchTags_1f3e1,u.emjK1f3e2=i.EmojiSearchTags_1f3e2,u.emjK1f3e6=i.EmojiSearchTags_1f3e6,u.emjK1f3e7=i.EmojiSearchTags_1f3e7,u.emjK1f3e8=i.EmojiSearchTags_1f3e8,u.emjK1f3ea=i.EmojiSearchTags_1f3ea,u.emjK1f3ec=i.EmojiSearchTags_1f3ec,u.emjK1f3ed=i.EmojiSearchTags_1f3ed,u.emjK1f3f0=i.EmojiSearchTags_1f3f0,u.emjK02668=i.EmojiSearchTags_02668,u.emjK02693=i.EmojiSearchTags_02693,u.emjK026ea=i.EmojiSearchTags_026ea,u.emjK026f2=i.EmojiSearchTags_026f2,u.emjK026f3=i.EmojiSearchTags_026f3,u.emjK026f5=i.EmojiSearchTags_026f5,u.emjK026fd=i.EmojiSearchTags_026fd,u.emjK1f6aa=i.EmojiSearchTags_1f6aa,u.emjK1f6ac=i.EmojiSearchTags_1f6ac,u.emjK1f6ad=i.EmojiSearchTags_1f6ad,u.emjK1f6b2=i.EmojiSearchTags_1f6b2,u.emjK1f6b6=i.EmojiSearchTags_1f6b6,u.emjK1f6c0=i.EmojiSearchTags_1f6c0,u.emjK0267f=i.EmojiSearchTags_0267f,u.emjK026a0=i.EmojiSearchTags_026a0,u.emjK026a1=i.EmojiSearchTags_026a1,u.emjK1f680=i.EmojiSearchTags_1f680,u.emjK1f68f=i.EmojiSearchTags_1f68f,u.emjK1f693=i.EmojiSearchTags_1f693,u.emjK1f695=i.EmojiSearchTags_1f695,u.emjK1f697=i.EmojiSearchTags_1f697,u.emjK1f6a2=i.EmojiSearchTags_1f6a2,u.emjK02708=i.EmojiSearchTags_02708,u.emjK1f42d=i.EmojiSearchTags_1f42d,u.emjK1f42e=i.EmojiSearchTags_1f42e,u.emjK1f42f=i.EmojiSearchTags_1f42f,u.emjK1f430=i.EmojiSearchTags_1f430,u.emjK1f431=i.EmojiSearchTags_1f431,u.emjK1f432=i.EmojiSearchTags_1f432,u.emjK1f433=i.EmojiSearchTags_1f433,u.emjK1f434=i.EmojiSearchTags_1f434,u.emjK1f436=i.EmojiSearchTags_1f436,u.emjK1f437=i.EmojiSearchTags_1f437,u.emjK1f438=i.EmojiSearchTags_1f438,u.emjK1f439=i.EmojiSearchTags_1f439,u.emjK1f43a=i.EmojiSearchTags_1f43a,u.emjK1f341=i.EmojiSearchTags_1f341,u.emjK1f344=i.EmojiSearchTags_1f344,u.emjK1f308=i.EmojiSearchTags_1f308,u.emjK02601=i.EmojiSearchTags_02601,u.emjK02614=i.EmojiSearchTags_02614,u.emjK02728=i.EmojiSearchTags_02728,u.emjK1f4a9=i.EmojiSearchTags_1f4a9,u.emjK1f4aa=i.EmojiSearchTags_1f4aa,u.emjK02648=i.EmojiSearchTags_02648,u.emjK02649=i.EmojiSearchTags_02649,u.emjK0264a=i.EmojiSearchTags_0264a,u.emjK0264b=i.EmojiSearchTags_0264b,u.emjK0264c=i.EmojiSearchTags_0264c,u.emjK0264d=i.EmojiSearchTags_0264d,u.emjK0264e=i.EmojiSearchTags_0264e,u.emjK0264f=i.EmojiSearchTags_0264f,u.emjK02650=i.EmojiSearchTags_02650,u.emjK02651=i.EmojiSearchTags_02651,u.emjK02652=i.EmojiSearchTags_02652,u.emjK02653=i.EmojiSearchTags_02653,u.emjK1f411=i.EmojiSearchTags_1f411,u.emjK1f300=i.EmojiSearchTags_1f300,u.emjK1f301=i.EmojiSearchTags_1f301,u.emjK1f302=i.EmojiSearchTags_1f302,u.emjK1f304=i.EmojiSearchTags_1f304,u.emjK1f305=i.EmojiSearchTags_1f305,u.emjK1f306=i.EmojiSearchTags_1f306,u.emjK1f309=i.EmojiSearchTags_1f309,u.emjK1f30a=i.EmojiSearchTags_1f30a,u.emjK1f30c=i.EmojiSearchTags_1f30c,u.emjK1f311=i.EmojiSearchTags_1f311,u.emjK1f313=i.EmojiSearchTags_1f313,u.emjK1f314=i.EmojiSearchTags_1f314,u.emjK1f315=i.EmojiSearchTags_1f315,u.emjK1f319=i.EmojiSearchTags_1f319,u.emjK1f31b=i.EmojiSearchTags_1f31b,u.emjK1f330=i.EmojiSearchTags_1f330,u.emjK1f331=i.EmojiSearchTags_1f331,u.emjK1f334=i.EmojiSearchTags_1f334,u.emjK1f335=i.EmojiSearchTags_1f335,u.emjK1f337=i.EmojiSearchTags_1f337,u.emjK1f338=i.EmojiSearchTags_1f338,u.emjK1f339=i.EmojiSearchTags_1f339,u.emjK1f33a=i.EmojiSearchTags_1f33a,u.emjK1f33b=i.EmojiSearchTags_1f33b,u.emjK1f33c=i.EmojiSearchTags_1f33c,u.emjK1f33d=i.EmojiSearchTags_1f33d,u.emjK1f33e=i.EmojiSearchTags_1f33e,u.emjK1f33f=i.EmojiSearchTags_1f33f,u.emjK1f342=i.EmojiSearchTags_1f342,u.emjK1f343=i.EmojiSearchTags_1f343,u.emjK1f358=i.EmojiSearchTags_1f358,u.emjK1f359=i.EmojiSearchTags_1f359,u.emjK1f35b=i.EmojiSearchTags_1f35b,u.emjK1f361=i.EmojiSearchTags_1f361,u.emjK1f362=i.EmojiSearchTags_1f362,u.emjK1f373=i.EmojiSearchTags_1f373,u.emjK1f3bd=i.EmojiSearchTags_1f3bd,u.emjK1f417=i.EmojiSearchTags_1f417,u.emjK1f418=i.EmojiSearchTags_1f418,u.emjK1f419=i.EmojiSearchTags_1f419,u.emjK1f41a=i.EmojiSearchTags_1f41a,u.emjK1f41b=i.EmojiSearchTags_1f41b,u.emjK1f41c=i.EmojiSearchTags_1f41c,u.emjK1f41d=i.EmojiSearchTags_1f41d,u.emjK1f41e=i.EmojiSearchTags_1f41e,u.emjK1f420=i.EmojiSearchTags_1f420,u.emjK1f421=i.EmojiSearchTags_1f421,u.emjK1f422=i.EmojiSearchTags_1f422,u.emjK1f423=i.EmojiSearchTags_1f423,u.emjK1f425=i.EmojiSearchTags_1f425,u.emjK1f40c=i.EmojiSearchTags_1f40c,u.emjK1f40d=i.EmojiSearchTags_1f40d,u.emjK1f40e=i.EmojiSearchTags_1f40e,u.emjK1f412=i.EmojiSearchTags_1f412,u.emjK1f414=i.EmojiSearchTags_1f414,u.emjK1f429=i.EmojiSearchTags_1f429,u.emjK1f42b=i.EmojiSearchTags_1f42b,u.emjK1f426=i.EmojiSearchTags_1f426,u.emjK1f427=i.EmojiSearchTags_1f427,u.emjK1f42c=i.EmojiSearchTags_1f42c,u.emjK1f43d=i.EmojiSearchTags_1f43d,u.emjK1f43e=i.EmojiSearchTags_1f43e,u.emjK1f452=i.EmojiSearchTags_1f452,u.emjK1f458=i.EmojiSearchTags_1f458,u.emjK1f45a=i.EmojiSearchTags_1f45a,u.emjK1f481=i.EmojiSearchTags_1f481,u.emjK1f482=i.EmojiSearchTags_1f482,u.emjK1f499=i.EmojiSearchTags_1f499,u.emjK1f49a=i.EmojiSearchTags_1f49a,u.emjK1f49b=i.EmojiSearchTags_1f49b,u.emjK1f49c=i.EmojiSearchTags_1f49c,u.emjK1f49d=i.EmojiSearchTags_1f49d,u.emjK1f49e=i.EmojiSearchTags_1f49e,u.emjK1f49f=i.EmojiSearchTags_1f49f,u.emjK1f4a5=i.EmojiSearchTags_1f4a5,u.emjK1f4a3=i.EmojiSearchTags_1f4a3,u.emjK1f4a1=i.EmojiSearchTags_1f4a1,u.emjK1f4a8=i.EmojiSearchTags_1f4a8,u.emjK1f503=i.EmojiSearchTags_1f503,u.emjK1f50c=i.EmojiSearchTags_1f50c,u.emjK1f50b=i.EmojiSearchTags_1f50b,u.emjK1f50d=i.EmojiSearchTags_1f50d,u.emjK1f510=i.EmojiSearchTags_1f510,u.emjK1f50f=i.EmojiSearchTags_1f50f,u.emjK1f511=i.EmojiSearchTags_1f511,u.emjK1f512=i.EmojiSearchTags_1f512,u.emjK1f513=i.EmojiSearchTags_1f513,u.emjK1f516=i.EmojiSearchTags_1f516,u.emjK1f514=i.EmojiSearchTags_1f514,u.emjK1f550=i.EmojiSearchTags_1f550,u.emjK1f551=i.EmojiSearchTags_1f551,u.emjK1f552=i.EmojiSearchTags_1f552,u.emjK1f553=i.EmojiSearchTags_1f553,u.emjK1f554=i.EmojiSearchTags_1f554,u.emjK1f555=i.EmojiSearchTags_1f555,u.emjK1f556=i.EmojiSearchTags_1f556,u.emjK1f557=i.EmojiSearchTags_1f557,u.emjK1f558=i.EmojiSearchTags_1f558,u.emjK1f559=i.EmojiSearchTags_1f559,u.emjK1f55a=i.EmojiSearchTags_1f55a,u.emjK1f55b=i.EmojiSearchTags_1f55b,u.emjK1f5fd=i.EmojiSearchTags_1f5fd,u.emjK1f638=i.EmojiSearchTags_1f638,u.emjK1f639=i.EmojiSearchTags_1f639,u.emjK1f63a=i.EmojiSearchTags_1f63a,u.emjK1f63b=i.EmojiSearchTags_1f63b,u.emjK1f63c=i.EmojiSearchTags_1f63c,u.emjK1f63d=i.EmojiSearchTags_1f63d,u.emjK1f63e=i.EmojiSearchTags_1f63e,u.emjK1f63f=i.EmojiSearchTags_1f63f,u.emjK1f4e8=i.EmojiSearchTags_1f4e8,u.emjK1f4e9=i.EmojiSearchTags_1f4e9,u.emjK1f4eb=i.EmojiSearchTags_1f4eb,u.emjK1f4ea=i.EmojiSearchTags_1f4ea,u.emjK1f6bb=i.EmojiSearchTags_1f6bb,u.emjK1f6a5=i.EmojiSearchTags_1f6a5,u.emjK1f6ab=i.EmojiSearchTags_1f6ab,u.emjK1f689=i.EmojiSearchTags_1f689,u.emjK1f69a=i.EmojiSearchTags_1f69a,u.emjK026fa=i.EmojiSearchTags_026fa,u.emjK1f6a8=i.EmojiSearchTags_1f6a8,u.emjK1f17f=i.EmojiSearchTags_1f17f,u.emjK02733=i.EmojiSearchTags_02733,u.emjK02734=i.EmojiSearchTags_02734,u.emjK02b50=i.EmojiSearchTags_02b50,u.emjK1f4c8=i.EmojiSearchTags_1f4c8,u.emjK1f4c9=i.EmojiSearchTags_1f4c9,u.emjK1f4ca=i.EmojiSearchTags_1f4ca,u.emjK02764=i.EmojiSearchTags_02764,u)});

define("WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.RoosterJs",["require","exports"],function(require,exports){var e=exports;e.Color_DarkYellow="Dark Yellow";e.Color_LightGreen="Light Green";e.Color_LightPurple="Light Purple";e.Color_LightRed="Light Red";e.Color_DarkerYellow="Darker Yellow";e.Color_DarkerPurple="Darker Purple";e.Color_DarkPurple="Dark Purple";e.Color_DarkBlue="Dark Blue";e.Color_DarkGray="Dark Gray";e.Color_LightOrange="Light Orange";e.Color_DarkOrange="Dark Orange";e.ImageDefaultAltText="Image";e.Toolbar_Outdent="Decrease indent";e.Color_DarkerGreen="Darker Green";e.Toolbar_FontColor="Font color";e.Toolbar_Highlight="Highlight";e.SearchForEmoji="Search for emoji";e.Color_Gray="Gray";e.Color_Blue="Blue";e.Color_Cyan="Cyan";e.Toolbar_Underline="Underline";e.Color_Orange="Orange";e.InsertLink_FieldLabel="Address";e.Color_LightMagenta="Light Magenta";e.Color_Magenta="Magenta";e.Color_Red="Red";e.Toolbar_Bold="Bold";e.Toolbar_Code="Code";e.Toolbar_Link="Create link";e.Toolbar_More="More commands";e.Color_Purple="Purple";e.Color_LightBlue="Light Blue";e.Color_LightCyan="Light Cyan";e.Color_LightGray="Light Gray";e.Toolbar_HeaderN="Header {0}";e.Toolbar_NumberedList="Numbered list";e.Color_Yellow="Yellow";e.Toolbar_Strikethrough="Strikethrough";e.Toolbar_Unlink="Remove link";e.HeaderMenu_AriaLabel="Header menu";e.Color_Green="Green";e.Color_Black="Black";e.Color_White="White";e.HighlightColorPicker_AriaLabel="Highlight color picker";e.Color_DarkerOrange="Darker Orange";e.Color_DarkRed="Dark Red";e.Toolbar_Emoji="Insert emoji";e.FontColorPicker_AriaLabel="Font color picker";e.Color_DarkerRed="Darker Red";e.Color_DarkGreen="Dark Green";e.Color_LightYellow="Light Yellow";e.Toolbar_Header="Header";e.Toolbar_Italic="Italic";e.Toolbar_Indent="Increase indent";e.Toolbar_InsertImage="Insert image";e.Toolbar_BulletedList="Bulleted list";e.Color_DarkerGray="Darker Gray";e.Color_DarkerBlue="Darker Blue";e.Toolbar_ClearFormat="Clear format";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/Components/HtmlEditor.Strings",["require","exports","RoosterReact/rooster-react-amd","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking.RoosterJs","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r,u,f){var e;Object.defineProperty(t,"__esModule",{value:!0});t.CommandBarLocaleStrings=t.SearchForEmoji=t.All=t.CustomButtonKeys=void 0;t.CustomButtonKeys={AtMention:"atMention",HashMention:"hashMention",PRMention:"prMention"};t.All=u;t.SearchForEmoji=u.SearchForEmoji;t.CommandBarLocaleStrings=(e={},e[i.RoosterCommmandBarButtonKeys.Header]=u.Toolbar_Header,e[i.RoosterCommmandBarButtonKeys.Bold]=u.Toolbar_Bold,e[i.RoosterCommmandBarButtonKeys.Italic]=u.Toolbar_Italic,e[i.RoosterCommmandBarButtonKeys.Underline]=u.Toolbar_Underline,e[i.RoosterCommmandBarButtonKeys.BulletedList]=u.Toolbar_BulletedList,e[i.RoosterCommmandBarButtonKeys.NumberedList]=u.Toolbar_NumberedList,e[i.RoosterCommmandBarButtonKeys.Link]=u.Toolbar_Link,e[i.RoosterCommmandBarButtonKeys.Highlight]=u.Toolbar_Highlight,e[i.RoosterCommmandBarButtonKeys.ClearFormat]=u.Toolbar_ClearFormat,e[i.RoosterCommmandBarButtonKeys.Emoji]=u.Toolbar_Emoji,e[i.RoosterCommmandBarButtonKeys.InsertImage]=u.Toolbar_InsertImage,e[i.RoosterCommmandBarButtonKeys.Indent]=u.Toolbar_Indent,e[i.RoosterCommmandBarButtonKeys.Outdent]=u.Toolbar_Outdent,e[i.RoosterCommmandBarButtonKeys.Strikethrough]=u.Toolbar_Strikethrough,e[i.RoosterCommmandBarButtonKeys.FontColor]=u.Toolbar_FontColor,e[i.RoosterCommmandBarButtonKeys.Unlink]=u.Toolbar_Unlink,e[i.RoosterCommmandBarButtonKeys.Code]=u.Toolbar_Code,e[i.InsertLinkStringKeys.CancelButton]=f.Cancel,e[i.InsertLinkStringKeys.InsertButton]=f.OK,e[i.InsertLinkStringKeys.LinkFieldLabel]=u.InsertLink_FieldLabel,e[i.InsertLinkStringKeys.Title]=u.Toolbar_Link,e.header1=r.format(u.Toolbar_HeaderN,1),e.header2=r.format(u.Toolbar_HeaderN,2),e.header3=r.format(u.Toolbar_HeaderN,3),e.black=u.Color_Black,e.blue=u.Color_Blue,e.cyan=u.Color_Cyan,e.darkBlue=u.Color_DarkBlue,e.darkGray=u.Color_DarkGray,e.darkGreen=u.Color_DarkGreen,e.darkOrange=u.Color_DarkOrange,e.darkPurple=u.Color_DarkPurple,e.darkRed=u.Color_DarkRed,e.darkYellow=u.Color_DarkYellow,e.darkerBlue=u.Color_DarkerBlue,e.darkerGray=u.Color_DarkerGray,e.darkerGreen=u.Color_DarkerGreen,e.darkerOrange=u.Color_DarkerOrange,e.darkerPurple=u.Color_DarkerPurple,e.darkerRed=u.Color_DarkerRed,e.darkerYellow=u.Color_DarkerYellow,e.gray=u.Color_Gray,e.green=u.Color_Green,e.lightBlue=u.Color_LightBlue,e.lightCyan=u.Color_LightCyan,e.lightGray=u.Color_LightGray,e.lightGreen=u.Color_LightGreen,e.lightMagenta=u.Color_LightMagenta,e.lightOrange=u.Color_LightOrange,e.lightPurple=u.Color_LightPurple,e.lightRed=u.Color_LightRed,e.lightYellow=u.Color_LightYellow,e.magenta=u.Color_Magenta,e.orange=u.Color_Orange,e.purple=u.Color_Purple,e.red=u.Color_Red,e.white=u.Color_White,e.yellow=u.Color_Yellow,e)});

define("WorkItemTracking/Scripts/Components/HtmlEditorEscapeCodeBlockPlugin",["require","exports","RoosterReact/rooster-react-amd"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.HtmlEditorEscapeCodeBlockPlugin=void 0;var r=function(){function n(){}return n.prototype.getName=function(){return"KeyDownPlugin"},n.prototype.dispose=function(){this._editor=null},n.prototype.initialize=function(n){this._editor=n},n.prototype.onPluginEvent=function(n){n.eventType===0&&this._handleKeyDown(n.rawEvent)},n.prototype._handleKeyDown=function(n){n.key==="Enter"&&!n.shiftKey&&this._isCursorOnBlankLastLineInCodeBlock()&&(this._escapeCodeBlock(),n.stopPropagation(),n.preventDefault())},n.prototype._isCursorOnBlankLastLineInCodeBlock=function(){var t=this._editor.getElementAtCursor(),n=t.parentElement,r=n===null||n===void 0?void 0:n.parentElement;return(n===null||n===void 0?void 0:n.tagName)==="CODE"&&(r===null||r===void 0?void 0:r.tagName)==="PRE"&&t===(n===null||n===void 0?void 0:n.lastElementChild)&&i.isNodeEmpty(t)},n.prototype._escapeCodeBlock=function(){var n=this;this._editor.addUndoSnapshot(function(){var i=n._editor.getElementAtCursor(),r=i.parentElement.parentElement,t=document.createElement("div");t.appendChild(document.createElement("br"));r.after(t);n._editor.select(t,0)})},n}();t.HtmlEditorEscapeCodeBlockPlugin=r});

define("WorkItemTracking/Scripts/Components/HtmlEditorTabToNextFocusableElementPlugin",["require","exports"],function(n,t){function i(n,t){var i=n.compareDocumentPosition(t);return!!(i&Node.DOCUMENT_POSITION_FOLLOWING)}Object.defineProperty(t,"__esModule",{value:!0});t.HtmlEditorTabToNextFocusableElementPlugin=void 0;var r=new Set([6,11,4]),u=function(){function n(){}return n.prototype.getName=function(){return"TabToNextFocusableElementPlugin"},n.prototype.dispose=function(){this._removeNavigationShortcutHelp();this._editor=null},n.prototype.initialize=function(n){this._editor=n;this._focusedElement=null;this._addNavigationShortcutHelp()},n.prototype.onPluginEvent=function(n){n.eventType===0?this._handleKeyDown(n.rawEvent):r.has(n.eventType)&&(this._focusedElement=null)},n.prototype._handleKeyDown=function(n){if(n.key==="Enter")return this._activateFocusedElement(n);if((n.ctrlKey||n.metaKey)&&n.key==="ArrowDown")return this._selectNextFocusableElement(n);if((n.ctrlKey||n.metaKey)&&n.key==="ArrowUp")return this._selectPreviousFocusableElement(n);this._focusedElement=null},n.prototype._selectPreviousFocusableElement=function(n){return this._selectNextFocusableElement(n,!0)},n.prototype._selectNextFocusableElement=function(n,t){var i,r=this._getNextFocusableElement(n,!!t);if(!r){this._focusedElement=null;this._removeLinkActivationShortcutHelp();return}this._focusedElement=r;this._addLinkActivationShortcutHelp();(i=this._editor)===null||i===void 0?void 0:i.select(r);n.preventDefault();n.stopPropagation()},n.prototype._getNextFocusableElement=function(n,t){var s,h,c,v,u,f,e,l,o,a,r;if(!n.target||!(n.target instanceof HTMLElement)||(v=n.target,u=v.querySelectorAll("a"),u.length===0))return null;if(f=(s=this._focusedElement)!==null&&s!==void 0?s:(c=(h=this._editor)===null||h===void 0?void 0:h.getFocusedPosition())===null||c===void 0?void 0:c.node,!f)return t?null:u[0];if(t){for(e=0,l=Array.from(u).reverse();e<l.length;e++)if(r=l[e],i(r,f))return r}else for(o=0,a=Array.from(u);o<a.length;o++)if(r=a[o],i(f,r))return r;return null},n.prototype._activateFocusedElement=function(n){var t,i=(t=this._focusedElement)===null||t===void 0?void 0:t.getAttribute("href");i&&(window.open(i,"_blank"),n.preventDefault(),n.stopPropagation())},n.prototype._addNavigationShortcutHelp=function(){var n;(n=this._editor)===null||n===void 0?void 0:n.setEditorDomAttribute("aria-keyshortcuts","Control+ArrowDown Control+ArrowUp")},n.prototype._removeNavigationShortcutHelp=function(){var n;(n=this._editor)===null||n===void 0?void 0:n.setEditorDomAttribute("aria-keyshortcuts","")},n.prototype._addLinkActivationShortcutHelp=function(){var n;(n=this._editor)===null||n===void 0?void 0:n.setEditorDomAttribute("aria-keyshortcuts","Control+ArrowDown Control+ArrowUp Enter")},n.prototype._removeLinkActivationShortcutHelp=function(){var n;(n=this._editor)===null||n===void 0?void 0:n.setEditorDomAttribute("aria-keyshortcuts","Control+ArrowDown Control+ArrowUp")},n}();t.HtmlEditorTabToNextFocusableElementPlugin=u});

define("Presentation/Scripts/TFS/FeatureRef/CSSNodeEvents",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.CSSNodesInvalidated=void 0;t.CSSNodesInvalidated="CSSNode/Invalidated"});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace",["require","exports","VSS/Context","VSS/ClientTrace/Services","VSS/ClientTrace/Contracts"],function(n,t,i,r,u){function f(n,t,f,e){var o=i.getPageContext(),s=window.navigator.userAgent,h=o&&o.diagnostics&&o.diagnostics.sessionId||"",c={userAgent:s,sessionId:h},l={area:n,component:t,feature:f,exceptionType:null,level:u.Level.Info,message:e,method:null,properties:c};r.trace(l)}Object.defineProperty(t,"__esModule",{value:!0});t.traceMessage=void 0;t.traceMessage=f});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/IndexedDBCacheProvider",["require","exports","VSS/Diag","VSS/Telemetry/Services","VSS/Utils/Core","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Context"],function(n,t,i,r,u,f,e,o){var h;Object.defineProperty(t,"__esModule",{value:!0});t.IndexedDBCacheProvider=void 0;var c=6,l=3e3,s="/Service/WorkItemTracking/IndexedDbVersion",a=function(){function n(){var n=this,t;this._disposed=!1;this._store=new h;this._witIndexedDBRegistryVersion=null;t=o.getPageContext().webAccessConfiguration.registryItems;t&&t.hasOwnProperty(s)&&(this._witIndexedDBRegistryVersion=Number(t[s]));this._openPromise=this._store.open("wit","metaDataCache").then(function(){n._openPromise=null}).then(function(){return n._scheduleEviction()}).catch(function(t){f.traceMessage(e.WITCommonConstants.WorkItemTrackingArea,"Caching",e.WITCommonConstants.WitCacheProviderInit,"Could not open IndexedDB: ".concat(t.message||t));n._store=null;n._disposed=!0})}return n.isSupported=function(){try{var n=o.getPageContext().webAccessConfiguration.registryItems,t=!1;return n&&n.hasOwnProperty(s)&&(t=!0),window.indexedDB!=null&&t}catch(i){return!1}},n.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._store&&(this._openPromise=null,this._store.close(),this._store=null),this._eviction&&(this._eviction.cancel(),this._eviction=null))},n.prototype.store=function(n,t,i){var r=this;return this._ensureStore(function(){return r._store.set(r._getKey(n,t),i)})},n.prototype.delete=function(n,t){var i=this;return this._ensureStore(function(){return i._store.delete(i._getKey(n,t))})},n.prototype.read=function(n,t){var i=this;return this._ensureStore(function(){return i._store.get(i._getKey(n,t))})},n.prototype.update=function(n,t,i){var r=this;return this._ensureStore(function(){return r._store.getAndSet(r._getKey(n,t),i)})},n.prototype._ensureStore=function(n){var t=this;return!this._store||this._disposed?Promise.resolve(null):this._openPromise?this._openPromise.then(function(){if(t._store)return n()}):n()},n.prototype._getKey=function(n,t){return"wit/".concat(this._witIndexedDBRegistryVersion,"/").concat(n,"/").concat(t)},n.prototype._scheduleEviction=function(){this._eviction=u.delay(this,l,this._evictEntries)},n.prototype._evictEntries=function(){var n=this,t=c*864e5,i=Date.now()-t;this._ensureStore(function(){return n._store.getAll().then(function(n){return Object.keys(n).filter(function(t){return n[t].cachedAt<i})}).then(function(t){return t.length>0&&r.publishEvent(new r.TelemetryEventData(e.WITCommonConstants.WorkItemTrackingArea,"Caching",{numberOfEvictedItems:t.length})),t.reduce(function(t,i){return t.then(function(){return n._store.delete(i)})},Promise.resolve(null))})})},n}();t.IndexedDBCacheProvider=a;h=function(){function n(){}return n.prototype.open=function(n,t){var u=this,f,r;return this._dbName=n,this._storeName=t,f=1,r=window.indexedDB.open(n,f),new Promise(function(n,u){r.onsuccess=function(){return n(r.result)};r.onerror=function(){return u(r.error)};r.onupgradeneeded=function(n){if(i.logInfo("Upgrading from ".concat(n.oldVersion," to ").concat(n.newVersion)),n.oldVersion<1)try{r.result.createObjectStore(t)}catch(u){}}}).then(function(){u._db=r.result;u._sendQuotaInformation()})},n.prototype.close=function(){var n=this;return new Promise(function(){n._db&&(n._db.close(),n._db=null)})},n.prototype.getAll=function(){var n=this;return new Promise(function(t,i){var r={};n._usingTransaction("readonly",function(n){var i=n.openCursor();i.onsuccess=function(n){var i=n.target.result;i?(r[i.key]=i.value,i.continue()):t(r)}}).then(null,i)})},n.prototype.get=function(n){return this._usingTransaction("readonly",function(t){return t.get(n)})},n.prototype.set=function(n,t){return this._usingTransaction("readwrite",function(i){return i.put(t,n)})},n.prototype.getAndSet=function(n,t){return this._usingTransaction("readwrite",function(i){var r=i.get(n);r.onsuccess=function(){var u=r.result,f=t(u);return i.put(f,n)}})},n.prototype.delete=function(n){return this._usingTransaction("readwrite",function(t){return t.delete(n)})},n.prototype._usingTransaction=function(n,t){var i=this;return new Promise(function(r,u){var f,e,o,s;if(!i._db){u(new Error("KeyValueStore: DB not ready"));return}f=i._db.transaction(i._storeName,n);e=null;f.oncomplete=function(){r(e)};o=function(n){n&&n.target&&n.target.error?u(n.target.error):u(n)};f.onabort=o;f.onerror=o;s=f.objectStore(i._storeName);e=t(s)||null;e&&(e.onerror=function(n){u(n)})}).then(function(n){return n?n.result:null})},n.prototype._sendQuotaInformation=function(){try{var n=navigator;n&&n.webkitTemporaryStorage&&n.webkitTemporaryStorage.queryUsageAndQuota&&n.webkitTemporaryStorage.queryUsageAndQuota(function(n,t){r.publishEvent(new r.TelemetryEventData(e.WITCommonConstants.WorkItemTrackingArea,"IndexedDB",{usedQuota:n,availableQuota:t}))})}catch(t){}},n}()});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/NullCacheProvider",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.NullCacheProvider=void 0;var i=function(){function n(){}return n.prototype.delete=function(){return Promise.resolve(null)},n.prototype.store=function(){return Promise.resolve(null)},n.prototype.update=function(){return Promise.resolve(null)},n.prototype.read=function(){return Promise.resolve(null)},n}();t.NullCacheProvider=i});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/Cache",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/IndexedDBCacheProvider","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/NullCacheProvider","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace"],function(n,t,i,r,u,f){function e(){return r.IndexedDBCacheProvider.isSupported()?new r.IndexedDBCacheProvider:(f.traceMessage(i.WITCommonConstants.WorkItemTrackingArea,"Caching",i.WITCommonConstants.WitCacheProviderInit,"Could not find supported WIT cache provider"),new u.NullCacheProvider)}Object.defineProperty(t,"__esModule",{value:!0});t.constructCacheProvider=void 0;t.constructCacheProvider=e});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/WorkItemIndexDBCacheManager",["require","exports","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","VSS/Telemetry/Services","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/Cache","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemIndexDBCacheManager=void 0;var e="WITData",o=function(){function n(){this._cacheProvider=u.constructCacheProvider()}return n.prototype.getDataFromCache=function(n,t,r,u){return r=this._transformKey(r),u||i.traceMessage(f.WITCommonConstants.WorkItemTrackingArea,"GetMetadataCachestamp",f.WITCommonConstants.WitCacheProviderInit,"Could not get cache stamp for '".concat(t,"'")),this._tryGetDataFromCache(n,t,r,u).catch(function(n){return i.traceMessage(f.WITCommonConstants.WorkItemTrackingArea,"TryGetDataFromCache",f.WITCommonConstants.WitCacheProviderInit,n),null}).then(function(n){return n?n:null})},n.prototype._tryGetDataFromCache=function(t,i,r,u){var f=this;return!this._cacheProvider||!u?n._resolvedPromise:this._cacheProvider.read(t,i).then(function(n){return!n||!n.data[r]?(f._recordTelemetry(t,i,r,u,"CacheMiss"),null):n.cachestamp!==u?(f._recordTelemetry(t,i,r,u,"ClearedCachedStaleData"),f._cacheProvider.delete(t,i).then(function(){return null})):(f._recordTelemetry(t,i,r,u,"CacheHit",null),n.data[r])})},n.prototype.cacheData=function(t,i,r,u,f){if(!this._cacheProvider||!f)return n._resolvedPromise;r=this._transformKey(r);var e=null;return this._cacheProvider.update(t,i,function(n){var t,i;return n=n&&n.cachestamp===f?__assign(__assign({},n),{data:__assign(__assign({},n.data),(i={},i[r]=u,i))}):{cachedAt:Date.now(),cachestamp:f,data:(t={},t[r]=u,t)},e=Object.keys(n.data),n}).then(function(){return e})},n.prototype.deleteData=function(n,t){return this._cacheProvider.delete(n,t)},n.prototype._transformKey=function(n){return n.toLowerCase()},n.prototype._recordTelemetry=function(n,t,i,u,f,o){r.publishEvent(new r.TelemetryEventData("WIT",e,{scopeId:n,type:t,key:i,stamp:u,message:f,cachedData:o}))},n._resolvedPromise=Promise.resolve(null),n}();t.WorkItemIndexDBCacheManager=o});

define("VSS/Diag/Services",["require","exports","VSS/Ajax","VSS/Context","VSS/Service"],function(n,t,i,r,u){function s(){var n=r.getPageContext();n&&n.diagnostics.allowStatsCollection&&n.diagnostics.activityId&&u.getLocalService(f).logActivity(n.diagnostics.activityId,window.location.href)}var f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.ActivityStatsCollector=void 0;f=function(){function n(){this._activtyIdHeader="ActivityId";this._progressPendingActions=null;this._progressPendingActionsNewId=0;this._progressPendingActions={};this._activtyStatsCollectionAllowedCallbacks=[]}return n.prototype.initialize=function(){},n.prototype.addActivtyStatsCollectionAllowedCallback=function(n){this._activtyStatsCollectionAllowedCallbacks.push(n)},n.prototype.actionStarted=function(n){if(!this.isCollectingStats())return-1;var t=++this._progressPendingActionsNewId;return this._progressPendingActions[t]=n,t},n.prototype.actionCompleted=function(n,t){var r=null,i,u,f;if(n>-1&&this._allowStatsCollection()&&this.isCollectingStats()&&(i=this._progressPendingActions[n],i)){delete this._progressPendingActions[n];try{u=t.getResponseHeader(this._activtyIdHeader);u&&i.toLowerCase().indexOf("/_apis/stats/activities")===-1&&(r=this.getCurrentPage(),f={actionDate:(new Date).toUTCString(),name:i,id:u,status:t.status,parentId:r?r.id:null},this._saveActivity(f))}catch(e){this.clearStats()}}},n.prototype.logActivity=function(n,t){try{if(this._allowStatsCollection()&&t&&t.toLowerCase().indexOf("_statistics")===-1){var i={actionDate:(new Date).toUTCString(),name:t,id:n};this._saveActivity(i,!0)}}catch(r){this.clearStats()}},n.prototype.getActivityStatistics=function(){try{var t=window.localStorage.getItem(n.ACTIVITY_ID_STORAGE_ITEM);return t?JSON.parse(t):[]}catch(i){return[]}},n.prototype.clearStats=function(){try{window.localStorage.removeItem(n.ACTIVITY_ID_STORAGE_ITEM);window.localStorage.removeItem(n.CURRENT_PAGE)}catch(t){}},n.prototype.collectStats=function(t){try{window.localStorage.setItem(n.ACTIVITY_COLLECTION_STATUS,t.toString())}catch(i){}},n.prototype.getCurrentPage=function(){try{var t=window.localStorage.getItem(n.CURRENT_PAGE);if(t)return JSON.parse(t)}catch(i){}return null},n.prototype.setCurrentPage=function(t){try{window.localStorage.setItem(n.CURRENT_PAGE,JSON.stringify(t))}catch(i){}},n.prototype.isCollectingStats=function(){try{var t=window.localStorage.getItem(n.ACTIVITY_COLLECTION_STATUS);return t?(t=t.toLowerCase(),t==="true"?!0:t==="false"?!1:(window.localStorage.removeItem(n.ACTIVITY_COLLECTION_STATUS),!1)):!1}catch(i){return!1}},n.prototype._saveActivity=function(t,i){if(this.isCollectingStats()&&this._allowStatsCollection()){var r=this.getActivityStatistics();r.push(t);window.localStorage.setItem(n.ACTIVITY_ID_STORAGE_ITEM,JSON.stringify(r));i&&this.setCurrentPage(t)}},n.prototype._allowStatsCollection=function(){for(var t=!0,n=0;n<this._activtyStatsCollectionAllowedCallbacks.length;n++)t=t&&this._activtyStatsCollectionAllowedCallbacks[n]();return t},n.ACTIVITY_COLLECTION_STATUS="TFS.ActivityCollectionStatus",n.ACTIVITY_ID_STORAGE_ITEM="TFS.ActivityIdStats",n.CURRENT_PAGE="TFS.CurrentPageActivity",n}();t.ActivityStatsCollector=f;s();u.getLocalService(f).addActivtyStatsCollectionAllowedCallback(function(){var n=r.getPageContext();return!!(n&&n.diagnostics.allowStatsCollection)});e={};o=r.getPageContext();o&&o.diagnostics.allowStatsCollection&&i.addGlobalListener({beforeRequest:function(n,t){var i=u.getLocalService(f).actionStarted(t);e[n]=i},responseReceived:function(n,t,i,r){u.getLocalService(f).actionCompleted(e[n],r);delete e[n]}})});

define("Presentation/Scripts/TFS/TFS.Legacy.Ajax",["require","exports","VSS/Context","VSS/Diag","VSS/Diag/Services","VSS/Performance","VSS/Platform/Context","VSS/Service","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Url","VSS/VSS","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function ft(n,i,f,e,s){var h,a,p,c,y,w,b;if(r.logTracePoint("Ajax.response-received",s.requestId),o.getLocalService(u.ActivityStatsCollector).actionCompleted(rt[s.requestId],f),delete rt[lt],s.onComplete)for(y=0,w=s.onComplete;y<w.length;y++)b=w[y],b(f);if(s.isComplete=!0,delete d[s.requestId],s.options!==null&&s.options!==undefined&&s.options.wait!==null&&s.options.wait!==undefined&&t.endWait(s),i!=="timeout"&&f&&f.status===203&&(h=f.getResponseHeader("X-Tfs-Location"),h)){if(a=h.indexOf("reply_to="),a!==-1){for(p=h.indexOf("&",a),c=h.substring(0,a),p!==-1&&(c+=h.substring(p));c.charAt(c.length-1)==="&";)c=c.substring(0,c.length-1);h=c+"&reply_to="+encodeURIComponent(window.location.href)}window.location.href=h;return}if(e)try{e(n,i,f)}catch(k){r.logTracePoint("Ajax.callback-exception",k);v(k)}r.logTracePoint("Ajax.callback-complete",s.requestId);s.progressActionId&&l.globalProgressIndicator.actionCompleted(s.progressActionId);s.options&&s.options.tracePoint&&r.logTracePoint(s.options.tracePoint)}function y(n,t){return function(i,r,u){ft(i,r,u,t,n)}}function w(n,i,r){return function(u,f,e){ft(null,f,u,function(){var n;if(f==="timeout")v(bt(u,r),i);else if(u.status===0)t.unloadRequested||t.unloading||s.delay(this,2e3,function(){t.unloadRequested||t.unloading||v(vt(u,r),i)});else if(u.status>=12e3&&u.status<13e3)t.unloadRequested||t.unloading||v(vt(u,r),i);else{if(t.unloading&&f==="abort")return;try{n=s.parseMSJSON(u.responseText,!1)}catch(o){}n?v(new ut(n.message,n.type),i):v(wt(u,e||u.statusText||u.status,r),i)}},n)}}function p(n,i,e){var s,h,c,a,v;return s={isComplete:!1,requestId:lt++,options:e},e&&e.wait&&t.startWait(s),c=f.getScenarioManager().addAjaxCallStart(),a=function(t){var i=t&&t.getResponseHeader&&t.getResponseHeader("ActivityId")||"",r=t&&t.getResponseHeader&&t.getResponseHeader("Content-Length")||0;c(n,s&&s.options&&s.options.type||"",i,t&&t.status||-1,Number(r));document.dispatchEvent(new CustomEvent("performance.legacyAjaxCall"))},s.onComplete=[a],h=n+" ("+s.requestId+")",r.logTracePoint("Ajax.request-started",h),v=o.getLocalService(u.ActivityStatsCollector).actionStarted(n),rt[s.requestId]=v,e&&e.showGlobalProgressIndicator===!1||(s.progressActionId=l.globalProgressIndicator.actionStarted(h)),d[s.requestId]=s,s}function b(n,t,i,r){var u=e.getService("IMsalTokenProviderService").getDefaultProvider();c.isExternalUrl(t)||!u?(n.options=$.extend(!0,{},i,n.options),n.xhr=$.ajax(t,n.options)):u.getAuthorizationHeader().then(function(u){u&&(i.headers.Authorization=u);try{n.options=$.extend(!0,{},i,n.options);n.xhr=$.ajax(t,n.options)}catch(f){r&&r(f)}}).catch(function(n){r&&r(n)})}function yt(n){var t=n.options.wait;t.entireWindow||(t.element.css("margin-top",-parseInt(t.target.css("padding-top"),10)),t.element.css("margin-left",-parseInt(t.target.css("padding-left"),10)),t.element.height(t.target.outerHeight()-2),t.element.width(t.target.outerWidth()-2));t.msgElement&&(t.msgElement.css("top",t.element.position().top+(t.element.height()-t.msgElement.height())/2+parseInt(t.element.css("margin-top"),10)),t.msgElement.css("left",t.element.position().left+(t.element.width()-t.msgElement.width())/2+parseInt(t.element.css("margin-left"),10)))}function et(n){var t;return typeof n=="string"&&(n=n.replace(/\u2028/g,"\\u2028")),t=s.parseMSJSON(n,!1),t.hasOwnProperty("__wrappedArray")&&(t=t.__wrappedArray),t}function kt(){t.unloadRequested=!0;s.delay(this,2e3,function(){t.unloadRequested=!1})}function k(n){var t,u,r;return(n&&(t=n.sessionId,u=n.command),t||(r=i.getPageContext(),r&&r.diagnostics&&r.diagnostics.sessionId&&(t=r.diagnostics.sessionId)),t)?u?{"X-TFS-Session":t+","+u}:{"X-TFS-Session":t}:{}}function dt(n,t,i,r,u){var f=p(n,t,u),e={type:"GET",data:t,success:y(f,i),error:w(f,r,n),dataType:"json",traditional:!0,timeout:tt,headers:k(u)};return at.allowArrayResult||(e.converters={"text json":et}),b(f,n,e,r),f}function ot(n){var t,r,i;if(Array.isArray(n))for(t=0;t<n.length;++t)r=n[t],n[t]==null?n[t]="":typeof r=="object"&&ot(r);else if(typeof n=="object")for(i in n)n[i]==null?n[i]="":typeof n[i]=="object"&&ot(n[i])}function pt(n,t,i,r,u,f){var o,e,c,h,l;if(f||(ot(t),t=s.stringifyMSJSON(t),u=u||{},u.contentType="application/json"),o=p(n,t,u),u&&u.timeout&&(tt=u.timeout),e={type:"POST",data:t,success:y(o,i),error:w(o,r,n),dataType:"json",traditional:!0,timeout:tt,headers:k(u)},at.allowArrayResult||(e.converters={"text json":et}),f)for(e.contentType=!1,e.processData=!1,e.data=new FormData,c=Object.keys(t),h=0;h<c.length;h++)l=c[h],e.data.append(l,t[l]);return b(o,n,e,r),o}function gt(n,t,i,r,u){return pt(n,t,i,r,u,!0)}function ni(n,t,i,r,u){var e,f;return t=$.extend(t,{__RequestVerificationToken:ct()}),e=nt(),e&&(t=$.extend(t,{__RequestVerificationToken2:e})),f=p(n,t,u),b(f,n,{type:"POST",data:t,success:y(f,i),error:w(f,r,n),dataType:"html",traditional:!0,cache:!1,headers:k(u)},r),f}function ti(n,t,i,r,u){var f=p(n,t,u);return b(f,n,{type:"GET",data:t,success:y(f,i),error:w(f,r,n),dataType:"html",traditional:!0,cache:!1,headers:k(u)},r),f}function ii(n){var t=p(n&&n.url,n&&n.data,n);return b(t,n&&n.url,{type:"GET",dataType:"jsonp",traditional:!0,success:y(t,n&&n.callback),headers:k(n)},undefined),t}function ct(){return st||(st=$("input[name=__RequestVerificationToken]").val()),st}function nt(){return ht||(ht=$("input[name=__RequestVerificationToken2]").val()),ht}function ri(){var n,t;return n=$("<input />").attr("type","hidden").attr("name","__RequestVerificationToken").val(ct()),t=nt(),t&&n.after($("<input />").attr("type","hidden").attr("name","__RequestVerificationToken2").val(nt())),n}function ui(n){var t=$(n);if(t.find("input[name=__RequestVerificationToken]").length===0)return t.append(ri())}var ut,st,ht;Object.defineProperty(t,"__esModule",{value:!0});t.setAntiForgeryToken=t.getAntiForgeryTokenValue2=t.getAntiForgeryTokenValue=t.getJSONp=t.getHTML=t.postHTML=t.multipartPostMSJSON=t.postMSJSON=t.getMSJSON=t.msJSONFilter=t.beginRequest=t.wrapErrorCallback=t.wrapSuccessCallback=t.endRequest=t.XhrError=t.Exceptions=t.endWait=t.startWait=t.unloadRequested=t.unloading=void 0;t.unloading=!1;t.unloadRequested=!1;var lt=1,tt=3e5,v=l.handleError,d,it,at={allowArrayResult:!1,byPassAntiForgery:!1},rt={},g;(function(n){n.AjaxException="TFS.Core.Ajax.AjaxException";n.AjaxTimeoutException="TFS.Core.Ajax.AjaxTimeoutException";n.NetworkException="TFS.Core.Ajax.NetworkException"})(g=t.Exceptions||(t.Exceptions={}));d={};ut=function(){function n(n,t){this.message=n;this.type=t}return n}();t.XhrError=ut;var wt=function(n,t,i){var r=new Error(h.format(a.AjaxRequestFailedWithStatus,t));return r.name=g.AjaxException,r.response=n.responseText,r.xhr=n,r.source=i,r},bt=function(n,t){var i=new Error(a.AjaxRequestTimedOut);return i.name=g.AjaxTimeoutException,i.status=n.status,i.xhr=n,i.source=t,i},vt=function(n,t){var i=new Error(a.NetworkConnectionUnavailable);return i.name=g.NetworkException,i.status=n.status,i.xhr=n,i.source=t,i};t.endRequest=ft;t.wrapSuccessCallback=y;t.wrapErrorCallback=w;t.beginRequest=p;t.startWait=function(n){n.options.wait.end=function(){var t=n.options.wait;t.element&&n.isComplete&&!t.timeout&&(t.fade!==!1?(t.element.css("cursor","auto"),t.element.fadeOut("fast",function(){t.element.remove();t.element=null}),t.msgElement&&(t.msgElement.css("cursor","auto"),t.msgElement.fadeOut("fast",function(){t.msgElement.remove();t.msgElement=null}))):(t.element.css("cursor","auto"),t.element.remove(),t.element=null,t.msgElement&&(t.msgElement.css("cursor","auto"),t.msgElement.remove(),t.msgElement=null)),$(window).off("resize."+n.requestId))};var t=n.options.wait;t.showDelay||(t.showDelay=250);t.target||(t.entireWindow=!0,t.target=$("body"));t.target.children(".wait-element").hide();t.target.children(".wait-box").hide();t.showDelay!==0?n.showTimer=s.delay(this,t.showDelay,function(){delete n.showTimer;it(n)}):it(n)};t.endWait=function(n){n.options.wait.end();n.showTimer&&(n.showTimer.cancel(),delete n.showTimer)};it=function(n){var i="",r="",t=n.options.wait;t.image&&(i+='<img class="wait-image" src="'+t.image+'" />');t.message&&(i+='<div class="wait-message">'+t.message+"<\/div>");i.length>0&&(t.target.prepend('<div class="wait-box">'+i+"<\/div>"),t.msgElement=t.target.children(".wait-box").first());t.backgroundcolor&&(r+="background-color: "+t.backgroundcolor+";");t.target.prepend('<div class="wait-element" style="'+r+'"><\/div>');t.element=t.target.children(".wait-element").first();yt(n);$(window).on("resize."+n.requestId,function(){yt(n)});t.minLifetime||(t.minLifetime=100);t.timeout=s.delay(this,t.minLifetime,function(){delete t.timeout;t.end()})};t.msJSONFilter=et;$(window).on("beforeunload",kt);$(window).on("unload",function(){t.unloading=!0;$.each(d,function(n,t){if(t.xhr)try{t.xhr.abort()}catch(i){}})});t.getMSJSON=dt;t.postMSJSON=pt;t.multipartPostMSJSON=gt;t.postHTML=ni;t.getHTML=ti;t.getJSONp=ii;t.getAntiForgeryTokenValue=ct;t.getAntiForgeryTokenValue2=nt;t.setAntiForgeryToken=ui});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/WITDataSource",["require","exports","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Service","VSS/Contributions/Services","VSS/Context","VSS/Performance"],function(n,t,i,r,u,f,e,o){function h(n,t,u){var h=r.TfsContext.getDefault().getActionUrl(n.action||"",n.controller,$.extend({area:"api",team:"",project:""},n.routeData)),f=s.WorkItemMVCToDPMVCTelemetryFeature+"."+n.action,e=o.getScenarioManager().startScenario(s.WorkItemArea,f);return e.addSplitTiming(f+s.ScenarioStart),new Promise(function(n,r){i.getMSJSON(h,t,function(t,i,r){e.addSplitTiming(f+s.ScenarioEnd);e.end();var o={data:u?JSON.parse(t):t,textStatus:i,requestHeaders:r};n(o)},r)})}function c(n,t){var e=r.TfsContext.getDefault().getActionUrl(n.action||"",n.controller,$.extend({area:"api",team:"",project:""},n.routeData)),u=s.WorkItemMVCToDPMVCTelemetryFeature+"."+n.action,f=o.getScenarioManager().startScenario(s.WorkItemArea,u);return f.addSplitTiming(u+s.ScenarioStart),new Promise(function(n,r){i.postMSJSON(e,t,function(t,i,r){f.addSplitTiming(u+s.ScenarioEnd);f.end();var e={data:t,textStatus:i,requestHeaders:r};n(e)},r)})}function l(n,t,u,f){var c=r.TfsContext.getDefault().getActionUrl(n.action||"",n.controller,$.extend({area:"api",team:"",project:""},n.routeData)),e=s.WorkItemMVCToDPMVCTelemetryFeature+"."+n.action,h=o.getScenarioManager().startScenario(s.WorkItemArea,e);h.addSplitTiming(e+s.ScenarioStart);i.postMSJSON(c,t,function(n,t,i){h.addSplitTiming(e+s.ScenarioEnd);h.end();var r={data:n,textStatus:t,requestHeaders:i};u(r)},f)}function a(n,t,i){return new Promise(function(r,h){var c=s.WorkItemMVCToDPDpTelemetryFeature+"."+n.action,l=o.getScenarioManager().startScenario(s.WorkItemArea,c);l.addSplitTiming(c+s.ScenarioStart);u.getService(f.WebPageDataService,e.getDefaultWebContext()).getDataAsync(i,null,t).then(function(n){if(l.addSplitTiming(c+s.ScenarioEnd),l.end(),n.errorMessage&&n.errorMessage.length>0)h(n.errorMessage);else{var t={data:n.data,versionStamp:n.versionStamp};r(t)}},h)})}Object.defineProperty(t,"__esModule",{value:!0});t.getDataFromDataProviderAsync=t.postMVCDataWithCallback=t.postMVCDataAsync=t.getMVCDataAsync=t.WITDataSourceTelemetryConstants=void 0;var s=function(){function n(){}return n.WorkItemMVCToDPMVCTelemetryFeature="WorkItemMVCToDP.MVC",n.WorkItemMVCToDPDpTelemetryFeature="WorkItemMVCToDP.DP",n.WorkItemArea="WIT",n.ScenarioStart="Start",n.ScenarioEnd="End",n}();t.WITDataSourceTelemetryConstants=s;t.getMVCDataAsync=h;t.postMVCDataAsync=c;t.postMVCDataWithCallback=l;t.getDataFromDataProviderAsync=a});

define("Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource",["require","exports","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/MVCToDataProviderDataSources/WITDataSource","VSS/Utils/String","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/WorkItemIndexDBCacheManager","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Performance"],function(n,t,i,r,u,f,e,o,s,h,c){var l,a,v;Object.defineProperty(t,"__esModule",{value:!0});t.WebAccessBoardsWITDataSource=t.WorkItemStoreLevelWITDataSource=void 0;l=function(){function n(){this._workItemCacheManager=new o.WorkItemIndexDBCacheManager}return n.prototype.getDataAsync=function(n,t,i){return(i===void 0&&(i=!1),!this.isDataProviderEnabled(n))?u.getMVCDataAsync(n,t,i):u.getDataFromDataProviderAsync(n,t,this.getDataProviderId(n))},n.prototype.getDataFromCacheAsync=function(n,t,i,r,f,e){var o=this;return(e===void 0&&(e=!1),!this.isDataProviderEnabled(n))?u.getMVCDataAsync(n,t,e):this.getDataProviderDataUsingIndexDB(n,t,i,r,f,e).then(function(n){var e=n.resolvedFromCache,t=n.data,u;return t&&!e?(u=t,o.updateIndexDBCache(u,i,r,f).then(function(){return u})):t})},n.prototype.getDataProviderDataUsingIndexDB=function(n,t,i,r,f,e){var l=this;e===void 0&&(e=!1);var h=t!=null?t.stamp:null,s=u.WITDataSourceTelemetryConstants.WorkItemMVCToDPMVCTelemetryFeature+".Cache."+n.action,o=c.getScenarioManager().startScenario(u.WITDataSourceTelemetryConstants.WorkItemArea,s);return o.addSplitTiming(s+u.WITDataSourceTelemetryConstants.ScenarioStart),o.addData({routeParams:n,requestProperties:t,scopeId:i,type:r,key:f,parseData:e}),this._workItemCacheManager.getDataFromCache(i,r,f,h).then(function(i){if(!i)return o.addData({cacheHit:!1}),u.getDataFromDataProviderAsync(n,t,l.getDataProviderId(n)).then(function(n){return o.addSplitTiming(s+u.WITDataSourceTelemetryConstants.ScenarioEnd),o.end(),{resolvedFromCache:!1,data:n}});o.addData({cacheHit:!0});o.addSplitTiming(s+u.WITDataSourceTelemetryConstants.ScenarioEnd);o.end();var r={data:i,versionStamp:h};return{resolvedFromCache:!0,data:r}})},n.prototype.updateIndexDBCache=function(n,t,i,r){if(n&&n.versionStamp&&n.versionStamp.length>0)return this._workItemCacheManager.cacheData(t,i,r,n.data,n.versionStamp).catch(function(n){return s.traceMessage(h.WITCommonConstants.WorkItemTrackingArea,"CacheData",h.WITCommonConstants.WitCacheProviderInit,n),null})},n.prototype.postDataAsync=function(n,t){return this.isDataProviderEnabled(n)?u.getDataFromDataProviderAsync(n,t,this.getDataProviderId(n)):u.postMVCDataAsync(n,t)},n.prototype.getDataProviderId=function(n){if(n&&n.action&&this.MVCActionToDataproviderIdMapping[n.action])return this.MVCActionToDataproviderIdMapping[n.action];var t=c.getScenarioManager().startScenario(u.WITDataSourceTelemetryConstants.WorkItemArea,"MVCActionToDpIdMappingNotFoundError");t.addData({routeParams:n});t.end();throw new Error(f.format(e.MVCActionToDpIdMappingNotFoundError,n.action));},n}();a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.MVCActionToDataproviderIdMapping={fields:"ms.vss-work-web.fields-data-provider",allowedValues:"ms.vss-work-web.fields-allowed-values-provider",ResourceLinks:"ms.vss-work-web.resource-links-data-provider",workItemTypeExtensions:"ms.vss-work-web.work-item-type-extensions-data-provider",updateWorkItems:"ms.vss-work-web.update-work-items-data-provider",constantSets:"ms.vss-work-web.constant-sets-data-provider",getMetadataCacheStamps:"ms.vss-work-web.work-item-cache-data-provider",linkTypes:"ms.vss-work-web.work-item-link-types-data-provider",teamProjects:"ms.vss-work-web.work-item-team-projects-data-provider",workItemTypes:"ms.vss-work-web.work-item-types-data-provider",pageWorkItems:"ms.vss-work-web.page-work-items-data-provider",pageWorkItemsByIdRev:"ms.vss-work-web.page-work-items-by-id-rev-data-provider",AdHocQueries:"ms.vss-work-web.ad-hoc-queries-data-provider",query:"ms.vss-work-web.work-item-query-data-provider",updateAdHocQuery:"ms.vss-work-web.update-ad-hoc-query-data-provider",updateColumnOptions:"ms.vss-work-web.update-column-options-data-provider",search:"ms.vss-work-web.search-data-provider",queryFavorites:"ms.vss-work-web.query-favorites-data-provider",teamSettings:"ms.vss-work-web.team-settings-data-provider",workitems:"ms.vss-work-web.work-items-with-history-data-provider",workitemsnohistory:"ms.vss-work-web.work-items-no-history-data-provider",sendMail:"ms.vss-work-web.send-mail-data-provider",workitemcolor:"ms.vss-work-web.work-item-color-data-provider"},t.MVCActionToFeatureFlagMapping={sendMail:r.FeatureAvailabilityFlags.DisableSendMailDataProvider,workitemcolor:r.FeatureAvailabilityFlags.DisableWorkItemColorDataProvider},t}return __extends(t,n),t.prototype.isDataProviderEnabled=function(n){return n&&n.action&&this.MVCActionToFeatureFlagMapping[n.action]?!i.FeatureAvailabilityService.isFeatureEnabled(this.MVCActionToFeatureFlagMapping[n.action]):!i.FeatureAvailabilityService.isFeatureEnabled(r.FeatureAvailabilityFlags.DisableWorkItemStoreDataProviders)},t.prototype.useCallback=function(n){return!this.isDataProviderEnabled(n)},t.prototype.postDataWithCallback=function(n,t,i,r){this.useCallback(n)?u.postMVCDataWithCallback(n,t,i,r):this.postDataAsync(n,t).then(function(n){return i(n)},r)},t}(l);t.WorkItemStoreLevelWITDataSource=a;v=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t.MVCActionToDataproviderIdMapping={getProcessSettings:"ms.vss-work-web.process-settings-data-provider",getProcessSettingsProperty:"ms.vss-work-web.process-settings-property-data-provider",GetProcessFieldUsages:"ms.vss-work-web.process-field-usage-data-provider",MigrateProjectsProcess:"ms.vss-work-web.migrate-projects-data-provider",GetJobProgress:"ms.vss-work-web.migrate-job-status-data-provider"},t}return __extends(t,n),t.prototype.isDataProviderEnabled=function(){return!i.FeatureAvailabilityService.isFeatureEnabled(r.FeatureAvailabilityFlags.DisableWorkItemStoreDataProviders)},t}(l);t.WebAccessBoardsWITDataSource=v});

define("VSS/Artifacts/Services",["require","exports","VSS/Context","VSS/Diag","VSS/Events/Action","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Utils/Url","VSS/Utils/String","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h){function v(n){return n.toLowerCase()}function p(n){for(var i={},u,r,t=0,f=n.length;t<f;t++)u=l.decodeUri(n[t]),r=v(u.tool),i[r]||(i[r]=[]),i[r].push(u);return i}var c,l,y,a;Object.defineProperty(t,"__esModule",{value:!0});t.ClientLinking=t.LinkingUtilities=t.Artifact=void 0;c=function(){function n(n){this._data=n;this._data.uri||(this._data.uri=l.encodeUri({tool:this.getTool(),type:this.getType(),id:this.getId()}))}return n._execute=function(n,t){var i=n.getUrl(t);i?u.getService().performAction(u.CommonActions.ACTION_WINDOW_OPEN,{url:i,target:"_blank"}):alert(s.format(f.UnknownArtifactType,n.getType()))},n.prototype.getUri=function(){return this._data.uri},n.prototype.getTool=function(){return this._data.tool},n.prototype.getType=function(){return this._data.type},n.prototype.getId=function(){return this._data.id},n.prototype.getTitle=function(){return this.getUri()},n.prototype.setError=function(n){this._error=n},n.prototype.getError=function(){return this._error},n.prototype.execute=function(t){return u.getService().performAction(n.ACTION_ARTIFACT_EXECUTE,{artifact:this,webContext:t})},n.prototype.getUrl=function(){return null},n.ACTION_ARTIFACT_EXECUTE="artifact-execute",n}();t.Artifact=c;u.getService().registerActionWorker(c.ACTION_ARTIFACT_EXECUTE,function(n){return c._execute(n.artifact,n.webContext)});l=function(){function n(){}return n.encodeUri=function(t){return n.VSTFS+[encodeURIComponent(t.tool),encodeURIComponent(t.type),encodeURIComponent(t.id)].join(n.URI_SEPARATOR)},n.decodeUri=function(t){var u,i;if(t.length>n.VSTFS.length&&(u=t.substr(0,n.VSTFS.length).toLowerCase(),u===n.VSTFS&&(i=t.substr(n.VSTFS.length).split(n.URI_SEPARATOR),i.length>=3))){var e=i[0],o=i[1],h=i.slice(2).join("/");return{uri:t,tool:n.legacyDecodeURIComponent(e),type:n.legacyDecodeURIComponent(o),id:n.legacyDecodeURIComponent(h)}}throw new Error(s.format(f.InvalidArtifactUri,t));},n.legacyDecodeURIComponent=function(n){var t;return t=n.replace(/\+/g," "),decodeURIComponent(t)},n.VSTFS="vstfs:///",n.URI_SEPARATOR="/",n}();t.LinkingUtilities=l;y={};a=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.registerArtifactResolver=function(n,t){y[v(n)]=t},t.getArtifactResolver=function(n){return y[v(n)]},t.prototype.beginResolveArtifacts=function(n,i,r){function l(n,t){for(var f=[],r,i=0,u=n.length;i<u;i++)r=new c(n[i]),t&&r.setError(t),f.push(r);return f}function e(){u.resolving===0&&(r(u.results),u.resolving-=1)}function f(n,t){u.resolving-=1;u.results=u.results.concat(n.success?n.artifacts:l(t,n.error));e()}function a(n,i){var r=t.getArtifactResolver(n);return r?(r(i,h,function(n){f(n,i)},function(n){f({success:!1,error:n},i)}),!0):!1}var s=this.getWebContext(),h=$.extend({webContext:s},i),u={results:[],resolving:0},o=p(n);$.each(o,function(){u.resolving+=1});$.each(o,function(n,t){a(n,t)||f({success:!1,error:new Error("NoResolver")},t)});e()},t.MODE_TRANSLATEURL="translateURL",t}(e.VssService);t.ClientLinking=a;o.getTranslatorService().registerUrlTranslator(function(n,t,r,u,f){var o;n&&s.startsWith(n,l.VSTFS,s.ignoreCaseComparer)?(o=t&&t.webContext||i.getDefaultWebContext(),e.getCollectionService(a,o).beginResolveArtifacts([n],{mode:a.MODE_TRANSLATEURL},function(n){n&&n.length===1&&!n[0].getError()?r(n[0].getUrl(o)):f()},u)):f()});h.tfsModuleLoaded("VSS.OM.Artifacts",t)});

define("Presentation/Scripts/TFS/TFS.OM.Identities",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Artifacts/Services","VSS/Locations"],function(n,t,i,r,u,f){var c,e,o,s,h;Object.defineProperty(t,"__esModule",{value:!0});t.IdentityHelper=t.IdentityImageSize=t.IdentitySearchFactor=t.IdentityImageMode=t.IdentityFilter=void 0,function(n){n[n.All=0]="All";n[n.Users=1]="Users";n[n.Groups=2]="Groups"}(c=t.IdentityFilter||(t.IdentityFilter={})),function(n){n[n.None=0]="None";n[n.ShowGenericImage=1]="ShowGenericImage"}(e=t.IdentityImageMode||(t.IdentityImageMode={})),function(n){n[n.AccountName=0]="AccountName";n[n.DisplayName=1]="DisplayName";n[n.AdministratorsGroup=2]="AdministratorsGroup";n[n.Identifier=3]="Identifier";n[n.MailAddress=4]="MailAddress";n[n.General=5]="General";n[n.Alias=6]="Alias"}(o=t.IdentitySearchFactor||(t.IdentitySearchFactor={})),function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large"}(s=t.IdentityImageSize||(t.IdentityImageSize={}));h=function(){function n(){}return n.preProcessIdentities=function(t,i){i===void 0&&(i=!1);$.each(t,function(t,i){i.isTfsGroup=n.isTfsGroup(i)})},n.getIdentityImageUrl=function(n,t,i){t===void 0&&(t=e.None);var u=r.TfsContext.getDefault();return n.isAadIdentity?u.getActionUrl("GetAadUserThumbnail","identity",{project:"",team:"",area:"api",userObjectId:n.id}):((i===undefined||i===null)&&(i=s.Medium),n.id)?u.getIdentityImageUrl(n.id,{size:i}):n.uniqueName?u.getIdentityImageUrl("",{identifier:n.uniqueName,resolveAmbiguous:!1,identifierType:o.AccountName,size:i}):n.isContainer?u.getIdentityImageUrl("",{identifier:n.displayName,resolveAmbiguous:!1,identifierType:o.General,size:i}):t===e.ShowGenericImage?u.configuration.getResourcesFile("notassigned-user.svg"):""},n.getIdentityImageUrlByIdentity=function(t){return t?n.getIdentityImageUrl(t,e.ShowGenericImage,s.Small):f.urlHelper.getVersionedContentUrl("notassigned-user.svg")},n.parseUniquefiedIdentityName=function(t){var a,v;if(!t)return null;var f=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START),o=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END),s=!1,y=!1,h=!1,e=t;f>=0&&o>f&&(h=!0,e=e.replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START).replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END));f=e.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START);o=e.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END);var c=e,l="",u="",p="",r="";return f>=0&&o>f&&(c=e.substr(0,f).trim(),h?(r=e.substr(f+1,o-f-1).trim(),r.indexOf(n.AAD_IDENTITY_USER_PREFIX)===0?r=r.substr(n.AAD_IDENTITY_USER_PREFIX.length):r.indexOf(n.AAD_IDENTITY_GROUP_PREFIX)===0&&(s=!0,r=r.substr(n.AAD_IDENTITY_GROUP_PREFIX.length)),a=r.lastIndexOf("\\"),a>0&&(u=r.substr(a+1).trim(),u.indexOf("@")!==-1?(l=u,r=r.substr(0,a).trim()):(c=t,r="",h=!1,s=!1))):(u=e.substr(f+1,o-f-1).trim(),v=n.getVsIdFromGroupUniqueName(u),p=n.getDescriptorFromUniqueName(u),u.indexOf("@")!==-1||u.indexOf("\\")!==-1||u.indexOf(n.DESCRIPTOR_PREFIX)!==-1||v||i.isGuid(u)?(l=u,v!=""&&(r=v,s=!0,y=!0,l="")):c=t)),{id:r,displayName:c,uniqueName:p||l,isAadIdentity:h,isContainer:s,isTfsGroup:y}},n.getUniquefiedIdentityName=function(t){if(t.isAadIdentity&&t.displayName&&t.id){var r=t.isContainer?n.AAD_IDENTITY_GROUP_PREFIX:n.AAD_IDENTITY_USER_PREFIX;return t.uniqueName&&!t.isContainer?i.format("{0} {1}{2}{3}\\{4}{5}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,r,t.id,t.uniqueName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):i.format("{0} {1}{2}{3}{4}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,r,t.id,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END)}return!t.isAadIdentity&&t.displayName&&t.isContainer&&t.isTfsGroup?t.id?i.format("{0} {1}{2}{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.TFS_GROUP_PREFIX,t.id.toUpperCase(),n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName:!t.isAadIdentity&&t.displayName&&t.uniqueName?i.format("{0} {1}{2}{3}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,t.uniqueName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName||""},n.getFriendlyDistinctDisplayName=function(t){return t.displayName&&t.uniqueName&&!t.isTfsGroup?n.getDistinctDisplayName(t.displayName,t.uniqueName):t.displayName||""},n.getDistinctDisplayName=function(t,r){return t&&r?i.format("{0} {1}{2}{3}",t,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,r,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):""},n.getFriendlyUniqueName=function(t){if(t.isContainer&&t.isTfsGroup&&t.displayName){var i=t.displayName.lastIndexOf(n.IDENTITY_UNIQUENAME_SEPARATOR);if(i!==-1)return t.displayName.substr(i+1)}return t.uniqueName},n.getVsIdFromGroupUniqueName=function(t){var r,u,f,e;return t?(u="",f=t.lastIndexOf(n.IDENTITY_UNIQUENAME_SEPARATOR),r=f===-1?t:t.substr(0,f),i.startsWith(r,n.TFS_GROUP_PREFIX)&&(e=r.substr(3).trim(),u=i.isGuid(e)?e:""),u):""},n.isTfsGroup=function(t){if(t.isContainer&&t.uniqueName)return n.getVsIdFromGroupUniqueName(t.uniqueName)!==i.empty||i.startsWith(t.uniqueName,u.LinkingUtilities.VSTFS,i.localeIgnoreCaseComparer)},n.union=function(t,i,r){r===void 0&&(r=!0);var u=t.slice(0),f={},e={},o={};return $.each(u,function(n,t){t.id&&(e[t.id.toLowerCase()]=t);t.uniqueName&&(o[t.uniqueName.toLowerCase()]=t);t.id||t.uniqueName||!t.displayName||(f[t.displayName.toLowerCase()]=t)}),$.each(i,function(n,t){t.id||t.uniqueName?e[(t.id||"").toLowerCase()]||o[(t.uniqueName||"").toLowerCase()]||u.push(t):f[t.displayName.toLowerCase()]||u.push(t)}),r&&n._sortListByName(u),u},n.subtract=function(t,i,r){r===void 0&&(r=!0);var u=t.slice(0);return $.each(i,function(t,i){for(var f=u.length,r=0;r<f;r++)n.areItemsEqual(i,u[r])&&(u.splice(r,1),f--)}),r&&n._sortListByName(u),u},n._sortListByName=function(n){n.sort(function(n,t){if(n.isTfsGroup&&!t.isTfsGroup)return 1;if(!n.isTfsGroup&&t.isTfsGroup)return-1;var r=n.displayName.toLowerCase().trim(),u=t.displayName.toLowerCase().trim();return i.localeIgnoreCaseComparer(r,u)})},n.areItemsEqual=function(n,t){var r,u;return n.id&&t.id?(r=n.id.toLowerCase().trim(),u=t.id.toLowerCase().trim()):n.uniqueName&&t.uniqueName?(r=n.uniqueName.toLowerCase().trim(),u=t.uniqueName.toLowerCase().trim()):(r=n.displayName.toLowerCase().trim(),u=t.displayName.toLowerCase().trim()),i.localeIgnoreCaseComparer(r,u)===0},n.getDescriptorFromUniqueName=function(t){return t?t.indexOf(n.DESCRIPTOR_PREFIX)!=0?"":t.replace(/desc:/i,""):""},n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<",n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<<",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">>",n.TFS_GROUP_PREFIX="id:",n.AAD_IDENTITY_USER_PREFIX="user:",n.AAD_IDENTITY_GROUP_PREFIX="group:",n.IDENTITY_UNIQUENAME_SEPARATOR="\\",n.DESCRIPTOR_PREFIX="desc:",n}();t.IdentityHelper=h});

define("WorkItemTracking/Scripts/Utils/LayoutUserSettingsUtility",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Utils/Array","VSS/Utils/String","VSS/Diag"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.LayoutUserSettingsUtility=void 0;var e;(function(n){function t(n,t){f.Debug.assertIsNotNull(n,"layoutUserSettings");f.Debug.assertIsNotNull(t,"workItemType");var i,r=t.name;return t.processId&&!u.isEmptyGuid(t.processId)?i=e(n,t.processId):t.project&&t.project.guid&&(i=o(n,t.project.guid)),i&&r&&h(i,r)||null}function h(n,t){var i=r.first(n.workItemTypeSettings,function(n){return u.equals(n.refName,t,!0)});return i||(i={refName:t,collapsedGroups:[],mobileCollapsedGroups:[]},n.workItemTypeSettings.push(i)),i}function e(n,t){var i,r,e,o;if(f.Debug.assertIsNotNull(n,"layoutUserSettings"),f.Debug.assert(u.isGuid(t)),n)for(i=0,r=n.processSettings;i<r.length;i++)if(e=r[i],u.ignoreCaseComparer(e.processId,t)===0)return e;return o={processId:t,workItemTypeSettings:[]},n.processSettings.push(o),o}function o(n,t){var i,r,e,o;if(f.Debug.assertIsNotNull(n,"layoutUserSettings"),n)for(i=0,r=n.projectSettings;i<r.length;i++)if(e=r[i],u.ignoreCaseComparer(e.projectId,t)===0)return e;return o={projectId:t,workItemTypeSettings:[]},n.projectSettings.push(o),o}function c(n,r,u,e){e===void 0&&(e=i.FormLayoutType.Desktop);f.Debug.assertIsNotNull(n,"layoutUserSettings");var o=t(n,r);return s(o,u,e)}function s(n,t,r){r===void 0&&(r=i.FormLayoutType.Desktop);f.Debug.assertIsNotNull(n,"workItemTypeSettings");var e=r===i.FormLayoutType.Desktop?n.collapsedGroups:n.mobileCollapsedGroups;return e?e.filter(function(n){return u.equals(n,t,!0)}).length>0:!1}function l(n,e,o,s,h){var c,l,a;if(h===void 0&&(h=i.FormLayoutType.Desktop),f.Debug.assertIsNotNull(n,"layoutUserSettings"),f.Debug.assertIsNotNull(e,"workItemType"),!n)throw new Error("Invalid parameter: layoutUserSettings");if(!o)throw new Error("Invalid parameter: groupId");if(!e)throw new Error("Invalid parameter: workItemType");c=t(n,e);c.collapsedGroups=c.collapsedGroups||[];c.mobileCollapsedGroups=c.mobileCollapsedGroups||[];l=h===i.FormLayoutType.Desktop?c.collapsedGroups:c.mobileCollapsedGroups;a=r.findIndex(l,function(n){return u.equals(n,o,!0)});s&&a===-1?l.push(o):s||a===-1||l.splice(a,1)}n.getWorkItemTypeSettings=t;n.getProcessSettings=e;n.getProjectSettings=o;n.isGroupCollapsed=c;n.isGroupCollapsedForWorkItemType=s;n.setGroupExpansionState=l})(e=t.LayoutUserSettingsUtility||(t.LayoutUserSettingsUtility={}))});

define("VSS/Settings/RestClient",["require","exports","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r){"use strict";function g(n){return window.VSS&&window.VSS.VssSDKRestVersion&&k[window.VSS.VssSDKRestVersion]?i.getClient(k[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):i.getClient(e,undefined,undefined,undefined,n)}var u,f,e,o,s,h,c,l,a,v,y,p,w,b,d,k;Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.SettingsHttpClient=t.SettingsHttpClient3=t.SettingsHttpClient3_1=t.SettingsHttpClient3_2=t.SettingsHttpClient4=t.SettingsHttpClient4_1=t.SettingsHttpClient5=t.SettingsHttpClient5_1=t.SettingsHttpClient5_2=t.SettingsHttpClient6=t.SettingsHttpClient6_1=t.SettingsHttpClient7=t.SettingsHttpClient7_1=t.SettingsHttpClient7_2=t.CommonMethods3To7_2=void 0;u=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.setEntriesForScope=function(n,t,i,r){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"Settings",locationId:"4cbaafaf-e8af-4570-98d1-79ee99c56327",resource:"Entries",routeTemplate:"_apis/{area}/{scopeName}/{scopeValue}/{resource}/{userScope}/{*key}",routeValues:{userScope:t,scopeName:i,scopeValue:r},apiVersion:this.entriesApiVersion,data:n})},t.prototype.removeEntriesForScope=function(n,t,i,r){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Settings",locationId:"4cbaafaf-e8af-4570-98d1-79ee99c56327",resource:"Entries",routeTemplate:"_apis/{area}/{scopeName}/{scopeValue}/{resource}/{userScope}/{*key}",routeValues:{userScope:n,scopeName:t,scopeValue:i,key:r},apiVersion:this.entriesApiVersion})},t.prototype.getEntriesForScope=function(n,t,i,r){return this._beginRequest({httpMethod:"GET",area:"Settings",locationId:"4cbaafaf-e8af-4570-98d1-79ee99c56327",resource:"Entries",routeTemplate:"_apis/{area}/{scopeName}/{scopeValue}/{resource}/{userScope}/{*key}",responseIsCollection:!0,routeValues:{userScope:n,scopeName:t,scopeValue:i,key:r},apiVersion:this.entriesApiVersion})},t.prototype.setEntries=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"Settings",locationId:"cd006711-163d-4cd4-a597-b05bad2556ff",resource:"Entries",routeTemplate:"_apis/{area}/{resource}/{userScope}/{*key}",routeValues:{userScope:t},apiVersion:this.entriesApiVersion_cd006711,data:n})},t.prototype.removeEntries=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Settings",locationId:"cd006711-163d-4cd4-a597-b05bad2556ff",resource:"Entries",routeTemplate:"_apis/{area}/{resource}/{userScope}/{*key}",routeValues:{userScope:n,key:t},apiVersion:this.entriesApiVersion_cd006711})},t.prototype.getEntries=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Settings",locationId:"cd006711-163d-4cd4-a597-b05bad2556ff",resource:"Entries",routeTemplate:"_apis/{area}/{resource}/{userScope}/{*key}",responseIsCollection:!0,routeValues:{userScope:n,key:t},apiVersion:this.entriesApiVersion_cd006711})},t}(r.VssHttpClient);t.CommonMethods3To7_2=u;f=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="7.2-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient7_2=f;e=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="7.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient7_1=e;o=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="7.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient7=o;s=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="6.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient6_1=s;h=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="6.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient6=h;c=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="5.2-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient5_2=c;l=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="5.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient5_1=l;a=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="5.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient5=a;v=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="4.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient4_1=v;y=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="4.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient4=y;p=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="3.2-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient3_2=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="3.1-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient3_1=w;b=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.entriesApiVersion=r.entriesApiVersion_cd006711="3.0-preview.1",r}return __extends(t,n),t}(u);t.SettingsHttpClient3=b;d=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(f);t.SettingsHttpClient=d;k={"7.2":f,"7.1":e,"7.0":o,"6.1":s,"6.0":h,"5.2":c,"5.1":l,"5.0":a,"4.1":v,"4.0":y,"3.2":p,"3.1":w,"3.0":b};t.getClient=g});

define("VSS/Settings/Services",["require","exports","q","VSS/Contributions/LocalPageData","VSS/Service","VSS/Settings/RestClient","VSS/User/Services"],function(n,t,i,r,u,f,e){function c(n){return u.VssConnection.getConnection(n).getService(h)}Object.defineProperty(t,"__esModule",{value:!0});t.getService=void 0;var s=i({value:{},count:0}),o=i(),h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),Object.defineProperty(t.prototype,"httpClient",{get:function(){return this._httpClient||(this._httpClient=u.getClient(f.SettingsHttpClient)),this._httpClient},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canCallSettingsEndpoint",{get:function(){return this._claimsService||(this._claimsService=e.getService()),this._claimsService.hasClaim(e.UserClaims.Member)},enumerable:!1,configurable:!0}),t.prototype.getEntry=function(n,t,i,u){var h,c,l,f,e,v,y,a,o,s;if(!this.canCallSettingsEndpoint)return undefined;if(h=r.getSharedData("_settings"),h&&(c=this.userScopeToString(t),i&&(c+=";"+i+";"+(u||"")),l=h[c],l))for(f=n.split("/"),e=0,v=f.length;e<v;e++)if(y=f.slice(0,e+1).join("/"),a=l[y],a){for(o=a,s=e+1;s<f.length&&o;s++)o=o[f[s]];return o}return undefined},t.prototype.getEntriesAsync=function(n,t,i,r){return this.canCallSettingsEndpoint?i?this.httpClient.getEntriesForScope(this.userScopeToString(t),i,r,n):this.httpClient.getEntries(this.userScopeToString(t),n):s},t.prototype.setEntries=function(n,t,i,r){return this.canCallSettingsEndpoint?i?this.httpClient.setEntriesForScope(n,this.userScopeToString(t),i,r):this.httpClient.setEntries(n,this.userScopeToString(t)):o},t.prototype.removeEntries=function(n,t,i,r){return this.canCallSettingsEndpoint?i?this.httpClient.removeEntriesForScope(this.userScopeToString(t),i,r,n):this.httpClient.removeEntries(this.userScopeToString(t),n):o},t.prototype.userScopeToString=function(n){return n===1?"host":"me"},t}(u.VssService);t.getService=c});

define("WorkItemTracking/Scripts/Form/UserLayoutSettings",["require","exports","q","VSS/Service","VSS/Contributions/Services","WorkItemTracking/Scripts/Utils/LayoutUserSettingsUtility","VSS/Error","VSS/Diag","VSS/VSS","VSS/WebApi/Constants","VSS/Settings/Services"],function(n,t,i,r,u,f,e,o,s,h,c){var v;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemFormUserLayoutSettingsService=void 0;var y=500,l="ms.vss-work-web.work-item-layout-user-settings-data-provider",a={processSettings:[],projectSettings:[],isWitDialogFullScreen:!1},p=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._storage=new v,t}return __extends(t,n),t.prototype.ensureSettingsAreLoaded=function(){return this._storage.ensureSettingsLoaded()},Object.defineProperty(t.prototype,"isDialogFullscreen",{get:function(){return this._storage.layoutSettings&&this._storage.layoutSettings.isWitDialogFullScreen||!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fieldChromeBorder",{get:function(){return this._storage.fieldChromeBorder},enumerable:!1,configurable:!0}),t.prototype.getLayoutSettingsForWorkItemType=function(n){var t=this._storage.layoutSettings;return f.LayoutUserSettingsUtility.getWorkItemTypeSettings(t,n)},t.prototype.setGroupExpansionState=function(n,t,i,r){return this._storage.queueSettingsOperation(function(u){u&&f.LayoutUserSettingsUtility.setGroupExpansionState(u,n,t,i,r)})},t.prototype.setDialogFullscreenState=function(n){return this._storage.queueSettingsOperation(function(t){t.isWitDialogFullScreen=n})},t}(r.VssService);t.WorkItemFormUserLayoutSettingsService=p;v=function(){function n(){this._processing=!1;this._queue=[];this._initLayoutSettingsFromPageData()}return n.prototype.ensureSettingsLoaded=function(){var n=this;return this._layoutSettings?i(null):this._updateCurrentLayoutState().then(function(){if(!n._layoutSettings)return r.getService(u.WebPageDataService).ensureDataProvidersResolved([{id:l,properties:{serviceInstanceType:h.ServiceInstanceTypes.TFS}}]).then(function(){n._initLayoutSettingsFromPageData()},function(n){e.publishErrorToTelemetry(n)})})},Object.defineProperty(n.prototype,"layoutSettings",{get:function(){return this._layoutSettings||a},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fieldChromeBorder",{get:function(){return this._fieldChromeBorder},enumerable:!1,configurable:!0}),n.prototype.queueSettingsOperation=function(n){return this._queue.push(n),this._processQueue()},n.prototype._initLayoutSettingsFromPageData=function(){var n=r.getService(u.WebPageDataService).getPageData(l);this._layoutSettings=n&&n.layoutUserSettings;this._fieldChromeBorder=n&&n.fieldChromeBorder},n.prototype._processQueue=function(){var n=this;return this._processing?(this._waitingOperation||(this._waitingOperation=this._pendingOperation.then(function(){return n._waitingOperation=null,n._processQueue()})),this._waitingOperation):(this._pendingOperation=i.delay(y).then(function(){return n._processOperations()}).then(function(){n._pendingOperation=null;n._processing=!1}).then(null,function(t){e.publishErrorToTelemetry(t);n._pendingOperation=null;n._processing=!1}),this._pendingOperation)},n.prototype._processOperations=function(){if(this._processing=!0,this._queue&&this._queue.length>0){var n=[];return n=this._queue.slice(0),this._queue=[],this._updateSettings(n)}},n.prototype._updateSettings=function(n){var t=this;return this._updateCurrentLayoutState().then(function(){for(var u,f,i=0,r=n;i<r.length;i++)u=r[i],u(t._layoutSettings||a);return f=t._getService(),f.setEntries({"WorkItemTracking/LayoutUserSettings":t._layoutSettings},0)})},n.prototype._getService=function(){return c.getService()},n.prototype._updateCurrentLayoutState=function(){var n=this,t=this._getService();return t.getEntriesAsync("WorkItemTracking",0).then(function(t){var i=t.value;n._layoutSettings=i&&i.LayoutUserSettings}).then(null,function(n){e.publishErrorToTelemetry(n);o.logError(s.getErrorMessage(n))})},n}()});

define("VSS/Artifacts/Constants",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.ToolNames=t.ArtifactTypeNames=void 0,function(n){n.TcmResult="TcmResult";n.TcmResultAttachment="TcmResultAttachment";n.TcmTest="TcmTest";n.Build="Build";n.VersionedItem="VersionedItem";n.LatestItemVersion="LatestItemVersion";n.Changeset="Changeset";n.Shelveset="Shelveset";n.WorkItem="WorkItem";n.Storyboard="Storyboard";n.Commit="Commit";n.CodeReviewId="CodeReviewId";n.CodeReviewSdkId="ReviewId";n.PullRequestId="PullRequestId";n.ProjectDownloadProject="Project";n.Ref="Ref";n.WikiPage="WikiPage";n.PullRequest="PullRequest";n.Issue="Issue"}(i=t.ArtifactTypeNames||(t.ArtifactTypeNames={})),function(n){n.VersionControl="VersionControl";n.WorkItemTracking="WorkItemTracking";n.RemoteWorkItemTracking="RemoteWorkItemTracking";n.TeamBuild="Build";n.TestManagement="TestManagement";n.Requirements="Requirements";n.Hyperlink="Hyperlink";n.Legacy="Legacy";n.CodeSense="CodeSense";n.Git="Git";n.CodeReview="CodeReview";n.ProjectDownload="ProjectDownload";n.Wiki="Wiki";n.GitHub="GitHub"}(r=t.ToolNames||(t.ToolNames={}))});

define("WorkItemTracking/Scripts/LinkForm",["require","exports","VSS/Controls","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/VSS","VSS/Events/Services","VSS/Artifacts/Constants"],function(n,t,i,r,u,f,e){function l(n,t){c(n,function(n){n(t)})}function c(n,t){n=n.toUpperCase();o[n]=t}function a(n,t){var i;n=n.toUpperCase();i=o[n];i?i(t):t(null)}function v(n){return!!o[n.name.toUpperCase()]||n.toolId===e.ToolNames.GitHub}var o,h,s;Object.defineProperty(t,"__esModule",{value:!0});t.LinkForm=t.isLinkFormRegistered=t.beginGetLinkForm=t.registerLinkFormAsync=t.registerLinkForm=t.LEARNMORE_LINK=void 0;o={};h=f.getService();t.LEARNMORE_LINK="https://aka.ms/AA56xmh";t.registerLinkForm=l;t.registerLinkFormAsync=c;t.beginGetLinkForm=a;t.isLinkFormRegistered=v;s=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._workItem=t.workItem,i}return __extends(t,n),t.createTitleElement=function(n,t,i){var r=$("<label/>").addClass("dialog-linkform-label").text(n);return t&&r.attr("for",t),i&&r.addClass(i),r},t.createTitleElementWithIconClass=function(n,i,r,u,f){var e=$("<div/>").addClass("section-title");return $("<div/>").addClass(r).appendTo(e),t.createTitleElement(n,i,u).appendTo(e),f&&f.appendTo(e),e},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"link-dialog-form"},t))},t.prototype._createComment=function(){var n="comment";this._element!==null&&(this._element.append(t.createTitleElement(r.LinkDialogCommentTitle,n)),this._element.append($("<input>").attr("type","text").attr("id",n).addClass("link-dialog-width-100")))},t.prototype.getComment=function(){return this._element.find("#comment").val().trim()},t.prototype.LinkResult=function(){return null},t.prototype.unload=function(){this.dispose();this._workItem=null;this._validator=null},t.prototype.fireLinkFormValidationEvent=function(n){h.fire(t.LINKFORM_VALIDATED,this,{linkForm:n})},t.LINKFORM_VALIDATED="linkform-validated",t}(i.BaseControl);t.LinkForm=s;u.initClassPrototype(s,{_workItem:null,_validator:null})});

define("WorkItemTracking/Scripts/OM/DataSources/DataProviderDataSource",["require","exports","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Utils/Core","VSS/Contributions/Services","VSS/Service","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Context","VSS/Navigation/NavigationHistoryService","VSS/Context"],function(n,t,i,r,u,f,e,o,s,h,c){function l(n){return n.status===o.CacheStatus.UpToDate||typeof n.status=="string"&&n.status===o.CacheStatus[o.CacheStatus.UpToDate]}Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemDataProviderSource=t.WorkItemDataProviderId=void 0;t.WorkItemDataProviderId="ms.vss-work-web.work-item-data-provider";var a=function(){function n(n){this._cacheInformationManager=n}return n.prototype.getWorkItemData=function(n){if(!this._containsWorkItemData(n))return null;var t=this._getDataProviderData();return this._processWorkItemData(n,t)},n.prototype.beginGetWorkItemData=function(n,i,r,u,o){var a=this,l;if(i.length!==1)return Promise.resolve(null);if(l=i[0],!o&&this._containsWorkItemData(l))return Promise.resolve([this.getWorkItemData(l)]);var y=s.getPageContext(),p=h.getNavigationHistoryService(),v={id:i[0],"include-history":o,"include-in-recent-activity":u,"is-deleted":r,cookie:this._cacheInformationManager&&this._cacheInformationManager.readInformationForNonWITLocation()};return e.getService(f.WebPageDataService,c.getDefaultWebContext()).getDataAsync(t.WorkItemDataProviderId,null,v).then(function(n){return a._dataProviderData=n,[a._processWorkItemData(l,a._dataProviderData)]})},n.prototype._processWorkItemData=function(n,t,f){var e,o;if(f===void 0&&(f=!0),e=t&&t["work-item-data"],e||(o=t&&t["work-item-data-serialized"],o&&(e=u.parseMSJSON(o))),!e)throw i.format(r.WorkItemNotFoundClientException,n);return f&&(delete t["work-item-id"],delete t["work-item-data"],delete t["work-item-data-serialized"]),e},n.prototype.beginGetWorkItemTypeData=function(n,t){var e,f,r;if(t.length>1)return Promise.resolve(null);if(e=this._getDataProviderData(),f=e&&e["work-item-type-data"],f){if(l(f))return Promise.resolve(null);if(f.data)return(r=f.data,!i.equals(r.projectGuid,n,!0))?Promise.resolve(null):!i.equals(t[0],r.referenceName,!0)&&!i.equals(t[0],r.name,!0)?Promise.resolve(null):(this._canDeserializeRules(r)&&(r.rules.fieldRules=u.parseMSJSON(r.rules.fieldRules)),Promise.resolve([r]))}return Promise.resolve(null)},n.prototype.beginGetFields=function(){return null},n.prototype.beginGetFieldProjectData=function(n){var r=this._getDataProviderData(),t=r&&r["work-item-project-field-data"],u;if(t)return l(t)?Promise.resolve(null):t.data&&t.data.projects&&(u=t.data.projects.some(function(t){return i.equals(n,t.guid,!0)||i.equals(n,t.name,!0)}),!u)?Promise.resolve(null):Promise.resolve(t.data)},n.prototype.beginGetLinkTypes=function(){var t=this._getDataProviderData(),n=t&&t["work-item-link-data"];if(n)return l(n)?Promise.resolve(null):Promise.resolve(n.data)},n.prototype._canDeserializeRules=function(n){return n&&n.rules&&n.rules.fieldRules&&(typeof n.rules.fieldRules=="string"||n.rules.fieldRules instanceof String)},n.prototype._containsWorkItemData=function(n){var t=this._getDataProviderData();return t&&t["work-item-id"]===n&&t["work-item-data"]!==undefined},n.prototype._getDataProviderData=function(){if(!this._dataProviderData){var n=e.getService(f.WebPageDataService);this._dataProviderData=n.getPageData(t.WorkItemDataProviderId)}return this._dataProviderData},n}();t.WorkItemDataProviderSource=a});

define("WorkItemTracking/Scripts/OM/DataSources/QueryDataProviderDataSource",["require","exports","VSS/Contributions/Services","VSS/Service","VSS/Utils/Array","VSS/Utils/String"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.QueryDataProviderSource=void 0;var e="ms.vss-work-web.query-data-provider",o=function(){function n(){}return n.prototype.beginGetWorkItemData=function(){return null},n.prototype.beginGetWorkItemTypeData=function(){return null},n.prototype.beginGetLinkTypes=function(){return null},n.prototype.beginGetFields=function(){return null},n.prototype.beginGetFieldProjectData=function(n){var i=this._getDataProviderData(),t=i&&i.projectFieldData,r;return t&&(r=u.arrayContains(n,t.projects,function(n,t){return f.localeIgnoreCaseComparer(t.guid,n)===0||f.localeIgnoreCaseComparer(t.name,n)===0}),r)?Promise.resolve(t):null},n.prototype._getDataProviderData=function(){var n=r.getService(i.WebPageDataService);return n.getPageData(e)},n}();t.QueryDataProviderSource=o});

define("WorkItemTracking/Scripts/CustomerIntelligence",["require","exports"],function(n,t){var i,r,u,f,e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.BUTTON_CLICKED=t.SHORTCUT_KEYDOWN=t.CustomerIntelligencePropertyValue=t.PerformanceEvents=t.WITUserScenarioActions=t.WITPerformanceScenarioEvent=t.WITPerformanceScenario=t.WITCustomerIntelligenceFeature=t.WITCustomerIntelligenceArea=void 0;i=function(){function n(){}return n.WORK_ITEM_TRACKING="WIT",n.WORK_ITEM_TRACKING_MOBILE="WIT_MOBILE",n.NEW_QUERIES_EXPERIENCE="NEW_QUERIES",n.WORK_ITEM_TRACKING_NEWNAV="WIT_NEWNAV",n}();t.WITCustomerIntelligenceArea=i;r=function(){function n(){}return n.CLIENTSIDEOPERATION_SEND_EMAIL="SendEmail",n.CLIENTSIDEOPERATION_OPEN_WORK_ITEM_IN_NEW_TAB="OpenWorkItemInNewTab",n.CLIENTSIDEOPERATION_PREFETCH_NEXT_WORKITEM="PrefetchNextWorkitemInTriageView",n.CLIENTSIDEOPERATION_BACK_TO_QUERY_RESULTS="BackToQueryResults",n.CLIENTSIDEOPERATION_MAXIMIZE_RICH_EDITOR="MaximizeRichEditor",n.CLIENTSIDEOPERATION_QUERY_SOFTCAP_LINK="QuerySoftCapLink",n.CLIENTSIDEOPERATION_COPY_SELECTION_AS_HTML="CopySelectionAsHtml",n.CLIENTSIDEOPERATION_WORK_ITEM_FINDER="WorkItemFinder",n.CLIENTSIDEOPERATION_QUERYACROSSPROJECTS="QueryAcrossProjects",n.CLIENTSIDEOPERATION_QUERY_WORK_ITEM="QueryWorkItem",n.CLIENTSIDEOPERATION_CREATE_QUERY="CreateQuery",n.CLIENTSIDEOPERATION_CHANGE_QUERY_COLUMNS="ChangeQueryColumns",n.CLIENTSIDEOPERATION_WIT_CLONE="CloneWorkItem",n.CLIENTSIDEOPERATION_QUERY_RESULTS_PROVIDER="QueryResultsProvider",n.CLIENTSIDEOPERATION_COPY_WORKITEM_LINK="WorkItem.CopyWorkItemLink",n.CLIENTSIDEOPERATION_INCLUDE_WORKITEM_LINKS_ATTACHMENTS="WorkItem.IncludeWorkItemLinksAndAttachments",n.CLIENTSIDEOPERATION_COPY_WITH_CHILDREN="WorkItem.CopyWithChildren",n.CLIENTSIDEOPERATION_TOOLBAR_CLICK="WorkItem.ToolbarButtonClicks",n.CLIENTSIDEOPERATION_WIT_TABSELECTION="WorkItem.TabSelection",n.CLIENTSIDEOPERATION_WIT_GROUPCOLLAPSED="WorkItem.GroupCollapsed",n.CLIENTSIDEOPERATION_WIT_SAVING="WorkItem.Saving",n.CLIENTSIDEOPERATION_WIT_CSSNODECACHEINVALIDATED="CSSNodes.CacheInvalidated",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONOPENED="WorkItem.DiscussionOpened",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONMESSAGESLOADED="WorkItem.DiscussionMessagesLoaded",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONCOMMENTSUBMITTED="WorkItem.DiscussionCommentSubmitted",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONUNSAVEDPREVIEW="WorkItem.DiscussionUnsavedPreview",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONRETURNTOUNSAVEDCOMMENT="WorkItem.DiscussionReturnToUnsavedComment",n.CLIENTSIDEOPERATION_WIT_MOBILEDISCUSSIONPREVIEWCLICKED="WorkItem.DiscussionPreviewClicked",n.RESULT_FILTER="ResultFilter",n.CLIENTSIDEOPERATION_VS_WORKITEM_NOT_IN_QUERY_RESULTS="VSOpenInWeb.WorkItemNotInQueryResult",n.WORKITEMPANECHANGED="WorkItemPaneChanged",n.WI_FORM_CONTRIBUTION="FormContribution",n.IMPORTCSV_IMPORT="ImportCsv.Import",n.IMPORTCSV_IMPORT_ERROR="ImportCsv.Import.Error",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL="WorkItemMove.CancelMove",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL_AFTER_HIDDEN_TYPE_FAILED="WorkItemMove.CancelAfterHiddenTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL_AFTER_TYPE_FAILED="WorkItemMove.CancelAfterTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_SUCCEED_AFTER_TYPE_FAILED="WorkItemMove.PassAfterTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_PERMISSIONS_ERROR="WorkItemMove.PermissionsError",n.CLIENTSIDEOPERATION_WIT_MOVE_REVERT="WorkItemMove.Revert",n.CLIENTSIDEOPERATION_WIT_MOVE_SUCCESS="WorkItemMove.Success",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_REVERT="WorkItemChangeType.Revert",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_CANCEL_AFTER_FAIL="WorkItemChangeType.CancelAfterFailed",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_CANCEL_AFTER_OPEN="WorkItemChangeType.CancelAfterOpen",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_SUCCESS="WorkItemChangeType.Success",n.BULK_EDIT_TAGS="BulkEditTags",n.TELEMETRY_ASSIGNTO_POPULATEMENU="AssignTo.PopulateMenu",n.TELEMETRY_OPENWORKITEM_CONTEXTMENU="OpenWorkItemConextMenu",n.WORKITEM_DISCUSSIONCONTROL="WorkItemDiscussion",n.WORKITEM_VIEWFOLLOWS="ViewWorkItemFollows",n.WORKITEM_BULKUNFOLLOWS="BulkUnfollows",n.CLIENTSIDEOPERATION_RELATEDWORKITEMS_CONTROL_OPENWORKITEM="RelatedWorkItemsControlOpenWorkItem",n.NEWQUERYEXPERIENCE_NAVIGATE_PIVOT="NewQueries.NavigatePivot",n.NEWQUERYEXPERIENCE_WORKITEMNAVIGATOR="NewQueries.WorkItemNavigator",n.NEWQUERYEXPERIENCE_TRIAGEVIEWHUB_PIVOTCOMMAND="NewQueries.TriageViewHub.PivotCommand",n.NEWQUERYEXPERIENCE_QUERY_ACTION="NewQueries.QueryAction",n.NEWQUERYEXPERIENCE_MOVE_QUERY="NewQueries.MoveQuery",n.NEWQUERYEXPERIENCE_LEAVE_DIRTY="NewQueries.LeaveDirty",n.NEWQUERYEXPERIENCE_ADHOCQUERY_REDIRECTION="NewQueries.AdhocQuery.Redirection",n.NEWQUERYEXPERIENCE_LASTVISITED_REDIRECTION="NewQueries.LastVisited.Redirection",n.NEWQUERYEXPERIENCE_NAVIGATE_QUERIESPIVOT="NewQueries.Navigate.QueriesPivot",n.NEWQUERYEXPERIENCE_BREADCRUMB_CLICKED="NewQueries.Breadcrumb.Clicked",n.CUSTOMIZE_WORKITEM="WorkItemToolbar.Customize",n.QUERYCHARTS_NAVIGATE="QueryCharts.Navigate",n.QUERY_SEARCH="Query.Search",n.CLIENTSIDEOPERATION_WIT_FIELDKEYBOARDSHORTCUT="WorkItemForm.FieldKeyboardShortcut",n.NODES_CACHE_MANAGER="NodesCacheManager",n.CLASSIFICATION_MRU_VALUE_CHANGED="ClassificationFieldsMruValueChanged",n.WIT_CACHE_PROVIDER_INIT="WorkItemTracking.CacheProvider.Initialize",n.WIT_CACHE_PROVIDER_OPEN="WorkItemTracking.CacheProvider.OpenCache",n.WIT_WATCHDOG_OPEN_FORM="WorkItemTracking.WatchDog.OpenForm",n.LINKSCONTROL_SAMECATEGORY_WARNING="LinksControl.SameCategory.Warning",n.FILTER_METHOD_USAGE="WorkItemTracking.ExtensionFilterMethodUsage",n.OLD_BOARDS_PLATFORM="OldBoardsHub",n}();t.WITCustomerIntelligenceFeature=r;u=function(){function n(){}return n.WORKITEM_OPEN_NEWFORMDIALOG="WorkItem.Open.NewFormDialog",n.WORKITEM_RELATED_LINKING="WorkItem.Related.Linking",n.WORKITEMFORM_FOLLOWS_ACTION_FOLLOW="WorkItemForm.Follows.Action.Follow",n.WORKITEMFORM_FOLLOWS_ACTION_UNFOLLOW="WorkItemForm.Follows.Action.Unfollow",n.WORKITEM_OPENFORM="WorkItem.OpenForm",n.WORKITEM_OPENFORM_NEWLAYOUT="WorkItem.OpenForm.NewLayout",n.WORKITEM_OPENFORM_CREATE_NEWLAYOUT="WorkItem.OpenForm.Create.NewLayout",n.WORKITEM_OPENDIALOG_NEWLAYOUT="WorkItem.OpenDialog.NewLayout",n.WORKITEM_OPENIDE_NEWLAYOUT="WorkItem.IDE.OpenForm.NewLayout",n.WORKITEM_SAVE="WorkItem.Save",n.WORKITEM_BULKSAVE="WorkItem.BulkSave",n.WORKITEM_CLOSED="WorkItem.Closed",n.WORKITEM_FIELDCHANGED="WorkItem.FieldChanged",n.QUERY_OPENRESULTS="Query.OpenResults",n.QUERY_SAVE="Query.Save",n.QUERY_SAVEAS="Query.SaveAs",n.QUERYHIERARCHY_LOAD="QueryHierarchy.Load",n.HISTORYVIEW_EXTENSION_LOAD="HistoryView.Extension.Load",n.WORKITEM_SIGNALR_REFRESHCOMPLETE="WorkItem.SignalR.RefreshComplete",n.WORKITEM_SIGNALR_REFRESHERROR="WorkItem.SignalR.RefreshError",n.WORKITEM_SIGNALR_ERROR="WorkItem.SignalR.Error",n.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS="QueriesHub.TriageView.OpenQueryResults",n.QUERIESHUB_TRIAGEVIEW_OPENBREADCRUMBQUERYRESULTS="QueriesHub.TriageView.OpenBreadcrumbQueryResults",n.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM="QueriesHub.TriageView.OpenWorkItem",n.QUERIESHUB_TRIAGEVIEW_SAVEEXISTINGQUERY="QueriesHub.TriageView.SaveExistingQuery",n.QUERIESHUB_QUERIESVIEW_OPENFAVORITESPIVOT="QueriesHub.QueriesView.OpenFavoritesPivot",n.QUERIESHUB_QUERIESVIEW_OPENALLQUERIESPIVOT="QueriesHub.QueriesView.OpenAllQueriesPivot",n}();t.WITPerformanceScenario=u;f=function(){function n(){}return n.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM_COMPLETE="QueriesHub.TriageView.OpenWorkItem.Complete",n.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS_COMPLETE="QueriesHub.TriageView.OpenQueryResults.Complete",n}();t.WITPerformanceScenarioEvent=f;e=function(){function n(){}return n.WORKITEM_CREATEOREDIT="WorkItem.CreateOrEdit",n}();t.WITUserScenarioActions=e;o=function(){function n(){}return n.WORKITEMRELATED_LINKING_COMPLETE="WorkItemRelated.Linking.Complete",n.WORKITEMDIALOG_CREATEWORKITEMFORM="WorkItemDialog.CreateWorkItemForm",n.WORKITEM_SAVE_COMPLETE="WorkItem.Save.Complete",n.WORKITEMFORM_INITIALIZE="WorkItemForm.Initialize",n.WORKITEMFORMBASE_INITIALIZE="WorkItemFormBase.Initialize",n.WORKITEMFORM_GETWORKITEM="WorkItemForm.GetWorkItems",n.WORKITEMFORM_BINDWORKITEM="WorkItemForm.BindWorkItem",n.WORKITEMFORM_UNBINDWORKITEM="WorkItemForm.UnBindWorkItem",n.WORKITEMTRACKING_GETPROJECTS_REQUEST="WorkItemTracking.GetProjects.Request",n.WORKITEMTRACKING_GETTYPES="WorkItemTracking.GetTypes",n.WORKITEMTRACKING_GETTYPES_REQUEST="WorkItemTracking.GetTypes.Request",n.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST="WorkItemTracking.GetTypeExtensions.Request",n.WORKITEMTRACKING_GETCONSTANTSETS="WorkItemTracking.GetConstantSets",n.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST="WorkItemTracking.GetConstantSets.Request",n.WORKITEMTRACKING_GETLINKTYPES_REQUEST="WorkItemTracking.GetLinkTypes.Request",n.WORKITEMTRACKING_GETREGISTEREDLINKFORMTYPES="WorkItemTracking.GetRegisteredLinkFormTypes",n.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMAPI="WorkItemTracking.GetMetadataCacheStamp.FromApi",n.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMPAGEDATA="WorkItemTracking.GetMetadataCacheStamp.FromPageData",n.WORKITEMTRACKING_GETNODES_REQUEST="WorkItemTracking.GetNodes.Request",n.WORKITEMTRACKING_GETFIELDS_REQUEST="WorkItemTracking.GetFields.Request",n.WORKITEMTRACKING_GETFIELDS_PROCESS="WorkItemTracking.GetFields.Process",n.WORKITEMTRACKING_GETLAYOUTUSERSETTINGS_REQUEST="WorkItemTracking.GetLayoutUserSettings.Request",n.WORKITEMTRACKING_UPDATE_AJAX="WorkItemTracking.Update.Ajax",n.WORKITEMTRACKING_TAKEUPDATERESULT="WorkItemTracking.TakeUpdateResult",n.WORKITEMTRACKING_EVALUATELINKUPDATES="WorkItemTracking.EvaluateLinkUpdates",n.WORKITEMTRACKING_RESETAFTERSAVE="WorkItemTracking.ResetAfterSave",n.WORKITEMTRACKING_CACHING="WorkItemTracking.Caching",n.WORKITEMSVIEW_INITIALIZE="WorkItemsView.Initialize",n.WORKITEMSVIEW_ENSUREVIEW="WorkItemsView.EnsureView",n.WORKITEMSVIEW_NAVIGATE="WorkItemsView.Navigate",n.WORKITEMSVIEW_GETQUERY="WorkItemsView.GetQuery",n.WORKITEMSVIEW_GETQUERYPROVIDER="WorkItemsView.GetQueryProvider",n.WORKITEMSVIEW_CREATELAYOUT="WorkItem.WorkItemView.CreateLayout",n.WORKITEMSVIEW_RENDERLAYOUT_CREATELABELANDTABS="WorkItem.WorkItemView.RenderLayout.CreateLabelAndTabs",n.WORKITEMSVIEW_RENDERLAYOUT_CREATECONTROLS="WorkItem.WorkItemView.RenderLayout.CreateControls",n.WORKITEMSVIEW_RENDERLAYOUT_TABIFYLAYOUT="WorkItem.WorkItemView.RenderLayout.TabifyLayout",n.WORKITEMSVIEW_APPENDELEMENT="WorkItem.WorkItemView.AppendElement",n.WORKITEMSVIEW_BIND="WorkItem.WorkItemView.Bind",n.WORKITEMSVIEW_BIND_CONTRIBUTIONS="WorkItem.WorkItemView.Bind.Contributions",n.WORKITEMSVIEW_BIND_EVENTS="WorkItem.WorkItemView.Bind.Events",n.WORKITEMSVIEW_ONRENDER="WorkItem.WorkItemView.OnRender",n.WORKITEMSVIEW_ATTACHLAYOUT="WorkItem.WorkItemView.AttachLayout",n.TRIAGEVIEW_QUERYRESULT="TriageView.QueryResult",n.TRIAGEVIEW_ENTER="TriageView.Enter",n.TRIAGEVIEW_AHOCREQUIRE_TRIAGEVIEW="TriageView.AdhocRequire.TriageView",n.TRIAGEVIEW_AHOCREQUIRE_QUERYRESULTINFOBAR="TriageView.AdhocRequire.QueryResultInfoBar",n.TRIAGEVIEW_ENSUREWORKITEMFORMMODULE="TriageView.EnsureWorkItemFormModule",n.QUERYHIERARCHY_POPULATE="QueryHierarchy.Populate",n.QUERYHIERARCHY_GETQUERYFAVORITES_REQUEST="QueryHierarchy.GetQueryFavorites.Request",n.QUERYHIERARCHY_POPULATEFOLDERTREE="QueryHierarchy.PopulateFolderTree",n.QUERYHIERARCHY_GETHIERARCHY_REQUEST="QueryHierarchy.GetHierarchy.Request",n.QUERYHIERARCHY_UPDATEFROMDATA="QueryHierarchy.UpdateFromData",n.QUERYHIERARCHY_ENSUREITEMINTREE="QueryHierarchy.EnsureItemInTree",n.QUERYHIERARCHY_BEGINGETQUERYBYPATHORID_REQUEST="QueryHierarchy.BeginGetQueryByIdOrPath.Request",n.QUERY_UPDATEADHOCQUERY_REQUEST="Query.UpdateAdHocQuery.Request",n.QUERY_UPDATEQUERY_REQUEST="Query.UpdateQuery.Request",n.QUERY_CREATEQUERY_REQUEST="Query.CreateQuery.Request",n.QUERY_GETQUERYTEXT="Query.GetQueryText",n.QUERIESHUB_INITIALIZE_QUERIESHUBCONTEXT="QueriesHub.Initialize.QueriesHubContext",n.QUERIESHUB_ACTIONS_GETALLQUERYITEMS_REQUEST="QueriesHub.Actions.GetAllQueryItems.Request",n.QUERIESHUB_ACTIONS_GETFAVORITEQUERYITEMS_REQUEST="QueriesHub.Actions.GetFavoriteQueryItems.Request",n.QUERIESHUB_ACTIONS_ENSUREROOTFOLDERS_REQUEST="QueriesHub.Actions.EnsureRootFolders.Request",n.QUERIESHUB_ACTIONS_ENSUREQUERYITEM_REQUEST="QueriesHub.Actions.EnsureQueryItem.Request",n.QUERIESHUB_ACTIONS_SEARCHQUERYITEMS_REQUEST="QueriesHub.Actions.SearchQueryItems.Request",n.QUERIESHUB_TRIAGEVIEW_COMPONENT_MOUNT="QueriesHub.TriageView.Component.Mount",n.QUERIESHUB_QUERYRESULTSPIVOT_COMPONENT_MOUNT="QueriesHub.QueryResultsPivot.Component.Mount",n.QUERIESHUB_QUERIESVIEW_COMPONENT_MOUNT="QueriesHub.QueriesView.Component.Mount",n.QUERIESHUB_QUERIESPIVOT_COMPONENT_MOUNT="QueriesHub.QueriesPivot.Component.Mount",n.QUERIESHUB_STORES_ACTIVEQUERYVIEWSTORE_CHANGEQUERYVIEW="QueriesHub.Stores.ActiveQueryViewStore.ChangeQueryView",n.QUERIESHUB_STORES_QUERYFAVORITEGROUPSTORE_INITIALIZEQUERYFAVORITEGROUPS="QueriesHub.Stores.QueryFavoriteGroupStore.InitializeQueryFavoriteGroups",n.QUERIESHUB_STORES_QUERYHIERARCHYITEMSTORE_INITIALIZEQUERYHIERARCHYITEM="QueriesHub.Stores.QueryHierarchyItemStore.InitializeQueryHierarchyItem",n.QUERIESHUB_STORES_QUERYHIERARCHYSTORE_INITIALIZEQUERYHIERARCHY="QueriesHub.Stores.QueryHierarchyStore.InitializeQueryHierarchy",n.QUERIESHUB_STORES_QUERYRESULTSPROVIDERSTORE_CHANGEQUERYRESULTSPROVIDER="QueriesHub.Stores.QueryResultsProviderStore.ChangeQueryResultsProvider",n}();t.PerformanceEvents=o;s=function(){function n(){}return n.VIEWTYPE_QUERY="Query",n}();t.CustomerIntelligencePropertyValue=s;t.SHORTCUT_KEYDOWN="keydown";t.BUTTON_CLICKED="buttonClick"});

define("WorkItemTracking/Scripts/Utils/WitControlMode",["require","exports","VSS/Diag","VSS/FeatureAvailability/Services","q","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/Service","VSS/Contributions/Services","VSS/WebApi/Constants"],function(n,t,i,r,u,f,e,o,s){function a(n){return n.configuration&&n.configuration.getMailSettings().enabled}function v(){return r.FeatureAvailabilityService.isFeatureEnabled("WebAccess.WorkItemTracking.MentionsReplyAll",!1)}function y(){return r.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.WebAccessWorkItemTrackingFormCommentServiceEditAndDeleteEnable,!1)}function p(){return r.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.WebAccessWorkItemTrackingEnableCommentReactions,!1)}function w(){return r.FeatureAvailabilityService.isFeatureEnabled("WebAccess.WorkItemTracking.Form.Comments.QuoteReply.Enabled",!1)}function b(){return r.FeatureAvailabilityService.isFeatureEnabled("WebAccess.WorkItemTracking.Form.CommentService.SharedUI.Enabled",!1)}function k(){return r.FeatureAvailabilityService.isFeatureEnabled("WebAccess.WorkItemTracking.EnableHtmlFieldsMentions",!1)}Object.defineProperty(t,"__esModule",{value:!0});t.isHtmlFieldsMentionsEnabled=t.useSharedCommentsUIEnabled=t.isQuoteReplyEnabled=t.isCommentReactionsEnabled=t.isNewCommentsServiceEditAndDeleteEnabled=t.isMentionsReplyAllEnabled=t.isFollowWorkItemEnabled=t.WitFormModeUtility=void 0;var h="ms.vss-work-web.work-item-layout-user-settings-data-provider",c="ms.vss-work-web.work-item-common-configuration-data-provider",l=function(){function n(){}return Object.defineProperty(n,"maxAttachmentSize",{get:function(){return n.settings.maxAttachmentSize},enumerable:!1,configurable:!0}),n.ensureWitFormModeLoaded=function(){if(n.loadLayoutPropertiesFromPageData(),n._shouldFetchData()){i.timeStamp("WorkItemOM.isNewFormEnabledCallback",i.StampEvent.Enter);var t=e.getService(o.WebPageDataService);return t.ensureDataProvidersResolved([{id:h,properties:{serviceInstanceType:s.ServiceInstanceTypes.TFS}},{id:c,properties:{serviceInstanceType:s.ServiceInstanceTypes.TFS}}]).then(function(){i.timeStamp("WorkItemOM.isNewFormEnabledCallback",i.StampEvent.Leave);n.loadLayoutPropertiesFromPageData()},function(){i.timeStamp("WorkItemOM.isNewFormEnabledCallback",i.StampEvent.Leave)})}return u(null)},n._shouldFetchData=function(){return!n.maxAttachmentSize},n.loadLayoutPropertiesFromPageData=function(){var t=e.getService(o.WebPageDataService),i=t.getPageData(h),r=t.getPageData(c);n.settings=__assign(__assign({},r),i)},n.settings={},n}();t.WitFormModeUtility=l;t.isFollowWorkItemEnabled=a;t.isMentionsReplyAllEnabled=v;t.isNewCommentsServiceEditAndDeleteEnabled=y;t.isCommentReactionsEnabled=p;t.isQuoteReplyEnabled=w;t.useSharedCommentsUIEnabled=b;t.isHtmlFieldsMentionsEnabled=k});

define("WorkItemTracking/Scripts/Utils/PerfScenarioManager",["require","exports","VSS/Diag","VSS/Events/Services","VSS/Performance","VSS/Utils/String","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Utils/WitControlMode"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.PerfScenarioManager=void 0;var s=function(){function n(){}return n.startScenario=function(t,i){return n.startScenarioWithOptions(t,{fromPageNavigation:i,isPageInteractive:i})},n.startScenarioWithOptions=function(t,i){t=n._appendSuffixIfMobile(t);n.abortScenario(t);var f=i.fromPageNavigation,s=f===void 0?!1:f,e=i.isPageInteractive,o=e===void 0?!1:e,r;return r=s?u.getScenarioManager().startScenarioFromNavigation(n._featureArea,t,o):u.getScenarioManager().startScenario(n._featureArea,t,undefined,o),n.addSplitTiming(r.getName(),!0),r},n.addSplitTiming=function(t,r,u,f){var e,o;u===void 0&&(u=!0);f===void 0&&(f=!0);e=r?"".concat(t,".Start"):"".concat(t,".Complete");n._addSplitTiming(e,f);u&&(o=r?i.StampEvent.Enter:i.StampEvent.Leave,i.timeStamp(t,o))},n.addSinglePointSplitTiming=function(t,r,u){r===void 0&&(r=!0);u===void 0&&(u=!0);n._addSplitTiming(t,u);r&&i.timeStamp(t,i.StampEvent.SinglePoint)},n._addSplitTiming=function(t,i){var o,r,f,e;if(i)for(o=n._getWitScenarios(),r=0,f=o;r<f.length;r++)e=f[r],e.isActive()&&e.addSplitTiming(t);else u.getScenarioManager().split(t)},n.addData=function(t){n._getWitScenarios().forEach(function(n){n.isActive()&&n.addData(t)})},n.abortScenario=function(t){for(var i,f=n._getScenarios(t),r=0,u=f;r<u.length;r++)i=u[r],i.isActive()&&(n.addSplitTiming(i.getName(),!1),i.abort())},n.endScenario=function(t,i){for(var f,e=n._getScenarios(t),o=function(t){if(t.isActive()){var r=t.getName();i&&t.addData(i);n.addSplitTiming(t.getName(),!1);t.end().then(function(){return n._fireScenarioCompletedEvents(r)})}},r=0,u=e;r<u.length;r++)f=u[r],o(f)},n.isScenarioActive=function(t){var i=n._getScenarios(t);return i&&i.some(function(n){return n&&n.isActive()})},n._getScenarios=function(t){t=n._appendSuffixIfMobile(t);var i=u.getScenarioManager().getScenarios(n._featureArea,t);return i.concat(u.getScenarioManager().getScenarios(n._featureArea,t))},n._getWitScenarios=function(){var t=[],r,i;for(r in e.WITPerformanceScenario)e.WITPerformanceScenario.hasOwnProperty(r)&&(i=e.WITPerformanceScenario[r],i=n._appendSuffixIfMobile(i),t=t.concat(u.getScenarioManager().getScenarios(n._featureArea,i)),t=t.concat(u.getScenarioManager().getScenarios(n._featureArea,i)));return t},n._appendSuffixIfMobile=function(t){return o.WitFormModeUtility.isMobileForm?"".concat(t).concat(n._mobileSuffix):t},n._fireScenarioCompletedEvents=function(n){f.startsWith(n,e.WITPerformanceScenario.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS)?r.getService().fire(e.WITPerformanceScenarioEvent.QUERIESHUB_TRIAGEVIEW_OPENQUERYRESULTS_COMPLETE,this):f.startsWith(n,e.WITPerformanceScenario.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM)&&r.getService().fire(e.WITPerformanceScenarioEvent.QUERIESHUB_TRIAGEVIEW_OPENWORKITEM_COMPLETE,this)},n._featureArea=e.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,n._mobileSuffix=".Mobile",n}();t.PerfScenarioManager=s});

define("WorkItemTracking/Scripts/OM/DataSources/MvcDataSource",["require","exports","WorkItemTracking/Scripts/Utils/PerfScenarioManager","Presentation/Scripts/TFS/TFS.Legacy.Ajax","WorkItemTracking/Scripts/CustomerIntelligence","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemMvcClient=void 0;var s=function(){function n(n,t){this._tfsContext=n;this._cacheStampManager=t}return n.prototype.beginGetWorkItemData=function(n,t,i,r,u){var f=u?"workitems":"workitemsnohistory",o={controller:"wit",action:f};return(new e.WorkItemStoreLevelWITDataSource).postDataAsync(o,{ids:t,isDeleted:i,includeInRecentActivity:r,includeHistory:u}).then(function(n){return n.data})},n.prototype.beginGetLinkTypes=function(){var n=this;return new Promise(function(t,r){n._cacheStampManager.addStampToParams(f.WITCommonConstants.LinkTypes,null,function(f){(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync({controller:"wit",action:"linkTypes"},f,n._tfsContext.navigation.collection.instanceId,o.WITCommonConstants.LinkTypes,"_").then(function(n){var r;n.requestHeaders&&i.PerfScenarioManager.addData((r={},r["".concat(u.PerformanceEvents.WORKITEMTRACKING_GETLINKTYPES_REQUEST,".ETAG")]=n.requestHeaders.getResponseHeader("ETag"),r["".concat(u.PerformanceEvents.WORKITEMTRACKING_GETLINKTYPES_REQUEST,".DATE")]=n.requestHeaders.getResponseHeader("Date"),r));t(n.data)},r)})})},n.prototype.beginGetWorkItemTypeData=function(n,t){var r=this;return new Promise(function(o,s){r._cacheStampManager.addStampToParams(f.WITCommonConstants.WorkItemTypes,{typeNames:t,projectId:n},function(t){i.PerfScenarioManager.addSplitTiming(u.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,!0);var r={controller:"wit",action:"workItemTypes",routeData:{project:n}};(new e.WorkItemStoreLevelWITDataSource).getDataAsync(r,t).then(function(n){var t;n.requestHeaders&&i.PerfScenarioManager.addData((t={},t["".concat(u.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,".ETAG")]=n.requestHeaders.getResponseHeader("ETag"),t["".concat(u.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,".DATE")]=n.requestHeaders.getResponseHeader("Date"),t));i.PerfScenarioManager.addSplitTiming(u.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,!1);o(n.data)},s)},n)})},n.prototype.beginGetFieldProjectData=function(n){var t=this;return new Promise(function(i,r){t._cacheStampManager.addStampToParams(f.WITCommonConstants.TeamProjects,{includeFieldDefinitions:!0,namesOrIds:[n]},function(t){var u={controller:"wit",action:"teamProjects",routeData:{project:n}};(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync(u,t,n,o.WITCommonConstants.TeamProjects,n).then(function(n){i(n.data)},function(n){r(n)})})})},n.prototype.beginGetFields=function(){var n=this;return new Promise(function(t,i){n._cacheStampManager.addStampToParams(f.WITCommonConstants.Fields,null,function(u){r.getMSJSON(n._getApiLocation(undefined,"fields"),u,function(n){t(n)},function(n){i(n)})})})},n.prototype._getApiLocation=function(n,t,i){return this._tfsContext.getActionUrl(t||"","wit",$.extend({project:n,team:"",area:"api"},i))},n}();t.WorkItemMvcClient=s});

define("WorkItemTracking/Scripts/OM/DataSources/index",["require","exports","WorkItemTracking/Scripts/OM/DataSources/DataProviderDataSource","WorkItemTracking/Scripts/OM/DataSources/QueryDataProviderDataSource","WorkItemTracking/Scripts/OM/DataSources/MvcDataSource"],function(n,t,i,r,u){function f(n,t,f){var e=[];return window.LWL&&(e.push(new i.WorkItemDataProviderSource(f)),e.push(new r.QueryDataProviderSource)),e.push(new u.WorkItemMvcClient(n,t)),e}Object.defineProperty(t,"__esModule",{value:!0});t.getDataSources=void 0;t.getDataSources=f});

define("WorkItemTracking/Scripts/OM/DataSources/WorkItemTypeCategoriesDataSource",["require","exports","Presentation/Scripts/TFS/TFS.Legacy.Ajax","q","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","TFS/WorkItemTracking/RestClient","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/WorkItemIndexDBCacheManager","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o,s,h,c){function l(n,t){return __awaiter(this,void 0,void 0,function(){var l,v,p,r,e,y,i,w,b,k;return __generator(this,function(d){switch(d.label){case 0:return u.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.DisableWorkItemStoreDataProviders)?[4,a(n,t)]:[3,2];case 1:return[2,d.sent()];case 2:return l=new s.WorkItemIndexDBCacheManager,[4,l.getDataFromCache(n,"workItemTypeCategories","_",t?t.stamp:null)];case 3:return(v=d.sent(),!v)?[3,4]:[2,v];case 4:return[4,o.getClient().getWorkItemTypeCategories(n)];case 5:for(p=d.sent(),r={},e=0,y=p;e<y.length;e++)i=y[e],w=i.workItemTypes.map(function(n){return n.name}),b={defaultWorkItemTypeName:i.defaultWorkItemType.name,name:i.name,referenceName:i.referenceName,workItemTypeNames:w},r[i.referenceName]=b;d.label=6;case 6:return d.trys.push([6,8,,9]),[4,l.cacheData(n,"workItemTypeCategories","_",r,t?t.stamp:null)];case 7:return d.sent(),[3,9];case 8:return k=d.sent(),h.traceMessage(c.WITCommonConstants.WorkItemTrackingArea,"CacheData",c.WITCommonConstants.WitCacheProviderInit,k),[3,9];case 9:return[2,r]}})})}function a(n,t){var f=e.TfsContext.getDefault().getActionUrl("workItemTypeCategories","wit",{project:n,area:"api",team:""}),u=r.defer(),o=function(n){u.resolve(n)};return i.getMSJSON(f,t,o,u.reject),u.promise}Object.defineProperty(t,"__esModule",{value:!0});t.beginGetWorkItemTypeCategories=void 0;t.beginGetWorkItemTypeCategories=l});

define("Presentation/Scripts/TFS/TFS.Service",["require","exports","VSS/Service","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Context","VSS/Common/Contracts/Platform"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.TfsService=void 0;var e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this.tfsConnection=t},t.prototype.getTfsContext=function(){if(!this._tfsContext){var n=this.getWebContext();this._tfsContext=n===u.getDefaultWebContext()?r.TfsContext.getDefault():new r.TfsContext(n)}return this._tfsContext},t.prototype.getCurrentServiceHost=function(){var n=this.getTfsContext(),t=this.getConnection().getHostType();return t===f.ContextHostType.ProjectCollection?n.navigation.collection:t===f.ContextHostType.Application?n.navigation.applicationServiceHost:n.navigation.serviceHost},t}(i.VssService);t.TfsService=e});

define("Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon",["require","exports","VSS/VSS","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","Presentation/Scripts/TFS/TFS.Service","VSS/Diag","VSS/Events/Services","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource"],function(n,t,i,r,u,f,e,o,s,h,c){var v,w,l,a,b,y,p;Object.defineProperty(t,"__esModule",{value:!0});t.TeamService=t.ProjectProcessConfigurationService=t.BugsBehavior=t.ProjectProcessConfiguration=t.BacklogCategoryConfiguration=t.INodeStructureType=t.StateType=void 0,function(n){n[n.Proposed=1]="Proposed";n[n.InProgress=2]="InProgress";n[n.Complete=3]="Complete";n[n.Requested=4]="Requested";n[n.Received=5]="Received";n[n.Reviewed=6]="Reviewed";n[n.Declined=7]="Declined";n[n.Resolved=8]="Resolved"}(v=t.StateType||(t.StateType={})),function(n){n[n.Project=0]="Project";n[n.Area=1]="Area";n[n.Iteration=2]="Iteration"}(w=t.INodeStructureType||(t.INodeStructureType={}));l=function(){function n(n){this.plural=n.plural;this.singular=n.singular;this.category=n.category;this.parentCategory=n.parentCategory;this.workItemCountLimit=n.workItemCountLimit;this.states=n.states}return n.prototype.containsWorkItemType=function(n){return e.contains(this.workItemTypeNames,n,f.localeIgnoreCaseComparer)},n}();t.BacklogCategoryConfiguration=l;a=function(){function n(n){var t=this,i;this.taskBacklog=new l(n.taskBacklog);this.requirementBacklog=new l(n.requirementBacklog);this.portfolioBacklogs=$.map(n.portfolioBacklogs,function(n){return new l(n)});this.allBacklogs=this.portfolioBacklogs.concat([this.requirementBacklog,this.taskBacklog]);this._workItemTypeCategoryMap={};this._backlogCategoryNameMap={};this._workItemCategoryStateNameTypeMap={};this.workItemCategories=n.workItemCategories;i=null;$.each(this.allBacklogs,function(r,u){i!==null&&(i.child=u,u.parent=i);i=u;u.workItemTypeNames=n.workItemCategories[u.category];u.isRequirementCategory=u===t.requirementBacklog;u.defaultWorkItemType=n.defaultWorkItemTypes[u.category];$.each(u.workItemTypeNames||[],function(n,i){t._workItemTypeCategoryMap[i]=u.category});t._backlogCategoryNameMap[u.category]=u});this.bugWorkItems=n.bugWorkItems;this.bugWorkItems&&(this.bugWorkItems.workItemTypeNames=n.workItemCategories[this.bugWorkItems.category],$.each(this.bugWorkItems.workItemTypeNames,function(n,i){t._workItemTypeCategoryMap[i]||(t._workItemTypeCategoryMap[i]=t.bugWorkItems.category)}));this.typeFields=n.typeFields;this.weekends=n.weekends;n.workItemColors&&(this.workItemColors=$.map(n.workItemColors,function(n){return{primaryColor:n.primary,secondaryColor:n.secondary,workItemTypeName:n.name}}))}return n.prototype.getCategoryForWorkItemType=function(n){return this._workItemTypeCategoryMap[n]},n.prototype.getCategoryForCategoryRefName=function(n){return this._backlogCategoryNameMap[n]},n.prototype.getTypeField=function(n){return e.first(this.typeFields,function(t){return t.type===n})},n.prototype.isRequirementCategory=function(n){return this.requirementBacklog&&this.requirementBacklog.containsWorkItemType(n)},n.prototype.isTaskCategory=function(n){return this.taskBacklog&&this.taskBacklog.containsWorkItemType(n)},n.prototype.isBugCategory=function(n){return this.bugWorkItems&&this.bugWorkItems.workItemTypeNames&&e.contains(this.bugWorkItems.workItemTypeNames,n,f.localeIgnoreCaseComparer)},n.StateType=v,n.FieldType={Effort:1,Order:2,RemainingWork:3,Team:4,Activity:5,Requestor:6,ApplicationType:7,ApplicationStartInformation:8,ApplicationLaunchInstructions:9,FeedbackNotes:10,ClosedDate:11},n}();t.ProjectProcessConfiguration=a,function(n){n[n.Off=0]="Off";n[n.AsRequirements=1]="AsRequirements";n[n.AsTasks=2]="AsTasks"}(b=t.BugsBehavior||(t.BugsBehavior={}));y=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.beginGetProcessSettings=function(n,t,r){var u=this,o=function(t){u._processSettings||(u._processSettings=new a(t));n.apply(u,[u._processSettings])},e,f;this._checkDataIsland();e=this.getTfsContext().contextData.project.id;f={area:"api",project:e};r&&(f=$.extend(r,f));i.queueRequest(this,this,"_processSettingsInternal",o,t,function(n,t){function r(t){i._fireProcessSettingsLoaded(t);n.apply(this,arguments)}var i=u,e={controller:"processConfiguration",action:"getProcessSettings",routeData:f};(new c.WebAccessBoardsWITDataSource).getDataAsync(e,null,null).then(function(n){r(n.data)},t)})},t.prototype._checkDataIsland=function(){var n;this._checkedForDataIsland||(this._checkedForDataIsland=!0,n=$(".process-settings-data"),n.length>0&&(this._processSettingsInternal=u.parseMSJSON(n.eq(0).html(),!1),n.eq(0).empty(),this._fireProcessSettingsLoaded(this._processSettingsInternal)))},t.prototype.getProcessSettings=function(){return this._checkDataIsland(),!this._processSettings&&this._processSettingsInternal&&(this._processSettings=new a(this._processSettingsInternal)),this._processSettings},t.prototype._fireProcessSettingsLoaded=function(n){h.getService().fire(t.PROCESS_SETTINGS_LOADED_EVENT,n)},t.PROCESS_SETTINGS_LOADED_EVENT="ProcessConfigService.SettingsLoaded",t}(o.TfsService);t.ProjectProcessConfigurationService=y;p=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._teamMembers={},t}return __extends(t,n),t.prototype.beginGetTeamMembers=function(n,t,u,f,e){var h,o=this.getTfsContext();n||(n=o.currentTeam.identity.id);u=u||100;t=Boolean(t);h=n+"|"+u+"|"+t;i.queueRequest(this,this._teamMembers,h,f,e,function(i,f){var e=o.getActionUrl("members","teams",{area:"api"});r.getMSJSON(e,{teamId:n,maxResults:u,includeGroups:t},function(n){i(n.members)},f)})},t}(o.TfsService);t.TeamService=p});

define("WorkItemTracking/Scripts/Utils/NodeHelpers",["require","exports","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","TFS/WorkItemTracking/Contracts"],function(n,t,i,r){var f,u;Object.defineProperty(t,"__esModule",{value:!0});t.ClassificationNodeTypeConstants=t.NodeHelpers=void 0,function(n){function f(t){var i,r,u;if(t.children)for(i=0,r=t.children;i<r.length;i++)u=r[i],u.parent=t,n.link(u);return t}function e(n,t){var f=n.children,i,r,u;if(f)for(i=0,r=f;i<r.length;i++)if(u=r[i],u.structure===t)return u;return null}function o(t,i){var r,u,e,f;if(t){if(t.id===i)return t;if(t.children)for(r=0,u=t.children;r<u.length;r++)if(e=u[r],f=n.findById(e,i),f)return f}return null}function s(t,i){var r,u,e,f;if(t){if(t.guid===i)return t;if(t.children)for(r=0,u=t.children;r<u.length;r++)if(e=u[r],f=n.findByGuid(e,i),f)return f}return null}function h(n,t,i,r){var o=0,f,s,l=0,u,e,h,c;if(i!=null&&r==null)throw new Error("ArgumentNullError: stuctureType must be provided if structureLevel is provided");if(!n||!t)return null;for(t=t.replace(/^(\s|\u00A0|\\)+|(\s|\u00A0|\\)+$/g,""),c=t.toUpperCase().split("\\"),u=[n];u&&u.length>0&&o<c.length;){if(h=null,i!=null&&l++===i){for(e=[],f=0,s=u.length;f<s;f++)if(u[f].structure===r){e=u[f].children||[];break}u=e;continue}for(e=null,f=0,s=u.length;f<s;f++)if(u[f].name.toUpperCase()===c[o]){h=u[f];e=h.children;o++;break}u=e}return o===c.length?h:null}function c(n,t){for(var i=[];n;)i.unshift(n.name),n=n.parent;return typeof t=="number"&&i.splice(t,1),i}function l(n){var t=n.split("\\");return t.unshift(t[0]),t}function a(t,i){var r=n.getNodeSegments(t,i);return r.join("\\")}function v(n){return n.split("\\").slice(1).join("\\")}function t(n){var e=n.attributes?n.attributes.startDate:null,o=n.attributes?n.attributes.finishDate:null,f,s,h,c;if(e=typeof e=="string"?new Date(e):e,o=typeof o=="string"?new Date(o):o,f={id:n.id,structure:null,startDate:e,children:[],finishDate:o,guid:n.identifier,name:n.name,parent:null,type:null},n.structureType===r.TreeNodeStructureType.Area?(f.structure=i.INodeStructureType.Area,f.type=u.AreaType):n.structureType===r.TreeNodeStructureType.Iteration&&(f.structure=i.INodeStructureType.Iteration,f.type=u.IterationType),n.children)for(s=0,h=n.children;s<h.length;s++)c=h[s],f.children.push(t(c));return f}n.link=f;n.findChildByStructure=e;n.findById=o;n.findByGuid=s;n.findByPath=h;n.getNodeSegments=c;n.getReferencedNodeSegmenets=l;n.getPath=a;n.getRelativePath=v;n.mapClassificationNodesToLegacyNode=t}(f=t.NodeHelpers||(t.NodeHelpers={})),function(n){n[n.ProjectType=-42]="ProjectType";n[n.AreaType=-43]="AreaType";n[n.IterationType=-44]="IterationType"}(u=t.ClassificationNodeTypeConstants||(t.ClassificationNodeTypeConstants={}))});

define("WorkItemTracking/Scripts/OM/NodesCacheManager",["require","exports","VSS/VSS","VSS/Service","VSS/Navigation/Services","VSS/Diag","WorkItemTracking/Scripts/Utils/NodeHelpers","WorkItemTracking/Scripts/CustomerIntelligence","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/Utils/PerfScenarioManager","Presentation/Scripts/TFS/TFS.Legacy.Ajax","q","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","TFS/WorkItemTracking/RestClient","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k){Object.defineProperty(t,"__esModule",{value:!0});t.NodesCacheManager=void 0;var d=function(){function n(n){this._referencedNodes={byId:{},byAreaPath:{},byIterationPath:{}};this._project=n;var t={id:this._project.id,name:this._project.name,path:this._project.name};this._referencedNodes.byId[t.id]=this._referencedNodes.byAreaPath[t.path]=this._referencedNodes.byIterationPath[t.path]=t}return n.prototype.addReferencedNodes=function(n){var i,u,r,f,t;if(n){for(i=0,u=n.areaNodes;i<u.length;i++)t=u[i],this._referencedNodes.byId[t.id]=this._referencedNodes.byAreaPath[t.path]=t;for(r=0,f=n.iterationNodes;r<f.length;r++)t=f[r],this._referencedNodes.byId[t.id]=this._referencedNodes.byIterationPath[t.path]=t}},n.prototype.getReferencedNode=function(n){var t,u,o;if(typeof n=="number")t=n;else if(typeof n=="object")var e=n,i=e.path,r=e.nodeType;if(this.isNodesCacheAvailable()){if(typeof t=="number")return this.findNodeById(t);if(i&&r)return r===1?this.findAreaNodeByPath(i):this.findIterationNodeByPath(i)}return(r?(o=r===1?this._referencedNodes.byAreaPath:this._referencedNodes.byIterationPath,u=o[i]):u=this._referencedNodes.byId[t],u)?u:(f.Debug.logInfo("Could not find a node cache for ".concat(t?t:"".concat(i," (type: ").concat(r,")"))),null)},n.prototype.clearCache=function(){this._iterationNode=null;this._areaNode=null;this._nodes=null},n.prototype.getNodes=function(){if(this.isNodesCacheAvailable())return this._nodes;f.Debug.fail("Project nodes are not ready yet. Use beginGetNodes to download from the server.")},n.prototype.isNodesCacheAvailable=function(){return this._nodes&&typeof this._nodes!="function"},n.prototype.refreshCache=function(){var t=this,n;return this.clearCache(),n=b.TfsContext.getDefault().navigation.projectId,this._project.store.metadataCacheStampManager.ensureStampsForCurrentProject(n,!0).then(function(){return t.beginGetNodes()})},n.prototype.beginGetNodes=function(){var n=u.getHistoryService().getCurrentState().readonly,t=n||!y.FeatureAvailabilityService.isFeatureEnabled(p.FeatureAvailabilityFlags.DisableWorkItemStoreDataProviders);return t?this.beginGetNodesFromRestClient():this.beginGetNodesFromMvc()},n.prototype.beginGetNodesFromMvc=function(){var n=this,t=l.defer();return i.queueRequest(this,this,"_nodes",function(n){return t.resolve(n)},function(n){return t.reject(n)},function(t,i){n._project.store.metadataCacheStampManager.addStampToParams(s.WITCommonConstants.Nodes,null,function(r){h.PerfScenarioManager.addSplitTiming(o.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,!0);var u=function(f){c.getMSJSON(n._project.getApiLocation("nodes"),r,function(i,s,c){var l,y;if(i==null&&f){y={ErrorName:"NodesIsNullOrUndefined",projectName:n._project.name,urlParams:r};a.publishEvent(new a.TelemetryEventData(v.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,v.WITCustomerIntelligenceFeature.NODES_CACHE_MANAGER,y));r.forceInvalidateCache=(new Date).getTime().toString();u(!1);return}h.PerfScenarioManager.addData((l={},l["".concat(o.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,".ETAG")]=c.getResponseHeader("ETag"),l));h.PerfScenarioManager.addSplitTiming(o.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,!1);t(e.NodeHelpers.link(i))},i)};u(!0)})}),t.promise},n.prototype.beginGetNodesFromRestClient=function(){var n=this,t=l.defer();return i.queueRequest(this,this,"_nodes",function(n){return t.resolve(n)},function(n){return t.reject(n)},function(t,i){h.PerfScenarioManager.addSplitTiming(o.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,!0);var f=r.getClient(w.WorkItemTrackingHttpClient4),u={id:n._project.id,name:n._project.name,guid:n._project.guid,structure:0,type:e.ClassificationNodeTypeConstants.ProjectType,children:[]};f.getRootNodes(n._project.name,15).then(function(i){for(var r,f=0,o=i;f<o.length;f++)r=o[f],r.hasChildren&&(r.children=n.sortNodes(r.children)),u.children.push(e.NodeHelpers.mapClassificationNodesToLegacyNode(r));e.NodeHelpers.link(u);t(u)},function(n){i(n.message)})}),t.promise},n.prototype.sortNodes=function(n){for(var i,t=0,r=n;t<r.length;t++)i=r[t],i.hasChildren&&(i.children=this.sortNodes(i.children));return n.sort(this._compare)},n.prototype.findAreaNodeByPath=function(n){return e.NodeHelpers.findByPath(this.getNodes(),n,1,1)},n.prototype.findIterationNodeByPath=function(n){return e.NodeHelpers.findByPath(this.getNodes(),n,1,2)},n.prototype.findNodeById=function(n){return e.NodeHelpers.findById(this.getNodes(),n)},n.prototype.getAreaNode=function(n){return this._areaNode||(this._areaNode=e.NodeHelpers.findChildByStructure(this.getNodes(),1)),n?{id:this._project.id,name:this._project.name,guid:this._project.guid,structure:0,type:-42,children:this._areaNode.children}:this._areaNode},n.prototype.getIterationNode=function(n){return this._iterationNode||(this._iterationNode=e.NodeHelpers.findChildByStructure(this.getNodes(),2)),n?{id:this._project.id,name:this._project.name,guid:this._project.guid,structure:0,type:-42,children:this._iterationNode.children}:this._iterationNode},n.prototype._compare=function(n,t){var i=0,r=new Date(n.attributes?n.attributes.startDate:null),u=new Date(n.attributes?n.attributes.finishDate:null),f=new Date(t.attributes?t.attributes.startDate:null),e=new Date(t.attributes?t.attributes.finishDate:null);return i=(r.getTime()||Number.MAX_VALUE)-(f.getTime()||Number.MAX_VALUE),i===0&&(i=(u.getTime()||Number.MAX_VALUE)-(e.getTime()||Number.MAX_VALUE)),i===0&&(i=k.localeIgnoreCaseComparer(n.name||"",t.name||"")),i},n}();t.NodesCacheManager=d});

define("WorkItemTracking/Scripts/OM/WorkItemConstants",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d;Object.defineProperty(t,"__esModule",{value:!0});t.CoreLinkTypes=t.LinkTypeName=t.WorkItemPaneMode=t.PageSizes=t.BugWITFieldReferenceNames=t.WorkItemUpdateResultState=t.RelatedDataKeys=t.Actions=t.WorkItemCategoryConstants=t.FieldFlags=t.FieldUsages=t.RuleEvaluatorExecutionPhase=t.FieldStatusFlags=t.FieldStatus=t.Exceptions=t.WorkItemChangeType=t.ServerDefaultValueType=t.ExtensionConstants=void 0,function(n){n.LayoutUserSettingsProvider="ms.vss-work-web.work-item-layout-user-settings-data-provider";n.UnfollowsDataProvider="ms.vss-work-web.work-item-unfollows-data-provider"}(i=t.ExtensionConstants||(t.ExtensionConstants={})),function(n){n[n.None=0]="None";n[n.ServerDateTime=1]="ServerDateTime";n[n.CallerIdentity=2]="CallerIdentity";n[n.RandomGuid=3]="RandomGuid"}(r=t.ServerDefaultValueType||(t.ServerDefaultValueType={})),function(n){n.FieldChange="field-change";n.FieldAllowedValuesChange="field-allowed-values-change";n.PreSave="pre-save";n.Saving="saving";n.SaveCompleted="save-completed";n.Validating="validating";n.ValidationCompleted="validation-completed";n.Saved="saved";n.Opened="opened";n.Created="created";n.Refresh="refresh";n.Reset="reset";n.ErrorChanged="error-changed";n.Discarded="discarded";n.Deleted="deleted";n.ProjectChanging="project-changing";n.ProjectChanged="project-changed";n.TypeChanging="type-changing";n.TypeChanged="type-changed";n.WorkItemLinkChangedOutside="workitem-link-updated-outside"}(u=t.WorkItemChangeType||(t.WorkItemChangeType={})),function(n){n.OperationCanceledException="VSS.WorkItemTracking.OperationCanceledException";n.WorkItemBulkSaveException="VSS.WorkItemTracking.WorkItemBulkSaveException";n.ProjectDoesNotExistException="VSS.WorkItemTracking.ProjectDoesNotExistException";n.FieldDoesNotExistException="VSS.WorkItemTracking.FieldDoesNotExistException";n.LinkTypeEndDoesNotExistException="VSS.WorkItemTracking.LinkTypeEndDoesNotExistException";n.LinkTypeDoesNotExistException="VSS.WorkItemTracking.LinkTypeDoesNotExistException";n.WorkItemSaveFailedDueToInvalidStatusException="VSS.WorkItemTracking.WorkItemSaveFailedDueToInvalidStatusException";n.InvalidQuerySyntaxException="VSS.WorkItemTracking.InvalidQuerySyntaxException";n.InvalidQueryFilterRowException="VSS.WorkItemTracking.InvalidQueryFilterRowException";n.QueryItemAlreadyExistException="VSS.WorkItemTracking.QueryItemAlreadyExistException";n.QueryFolderDoesNotExistException="VSS.WorkItemTracking.QueryFolderDoesNotExistException";n.InvalidOperationException="System.InvalidOperationException"}(f=t.Exceptions||(t.Exceptions={})),function(n){n[n.Valid=0]="Valid";n[n.InvalidEmpty=1]="InvalidEmpty";n[n.InvalidNotEmpty=2]="InvalidNotEmpty";n[n.InvalidFormat=3]="InvalidFormat";n[n.InvalidListValue=4]="InvalidListValue";n[n.InvalidOldValue=5]="InvalidOldValue";n[n.InvalidNotOldValue=6]="InvalidNotOldValue";n[n.InvalidEmptyOrOldValue=7]="InvalidEmptyOrOldValue";n[n.InvalidNotEmptyOrOldValue=8]="InvalidNotEmptyOrOldValue";n[n.InvalidValueInOtherField=9]="InvalidValueInOtherField";n[n.InvalidValueNotInOtherField=10]="InvalidValueNotInOtherField";n[n.InvalidDate=11]="InvalidDate";n[n.InvalidTooLong=12]="InvalidTooLong";n[n.InvalidType=13]="InvalidType";n[n.InvalidComputedField=14]="InvalidComputedField";n[n.InvalidPath=15]="InvalidPath";n[n.InvalidCharacters=16]="InvalidCharacters";n[n.InvalidIdentity=17]="InvalidIdentity";n[n.InvalidUnknown=18]="InvalidUnknown"}(e=t.FieldStatus||(t.FieldStatus={})),function(n){n[n.None=0]="None";n[n.AllowsOldValue=64]="AllowsOldValue";n[n.HasFormats=16]="HasFormats";n[n.HasValues=4]="HasValues";n[n.InvalidCharacters=131072]="InvalidCharacters";n[n.InvalidComputedField=536870912]="InvalidComputedField";n[n.InvalidDate=8192]="InvalidDate";n[n.InvalidEmpty=524288]="InvalidEmpty";n[n.InvalidEmptyOrOldValue=33554432]="InvalidEmptyOrOldValue";n[n.InvalidFormat=2097152]="InvalidFormat";n[n.InvalidID=16384]="InvalidID";n[n.InvalidListValue=4194304]="InvalidListValue";n[n.InvalidMask=2147479552]="InvalidMask";n[n.InvalidNotEmpty=1048576]="InvalidNotEmpty";n[n.InvalidNotEmptyOrOldValue=67108864]="InvalidNotEmptyOrOldValue";n[n.InvalidNotOldValue=16777216]="InvalidNotOldValue";n[n.InvalidOldValue=8388608]="InvalidOldValue";n[n.InvalidPath=32768]="InvalidPath";n[n.InvalidRule=262144]="InvalidRule";n[n.InvalidTooLong=65536]="InvalidTooLong";n[n.InvalidType=4096]="InvalidType";n[n.InvalidValueInOtherField=134217728]="InvalidValueInOtherField";n[n.InvalidValueNotInOtherField=268435456]="InvalidValueNotInOtherField";n[n.LimitedToFormats=32]="LimitedToFormats";n[n.LimitedToValues=8]="LimitedToValues";n[n.ReadOnly=2]="ReadOnly";n[n.Required=1]="Required";n[n.SetByRule=128]="SetByRule";n[n.SetByDefaultRule=256]="SetByDefaultRule";n[n.SetByComputedRule=512]="SetByComputedRule";n[n.InvalidIdentityField=1073741824]="InvalidIdentityField"}(o=t.FieldStatusFlags||(t.FieldStatusFlags={})),function(n){n[n.DefaultRules=1]="DefaultRules";n[n.CopyRules=2]="CopyRules";n[n.OtherRules=3]="OtherRules"}(s=t.RuleEvaluatorExecutionPhase||(t.RuleEvaluatorExecutionPhase={})),function(n){n[n.None=0]="None";n[n.WorkItem=1]="WorkItem";n[n.WorkItemLink=2]="WorkItemLink";n[n.Tree=4]="Tree";n[n.WorkItemTypeExtension=8]="WorkItemTypeExtension"}(h=t.FieldUsages||(t.FieldUsages={})),function(n){n[n.None=0]="None";n[n.Sortable=1]="Sortable";n[n.Computed=2]="Computed";n[n.Editable=4]="Editable";n[n.Ignored=8]="Ignored";n[n.Queryable=16]="Queryable";n[n.Reportable=32]="Reportable";n[n.PersonField=64]="PersonField";n[n.Cloneable=128]="Cloneable";n[n.LongText=256]="LongText";n[n.SupportsTextQuery=512]="SupportsTextQuery"}(c=t.FieldFlags||(t.FieldFlags={})),function(n){n.HIDDEN="Microsoft.HiddenCategory";n.TEST_CASE="Microsoft.TestCaseCategory";n.TEST_PLAN="Microsoft.TestPlanCategory";n.TEST_SUITE="Microsoft.TestSuiteCategory";n.TEST_SHAREDSTEP="Microsoft.SharedStepCategory";n.TEST_SHAREDPARAMETER="Microsoft.SharedParameterCategory"}(l=t.WorkItemCategoryConstants||(t.WorkItemCategoryConstants={})),function(n){n.NEW_PROJECT_DATA="new-project-data";n.DISCUSSION_ADDED="discussion-added";n.DISCUSSION_DELETED="discussion-deleted";n.DISCUSSION_UPDATED="discussion-updated";n.RESET_DISCUSSION="reset-discussion";n.RESET_HISTORY="reset-history";n.DISCUSSION_EDIT_DIRTY_CHANGED="discussion-dirty-changed";n.DISCUSSION_COMMENT_UPDATED="discussion-comment-updated";n.WORKITEM_DELETED="workitem-deleted";n.WORKITEM_RESTORED="workitem-restored";n.WORKITEM_DESTROYED="workitem-destroyed";n.WORKITEM_DISCARDED="workitem-discarded";n.WORKITEM_ID_UPDATED="workitem-id-updated";n.WORKITEM_COPIED="workitem-copied"}(a=t.Actions||(t.Actions={})),function(n){n.HISTORY_OUTDATED="history-outdated";n.WORKITEM_MANAGER_KEY="workitem-manager"}(v=t.RelatedDataKeys||(t.RelatedDataKeys={})),function(n){n.NoResult="NoResult";n.Error="Error";n.Success="Success"}(y=t.WorkItemUpdateResultState||(t.WorkItemUpdateResultState={})),function(n){n.ReproSteps="Microsoft.VSTS.TCM.ReproSteps"}(p=t.BugWITFieldReferenceNames||(t.BugWITFieldReferenceNames={})),function(n){n.QUERY=200;n.SAVE=200}(w=t.PageSizes||(t.PageSizes={})),function(n){n.Off="off";n.Right="right";n.Bottom="bottom"}(b=t.WorkItemPaneMode||(t.WorkItemPaneMode={})),function(n){n.Child_Link_Name="System.LinkTypes.Hierarchy-Forward";n.Parent_Link_Name="System.LinkTypes.Hierarchy-Reverse";n.Related_Link_Name="System.LinkTypes.Related-Forward"}(k=t.LinkTypeName||(t.LinkTypeName={})),function(n){n[n.Related=1]="Related";n[n.Parent=-2]="Parent";n[n.Child=2]="Child";n[n.Predecessor=-3]="Predecessor";n[n.Successor=3]="Successor"}(d=t.CoreLinkTypes||(t.CoreLinkTypes={}))});

define("WorkItemTracking/Scripts/OM/WorkItemMetadataCookie",["require","exports"],function(n,t){function f(n){for(var e,t,o=[],f=0,s=Object.keys(n);f<s.length;f++)e=s[f],t=n[e],o.push([e,t.scopeId,t.stamp,Array.isArray(t.keys)&&t.keys.join(u)||t.keys].join(r));return encodeURIComponent(o.join(i))}function e(n){var t={},f=decodeURIComponent(n||"").split(i);return f.forEach(function(n){var i=n.split(r);if(i.length>2){var e=i[0],o=i[1],s=i[2],f=i[3].split(u);t[e]={scopeId:o,stamp:s,keys:f.length>0&&f||"_"}}}),t}Object.defineProperty(t,"__esModule",{value:!0});t.deserialize=t.serialize=void 0;var i="|",r=":",u=",";t.serialize=f;t.deserialize=e});

define("WorkItemTracking/Scripts/OM/WorkItemMetadataCacheInformationManager",["require","exports","Presentation/Scripts/TFS/TFS.Core.Utils","WorkItemTracking/Scripts/OM/WorkItemMetadataCookie","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/Core","VSS/Utils/String","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Service","VSS/Settings"],function(n,t,i,r,u,f,e,o,s,h){var c;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemMetadataCacheInformationManager=void 0;var a=432e3,l="WIT-METADATA",v=(c={},c[o.WITCommonConstants.TeamProjects.toLowerCase()]=!0,c[o.WITCommonConstants.LinkTypes.toLowerCase()]=!0,c[o.WITCommonConstants.WorkItemTypes.toLowerCase()]=!0,c),y=function(){function n(){}return n.prototype.persist=function(n,t,u,c){var p,y,w,d;if(this._shouldSetCookieForType(t)){var b=e.format(o.WorkItemTrackingMetadataCacheConstants.CookieFormat,n),k=s.getLocalService(h.LocalSettingsService),v=i.getCookie(b);for(v||(v=k.read(l,null,h.LocalSettingsScope.Project)),p=r.deserialize(v),p[t]={scopeId:n,stamp:c,keys:u},v=r.serialize(p),y=0,w=this._getCookieLocations();y<w.length;y++)d=w[y],f.setCookie(b,v,d,undefined,a);k.write(l,v,h.LocalSettingsScope.Project)}},n.prototype.readInformationForNonWITLocation=function(){var n=s.getLocalService(h.LocalSettingsService);return n.read(l,null,h.LocalSettingsScope.Project)},n.prototype._shouldSetCookieForType=function(n){return v[n.toLowerCase()]},n.prototype._getCookieLocations=function(){return[u.TfsContext.getDefault().getActionUrl("","workitems")]},n}();t.WorkItemMetadataCacheInformationManager=y});

define("WorkItemTracking/Scripts/RegisteredLinkTypeNames",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.RegisteredLinkTypeNames=void 0;var i;(function(n){n.Related="Related Workitem";n.Hyperlink="Workitem Hyperlink";n.Changeset="Fixed in Changeset";n.VersionedItem="Source Code File";n.Commit="Fixed in Commit";n.Branch="Branch";n.Tag="Tag";n.PullRequest="Pull Request";n.ResultAttachment="Result Attachment";n.TestResult="Test Result";n.Test="Test";n.Storyboard="Storyboard";n.Build="Build";n.FoundInBuild="Found in build";n.IntegratedInBuild="Integrated in build";n.WikiPage="Wiki Page";n.WorkItemLink="WorkItemLink";n.RemoteWorkItemLink="RemoteWorkItemLink";n.GitHubPullRequestLinkType="GitHub Pull Request";n.GitHubCommitLinkType="GitHub Commit";n.GitHubIssueLinkType="GitHub Issue"})(i=t.RegisteredLinkTypeNames||(t.RegisteredLinkTypeNames={}))});

define("WorkItemTracking/Scripts/RegisterLinkForms",["require","exports","VSS/VSS","WorkItemTracking/Scripts/LinkForm","WorkItemTracking/Scripts/RegisteredLinkTypeNames"],function(n,t,i,r,u){function f(){e();o();s();h();c();l()}function e(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Changeset,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.ChangesetLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.VersionedItem,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.VersionedItemLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Commit,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.CommitLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Branch,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.GitBranchLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Tag,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.GitTagLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.PullRequest,function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.WorkItemIntegration.Linking"],function(t){n(t.PullRequestLinkForm)})})}function o(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Build,function(n){i.using(["Build/Scripts/WorkItemIntegration.Linking"],function(t){n(t.BuildLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.FoundInBuild,function(n){i.using(["Build/Scripts/WorkItemIntegration.Linking"],function(t){n(t.FoundInBuildLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.IntegratedInBuild,function(n){i.using(["Build/Scripts/WorkItemIntegration.Linking"],function(t){n(t.IntegratedInBuildLinkForm)})})}function s(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.TestResult,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms"],function(t){n(t.TestResultForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.ResultAttachment,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms"],function(t){n(t.TestResultAttachmentForm)})})}function h(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Hyperlink,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms"],function(t){n(t.HyperlinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.Storyboard,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms"],function(t){n(t.StoryboardLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.WorkItemLink,function(n){i.using(["WorkItemTracking/Scripts/TFS.WorkItemTracking.Linking.Forms.WorkItem"],function(t){n(t.WorkItemLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.RemoteWorkItemLink,function(n){i.using(["WorkItemTracking/Scripts/Controls/Links/RemoteLinkForm"],function(t){n(t.RemoteLinkForm)})})}function c(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.WikiPage,function(n){i.using(["Wiki/Scripts/WikiPageForm"],function(t){n(t.WikiPageForm)})})}function l(){r.registerLinkFormAsync(u.RegisteredLinkTypeNames.GitHubPullRequestLinkType,function(n){i.using(["WorkItemTracking/Scripts/Controls/Links/GitHubLinkForms"],function(t){n(t.GitHubPullRequestLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.GitHubCommitLinkType,function(n){i.using(["WorkItemTracking/Scripts/Controls/Links/GitHubLinkForms"],function(t){n(t.GitHubCommitLinkForm)})});r.registerLinkFormAsync(u.RegisteredLinkTypeNames.GitHubIssueLinkType,function(n){i.using(["WorkItemTracking/Scripts/Controls/Links/GitHubLinkForms"],function(t){n(t.GitHubIssueLinkForm)})})}Object.defineProperty(t,"__esModule",{value:!0});t.registerLinkForms=void 0;t.registerLinkForms=f});

define("TFS/WorkItemTracking/ExtensionContracts",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.KnownColumns=t.ArtifactIconType=t.RemoteLinkStatus=void 0,function(n){n[n.PendingAdd=0]="PendingAdd";n[n.Success=1]="Success";n[n.Failed=2]="Failed";n[n.PendingUpdate=4]="PendingUpdate";n[n.PendingDelete=8]="PendingDelete"}(i=t.RemoteLinkStatus||(t.RemoteLinkStatus={})),function(n){n[n.icon=0]="icon";n[n.colorBar=1]="colorBar";n[n.colorCircle=2]="colorCircle";n[n.identity=3]="identity";n[n.fabricIcon=4]="fabricIcon"}(r=t.ArtifactIconType||(t.ArtifactIconType={}));t.KnownColumns={State:"State",LastUpdate:"LastUpdate"}});

define("WorkItemTracking/Scripts/Utils/RemoteWorkItemUtils",["require","exports","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Authentication/Services","VSS/Common/Contracts/Platform","VSS/Contributions/Services","VSS/Service","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","TFS/WorkItemTracking/ExtensionContracts","VSS/Utils/Url","VSS/Error"],function(n,t,i,r,u,f,e,o,s,h,c){function v(n,t){var r=i.TfsContext.getDefault();return t=t+"/",{account:{id:n,name:"",relativeUri:"",uri:t},collection:{id:n,name:"",relativeUri:"",uri:t},host:{authority:"",hostType:u.ContextHostType.ProjectCollection,id:n,name:"",scheme:r.contextData.host.scheme,relativeUri:"",uri:t,isAADAccount:r.contextData.host.isAADAccount},project:null,team:null,user:r.contextData.user}}function y(){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(t){switch(t.label){case 0:return(l&&l.remoteWorkItemSessionToken&&l.remoteWorkItemSessionToken.validTo&&(new Date).getTime()>l.remoteWorkItemSessionToken.validTo.getTime()-6e4&&(l=null),!!l)?[3,2]:[4,p()];case 1:l=t.sent();t.label=2;case 2:return l&&l.remoteWorkItemSessionToken&&(n=new r.WebSessionTokenManager(l.remoteWorkItemSessionToken)),[2,n]}})})}function p(){return e.getService(f.WebPageDataService).getDataAsync(a)}function w(n){switch(n){case s.RemoteLinkStatus.PendingAdd:return o.RemoteLinkStatusPendingAdd;case s.RemoteLinkStatus.Success:return o.RemoteLinkStatusSuccess;case s.RemoteLinkStatus.Failed:return o.RemoteLinkStatusFailed;case s.RemoteLinkStatus.PendingUpdate:return o.RemoteLinkStatusPendingUpdate;case s.RemoteLinkStatus.PendingDelete:return o.RemoteLinkStatusPendingDelete}}function b(n){try{var t=h.Uri.parse(n),r=t.path.replace(/\/$/,"");return"".concat(t.scheme,"://").concat(t.host,"/").concat(r)}catch(i){return i&&c.publishErrorToTelemetry(i),""}}function k(n,t,i){return"".concat(n,"/").concat(t,"/_apis/wit/workItems/").concat(i)}var a,l;Object.defineProperty(t,"__esModule",{value:!0});t.getRemoteWorkItemRestUrl=t.sanitizeRemoteWorkItemUrl=t.getFriendlyRemoteLinkStatus=t.getRemoteWorkItemAuthSessionToken=t.getRemoteContext=void 0;a="ms.vss-work-web.remote-workitem-token-data-provider";t.getRemoteContext=v;t.getRemoteWorkItemAuthSessionToken=y;t.getFriendlyRemoteLinkStatus=w;t.sanitizeRemoteWorkItemUrl=b;t.getRemoteWorkItemRestUrl=k});

define("VSS/Controls/Menus",["require","exports","q","VSS/Context","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Controls","VSS/Controls/PopupContent","VSS/Diag","VSS/Events/Action","VSS/Events/Handlers","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/UI","VSS/Utils/String","VSS/VSS","VSS/ClientTrace/Contracts","VSS/Error","VSS/Telemetry/Services","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g){function wt(n){var t;return n&&(t=n.state|it.None,n.disabled&&(t=t|it.Disabled),n.hidden&&(t=t|it.Hidden),n.toggled&&(t=t|it.Toggled)),t}function fi(n){var t=new v.StableSorter(function(n,t){var i=n.rank?n.rank:9999,r=t.rank?t.rank:9999;return i-r});return t.sort(n,!1)}var yt,ft,ut,it,pt,rt,dt,et,ot,bt,ht,ct,lt,at,gt,ni,ti,vt,kt,ii;Object.defineProperty(t,"__esModule",{value:!0});t.sortMenuItems=t.PopupMenu=t.PopupMenuO=t.Toolbar=t.MenuBar=t.MenuBarO=t.MenuOwner=t.Menu=t.MenuContributionProvider=t.MenuItem=t.MenuBase=t.MenuSelectionMode=t.MenuItemState=t.BLUR_CLOSE_TIMEOUT=t.menuManager=void 0;var nt=y.delegate,st=p.domElem,tt=p.KeyCode,ri=b.handleError,ui=b.getErrorMessage;t.BLUR_CLOSE_TIMEOUT=25,function(n){function t(n){return Boolean(n)&&n.which===2}function i(n){return Boolean(n)&&$(n.target).is("ul.menu")}n.isMiddleClick=t;n.targetIsMenu=i}(yt||(yt={})),function(n){function t(t){return t==="vertical"?n.Vertical:n.Horizontal}n.Horizontal=0;n.Vertical=1;n.parse=t}(ft||(ft={})),function(n){function t(t){switch(t){case"static":return n.Static;case"popup":return n.Popup;case"dropdown":return n.DropDown;case"chevron":return n.Chevron}return n.Normal}n.None=0;n.Normal=1;n.Static=2;n.Popup=3;n.DropDown=4;n.Chevron=5;n.SubMenu=6;n.parse=t}(ut||(ut={})),function(n){n[n.None=0]="None";n[n.Disabled=1]="Disabled";n[n.Hidden=2]="Hidden";n[n.Toggled=4]="Toggled"}(it=t.MenuItemState||(t.MenuItemState={})),function(n){n[n.None=0]="None";n[n.SingleSelect=1]="SingleSelect";n[n.MultiSelect=2]="MultiSelect"}(pt=t.MenuSelectionMode||(t.MenuSelectionMode={})),function(n){function t(t){switch(t){case"right-bottom":return n.RightBottom;case"left-bottom":return n.LeftBottom;case"left-top":return n.LeftTop}return n.RightJustify}n.RightBottom=0;n.RightJustify=1;n.LeftBottom=2;n.LeftTop=3;n.parse=t}(rt||(rt={}));dt=function(){function n(){this._executeEvent="execute-command";this._commandStates=null;this._commandStates={}}return n.prototype.getCommandState=function(n,t){var i=this._commandStates&&this._commandStates[n];return typeof i=="function"?i.call(t,n,t):i},n.prototype.updateCommandStates=function(n){var t=this;n&&$.each(n,function(n,i){t._commandStates[i.id]=wt(i)})},n.prototype.executeCommand=function(n){this._fireEvent(this._executeEvent,this,n)},n.prototype.attachExecuteCommand=function(n){this.attachEvent(this._executeEvent,n)},n.prototype.detachExecuteCommand=function(n){this.detachEvent(this._executeEvent,n)},n.prototype.fire=function(n,t,i){return this._fireEvent(n,t,i)},n.prototype._fireEvent=function(n,t,i){var r;if(this._events&&(this._events.invokeHandlers(n,t,i,function(n){if(n===!1)return r=!0,!0}),r))return!1},n.prototype.attachEvent=function(n,t){this._events||(this._events=new c.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n}();t.menuManager=new dt;et=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._type=ut.parse(i._options.type),i._children=[],i}return __extends(t,n),t.prototype.getOwner=function(){return this._parent?this._parent.getOwner():this},t.prototype.getParent=function(){return this._parent},t.prototype.getParentMenu=function(){return undefined},t.prototype.getContextInfo=function(){return this._options.contextInfo},t.prototype.getActionArguments=function(){var n=this._options.arguments||this.actionArguments;return typeof n=="string"?{url:n}:typeof n=="function"?n.call(this,this.getOwner().getContextInfo()):n},t.prototype.getMenuType=function(){return this._type},t.prototype.updateCommandStates=function(n){this._updateCommandStates(n)},t.prototype.isMenuBar=function(){return this._type===ut.Static},t.prototype._fireUpdateCommandStates=function(n){(n=n||this,typeof this._options.updateCommandStates!="function"||this._options.updateCommandStates.call(n,n)!==!1)&&this._parent&&this._parent._fireUpdateCommandStates(n)},t.prototype._clear=function(){for(var t=this._children.length,n=0;n<t;n++)this._children[n]._clear(),this._children[n].dispose();this._children=[]},t.prototype._updateCommandStates=function(n){var t=this;this._commandStates||(this._commandStates={});n&&$.each(n,function(n,i){t._commandStates[i.id]=wt(i)})},t.prototype._updateContributedMenuItems=function(n){this._children&&this._children.forEach(function(t){t._updateContributedMenuItems(n)})},t}(e.Control);t.MenuBase=et;b.initClassPrototype(et,{_type:null,_parent:null,_children:null,_commandStates:null,actionArguments:null});ot=function(n){function i(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);i._isPinFocused=!1;i._quenchMouseLeave=!1;i._blockHoverOpenSubMenu=!1;i._isHidden=!1;i._item=i._options.item||{};i.setEnhancementOptions({coreCssClass:i._item.href?"menu-item-container":"menu-item",tagName:"li"});try{i.actionArguments=i._item.arguments}catch(u){}return i._align=rt.parse(i._options.align),i}return __extends(i,n),i.getScopedCommandId=function(n,t){return t?t+"-"+n:n},i.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t)},i.prototype.getParentMenu=function(){return this._parent instanceof ht&&this._parent},i.prototype.getCommandId=function(){return i.getScopedCommandId(this._item.id,this._item.scope)},i.prototype.getAction=function(){var n=this._item.idIsAction;return n===!1?this._item.action:this._item.action||this.getCommandId()||this._item.href},i.prototype.hasAction=function(){var n=this.getAction();return n!==null&&typeof n!="undefined"},i.prototype.hasSubMenu=function(){return!this.isDefault()&&this._item.childItems},i.prototype.isDecorated=function(){return this._item.decorated===!0},i.prototype.isDefault=function(){return this._type===ut.None},i.prototype.isSeparator=function(){return this._item.separator===!0},i.prototype.isLabel=function(){return this.isSeparator()&&this._item.isLabel},i.prototype.isSelected=function(){return this._item.selected===!0},i.prototype.getCommandState=function(n,i){var r=null;return n=n||this._item.id,i=i||this,typeof this._options.getCommandState=="function"&&(r=this._options.getCommandState.call(this,n,i)),(r===null||typeof r=="undefined")&&this._parent&&typeof this._parent.getCommandState=="function"&&(r=this._parent.getCommandState(n,i)),(r===null||typeof r=="undefined")&&(r=t.menuManager.getCommandState(n,i)),(r===null||typeof r=="undefined")&&this._item.id===n&&(r=wt(i._item)),typeof r=="function"&&(r=r.call(this,n,this)),r},i.prototype.getIndex=function(){return this._index},i.prototype.setIndex=function(n){this._index=n},i.prototype.setIsHidden=function(n){this._isHidden=n;this._updateState()},i.prototype.isHidden=function(){if(this.isPinnable()&&this._parent&&this._parent.getMenuPinningOptions()){var n=this._parent.getMenuPinningOptions();if(n.hidePinnedItems&&this._isPinned&&!this._item.pinningOptions.neverHide||n.hideUnpinnedItems&&!this._isPinned&&!this._item.pinningOptions.neverHide)return!0}return Boolean((this.getCommandState()&it.Hidden)===it.Hidden||this._type===ut.None||this.isSeparator()&&this._item.hidden||this._isHidden)},i.prototype.isEnabled=function(){return this.isHidden()?!1:this.isSeparator()?void 0:(this.getCommandState()&(it.Disabled|it.Hidden))===it.None},i.prototype.isFocusable=function(){return!this.isHidden()&&this._item&&this._item.focusable!==!1},i.prototype.isToggled=function(){var n=!1;return this.isSeparator()||this.isHidden()||(n=(this.getCommandState()&it.Toggled)===it.Toggled),n},i.prototype.isPinnable=function(){return this._item.pinningOptions&&this._item.pinningOptions.isPinnable},i.prototype.isPinned=function(){return this._isPinned},i.prototype.getSelectionMode=function(){var n=this.getOwner()._options.selectionMode;return typeof n=="undefined"?pt.None:typeof n=="function"?n(this._item):n},i.prototype.initialize=function(){var f=this,t,r,u,i;n.prototype.initialize.call(this);this.isPinnable()&&(t=this.getParentMenu(),r=t&&t.getMenuPinningOptions(),r&&r.isPinningSource?(u=t.getParentMenu(),i=v.first(u._menuItems,function(n){return n._item&&n._item.id===f._item.id}),this._isPinned=i&&i.isPinnable()?i._isPinned:!!this._item.pinningOptions.isPinned):this._isPinned=!!this._item.pinningOptions.isPinned);this._decorate()},i.prototype.update=function(n){var t=this;n!==this._item&&(Object.keys(this._item).forEach(function(n){delete t._item[n]}),$.extend(this._item,n));this._clear();this._item.decorated=!1;this._element.empty();this._unbind("click mouseenter mouseleave mousedown mouseup keydown");this._decorate()},i.prototype.updateItems=function(n){this._clear();this._item.childItems=n},i.prototype._decorate=function(){var n=this._element,u,d,t,f,c,l;!this.isDecorated()&&this._item.href&&(n=$('<a class="menu-item" tabindex="-1"/>').appendTo(n),n.attr("href",this._item.href));this._$menuItemElement=n;var g=this.getOwner()._options.showIcon===!0,a=this.hasSubMenu(),v=this._item.showText!==!1,y=this._item.showHtml!==!1,o,i,s,r,w=!1,b=!1,h=!1,k="mi_"+e.getId();this._item.id&&(k+="_"+this._item.id);n.attr({id:k,tabindex:"-1"});this._element.attr({role:this.getAriaRole(),tabindex:"-1"});this.isDecorated()?r=n.children(".drop").eq(0):(n.addClass(this._options.cssCoreClass).addClass(this._options.cssClass),u=this._item.title,u||this._item.encoded||!this._item.setDefaultTitle&&this._item.showText!==!1?u||(u=""):u=this._item.text,this._element.attr("title",""),this.updateTitle(u),this._item.ariaLabel&&this._element.attr("aria-label",this._item.ariaLabel),this._item.id&&n.attr("command",this._item.id),this._item.cssClass&&n.addClass(this._item.cssClass),this._item.hidden&&n.addClass("invisible"),this._item.focusable===!1&&n.addClass("unfocusable"),this.isSeparator()?(n.addClass("menu-item-separator"),n.attr("role","separator"),n.removeAttr("tabindex"),o=this._createSeparatorElement(),this._item.text&&(o.text(this._item.text),o.removeClass("separator"),o.addClass("text-separator")),n.append(o)):(d=this._item.ariaLabel||this._item.text||this._item.title,g&&!this._item.noIcon&&(typeof this._item.icon=="string"&&this._item.icon.match(/^https?:\/\//)?this._item.icon=this._getExternalIcon.bind(this,this._item.icon):typeof this._item.icon=="string"&&this._item.icon.match(/^css:\/\//)&&(this._item.icon=this._item.icon.substr(6)),t=this._createIconElement(),typeof this._item.icon=="function"?t.append(this._item.icon.call(this,t)):this._item.icon&&t.addClass(this._item.icon),t.hasClass("bowtie-icon")&&t.removeClass("icon"),v||y&&this._item.html?t.attr("aria-hidden","true"):t.attr("role","button").attr("aria-label",d),n.append(t),w=!0),v&&(i=this._createTextElement(),this._item.encoded?i[0].innerHTML=this._item.text||"":typeof this._item.text=="string"?i.text(this._item.text):typeof this._item.text=="function"&&i.text(this._item.text.call(this)||""),!u&&jQuery("body").hasClass("gallery")&&(i.attr("aria-label","menuitem"),this._element.attr("aria-label","menuitem")),this._item.textClass&&i.addClass(this._item.textClass),i.attr("role","button"),b=!0,n.append(i)),y&&(h=!0,s=this._createHtmlElement(),f=this._item.html,typeof f=="function"&&(f=f.call(this)),f instanceof jQuery?s.append(this._item.html):typeof f=="string"?s.html(this._item.html):h=!1,this._item.htmlClass&&s.addClass(this._item.htmlClass),n.append(s)),h||b||!w||n.addClass("icon-only"),a&&(this._element.attr({"aria-haspopup":"true","aria-expanded":"false"}),this._item.hideDrop||(r=this._createDropElement(),c=this.getElement().css("display"),c!=="inline-block"&&c!=="table-cell"?n.prepend(r):n.append(r),n.addClass("drop-visible"))),this.isPinnable()&&!this._item.pinningOptions.hidePin&&(n.addClass("pin-visible"),this._pinElement=$("<i class='pin bowtie-icon' />"),this._pinElement.click(this._onPinClick.bind(this)),this._pinElement.attr({id:n.attr("id")+"_pin",role:"button",tabindex:"-1"}),n.append(this._pinElement))));this._updateState();l=this.isSelected();n.toggleClass("selected",l);l?this._element.attr("aria-checked","true"):this._element.removeAttr("aria-checked");this.isDefault()||this.isSeparator()?this.isSeparator()&&this._bind("click",function(n){n.stopPropagation()}):(this._bind("click",nt(this,this._onClick)),this._bind("mouseenter",nt(this,this._onMouseEnter)),"onpointerdown"in this._element[0]||this._bind("touchstart",nt(this,this._onTouchStart)),this._bind("pointerdown",nt(this,this._onPointerDown)),this._bind("pointerup",nt(this,this._onPointerUp)),this._bind("mouseleave",nt(this,this._onMouseLeave)),this._bind("mousedown",nt(this,this._onMouseDown)),this._bind("mouseup",nt(this,this._onMouseUp)),this._bind("keydown",this._onKeyDown.bind(this)),a&&r&&r.length>0&&this._bind(r,"click",nt(this,this._onDropClick)));this.getOwner()._options.markUnselectable===!0&&p.makeElementUnselectable(n[0])},i.prototype._getExternalIcon=function(n){return $("<img/>").attr("src",n)},i.prototype.select=function(n,t){n===void 0&&(n=!1);t===void 0&&(t=!0);this._parent._selectItem(this,n,t);this._parent._clearTimeouts()},i.prototype.focusPin=function(n){n===void 0&&(n=!0);this._isPinFocused=n;this._pinElement&&(this._pinElement.toggleClass("focus",this._isPinFocused),n&&p.tryFocus(this._pinElement))},i.prototype.deselect=function(){this._parent._selectItem(null)},i.prototype.escaped=function(){this.select()},i.prototype.execute=function(n){n;var t=this.getOwner();return this.collapse({immediate:!0}),t.escaped(),t.isMenuBar()&&n&&n.keepHighlight&&this.showHoverHighlight(),t._proceedBlur(),this.hasAction()?this.executeAction($.extend({},t.getActionArguments(),this.getActionArguments()),n?n.e:null):void 0},i.prototype.executeAction=function(n,i){var r=this.getAction(),l=this.getOwner(),e=r==="navigate"&&n.url||this._item.href,o,s,u,f;if(r){if(n.telemetry&&n.telemetry.area&&n.telemetry.feature&&g.publishEvent(new g.TelemetryEventData(n.telemetry.area,n.telemetry.feature,{CommandId:this.getCommandId()||"Unknown",GroupId:this._item.groupId,ContributionId:this._item.contributionId})),o=i&&(i.ctrlKey||i.metaKey),typeof r=="function"&&!(e&&o)&&(s=r.apply(this,[n,i]),!e||s===!1))return s;if(e){try{u=n.url;u||(u=this._item.href);f=null;n.target&&(f=n.target);o&&(f="_blank");f?h.getService().performAction(h.CommonActions.ACTION_WINDOW_OPEN,{url:u,target:n.target}):h.getService().performAction(h.CommonActions.ACTION_WINDOW_NAVIGATE,{url:u})}catch(i){}return!1}return l?l.executeAction(new c.CommandEventArgs(r,n,this)):t.menuManager.executeCommand(new c.CommandEventArgs(r,n,this))}},i.prototype.collapse=function(n){for(var t=this._parent,i=n&&n.immediate===!0;t;)typeof t.hide=="function"&&t.hide({immediate:i}),t=t._parent;this.getOwner().ownFocus()},i.prototype.setFocus=function(n){n===void 0&&(n=!0);var t=this._$menuItemElement;!t||this.isSeparator()||this.isDefault()||t.addClass("focus");t&&p.tryFocus(this._element)},i.prototype.removeFocus=function(){var n=this._$menuItemElement;!n||this.isSeparator()||this.isDefault()||n.removeClass("focus");this.focusPin(!1)},i.prototype.showHoverHighlight=function(){this._highlightHover=!0;this._updateState()},i.prototype.showPressedHighlight=function(){this.hasSubMenu()&&this.getSubMenu()._visible||(this._highlightPressed=!0,this._updateState())},i.prototype.removePressedHighlight=function(){this._highlightPressed&&(this._highlightPressed=!1,this._updateState())},i.prototype.removeHighlight=function(){this._highlightHover=!1;this._highlightPressed=!1;this._updateState()},i.prototype.updateTitle=function(n){this._setTooltip(null);this._item.setTitleOnlyOnOverflow&&this._item.showText!==!1?(n||(n=this._item.text),this._setTooltip(n,{onlyShowWhenOverflows:this._$menuItemElement[0],setAriaDescribedBy:!0})):(n&&!this.getParentMenu().openSubMenuOnHover&&this._setTooltip(n,{setAriaDescribedBy:!0}),this._item.showText!==!1||this._item.ariaLabel||this._element.attr("aria-label",n));this._options.item&&(this._options.item.title=n)},i.prototype._setTooltip=function(n,t){var i=this;this._tooltip&&this._tooltip.dispose();this._tooltip=n?o.RichContentTooltip.add(n,this._element[0],__assign({menuContainer:this._element,mouseEventFilter:function(n){return!(i.hasSubMenu()&&i.getSubMenu()._element[0].contains(n.target))}},t)):null},i.prototype.updateText=function(n){var t;typeof n=="string"?t=n:this._item&&typeof this._item.text=="function"&&(t=this._item.text.call(this));t&&this._$menuItemElement.children("span.text").text(t)},i.prototype.getSubMenu=function(n){var t,i;return n===void 0&&(n=!0),t=null,this.hasSubMenu()&&(this._children.length===0?n&&(i=this._parent&&this._parent._parent&&this._parent._parent._element||this._$menuItemElement,t=e.create(ht,i,$.extend({},this._options,this._item.childOptions,{earlyInitialize:!1,items:this._item.childItems,type:"submenu",cssCoreClass:"menu sub-menu",tagName:"ul",ariaLabel:this._item.ariaLabel})),t._element.addClass("menu"),t._element.attr("data-parent",this._$menuItemElement.attr("id")),t._parent=this,t._type=ut.SubMenu,this._children.push(t)):t=this._children[0]),t},i.prototype.tryShowSubMenu=function(n){var t=n&&n.immediate;return!this.isDefault()&&this.isEnabled()&&this.getSubMenu()?(this.showSubMenu({immediate:t}),!0):!1},i.prototype.showSubMenu=function(n){var i=n&&n.immediate===!0,r=n?n.showTimeout:undefined,u=n?n.callback:undefined,t=this.getSubMenu(),f=this._item.splitDropItem?this._item.splitDropItem:this,e=(n&&n.setFocus)!==!1;this._closeSubmenuOnMouseLeave=n&&n.closeOnMouseLeave;t.show({immediate:i,showTimeout:r,callback:u,element:f._$menuItemElement,align:this._align,setFocus:e})},i.prototype.hideSubMenu=function(n){var r=this;if(this.hasSubMenu()){var u=n&&n.immediate===!0,i=n&&n.callback,t=this.getSubMenu(!1);t&&t._parent===this&&t.hide({immediate:u,callback:function(){r._closeSubmenuOnMouseLeave=!1;typeof i=="function"&&i()}})}},i.prototype.hideSiblings=function(n){this._parent.hideChildren(this,n)},i.prototype.getAriaRole=function(){switch(this.getSelectionMode()){case pt.MultiSelect:return"menuitemcheckbox";case pt.SingleSelect:return"menuitemradio"}return"menuitem"},i.prototype._attachMenuEvents=function(){},i.prototype._createIconElement=function(){return $(st("span","icon menu-item-icon"))},i.prototype._createTextElement=function(){return $(st("span","text"))},i.prototype._createHtmlElement=function(){return $(st("span","html"))},i.prototype._createDropElement=function(){return $(st("div","drop"))},i.prototype._createSeparatorElement=function(){return $(st("div","separator"))},i.prototype._updateState=function(){var n,r,t;this._disposed||(n=this._$menuItemElement,!n||this.isSeparator()||this.isDefault()||(r=(this._item.splitDrop||this._item.splitDropItem||{})._$menuItemElement,this.isEnabled()?(n.toggleClass("hover",this._highlightHover),n.toggleClass("pressed",this._highlightPressed),this._element.attr("aria-disabled","false"),n.removeClass("disabled"),r&&r.toggleClass("split-drop-hover",this._highlightHover)):(n.addClass("disabled"),this._element.attr("aria-disabled","true"),n.removeClass("hover"),n.removeClass("pressed")),this._pinElement&&this._pinElement.toggleClass("focus",this._isPinFocused),n.toggleClass("toggle-on",this.isToggled())),n&&!this.isDefault()&&n.toggleClass("invisible",this.isHidden()),this._pinElement&&(this._pinElement.toggleClass(i.PinnedIconClass,this._isPinned),this._pinElement.toggleClass(i.UnpinnedIconClass,!this._isPinned),this._pinElement.attr("title",this._isPinned?l.MenuItemUnpinButtonLabel:l.MenuItemPinButtonLabel),t=null,this._isPinned?(i._unpinDescribedById||(i._unpinDescribedById=String(e.getId()),$(st("div")).attr("id",i._unpinDescribedById).addClass("visually-hidden").text(l.UnpinDescribedByText).appendTo(document.body)),t=i._unpinDescribedById):(i._pinDescribedById||(i._pinDescribedById=String(e.getId()),$(st("div")).attr("id",i._pinDescribedById).addClass("visually-hidden").text(l.PinDescribedByText).appendTo(document.body)),t=i._pinDescribedById),this._element.attr("aria-describedby",t)))},i.prototype._updateContributedMenuItems=function(t){var i=[this._item],r=function(n,i,u){for(var f,o=!1,e=0,s=t;e<s.length;e++)if(f=s[e],n.id===f.id&&n.sourceExtensionId===f.sourceExtensionId){u[i]=f;o=!0;break}!o&&Array.isArray(n.childItems)&&n.childItems.forEach(r)};i.forEach(r);i[0]!==this._item?this.update(i[0]):n.prototype._updateContributedMenuItems.call(this,t)},i.prototype._onPointerDown=function(n){var i=n.originalEvent;if(i.pointerType==="touch"){var r=this.hasSubMenu()&&this.getParentMenu().openSubMenuOnHover,t=this._children&&this._children[0],u=t&&t._visible;r&&(!u||t.shownTime>Date.now()-100)&&(this._handledPointerId=i.pointerId)}},i.prototype._onPointerUp=function(n){var t=n.originalEvent;t.pointerId===this._handledPointerId&&(this._blockClickUntil=Date.now()+500);this._handledPointerId=null},i.prototype._onTouchStart=function(n){!this.hasSubMenu()||!this.getParentMenu().openSubMenuOnHover||this._children&&this._children[0]&&this._children[0]._visible?this._onClick(n):(this._onMouseEnter(n),n.preventDefault())},i.prototype._onMouseEnter=function(n){var i,t,r,u,f;for(s.logTracePoint("MenuItem._onMouseEnter.start"),i=n.target;i&&i.tagName.toUpperCase()!=="UL";)i=i.parentElement;i===this._parent._element[0]&&(t=this.getOwner(),!this._blockHoverOpenSubMenu&&(t._active||t.openSubMenuOnHover)?(t.activate(),r=t._subMenuVisible,this.hideSiblings({immediate:this._options.immediateShowHide}),this.select(!0),(t!==this._parent||r||t.openSubMenuOnHover)&&(t._subMenuVisible=r,this.isEnabled()&&this.hasSubMenu()&&(u=this.getSubMenu(),u._parent===this&&(u._visible||(f=t.openSubMenuOnHover&&t===this._parent,this.showSubMenu({immediate:f&&!r?!1:this._options.immediateShowHide,showTimeout:f&&!r?200:undefined,closeOnMouseLeave:f,callback:function(){u.selectDefaultItem(!0)},setFocus:!1})))))):this.showHoverHighlight())},i.prototype._onMouseLeave=function(n){var r=this,i=this.getOwner(),t;if(this._quenchMouseLeave){this._quenchMouseLeave=!1;n.stopPropagation();return}this._closeSubmenuOnMouseLeave&&this.hideSubMenu({immediate:!1,hideTimeout:200,callback:function(){return r.removeHighlight()}});i._active?i!==this._parent?this.hasSubMenu()?(t=this.getSubMenu(),t._parent===this?t._visible||(this.deselect(),t._clearTimeouts()):this.deselect()):this.deselect():this.hasSubMenu()&&this.getSubMenu()._visible||this.removeHighlight():this.removeHighlight()},i.prototype._onMouseDown=function(n){this.showPressedHighlight();n.stopPropagation();n.preventDefault()},i.prototype._onMouseUp=function(){this.removePressedHighlight()},i.prototype._onClick=function(n){var u=this,t,i,r;if(yt.targetIsMenu(n))return!1;if(!yt.isMiddleClick(n)){if(this._blockClickUntil&&Date.now()<this._blockClickUntil){n.stopPropagation();n.preventDefault();return}if(i=this.actionArguments,i||(i={}),i.clickArguments||(i.clickArguments={}),$.extend(i.clickArguments,n),this.isEnabled()){if(this.hasSubMenu()&&this._item.clickOpensSubMenu!==!1)t=this.getSubMenu(),this.select(),t._parent===this&&t._visible?(this.getOwner().activate(),this._options.clickToggles===!0?(t.hide({immediate:!0}),this._blockHoverOpenSubMenu=!0,r=function(){u._blockHoverOpenSubMenu=!1;u._unbind("mouseleave",r)},this._bind("mouseleave",r),this.select()):t.ownFocus()):(this.getOwner().activate(),this.hideSiblings({immediate:!0}),this.showSubMenu({immediate:!0}),t.selectDefaultItem());else if(this.hasAction())return this.select(),this.execute({e:n,keepHighlight:this._parent.getMenuType()!==ut.SubMenu})===!0}else this.getOwner().activate(),this.hideSiblings({immediate:!0}),this.select();n.stopPropagation();n.preventDefault()}},i.prototype._onDropClick=function(){var n;return this.isEnabled()&&(this.getOwner().activate(),this.hasSubMenu()&&(n=this.getSubMenu(),n._parent===this&&n._visible?this._options.clickToggles===!0?(n.hide({immediate:!0}),this.select()):n.ownFocus():(this.hideSiblings({immediate:!0}),this.showSubMenu({immediate:!0}),n.selectDefaultItem()))),!1},i.prototype._onPinClick=function(n){n.stopPropagation();n.preventDefault();this.toggleIsPinned()},i.prototype.toggleIsPinned=function(n,t){var i,f,e,s,h,y,c,p,u,l,a,w,g,v,b,r,o,nt,k,d;if(n===void 0&&(n=!this._isPinned),this._isPinned=n,this._updateState(),i=this.getParentMenu(),f=i&&i.getMenuPinningOptions()||{},i&&i.updateAriaSetProperties(),e=[],f.isPinningSource)s=i.getParentMenu(),e.push(s);else if(f.isPinningTarget)for(s=i,h=0,y=this._parent._menuItems;h<y.length;h++)r=y[h],r.hasSubMenu()&&(c=r.getSubMenu(),p=c&&c.getMenuPinningOptions(),p&&p.isPinningSource&&e.push(c));if(e.length>0){for(l=void 0,a=0,w=e;a<w.length;a++){for(g=w[a],v=0,b=g._menuItems;v<b.length;v++)r=b[v],r.isPinnable()&&r._item.pinningOptions.groupId===this._item.pinningOptions.groupId&&(l=r),r._item.id===this._item.id&&(u=r);if(u)break}u&&(u._isPinned=this._isPinned,u._updateState(),o=u.getParentMenu(),o&&(o.updateAriaSetProperties(),l&&o.getMenuPinningOptions().pinItemsToEnd&&o.moveMenuItemAfter(u,l)))}if(f.closeOnPin&&(!t||t.unfocus)&&(this._quenchMouseLeave=!0,this._parent.selectLeft()),i&&!f.closeOnPin&&(nt=i.selectPrevItem()||i.selectNextItem(),nt||(i.hide({immediate:!0}),k=i.getParentMenu(),k&&k.selectFirstItem())),s.updateSourceMenu(this._item.pinningOptions.groupId),d=this._item.pinningOptions,d.onPinnedChanged)d.onPinnedChanged(this,this._isPinned,u)},i.prototype._onKeyDown=function(n){var i=function(){return!n.ctrlKey&&!n.altKey&&!n.shiftKey&&!n.metaKey},t;switch(n.keyCode){case tt.RIGHT:if(i()&&!this._isPinFocused&&this.isPinnable()&&!this._item.pinningOptions.hidePin)return this.focusPin(),!1;break;case tt.LEFT:if(i()&&this._isPinFocused)return this.focusPin(!1),this.select(),!1;break;case tt.SPACE:case tt.ENTER:return this.isEnabled()&&(this._isPinFocused?(this._element.focus(),this.toggleIsPinned()):this.hasAction()?this.execute({e:n}):this.hasSubMenu()&&(t=this.getSubMenu(!1),t&&t._visible||(this.hideSiblings({immediate:!0}),this.showSubMenu({immediate:!0}),this.getSubMenu().selectFirstItem()))),!1}},i.enhancementTypeName="tfs.menu.item",i.PinnedIconClass="bowtie-unpin",i.UnpinnedIconClass="bowtie-pin-unpin",i}(et);t.MenuItem=ot;b.initClassPrototype(ot,{_item:null,_align:null,_index:0,_highlightHover:!1,_highlightPressed:!1});bt=function(){function n(n,t,i,r,u,e,o){this._menu=n;this._webContext=t;this._contributionIds=i;this._contributionType=r;this._contributionQueryOptions=u||f.ContributionQueryOptions.IncludeRecursiveTargets;this._getMenuActionContext=e;this._options=o||{}}return n.prototype._immediateInstanceRequired=function(n){return n.id&&f.ExtensionHelper.hasContent(n)&&!n.properties.text},n.prototype._getContributions=function(){var n=this;return this._contributionsPromise||(this._contributionsPromise=this._contributionIds&&this._contributionIds.length?a.getService(f.ExtensionService).queryContributions(this._contributionIds,this._contributionQueryOptions,this._contributionType).then(function(t){var r=i.defer(),u=[];return t.forEach(function(t){var i=n._getContributionWithSource(t);i&&u.push(i)}),i.allSettled(u).then(function(n){var t=[];n.forEach(function(n){n.state==="rejected"&&console.error(n.reason);n.state==="fulfilled"&&n.value&&t.push(n.value)});r.resolve(t)},r.reject),r.promise}):i.resolve([])),this._contributionsPromise},n.prototype._getContributionWithSource=function(t){var r=t.id||"";return this._immediateInstanceRequired(t)?u.getBackgroundInstance(t,t.properties.registeredObjectId||r,this._webContext,this._webContext,this.getContributionSourceTimeout(),"Timed-out waiting for menu source provider for contribution: "+r).then(function(n){return{contribution:t,source:n}}):t.type===n.ACTION_TYPE||t.type===n.HYPERLINK_ACTION_TYPE?i.resolve({contribution:t}):null},n.prototype._makeThennable=function(n){return n&&typeof n.then=="function"?n:i.resolve(n)},n.prototype._contributionToMenuItems=function(t,r){var e=this,f=t.contribution.id||"",u;return t.source?(u=i.defer(),typeof t.source.getMenuItems=="function"?(r=$.extend({updateMenuItems:function(n){e._updateContributedMenuItems(n,t)}},r),this._makeThennable(t.source.getMenuItems(r)).then(function(n){n&&n.length?i.all(n.map(function(n){return e._updateContributedMenuFromSource(n,t.contribution,t.source)})).then(function(n){u.resolve(n)}):u.resolve(n)},u.reject)):this._getBasicMenuItemFromContribution(f,t.contribution,t.source).then(function(n){u.resolve([n])}),i.timeout(u.promise,n._contributionGetItemsTimeout,"Timed-out waiting for getMenuItems call from contribution: "+f)):this._immediateInstanceRequired(t.contribution)?i.resolve([]):this._getBasicMenuItemFromContribution(f,t.contribution,t.source).then(function(n){return[n]})},n._getMenuItemFromContributedMenuItem=function(t){var r={id:t.id,text:t.text,title:t.title,separator:t.separator,disabled:t.disabled,hidden:t.hidden,icon:t.icon,noIcon:t.noIcon,groupId:t.groupId,action:t.action,href:t.href,setDefaultTitle:!1};return t.pinningOptions&&(r.pinningOptions=t.pinningOptions),t.pinningMenuOptions&&(r.pinningMenuOptions=t.pinningMenuOptions),t.childItems&&(Array.isArray(t.childItems)?r.childItems=t.childItems.map(function(t){return n._getMenuItemFromContributedMenuItem(t)}):i.isPromise(t.childItems)&&(r.childItems=function(i,r,u){t.childItems.then(function(t){r((t||[]).map(function(t){return n._getMenuItemFromContributedMenuItem(t)}))},u)})),r},n.prototype._updateContributedMenuFromSource=function(t,u,e,o){var c=this,s;o===void 0&&(o=!0);s=o?n._getMenuItemFromContributedMenuItem(t):t;s.action=this._getMenuAction(u,e,s.action);var h=null,l=a.getService(f.ExtensionService).getBaseUri(u),v=f.ExtensionHelper.getPublisherId(u),y=f.ExtensionHelper.getExtensionId(u);return typeof s.icon=="string"&&(h=f.ExtensionHelper.resolveUriTemplate(s.icon,r.getDefaultWebContext(),l)),s.isContribution=!0,s.sourceExtensionId=v+"."+y,s.contributionId=u.id,s.title&&!s.text&&s.text!==""&&(this._options.defaultTextToTitle===!1&&s.icon?(s.showText=!1,s.showHtml=!1):s.text=s.title),o&&!s.groupId&&(s.groupId=u.properties.groupId),Array.isArray(s.childItems)&&s.childItems.forEach(function(n){c._updateContributedMenuFromSource(n,u,e,!1)}),h?h.then(function(n){return s.icon=n,s}):i.resolve(s)},n.prototype._getBasicMenuItemFromContribution=function(n,t,i){var e=this,o=t.properties.text||null,u=t.properties.title||null,s=this._makeThennable("");return typeof t.properties.icon=="string"&&(s=f.ExtensionHelper.resolveUriTemplateProperty(t,r.getDefaultWebContext(),"icon")),s.then(function(r){var s={id:n,text:o,title:u,icon:r,groupId:t.properties.groupId,action:e._getMenuAction(t,i,null),isContribution:!0,sourceExtensionId:f.ExtensionHelper.getPublisherId(t)+"."+f.ExtensionHelper.getExtensionId(t),contributionId:n};return o===null&&u&&(e._options.defaultTextToTitle===!1&&r?(s.showText=!1,s.showHtml=!1):s.text=u),s})},n.prototype._getMenuAction=function(t,i,r){var e=this,o;return!r&&t.type===n.ACTION_TYPE?function(){u.getBackgroundInstance(t,t.properties.registeredObjectId||t.id,e._webContext,e._webContext,e.getContributionSourceTimeout(),"Timed-out waiting for menu action: "+t.id).then(function(n){n.execute(e._getMenuActionContext())})}:typeof r=="function"?function(){return f.ExtensionHelper.publishTraceData(t),r(e._getMenuActionContext())}:t.properties.targetUri?function(){var n=a.getService(f.ExtensionService).getBaseUri(t),i=f.ExtensionHelper.resolveUriTemplate(t.properties.targetUri,e._getMenuActionContext(),n);i.then(function(n){f.ExtensionHelper.publishTraceData(t,n);window.location.href=n})}:i&&typeof i.execute=="function"?function(){return f.ExtensionHelper.publishTraceData(t),i.execute(e._getMenuActionContext())}:o},n.prototype._updateContributedMenuItems=function(n,t){var r=this;this._menu&&i.all(n.map(function(n){return r._updateContributedMenuFromSource(n,t.contribution,t.source)})).then(function(n){r._menu.updateContributedMenuItems(n)})},n.prototype.getContributedMenuItems=function(n){var t=this;return this._getContributions().then(function(r){var u=[];return r.forEach(function(i){u.push(t._contributionToMenuItems(i,n))}),i.allSettled(u).then(function(n){var t=[];return n.forEach(function(n){n.value&&n.value.length&&n.value.forEach(function(n){t.push(n)})}),t})})},n.prototype.getContributionSourceTimeout=function(){return this._menu&&this._menu._options&&this._menu._options.contributionSourceTimeoutMs||n.DEFAULT_CONTRIBUTION_SOURCE_TIMEOUT},n.ACTION_TYPE="ms.vss-web.action",n.HYPERLINK_ACTION_TYPE="ms.vss-web.hyperlink-action",n.DEFAULT_CONTRIBUTION_SOURCE_TIMEOUT=5e3,n._contributionGetItemsTimeout=2e3,n}();t.MenuContributionProvider=bt;ht=function(n){function i(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._mouseIsDown=!1,i._shouldSelectFirstItem=!1,i.setEnhancementOptions({role:"menu",coreCssClass:"menu"+(i._options.useBowtieStyle?" bowtie-menus":""),tagName:"ul"}),i._menuItems=[],i._initializeItemsSource(),i}return __extends(i,n),Object.defineProperty(i.prototype,"shownTime",{get:function(){return this._shownTime},enumerable:!1,configurable:!0}),i.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t);this.openSubMenuOnHover=t.alwaysOpenSubMenuOnHover},i.prototype.initialize=function(){n.prototype.initialize.call(this);this._options.suppressInitContributions||this.refreshContributedItems();this._decorate()},i.prototype._initializeItemsSource=function(){this._itemsSource=this._options.items},i.prototype._decorate=function(){this._element.addClass(this._options.cssCoreClass).addClass(this._options.cssClass).attr("tabindex","-1").attr("aria-label",this._options.ariaLabel);this._bind("mousedown",nt(this,this._onMouseDown));this._bind("keydown",this._onMenuKeyDown.bind(this));this._itemsSource=this.getGroupedItems();this._ensureChildren()},i.prototype.getItem=function(n){for(var i,t=0,r=this._menuItems.length;t<r;t++)if(i=this._menuItems[t],i&&n===i.getCommandId())return i;return null},i.prototype.getItems=function(){return this._menuItems},i.prototype.getItemByTag=function(n){for(var i,t=0,r=this._menuItems.length;t<r;t++)if(i=this._menuItems[t],i&&n===i._item.tag)return i;return null},i.prototype.getMenuItemSpecs=function(){return this._items},i.prototype.getParentMenu=function(){return this._parent&&this._parent._parent instanceof i&&this._parent._parent},i.prototype.getMenuPinningOptions=function(){var n=this._options.item;return n&&n.pinningMenuOptions?n.pinningMenuOptions:this._options.pinningMenuOptions},i.prototype.getCommandState=function(n,t){t=t||this;var i=null;return typeof this._options.getCommandState=="function"&&(i=this._options.getCommandState.call(t,n,t)),(i===null||typeof i=="undefined")&&(i=this._commandStates&&this._commandStates[n]),(i===null||typeof i=="undefined")&&this._parent&&typeof this._parent.getCommandState=="function"&&(i=this._parent.getCommandState(n,t)),typeof i=="function"&&(i=i.call(t,n,t)),i},i.prototype.updateCommandStates=function(t){n.prototype.updateCommandStates.call(this,t);this._skipUpdateMenuItemStates||this._updateMenuItemStates()},i.prototype.updateItems=function(n){this._updateItems(n,!0)},i.prototype._updateItems=function(n,t){if(!this._disposed){var i=this._menuItems.length;this._updateItemsWithContributions(n,this._contributedItems||[]);t&&this._refreshContributedMenuItems();i===0&&this._menuItems.length>0&&this._visible&&this._parent&&this._parent._element&&this._parent._element[0]===document.activeElement&&this.selectFirstItem()}},i.prototype._updateItemsWithContributions=function(n,t){this._disposed||(this._fire("menuUpdatingContributedItems",{source:this,existingItems:n,contributedItems:t}),n||(n=[]),Array.isArray(n)&&(n=$.grep(n,function(n){return!n.isContribution}),t&&t.length&&(n=n.concat(t))),this._contributedItems=t,this._updateCombinedSource(n),this._fire(i.CONTRIBUTION_ITEMS_UPDATED_EVENT,{source:this,existingItems:n,contributedItems:t}))},i.prototype._updateCombinedSource=function(n){var t,i,r;if(!this._disposed){if(i=!1,this._element[0].contains(document.activeElement)&&document.activeElement instanceof HTMLLIElement&&(i=!0,t=this._selectedItem&&this._selectedItem.getCommandId(),this._parent instanceof et&&this._parent.focus()),this._parent instanceof et&&n&&this._parent.getElement().attr({"aria-haspopup":String(n.length>0),"aria-expanded":this._visible}),this._asyncLoadingDelay||this._contributedItemsDelay){this._menuUpdateNeeded=!0;this._itemsSource=n;this.getOwner().focus();return}this._clear();this._itemsSource=n;this._initialized&&(this._menuUpdateNeeded=!1,this._itemsSource=this.getGroupedItems(),this._ensureChildren(),this.updateMenuItemStates(),typeof this._positioningRoutine=="function"&&this._positioningRoutine.call(this),i&&(r=t&&this.getItem(t),r?r.select():this.selectFirstItem()),this._shouldSelectFirstItem&&(this._shouldSelectFirstItem=!1,this.selectFirstItem()))}},i.prototype.getGroupedItems=function(){var n,t,i;if(!Array.isArray(this._itemsSource)||(n=[],t={__ungrouped__:[]},this._itemsSource.forEach(function(n){n.groupId&&(!n.separator||n.separator&&n.text)?t[n.groupId]?t[n.groupId].push(n):t[n.groupId]=[n]:t.__ungrouped__.push(n)}),t.__ungrouped__.length===this._itemsSource.length))return this._itemsSource;for(i=null,t.__ungrouped__=t.__ungrouped__.reduce(function(n,t,r,u){return t.separator&&!t.text&&(i&&i.separator||n.length===0||r===u.length-1)||n.push(t),i=t,n},[]),$.each(t,function(t,i){if(t==="__ungrouped__")return!0;Array.prototype.push.apply(n,i);n.push({separator:!0,isGroupSeparator:!0})}),(t.__ungrouped__.length===0||this._options.doNotSeparateUngroupedItems)&&n.splice(n.length-1,1),Array.prototype.push.apply(n,t.__ungrouped__);n.length>0&&n[n.length-1].separator;)n.splice(n.length-1,1);return n},i.prototype.appendItems=function(n){Array.isArray(n)&&n.length&&this.updateItems((this._itemsSource||[]).slice(0).concat(n))},i.prototype.appendItem=function(n){this._createChildMenuItem(n);this._items.push(n)},i.prototype.moveMenuItemAfter=function(n,t){var i;if(n===t)return!0;var f=this._children.indexOf(n),r=this._menuItems.indexOf(n),e=this._items.indexOf(n._item),o=this._children.indexOf(t)+1,u=this._menuItems.indexOf(t)+1,s=this._items.indexOf(t._item)+1;if(f<0||r<0||e<0||o<0||u<0||s<0)return!1;for(v.reorder(this._children,f,o,1),v.reorder(this._menuItems,r,u,1),v.reorder(this._items,e,s,1),i=Math.min(r,u);i<this._menuItems.length;i++)this._menuItems[i].setIndex(i);return n._element.detach(),n._element.insertAfter(t._element),!0},i.prototype.removeItem=function(n){for(var i,t=0,r=this._children;t<r.length;t++)if(i=r[t],i instanceof ot&&i._item===n)return this.removeMenuItem(i);return!1},i.prototype.removeMenuItem=function(n){var t=this._children.indexOf(n),i=this._menuItems.indexOf(n),r=this._items.indexOf(n._item);return t<0||r<0?!1:(this._children.splice(t,1),i>=0&&this._menuItems.splice(i,1),this._items.splice(r,1),n.dispose(),!0)},i.prototype._updateAllSourceMenus=function(){var t=this,n=[];this._items.forEach(function(i){i.pinningOptions&&n.indexOf(i.pinningOptions.groupId)<0&&(n.push(i.pinningOptions.groupId),t.updateSourceMenu(i.pinningOptions.groupId))})},i.prototype.updateSourceMenu=function(n){var i=this.getMenuPinningOptions()||{},r,t;i.isPinningTarget&&i.hideEmptySourceMenu&&(r=v.first(this._menuItems,function(t){return t._item&&t._item.pinningOptions&&t._item.pinningOptions.groupId===n&&!t.isPinned()}),t=v.first(this._menuItems,function(t){var r=t.getSubMenu(),i=r&&r.getMenuPinningOptions();return i&&i.isPinningSource&&i.groupId===n}),t)&&t.setIsHidden(!r)},i.prototype._enhance=function(t){n.prototype._enhance.call(this,t);this._enhanceChildren()},i.prototype._getMenuItemType=function(){return ot},i.prototype.getMenuItemOptions=function(n,t){return $.extend({earlyInitialize:!1,item:n,align:this.getMenuItemAlignment(),overflow:this._options.overflow},t)},i.prototype._getFirstMenuItem=function(){return this._getNextEnabledItem(0)},i.prototype._selectItem=function(n,t,i){if((t===void 0&&(t=!1),i===void 0&&(i=!0),this._selectedItem&&this._selectedItem!==n&&(this._selectedItem.removeHighlight(),this._selectedItem.removeFocus()),this._selectedItem=n,n)&&(n.showHoverHighlight(),!t)){var r=this.getOwner();r._focusItem=n;this._selectedItem.setFocus(i)}},i.prototype.selectDefaultItem=function(n){n||p.tryFocus(this._element)},i.prototype.selectFirstItem=function(){var n=this._getFirstMenuItem();return n?(this._selectItem(n),!0):(this._shouldSelectFirstItem=!0,!1)},i.prototype.selectLastItem=function(){var n=this._getPrevEnabledItem(-1,{rollOver:!0});n&&this._selectItem(n)},i.prototype.selectNextItem=function(){var t=0,r=this._menuItems,i=this._selectedItem,n;return r.length>0&&(i&&(t=i.getIndex()+1),n=this._getNextEnabledItem(t),n)?(n.select(),!0):!1},i.prototype.selectPrevItem=function(){var t=-1,r=this._menuItems,i=this._selectedItem,n;return r.length>0&&(i&&(t=i.getIndex()-1),n=this._getPrevEnabledItem(t),n)?(n.select(),!0):!1},i.prototype.selectDown=function(){if(this._menuItems.length>0){var n=this._getNextFocusableItem(this._selectedItem?this._selectedItem.getIndex()+1:0,{rollOver:!0});if(n)return n.select(),this._ensureVisible(n),!0}return!1},i.prototype.selectUp=function(){if(this._menuItems.length>0){var n=this._getPrevFocusableItem(this._selectedItem?this._selectedItem.getIndex()-1:-1,{rollOver:!0});if(n)return n.select(),this._ensureVisible(n),!0}return!1},i.prototype.selectRight=function(){return this._selectedItem&&this._selectedItem.tryShowSubMenu({immediate:!0})?(this._selectedItem.getSubMenu().selectFirstItem(),!0):this.getOwner()!==this?this.getOwner().selectRight({redirected:!0}):void 0},i.prototype.selectLeft=function(){return this._parent&&this._parent._parent!==this.getOwner()?(this.hide({immediate:!0}),this._parent.select(),!0):this.getOwner()!==this?this.getOwner().selectLeft({redirected:!0}):void 0},i.prototype.show=function(n){var f=n&&n.immediate===!0,e=n?n.showTimeout:undefined,t=n&&n.callback,i=n?n.element:null,r=n?n.align:rt.RightJustify,u=(n&&n.setFocus)!==!1;if(!i)throw new Error("options.element is required.");return f?(this._showPopup(i,r,u),t&&t()):this._startShowTimeout(i,r,u,e||this.getOwner()._options.showTimeout,t),!0},i.prototype.hide=function(n){var i=n&&n.immediate===!0,r=n?n.hideTimeout:undefined,t=n?n.callback:undefined;i?(this._hidePopup(),t&&t()):this._startHideTimeout(r||this.getOwner()._options.hideTimeout,t)},i.prototype.hideChildren=function(n,t){var i,f,r,u=this._children,e=t&&t.immediate===!0,o=n&&n._item&&n._item.splitDrop;if(Array.isArray(u))for(i=0,f=u.length;i<f;i++)r=u[i],r!==n&&r!==o&&r.hideSubMenu({immediate:e})},i.prototype.escape=function(){return this.hide({immediate:!0}),this._parent&&this._parent.escaped(),!0},i.prototype.ownFocus=function(){this._selectItem(this._selectedItem)},i.prototype.attach=function(n){this._parent!==n&&this._visible&&this.hide({immediate:!0});this._parent=n},i.prototype.getMenuItemAlignment=function(){return"right-justify"},i.prototype.updateMenuItemStates=function(){try{this._skipUpdateMenuItemStates=!0;this._fireUpdateCommandStates(this)}finally{this._skipUpdateMenuItemStates=!1}this._updateMenuItemStates()},i.prototype.executeAction=function(n){var i;return typeof this._options.executeAction=="function"&&(i=this._options.executeAction.call(this,n)),i!==!1&&(i=t.menuManager.executeCommand(n)),i},i.prototype._ensureVisible=function(n){if(n&&n.getElement()){var f=n.getElement(),t=this.getElement(),r=f.outerHeight(!0),i=n.getIndex()*r,u=i+r;i<t.scrollTop()?t.scrollTop(i):u-t.height()>t.scrollTop()&&t.scrollTop(u-t.height())}},i.prototype._getItems=function(){var n=this,i,t=!1;return this._items||(this._itemsSource?typeof this._itemsSource=="function"?(i=this._itemsSource.call(this,this.getOwner().getContextInfo(),function(i){n._asyncLoadingDelay&&(n._asyncLoadingDelay.cancel(),n._asyncLoadingDelay=null);n._items=i||[];t?n._disposed||n._updateItems(n._items,!1):t=!0},function(i){n._asyncLoadingDelay&&(n._asyncLoadingDelay.cancel(),n._asyncLoadingDelay=null);n._items=[{text:ui(i),icon:"icon-tfs-build-failed"}];t?n._disposed||n._updateItems(n._items,!1):t=!0;ri(i)}),t||(t=!0,i||(i=[],this._asyncLoadingDelay=y.delay(this,200,function(){n._asyncLoadingDelay=null;n._updateItems([{text:l.MenuItemsLoading}],!1)})),this._items=i)):this._items=this._itemsSource:this._items=[]),this._items},i.prototype._clear=function(){this._element[0].contains(document.activeElement)&&p.tryFocus(this._element);n.prototype._clear.call(this);this._menuItems=[];this._items=null;this._childrenCreated=!1},i.prototype._createChildMenuItem=function(n,t){var i,r;return r=this.getMenuItemOptions(n,n?n.extraOptions:undefined),i=t?e.Enhancement.enhance(this._getMenuItemType(),t,r):e.BaseControl.createIn(this._getMenuItemType(),this._element,r),i._parent=this,this._children.push(i),i._item.separator||(i.setIndex(this._menuItems.length),this._menuItems.push(i)),n.splitDropOptions&&(n.childItems||n.splitDropOptions.childItems)&&this._createSplitDropMenuItem(n,i),i.initialize(),i},i.prototype._createSplitDropMenuItem=function(n,t){var i=$.extend(n.splitDropOptions,{splitDropItem:t,childItems:n.splitDropOptions.childItems||n.childItems,showText:!1,showHtml:!1,toggled:n.toggled,disabled:n.disabled,title:n.splitDropOptions&&n.splitDropOptions.title,noIcon:n.splitDropOptions.noIcon!==undefined?n.splitDropOptions.noIcon:!0,cssClass:n.splitDropOptions.cssClass||"split-drop",splitDropOptions:null});n.splitDrop=this._createChildMenuItem(i);n.childItems=null;t._element.addClass("split-drop-item")},i.prototype._ensureChildren=function(){var t=this,n;this._childrenCreated||($.each(this._getItems(),function(n,i){t._createChildMenuItem(i)}),this._childrenCreated=!0,n=this.getMenuPinningOptions(),n&&n.isPinningTarget&&this._updateAllSourceMenus(),this.updateAriaSetProperties())},i.prototype._enhanceChildren=function(){var n=this,t=this._getItems();this._element.children("li").each(function(i,r){n._createChildMenuItem($.extend({},t[i],{decorated:!0}),$(r))});this._childrenCreated=!0;this.updateAriaSetProperties()},i.prototype.updateAriaSetProperties=function(){var i,t,r,u,f,n;if(this._menuItems){for(i=0,t=0,r=this._menuItems;t<r.length;t++)u=r[t],u.isFocusable()&&i++;for(f=0,n=0;n<this._menuItems.length;++n)this._menuItems[n].isFocusable()&&this._menuItems[n].getElement().attr({"aria-posinset":++f,"aria-setsize":i})}},i.prototype._getNextFocusableItem=function(n,t){return this._getNextItem(function(n){return n.isFocusable()},n,t)},i.prototype._getNextEnabledItem=function(n,t){return this._getNextItem(function(n){return n.isEnabled()},n,t)},i.prototype._getNextItem=function(n,t,i){function f(t,i){for(var f,r=t;r<=i;r++)if(f=u[r],n(f))return f;return null}var e=i&&i.rollOver===!0,r,u=this._menuItems;return(t=t||0,r=f(t,u.length-1),r)?r:e&&(r=f(0,t),r)?r:null},i.prototype._getPrevFocusableItem=function(n,t){return this._getPrevItem(function(n){return n.isFocusable()},n,t)},i.prototype._getPrevEnabledItem=function(n,t){return this._getPrevItem(function(n){return n.isEnabled()},n,t)},i.prototype._getPrevItem=function(n,t,i){function f(t,i){for(var f,r=i;r>=t;r--)if(f=u[r],n(f))return f;return null}var e=i&&i.rollOver===!0,r,u=this._menuItems;return(t=t||0,r=f(0,t),r)?r:e&&(r=f(t,u.length-1),r)?r:null},i.prototype._ensurePopup=function(){this._ensureInitialized()&&(this._popupElement=this._element);this._ensureChildren()},i.prototype._getPopupAlign=function(n){switch(n){case rt.RightJustify:return["left-top","right-top"];case rt.RightBottom:return["right-top","right-bottom"];case rt.LeftTop:return["left-bottom","left-top"]}return["left-top","left-bottom"]},i.prototype._showPopup=function(n,t,r){var f=this,u;this._clearTimeouts();this._ensurePopup();this.updateAriaSetProperties();this._pinElement=n;y.delay(this,300,function(){f._attachAncestorScroll(n)});this.updateMenuItemStates();u=this._getPopupAlign(t);this._element.show();this._parent instanceof et&&this._parent.getElement().attr("aria-expanded","true");this._positioningRoutine=function(){var f,e,o,t,r;(this._options.alignToMarkerVertical||this._options.alignToMarkerHorizontal)&&(typeof this._options.getAlignmentMarkers=="function"?(o=this._options.getAlignmentMarkers.call(this,this._element,n),f=o.elementAlignmentMarker,e=o.baseAlignmentMarker):(f=this._element.find(".alignment-marker").first(),e=n.find(".alignment-marker:not(.sub-menu .alignment-marker)").first()));t=this._options.overflow;t||(r=this._parent&&this._parent._parent,t=!(r instanceof i)||r instanceof vt||r instanceof lt?"fit-flip":"flip-flip");p.Positioning.position(this._element,n,{elementAlign:u[0],baseAlign:u[1],overflow:t,supportScroll:!0,scrollByMarker:this._options.scrollByMarker,alignToMarkerHorizontal:this._options.alignToMarkerHorizontal,alignToMarkerVertical:this._options.alignToMarkerVertical,elementAlignmentMarker:f,baseAlignmentMarker:e})};this._element[0].style.removeProperty("left");this._element[0].style.removeProperty("top");this._positioningRoutine.call(this);this._visible=!0;this._shownTime=Date.now();this.getOwner()._updateSubMenuVisibleState();r&&this.ownFocus()},i.prototype._hidePopup=function(){this._parent instanceof et&&this._parent.getElement()!=null&&this._parent.getElement().attr("aria-expanded","false");this._visible&&this._options.item.dynamic&&this._clear();this._clearTimeouts();this._visible=!1;this._pinElement&&(this._detachAncestorScroll(this._pinElement),this._pinElement=null);this._popupElement&&this._popupElement.hide();delete this._positioningRoutine;this.hideChildren(null,{immediate:!0});this.getOwner()._updateSubMenuVisibleState()},i.prototype._updateMenuItemStates=function(){function o(){return r&&u}function f(){var n=o();t&&t.isHidden()===n&&t.update($.extend(t._item,{separator:!0,hidden:!n}))}for(var n,t,r=!1,i=!1,u=!1,e=0,s=this._children;e<s.length;e++)n=s[e],n.isSeparator()&&!n.isLabel()?(i=!0,t=n,f()):(n.isHidden()||i?!n.isHidden()&&i&&(r=!0):u=!0,t&&o()&&!n.isHidden()&&(f(),t=null,i=!1,u=!0,r=!1),n._updateState(),n.updateText());f()},i.prototype._startShowTimeout=function(n,t,i,r,u){var f=this;this._clearTimeouts();this.delayExecute("show",r,!0,function(){f.isDisposed()||(f._showPopup(n,t,i),u&&u())})},i.prototype._startHideTimeout=function(n,t){var i=this;this._clearTimeouts();this.delayExecute("hide",n,!0,function(){i._hidePopup();t&&t()})},i.prototype._clearTimeouts=function(){this.cancelDelayedFunction("show");this.cancelDelayedFunction("hide")},i.prototype._attachAncestorScroll=function(n){this._bind($(n).parents(),"scroll",nt(this,this._onParentScroll))},i.prototype._detachAncestorScroll=function(n){this._unbind($(n).parents(),"scroll")},i.prototype._dispose=function(){this._pinElement&&this._detachAncestorScroll(this._pinElement);this._asyncLoadingDelay&&(this._asyncLoadingDelay.cancel(),this._asyncLoadingDelay=null);this._contributedItemsDelay&&(this._contributedItemsDelay.cancel(),this._contributedItemsDelay=null);this._options.executeAction=null;n.prototype._dispose.call(this)},i.prototype._onParentScroll=function(){p.BrowserCheckUtils.isEdge()&&this._mouseIsDown||this._hidePopup()},i.prototype._onMouseDown=function(){var n=this;p.BrowserCheckUtils.isEdge()&&(this._mouseIsDown=!0,this._bind(window.document,"mouseup",function(){n._mouseIsDown=!1;n._unbind(window.document,"mouseup")},!0))},i.prototype._onMenuKeyDown=function(n){var t=!n.ctrlKey&&!n.altKey&&!n.shiftKey;switch(n.keyCode){case tt.DOWN:if(t)return this.selectDown(),!1;break;case tt.UP:if(t)return this.selectUp(),!1;break;case tt.RIGHT:if(t)return this.selectRight(),!1;break;case tt.LEFT:if(t)return this.selectLeft(),!1;break;case tt.ESCAPE:if(this.escape())return!1;break;case tt.HOME:if(t)return this.selectFirstItem(),!1;break;case tt.END:if(t)return this.selectLastItem(),!1}},i.prototype.setContributedItemOptions=function(n,t,i){var r=!1;(this._options.contributionIds||[]).join(";")!==n.join(";")&&(this._options.contributionIds=n,r=!0);typeof t!="undefined"&&this._options.contributionType!==t&&(this._options.contributionType=t,r=!0);typeof i!="undefined"&&this._options.contributionQueryOptions!==i&&(this._options.contributionQueryOptions=i,r=!0);r&&(this._menuContributionProvider=null,this._menuUpdateNeeded=!0,this.refreshContributedItems())},i.prototype.refreshContributedItems=function(){var n=this;!this._menuContributionProvider&&this._options.contributionIds&&(this._menuContributionProvider=new bt(this,r.getDefaultWebContext(),this._options.contributionIds,this._options.contributionType,this._options.contributionQueryOptions,this._getContributionContext.bind(this),this._contributionProviderOptions),this._contributedItemsDelay=y.delay(this,100,function(){n._contributedItemsDelay=null;n._updateItems(n._items,!1)}));this._refreshContributedMenuItems()},i.prototype._refreshContributedMenuItems=function(){var n=this;this._menuContributionProvider&&(this._contributionPromise=this._menuContributionProvider.getContributedMenuItems(this._getContributionContext()).then(function(t){n._contributedItemsDelay&&(n._contributedItemsDelay.cancel(),n._contributedItemsDelay=null);(n._menuUpdateNeeded||t&&t.length)&&n._updateItemsWithContributions(n._itemsSource,t)},function(n){n.name=w.format("{0}.GetContributedMenuItemsError",n.name||"");n.message="getContributedMenuItems() failed in Menu._refreshContributedMenuItems: "+b.getErrorMessage(n);d.publishErrorToTelemetry(n,!1,k.Level.Warning,{thirdParty:!0})}))},i.prototype.updateContributedMenuItems=function(n){var t=this;this._contributionPromise.then(function(){var i=[];(function r(n){Array.prototype.push.apply(i,n);n.forEach(function(n){n.childItems&&n.childItems.length>0&&r(n.childItems)})})(n);i=i.filter(function(n){return!!n.id});t._updateContributedMenuItems(i)})},i.prototype._getContributionContext=function(){var n=this._options.contextInfo?$.extend({},this._options.contextInfo.item):{};return typeof n.getContributionContext=="function"?n=n.getContributionContext():typeof this._options.getContributionContext=="function"&&(n=this._options.getContributionContext()),n},i.enhancementTypeName="tfs.menu.menu",i.CONTRIBUTION_ITEMS_UPDATED_EVENT="menuContributedItemsUpdated",i}(et);t.Menu=ht;b.initClassPrototype(ht,{_items:null,_itemsSource:null,_menuItems:null,_selectedItem:null,_focusItem:null,_childrenCreated:!1,_popupElement:null,_visible:!1,_active:!1,_skipUpdateMenuItemStates:!1,_positioningRoutine:null,_pinElement:null});ct=function(n){function i(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._focusing=!1,i.setEnhancementOptions({role:"menu"}),i._align=rt.parse(i._options.align),i}return __extends(i,n),i.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({markUnselectable:!0,showIcon:!0,showTimeout:500,hideTimeout:500},t))},i.prototype.setShowIcon=function(n){this._options.showIcon=n},i.prototype.initialize=function(){n.prototype.initialize.call(this);this._fire("menuInitialized",{menu:this})},i.prototype._decorate=function(){var t=this;n.prototype._decorate.call(this);this._updateTabIndex(!0);this._bind(this._element,"keydown",this._onKeyDown.bind(this));this._bind(this._element,"focus",this._onFocus.bind(this));this._element[0].addEventListener("blur",this._onChildBlur.bind(this),!0);this._element[0].addEventListener("focus",this._onChildFocus.bind(this),!0);this._options.emptyMenuInTabOrder===!1&&this._bind(ht.CONTRIBUTION_ITEMS_UPDATED_EVENT,function(){t._isOwned(document.activeElement)||t._updateTabIndex()})},i.prototype.getMenuItemAlignment=function(){return this._options.popupAlign||n.prototype.getMenuItemAlignment.call(this)},i.prototype.getMenuItemOptions=function(t,i){return n.prototype.getMenuItemOptions.call(this,t,$.extend({immediateShowHide:!0,clickToggles:!0,type:"static"},i))},i.prototype.escape=function(){return!1},i.prototype.escaped=function(){},i.prototype.isActive=function(){return this._active},i.prototype.activate=function(n){if(n===void 0&&(n=!0),!this._activating){this._activating=!0;try{this._clearBlurTimeout();this._active=!0;n&&p.tryFocus(this._focusElement);typeof this._options.onActivate=="function"&&this._options.onActivate.call(this)}finally{this._activating=!1}}},i.prototype._hide=function(){this._active&&(this.hide({immediate:!0}),this.ownFocus())},i.prototype._blur=function(){this._clearBlurTimeout();this.hide({immediate:!0});this._disposed||this._selectItem(null);this._active=!1;typeof this._options.onDeactivate=="function"&&this._options.onDeactivate.call(this);this._disposed||this._updateTabIndex()},i.prototype._updateSubMenuVisibleState=function(){var n,u,t,r=this._menuItems,i;if(this._subMenuVisible=!1,Array.isArray(r))for(n=0,u=r.length;n<u;n++)if(t=r[n],t.hasSubMenu()&&(i=t.getSubMenu(!1),i&&i._parent===t&&i._visible)){this._subMenuVisible=!0;break}},i.prototype._updateTabIndex=function(n){this._options.inTabOrder!==!1&&(this._options.emptyMenuInTabOrder!==!1||this._menuItems.length>0)?this._element.attr("tabIndex",0):n&&this._element.attr("tabIndex",-1)},i.prototype._onKeyDown=function(n){if(n.keyCode===tt.TAB)this._immediateBlur=!0;else if(n.keyCode===tt.F10&&n.shiftKey)return this._onContextMenu(n)},i.prototype._onFocus=function(){var n=this,t;this._focusing||(this._focusing=!0,this.activate(!1),!this._selectedItem||this._selectedItem.getIndex()<0||!this._selectedItem._element?(t=this._getFirstMenuItem()||this._getNextFocusableItem(0),t&&y.delay(null,0,function(){n._selectItem(t)})):y.delay(null,0,function(){n._selectedItem&&n._selectedItem.select()}),this._focusing=!1)},i.prototype._isOwned=function(n){if(this._element[0].contains(n)){for(var t=n;t!==this._element[0]&&t!==document.body;t=t.parentElement)if(t.classList.contains("unfocusable"))return!1;return!0}return!1},i.prototype._onChildFocus=function(n){if(this._isOwned(n.target)){this._element.attr("tabindex","-1");var t=e.Enhancement.getInstance(ot,$(n.target)),i=t&&t.getParentMenu();t&&i&&i._selectItem(t)}},i.prototype._onChildBlur=function(){var n=this;y.delay(this,t.BLUR_CLOSE_TIMEOUT,function(){n._disposed||n._isOwned(document.activeElement)&&document.hasFocus()||(n._options.inTabOrder!==!1&&n._updateTabIndex(),n._immediateBlur?(n._immediateBlur=!1,n._blur()):n._blur())})},i.prototype._proceedBlur=function(){this._canBlur=!0},i.prototype._clearBlurTimeout=function(){this.cancelDelayedFunction("blur")},i.prototype._onParentScroll=function(){this._hide()},i.prototype._onResize=function(){this._hide()},i.prototype._onContextMenu=function(){return this.showSubMenuOnFocusedItem()},i.prototype.showSubMenuOnFocusedItem=function(){var n=this._focusItem;return n&&n.tryShowSubMenu({immediate:!0}),!1},i}(ht);t.MenuOwner=ct;b.initClassPrototype(ct,{_focusItem:null,_focusElement:null,_activating:!1,_subMenuVisible:!1,_align:null,_canBlur:!1,_immediateBlur:!1});lt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.setEnhancementOptions({role:"menubar",coreCssClass:"menu-bar"+(i._options.useBowtieStyle?" bowtie-menus":"")}),i._orientation=ft.parse(i._options.orientation),i._type=ut.Static,i._contributionProviderOptions={defaultTextToTitle:!1},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t)},t.prototype.getMenuItemAlignment=function(){return this._orientation===ft.Horizontal?"left-bottom":"right-justify"},t.prototype.selectUp=function(t){return this._orientation===ft.Vertical?n.prototype.selectUp.call(this):n.prototype.selectLeft.call(this,t)},t.prototype.selectDown=function(t){return this._orientation===ft.Vertical?n.prototype.selectDown.call(this):n.prototype.selectRight.call(this,t)},t.prototype.selectLeft=function(){if(this._orientation===ft.Vertical)return n.prototype.selectLeft.call(this);var t=this._subMenuVisible;return(this.hideChildren(null,{immediate:!0}),n.prototype.selectUp.call(this),t&&(this._subMenuVisible=!0,this._selectedItem.tryShowSubMenu({immediate:!0})))?(this._selectedItem.getSubMenu().selectFirstItem(),!0):!1},t.prototype.selectRight=function(){if(this._orientation===ft.Vertical)return n.prototype.selectRight.call(this);var t=this._subMenuVisible;return(this.hideChildren(null,{immediate:!0}),n.prototype.selectDown.call(this),t&&(this._subMenuVisible=!0,this._selectedItem.tryShowSubMenu({immediate:!0})))?(this._selectedItem.getSubMenu().selectFirstItem(),!0):!1},t.tryActivate=function(n){var t=this._getMenuBar(n);return t?(t.focus(),!0):!1},t.tryShowSubMenu=function(n){var t=this._getMenuBar(n);return t?(t.focus(),y.delay(this,0,function(){t.showSubMenuOnFocusedItem()}),!0):!1},t.prototype.focus=function(){this.activate()},t._getMenuBar=function(n){var t=$(n);return e.Enhancement.getInstance(at,t)},t.enhancementTypeName="tfs.menu.menubar",t}(ct);t.MenuBarO=lt;at=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(lt);t.MenuBar=at;gt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i.setEnhancementOptions({role:"toolbar"}),i}return __extends(t,n),t.prototype._getMenuItemType=function(){return ni},t}(at);t.Toolbar=gt;ni=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.getAriaRole=function(){return"listitem"},t}(ot);b.initClassPrototype(lt,{_orientation:ft.Horizontal});ti=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.escaped=function(){n.prototype.escaped.call(this);this._parent.escaped()},t}(ot);vt=function(n){function t(t){var i=n.call(this,$.extend({inTabOrder:!1},t))||this;return i.setEnhancementOptions({coreCssClass:"menu-popup"+(i._options.useBowtieStyle?" bowtie-menus":""),hidden:!0}),i._type=ut.Popup,i._hidden=i._options.hidden===!0,i._onHide=i._options.onHide,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t)},t.prototype._getMenuItemType=function(){return ti},t.prototype._decorate=function(){n.prototype._decorate.call(this);this._hidden===!0&&this._element.addClass("invisible")},t.prototype.popup=function(n,t){var r=this;if(this._escapeFocusReceiver=n,this._popupPinElement=t,this._floating=!0,this._active)this.escaped();else{var i=null,f=!1,u=function(){i&&(i.cancel(),i=null);r._active||f||(r.activate(),r._showPopupMenu(),f=!0)};this._contributionPromise?(this._contributionPromise.then(u),i=y.delay(this,500,u)):u()}},t.prototype._showPopupMenu=function(){var i=this._getFirstMenuItem(),n=i.getSubMenu(),t=this._options.setFocus!==!1;n&&(n.show({immediate:!0,element:this._popupPinElement,align:this._align,setFocus:t}),t&&n.selectDefaultItem())},t.prototype._updateItemsWithContributions=function(n,t){if(this._contributedItems=t,n&&n.length>0&&n[0].childItems){var i=$.grep(n[0].childItems,function(n){return!n.isContribution});n[0].childItems=i.concat(t)}else n=[{childItems:t}];this._updateCombinedSource(n)},t.prototype._updateCombinedSource=function(t){n.prototype._updateCombinedSource.call(this,t);this._active&&this._showPopupMenu()},t.prototype.selectUp=function(){return!0},t.prototype.selectDown=function(t){var i=t&&t.redirected;return!i&&this._align!==rt.RightJustify?n.prototype.selectRight.call(this):!1},t.prototype.selectFirstItem=function(){var t=this._getFirstMenuItem(),n=t.getSubMenu();return n._visible?n.selectFirstItem():!1},t.prototype.selectLeft=function(){return!0},t.prototype.selectRight=function(t){var i=t&&t.redirected;return!i&&this._align===rt.RightJustify?n.prototype.selectRight.call(this):!1},t.prototype.escaped=function(){this._floating&&(this._floating=!1,this._escapeFocusReceiver&&(this._escapeFocusReceiver.focus(),this._escapeFocusReceiver=null,typeof this._options.onPopupEscaped=="function"&&this._options.onPopupEscaped.call(this)))},t.prototype._hidePopup=function(){this._onHide&&this._onHide(this._escapeFocusReceiver);n.prototype._hidePopup.call(this)},t.enhancementTypeName="tfs.menu.popup",t}(ct);t.PopupMenuO=vt;kt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(vt);t.PopupMenu=kt;b.initClassPrototype(vt,{_align:rt.RightJustify,_floating:!1,_hidden:!1,_escapeFocusReceiver:null});ii=function(n){function i(t){return n.call(this,t)||this}return __extends(i,n),i.prototype.initialize=function(){var t=this._element.data();n.prototype.initialize.call(this);this._bind(t.commandAction||"click",nt(this,this.onCommandExecute));t.commandCompleteEvent&&this._bind(window,t.commandCompleteEvent,nt(this,this.onCommandComplete))},i.prototype.onCommandExecute=function(){var n=this._element.data();return n.commandName&&(this._element.prop("disabled",!0),this._element.prop("aria-disabled",!0),t.menuManager.executeCommand(new c.CommandEventArgs(n.commandName,n.commandArg,this))),!1},i.prototype.onCommandComplete=function(){this._element.prop("disabled",!1);this._element.prop("aria-disabled",!1)},i}(e.BaseControl);e.Enhancement.registerEnhancement(at,".menu-bar.enhance");e.Enhancement.registerEnhancement(kt,".menu-popup.enhance");e.Enhancement.registerEnhancement(ii,".single-command");t.sortMenuItems=fi;b.tfsModuleLoaded("VSS.UI.Controls.Menus",t)});

define("VSS/Controls/Splitter",["require","exports","VSS/Controls","VSS/Diag","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Core","VSS/Utils/UI","VSS/LoaderPlugins/Css!Splitter"],function(n,t,i,r,u,f,e){var o;Object.defineProperty(t,"__esModule",{value:!0});t.Splitter=t.SplitterO=void 0;var s=f.delegate,h=e.domElem,c=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._screenXY="pageX",i._cssPosProp="left",i._cssSizeProp="width",i._leftFix=!0,i._deltaMultiplier=1,i._dragStart=!1,i._ignoreWindowResize=!1,t&&t.initialSize&&(i._fixedSidePixels=t.initialSize),i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"splitter",vertical:!0,fixedSide:"left"},t))},t.prototype._enhance=function(t){var i,r;n.prototype._enhance.call(this,t);this.leftPane=t.children(".leftPane");this.handleBar=t.children(".handleBar");this.rightPane=t.children(".rightPane");this.handleBar.append(h("div","handleBar-hitTarget"));i=this._options;t.hasClass(o.VERTICAL_CLASS)?i.vertical=!0:t.hasClass(o.HORIZONTAL_CLASS)?i.vertical=!1:i.vertical===!0?t.addClass(o.VERTICAL_CLASS):t.addClass(o.HORIZONTAL_CLASS);i.expandState?this.expandState=i.expandState:this.getElement().hasClass("left-expand")?this.expandState="left":this.getElement().hasClass("right-expand")&&(this.expandState="right");this.getElement().hasClass("right-fix")?i.fixedSide="right":i.fixedSide==="right"?t.addClass("right-fix"):i.fixedSide="left";r=i.collapsedLabel;r||(r=t.data().collapsedLabel);r&&this.setCollapsedLabel(r)},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._setupHandleBar();var t=this._options;this.setMaxWidth(t.maxWidth);this.setMinWidth(t.minWidth);this._configureCssProps();this._isCollapsed()||this._setInitialSize();this._attachEvents();(this._options.enableToggleButton||this._isToggleButtonEnabled())&&(this.getElement().addClass(o.TOGGLE_BUTTON_ENABLED_CLASS_NAME),this._ensureToggleButton(),this._isToggleButtonHotkeyEnabled()&&this._bind($(window.document),"keyup",s(this,this._onDocumentKeyup)));this.getElement().hasClass(o._noSplitCssClass)&&this._fixedSide.toggle(!1)},t.prototype._setupHandleBar=function(){var n=this.handleBar;n.attr({tabindex:this.isExpanded()?"0":"-1",role:"separator","aria-label":u.SplitterLabel});this._setAriaOrientation(this._options.vertical)},t.prototype._setInitialSize=function(){var n=0;this._options.initialSize>0&&(n=this._options.initialSize);n<=0&&(n=this.getElement().data().initialSize);n&&this.resize(n,!0,!1)},t.prototype.setMinWidth=function(n){this._minWidth=n;this.setAttribute("aria-valuemin",n,this.handleBar)},t.prototype.setMaxWidth=function(n){this._maxWidth=n;this.setAttribute("aria-valuemax",n,this.handleBar)},t.prototype._getAdjustedSize=function(n){var t=this._minWidth,i=this._maxWidth;return typeof t=="number"&&n<t&&(n=t),typeof i=="number"&&n>i&&(n=i),n},t.prototype.resize=function(n,t,i,r){var u,f,s,e,h;this.getElement().hasClass(o._noSplitCssClass)||this.getElement().is(":visible")&&(this.getElement().toggleClass(o.COLLAPSED_CLASS_NAME,!1),n!==null&&n!==undefined&&(n<0?n=0:(e=this.getElement()[this._cssSizeProp]()-this.handleBar[this._cssSizeProp](),n>e&&(h=this.leftPane[this._cssSizeProp](),e<h&&(e=h),n=e))),u=n===null||n===undefined?"":n,i?(s=this._options.animationSpeed||o.DEFAULT_ANIMATION_SPEED,f=this._createAnimationOption(this._cssSizeProp,u+"px"),this._fixedSide.animate(f,s),f=this._createAnimationOption(this._cssPosProp,u+"px"),this._fillSide.animate(f,s),this.handleBar.animate(f,s,r)):(this._fixedSide.css(this._cssSizeProp,u),this._fillSide.css(this._cssPosProp,u),this.handleBar.css(this._cssPosProp,u),r&&r()),this._fixedSidePixels=n,this._layoutToggleButton(i),this.setAttribute("aria-valuenow",n,this.handleBar),t||this._fireWindowResize())},t.prototype.toggleExpanded=function(n){if((n===undefined||n!==this.isExpanded())&&(this.expandState?(this.removeExpand(),this.handleBar.attr("tabindex","0")):(this._options.fixedSide==="left"?this._expandInternal("right"):this._expandInternal("left"),this.handleBar.attr("tabindex","-1")),this.getElement().toggleClass(o.COLLAPSED_CLASS_NAME,!this.isExpanded()),this._setToggleButtonTooltip(),this._fireWindowResize(),this._fire("changed",this),this._options.onToggle))this._options.onToggle(this.isExpanded())},t.prototype.expand=function(){this.toggleExpanded(!0)},t.prototype.collapse=function(){this.toggleExpanded(!1)},t.prototype.isExpanded=function(){return!this.expandState},t.prototype.removeExpand=function(n){this.getElement().removeClass("left-expand");this.getElement().removeClass("right-expand");this.expandState=null;n?(this._layoutToggleButton(),this._fireWindowResize()):this.resize(this._fixedSidePixels)},t.prototype._expandInternal=function(n){var t=this.getElement();n||(n="left");n==="left"?t.removeClass("right-expand").addClass("left-expand"):t.removeClass("left-expand").addClass("right-expand");this.expandState=n;this._fixedSide.css(this._cssSizeProp,"");this._fillSide.css(this._cssPosProp,"");this.handleBar.css(this._cssPosProp,"");this._layoutToggleButton();this.setAttribute("aria-valuenow",0,this.handleBar)},t.prototype.getFixedSidePixels=function(){return this._fixedSidePixels},t.prototype.toggleSplit=function(n,t,i){var r=this,u;n?(this.getElement().removeClass(o._noSplitCssClass),this._savedFixedSidePixels!==undefined&&(this._fixedSidePixels=this._savedFixedSidePixels,this._savedFixedSidePixels=undefined),this._fixedSide.css("display",""),this.expandState?(this._expandInternal(this.expandState),this.getElement().addClass(o.COLLAPSED_CLASS_NAME),this._setToggleButtonTooltip(),this._fireWindowResize()):t?(u=this._fixedSidePixels||i,this.resize(0,!0,!1),this.resize(u,!0,!0)):this.resize(this._fixedSidePixels||i)):(this._savedFixedSidePixels=this._fixedSidePixels,this.resize(0,!0,t,function(){r.getElement().addClass(o._noSplitCssClass);r.getElement().removeClass(o.COLLAPSED_CLASS_NAME);r._fixedSide.css(r._cssSizeProp,"").css("display","none");r._fillSide.css(r._cssPosProp,"");r.handleBar.css(r._cssPosProp,"");r._fireWindowResize()}))},t.prototype.noSplit=function(n){this.toggleSplit(!1,n)},t.prototype.split=function(n,t){this.toggleSplit(!0,n,t)},t.prototype.toggleOrientation=function(n,t){if(n=Boolean(n),this._options.vertical!==n){var i=this.getElement();i.removeClass("left-expand");i.removeClass("right-expand");this.expandState=null;this._fixedSide.css(this._cssSizeProp,"");this._fillSide.css(this._cssPosProp,"");this.handleBar.css(this._cssPosProp,"");this._options.vertical=n;i.toggleClass(o.VERTICAL_CLASS,n);i.toggleClass(o.HORIZONTAL_CLASS,!n);this._configureCssProps();this._setAriaOrientation(n);this.resize(t)}},t.prototype.vertical=function(){this.toggleOrientation(!0)},t.prototype.horizontal=function(){this.toggleOrientation(!1)},t.prototype._setAriaOrientation=function(n){this.setAttribute("aria-orientation",n===!1?"vertical":"horizontal",this.handleBar)},t.prototype.setCollapsedLabel=function(n){var i=this,t;this.handleBar.children(":not(.handleBar-hitTarget)").remove();n&&(t=$(h("div","handlebar-label")).prependTo(this.handleBar).attr("title",n).bind("mousedown",function(n){i.toggleExpanded(!0);n.preventDefault();n.stopPropagation()}),$(h("span","handlebar-label-text")).appendTo(t).text(n))},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._options.vertical===!1?this.getElement().addClass(o.HORIZONTAL_CLASS):this.getElement().addClass(o.VERTICAL_CLASS);this._options.expandState&&(this.expandState=this._options.expandState,this.getElement().addClass(this.expandState==="left"?"left-expand":"right-expand"));this._options.fixedSide==="right"&&this.getElement().addClass("right-fix");this.leftPane=$(h("div","leftPane")).appendTo(this.getElement());this.handleBar=$(h("div","handleBar")).appendTo(this.getElement());this.rightPane=$(h("div","rightPane")).appendTo(this.getElement());this.handleBar.append(h("div","handleBar-hitTarget"));this._options.collapsedLabel&&this.setCollapsedLabel(this._options.collapsedLabel)},t.prototype._configureCssProps=function(){var n=this._leftFix=this._options.fixedSide==="left";n?(this._deltaMultiplier=1,this._fixedSide=this.leftPane,this._fillSide=this.rightPane):(this._deltaMultiplier=-1,this._fixedSide=this.rightPane,this._fillSide=this.leftPane);this._options.vertical===!1?(this._screenXY="pageX",this._cssSizeProp="width",this._cssPosProp=n?"left":"right"):(this._screenXY="pageY",this._cssSizeProp="height",this._cssPosProp=n?"top":"bottom");this._isCollapsed()&&(this.expandState=this._options.fixedSide==="left"?"right":"left")},t.prototype._attachEvents=function(){var n=this;this._bind(this.handleBar,"mousedown",s(this,this._handleBarMouseDown));this._bind(this.handleBar,"dblclick",s(this,this._handleBarDoubleClick));this._bind(this.handleBar,"mouseover",function(){n.handleBar.addClass("hover")});this._bind(this.handleBar,"mouseout",function(){n.handleBar.removeClass("hover")});this._bind(this.handleBar,"selectstart",function(){return!1});this._bind(this.handleBar,"keydown",this._handleBarKeydown.bind(this));e.attachResize(this.getElement(),s(this,this._onWindowResize))},t.prototype._ensureToggleButton=function(){if(!this._$toggleButton){var t=this.getElement(),n=t.find(".toggle-button");n.length===0&&(this._$toggleButtonIcon=$("<span/>").addClass("bowtie-icon"),n=$("<button/>").addClass("toggle-button").append(this._$toggleButtonIcon),n.insertBefore(t.children(".handleBar")));this._$toggleButton=n;this._setToggleButtonTooltip();this._layoutToggleButton();this._$toggleButton.click(s(this,this._onToggleButtonClick))}},t.prototype._layoutToggleButton=function(n){var t,i,r=this.isExpanded();this._$toggleButton&&(r?(this._measureFixedSide(),t=this._fixedSidePixels-(o.TOGGLE_BUTTON_MARGIN+o.TOGGLE_BUTTON_LENGTH)):t=o.TOGGLE_BUTTON_MARGIN,this._$toggleButtonIcon&&this._setToggleButtonIconClass(r),n?(i=this._createAnimationOption(this._cssPosProp,t+"px"),this._$toggleButton.animate(i,this._options.animationSpeed||o.DEFAULT_ANIMATION_SPEED)):this._$toggleButton.css(this._cssPosProp,t))},t.prototype._setToggleButtonIconClass=function(n){var t=this._options.fixedSide==="left",i="bowtie-icon ";i+=this._options.vertical?n?t?"bowtie-chevron-up":"bowtie-chevron-down":t?"bowtie-chevron-down":"bowtie-chevron-up":n?t?"bowtie-chevron-left":"bowtie-chevron-right":t?"bowtie-chevron-right":"bowtie-chevron-left";this._$toggleButtonIcon.removeClass().addClass(i)},t.prototype._setToggleButtonTooltip=function(){var n=this._options,t=this._$toggleButton;t&&(this._isCollapsed()?t.attr({title:n.toggleButtonCollapsedTooltip?n.toggleButtonCollapsedTooltip:u.ExpandSplitterTooltip,"aria-expanded":"false"}):t.attr({title:n.toggleButtonExpandedTooltip?n.toggleButtonExpandedTooltip:u.CollapseSplitterTooltip,"aria-expanded":"true"}))},t.prototype.setOnToggle=function(n){this._options.onToggle=n},t.prototype._measureFixedSide=function(){this._fixedSidePixels=this._cssSizeProp==="width"?this._fixedSide.outerWidth():this._fixedSide.outerHeight()},t.prototype._handleBarMouseDown=function(n){n.preventDefault();this._dragStart={pointer:n[this._screenXY],originalSize:this._isCollapsed()?n[this._screenXY]:this._fixedSide[this._cssSizeProp]()};this.getElement().addClass("dragging");this._ensureHandleBarClone();this._setupDragEvents();this._ensureOverlay()},t.prototype._handleBarKeydown=function(n){var t=this._options.vertical!==!1,i=!this._isCollapsed();switch(n.keyCode){case e.KeyCode.LEFT:i&&!t&&this._moveSeparator("left");break;case e.KeyCode.RIGHT:i&&!t&&this._moveSeparator("right");break;case e.KeyCode.UP:i&&t&&this._moveSeparator("left");break;case e.KeyCode.DOWN:i&&t&&this._moveSeparator("right")}},t.prototype._moveSeparator=function(n){var t=25*(this._options.fixedSide===n?-1:1);typeof this._fixedSidePixels!="number"&&this._measureFixedSide();this.resize(this._getAdjustedSize(this._fixedSidePixels+t))},t.prototype._isToggleButtonEnabled=function(){return this.getElement().hasClass(o.TOGGLE_BUTTON_ENABLED_CLASS_NAME)},t.prototype._isToggleButtonHotkeyEnabled=function(){return this.getElement().hasClass(o.TOGGLE_BUTTON_HOTKEY_ENABLED_CLASS_NAME)},t.prototype._isCollapsed=function(){return this.getElement().hasClass(o.COLLAPSED_CLASS_NAME)},t.prototype._onDocumentKeyup=function(n){if(n.ctrlKey&&n.altKey&&n.keyCode===e.KeyCode.SPACE&&this._isToggleButtonHotkeyEnabled())return this.toggleExpanded(),!1},t.prototype._onToggleButtonClick=function(n){return this.toggleExpanded(),!1},t.prototype._ensureHandleBarClone=function(){this._$handleBarClone||(this._$handleBarClone=$("<div/>").addClass("handleBar-clone").css(this._cssPosProp,this._dragStart.originalSize+"px").css(this._cssSizeProp,o.HANDLE_BAR_CLONE_SIZE).appendTo(this.getElement()))},t.prototype._removeHandleBarClone=function(){this._$handleBarClone&&(this._$handleBarClone.remove(),this._$handleBarClone=null)},t.prototype._setupDragEvents=function(){this._bind(window.document,"mousemove",s(this,this._documentMouseMove),!0);this._bind(window.document,"mouseup",s(this,this._documentMouseUp),!0)},t.prototype._ensureOverlay=function(){this._splitterOverlay||(this._splitterOverlay=$(h("div","overlay")),this.getElement().append(this._splitterOverlay),this._bind(this._splitterOverlay,"mousemove",s(this,this._documentMouseMove)),this._bind(this._splitterOverlay,"mouseup",s(this,this._documentMouseUp)),this._bind(this._splitterOverlay,"selectstart",function(){return!1}))},t.prototype._removeOverlay=function(){this._splitterOverlay&&(this._splitterOverlay.remove(),this._splitterOverlay=null)},t.prototype._clearDragEvents=function(){this._removeOverlay();this._unbind(window.document,"mousemove");this._unbind(window.document,"mouseup")},t.prototype._documentMouseMove=function(n){var t;if(this._dragStart)return t=n[this._screenXY]-this._dragStart.pointer,t&&this._ensureOverlay(),this._ensureHandleBarClone(),this._$handleBarClone.css(this._cssPosProp,+(this._dragStart.originalSize+this._deltaMultiplier*t)+"px"),!1},t.prototype._documentMouseUp=function(n){var i,r,t;if(this._dragStart)return i=n[this._screenXY]-this._dragStart.pointer,r=!1,Math.abs(i)>1&&(r=!0,t=this._dragStart.originalSize+this._deltaMultiplier*i,t=this._getAdjustedSize(t),this._isToggleButtonEnabled()&&t<=o.AUTO_COLLAPSE_THRESHOLD?this.toggleExpanded(!1):(this.expandState&&this.removeExpand(!0),this.resize(t))),this._dragStart=null,this.getElement().removeClass("dragging"),this._removeHandleBarClone(),this._clearDragEvents(),r&&this._fire("changed",this),!1},t.prototype._onWindowResize=function(){this._ignoreWindowResize||this.expandState||this.resize(this._fixedSidePixels,!0)},t.prototype._fireWindowResize=function(){try{this._ignoreWindowResize=!0;var n=document.createEvent("Event");n.initEvent("resize",!1,!0);window.dispatchEvent(n)}finally{this._ignoreWindowResize=!1}},t.prototype.attachResize=function(n){this._ignoreWindowResize=!1;n&&this._onWindowResize()},t.prototype.detachResize=function(){this._ignoreWindowResize=!0},t.prototype._createAnimationOption=function(n,t){var i={};return i[n]=t,i},t.prototype._handleBarDoubleClick=function(){this.toggleExpanded()},t.prototype._dispose=function(){n.prototype._dispose.call(this);this.unregisterEvents()},t.prototype.unregisterEvents=function(){e.detachResize(this.getElement())},t.enhancementTypeName="tfs.splitter",t._noSplitCssClass="no-split",t.CORE_CSS_CLASS="splitter",t.HORIZONTAL_CLASS="horizontal",t.VERTICAL_CLASS="vertical",t.TOGGLE_BUTTON_LENGTH=16,t.TOGGLE_BUTTON_MARGIN=2,t.COLLAPSED_CLASS_NAME="collapsed",t.TOGGLE_BUTTON_ENABLED_CLASS_NAME="toggle-button-enabled",t.TOGGLE_BUTTON_HOTKEY_ENABLED_CLASS_NAME="toggle-button-hotkey-enabled",t.AUTO_COLLAPSE_THRESHOLD=20,t.DEFAULT_ANIMATION_SPEED=800,t.HANDLE_BAR_CLONE_SIZE=5,t}(i.Control);t.SplitterO=c;o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t}(c);t.Splitter=o;i.Enhancement.registerJQueryWidget(o,o.CORE_CSS_CLASS);i.Enhancement.registerEnhancement(o,"."+o.CORE_CSS_CLASS)});

define("VSS/Controls/Navigation",["require","exports","VSS/Common/Constants/Platform","VSS/Context","VSS/Controls","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Diag","VSS/Events/Handlers","VSS/Controls/Menus","VSS/Navigation/Services","VSS/Controls/Notifications","q","VSS/Controls/PopupContent","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Controls/Splitter","VSS/Telemetry/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VSS/Utils/UI","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls","VSS/LoaderPlugins/Css!PivotView"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){function ct(n){var t;return n&&n.length===1&&(t=n.data("item"),t||(t={text:n.find("a").first().html(),title:n.data("title")||null,id:n.data("id"),link:n.find("a").first().attr("href"),selected:n.hasClass("selected"),encoded:n.data("encoded")||!1,disabled:n.hasClass("disabled")},n.data("item",t))),t}function wt(n,t){t=t||ct(n);t&&(t.disabled?(n.attr("disabled","disabled"),n.addClass("disabled"),n.removeClass("selected"),n.attr("aria-disabled","true")):(n.prop("disabled",!1),n.removeClass("disabled"),n.toggleClass("selected",t.selected),n.removeAttr("aria-disabled")),t.selected?n.children("a").attr("aria-selected","true"):n.children("a").attr("aria-selected","false"))}var ht,ut,ft,lt,at,vt,ot,st,pt,dt;Object.defineProperty(t,"__esModule",{value:!0});t.FullScreenHelper=t.NavigationLink=t.TabbedNavigationView=t.NavigationViewTab=t.PivotView=t.PivotFilter=t.TriSplitNavigationView=t.NavigationView=void 0;var rt=k.delegate,it=nt.domElem,et=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._onHistoryNavigate=function(n,t){i._onNavigate(t||{})},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({attachNavigate:!1,titleElementSelector:".hub-title",hubSplitterSelector:".hub-content > .splitter"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._options.attachNavigate===!0&&this._attachNavigate()},t.prototype.onNavigate=function(){},t.prototype._getViewTitle=function(){return this._element.find(".hub-title").eq(0)},t.prototype.setViewTitle=function(n,t){this._element.find(this._options.titleElementSelector).text(n||"").attr("title",t||n||"");this.setWindowTitle(n)},t.prototype.setViewTitleContent=function(n,t){this._element.find(this._options.titleElementSelector).html(t||"").attr("title",n||"");this.setWindowTitle(n)},t.prototype.setWindowTitle=function(n){document.title=d.format(this._getPageTitleString(),n||"")},t.prototype.setLeftHubPaneVisibility=function(n){var i=this._element.find(this._options.hubSplitterSelector),t=u.Enhancement.getInstance(w.Splitter,i);t&&n!==this._leftPaneVisible&&(this._leftPaneVisible=n,t.toggleSplit(n))},t.prototype.setFullScreenMode=function(n,t){t===void 0&&(t=!1);var i=$(document.body),r=$(".tfs-host-notifications");i.toggleClass("no-chrome",n);i.toggleClass("full-screen-mode",n);r.toggleClass("visible",r.css("display")!="none");this.setLeftHubPaneVisibility(!n||t)},t.prototype._setTitleMode=function(){},t.prototype._getPageTitleString=function(){return c.getDefaultPageTitleFormatString()},t.prototype._attachNavigate=function(){this._historyNavigated=!1;var n=c.getHistoryService();n.attachNavigate(this._onHistoryNavigate);this._historyNavigated||this._onNavigate(n.getCurrentState()||{});this._historyNavigated=!1},t.prototype._onNavigate=function(n){this._historyNavigated=!0;this.onNavigate(n)},t.prototype._dispose=function(){n.prototype._dispose.call(this);this._options.attachNavigate===!0&&c.getHistoryService().detachNavigate(this._onHistoryNavigate)},t.ACTION_CONTRIBUTION="contribution",t}(u.BaseControl);t.NavigationView=et;ht=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({leftPaneSelector:".hub-content > .splitter > .leftPane",rightPaneSelector:".hub-content > .splitter > .rightPane"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._leftPane=this.getElement().find(this._options.leftPaneSelector);this._rightPane=this.getElement().find(this._options.rightPaneSelector)},t.getInstance=function(){return t._instance||(t._instance=u.Enhancement.enhance(t,".hub-view",{})),t._instance},t.prototype.getLeftPane=function(){return this._leftPane},t.prototype.getRightPane=function(){return this._rightPane},t}(et);t.TriSplitNavigationView=ht;ut=function(){function n(n){this._options=n||{};this._items=this._options.items||[]}return n.toItem=function(n){var t;return n&&n.length===1&&(t=n.data("item"),t||(t={text:n.find("span.anchor").first().text(),title:n.data("title")||null,value:n.data("value"),selected:n.hasClass("selected"),encoded:n.data("encoded")||!1},n.data("item",t))),t},n.domToItems=function(t,i){var r=[];return t.children("li.pivot-filter-item"+(i||"")).each(function(){r.push(n.toItem($(this)))}),r},n.setElementContent=function(n,t){var i=t.selectedTitle||t.title,r=t.selectedText||t.text,c=t.encoded,h=t.icon,f,e,s;n.empty();n.removeData("title");i&&(f=n.data("tooltipControl"),f?f.setTextContent(i):(e={},i===r?e.onlyShowWhenOverflows=n:e.setAriaDescribedBy=!0,n.data("tooltipControl",v.RichContentTooltip.add(i,n,e))),n.data("title",i));h&&$("<span />").addClass(h).addClass("selected-icon").appendTo(n);r&&(s=$("<span />").attr("id",u.getHtmlId()),c?s.html(r):s.text(r),s.appendTo(n))},n.prototype.getTypeName=function(){var n=this.constructor;return n.typeName||"select"},n.prototype.getItems=function(t){return n.domToItems(this._element,t)},n.prototype._toItem=function(t){return n.toItem(t)},n.prototype._updateItem=function(n,t){t=t||this._toItem(n);t&&(t.disabled?(n.attr("disabled","disabled"),n.addClass("disabled"),n.removeClass("selected")):(n.prop("disabled",!1),n.removeClass("disabled"),n.toggleClass("selected",t.selected)))},n.prototype._toggleItem=function(n,t){var i=this._toItem(n);return i&&(typeof t=="undefined"&&(t=!i.selected),i.selected=t,this._updateItem(n,i)),i},n.prototype._selectFirstEnabledItem=function(n){var t,i;return $.each(n,function(){if(!this.disabled&&(t||(t=this),this.selected))return i=this,!1}),!i&&t&&(t.selected=!0,i=t),i},n.prototype._fireChange=function(n,t){n.trigger("filter-changed",[t])},n.prototype._selectItem=function(n,t){var r,i=n.next("li:not([disabled])");return i.length===0&&(i=n.siblings("li:not([disabled])").first()),i.length>0&&(this._toggleItem(n,!1),r=this._toggleItem(i,!0),t&&i.find("span.anchor").focus()),r},n.prototype._onChange=function(n){var r=$(n.target),t,u,i;t=r.closest("li");u=r.closest("span.anchor");t.length>0&&(i=this._selectItem(t,!0),i&&this._fireChange(this._element,i));u.length>0&&n.preventDefault()},n.prototype.enhance=function(){this._element=this._options.filterContainer.find("ul.pivot-filter-items");this._items=this.getItems();this._attachChange(this._element);this.addAccessibility()},n.prototype.populate=function(){var t=this._items,i=this._ensureElement(),r=i.siblings("span.title"),n=r.attr("id");n||(r?(n=String(u.getHtmlId()),r.attr("id",n)):n="");i.children().remove();t&&t.length>0&&(this._selectFirstEnabledItem(t),$.each(t,function(){var t=$(it("li","pivot-filter-item")),r,f,e,o;t.data("item",this);this.disabled?(t.attr("disabled","disabled"),t.addClass("disabled")):this.selected&&t.addClass("selected");r=this.title;r||this.encoded||(r=this.text);r&&(v.RichContentTooltip.add(r,t,r===this.text?{onlyShowWhenOverflows:t}:undefined),t.data("title",r));this.value&&t.data("value",this.value);o=String(u.getHtmlId());f=$(it("span")).attr({id:o,role:"button","aria-labelledby":"".concat(n," ").concat(o),tabIndex:0}).addClass("anchor");e=f;this.icon&&($("<span />").addClass(this.icon).appendTo(f),e=$("<span />").appendTo(f));e.addClass("text");this.encoded?e.html(this.text):e.text(this.text);t.append(f);i.append(t)}),this._attachChange(i))},n.prototype.updateItems=function(n){this._items=n;this.populate()},n.prototype.getItem=function(n){var t,i=this._items;return typeof n=="number"?t=i[n]:$.each(i,function(){if(this.value==n||this.text==n)return t=this,!1}),t},n.prototype.getSelectedItems=function(){return this.getItems(".selected")},n.prototype.getSelectedItem=function(){var n=this.getItems(".selected");return n&&n[0]},n.prototype.setSelectedItem=function(n){var t=this,i=this._items;typeof n!="object"&&(n=this.getItem(n));n&&($.each(i,function(){this.selected=!1}),n.selected=!0,this._element.children("li").each(function(){t._updateItem($(this))}))},n.prototype.addAccessibility=function(){var r=this,t=this._options.filterContainer.children("span.title"),n,i;t.length===1&&(n=t.attr("id"),n||(n=String(u.getHtmlId()),t.attr("id",n)),i="span.anchor",this._element.is(i)&&this._attachAriaLabels(this._element,n),this._element.find(i).each(function(t,i){r._attachAriaLabels($(i),n)}))},n.prototype._attachAriaLabels=function(n,t){var i=n.attr("id")||String(u.getHtmlId());n.attr({id:i,"aria-labelledby":"".concat(t," ").concat(i)})},n.prototype._ensureElement=function(){return this._element||(this._element=$(it("ul","pivot-filter-items")),this._element.appendTo(this._options.filterContainer)),this._element},n.prototype._attachChange=function(n){n.children().on("click",rt(this,this._onChange));n.children().on("keydown",nt.buttonKeydownHandler)},n}();tt.initClassPrototype(ut,{_options:null,_items:null,_element:null});ft=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.registerBehavior=function(n){t._behaviors[n.typeName]=n},t.createBehavior=function(n,i){var r;return $.each(n||[],function(n,i){return r=t._behaviors[i],r?!1:void 0}),r||(r=ut),new r(i)},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"pivot-filter",behavior:"select"},t))},t.prototype._enhance=function(t){var r,i;n.prototype._enhance.call(this,t);i=t[0];r=i&&typeof i.className=="string"?i.className.split(" "):[];this._initBehavior(r);this._behavior.enhance()},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._attachEvents()},t.prototype.getSelectedItems=function(){return this._behavior.getSelectedItems()},t.prototype.getSelectedItem=function(){return this._behavior.getSelectedItem()},t.prototype.getItem=function(n){return this._behavior.getItem(n)},t.prototype.getItems=function(){return this._behavior.getItems()},t.prototype.setSelectedItem=function(n,t){t===void 0&&(t=!0);this._behavior.setSelectedItem(n,t)},t.prototype.updateItems=function(n,t){this._behavior.updateItems(n,t)},t.prototype._initBehavior=function(n){this._behavior=t.createBehavior(n,{align:this._options.align,items:this._options.items,filterContainer:this._element,useBowtieStyle:this._options.useBowtieStyle})},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._initBehavior([this._options.behavior]);this._buildDom()},t.prototype._buildDom=function(){var n=this._element,e=this._behavior,t=this._options,r,u,i,f;n.addClass(e.getTypeName());r=$(it("span","title"));i=t.text;u=t.useBowtieStyle;f=t.encoded;t.title&&(v.RichContentTooltip.add(t.title,n,t.title===i?{onlyShowWhenOverflows:n}:undefined),n.data("title",t.title));i&&(f?r.html(i):r.text(i));n.append(r);u&&(n.addClass("bowtie-pivot-filter"),$(it("span","drop-icon bowtie-icon bowtie-chevron-down")).appendTo(n));this._behavior.populate()},t.prototype._attachEvents=function(){this._bind(this._element,"filter-changed",rt(this,this._onFilterChanged))},t.prototype._onFilterChanged=function(n,t){return this._fire("changed",[t]),typeof this._options.change=="function"?this._options.change.call(this,t):void 0},t.enhancementTypeName="tfs.ui.pivotFilter",t._behaviors={},t}(u.Control);t.PivotFilter=ft;tt.initClassPrototype(ft,{_behavior:null});lt=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype._selectFirstEnabledItem=function(){},t.prototype._selectItem=function(n){var i=this,t,r=this._toItem(n);return r.selected||(n.siblings("li").each(function(){i._toggleItem($(this),!1)}),t=this._toggleItem(n,!0)),t},t.typeName="radio",t}(ut);ft.registerBehavior(lt);at=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype._selectFirstEnabledItem=function(){},t.prototype._selectItem=function(n){return this._toggleItem(n,!0)},t.typeName="checkbox",t}(ut);ft.registerBehavior(at);vt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._showItemIcons=!1,i}return __extends(t,n),t.prototype.getItems=function(t){return this._addCommandIdToItems(n.prototype.getItems.call(this,t))},t.prototype.populate=function(){var t,i,r,u=this._selectFirstEnabledItem(this._items),n;if(u)if(this._element&&this._element.remove(),this._disposeExistingPopup(),n=void 0,n=((r=(i=(t=this._options.filterContainer)===null||t===void 0?void 0:t.context)===null||i===void 0?void 0:i.attributes["aria-labelledby"])===null||r===void 0?void 0:r.value)||"",n=n?" aria-labelledby='"+n+"'":"",this._element=$("<span tabIndex='0' class='selected anchor' role='combobox' aria-expanded='false'"+n+"/>").appendTo(this._options.filterContainer),ut.setElementContent(this._element,u),this._options.useBowtieStyle){this._options.filterContainer.on("click",rt(this,this._onDrop));this._options.filterContainer.on("keydown",nt.buttonKeydownHandler)}else{this._element.on("click",rt(this,this._onDrop));this._element.on("keydown",nt.buttonKeydownHandler)}},t.prototype.enhance=function(){this._element=this._options.filterContainer.find("ul.pivot-filter-items");this._items=this.getItems();this._element.remove();this.populate()},t.prototype.updateItems=function(t,i){this._showItemIcons=i&&i.showItemIcons;n.prototype.updateItems.call(this,this._addCommandIdToItems(t))},t.prototype.getSelectedItems=function(){return[this.getSelectedItem()]},t.prototype.getSelectedItem=function(){var n;return $.each(this._items,function(){if(this.selected===!0)return n=this,!1}),n},t.prototype.setSelectedItem=function(n,t){t===void 0&&(t=!0);var i=this._items;n&&n!==this.getSelectedItem()&&($.each(i,function(){this.selected=!1}),n.selected=!0,ut.setElementContent(this._element,n),t&&this._fireChange(this._element,n))},t.prototype._addCommandIdToItems=function(n){return $.map(n,function(n){return n.id||(n.id=n.text),n})},t.prototype._onDrop=function(n){var f=this,e=$(n.target),t=this._options.filterContainer,r=this._items,i;return this._disposeExistingPopup(),i=u.BaseControl.createIn(h.PopupMenu,t,{align:this._options.align||"left-bottom",showIcon:this._showItemIcons,items:[{childItems:r}],useBowtieStyle:this._options.useBowtieStyle,onDeactivate:function(){t.removeClass("active");f._element.attr("aria-expanded","false");t.children("ul.menu-popup").hide()},executeAction:rt(this,this._onExecute)}),k.delay(this,10,function(){var u,n,f;t.addClass("active");this._element.attr("aria-expanded","true");i.popup(e,t);u=g.first(r,function(n){return n.selected});n=i.getItems()[0].getSubMenu();u?(f=n.getItem(u.id),f?f.select():n.selectFirstItem()):n.selectFirstItem()}),this._popupMenu=i,this._element.attr("aria-controls",i.getElement().attr("id")),!1},t.prototype._onExecute=function(n){this._options.filterContainer.removeClass("active");this.setSelectedItem(n.get_commandSource()._item)},t.prototype._disposeExistingPopup=function(){this._popupMenu&&(this._popupMenu.dispose(),delete this._popupMenu)},t.typeName="dropdown",t}(ut);ft.registerBehavior(vt);u.Enhancement.registerEnhancement(ft,".pivot-filter.enhance");ot=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._contributionsInitialized=!1,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"pivot-view",tagName:"ul"},t))},t.prototype._enhance=function(t){n.prototype._enhance.call(this,t);this._options.items=this.getItems();var i=this._element.data("contributionId");i&&(this._options.contributionId=i,this._options.getContributionContext&&typeof this._options.getContributionContext=="function"&&(this._contributionContext=this._options.getContributionContext()),this.refreshContributedItems())},t.prototype.getItems=function(n){var t=[];return this._element.children("li"+(n||"")).each(function(){t.push(ct($(this)))}),t},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.getElement().attr("role","tablist");this._attachEvents()},t.prototype.setExtensionContainer=function(n){this._extensionContainer=n},t.prototype.showExtensionTab=function(n,t){f.createContributedControl(this._extensionContainer,n,t)},t.prototype.setContributionContext=function(n){this._contributionContext=n},t.prototype._getTabFromContribution=function(n,t){var i=this,e,o,u,f,r=this._contributionContext,s,h;return e=t&&typeof t.isDisabled=="function"?t.isDisabled(r):a.resolve(!1),o=t&&typeof t.isInvisible=="function"?t.isInvisible(r):a.resolve(!1),t&&typeof t.name=="function"?(s=t.name,u=s(r)):u=t&&typeof t.name=="string"?a.resolve(t.name):a.resolve(n.properties.name),t&&typeof t.title=="function"?(h=t.title,f=h(r)):f=t&&typeof t.title=="string"?a.resolve(t.title):n.properties.title?a.resolve(n.properties.title):a.resolve(null),a.all([e,o,u,f]).then(function(t){var s=t[0],h=t[1],o=t[2],l=t[3],u,r,f,e;return h?null:(u=n.properties.action,r="",i._options.generateContributionLink&&typeof i._options.generateContributionLink=="function"?r=i._options.generateContributionLink(n.id):(f=c.getHistoryService().getCurrentState(),f.contributionId=n.id,r="#"+c.getHistoryService().getFragmentActionLink(u||et.ACTION_CONTRIBUTION,f)),e=!1,i._options.getEnabledState&&typeof i._options.getEnabledState=="function"&&(e=!0),{disabled:e&&!i._options.getEnabledState(n.id)?!0:s,encoded:!1,id:n.id,link:r,text:o,title:l||o,contributed:!0,action:u})})},t.prototype.refreshContributedItems=function(n){var t=this;return n===void 0&&(n=!1),(!this._contributionsInitialized||n)&&typeof this._options.contributionId=="string"?p.getService(e.ExtensionService).getContributionsForTargets([this._options.contributionId]).then(function(n){var i=[];return n.forEach(function(n){var u=a.resolve(null),r=n.properties.dynamic,e;r!==!0&&r!==!1&&(r=typeof n.properties.name!="string");r&&(u=f.getBackgroundInstance(n,n.properties.registeredObjectId||n.id));e=u.then(function(i){return t._getTabFromContribution(n,i)});i.push(e)}),a.allSettled(i).then(function(n){Array.isArray(t._options.items)?(t._options.items=t._options.items.filter(function(n){return!n.contributed}),t._options.items=t._options.items.concat(n.filter(function(n){return n&&n.state==="fulfilled"&&!!n.value}).map(function(n){return n.value}))):t._options.items=n.filter(function(n){return n.state==="fulfilled"}).map(function(n){return n.value})}).then(function(){t._contributionsInitialized=!0;t.updateItems()})}):(this._contributionsInitialized=!0,a.resolve(null))},t.prototype.focusSelectedPivot=function(){this.getElement().find("li.selected a").focus()},t.prototype.updateItems=function(n){var r=this,u=n&&$.contains(this.getElement()[0],document.activeElement),i=this._element,t;i.empty();this._itemIdToSelect&&(t=g.first(this._options.items,function(n){return(n.action||n.id)==r._itemIdToSelect}),t&&(this._itemIdToSelect=null,t.disabled||(this._options.items.forEach(function(n){n.selected=!1}),t.selected=!0)));this._populateItems(i);u&&this.getElement().find("li.selected a").focus()},t.prototype.setViewLink=function(n,t){var i=this.getView(n);i&&(i.link=t,this._element.find("li").each(function(i,r){var u=$(r);if(u.data("id")===n)return u.find("a").first().attr("href",t),!1}))},t.prototype.getSelectedView=function(){var n=this.getItems(".selected");return n&&n[0]},t.prototype.setViewEnabled=function(n,t){var r=this,i;if(i=this.getView(n),i){if(!i.contributed||!t){i.disabled=!t;return}p.getService(e.ExtensionService).getContribution(n).then(function(n){var t=f.getBackgroundInstance(n,n.properties.registeredObjectId||n.id).then(function(n){var t=r._contributionContext;n&&typeof n.isDisabled=="function"?r._makeThennable(n.isDisabled(t)).then(function(n){i.disabled=n}):i.disabled=!1})})}},t.prototype._makeThennable=function(n){return n&&typeof n.then=="function"?n:a.resolve(n)},t.prototype.getView=function(n,t){var i;return typeof n=="number"?i=this._options.items[n]:$.each(this._options.items,function(){if(this.id==n)return i=this,!1}),this._itemIdToSelect=!i&&t?t:null,i},t.prototype.setSelectedView=function(n){var t=this._options.items;if(typeof n!="object"&&(n=this.getView(n)),n){$.each(t,function(){this.selected=!1});n.selected=!0;this._element.find("li").each(function(){wt($(this),null)});this.onChanged(n);n.contributed&&n.id&&e.ExtensionHelper.publishTraceData(null,null,n.id)}},t.prototype.onChanged=function(n){this._fire("changed",[n])},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._buildDom()},t.prototype._buildDom=function(){this._populateItems(this._element)},t.prototype._populateItems=function(n){var t=this._options.items,i,r;if(t){$.each(t,function(){if(!this.disabled&&(i||(i=this),this.selected))return r=this,!1});!r&&i&&(i.selected=!0);var u=!0,e=0,f=0;t.forEach(function(n){n&&!n.disabled&&f++});$.each(t,function(){var i=$(it("li")),r,t;i.data("item",this);i.attr("role","presentation");this.disabled?(i.attr("disabled","disabled"),i.addClass("disabled")):this.selected&&i.addClass("selected");r=this.title;this.id&&(i.data("id",this.id),i.attr("data-id",this.id));t=$(it("a"));this.disabled||(t.attr("aria-posinset",++e),t.attr("aria-setsize",f));t.on("keydown",nt.buttonKeydownHandler);!u||this.disabled||this.hidden?t.attr("tabindex","-1"):(t.attr("tabindex","0"),u=!1);t.attr("role","tab");this.disabled?(t.attr("aria-disabled","true"),t.attr("aria-selected","false")):this.selected?t.attr("aria-selected","true"):t.attr("aria-selected","false");this.link?t.attr("href",this.link):t.attr({href:"#"});this.encoded?t.html(this.text):t.text(this.text);r&&(v.RichContentTooltip.add(r,t,r===this.text?{onlyShowWhenOverflows:i}:undefined),i.data("title",r));i.append(t);n.append(i)})}},t.prototype._attachEvents=function(){this._bind("click",rt(this,this._onClick));this._bind("keydown",rt(this,this._onKeydown));this.getElement()[0].addEventListener("focus",this._onFocus.bind(this),!0)},t.prototype._onClick=function(n){if(!n||!(n.ctrlKey||n.metaKey||n.shiftKey||n.which===2)){var r=$(n.target),u=r.closest("li"),i=r.closest("a"),t;u.length>0&&(t=ct(u));i.length>0&&(d.caseInsensitiveContains(i.attr("href"),"#")||t&&t.disabled)&&(t&&!t.disabled&&this.setSelectedView(t),n.preventDefault(),i.attr("href")!=="#"&&(document.location.href=i.attr("href")))}},t.prototype._onFocus=function(n){var t=this.getElement(),i=n.target;t.find("a").attr("tabindex","-1");i.setAttribute("tabindex","0")},t.prototype._onKeydown=function(n){var t=n.originalEvent,r,u,i,f;if(!t.ctrlKey&&!t.altKey&&!t.metaKey){if(r=$(t.target),t.keyCode===nt.KeyCode.ENTER||t.keyCode===nt.KeyCode.SPACE){r.find("a").click();return}(t.keyCode===nt.KeyCode.LEFT||t.keyCode===nt.KeyCode.RIGHT)&&(u=r.closest("li"),i=void 0,t.keyCode===nt.KeyCode.RIGHT?(i=u.nextAll("li:visible").first(),i.length===0&&(i=this.getElement().children("li:visible").first())):(i=u.prevAll("li:visible").first(),i.length===0&&(i=this.getElement().children("li:visible").last())),f=i.children("a"),f.focus())}},t.enhancementTypeName="tfs.ui.pivotView",t}(u.Control);t.PivotView=ot;u.Enhancement.registerEnhancement(ot,".pivot-view.enhance");st=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.onNavigate=function(){},t.prototype.onNavigateAway=function(){},t}(u.BaseControl);t.NavigationViewTab=st;var bt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"error-tab"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._messageControl=u.BaseControl.createIn(l.MessageAreaControl,$("<div class='tabbed-navigation-error' />").appendTo(this._element),{closeable:!1})},t.prototype.setContent=function(n,t,i,r){this._messageControl.setMessage({type:i,header:n,content:t});this._messageControl.setErrorDetailsVisibility(r)},t.TAB_ID="error",t}(st),yt=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"info-tab"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this)},t.prototype.setHeader=function(n,t){this._$description||(this._$description=$(it("div","information-summary")).prependTo(this._element));this._$title||(this._$title=$(it("div","information-title")).prependTo(this._element));this._$title.text(n);this._$description.html(t)},t.prototype.appendInformation=function(n,t){return u.BaseControl.createIn(l.InformationAreaControl,$(it("div")).appendTo(this._element),{caption:n,collapsed:t})},t.TAB_ID="info",t}(st),kt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._currentNavigationContextId=0,i._lastParsedNavigationContextId=0,i._showingError=!1,i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({tabs:null,tabOptions:null,attachNavigate:!0,hubContentSelector:".right-hub-content .hub-pivot-content",pivotTabsSelector:".right-hub-content .hub-pivot .views .pivot-view",hubSplitterSelector:".hub-splitter"},t))},t.prototype.initialize=function(){this._hubContent=this._element.find(this._options.hubContentSelector);this._options.tabs&&(this._tabsControl=u.Enhancement.ensureEnhancement(ot,this._element.find(this._options.pivotTabsSelector)),this._tabsMap={},this._tabOptionsMap={},this.updateTabs(this._options.tabs),this._tabs={});n.prototype.initialize.call(this)},t.prototype.updateTabs=function(n){var t=this;Object.keys(n).forEach(function(i){t._tabsMap[(""+i).toUpperCase()]=n[i]});this._options.tabOptions&&Object.keys(this._options.tabOptions).forEach(function(n){t._tabOptionsMap[(""+n).toUpperCase()]=t._options.tabOptions[n]})},t.prototype.getTab=function(n){return n=(""+n).toUpperCase(),this._tabs[n]},t.prototype.showError=function(n){var i=tt.getErrorMessage(n),t="";n.stack&&(t=$("<div />").text(n.stack));this.showErrorContent(i,t,l.MessageAreaType.Error,!1)},t.prototype.showErrorContent=function(n,t,i,r){var f,e;if(this._tabs){this._showingError=!0;f=this._getErrorTab();f.setContent(n,t,i,r);this._showTab(f);this._hubContent.show();this.onNavigate(this.getState())}else e=u.BaseControl.createIn(l.MessageAreaControl,$(it("div","tabbed-navigation-error")).appendTo(this._hubContent),{closeable:!1}),e.setMessage({type:i,header:n,content:t}),e.setErrorDetailsVisibility(r)},t.prototype.showInformationTab=function(n,t){if(this._tabs){this._updateTabsControl(yt.TAB_ID,this.getRawState(),this._currentParsedState);this._showingInfo=!0;var i=this._getInfoTab();i.setHeader(n,t);this._showTab(i);this._hubContent.show();this.onNavigate(this.getState())}else this._$infoContent=$(it("div","information-section")).appendTo(this._hubContent),$(it("div","information-title")).appendTo(this._$infoContent).text(n||""),$(it("div","information-summary")).text(t||"").appendTo(this._$infoContent)},t.prototype.appendInformationContent=function(n,t){var i,r;return this._tabs?(r=this._getInfoTab(),i=r.appendInformation(n,t)):this._$infoContent&&(i=u.BaseControl.createIn(l.InformationAreaControl,this._$infoContent,{caption:n,collapsed:t})),i},t.prototype.appendSectionTitle=function(n){this._tabs?$(it("div","information-title")).appendTo(this._getInfoTab().getElement()).append(n):this._$infoContent&&$(it("div","information-title")).appendTo(this._$infoContent).append(n)},t.prototype.appendSectionSummary=function(n){this._tabs?$(it("div","information-summary")).appendTo(this._getInfoTab().getElement()).append(n):this._$infoContent&&$(it("div","information-summary")).appendTo(this._$infoContent).append(n)},t.prototype.appendElement=function(n){this._tabs?n.appendTo(this._getInfoTab().getElement()):this._$infoContent&&n.appendTo(this._$infoContent)},t.prototype.refreshCurrentTab=function(){this._onNavigate(this._currentRawState)},t.prototype.getCurrentAction=function(){return this._currentTabId},t.prototype.getState=function(){return this._currentParsedState||{}},t.prototype.setState=function(n){this._currentParsedState=n},t.prototype.getEmptyState=function(){var n={};return $.each(c.getHistoryService().getCurrentState(),function(t){n[t]=null}),n},t.prototype.getRawState=function(){return this._currentRawState||{}},t.prototype.parseStateInfo=function(n,t,i){i(n,t)},t.prototype.getTabVisibility=function(){return!0},t.prototype.getTabLabel=function(){},t.prototype.setHubPivotVisibility=function(n){this._tabsControl.getElement().parents(".hub-pivot").first().toggleClass("hidden",!n)},t.prototype._getErrorTab=function(){return this._errorTab||(this._errorTab=this._createTab(bt)),this._errorTab},t.prototype._getInfoTab=function(){return this._infoTab||(this._infoTab=this._createTab(yt)),this._infoTab},t.prototype._onNavigate=function(n){var i=this,t;this._currentRawState=n;t=++this._currentNavigationContextId;this.parseStateInfo(n.action,n,function(r,u){i._onParseStateInfoSuccess(r,n,u,t)});this._skipTabHideOnAsyncNavigate&&(this._lastParsedNavigationContextId===t||this._showingError||this._showingInfo||this._hubContent.hide(),this._skipTabHideOnAsyncNavigate=!1)},t.prototype._redirectNavigation=function(n,t,i){this._skipTabHideOnAsyncNavigate=!0;i?c.getHistoryService().replaceHistoryPoint(n,t):c.getHistoryService().addHistoryPoint(n,t)},t.prototype._onParseStateInfoSuccess=function(n,t,i,r){var u;if(this._currentParsedState=i||{},this._lastParsedNavigationContextId=r,this._hubContent.show(),this._tabs)if(this._updateTabsControl(n,t,i),u=this._getTab(n),u){if(this._showTab(u),this._showingError=!1,this._currentTabId=n,typeof u.onNavigate=="function")u.onNavigate(t,i);this.onNavigate(i)}else this.showError(d.format(y.NavigationViewUnknownTabErrorFormat,n));else this.onNavigate(i)},t.prototype._updateTabsControl=function(n,t,i){var r=this;Object.keys(this._tabsMap).forEach(function(u){var o,e=(""+u).toLowerCase(),f=r._tabsControl.getView(e,n);f&&(f.link=c.getHistoryService().getFragmentActionLink(e,t),f.selected=u===(""+n).toUpperCase(),f.disabled=!r.getTabVisibility(e,n,t,i),o=r.getTabLabel(e,n,t,i),o&&(f.text=o))});this._tabsControl.updateItems(!0)},t.prototype._showTab=function(n){this._currentTab!==n&&(this._currentTab&&(this._currentTab.onNavigateAway(),this._currentTab.hideElement()),n&&n.showElement(),this._currentTab=n)},t.prototype._getTab=function(n){var t,i;return n=(""+n).toUpperCase(),t=this._tabs[n],t||(i=this._tabsMap[n],i&&(t=this._createTab(i,this._tabOptionsMap[n]),this._tabs[n]=t)),t},t.prototype._createTab=function(n,t){var i=$("<div />").addClass("navigation-view-tab").appendTo(this._hubContent);return u.Enhancement.enhance(n,i,$.extend({navigationView:this},t))},t}(et);t.TabbedNavigationView=kt;pt=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._navigationLinkOptions=t||{},i}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({tagName:"a"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._navigateHandler=rt(this,this.onNavigate);var t=c.getHistoryService();t.attachNavigate(this._navigateHandler);this._navigationLinkOptions.text?this._element.text(this._navigationLinkOptions.text):this._navigationLinkOptions.$content&&this._navigationLinkOptions.$content.appendTo(this._element);this._navigationLinkOptions.target&&this._element.attr("target",this._navigationLinkOptions.target);this._navigationLinkOptions.title&&this._element.attr("title",this._navigationLinkOptions.title);this.updateLink(this._navigationLinkOptions.initialState||t.getCurrentState())},t.prototype.dispose=function(){n.prototype.dispose.call(this);c.getHistoryService().detachNavigate(this._navigateHandler)},t.prototype.onNavigate=function(n,t){this.updateLink(t)},t.prototype.updateLink=function(n){this._element.attr("href",this.getLocation(n))},t.prototype.getLocation=function(n){return this._navigationLinkOptions.getUrl?this._navigationLinkOptions.getUrl.call(this,n):(n=$.extend({},n,this._navigationLinkOptions.state),c.getHistoryService().getFragmentActionLink(null,n))},t}(u.BaseControl);t.NavigationLink=pt,function(n){function ft(n,t){if(u=t||{},e=n,!k){c.getHistoryService().attachNavigate(it);$(window).on("keydown",at);k=!0}it()}function g(){return t}function h(n,i,r,s,h,l){if(i===void 0&&(i=!0),r===void 0&&(r=!1),s===void 0&&(s=!0),h===void 0&&(h=!1),l===void 0&&(l=!1),t=n,ht.getInstance().setFullScreenMode(t,r),e&&vt(),i&&c.getHistoryService().addHistoryPoint(undefined,p(),undefined,s,!0),h&&c.getHistoryService().replaceHistoryPoint(undefined,p(),undefined,s,!0),f&&f.invokeHandlers(v,this,null),u&&u.publishCIData!==!1&&yt(i),u&&u.setFullScreenCallback&&typeof u.setFullScreenCallback=="function"&&u.setFullScreenCallback(),!l){var a=document.createEvent("Event");a.initEvent("resize",!1,!0);window.dispatchEvent(a)}}function p(i){var r={};return i=i===undefined?t:i,r[n.FULLSCREEN_HASH_PARAMETER]=i,r}function tt(){return"bowtie-icon "+(t?"bowtie-view-full-screen-exit":"bowtie-view-full-screen")}function et(){return t?y.ExitFullScreenModeTooltip:y.EnterFullScreenModeTooltip}function ot(n){l().subscribe(a,n)}function st(n){l().unsubscribe(a,n)}function ct(n){l().subscribe(v,n)}function lt(n){l().unsubscribe(v,n)}function at(n,t,i,r,u){var f=!0;return n instanceof jQuery.Event?f=n.isDefaultPrevented():n instanceof KeyboardEvent&&(f=n.defaultPrevented),t=n.keyCode||t,i=n.ctrlKey||i,r=n.shiftKey||r,u=n.altKey||u,!(i||r||u)&&!f&&t&&t===nt.KeyCode.ESCAPE?(g()&&h(!1),!1):void 0}function it(){var i=c.getHistoryService().getCurrentState(),r=i&&d.localeIgnoreCaseComparer(i[n.FULLSCREEN_HASH_PARAMETER],"true")===0;h(r,!1,u.showLeftLane===!0,!1,!1,!!r==!!t)}function ut(){return{id:w,title:t?y.ExitFullScreenModeTooltip:y.EnterFullScreenModeTooltip,icon:tt(),showText:!1,action:rt}}function vt(){var n=e.getItem(w),t;n?(n.update(ut()),n.removeHighlight()):(t=e.getItems(),t.push(ut()),e.updateItems(t))}function yt(n){var u={isToggle:n,isFullScreen:t,Url:window.location.pathname,HashUrl:window.location.hash,UserId:r.getDefaultWebContext().user.id,ScreenWidth:window.innerWidth,ScreenHeight:window.innerHeight};f&&f.invokeHandlers(a,this,u);b.publishEvent(new b.TelemetryEventData(i.WebAccessCustomerIntelligenceConstants.Area,i.WebAccessCustomerIntelligenceConstants.FullScreenModeFeature,u))}function l(){return f||(f=new s.NamedEventCollection),f}var rt;n.FULLSCREEN_HASH_PARAMETER="fullScreen";var w="fullscreen-toggle",a="fullscreen-ci",v="fullscreen-url-update-event",t,k,e,f,u;n.initialize=ft;n.getFullScreen=g;n.setFullScreen=h;n.getUrlData=p;n.getFullScreenIcon=tt;n.getFullScreenTooltip=et;n.attachFullScreenCI=ot;n.detachFullScreenCI=st;n.attachFullScreenUrlUpdateEvent=ct;n.detachFullScreenUrlUpdateEvent=lt;rt=function(){h(!t,u.addHistoryPoint!==!1,u.showLeftLane===!0)}}(dt=t.FullScreenHelper||(t.FullScreenHelper={}));tt.tfsModuleLoaded("VSS.UI.Controls.Navigation",t)});

define("VSS/Events/Document",["require","exports","VSS/Diag","VSS/Events/Action","VSS/Events/Services","VSS/Navigation/HubsService","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Utils/Array","VSS/Utils/Core","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h,c){function p(){return o.getLocalService(a)}function y(){return o.getLocalService(l)}var v,l,a;Object.defineProperty(t,"__esModule",{value:!0});t.getRunningDocumentsTable=t.getService=t.DocumentService=t.RunningDocumentsTable=void 0;v=c.handleError;l=function(){function n(){var n=this;this._runningDocEntries=[];this._registerUnloadEvent();u.getService().attachEvent(f.HubEventNames.PostXHRNavigate,function(){n._runningDocEntries=[]})}return n.prototype.add=function(n,t){var r={moniker:n,document:t};return this._runningDocEntries.push(r),r},n.prototype.remove=function(n){this._runningDocEntries=s.subtract(this._runningDocEntries,[n])},n.prototype.isModified=function(n){if(n){var t=this._runningDocEntries.filter(function(t){return t.moniker===n})[0];if(!t)throw new Error("Document ".concat(n," not found."));return t.document.isDirty()}return this._isAnyModified()},n.prototype.beginSave=function(n,t){function e(n){v(n,t,i)}function u(){var t=r[f++];t?t.beginSave(function(){h.delay(i,0,u)},e):typeof n=="function"&&n.call(i)}var i=this,r=[],f=0;$.each(this._runningDocEntries,function(n,t){t.document.isDirty()&&typeof t.document.beginSave=="function"&&r.push(t.document)});u()},n.prototype.getUnsavedItemsMessage=function(){for(var s,f,n=[],t,r,h,u,i=0,o=this._runningDocEntries.length;i<o;i++)if(s=this._runningDocEntries[i],u=s.document,u.isDirty()&&typeof u.getDirtyDocumentTitles=="function"){for(f=u.getDirtyDocumentTitles(6),r=0,h=f.length;r<h;r++){if(t=f[r],n.length===5){n.push(e.UnsavedChangesMore);break}t.length>55&&(t=t.substr(0,52)+"...");n.push(t)}if(n.length>5)break}return n.length===0?e.UnsavedChanges:e.UnsavedChangesWithNames+"\n"+n.join("\n")},n.prototype._isAnyModified=function(){for(var i,n=0,t=this._runningDocEntries.length;n<t;n++)if(i=this._runningDocEntries[n],i.document.isDirty())return!0;return!1},n.prototype._registerUnloadEvent=function(){var n=this,t;r.getService().registerActionWorker(r.CommonActions.ACTION_WINDOW_UNLOAD,function(){if(n.isModified())return n.getUnsavedItemsMessage()});t=$(window);t.bind("beforeunload",function(){try{return r.getService().performAction(r.CommonActions.ACTION_WINDOW_UNLOAD,{})}catch(n){alert(n)}})},n}();t.RunningDocumentsTable=l;a=function(){function n(){this._runningDocumentsTable=y()}return n.prototype.addDeleteListener=function(n){u.getService().attachEvent("tfs-document-delete",n)},n.prototype.removeDeleteListener=function(n){u.getService().detachEvent("tfs-document-delete",n)},n.prototype.addBuildPropertyChangedListener=function(n){u.getService().attachEvent("tfs-document-build-property-changed",n)},n.prototype.removeBuildPropertyChangedListener=function(n){u.getService().detachEvent("tfs-document-build-property-changed",n)},n.prototype.addBuildStoppedListener=function(n){u.getService().attachEvent("tfs-document-build-stopped",n)},n.prototype.removeBuildStoppedListener=function(n){u.getService().detachEvent("tfs-document-build-stopped",n)},n.prototype.addModifiedChangedListener=function(n){u.getService().attachEvent("tfs-document-modified-change",n)},n.prototype.removeModifiedChangedListener=function(n){u.getService().detachEvent("tfs-document-modified-change",n)},n.prototype.isModified=function(n){return this._runningDocumentsTable.isModified(n)},n.prototype.save=function(n,t){var i=this.getActiveDocument();if(i)i.save(n,t);else return this._runningDocumentsTable.beginSave(n,t)},n.prototype.getActiveDocument=function(){return this._activeDocument},n.prototype.setActiveDocument=function(n){this._activeDocument=n},n}();t.DocumentService=a;t.getService=p;t.getRunningDocumentsTable=y});

define("WorkItemTracking/Scripts/Utils/WIFormCIDataHelper",["require","exports","VSS/Telemetry/Services","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Controls/Navigation","WorkItemTracking/Scripts/Utils/WitControlMode","VSS/Events/Document"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.WIFormCIDataHelper=void 0;var o;(function(n){function t(){return f.WitFormModeUtility.isMobileForm?r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING_MOBILE:r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING}function o(){var n={OpenInNewTabClicked:"True",FullScreenWhenClicked:u.FullScreenHelper.getFullScreen()?"True":"False"};i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_OPEN_WORK_ITEM_IN_NEW_TAB,n))}function s(){i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.WORKITEM_DISCUSSIONCONTROL,{Action:"Discussion.CommentSave"}))}function h(n,u){var s=e.getService().getActiveDocument(),o,f;s&&(o=s.getWorkItem());f={Tab:n};o&&(f.workItemSessionId=o.sessionId);$.extend(f,u||{});i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_TABSELECTION,f))}function c(n,u){var f={isExpanded:n};$.extend(f,u||{});i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_GROUPCOLLAPSED,f))}function l(n){i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_FIELDKEYBOARDSHORTCUT,{shortcut:"alt + ".concat(n)}))}function a(n,u,f){i.publishEvent(new i.TelemetryEventData(t(),r.WITPerformanceScenario.WORKITEM_FIELDCHANGED,{workItemSessionId:n,fieldRefName:"[NonEmail:".concat(u,"]"),controlType:f},Date.now()))}function v(n){i.publishEvent(new i.TelemetryEventData(t(),r.WITPerformanceScenario.WORKITEM_CLOSED,{workItemSessionId:n,action:"Closing workitem"},Date.now()))}function y(n,u,f){i.publishEvent(new i.TelemetryEventData(t(),r.WITCustomerIntelligenceFeature.CLASSIFICATION_MRU_VALUE_CHANGED,{isSuggestedValue:u,fieldRefName:"[NonEmail:".concat(f,"]")},Date.now()))}n.getArea=t;n.workItemOpenInNewTabEvent=o;n.discussionControlCommentSaveEvent=s;n.workItemTabClick=h;n.groupPanelCollapsed=c;n.fieldKeyboardShortcutPressed=l;n.fieldValueChanged=a;n.workItemDisposed=v;n.classificationPickerValueChanged=y})(o=t.WIFormCIDataHelper||(t.WIFormCIDataHelper={}))});

define("TfsCommon/Scripts/WITIdentityHelpers",["require","exports","VSS/Locations","VSS/Identities/Picker/Controls","VSS/Utils/String","VSS/WebApi/Constants"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.WITIdentityHelpers=void 0;var e=function(){function n(){}return n.isAADIdentity=function(n){return u.equals(n.originDirectory,"aad",!0)&&n.originId&&!n.localId},n.isServicePrincipal=function(n){var t,i;return(i=(t=n.subjectDescriptor)===null||t===void 0?void 0:t.startsWith("aadsp"))!==null&&i!==void 0?i:!1},n.isTfsGroup=function(n){var t=n.displayName.indexOf("\\");return u.equals(n.entityType,"Group",!0)&&u.startsWith(n.displayName,"[")&&t!==-1&&u.endsWith(n.displayName.substring(0,t),"]")},n.getVsIdFromGroupUniqueName=function(t){var i,r,f,e;return t?(r="",f=t.lastIndexOf(n.IDENTITY_UNIQUENAME_SEPARATOR),i=f===-1?t:t.substr(0,f),u.startsWith(i,n.TFS_GROUP_PREFIX)&&(e=i.substr(3).trim(),r=u.isGuid(e)?e:""),r):""},n.getDescriptorFromUniqueName=function(t){return t?t.indexOf(n.DESCRIPTOR_PREFIX)!==0?"":t.replace(/desc:/i,""):""},n.getUniquefiedIdentityName=function(t){var i,r,f;return t?(i=t.signInAddress||t.mail||t.samAccountName,n.isServicePrincipal(t)&&(i=t.originId),n.isAADIdentity(t)?(r=u.equals(t.entityType,"Group",!0),f=r?n.AAD_IDENTITY_GROUP_PREFIX:n.AAD_IDENTITY_USER_PREFIX,(t.signInAddress||t.mail)&&!r?u.format("{0} {1}{2}{3}\\{4}{5}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,f,t.originId,t.signInAddress||t.mail,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):u.format("{0} {1}{2}{3}{4}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,f,t.originId,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END)):n.isTfsGroup(t)?t.localId?u.format("{0} {1}{2}{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.TFS_GROUP_PREFIX,t.localId.toUpperCase(),n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName:i?i.indexOf("@")===-1&&t.scopeName&&!n.isServicePrincipal(t)?u.format("{0} {1}{2}\\{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,t.scopeName,i,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):u.format("{0} {1}{2}{3}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,i,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.subjectDescriptor?u.format("{0} {1}{2}{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.DESCRIPTOR_PREFIX,t.subjectDescriptor,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName||""):""},n.getUniqueIdentityNameForContextIdentity=function(t,i){return t?u.format("{0} {1}{2}{3}",i,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,t,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):i||""},n.getFriendlyDistinctDisplayName=function(t,i){return i.displayName&&i.entityId&&!n.isTfsGroup(i)?t:i.displayName||""},n.parseUniquefiedIdentityName=function(t){var p,w;if(!t)return null;var o=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START),h=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END),v=!1,l=!1,s=t;o>=0&&h>o&&(l=!0,s=s.replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START).replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END));o=s.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START);h=s.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END);var a=s,c="",e="",y="",f="";return o>=0&&h>o&&h===s.length-1&&(a=s.substr(0,o).trim(),l?(f=s.substr(o+1,h-o-1).trim(),f.indexOf(n.AAD_IDENTITY_USER_PREFIX)===0?f=f.substr(n.AAD_IDENTITY_USER_PREFIX.length):f.indexOf(n.AAD_IDENTITY_GROUP_PREFIX)===0&&(v=!0,f=f.substr(n.AAD_IDENTITY_GROUP_PREFIX.length)),p=f.lastIndexOf("\\"),p>0&&(e=f.substr(p+1).trim(),e.indexOf("@")!==-1?(c=e,f=f.substr(0,p).trim()):(a=t,f="",v=!1))):(e=s.substr(o+1,h-o-1).trim(),w=n.getVsIdFromGroupUniqueName(e),y=n.getDescriptorFromUniqueName(e),e.indexOf("@")!==-1||e.indexOf("\\")!==-1||e.indexOf(n.DESCRIPTOR_PREFIX)!==-1||w||u.isGuid(e)?(c=e,w!==""&&(f=w,v=!0,c="")):a=t)),f||c||y?{localId:l?undefined:f,displayName:a,signInAddress:c,originDirectory:l?"aad":"vsd",entityId:y||f||c,entityType:v?"Group":"User",originId:l?f:undefined,subjectDescriptor:y}:r.EntityFactory.createStringEntity(a,i.urlHelper.getVersionedContentUrl("notassigned-user.svg"))},n.getEntityIdentifier=function(n,t,i){var e=u.equals(n.entityType||"",r.EntityFactory.STRING_ENTITY_TYPE,!0),f;return e?"":(f=n.subjectDescriptor||n.localId||n.signInAddress||n.mail,t)?f:i&&!f?"":f?"".concat(n.displayName," <").concat(f,">"):n.displayName},n.getDistinctDisplayNameFromGraphSubject=function(t,i){return t?this.isGraphGroup(t)&&(i||t.originId)&&t.principalName?u.format("{0} {1}{2}{3}{4}",t.principalName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.TFS_GROUP_PREFIX,(i||t.originId).toUpperCase(),n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):this.isGraphUser(t)&&t.mailAddress?"".concat(t.displayName," <").concat(t.mailAddress,">"):t.displayName:undefined},n.isGraphGroup=function(n){return u.equals(n.subjectKind,f.SubjectKind.Group,!0)},n.isGraphUser=function(n){return u.equals(n.subjectKind,f.SubjectKind.User,!0)},n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<",n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<<",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">>",n.TFS_GROUP_PREFIX="id:",n.AAD_IDENTITY_USER_PREFIX="user:",n.AAD_IDENTITY_GROUP_PREFIX="group:",n.IDENTITY_UNIQUENAME_SEPARATOR="\\",n.DESCRIPTOR_PREFIX="desc:",n}();t.WITIdentityHelpers=e});

define("WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper",["require","exports","Presentation/Scripts/TFS/TFS.OM.Identities","VSS/Utils/String","VSS/Graph/RestClient","VSS/Service","VSS/WebApi/Constants","TfsCommon/Scripts/WITIdentityHelpers","VSS/Error","VSS/VSS","VSS/Events/Services","VSS/Navigation/HubsService","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function nt(n){w(n)&&n.identityRef&&n.identityRef.descriptor&&(b[n.identityRef.descriptor]=!0)}function k(n,t){var u=w(n),f=d(n),i,r;if(!t||u||f){if(u)return i=n,t?i.identityRef:i.distinctDisplayName||i.identityRef.displayName;if(f)return r=n,t?r:r.displayName}else return g(n);return n}function w(n){if(n&&n.identityRef!==undefined){var t=n;return t.distinctDisplayName&&!v[t.distinctDisplayName]&&(v[t.distinctDisplayName]=t),t.identityRef&&t.identityRef.descriptor&&!y[t.identityRef.descriptor]&&(y[t.identityRef.descriptor]=t),!0}return!1}function d(n){return!!(n&&n.displayName!==undefined)}function g(n){if(v[n])return v[n].identityRef;var t=i.IdentityHelper.parseUniquefiedIdentityName(n),r=i.IdentityHelper.getIdentityImageUrlByIdentity(t);return t&&t.isAadIdentity?{displayName:n}:t&&{displayName:t.displayName,uniqueName:t.uniqueName,imageUrl:r,_links:{avatar:{href:r}}}}function tt(n){if(n&&n.subjectDescriptor){var t={distinctDisplayName:o.WITIdentityHelpers.getUniquefiedIdentityName(n),identityRef:{displayName:n.displayName,descriptor:n.subjectDescriptor}};return y[n.subjectDescriptor]||(y[n.subjectDescriptor]=t),v[t.distinctDisplayName]||(v[t.distinctDisplayName]=t),t}return null}function it(n){if(w(n))return n;var t=k(n,!0);return t||(t={displayName:n}),{distinctDisplayName:n,identityRef:t}}function rt(n){var f=w(n),r=f?n.identityRef:n,t,u;return r?(t=r._links,u=r.imageUrl,t&&t.avatar&&t.avatar.href)?t.avatar.href:u?u:i.IdentityHelper.getIdentityImageUrlByIdentity(n):i.IdentityHelper.getIdentityImageUrlByIdentity(null)}function ut(n){var t,i;return!n||n.length===0?n:(t={},n.forEach(function(n){return t[n.distinctDisplayName]=n}),i=Object.keys(t).sort(r.localeIgnoreCaseComparer),i.map(function(n){return t[n]}))}function ft(n){return __awaiter(this,void 0,void 0,function(){var i,r,t,u,f,c;return __generator(this,function(l){switch(l.label){case 0:if(!(n&&n.descriptor))return[3,7];if(i=y[n.descriptor],i&&b[n.descriptor])return[2,Promise.resolve(i)];et();l.label=1;case 1:return l.trys.push([1,6,,7]),[4,p.lookupSubjects({lookupKeys:[n]})];case 2:return(r=l.sent(),r=r.value,!r[n.descriptor])?[3,5]:(t=r[n.descriptor],u=void 0,!(t.descriptor&&a.startsWith(t.descriptor,e.SubjectType.AadGroup,a.localeIgnoreCaseComparer)))?[3,4]:[4,p.getStorageKey(t.descriptor)];case 3:f=l.sent();f&&(u=f.value);l.label=4;case 4:return i={distinctDisplayName:o.WITIdentityHelpers.getDistinctDisplayNameFromGraphSubject(t,u),identityRef:{descriptor:t.descriptor,displayName:t.displayName,imageUrl:t._links&&t._links.avatar&&t._links.avatar.href,_links:t._links}},v[i.distinctDisplayName]=i,y[i.identityRef.descriptor]=i,b[i.identityRef.descriptor]=!0,[2,i];case 5:return[3,7];case 6:return c=l.sent(),s.publishErrorToTelemetry({name:"UnableToResolveWorkItemIdentityRef",message:h.getErrorMessage(c)}),[3,7];case 7:return[2,{distinctDisplayName:n&&n.displayName,identityRef:n}]}})})}function et(){p||(p=f.VssConnection.getConnection().getHttpClient(u.GraphHttpClient5,e.ServiceInstanceTypes.SPS))}Object.defineProperty(t,"__esModule",{value:!0});t.resolveIdentityRefToWorkItemIdentityRef=t.uniqueSortWorkItemIdentityRefObjects=t.getAvatarUrl=t.convertWorkItemIdentityRefFromFieldValue=t.createWorkItemIdentityRefFromEntity=t.createIdentityRefFromDistinctDisplayName=t.isIdentityRef=t.isWorkItemIdentityRef=t.convertPotentialIdentityRefFromFieldValue=t.setResolvedByDescriptorIfWorkItemIdentityRef=void 0;var v={},y={},b={},p;c.getService().attachEvent(l.HubEventNames.PreXHRNavigate,function(){v={};y={};b={};p=null});t.setResolvedByDescriptorIfWorkItemIdentityRef=nt;t.convertPotentialIdentityRefFromFieldValue=k;t.isWorkItemIdentityRef=w;t.isIdentityRef=d;t.createIdentityRefFromDistinctDisplayName=g;t.createWorkItemIdentityRefFromEntity=tt;t.convertWorkItemIdentityRefFromFieldValue=it;t.getAvatarUrl=rt;t.uniqueSortWorkItemIdentityRefObjects=ut;t.resolveIdentityRefToWorkItemIdentityRef=ft});

define("WorkItemTracking/Scripts/Utils/WorkItemRichTextHelper",["require","exports","VSS/Utils/String"],function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemRichTextHelper=void 0;var r;(function(n){function t(n,t,i){var u="<style>\nhtml, body\n{\n    height: 100%;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\nhtml {\n    overflow: hidden;\n}\nbody\n{\n    font-family: Segoe UI, Helvetica Neue, Helvetica, Arial, Verdana;\n    color: #222222;\n    background-color: #ffffff;\n    font-size: 14px;\n    word-break: break-word;\n    margin:0;\n    padding: 5px;\n    box-sizing: border-box;\n    overflow: auto;\n}\n\nbody.invalid\n{\n    background-color: #ffc;\n}\n\nP\n{\n    line-height: 1.5em;\n    margin: 0;\n}\n\nbody.watermark {\n    color: #999999;\n    font-style: italic;\n}\n\nimg \n{ \n    max-width: 100%; \n}\n\na, a:visited {\n    color: #007acc;\n}\n\n\na.mention-link {\n    text-decoration: none;\n}\n\n.mention-widget-workitem {\n    background: rgba(244, 244, 244, 1);\n    padding: 2px .333em;\n    display: inline;\n    word-break: break-word;\n    margin: 0 1px;\n    border-radius: 2px;\n    line-height: 24px;\n    font-style: normal;\n    font-weight: normal;\n    border-left: 2px solid transparent;\n}\n\n.mention-widget-workitem-no-access {\n    background: rgba(244, 244, 244, 1);\n    padding: 2px .333em;\n    display: inline;\n    word-break: break-word;\n    margin: 0 1px;\n    border-radius: 2px;\n    line-height: 24px;\n    font-style: normal;\n    font-weight: normal;\n}\n\n.mention-widget-workitem-typeid {\n    color: rgba(16, 110, 190, 1);\n}\n\n.mention-widget-workitem-title {\n    color: rgba(0, 0, 0, .9);\n    font-weight: 600;\n}\n\n.mention-widget-workitem-state {\n    border-left: 1px solid rgba(200, 200, 200, 1);\n    padding: 0px 8px 0px 4px;\n    display: inline-flex;\n    align-items: center;\n    margin: 4px 2px 4px 8px;\n    line-height: 14px;\n    vertical-align: bottom;\n    color: rgba(0, 0, 0, .9);\n    height: 16px;\n}\n\n.workitem-state-color {\n    border: 3px solid transparent;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    margin: 0px 4px;\n    background-clip: padding-box;\n}\n\n.mention-preview-person {\n    color: rgba(16, 110, 190, 1);\n    font-weight: bold;\n    background-color: rgba(244, 244, 244, 1);\n}\n\n.mention-preview-me {\n    color: rgba(218, 10, 0, 1);\n}\n\n.mention-preview-person-clickable {\n    cursor: pointer;\n}\n\n.mention-widget {\n    color: $communication-foreground;\n    cursor: pointer;\n}\n\n.mention-widget * {\n    cursor: pointer;\n}\n\n.mention-card {\n    box-shadow: 0 0 20px gray;\n}\n\n.work-item-type-icon-host {\n    display: inline-block;\n}\n\n.work-item-type-icon {\n    min-width: 14px;\n    display: inline;\n}\n\n.secondary-text {\n    color: rgba(0, 0, 0, .55)\n}\n\n.work-item-type-icon-no-tooltip {\n    margin-right: 5px;\n}\n\n.mention-widget-item {\n    background: rgba(244, 244, 244, 1);\n    padding: 0 .333em;\n    display: inline;\n    word-break: break-word;\n}\n\n.mention-widget-typeid {\n    color: rgba(16, 110, 190, 1);\n}\n\n.mention-widget-title {\n    color: rgba(0, 0, 0, .9)\n}\n\n".concat(i||"","\n<\/style>"),r="";return t&&(r+='<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">'),"<head>"+r+u+"<\/head>"}function r(n){var r=$.parseHTML(n),t=!0;return $.each(r,function(n,r){return t=r.textContent!==undefined&&r.textContent.trim()===i.empty&&(r.innerHTML===undefined||r.innerHTML!==undefined&&r.tagName!=="IMG"&&r.innerHTML.indexOf("img")===-1&&r.innerHTML.indexOf("li")===-1),t?void 0:t}),t}n.getPageHtml=t;n.isHtmlVisuallyBlank=r})(r=t.WorkItemRichTextHelper||(t.WorkItemRichTextHelper={}))});

define("WorkItemTracking/Scripts/WorkItemMetadataCacheStampManager",["require","exports","q","VSS/Service","VSS/Utils/String","VSS/Contributions/Services","VSS/WebApi/Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/CustomerIntelligence","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource","VSS/Error"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemMetadataCacheStampManager=void 0;var a=function(){function n(n){this._cachedPromises={};this._workItemMetaDataCacheStamps={};this._tfsContext=n}return n.prototype.ensureStampsForCurrentProject=function(t,i){var s=this,o,u;return i===void 0&&(i=!1),o=t.toUpperCase(),u=r.getService(f.WebPageDataService),u.ensureDataProvidersResolved([{id:n.MetadataStampsKey,properties:{serviceInstanceType:e.ServiceInstanceTypes.TFS}}],i).then(function(){var t=u.getPageData(n.MetadataStampsKey);t&&t.data&&s._setCacheStamps(t.data,o)})},n.prototype.getMetadataCacheStamp=function(n,t){var f=this,e=o.TfsContext.getDefault().navigation.projectId,r=(t||e||"").toUpperCase(),u;return r?(u=function(){return f._workItemMetaDataCacheStamps[r]?f._workItemMetaDataCacheStamps[r][n]:null},!this._workItemMetaDataCacheStamps[r])?this._cachedPromises[r]?this._cachedPromises[r].then(function(){return u()},function(){return u()}):(this._cachedPromises[r]=this._ensureMetadataCacheStamps(r,e,t),this._cachedPromises[r].then(function(){return delete f._cachedPromises[r],u()},function(n){return delete f._cachedPromises[r],l.publishErrorToTelemetry(n),u()})):i(u()):i(null)},n.prototype._fetchMetadataCacheStamps=function(n){var t=i.defer(),r={controller:"wit",action:"getMetadataCacheStamps",routeData:{project:n}};return(new c.WorkItemStoreLevelWITDataSource).getDataAsync(r,{projectId:n},!0).then(function(n){t.resolve(n.data)},function(){t.resolve(null)}),t.promise},n.prototype._ensureMetadataCacheStamps=function(t,e,o){var c=this,a=!o||u.equals(o,e||"",!0),l=function(n){c._workItemMetaDataCacheStamps[t]=n?n.workItemMetadataCacheStamp:null;c.workItemTypesEtag=n?n.rawWorkItemTypesEtagForCI:null};return a?(s.PerfScenarioManager.addSplitTiming(h.PerformanceEvents.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMPAGEDATA,!0),r.getService(f.ExtensionService).getContribution(n.MetadataStampsKey).then(function(){s.PerfScenarioManager.addSplitTiming(h.PerformanceEvents.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMPAGEDATA,!1);var t=c.getPageData(n.MetadataStampsKey);return t&&t.data&&l(t.data),i(null)})):(s.PerfScenarioManager.addSplitTiming(h.PerformanceEvents.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMAPI,!0),this._fetchMetadataCacheStamps(o).then(function(n){return s.PerfScenarioManager.addSplitTiming(h.PerformanceEvents.WORKITEMTRACKING_GETMETADATACACHESTAMP_FROMAPI,!1),l(n),i(null)}))},n.prototype._setCacheStamps=function(n,t){this._workItemMetaDataCacheStamps[t]=n?n.workItemMetadataCacheStamp:null;this.workItemTypesEtag=n?n.rawWorkItemTypesEtagForCI:null},n.prototype.addStampToParams=function(n,t,i,r){var u=function(n){return n?t?(t.stamp=n,t):{stamp:n}:t};this.getMetadataCacheStamp(n,r).then(function(n){i(u(n))})},n.prototype.getPageData=function(n){return r.getService(f.WebPageDataService).getPageData(n)},n.prototype._getApiLocation=function(n,t){return this._tfsContext.getActionUrl(n||"","wit",$.extend({project:"",team:"",area:"api"},t))},n.MetadataStampsKey="ms.vss-work-web.work-item-cache-data-provider",n}();t.WorkItemMetadataCacheStampManager=a});

define("Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService",["require","exports","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","VSS/Contributions/Services","VSS/Diag","VSS/Service","VSS/Utils/String"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.TeamAwarenessService=t.TeamSettingsContributionId=void 0;t.TeamSettingsContributionId="ms.vss-work-web.team-wit-settings-data-provider";var o=function(n){function o(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._teamSettingsById={},t}return __extends(o,n),o.contextSupports=function(n){return n&&n.currentTeam&&!!n.currentTeam.identity.id},o.prototype.beginGetTeamMembers=function(n,t,r){var e=this;return u.Debug.assertParamIsBool(t,"includeGroups"),u.Debug.assertParamIsNumber(r,"maxResults"),new Promise(function(u,o){return f.getService(i.TeamService,e.getWebContext()).beginGetTeamMembers(n,t,r,u,o)})},o.prototype.beginGetTeamSettings=function(n){var s=this,o=f.getService(r.WebPageDataService,this.getWebContext()),i=o.getPageData(t.TeamSettingsContributionId);return i&&e.equals(i.teamId,n,!0)?Promise.resolve(i):o.getDataAsync(t.TeamSettingsContributionId,null,{teamId:n}).then(function(t){return u.Debug.assert(e.equals(t&&t.teamId,n,!0),"Retrieved teamSettings teamId does not match what was requested"),s._teamSettingsById[t.teamId]=t,t})},o.prototype.getTeamSettings=function(n){var s=f.getService(r.WebPageDataService,this.getWebContext()),i=s.getPageData(t.TeamSettingsContributionId),o;if(i&&e.equals(i.teamId,n,!0))return this._teamSettingsById[i.teamId]=i,i;if(this._teamSettingsById[n])return this._teamSettingsById[n];o="Team settings for team ".concat(n," not found in JSON island");u.Debug.fail(o);throw new Error(o);},o}(f.VssService);t.TeamAwarenessService=o});

define("Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.WorkItemTracking.Constants",["require","exports"],function(n,t){var i,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTrackingRestResources=t.WitConstants=t.QueryResultFormat=void 0,function(n){n[n.Json=0]="Json";n[n.Html=1]="Html"}(i=t.QueryResultFormat||(t.QueryResultFormat={})),function(n){n.WorkItemsLocationId="72C7DDF8-2CDC-4F60-90CD-AB71C14A399B";n.QueriesLocationId="A67D190C-C41F-424B-814D-0E906F659301";n.WorkItemTypeFieldsLocationId="BD293CE5-3D25-4192-8E67-E8092E879EFB";n.WorkItemRuleEngineLocationId="1A3A1536-DCA6-4509-B9C3-DD9BB2981506";n.AreaName="wit";n.DefaultPreviewApiVersion="1.0-Preview.2";n.DefaultReleaseApiVersion="1.0"}(r=t.WitConstants||(t.WitConstants={})),function(n){n.WorkItems="workItems"}(u=t.WorkItemTrackingRestResources||(t.WorkItemTrackingRestResources={}))});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking.WebApi",["require","exports","q","VSS/Diag","VSS/WebApi/RestClient","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.WorkItemTracking.Constants"],function(n,t,i,r,u,f){var e,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemTrackingHttpClient=t.AttachmentsLocationId=t.DefaultAttachmentChunkSize=t.AttachmentUploadType=void 0,function(n){n[n.Queries=0]="Queries";n[n.WorkItemTypeFields=1]="WorkItemTypeFields";n[n.WorkItemRuleEngine=2]="WorkItemRuleEngine";n[n.Attachments=3]="Attachments"}(e||(e={})),function(n){n.Simple="Simple";n.Chunked="Chunked"}(o=t.AttachmentUploadType||(t.AttachmentUploadType={}));t.DefaultAttachmentChunkSize=5e6;t.AttachmentsLocationId="E07B5FA4-1499-494D-A496-64B860FD64FF";s=function(n){function u(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._baseRootRequestPath=t,i}return __extends(u,n),u.prototype.beginGetRootQueries=function(n,t){var i=this._getQueryRequestOptions(n,t);return i.responseIsCollection=!0,this._beginRequest(i)},u.prototype.beginGetQueries=function(n,t,i){var u=this._getQueryRequestOptions(n,t,{query:i});return this._beginRequest(u)},u.prototype.beginGetQueriesByPath=function(n,t,i){var u=this._getQueryRequestOptions(n,t);return $.extend(u.data,{query:i}),this._beginRequest(u)},u.prototype.beginCreateQueryDefinition=function(n,t,i,u){return this._postQueryItem(n,{name:t,wiql:i,isFolder:!1},u)},u.prototype.beginCreateQueryFolder=function(n,t,i){return this._postQueryItem(n,{name:t,isFolder:!0},i)},u.prototype.beginMoveQueryItem=function(n,t,i){return this._postQueryItem(n,{id:t},i)},u.prototype.beginUpdateQueryDefinition=function(n,t,i){return this._patchQueryItem(n,{id:t,wiql:i})},u.prototype.beginRenameQueryItem=function(n,t,i){return this._patchQueryItem(n,{id:t,name:i})},u.prototype.beginDeleteQueryItem=function(n,t){var i=this._getRequestOptions(e.Queries,"DELETE",null,{query:t,project:n});return this._beginRequest(i)},u.prototype._beginGetLocation=function(n,t){var r=i.defer();switch(t){case u.WorkItemTypeFieldsLocation.id:r.resolve(u.WorkItemTypeFieldsLocation);break;case u.QueryLocation.id:r.resolve(u.QueryLocation);break;case u.AttachmentsLocation.id:r.resolve(u.AttachmentsLocation)}return r.promise},u.prototype._postQueryItem=function(n,t,i){var r=this._getRequestOptions(e.Queries,"POST",t,{query:i,project:n});return this._beginRequest(r)},u.prototype._patchQueryItem=function(n,t){var i=this._getRequestOptions(e.Queries,"PATCH",t,{query:t.id,project:n});return this._beginRequest(i)},u.prototype._getRequestOptions=function(n,i,r,u){switch(n){case e.Queries:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:f.WitConstants.QueriesLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1};case e.WorkItemTypeFields:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:f.WitConstants.WorkItemTypeFieldsLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1};case e.Attachments:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:t.AttachmentsLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1}}},u.prototype._getQueryRequestOptions=function(n,t,i){return this._getRequestOptions(e.Queries,"GET",{$depth:t,$expand:"minimal"},$.extend({project:n},i))},u.prototype.beginGetWorkItemTypeFields=function(n,t,i){var u=this._getRequestOptions(e.WorkItemTypeFields,"GET",null,{project:n,type:t,field:i});return this._beginRequest(u)},u.prototype.getAttachmentUrl=function(n,t,i,r){var e={id:t,project:n},f=u.AttachmentsLocation;return this.getRequestUrl(f.routeTemplate,f.area,f.resourceName,e,{fileName:i,download:r,"api-version":"5.0-preview.2"})},u.prototype.beginAttachmentUpload=function(n,i,u,f,e,o){var s=f?f:t.DefaultAttachmentChunkSize;return i.size>s?this.beginAttachmentUploadChunked(n,i,u,s,e,o):this.beginAttachmentUploadSimple(n,i,u,o)},u.prototype.beginAttachmentUploadChunked=function(n,t,i,u,f,e){var s=this,o;return o=jQuery.Deferred(),this._registerAttachment(n,t,i,e).then(function(r){s._uploadAttachment(n,r.id,t,u,f,e,i).then(function(){return o.resolve(r)},function(n){return o.reject(n)})}),o.promise()},u.prototype.beginAttachmentUploadSimple=function(n,t,i,u){var s=this;var e=jQuery.Deferred(),f=new FileReader,h=!1,c=function(n){h=!0;e.reject(n)};try{f.readAsArrayBuffer(t)}catch(l){c(l)}return f.onerror=function(n){c(n)},f.onloadend=function(){if(!h&&f.readyState===f.DONE){var t=new Uint8Array(f.result),r=$.extend(s._getAttachmentUploadRequestParams("POST",n,o.Simple,i,null,u),{data:t,isRawData:!0});s._beginRequest(r).then(function(n){return e.resolve(n)},function(n){return e.reject(n)})}},e.promise()},u.prototype._registerAttachment=function(n,t,i,r){var u=this._getAttachmentUploadRequestParams("POST",n,o.Chunked,i,null,r);return this._beginRequest(u)},u.prototype._uploadAttachment=function(n,i,u,f,e,s,h){function y(){var t;typeof u.slice=="function"&&(!e||e())?t=u.slice(v,l+1):c.reject();var n=new FileReader,i=!1,r=function(n){i=!0;c.reject(n)};try{n.readAsArrayBuffer(t)}catch(o){r(o)}n.onerror=function(n){r(n)};n.onloadend=function(){if(!i&&n.readyState===n.DONE){var t=$.extend(p,{data:new Uint8Array(n.result),isRawData:!0,customHeaders:{"Content-Range":"bytes "+v+"-"+l+"/"+a}});w._beginRequest(t).then(function(){return l<a-1?(v+=f,l=Math.min(l+f,a-1),y()):c.resolve(),null},function(n){return c.reject(n)})}}}var c;c=jQuery.Deferred();(!f||f<=0)&&(f=t.DefaultAttachmentChunkSize);var a=u.size,v=0,l=Math.min(f,a)-1,p=this._getAttachmentUploadRequestParams("PUT",n,o.Chunked,h,i,s),w=this;return y(),c.promise()},u.prototype._getAttachmentUploadRequestParams=function(n,i,r,u,e,o){var s={area:f.WitConstants.AreaName,locationId:t.AttachmentsLocationId,queryParams:{uploadType:r,areaPath:u,fileName:o},routeValues:{project:i},httpMethod:n,apiVersion:f.WitConstants.DefaultReleaseApiVersion};return e?$.extend(s,{routeValues:{id:e,project:i}}):s},u.prototype._getDefaultParameters=function(){return{"api-version":f.WitConstants.DefaultReleaseApiVersion}},u.QueryLocation={id:f.WitConstants.QueriesLocationId,area:f.WitConstants.AreaName,maxVersion:"2.0",minVersion:"2.0",releasedVersion:"2.0",resourceName:"queries",resourceVersion:2,routeTemplate:"{project}/_apis/{area}/{resource}/{*query}"},u.WorkItemTypeFieldsLocation={id:f.WitConstants.WorkItemTypeFieldsLocationId,area:f.WitConstants.AreaName,maxVersion:"2.0",minVersion:"1.0",releasedVersion:"1.0",resourceName:"workItemTypesField",resourceVersion:1,routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}"},u.AttachmentsLocation={id:t.AttachmentsLocationId,area:f.WitConstants.AreaName,resourceName:"attachments",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",resourceVersion:1,minVersion:"1.0",maxVersion:"2.0",releasedVersion:"1.0"},u}(u.VssHttpClient);t.WorkItemTrackingHttpClient=s});

define("TFS/WorkItemTracking/BatchRestClient",["require","exports","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u){"use strict";function e(){return i.getClient(f)}Object.defineProperty(t,"__esModule",{value:!0});t.getClient=t.WorkItemTrackingHttpBatchClient=void 0;var f=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._batchApiVersion="4.0-preview",i}return __extends(t,n),t.prototype.createWorkItemsBatch=function(n,t,i){for(var f,u=[],e="/".concat(t,"/_apis/wit/workitems/$").concat(i,"?api-version=").concat(this._batchApiVersion),r=0,o=n.length;r<o;r++)f={method:"PATCH",uri:e,headers:{"Content-Type":"application/json-patch+json"},body:n[r]},u.push(f);return this._beginBatchRequest(u)},t.prototype.updateWorkItemsBatch=function(n){var t=this,i=n.map(function(n){return t._createBatchRequest(n[0],"PATCH","workItems",n[1])});return this._beginBatchRequest(i)},t.prototype.destroyWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"DELETE","recyclebin");return this._beginBatchRequest(t)},t.prototype.restoreWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"PATCH","recyclebin",[{op:"replace",path:"/IsDeleted",value:!1},]);return this._beginBatchRequest(t)},t.prototype.deleteWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"DELETE","workItems");return this._beginBatchRequest(t)},t.prototype.getQueriesBatch=function(n){var t=this._createBatchRequests(n,"GET","queries");return this._beginQueryBatchRequest(t)},t.prototype._createBatchRequests=function(n,t,i,r){for(var e,f=[],u=0,o=n.length;u<o;u++)e=this._createBatchRequest(n[u],t,i,r),f.push(e);return f},t.prototype._createBatchRequest=function(n,t,i,r){return{method:t,uri:"/_apis/wit/".concat(i,"/").concat(n,"?api-version=").concat(this._batchApiVersion),headers:{"Content-Type":"application/json-patch+json"},body:r}},t.prototype._beginBatchRequest=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"A5AD93C8-56B7-4CB0-A9C0-8419DBD7FC71",resource:"batch",routeTemplate:"_apis/{area}/${resource}",data:n,apiVersion:this._batchApiVersion})},t.prototype._beginQueryBatchRequest=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"batch",routeTemplate:"_apis/{area}/${resource}",data:n,apiVersion:this._batchApiVersion})},t.serviceInstanceId=u.ServiceInstanceTypes.TFS,t}(r.VssHttpClient);t.WorkItemTrackingHttpBatchClient=f;t.getClient=e});

define("VSS/Utils/Html",["require","exports","VSS/Diag","VSS/Utils/Array","VSS/Utils/String","VSS/Utils/Url"],function(n,t,i,r,u,f){var e,c,a,p;Object.defineProperty(t,"__esModule",{value:!0});t.Utils=t.TemplateEngine=t.HtmlNormalizer=void 0,function(n){function h(n,t){var i,r,u,f,e;if(t){if(Array.isArray(t)){for(i=0;i<t.length;i++)n[t[i].toUpperCase()]=0;return}for(r=0,u=Object.keys(t);r<u.length;r++)f=u[r],e=t[f],n[f.toUpperCase()]=e?e:0}}function c(n){h(e,n)}function t(n,t,i,u){var f={attributes:{},eolBefore:t,eolAfter:i};r[n.toUpperCase()]=f;h(f.attributes,u)}function v(n){(n||[]).forEach(function(n){return t(n,!1,!1)})}function nt(n){(n||[]).forEach(function(n){return l[n.toUpperCase()]=0})}function y(){r||(r={},t("a",!1,!1,{charset:0,href:0,hreflang:0,name:0,rel:0,rev:0,shape:0,tabindex:0,target:{_BLANK:0},type:0}),t("blockquote",!0,!0,["cite"]),t("br",!1,!0,["clear"]),t("caption",!0,!0,["align"]),t("col",!0,!0,["align","char","charoff","span","valign","width"]),t("colgroup",!0,!0,["align","char","charoff","span","valign","width"]),t("del",!1,!1,["cite","datetime"]),t("dir",!0,!0,["compact"]),t("div",!0,!0,["align"]),t("dl",!0,!0,["compact"]),t("font",!1,!1,["color","face","size"]),t("h1",!0,!0,["align"]),t("h2",!0,!0,["align"]),t("h3",!0,!0,["align"]),t("h4",!0,!0,["align"]),t("h5",!0,!0,["align"]),t("h6",!0,!0,["align"]),t("hr",!0,!0,["align","size","width"]),t("img",!1,!1,["align","alt","border","height","hspace","ismap","longdesc","name","src","usemap","vspace","width","alt2","src2"]),t("video",!0,!0,["border","height","src","width","controls","poster","muted","loop"]),t("ins",!1,!1,["cite","datetime"]),t("li",!0,!0,["type","value"]),t("map",!1,!1,["name"]),t("menu",!0,!0,["compact"]),t("input",!0,!0,{checked:0,disabled:0,type:{CHECKBOX:0,TEXT:0}}),t("ol",!0,!0,["compact","start","type"]),t("p",!0,!0,["align"]),t("pre",!0,!0,["width"]),t("q",!1,!1,["cite"]),t("table",!0,!0,["align","border","cellpadding","cellspacing","frame","rules","summary","width","caption"]),t("tbody",!1,!1,["align","char","charoff","valign"]),t("td",!0,!0,["abbr","align","axis","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"]),t("tfoot",!0,!0,["align","char","charoff","valign"]),t("th",!0,!0,["abbr","align","axis","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"]),t("thead",!0,!0,["align","char","charoff","valign"]),t("tr",!0,!0,["align","char","charoff","valign"]),t("ul",!0,!0,["compact","type"]),t("dd",!0,!0,[]),t("dt",!0,!0,[]),t("details",!1,!1,["open"]),v(["abbr","acronym","address","b","bdo","big","center","cite","code","dfn","em","i","summary","figure","figcaption"]),v(["kbd","s","samp","small","span","strike","strong","sub","sup","tt","u","var","mark"]),v(["annotation","math","mfrac","mi","mn","mo","mover","mrel","mrow","mspace","msqrt","mstyle","msub","msubsup","msup","mtext","semantics"]))}function p(){var i,r,n,t,f,e;if(!u){for(u={},i=["b","i","u","em","small","strong","sub","sup","ins","del","mark","font","code","pre","h1","h2","h3","h4","h5","h6","strike","ul","ol","dl","table","tbody","colgroup","col","tfoot","thead"],r={li:{tagToReplace:"p"},dt:{tagToReplace:"p"},dd:{tagToReplace:"p"},tr:{tagToReplace:"div"},th:{tagToReplace:"span",afterTagText:" "},td:{tagToReplace:"span",afterTagText:" "}},n=0;n<i.length;n++)u[i[n].toUpperCase()]={tagToReplace:""};for(t=0,f=Object.keys(r);t<f.length;t++)e=f[t],u[e.toUpperCase()]=r[e]}}function tt(){l||(l={},nt(["script","style","option","select","textarea"]))}function it(){e||(e={},c(["dir","lang","title","style","id","class","contenteditable"]),c({role:{BUTTON:0,CHECKBOX:0,CELL:0,COLUMNHEADER:0,COMBOBOX:0,GRID:0,GRIDCELL:0,HEADING:0,LINK:0,LISTBOX:0,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:0,RADIOGROUP:0,ROW:0,ROWGROUP:0,ROWHEADER:0,SWITCH:0,TAB:0,TABLIST:0,TOOLTIP:0,TREE:0,TREEGRID:0,TREEITEM:0}}),c(["aria-label","aria-labelledby","aria-describedby"]),c({"aria-hidden":{TRUE:0,FALSE:0}}),c({"aria-disabled":{TRUE:0,FALSE:0}}))}function rt(){o||(o={},h(o,["src","href","cite","longdesc"]),h(o,["background-image","list-style-image"]))}function ut(){if(!s){s={};var n=function(n,t){return n&&n.toUpperCase()==="IMG"&&t&&t.toUpperCase()==="SRC"};s.BLOB=function(t,i,r){if(!n(t,i))return!1;var e=r.indexOf(":"),u=r.substr(e+1);return u.indexOf(":")>=0?f.isSafeProtocol(u):!0};s.DATA=function(t,i,r){return n(t,i)?r.toUpperCase().search("DATA:IMAGE/\\w+;")===0:!1}}}function ft(){a||(a={},h(a,["background","background-attachment","background-color","background-image","background-position","background-repeat","border","border-bottom","border-bottom-color","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-style","border-top-width","border-width","break-after","break-before","break-inside","caption-side","clear","color","float","font","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","table-layout","text-align","text-decoration","text-indent","text-transform","vertical-align","white-space","width","word-spacing"]))}function et(n,t){return n&&t?n.toUpperCase()===t.toUpperCase():!1}function ot(n){return n?(y(),n.toUpperCase()in r):!1}function st(n){return w(n,!0)}function ht(n){return w(n,!1)}function w(n,t){if(n){y();var i=n.toUpperCase();if(i in r)return t?r[i].eolBefore:r[i].eolAfter}return!1}function ct(n){if(n){p();var t=u[n.toUpperCase()];if(t!==undefined&&t.tagToReplace!=null&&t.tagToReplace.length===0)return!0}return!1}function lt(n){if(n){p();var t=u[n.toUpperCase()];if(t&&t.tagToReplace&&t.tagToReplace.length>0)return t}return null}function at(n){return n?(tt(),n.toUpperCase()in l):!1}function vt(n,t,i){var s;if(t){it();var u=t.toUpperCase(),f=i.invalidAttributes,o=i.validAttributes;if(f&&o&&u in f&&u in o)throw new Error("".concat(u," is specified in additionalInvalidAttributes and additionalValidAttributes. Attributes may only appear in either the whitelist or blacklist."));if(o&&u in o)return!0;if(u in e)return f&&u in f?!1:!0;if(n&&(y(),s=r[n.toUpperCase()],s))return u in s.attributes}return!1}function yt(n,t,i){var f=t.toUpperCase(),u=r[n.toUpperCase()].attributes[f];return u?i.toUpperCase()in u:(u=e[f],u)?i.toUpperCase()in u:!0}function b(n){return n&&(rt(),n.toUpperCase()in o)?!0:!1}function k(n,t,i,r){var u,e,o;return(e=i.indexOf(":"),e<0||f.isSafeProtocol(i))?!0:(o=i.substr(0,e),r.invalidProtocols&&o.toUpperCase()in r.invalidProtocols)?!1:(ut(),u=s[o.toUpperCase()],typeof u=="function"&&u(n,t,i)===!0)?!0:!1}function pt(n,t){if(n){if(ft(),n=n.toUpperCase(),t.invalidStyles&&n in t.invalidStyles)return!1;if(t.validStyles&&n in t.validStyles||n in a)return!0}return!1}function d(n){var t=n;return t?(t=t.replace(/&/g,"&amp;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/>/g,"&gt;"),t.replace(/</g,"&lt;")):""}function g(n,t,i){i=i||'"';var r=$("<div bogusAttribute="+i+t+i+">");return r.attr("bogusAttribute")}function wt(n,t,i){var u=[],r;return(t.split(";")||[]).forEach(function(t){if(t=(t||"").trim(),t){var f=t.split(":",2),r=(f[0]||"").trim(),e=r.toUpperCase();f.length===2&&pt(r,i)&&(!b(r)||k(n,r,(f[1]||"").trim(),i))&&u.push(t)}}),r=u.join(";"),r?'style="'+d(r)+'"':""}function bt(n,t){var r,u;if(n&&t)try{return r=g(n,t,""),decodeURI(r),u=decodeURI(f.Uri.parse(encodeURI(r)).absoluteUri),n.replace(t,d(u))}catch(e){return n.replace(t,"Invalid uri value")}return n}function kt(n,t,i,r,u,f,e,o){var s=i.substr(r,u);if(b(t)){if(k(n,t,g(t,s,f).trim(),e))return bt(i,s)}else{if(t.toUpperCase()==="STYLE")return wt(n,s,e);if(yt(n,t,s))return o&&"A"===n.toUpperCase()&&"TARGET"===t.toUpperCase()&&"_BLANK"===s.toUpperCase()&&o.updateAttribute("rel","noopener noreferrer"),i}return""}var r,l,e,o,s,a,u;n.areTagsEqual=et;n.isAllowedTag=ot;n.shouldAddEolBeforeTag=st;n.shouldAddEolAfterTag=ht;n.isFormattingRemovalTag=ct;n.getFormattingReplacementTag=lt;n.isSpecialTag=at;n.isAllowedAttribute=vt;n.cleanAttribute=kt}(e||(e={})),function(n){function s(n){return n>="0"&&n<="9"||n>="A"&&n<="Z"||n>="a"&&n<="z"?!0:!1}function i(n,t){u.lastIndex=t;var i=u.exec(n);return i?i.index:n.length}function h(n,t){f.lastIndex=t;var i=f.exec(n);return i?i.index:n.length}function t(n,t,i){var r=n.indexOf(i,t);return r>=0?r+i.length:n.length}function r(n,t){o.lastIndex=t;var i=o.exec(n);return i?{offset:i.index,name:n.substr(t,i.index-t)}:{offset:n.length,name:n.substr(t,n.length-t)}}function c(n,u,f){for(var c=n.length,o=0,p,l,w,g,b,a,v,it,nt,k,tt,d,y;o<c;){if(l=o,o=n.indexOf("<",o),o<0&&(o=c),o>l){u.writeText(n,l,o-l);continue}if(l=o++,p=n.charAt(o),o<c&&p==="!"){if(o++,o+1<c&&n.substr(o,2)==="--"){o+=2;o=t(n,o,"-->");continue}if(o+6<c&&n.substr(o,7)==="[CDATA["){o+=7;o=t(n,o,"]\]>");continue}o=t(n,o,">");continue}if(o<c&&p==="?"){o++;o=t(n,o,">");continue}if(b=!1,o<c&&p==="/"&&(b=!0,o++),o=i(n,o),a=r(n,o),o=a.offset,v=a.name,e.isSpecialTag(v)){for(o=t(n,o,">");o<c;)if(o=t(n,o,"<"),o+2<c&&n.substr(o,3)==="!--")o=t(n,o,"-->");else if(o<c&&n.charAt(o)==="/"){if(o++,o=i(n,o),a=r(n,o),o=a.offset,it=a.name,e.areTagsEqual(v,it)){o=t(n,o,">");break}}else o<c&&o++;continue}if(!e.isAllowedTag(v)||f.removeFormatting&&e.isFormattingRemovalTag(v))if(f.encodeUnknownText){u.writeEncodedText(n,l,o-l);continue}else{o=t(n,o,">");continue}if(d=v,y=null,f.removeFormatting&&(y=e.getFormattingReplacementTag(v),y&&y.tagToReplace.length!==0)){d=y.tagToReplace;o=t(n,o,">");u.writeTag(n,l,d,b);b&&y.afterTagText!=null&&y.afterTagText.length>0&&u.writeText(y.afterTagText,0,y.afterTagText.length);continue}for(u.writeTag(n,l,d,b);o<c;){if(l=o,o=i(n,o),o<c&&n.charAt(o)==="/"&&o++,o<c&&n.charAt(o)===">"){o++;u.writeEndOfTag(n,l,o-l,d);break}if(o<c&&s(n.charAt(o))){if(a=r(n,o),o=a.offset,nt=a.name,o=i(n,o),w=0,g=0,o<c&&n.charAt(o)==="=")if(o++,o=i(n,o),w=o,p=n.charAt(o),k=null,o<c&&(p==="'"||p==='"')){for(k=p,o++,w=o;o<c&&n.charAt(o)!==k;)o++;g=o;o<c&&n.charAt(o)===k&&o++}else o=h(n,o),g=o;e.isAllowedAttribute(v,nt,f)&&(tt=e.cleanAttribute(v,nt,n.substr(l,o-l),w-l,g-w,k,f,u),tt&&u.writeAttribute(tt));continue}o<c&&n.charAt(o)!==">"&&o++}}}var u=/\S/g,f=/[\s|>]/g,o=/[^\w\:\-]/g;n.parse=c}(c||(c={}));var s=function(){function n(n){this.text=n}return n.prototype.render=function(n){n.append(this.text)},n}(),o=function(){function n(n,t){this.tag=n.toUpperCase();this.root=t===!0}return n._getEmptyTags=function(){if(!n._emptyTags){var t={};t.AREA=!0;t.BASE=!0;t.BASEFONT=!0;t.BGSOUND=!0;t.BR=!0;t.COL=!0;t.EMBED=!0;t.FRAME=!0;t.HR=!0;t.IMG=!0;t.INPUT=!0;t.ISINDEX=!0;t.LINK=!0;t.META=!0;t.PARAM=!0;t.WBR=!0;t.IFRAME=!1;t.MARQUEE=!1;n._emptyTags=t}return n._emptyTags},n.hasEndTag=function(n){var t=this._getEmptyTags(),i=!0;return n in t&&(i=!t[n]),i},n.canTagHaveChild=function(n){var t=this._getEmptyTags();return!(n in t)},n.prototype.getChildren=function(){return this._children||(this._children=[]),this._children},n.prototype.getAttributes=function(){return this._attributes||(this._attributes=[]),this._attributes},n.prototype.getHasClosingTag=function(){return this.empty===!0?!1:n.hasEndTag(this.tag)},n.prototype.getCanHaveChildren=function(){return this.tagClosed===!0?!1:n.canTagHaveChild(this.tag)},n.prototype.render=function(n){var t,r,i,u,e=!1,f;if(this.tag)for(n.append("<"),n.append(this.tag),i=this.getAttributes(),t=0,r=i.length;t<r;t++)n.append(" "),n.append(i[t].trim());if(u=this.getChildren(),u.length>0)for(e=!0,this.tag&&n.append(">"),t=0,r=u.length;t<r;t++)u[t].render(n);this.tag&&(e?(n.append("<\/"),n.append(this.tag),n.append(">")):this.getHasClosingTag()?(n.append("><\/"),n.append(this.tag),n.append(">")):(f=n.toString().slice(-1),f!=" "&&f!='"'&&f!="'"&&i&&i.length>0&&n.append(" "),n.append("/>")))},n}(),v=function(){function n(){this._strings=[]}return n.prototype.append=function(n){var t=this._strings;return n&&(t[t.length]=n),this},n.prototype.clear=function(){return this._strings=[],this},n.prototype.toString=function(){return this._strings.join("")},n}(),y=function(){function n(){this._textAccumulator="";this._lastWriteWasEol=!0}return n.prototype.writeText=function(n,t,i){this._textAccumulator+=n.substr(t,i);this._lastWriteWasEol=!1},n.prototype.writeEncodedText=function(n,t,i){this._textAccumulator+=u.htmlEncode(n.substr(t,i));this._lastWriteWasEol=!1},n.prototype.writeTag=function(n,t,i,r){var u=i.toUpperCase();(r?e.shouldAddEolAfterTag(i):e.shouldAddEolBeforeTag(i))&&this._writeEols()},n.prototype.writeEndOfTag=function(){},n.prototype.writeAttribute=function(){},n.prototype.updateAttribute=function(){},n.prototype.finish=function(){},n.prototype.toString=function(){return this._textAccumulator.replace("\u00a0\r\n","\r\n").trim()},n.prototype._writeEols=function(){this._lastWriteWasEol||(this._textAccumulator+="\r\n",this._lastWriteWasEol=!0)},n}(),h=function(){function n(){this.root=new o("",!0);this.elements=[]}return n.prototype.writeText=function(n,t,i){var r=this.elements;r[r.length]=new s(n.substr(t,i))},n.prototype.writeEncodedText=function(n,t,i){var r=this.elements;r[r.length]=new s(u.htmlEncode(n.substr(t,i)))},n.prototype.writeTag=function(n,t,i,r){var u,h,c=this.elements,e,f,l=i.toUpperCase();if(r===!0){for(f=[];c.length>0;)if(h=c.pop(),h instanceof s)f[f.length]=h;else if(u=h,u.tag!==l||u.tagClosed){if(u.getCanHaveChildren())for(e=h.getChildren();f.length>0;)e[e.length]=f.pop();f[f.length]=u;u=null}else break;for(u||(u=new o(i)),e=u.getChildren();f.length>0;)e[e.length]=f.pop()}else u=new o(i);u.tagClosed=r;c[c.length]=u},n.prototype.writeEndOfTag=function(n,t,i,r){var u,f,e=this.elements,s=r.toUpperCase();i>1&&(f=n.substr(t,i),f.charAt(f.length-2)==="/"&&e.length>0&&(u=e[e.length-1],u instanceof o&&u.tag===s&&(u.empty=!0,u.tagClosed=!0)))},n.prototype.writeAttribute=function(n){var t,i=this.elements;i.length>0&&(t=i[i.length-1],t instanceof o&&t.getAttributes().push(n))},n.prototype.updateAttribute=function(n,t){var f=this.elements,e=f[f.length-1];if(e instanceof o){var i=e.getAttributes(),s=r.findIndex(i,function(t){return u.startsWith(t.trim().toUpperCase(),n.toUpperCase())}),h=" ".concat(n,'="').concat(t,'"');s===-1?i.push(h):i[s]=h}},n.prototype.finish=function(){for(var t,u=this.elements,f=this.root,n=[],i,r;u.length>0;)if(t=u.pop(),t instanceof s)n[n.length]=t;else{if(t.getCanHaveChildren())for(i=t.getChildren();n.length>0;)i[i.length]=n.pop();n[n.length]=t}for(r=f.getChildren();n.length>0;)r[r.length]=n.pop()},n.prototype.toString=function(){var n=new v;return this.root.render(n),n.toString()},n}(),l;(function(n){function t(n){var i=null,t,r,u;if(n)for(i={},t=0,r=n;t<r.length;t++)u=r[t],i[u.toUpperCase()]=0;return i}function i(n){return n===void 0&&(n={}),{invalidAttributes:t(n.additionalInvalidAttributes),validAttributes:t(n.additionalValidAttributes),invalidStyles:t(n.additionalInvalidStyles),validStyles:t(n.additionalValidStyles),removeFormatting:n.removeFormatting||!1,encodeUnknownText:n.encodeUnknownText||!1,invalidProtocols:t(n.additionalInvalidProtocols)}}function u(n){var t=new h;return r(n,t,i())}function f(n,t,u,f,e,o,s){var c=new h;return r(n,c,i({additionalInvalidAttributes:t,additionalValidAttributes:u,additionalInvalidStyles:f,additionalValidStyles:e,encodeUnknownText:o,additionalInvalidProtocols:s}))}function e(n){var t=new h;return r(n,t,i({additionalInvalidAttributes:["CLASS","STYLE"],removeFormatting:!0}))}function o(n){var t=new h;return r(n,t,i({encodeUnknownText:!0}))}function s(n){var t=new y;return r(n,t,i({encodeUnknownText:!0}))}function r(n,t,i){return c.parse(n,t,i),t.finish(),t.toString()}n.normalize=u;n.normalizeStripAttributes=f;n.removeFormatting=e;n.sanitize=o;n.convertToPlainText=s})(l=t.HtmlNormalizer||(t.HtmlNormalizer={}));a=function(){function n(){}return n._replaceSimpleTemplateTokens=function(t,i){for(var r=t,e=/\$\{([^\$\}]+)\}/ig,u,o,f;(u=e.exec(r))!==null;)o=u[1],f=n._getEncodedTextPropertyValue(i,o),r=n._replaceMatch(r,u,f),e.lastIndex=u.index+f.length;return r},n._replaceUnencodedTemplateTokens=function(t,i){for(var r=t,e=/\{\{html ([^\$\}]+)\}\}/ig,u,o,f;(u=e.exec(r))!==null;)o=u[1],f=n._getTextPropertyValue(i,o),r=n._replaceMatch(r,u,f),e.lastIndex=u.index+f.length;return r},n._replaceForEachTemplateTokens=function(t,i){for(var f=t,a=/\{\{each \s*([^ \}]+)\}\}((?:.|\r|\n)*)\{\{\/each\}\}/ig,c=/\$\{\$value(?:\.([^\}]+))?\}/ig,r,v,y,e,o,s,p,l,u,h,w;(r=a.exec(f))!==null;){if(v=r[1],y=r[2],e="",o=n._getPropertyValue(i,v),Array.isArray(o))for(h=0,w=o.length;h<w;h+=1){for(u=y,c.lastIndex=0;(s=c.exec(u))!==null;)p=s[1],l=n._getEncodedTextPropertyValue(o[h],p),u=n._replaceMatch(u,s,l),c.lastIndex=s.index+l.length;e+=u}f=n._replaceMatch(f,r,e);a.lastIndex=r.index+e.length}return f},n._replaceMatch=function(n,t,i){return n.substring(0,t.index)+i+n.substring(t.index+t[0].length)},n._getEncodedTextPropertyValue=function(t,i){var r=n._getPropertyValue(t,i);return r===undefined?"":u.htmlEncode(r.toString())},n._getTextPropertyValue=function(t,i){var r=n._getPropertyValue(t,i);return r===undefined?"":r.toString()},n._getPropertyValue=function(n,t){if(t===undefined||t.length===0)return n;for(var r=t.split("."),i=n;r.length>0&&i!==undefined;)i=i[r.shift()];return i},n.tmpl=function(t,i){var r=t;return r=n._replaceSimpleTemplateTokens(r,i),r=n._replaceUnencodedTemplateTokens(r,i),n._replaceForEachTemplateTokens(r,i)},n}();t.TemplateEngine=a,function(n){function t(t){if(t===null||t===undefined)return!0;if(t.length>=n.ISEMPTY_MINIMAL_CONTENT_LENGTH)return!1;var i=l.removeFormatting(t);return i===""||i==="<BR>"||i==="<BR/>"||i==="<P>&nbsp;<\/P>"||i==="<P><\/P>"||i==="<P><BR/><\/P>"||i==="<BR>\r\n"||i==="<BR>\r\n"||i==="<DIV><BR/><\/DIV>"||i==="<DIV><DIV><BR/><\/DIV><\/DIV>"}n.ISEMPTY_MINIMAL_CONTENT_LENGTH=500;n.isEmpty=t}(p=t.Utils||(t.Utils={}))});

define("WorkItemTracking/Scripts/TFS.WorkItemTracking",["require","exports","VSS/VSS","Presentation/Scripts/TFS/FeatureRef/CSSNodeEvents","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Caching/WorkItemIndexDBCacheManager","Presentation/Scripts/TFS/MVCToDataProviderDataSources/MVCToDataProviderDataSource","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","Presentation/Scripts/TFS/MVCToDataProviderDataSources/WITDataSource","Presentation/Scripts/TFS/TFS.OM.Identities","TFS/WorkItemTracking/RestClient","VSS/Contributions/Services","VSS/Error","VSS/Events/Services","VSS/FeatureAvailability/Services","VSS/Identities/Picker/Common","VSS/Service","WorkItemTracking/Scripts/Form/UserLayoutSettings","WorkItemTracking/Scripts/LinkForm","WorkItemTracking/Scripts/OM/DataSources/index","WorkItemTracking/Scripts/OM/DataSources/WorkItemTypeCategoriesDataSource","WorkItemTracking/Scripts/OM/NodesCacheManager","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/OM/WorkItemMetadataCacheInformationManager","WorkItemTracking/Scripts/RegisterLinkForms","WorkItemTracking/Scripts/Utils/NodeHelpers","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/Utils/RemoteWorkItemUtils","WorkItemTracking/Scripts/Utils/WIFormCIDataHelper","WorkItemTracking/Scripts/Utils/WitControlMode","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper","WorkItemTracking/Scripts/Utils/WorkItemRichTextHelper","WorkItemTracking/Scripts/WorkItemMetadataCacheStampManager","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/Utils/Array","VSS/Utils/Number","VSS/Utils/File","VSS/Diag","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Events/Action","VSS/Events/Handlers","VSS/Events/Services","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","WorkItemTracking/Scripts/TFS.WorkItemTracking.WebApi","TFS/WorkItemTracking/BatchRestClient","VSS/Utils/Html","VSS/Telemetry/Services","q","VSS/Service","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Contributions/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi){function br(n){return n&&n.isIdentity}function tr(n,t){var i=new Error(n);return $.each(t,function(n,t){i[n]=t}),i}function kr(n){return tr(ni.WorkItemBulkSaveFailed,{name:tt.Exceptions.WorkItemBulkSaveException,results:n})}function eu(n){return tr(pt.format(ni.ProjectDoesNotExist,n),{name:tt.Exceptions.ProjectDoesNotExistException,projectName:n})}function ou(n){return tr(pt.format(ni.WorkItemLinkTypeEndDoesNotExist,n),{name:tt.Exceptions.LinkTypeEndDoesNotExistException,linkTypeEnd:n})}function su(n){return tr(pt.format(ni.WorkItemLinkTypeDoesNotExists,n),{name:tt.Exceptions.LinkTypeDoesNotExistException,linkType:n})}function hu(n){var t=n.getInfoText().text;return tr(t,{name:tt.Exceptions.WorkItemSaveFailedDueToInvalidStatusException,detail:t,workItem:n})}var nr,cr,ur,dr,pi,fr,er,or,yi,ar,bi,ir,lr,wi,rr,di,gr,vr,ki,sr,yr,nu,pr;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemDataManager=t.WorkItemIdentityScope=t.FieldValidationKey=t.ServerDefaultValue=t.RuleEngine=t.RuleValueFrom=t.Attachment=t.WorkItemLink=t.Hyperlink=t.ExternalLink=t.Link=t.Field=t.WorkItem=t.FieldDefinition=t.WorkItemType=t.WorkItemStore=t.Project=t.createError=t.isIdentityPickerSupportedForField=void 0;var wr=i.queueCallbacks,hr=i.queueRequest,gi=i.handleError,tu=i.getErrorMessage,iu=/^\{?([\dA-F]{8})-?([\dA-F]{4})-?([\dA-F]{4})-?([\dA-F]{4})-?([\dA-F]{12})\}?$/i,ru=2,uu=/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F-\u009F]/g,fu=/(^[\uD800-\uDFFF]$)|[^\uD800-\uDBFF](?=[\uDC00-\uDFFF])|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/g;t.isIdentityPickerSupportedForField=br;t.createError=tr,function(n){n[n.WorkItemMissingOrUpdated=600122]="WorkItemMissingOrUpdated";n[n.ResourceLinkNotFoundException=600180]="ResourceLinkNotFoundException"}(cr||(cr={}));ur=function(){function n(n,t){var i=this;this._onCSSNodesInvalidated=function(){o.traceMessage(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"onCSSNodesInvalidated",ai.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_CSSNODECACHEINVALIDATED,"The CSS Node cache was invalidated");i.nodesCacheManager.clearCache()};this.store=n;this.id=t.id;this.name=t.name;this.guid=t.guid;this.workItemTypeNames=t.workItemTypes;this.fieldIds=t.fieldIds;this.extras=t.extras||{};this.process=t.process;this.visibility=t.visibility;this.relatedData={};Array.isArray(this.workItemTypeNames)&&this.workItemTypeNames.sort(pt.localeIgnoreCaseComparer);this.workItemTypes={};this.nodesCacheManager=new nt.NodesCacheManager(this);v.getService().attachEvent(r.CSSNodesInvalidated,this._onCSSNodesInvalidated)}return n.prototype.getApiLocation=function(n,t){return this._getApiLocation(!1,n,t)},n.prototype.getApiLocationIncludingTeam=function(n,t){return this._getApiLocation(!0,n,t)},n.prototype.path=function(){return this.store.path()+"/"+this.name},n.prototype.beginGetWorkItemType=function(n,t,i){this.beginGetWorkItemTypes([n],function(n){return t(n[0])},i)},n.prototype.beginGetWorkItemTypes=function(n,t,i,r){var f=this,p,rt,k,a,s,d,g,ut,e,et,lt;var o=0,nt=!1,v=[],h=[],at=this.store.fields&&this.store.fields.length>0,ot=y.FeatureAvailabilityService.isFeatureEnabled(u.FeatureAvailabilityFlags.DisableWorkItemTypesSplittedLoading);ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETTYPES,!0);var c=function(){o--;nt||o!==0||(v.length>0?f._constructWITsAsync(v).then(function(){ct()},l):ct())},ht=!1,ct=function(){var o,a,b,e,s,y,c,p,l,w,i,u;for(ht,ht=!0,ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETTYPES,!1),o=0,a=h;o<a.length;o++)b=a[o],b.finish();if(h=[],typeof t=="function"){if(e=[],ot)for(s=0,y=n;s<y.length;s++)i=y[s],u=i.toUpperCase(),e.push(f.workItemTypes[u]);else if(r)for(c=0,p=v;c<p.length;c++)i=p[c],u=i.name.toUpperCase(),e.push(f.workItemTypes[u]);else for(l=0,w=n;l<w.length;l++)i=w[l],u=i.toUpperCase(),e.push(f.workItemTypes[u]);t(e)}},l=function(n){for(var u,t=0,r=h;t<r.length;t++)u=r[t],u.error();h=[];nt||(nt=!0,typeof i=="function"&&i.apply(f,[n]))},tt=function(n){var u=wr(f,$.noop,$.noop),t,r,e;for(h.push(u),t=0,r=n;t<r.length;t++)e=r[t],f.workItemTypes[e.toUpperCase()]=u.register;f.store.witDataManager.beginGetWorkItemTypeData(f.guid,n).then(function(n){for(var r,t=0,i=n;t<i.length;t++)r=i[t],v.push(r);c()},i)},it=[];for(p=0,rt=n;p<rt.length;p++)e=rt[p],k=this.workItemTypes[e.toUpperCase()],k?typeof k=="function"&&(o++,k(c,l)):it.push(e);for(it.sort(),s=[],d=0,g=0,ut=it;g<ut.length;g++)e=ut[g],et=e.length+11,d+et>1024&&(d=0,a=null),a?a.push(e):(a=[e],s.push(a),o++),d+=et;if(o++,at?c():this.store.beginGetFields().then(c).catch(l),lt=this.store.userSettingsLoaded===undefined,lt&&(o++,st.WitFormModeUtility.ensureWitFormModeLoaded().then(function(){f.store.userSettingsLoaded=!0;w.getService(b.WorkItemFormUserLayoutSettingsService).ensureSettingsAreLoaded().then(function(){c()},l)},l)),ot)while(s.length>0)tt(s.pop());else if(r)tt([]);else while(s.length>0)tt(s.pop())},n.prototype.getWorkItemTypes=function(n,t){var i=this;return ci.Promise(function(r,u){return i.beginGetWorkItemTypes(n,r,u,t)})},n.prototype._constructWITsAsync=function(n){for(var r,v,u,o,s,h,t=this,i=ci.defer(),f={},c=[],l=[],y=function(){for(var r,u=!1,s=function(n){var i=new fr(t,n),r=n.name.toUpperCase();t.workItemTypes[r]=i},f=0,h=n;f<h.length;f++){var e=h[f],c=e.fields,o=void 0;for(r=0;r<c.length;r++)if(o=c[r],!t.store.fieldMap[o]&&!t.store.fieldMapById[o]){u=!0;break}u?l.push(e):s(e)}u?t.store.refreshFields().then(function(){for(var r,n=0,t=l;n<t.length;n++)r=t[n],s(r);i.resolve(null)},function(n){i.reject(n)}):i.resolve(null)},p=function(r){for(var e,u=0,f=n;u<f.length;u++)e=f[u].name,delete t.workItemTypes[e.toUpperCase()];i.reject(r)},e=0,a=n;e<a.length;e++)if(r=a[e],r.rules&&r.rules.globals&&r.rules.globals.length>0)for(v=r.rules.globals,u=0,o=v;u<o.length;u++)s=o[u],f[s]=s;for(h in f)f.hasOwnProperty(h)&&c.push(h);return this.store.beginEnsureConstantSets(c,y,p),i.promise},n.prototype.getWorkItemType=function(n){var i=n.toUpperCase(),t=this.workItemTypes[i];if(t&&typeof t!="function")return t},n.prototype.beginQuery=function(n,t,i,r){this.store.beginQuery(this.guid,n,t,i,r)},n.prototype.beginSearch=function(n,t,i,r){this.store.beginSearch(this,n,t,i,r)},n.prototype.beginUpdateColumnOptions=function(n,t,i,r){(new e.WorkItemStoreLevelWITDataSource).postDataAsync({controller:"wit",action:"updateColumnOptions"},{persistenceId:n,fields:t}).then(function(){return i}).catch(r)},n.prototype.beginGetWorkItemCategories=function(n,t){this.store.beginGetWorkItemCategories(this,n,t)},n.prototype.beginGetVisibleWorkItemTypeNames=function(n,t){var i=[tt.WorkItemCategoryConstants.HIDDEN];this._beginGetWorkItemTypeNames(n,i,t)},n.prototype.beginGetValidWorkItemTypeNames=function(n,t){var i=[tt.WorkItemCategoryConstants.HIDDEN,tt.WorkItemCategoryConstants.TEST_CASE,tt.WorkItemCategoryConstants.TEST_PLAN,tt.WorkItemCategoryConstants.TEST_SUITE];this._beginGetWorkItemTypeNames(n,i,t)},n.prototype.beginGetValidWorkItemTypeNamesWithCategories=function(n,t){var i=[tt.WorkItemCategoryConstants.HIDDEN];this._beginGetWorkItemTypeNames(n,i,t)},n.prototype._beginGetWorkItemTypeNames=function(n,t,i){var r=this;this.beginGetWorkItemCategories(function(i){return __awaiter(r,void 0,void 0,function(){var e,r,f,o,s;return __generator(this,function(h){switch(h.label){case 0:return(e=[],r={},!!y.FeatureAvailabilityService.isFeatureEnabled(u.FeatureAvailabilityFlags.DisableWorkItemTypesSplittedLoading))?[3,2]:(f=[],!!this.workItemTypeNames)?[3,2]:($.each(i,function(n,t){t.workItemTypeNames.forEach(function(n){f.some(function(t){return t===n})||f.push(n)})}),[4,this.getWorkItemTypes(f,!0)]);case 1:o=h.sent();this.workItemTypeNames=o.map(function(n){return n.name});h.label=2;case 2:return t&&$.each(t,function(n,t){if(i&&i[t]){var u=i[t];$.each(u.workItemTypeNames,function(n,t){r[t]=!0})}}),$.each(this.workItemTypeNames,function(n,t){r.hasOwnProperty(t)||e.push(t)}),s=Object.keys(r),typeof n=="function"&&n.call(this,e,s,i),[2]}})})},i)},n.prototype._getApiLocation=function(n,t,i){var r={};return n||(r.team=""),this.store.getTfsContext().getActionUrl(t||"","wit",$.extend({project:this.guid,area:"api"},r,i))},n}();t.Project=ur;dr=/^-(1|2|10|30)(\|.*)?$/;pi=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._ongoingDeleteOrRestoreOperationCt=0,t.constantSets={},t.allowedValues={},t.groups={},t.witCategories={},t.workItemTypeExtensions={},t.relatedData={},t._allProjectsLoaded=!1,t._allFieldsLoaded=!1,t._projectLoadingPromisesMap={},t._queryExecutingPromiseMap={},t}return __extends(t,n),t.prototype.dispose=function(){var n=this.relatedData[tt.RelatedDataKeys.WORKITEM_MANAGER_KEY];n&&n.dispose()},t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this.metadataCacheStampManager=new lt.WorkItemMetadataCacheStampManager(this.getTfsContext());this.witDataManager=new pr(this.getTfsContext(),this.metadataCacheStampManager)},t.prototype.isDeletingOrRestoring=function(){return this._ongoingDeleteOrRestoreOperationCt>0},t.prototype.path=function(){return dt.combinePaths(this.getConnection().getHostUrl(),"WorkItemStore")},t.prototype.getApiLocation=function(n,t){return this.getTfsContext().getActionUrl(n||"","wit",$.extend({project:"",team:"",area:"api"},t))},t.prototype.getProjectApiLocationIncludingTeam=function(n,t,i){return this.getTfsContext().getActionUrl(t||"","wit",$.extend({project:n,area:"api"},i))},t.prototype.getWorkItemTypesEtagForCI=function(){return this.metadataCacheStampManager.workItemTypesEtag},t.prototype.getCurrentUserName=function(){return this.getCurrentUser().distinctDisplayName},t.prototype.getCurrentUser=function(){var n=this.getTfsContext().currentIdentity,t=n.displayName,i=n.uniqueName;return{distinctDisplayName:h.IdentityHelper.getDistinctDisplayName(t,i),identityRef:{id:n.id,displayName:t,uniqueName:i}}},t.prototype._loadFieldsFromServer=function(){var n=this,t,i;return this._getFieldsPromise?this._getFieldsPromise:(t=function(t){return n._getFieldsPromise=null,n._allFieldsLoaded=!0,t},i=function(t){n._getFieldsPromise=null;throw t;},this._getFieldsPromise=new Promise(function(t,i){return n.witDataManager.beginGetFields().then(function(i){n._prepareFields(i);t(n.fields)},i)}).then(t,i),this._getFieldsPromise)},t.prototype.beginGetFields=function(n){return(n===void 0&&(n=!1),this.fields&&(!n||this._allFieldsLoaded))?Promise.resolve(this.fields):this._loadFieldsFromServer()},t.prototype.refreshFields=function(){var n=this;return ci.Promise(function(t,i){n._loadFieldsFromServer().then(function(){return t(null)}).catch(i)})},t.prototype.getFieldDefinition=function(n){var t=(""+n).toUpperCase();return this.fieldMap[t]||this.fieldMapById[t]},t.prototype.beginGetProjects=function(n,t){var i=this;this._allProjectsLoaded?n(this.projects):this._allProjectsLoadingPromise=this._allProjectsLoadingPromise&&this._allProjectsLoadingPromise.isPending()?this._allProjectsLoadingPromise.then(function(t){return n(i.projects),t},function(n){return typeof t=="function"&&t(n),n}):this._loadProjects().then(function(t){var r,u,f;if(i.projects&&i.projects.length!==0)for(r=0,u=t.projects;r<u.length;r++)f=u[r],i.hasProject(f.guid)||i.projects.push(new ur(i,f));else i.projects=t.projects.map(function(n){return new ur(i,n)});return i._allProjectsLoaded=!0,n(i.projects),t},function(n){return typeof t=="function"&&t(n),n})},t.prototype.beginGetContributedLinkTypes=function(){var t=this;if(this._beginGetContributedLinkTypesPromise)return this._beginGetContributedLinkTypesPromise;var n=ci.defer(),i={},r=li.getService(vi.ExtensionService);return r.getContributionsForTargets(["ms.vss-work-web.workitem-artifact-links"]).then(function(r){$.each(r,function(n,t){var r=t.properties.toolId,u=t.properties.supportedArtifactTypes;$.each(u,function(n,u){var f=u.name,e=u.linkTypes;$.each(e,function(n,u){var e={linkType:u.id,tool:r,artifactName:f,linkTypeName:u.name,contributionId:t.id};i[u.id]=e})})});t.contributedLinkTypes=i;n.resolve(t.contributedLinkTypes)},function(t){n.reject(t)}),this._beginGetContributedLinkTypesPromise=n.promise,this._beginGetContributedLinkTypesPromise},t.prototype.getContributedLinkTypes=function(){if(this.contributedLinkTypes)return this.contributedLinkTypes},t.prototype._loadProjects=function(n){var t=this,r=function(n){ri.getService().fire(tt.Actions.NEW_PROJECT_DATA,t,n.projects);t._prepareFields(n.fields,!0)},i,f;return n?ci.Promise(function(i,u){return t.witDataManager.beginGetFieldProjectData(n).then(function(n){r(n);i(n)},u)}):(i=ci.defer(),f=y.FeatureAvailabilityService.isFeatureEnabled(u.FeatureAvailabilityFlags.DisableWorkItemTypesSplittedLoading)?{includeFieldDefinitions:!0}:{includeFieldDefinitions:!1,includeProcessId:!1,includeProcessInfo:!1,includeWorkItemTypes:!1},this.metadataCacheStampManager.addStampToParams(at.WITCommonConstants.TeamProjects,f,function(u){ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETPROJECTS_REQUEST,!0);n&&(u.namesOrIds=[n]);(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync({controller:"wit",action:"teamProjects"},u,t.getTfsContext().navigation.collection.instanceId,at.WITCommonConstants.TeamProjects,"_").then(function(n){var t;n.requestHeaders&&ft.PerfScenarioManager.addData((t={},t["".concat(ai.PerformanceEvents.WORKITEMTRACKING_GETPROJECTS_REQUEST,".ETAG")]=n.requestHeaders.getResponseHeader("ETag"),t));ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETPROJECTS_REQUEST,!1);r(n.data);i.resolve(n.data)},function(n){i.reject(n)})},null),i.promise)},t.prototype.getProjects=function(){if(this.projects&&typeof this.projects!="function")return this.projects},t.prototype.getProject=function(n,t){t===void 0&&(t=!0);var r=t?this.getProjects():this.projects,i=bt.first(r||[],function(t){return pt.equals(t.name,n,!0)||pt.equals(t.guid,n,!0)});if(i)return i;if(t)throw eu(n);else return null},t.prototype.hasProject=function(n){return this.projects&&typeof this.projects!="function"?bt.arrayContains(n,this.projects,function(n,t){return pt.equals(t.name,n,!0)||pt.equals(t.guid,n,!0)}):!1},t.prototype.beginGetProject=function(n,t,i){var r=this,u=this.getProject(n,!1),f=function(){try{u=r.getProject(n);t.call(r,u)}catch(f){gi(f,i,r)}};u?t.call(this,u):this._allProjectsLoadingPromise&&this._allProjectsLoadingPromise.isPending()?this._allProjectsLoadingPromise=this._allProjectsLoadingPromise.then(function(n){return f(),n},function(n){return typeof i=="function"&&i(n),n}):this._projectLoadingPromisesMap[n]=this._projectLoadingPromisesMap[n]&&this._projectLoadingPromisesMap[n].isPending()?this._projectLoadingPromisesMap[n].then(function(n){return f(),n},function(n){return typeof i=="function"&&i(n),n}):this._loadProjects(n).then(function(n){if(n.projects&&n.projects.length===1){var t=new ur(r,n.projects[0]);r.projects?r.hasProject(t.guid)||r.projects.push(t):r.projects=[t]}return f(),n},function(n){return typeof i=="function"&&i(n),n})},t.prototype.beginGetTeamSettings=function(n){var r,t,i=ci.defer(),u=function(){r&&t&&(r.nodesCacheManager.addReferencedNodes(t.referencedNodes),i.resolve(t))},f;return this.beginGetProject(this.getTfsContext().navigation.projectId,function(n){r=n;u()},function(n){return i.reject(n)}),f=li.getService(fi.TeamAwarenessService),f.beginGetTeamSettings(n).then(function(n){t=n;u()},function(n){return i.reject(n)}),i.promise},t.prototype.beginGetWorkItemData=function(n,t,i,r,u,f){var s=this,e,h,o,c,l;if(n?Array.isArray(n)?n.length===0&&(e=new Error(ni.BeginGetWorkItemArgumentNull)):(h=+n,n=[h]):e=new Error(ni.BeginGetWorkItemArgumentNull),n)for(o=0,c=n.length;o<c;++o)if(n[o]=+n[o],n[o]===undefined){e=new Error(ni.WorkItemIdUndefined);break}else if(isNaN(n[o])){e=new Error(ni.WorkItemIdNaN);break}else if(n[o]<=0){e=new Error(ni.WorkItemIdOutOfRange);break}if(e){e.name="ArgumentException";gi(e,i,this);i&&a.publishErrorToTelemetry(e);return}l=function(n){typeof t=="function"&&(n&&n.length===1?t.call(s,n[0],i):t.call(s,n,i))};this.witDataManager.beginGetWorkItemData(n,r,!f,u).then(l,i)},t.prototype.beginGetWorkItem=function(n,t,i,r,u){var f=this;this.beginGetWorkItems([n],function(n){typeof t=="function"&&t.call(f,n&&n[0])},i,r,u)},t.prototype.getWorkItemsAsync=function(n,t,i,r){var u=this;return i===void 0&&(i=!1),r===void 0&&(r=!1),new Promise(function(f,e){return u.beginGetWorkItems(n,function(n){return f(n)},function(n){return e(n)},t,i,r)})},t.prototype.beginGetWorkItems=function(n,t,i,r,u,f){var e=this;u===void 0&&(u=!1);f===void 0&&(f=!1);this.beginGetWorkItemData(n,function(n){var f,h=0,o=[];n&&(f=Array.isArray(n)?n:[n]);var c=function(){typeof t=="function"&&t.call(e,o)},r=function(n){gi(n,i,e)},s=function(){var n,v;if(n=f&&f[h++],n){var t=null,i=null,a=!1,l=function(){if(t&&(!u||i)&&a)try{var f=t.create(n,i);f.extensionIds=f.extensionIds.concat(n.currentExtensions);o.push(f);yt.delay(e,0,s)}catch(h){r(h)}};e.beginGetLinkTypes(function(){a=!0;l()},r);u&&e.beginGetWorkItemTypeExtensions(n.currentExtensions,function(n){i=n;l()},r);v=n.projectId||n.fields[at.CoreField.TeamProject];e.beginGetProject(v,function(i){var u=n.fields[at.CoreField.WorkItemType];i.beginGetWorkItemType(u,function(n){t=n;l()},r)},r)}else c()};s()},i,r,undefined,f)},t.prototype.beginQuery=function(n,t,i,r,u){var o=this,f;this._queryExecutingPromiseMap[t]?this._queryExecutingPromiseMap[t].then(function(n){delete o._queryExecutingPromiseMap[t];typeof i=="function"&&i.call(o,n)},r):(f=function(i,r){var f=$.extend({wiql:t},u),o={controller:"wit",action:"query",routeData:{project:n||""}};(new e.WorkItemStoreLevelWITDataSource).postDataAsync(o,f).then(function(n){var t=n.data;i(t)}).catch(r)},i===null?this._queryExecutingPromiseMap[t]=new Promise(f):f(i,r))},t.prototype._beginWorkItemsBatchHelper=function(n,t,i,r){var f=this,u=[],e=[];u.push(n);var s=function(n){typeof i=="function"&&i.call(f,n)},h=function(n){gi(n,r,f)},o=function(){if(u.length>0){var n=u.pop();n.length>tt.PageSizes.SAVE&&u.push(n.splice(tt.PageSizes.SAVE));t(n).then(function(n){n&&n.count>0&&$.each(n.value,function(n,t){e.push(t)});yt.delay(f,0,o)},function(n){h(n)})}else s(e)};o()},t.prototype._beginDeleteWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(oi.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.deleteWorkItemsBatch(n).then(function(i){var u,r,f,e;if(t._ongoingDeleteOrRestoreOperationCt--,i.count>0)for(u=i.value,r=0,f=u.length;r<f;r++)e=u[r],e.code===204&&ri.getService().fire(tt.Actions.WORKITEM_DELETED,t,{workItemId:n[r]});return i},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginDeleteWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginDeleteWorkItems(n)},t,i)},t.prototype._beginRestoreWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(oi.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.restoreWorkItemsBatch(n).then(function(n){if(t._ongoingDeleteOrRestoreOperationCt--,n.count>0){var i=n.value;i.forEach(function(n){if(n.code===200){var i=JSON.parse(n.body);ri.getService().fire(tt.Actions.WORKITEM_RESTORED,t,{workItemId:i.id})}})}return n},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginRestoreWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginRestoreWorkItems(n)},t,i)},t.prototype._beginDestroyWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(oi.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.destroyWorkItemsBatch(n).then(function(i){var u,r,f,e;if(t._ongoingDeleteOrRestoreOperationCt--,i.count>0)for(u=i.value,r=0,f=u.length;r<f;r++)e=u[r],e.code===204&&ri.getService().fire(tt.Actions.WORKITEM_DESTROYED,t,{workItemId:n[r]});return i},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginDestroyWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginDestroyWorkItems(n)},t,i)},t.prototype.beginSearch=function(n,t,i,r,u){var o=this,f;f={controller:"wit",action:"search",routeData:{project:n?n.guid:""}};(new e.WorkItemStoreLevelWITDataSource).getDataAsync(f,$.extend({searchText:t},u)).then(function(n){var t=n.data;typeof i=="function"&&i.call(o,t)}).catch(r)},t.prototype.beginGetLinkTypes=function(n,t){var i=this,r=function(){n&&n.call(i,i.linkTypes,i.registeredLinkTypes)};hr(this,this,"linkTypes",r,t,function(n,t){i.witDataManager.beginGetLinkTypes().then(function(t){i._bindLinkTypeEnds(t.witLinkTypes);i.registeredLinkTypes=t.registeredLinkTypes.filter(function(n){return k.isLinkFormRegistered(n)});n(t.witLinkTypes)},t)})},t.prototype.getRegisteredLinkTypes=function(){if(this.registeredLinkTypes&&typeof this.registeredLinkTypes!="function")return this.registeredLinkTypes},t.prototype.getLinkTypes=function(){if(this.linkTypes&&typeof this.linkTypes!="function")return this.linkTypes},t.prototype.getLinkTypesMap=function(){for(var n,t={},u=this.getLinkTypes(),i=0,r=u;i<r.length;i++)n=r[i],n.isDirectional&&(t[n.reverseEnd.name]=n),t[n.forwardEnd.name]=n;return t},t.prototype.getLinkTypeEnds=function(){var n=this.linkTypeEnds,u,t,r,i;if(n)return n;for(u=this.getLinkTypes(),n=[],t=0,r=u;t<r.length;t++)i=r[t],n.push(i.forwardEnd),i.isDirectional&&n.push(i.reverseEnd);return this.linkTypeEnds=n,n},t.prototype.findLinkType=function(n){for(var i,u=(""+n).toUpperCase(),f=this.getLinkTypes(),t=0,r=f;t<r.length;t++)if(i=r[t],i.referenceName.toUpperCase()===u)return i;throw su(n);},t.prototype.findLinkTypeEnd=function(n){for(var t,r=(""+n).toUpperCase(),f=this.getLinkTypeEnds(),i=0,u=f;i<u.length;i++)if((t=u[i],t.id===n)||t.name.toUpperCase()===r||t.immutableName.toUpperCase()===r)return t;throw ou(n);},t.prototype.beginGetAllowedValues=function(n,t,i,r,u){var s=this,o=this.getFieldDefinition(n),f=o.id.toString();f=t?f+"|"+t:f;f=i?f+"|"+i:f;hr(this,this.allowedValues,f,r,u,function(n,r){s.metadataCacheStampManager.addStampToParams(at.WITCommonConstants.AllowedValues,null,function(u){var c=$.extend({projectId:t,workItemTypeName:i,fieldRefName:o.referenceName,fieldId:o.id.toString()},u),h={controller:"wit",action:"allowedValues"},l=s.getTfsContext().navigation.collection.instanceId;(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync(h,c,l,h.action,f).then(function(t){var i=t.data;n(i)},r)})})},t.prototype.getAllowedValues=function(n,t,i){var r=this;return new Promise(function(u,f){r.beginGetAllowedValues(n,t,i,function(n){u(n)},function(n){f(n)})})},t.prototype.beginGetWorkItemCategories=function(n,t,i){var r=this,u=""+(n?n.id:0);hr(this,this.witCategories,u,t,i,function(t,i){r.metadataCacheStampManager.addStampToParams(at.WITCommonConstants.WorkItemTypeCategories,null,function(r){g.beginGetWorkItemTypeCategories(n.guid,r).then(function(n){t(n)},i)})})},t.prototype.beginGetWorkItemTypeExtension=function(n,t,i){var r=this.workItemTypeExtensions[n];r?t(r):this.beginGetWorkItemTypeExtensions([n],function(n){t(n[0])},i)},t.prototype.beginGetWorkItemTypeExtensions=function(n,t,i){var r=this,o=[],u,s=0,h=0,f=[],c=function(){h===0&&t.call(r,f)},l=function(n){ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST,!0);var t={controller:"wit",action:"workItemTypeExtensions"};(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync(t,{extensionIds:n},r.getTfsContext().navigation.collection.instanceId,t.action,"_").then(function(n){var e,t,u;n.requestHeaders&&ft.PerfScenarioManager.addData((e={},e["".concat(ai.PerformanceEvents.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST,".ETAG")]=n.requestHeaders.getResponseHeader("ETag"),e));ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST,!1);t=n.data;t.forEach(function(n){var t=n.fields.map(function(n){return n.field});r._prepareFields(t,!0)});u=[];t.forEach(function(n){r.workItemTypeExtensions[n.id]=n;n.globals&&(u=u.concat(n.globals))});r.beginEnsureConstantSets(u,function(){f=f.concat(t);h--;c()},i)},i)};if(n&&n.length>0)if(n.forEach(function(n){if(r.workItemTypeExtensions[n])f.push(r.workItemTypeExtensions[n]);else{var t=n.length+15;s+t>1024&&(s=0,u=null);u?u.push(n):(u=[n],o.push(u),h++);s+=t}}),o.length===0)c();else while(o.length>0)l(o.pop());else t.call(this,f)},t.prototype.beginEnsureConstantSets=function(n,t,i){var r=this,h=[],o,y=0,p=0,f=0,w=!1,c,l,k,a,v,d,u;ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS,!0);var g=function(n){w||(w=!0,ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS,!1),typeof i=="function"&&i.apply(r,n))},b=function(){f--;!w&&f<=0&&(ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS,!1),typeof t=="function"&&t.apply(r))},nt=function(n){for(var f,t=wr(r,b,g),i=0,u=n;i<u.length;i++)f=u[i],r.constantSets[f]=t.register;r.metadataCacheStampManager.addStampToParams(at.WITCommonConstants.ConstantSets,{ids:n},function(i){var u,f,o,h;ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST,!0);u={controller:"wit",action:"constantSets"};f="_";n!=null&&(f=n.sort().reduce(function(n,t){return n+t}));o=new e.WorkItemStoreLevelWITDataSource;h=null;h=o.isDataProviderEnabled(u)?o.getDataProviderDataUsingIndexDB(u,i,r.getTfsContext().navigation.collection.instanceId,at.WITCommonConstants.ConstantSets,f).then(function(n){var e=n.resolvedFromCache,t=n.data,i,u;return t&&!e&&(i=t,u=$.extend(!0,{},i),o.updateIndexDBCache(u,r.getTfsContext().navigation.collection.instanceId,at.WITCommonConstants.ConstantSets,f)),t}):s.getMVCDataAsync(u,i,!1);h.then(function(i){var f,h,e,u,o,s;for(i.requestHeaders&&ft.PerfScenarioManager.addData((f={},f["".concat(ai.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST,".ETAG")]=i.requestHeaders.getResponseHeader("ETag"),f)),ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST,!1),h=i.data,u=0,o=n;u<o.length;u++)s=o[u],e=h[s],bt.flagSorted(e,pt.localeIgnoreCaseComparer),r.constantSets[s]=e;t.finish()},function(i){for(var e,u=0,f=n;u<f.length;u++)e=f[u],delete r.constantSets[e];t.error(i)})})};if(n){for(c=[],l=0,k=n;l<k.length;l++)u=k[l],a=this.constantSets[u],a?typeof a=="function"&&(f++,a(b,g)):c.push(u);for(c.sort(),v=0,d=c;v<d.length;v++)u=d[v],dr.test(u)?(h.push([u]),f++):(p=(u+"").length+5,y+p>1024&&(y=0,o=null),o?o.push(u):(o=[u],h.push(o),f++),y+=p)}while(h.length>0)nt(h.pop());f===0&&b()},t.prototype.invalidateExtensions=function(n){var t=this;Boolean(n)?$.each(n,function(n,i){delete t.workItemTypeExtensions[i]}):this.workItemTypeExtensions={}},t.prototype.getConstantSet=function(n){return this.constantSets[n]},t.prototype.beginPageWorkItems=function(n,t,i,r,u){var s=this,f,o;if(!Array.isArray(n))throw new Error("Invalid argument type: ids must be an array.");if(!Array.isArray(t))throw new Error("Invalid argument type: 'fields' must be an array.");f={workItemIds:n.join(","),fields:t.join(",")};u&&$.extend(f,u);o={controller:"wit",action:"pageWorkItems"};(new e.WorkItemStoreLevelWITDataSource).postDataWithCallback(o,f,function(n){var t=n.data;typeof i=="function"&&i.apply(s,[t])},r)},t.prototype.beginPageWorkItemsByIdRev=function(n,t,i,r,u){var f=this,o={workItemIds:n.join(","),workItemRevisions:t.join(","),fields:i.join(",")};(new e.WorkItemStoreLevelWITDataSource).postDataAsync({controller:"wit",action:"pageWorkItemsByIdRev"},o).then(function(n){var t=n.data;typeof r=="function"&&r.apply(f,[t])}).catch(u)},t.prototype.beginGetWorkItemResources=function(n,t,i){var r={ids:n};(new e.WorkItemStoreLevelWITDataSource).getDataAsync({controller:"wit",action:"ResourceLinks"},r).then(function(n){t(n.data)},i)},t.prototype.beginSaveWorkItems=function(n,t,i,r){r===void 0&&(r=!0);this._beginSaveWorkItemsInternal(n,{},{},t,i,r)},t.prototype._beginSaveWorkItemsInternal=function(n,t,i,r,u,f){var b=this,o,l,h,a,d,g,w,nt,s,c,it,rt,ut;f===void 0&&(f=!0);h=[];a={};gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.start");var k=function(n,t){for(var r,f,u=0,e=n;u<e.length;u++)r=e[u],f=a[r.id]?a[r.id]:a[r.tempId],f&&i[r.id]&&$.extend(f.changedFields,i[r.id]),r._setSavingStatus(t,f),r._setValidatingStatus(!1)},v=function(){try{if(l)l=kr(h),gi(l,u,b);else if(typeof r=="function"){gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.complete");gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.completedCallback.start");var t={workItems:n};r.call(b,t);gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.completedCallback.complete")}}finally{k(o,!1)}},y=function(n,t){l=new Error(t.message);f&&n.setError(l);h.push({workItem:n,error:t})},p=function(){var n,i,u,t,r,f;if(o&&o.length===h.length){for(n=0,i=o;n<i.length;n++)for(u=i[n],t=0,r=u.allLinks;t<r.length;t++)f=r[t],f.setState(!0);v()}},et=function(n,t){var i={},f,r,u;for(f in t)t.hasOwnProperty(f)&&(r=Number(f),u=n.fieldMapById[r],u&&(i[u.fieldDefinition.referenceName]=u,r===at.CoreField.IterationId?i[at.CoreFieldRefNames.IterationPath]=n.fieldMapById[at.CoreField.IterationPath]:r===at.CoreField.AreaId&&(i[at.CoreFieldRefNames.AreaPath]=n.fieldMapById[at.CoreField.AreaPath])));return i},ot=function(n,i){for(var u,f,s,r,e=[],o=0,h=i.deletedLinks;o<h.length;o++)u=h[o],u instanceof wi&&e.push({command:"remove",sourceId:n.id,targetId:u.getTargetId(),linkData:u.linkData});for(f=0,s=i.addedLinks;f<s.length;f++)r=s[f],r instanceof wi&&(t.hasOwnProperty(r.getTargetId())&&(r.linkData.ID=t[r.getTargetId()]),e.push({command:"add",sourceId:n.id,targetId:r.getTargetId(),linkData:r.linkData}));return{typeChanged:n.hasWorkItemTypeChanged(),projectChanged:n.hasTeamProjectChanged(),changedFields:et(n,i.payload.fields),changedWorkItemLinks:e,firstSave:n.id==0}};if(n&&n.length>0){for(d=[],g=[],o=[],w=0,nt=n.length;w<nt;w++)s=n[w],s.fireWorkItemPreSave(),s.isDirty()&&(c=s.getUpdateData(),c&&c.payload&&(g.push(c),d.push(c.payload),it=s.id>0?s.id:s.tempId,a[it]=ot(s,c),o.push(s)));if(o.length>0){k(o,!0);try{ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!0);rt={controller:"wit",action:"updateWorkItems"};ut={updatePackage:yt.stringifyMSJSON(d)};(new e.WorkItemStoreLevelWITDataSource).postDataWithCallback(rt,ut,function(n){var i=n.data,r;ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!1);i.length===o.length?(r=!1,$.each(i,function(n,t){if(t.state!==tt.WorkItemUpdateResultState.Success)return r=!0,!1}),$.each(o,function(n,u){var f=i[n];f.state!==tt.WorkItemUpdateResultState.Success||r?f.state!==tt.WorkItemUpdateResultState.Success?(y(u,f.error),p()):(h.push({workItem:u}),p()):b.beginGetWorkItemTypeExtensions(f.currentExtensions,function(i){u._takeUpdateResult(f,g[n],i);h.push({workItem:u});t[u.tempId]=u.id;p()},function(n){y(u,n);p()})})):($.each(o,function(n,t){y(t,{message:"Server data does not match with what client sent."})}),v())},function(n){ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!1);$.each(o,function(t,i){y(i,n)});v()})}catch(st){k(o,!1);throw st;}}else v()}else v()},t.prototype.saveWorkItemsBatchAsync=function(n){var t=this;return new Promise(function(i,r){t.beginSaveWorkItemsBatch(n,function(n){return i(n)},function(n){return r(n)})})},t.prototype.beginSaveWorkItemsBatch=function(n,t,i,r){function c(){var s,v;f.length>0?(s=f.pop(),s.length>tt.PageSizes.SAVE&&(f.push(s.slice(tt.PageSizes.SAVE)),s=s.slice(0,tt.PageSizes.SAVE)),u._beginSaveWorkItemsInternal(s,a,h,function(){$.each(s,function(n,t){e.push({workItem:t})});r&&r.call(u,s.length);yt.delay(u,0,c)},function(t){function p(n){if(a===0){if(s.length===1&&n)f.push(s);else if(s.length>1){var i=s.length/2;f.push(s.slice(i));f.push(s.slice(0,i))}else e.push(t.results[0]);yt.delay(u,0,c)}}function g(n,t){a-=1;h[n.id]=$.extend(t,h[n.id]);p(!0)}function nt(){a-=1;o=!0;p(!1)}var a=0,b=!1,k=!1,d,v,w,r,y;if(t&&t.name===tt.Exceptions.WorkItemBulkSaveException){for(d=t.results,v=0,w=d;v<w.length;v++)r=w[v],y=r.workItem,r.error&&(r.error.errorCode===cr.WorkItemMissingOrUpdated||r.error.errorCode===cr.ResourceLinkNotFoundException)&&!l.hasOwnProperty(y.id.toString())?(b=!0,l[y.id]=!0,a+=1,u._beginTryMergeWorkItem(y,g,nt)):k=!0;!b&&k&&(o=!0);p(!1)}else $.each(n,function(n,i){i.setError(t)}),gi(t,i,u)},!1)):o?($.each(e,function(){this.error&&this.workItem.setError(this.error)}),gi(kr(e),i,u)):(gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.complete"),gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.completedCallback.start"),typeof t=="function"&&(v={workItems:n},t.call(u,v)),gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.completedCallback.complete"))}var u=this,s=[],f=[],h={},e=[],o=!1,l={},a={};gt.logTracePoint("VSS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.start");$.each(n,function(n,t){t.isValid()?s.push(t):(o=!0,e.push({workItem:t,error:hu(t)}))});s.length>0&&f.push(s);c()},t.prototype._prepareFields=function(n,t){var f,i,r,u,e;if(t&&this.fields||(this.fields=[],this.fieldMap={},this.fieldMapById={}),n){for(ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETFIELDS_PROCESS,!0),f=function(n){var t=new er(i,n),u=!0,r;i.fieldMapById[t.id]||(u=!1);i.fieldMapById[t.id]=t;i.fieldMap[t.name.toUpperCase()]=t;i.fieldMap[t.referenceName.toUpperCase()]=t;u?(r=-1,$.each(i.fields,function(n,i){if(i.id===t.id)return r=n,!1}),r!==-1?i.fields[r]=t:i.fields.push(t)):i.fields.push(t)},i=this,r=0,u=n;r<u.length;r++)e=u[r],f(e);ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_GETFIELDS_PROCESS,!1)}return this.fields},t.prototype._reduceTagWorkitemAssociation=function(n){var t={},r={},i,u;return $.each(n,function(n,f){i=r[f.tagDefinition.name.toUpperCase()];i==null?(t[f.tagDefinition.name]=f.workitemIds,r[f.tagDefinition.name.toUpperCase()]=f.tagDefinition.name):(u=t[i],t[i]=bt.union(u,f.workitemIds))}),t},t.prototype._beginTryMergeWorkItem=function(n,t,i){var u=this,r;r={};gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.start");this.beginGetWorkItemData([n.id],function(f){var o,e;if(u._hasConflicts(n,f,r)){i(n);return}o=u._getChangedFieldsForMerge(n,f);u._mergeWorkItem(n,f,r);n.evaluate();for(e in r)r.hasOwnProperty(e)&&n.setFieldValue(e,r[e]);n.isValid()?(gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.complete"),gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.completedCallback.start"),t(n,o),gt.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.completedCallback.complete")):i(n)},function(){i(n)},!1,!0)},t.prototype._getChangedFieldsForMerge=function(n,t){var u,f,r,i,e,o;u={};f=t.fields;for(r in f)f.hasOwnProperty(r)&&(i=n.getField(r),i&&(e=i.getValue(!0),o=yi.convertValueToExternal(n.store,t.fields[r],i.fieldDefinition.type),yi.compareValues(e,o,!1)||(u[i.fieldDefinition.referenceName]=i)));return u},t.prototype._hasConflicts=function(n,t,i){var c,e,u,o,f,s,h,r;s=n.getFieldUpdates();for(h in s)if(s.hasOwnProperty(h)&&(r=Number(h),u=n.getField(r),u&&(c=u.getValue(!0),e=yi.convertValueToExternal(n.store,t.fields[r],u.fieldDefinition.type),u.isUserChange())))if(o=u.getValue(),r==at.CoreField.History||yi.compareValues(c,e,!1))i[r]=o,r===at.CoreField.IterationId?(f=n.getField(at.CoreField.IterationPath),i[at.CoreField.IterationPath]=f.getValue()):r===at.CoreField.AreaId&&(f=n.getField(at.CoreField.AreaPath),i[at.CoreField.AreaPath]=f.getValue());else if(!yi.compareValues(o,e,!1))return!0;return!1},t.prototype._mergeWorkItem=function(n,t,i){var u,r;u=n.getLinkUpdates();n._load(t,!0);for(r in i)i.hasOwnProperty(r)&&n._setFieldValueById(Number(r),i[r],!1);n._restoreLinkUpdates(u)},t.prototype._bindLinkTypeEnds=function(n){for(var i,t,r=0,u=n;r<u.length;r++)i=u[r],t=i.forwardEnd,t&&(t.linkType=i,t.oppositeEnd=i.reverseEnd),t=i.reverseEnd,t&&(t.linkType=i,t.oppositeEnd=i.forwardEnd)},t.ServiceLifetime=li.ServiceLifetime.ClearOnFPS,t.FutureDate=new Date(2533707648e5),t.LayoutUserSettingsKey="workItemTracking.LayoutUserSettings",t}(ui.TfsService);t.WorkItemStore=pi;fr=function(){function n(n,t){var o,f,s,r,e;this.project=n;this.store=n.store;this.id=t.id;this.name=t.name;this.referenceName=t.referenceName;this.dependentFieldsMapByReferenceName={};this._httpClient=this.store.tfsConnection.getHttpClient(ei.WorkItemTrackingHttpClient);o=t.fields;this.form=t.rules.form;this.processId=t.rules.processId;this.triggerList=t.rules.triggerList;this.transitions=t.rules.transitions;f=t.rules.fieldRules;s=t.rules.fieldHelpTexts;this.orderedStates=t.orderedStates;this.color=t.color;this._parseStateColors(t.rules.stateColors);var h=this.fieldMap={},l=this.fieldMapById={},c=this.fields=[],a=this.store.fieldMap,v=this.store.fieldMapById;for(r=0,e=o;r<e.length;r++){var u=e[r],y=v[u]||a[u],i=new er(this,y,f&&f[u],s[u]||"");l[i.id]=i;h[i.name.toUpperCase()]=i;h[i.referenceName.toUpperCase()]=i;c[c.length]=i}}return n.prototype.path=function(){return this.project.path()+"/wit/"+this.name},n.prototype.create=function(n,t){return new or(this,n,t)},n.prototype.getFieldDefinition=function(n){var t=(""+n).toUpperCase();return this.fieldMapById[t]||this.fieldMap[t]},n.prototype.getTriggerList=function(){var t=this,n=[];return this.triggerList&&$.each(this.triggerList,function(i,r){t.getFieldDefinition(r)&&n.push(r)}),n},n.prototype.getInitialState=function(){var n;return this.transitions&&this.transitions[""]&&(n=this.transitions[""][0]),n||""},n.prototype.getRestUrl=function(){if(!this.restUrl){var n=this.store.getTfsContext(),t=n.navigation.publicAccessPoint.scheme+"://"+n.navigation.publicAccessPoint.authority+n.getServiceHostUrl();return pt.format("{0}{1}/_apis/wit/workItemTypes/{2}",t,this.project.guid,this.name)}return this.restUrl},n.prototype.beginGetDependentFields=function(n,t,i){var r=this,u=this.getFieldDefinition(n);if(!u){typeof i=="function"&&i.apply(this,{message:pt.format("Field {0} doesn't exist in work item type {1}",n,this.name)});return}hr(this,this.dependentFieldsMapByReferenceName,u.referenceName,t,i,function(n,t){r._httpClient.beginGetWorkItemTypeFields(r.project.guid,r.name,u.referenceName).then(function(t){var i=$.map(t.dependentFields||[],function(n){return r.getFieldDefinition(n.referenceName)});r.restUrl=t._links.parent.href;n(i)},t)})},n.prototype._parseStateColors=function(n){var t=this;n&&(this.stateColors={},$.each(n,function(n,i){t.stateColors[i.name]="#"+i.color}))},n}();t.WorkItemType=fr;i.initClassPrototype(fr,{project:null,store:null,id:null,name:null,fields:null,fieldMap:null,fieldMapById:null,form:null,triggerList:null});er=function(){function n(n,t,i,r){n instanceof pi?this.store=n:(this.workItemType=n,this.store=n.store);this.id=t.id;this.name=t.name;this.referenceName=t.referenceName;this.flags=t.flags;this.type=t.type;this.usages=t.usages;this.rules=i;this.helpText=r||"";this.isIdentity=t.isIdentity;this.isHistoryEnabled=t.isHistoryEnabled}return n.prototype.checkFlag=function(n){return(this.flags&+n)!==tt.FieldFlags.None},n.prototype.canSortBy=function(){return this.checkFlag(tt.FieldFlags.Sortable)},n.prototype.isQueryable=function(){return this.checkFlag(tt.FieldFlags.Queryable)},n.prototype.isIgnored=function(){return pt.equals(this.referenceName,at.CoreFieldRefNames.AreaId,!0)||pt.equals(this.referenceName,at.CoreFieldRefNames.IterationId,!0)?!0:this.checkFlag(tt.FieldFlags.Ignored)},n.prototype.isCloneable=function(){return this.checkFlag(tt.FieldFlags.Cloneable)},n.prototype.isComputed=function(){return this.checkFlag(tt.FieldFlags.Computed)},n.prototype.supportsTextQuery=function(){return this.checkFlag(tt.FieldFlags.SupportsTextQuery)},n.prototype.isEditable=function(){switch(this.id){case at.CoreField.AreaPath:case at.CoreField.IterationPath:return!0;case at.CoreField.Id:case at.CoreField.Rev:case at.CoreField.WorkItemType:case at.CoreField.CreatedBy:case at.CoreField.IsDeleted:return!1}return!this.isComputed()},n.prototype.isCoreField=function(){return this.referenceName.toLowerCase().indexOf("system.")===0},n.prototype.isoobfield=function(){return this.referenceName.toLowerCase().indexOf("microsoft.vsts.")===0},n.prototype.isCustomField=function(){return!this.isCoreField()&&!this.isoobfield()},n}();t.FieldDefinition=er;i.initClassPrototype(er,{store:null,workItemType:null,id:null,name:null,referenceName:null,type:null,usages:tt.FieldUsages.None,flags:tt.FieldFlags.None,rules:null,helpText:""});or=function(){function n(n,t,i){this._isCommentDirty=!1;this._saving=!1;this._isChangeProjectInProgress=!1;this.id=0;this.tempId=0;this.revision=0;this.workItemType=n;this._originalWorkItemType=this.workItemType;this.store=n.store;this.project=n.project;this.extensions=i||[];this._originalExtensions=this.extensions;this._httpClient=this.store.tfsConnection.getHttpClient(ei.WorkItemTrackingHttpClient);this.events=new ii.NamedEventCollection;this._eventsEnabled=!1;this._initializeFields();this._defineExtensionFields();this._load(t,!1);this._eventsEnabled=!0;this.relatedData={};this.extensionIds=[];this._contributionErrorMap={};this.sessionId=pt.generateUID()}return n.getTempId=function(){return--n.tempIdSeed},n.getTempIdSeed=function(){return n.tempIdSeed},n.reserveTempId=function(t){n.tempIdSeed>t&&(n.tempIdSeed=t)},n.getResourceUrl=function(n,t){var i=n.navigation.publicAccessPoint.scheme+"://"+n.navigation.publicAccessPoint.authority+n.getServiceHostUrl();return pt.format("{0}_apis/wit/workItems/{1}",i,t)},n.prototype._initializeFields=function(){this.fields=[];this.fieldMap={};this.fieldMapById={};this._fieldValidationMap={};this._defineWorkItemTypeFields()},n.prototype.setContributionErrorStatus=function(n,t,i){if(t&&this._contributionErrorMap.hasOwnProperty(n))delete this._contributionErrorMap[n],this.fireWorkItemErrorChanged();else if(!t){var r=this._contributionErrorMap[n];this._contributionErrorMap[n]=i||"";r!==this._contributionErrorMap[n]&&this.fireWorkItemErrorChanged()}},n.prototype.resetContributionErrorStatuses=function(){this._contributionErrorMap&&Object.keys(this._contributionErrorMap).length>0&&(this._contributionErrorMap={},this.fireWorkItemErrorChanged())},n.prototype.hasAttachmentsPendingUpload=function(){var n=!1;return this.allLinks.some(function(t){return t instanceof rr&&t.getPlaceholderStatus()&&(n=!0),n})},n.prototype.isReset=function(){return this._isReset},n.prototype.getWorkItemContract=function(){var i=this,t;return this.isNew()?null:(t={},this.fields.forEach(function(n){t[n.fieldDefinition.referenceName]=i.getFieldValue(n.fieldDefinition.referenceName)}),{id:this.id,rev:this.revision,relations:null,fields:t,_links:null,url:n.getResourceUrl(this.store.getTfsContext(),this.id)})},n.prototype.getWorkItemRelations=function(){var n=this.allLinks,t=n.filter(function(n){return!n.isRemoved()&&n.linkData.FldID!==at.DalFields.AttachedFiles});return t.map(function(n){return{attributes:n.getAttributes(),rel:n.getRelationLinkType(),url:n.getLinkUrl()}})},n.prototype.doesLinkAlreadyExist=function(n){for(var u,i=!1,t=0,r=this.allLinks;t<r.length;t++)if(u=r[t],i=u.isDuplicate(n),i)return!0;return!1},n.prototype.changeWorkItemType=function(n,t,i){var r,f,e,u,o,h,s;if(!this.isReadOnly()&&this.workItemType!==n){for(r=n.project!==this.project,this._isChangeProjectInProgress=r,i||(r?this.fireWorkItemProjectChanging():this.fireWorkItemTypeChanging()),f=this.workItemType,e=this._getFieldChangeOnBugTypeChanged(f,n),this.workItemType=n,this.ruleEngine=null,this._initializeFields(),u=0,o=Object.keys(this._fieldData);u<o.length;u++)h=o[u],this._defineField(h);if(this.extensions=t||[],this._defineExtensionFields(),this._setProject(n.project),!pt.equals(n.name,f.name)){this.setFieldValue(at.CoreField.WorkItemType,n.name);for(s in e)this.setFieldValue(s,e[s])}this.evaluate();this._isChangeProjectInProgress=!1;i||(r?this.fireWorkItemProjectChanged():this.fireWorkItemTypeChanged())}},n.prototype.isChangeProjectInProgress=function(){return this._isChangeProjectInProgress},n.prototype._getFieldChangeOnBugTypeChanged=function(n,t){var f={},u="<b><u><br/><br/>".concat(pt.format(ni.WorkItemChangedReproDescriptionMessage,this.getField(this._isBugTypeChange(n)?tt.BugWITFieldReferenceNames.ReproSteps:at.CoreFieldRefNames.Description).fieldDefinition.name,n.name,t.name),"<\/u><\/b><br/>"),i,e,r,o;return this._isBugTypeChange(n)?(i=this.getFieldValue(tt.BugWITFieldReferenceNames.ReproSteps),e=this.getFieldValue(at.CoreFieldRefNames.Description),i&&!ct.WorkItemRichTextHelper.isHtmlVisuallyBlank(i)&&(f[at.CoreFieldRefNames.Description]=e?e+u+i:u+i)):this._isBugTypeChange(t)&&(r=this.getFieldValue(at.CoreFieldRefNames.Description),o=this.getFieldValue(tt.BugWITFieldReferenceNames.ReproSteps),r&&!ct.WorkItemRichTextHelper.isHtmlVisuallyBlank(r)&&(f[tt.BugWITFieldReferenceNames.ReproSteps]=o?o+u+r:u+r)),f},n.prototype._isBugTypeChange=function(n){return n.fields?n.fields.some(function(n){return pt.equals(n.referenceName,tt.BugWITFieldReferenceNames.ReproSteps,!0)}):!1},n.prototype.getOriginalWorkItemType=function(){return this._originalWorkItemType},n.prototype._setProject=function(n){this.isReadOnly()||this.project!==n&&(this.project=n,this._setFieldValueById(at.CoreField.TeamProject,n.name))},n.prototype._defineField=function(n){var t,i;this.fieldMap.hasOwnProperty((""+n).toUpperCase())||(t=this.workItemType.getFieldDefinition(n),t||(t=this.store.getFieldDefinition(n)),t&&!Boolean(this.fieldMapById[t.id+""])&&(i=new yi(this,t),this.fieldMap[t.referenceName.toUpperCase()]=i,this.fieldMap[t.name.toUpperCase()]=i,this.fieldMapById[t.id+""]=i,this.fields.push(i)))},n.prototype._defineWorkItemTypeFields=function(){var n=this;$.each(this.workItemType.fields,function(t,i){n._defineField(i.referenceName)})},n.prototype._defineExtensionFields=function(){var n=this;this.extensions&&$.each(this.extensions,function(t,i){i.markerField&&n._defineField(i.markerField.field.referenceName);i.fields&&$.each(i.fields,function(t,i){n._defineField(i.field.referenceName)})})},n.prototype.discardIfNew=function(){this.isNew()&&(this.fireWorkItemDiscarded(),ri.getService().fire(tt.Actions.WORKITEM_DISCARDED,this))},n.prototype.isNew=function(){return+this.id<1},n.prototype.isDeleted=function(){return this.getFieldValue(at.CoreFieldRefNames.IsDeleted)},n.prototype.resetManualFieldChanges=function(){this.manuallySetFields={}},n.prototype.setExtensions=function(n){this.extensions=n||[];this._originalExtensions=this.extensions;this._defineExtensionFields();this.ruleEngine=null},n.prototype.isDirty=function(n,t){var f,r,u,i;if(this.isReadOnly()||this.isDeleted())return!1;if(this._fieldsDirty(n,t))return!0;for(f=this.allLinks,r=0,u=f;r<u.length;r++)if((i=u[r],!i.isRemoved())&&(!i.isNew()||!(i instanceof wi)||!i.linkData.isAddedBySystem)&&(i.deleted!==i.isNew()||i.updated))return!0;return!1},n.prototype.isValid=function(){var n=this.getInvalidFields(!0);return(!n||n.length===0)&&Object.keys(this._contributionErrorMap).length===0},n.prototype.isReadOnly=function(){return this._isReadOnly||this.isDeleted()},n.prototype.isCommentingAvailable=function(){return!this.isDeleted()&&this._isCommentingAvailable},n.prototype.isExtensionField=function(n){return(n.usages&tt.FieldUsages.WorkItemTypeExtension)===tt.FieldUsages.WorkItemTypeExtension},n.prototype.getRevisions=function(){return this._revisions},n.prototype.getUniqueId=function(){return this.id||this.tempId},n.prototype.setError=function(n){this._error=n;this.fireWorkItemErrorChanged()},n.prototype.clearError=function(){this._error&&(this._error=null,this.fireWorkItemErrorChanged())},n.prototype.getError=function(){return this._error},n.prototype.hasError=function(){return this._error?!0:!1},n.prototype.getInvalidFields=function(n){for(var i,r=[],f=this.fields,t=0,u=f;t<u.length;t++)if(i=u[t],!i.isValid()&&(r.push(i),n))break;return r},n.prototype.getDirtyFields=function(n){for(var t,u,i=[],r=0,f=this.fields;r<f.length;r++)t=f[r],u=t.fieldDefinition.id.toString(),n&&this.manuallySetFields&&this.manuallySetFields.hasOwnProperty(u)?i.push(t):!n&&this.fieldUpdates&&this.fieldUpdates.hasOwnProperty(u)&&i.push(t);return i},n.prototype.isFieldDirty=function(n){var t=this.getField(n);return t&&t.isDirty()},n.prototype.setFieldValue=function(n,t,i,r){if(this.isReadOnly())return!1;var u=this.getField(n);return u?(u.setValue(t,!1,r,i),!0):!1},n.prototype.setIsCommentDirty=function(n){this._isCommentDirty=n},n.prototype.getIsCommentDirty=function(){return this._isCommentDirty},n.prototype.getFieldValue=function(n,t,i){var r=this.getField(n);if(r)return r.getValue(t,i)},n.prototype.getIdentityFieldValue=function(n,t,i){var r=this.getField(n);if(r)return r.getIdentityValue(t,i)},n.prototype.getFriendlyFieldValue=function(n,t,i){var r=this.getField(n);if(r)return r.getFriendlyValue(t,i)},n.prototype._getFieldValueById=function(n,t,i,r){var o=this.fieldUpdates,f,e;switch(n){case at.CoreField.AttachedFileCount:return this._getLinkCount(rr,t);case at.CoreField.ExternalLinkCount:return this._getLinkCount(ir,t);case at.CoreField.HyperLinkCount:return this._getLinkCount(lr,t);case at.CoreField.RelatedLinkCount:return this._getLinkCount(wi,t);case at.CoreField.Parent:return this._getParentLinkId(t);case at.CoreField.CommentCount:return this._getCommentCount(t);case at.CoreField.TeamProject:if(this.isNew()&&this.project)return this.project.name}return(f=n+"",!t&&o.hasOwnProperty(f)&&(e=o[f],!e.setByRule||!i))?ht.convertPotentialIdentityRefFromFieldValue(e.value,r):n===at.CoreField.History&&!y.FeatureAvailabilityService.isFeatureEnabled(u.FeatureAvailabilityFlags.GetWorkItemHistoryFieldValue)?"":ht.convertPotentialIdentityRefFromFieldValue(this._fieldData[f],r)},n.prototype._setFieldValueById=function(n,t,i,r){var s=this.isReadOnly(),f=n===at.CoreField.History,c,o,l,a;if(r==!0&&(s=!f&&this.isReadOnly()),!s){switch(n){case at.CoreField.AttachedFileCount:case at.CoreField.ExternalLinkCount:case at.CoreField.HyperLinkCount:case at.CoreField.RelatedLinkCount:case at.CoreField.Parent:case at.CoreField.CommentCount:return;case at.CoreField.AreaId:case at.CoreField.IterationId:if(!this.project.nodesCacheManager.getReferencedNode(t))throw new Error("Invalid node id.");}var u=n+"",e=this.getField(n),h=!1;e&&e.fieldDefinition&&(h=e.fieldDefinition.isIdentity);c=this._fieldData[u];!i&&this.manuallySetFields&&(this.manuallySetFields[u]=t);o=f&&!yi.compareValues("",t);l=!f&&!yi.compareValues(c,t,undefined,h);o||l?(this.fieldUpdates[u]={value:t,setByRule:i},o&&(a=this.getFieldValue(at.CoreField.CommentCount),this.evaluateField(at.CoreField.CommentCount,!0,a))):(delete this.fieldUpdates[u],this.manuallySetFields&&delete this.manuallySetFields[u])}},n.prototype.getFieldValueByRevision=function(n,t){var i=this._revisions,u=n+"",f,e,o,r;if(t<0)return null;if(n===at.CoreField.History)return t<i.length?i[t][u]:this._fieldData[u];if(f=this.getComputedFieldValue(n,t),f&&f.success)return f.value;for(e=void 0,o=!1,r=t;r<i.length;r++)if(i[r].hasOwnProperty(u)){e=ht.convertPotentialIdentityRefFromFieldValue(i[r][u]);o=!0;break}return o||(e=this._getFieldValueById(n,!0)),e},n.prototype.getNonComputedFieldValueByRevisionWithDefaultValue=function(n,t,i,r){if(t<0)return null;var u=this._revisions[t],f=n+"";return u&&u.hasOwnProperty(f)?ht.convertPotentialIdentityRefFromFieldValue(u[f],r):i===undefined||t>=this._revisions.length?this._getFieldValueById(n,!0,!1,r):i},n.prototype.getComputedFieldValue=function(n,t){var u=n+"",i,r;if(t>=0&&(n===at.CoreField.TeamProject||n===at.CoreField.IterationPath||n===at.CoreField.AreaPath)&&(i=this._revisions[t],i&&i.hasOwnProperty(u)&&(r=i[u],r)))return{success:!0,value:r};switch(n){case at.CoreField.TeamProject:return this._getFieldValueById(n,!0);case at.CoreField.NodeName:return this.computeFieldValue(at.CoreField.NodeName,at.CoreField.AreaId,t);case at.CoreField.IterationPath:return this.computeFieldValue(at.CoreField.IterationPath,at.CoreField.IterationId,t);case at.CoreField.AreaPath:return this.computeFieldValue(at.CoreField.AreaPath,at.CoreField.AreaId,t);default:return null}},n.prototype.isSaving=function(){return this._saving},n.prototype.isValidating=function(n){if(n)return this._fieldValidationMap[n.toString()]||!1;for(var t in this._fieldValidationMap)if(this._fieldValidationMap[t])return!0;return!1},n.prototype.getTitle=function(){return this._getFieldValueById(at.CoreField.Title)||""},n.prototype.getCaption=function(n,t){var i,r;return this.isNew()?(r=t?"":-this.tempId,i=pt.format(ni.WorkItemEditorCaptionNew,this.workItemType.name,r)):i=pt.format(ni.WorkItemEditorCaption,this.workItemType.name,this.id),n&&this.isDirty(!0)&&(i=pt.format(ni.WorkItemEditorDirtyCaption,i)),i},n.prototype.getInfoText=function(){var n={},t=this.getInvalidFields(!0);return t&&t.length>0?(n.text=t[0].getErrorText(),n.invalid=!0):this.hasError()?(this._error.fieldReferenceName&&!this.fieldMap[this._error.fieldReferenceName.toUpperCase()]?(n.text=ni.BrowserRefreshRequired,hi.publishEvent(new hi.TelemetryEventData(ot.WIFormCIDataHelper.getArea(),"WorkItem.BrowserRefreshRequired",{fieldReferenceName:this._error.fieldReferenceName}))):n.text=tu(this.getError()),n.invalid=!0):Object.keys(this._contributionErrorMap).length>0?(n.invalid=!0,n.text=this._contributionErrorMap[Object.keys(this._contributionErrorMap)[0]]||""):n.text=this.getTitle(),n},n.prototype.getState=function(){return this._getFieldValueById(at.CoreField.State)||""},n.prototype.getPerson=function(n){return this.referencedPersons[n]||this.store.getCurrentUser()},n.prototype.getIdentity=function(n){return ht.isWorkItemIdentityRef(n)?n.identityRef:ht.createIdentityRefFromDistinctDisplayName(n)},n.prototype.updateCachedIdOnSave=function(){ri.getService().fire(tt.Actions.WORKITEM_ID_UPDATED,this)},n.prototype.attachEvent=function(n,t){this.events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this.events.unsubscribe(n,t)},n.prototype.fireEvent=function(n,t){this._eventsEnabled&&this.events.invokeHandlers(n,this,t)},n.prototype.attachWorkItemChanged=function(n){this.attachEvent("workitem-changed",n)},n.prototype.detachWorkItemChanged=function(n){this.detachEvent("workitem-changed",n)},n.prototype.fireWorkItemChanged=function(n){n&&n.change!==tt.WorkItemChangeType.ErrorChanged&&n.change!==tt.WorkItemChangeType.SaveCompleted&&this.clearError();this.fireEvent("workitem-changed",n)},n.prototype.fireWorkItemPreSave=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.PreSave},n))},n.prototype.fireWorkItemSaved=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.Saved},n))},n.prototype.fireWorkItemSaving=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.Saving},n))},n.prototype.fireWorkItemValidating=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.Validating},n))},n.prototype.fireWorkItemValidationComplete=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.ValidationCompleted},n))},n.prototype.fireWorkItemRefresh=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.Refresh},n))},n.prototype.fireWorkItemReset=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.Reset},n))},n.prototype.fireWorkItemDiscarded=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.Discarded},n))},n.prototype.fireWorkItemSaveComplete=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.SaveCompleted},n))},n.prototype.fireWorkItemDeleted=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.Deleted},n))},n.prototype.fireWorkItemTypeChanging=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.TypeChanging},n))},n.prototype.fireWorkItemTypeChanged=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.TypeChanged},n))},n.prototype.fireWorkItemProjectChanging=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.ProjectChanging},n))},n.prototype.fireWorkItemProjectChanged=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.ProjectChanged},n))},n.prototype.fireWorkItemErrorChanged=function(t){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.ErrorChanged},t));this.hasError()&&this._error.fieldReferenceName?this.fireEvent("field-error:"+this._error.fieldReferenceName):this.fireEvent(n.FIELD_ERRORS_CLEARED)},n.prototype.fireWorkItemLinksUpdatedByOtherWorkItem=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:tt.WorkItemChangeType.WorkItemLinkChangedOutside},n))},n.prototype.fireFieldAllowedValuesChange=function(n){var i=this.getField(n),t={};t[n]=i;this.fireWorkItemChanged({workItem:this,change:tt.WorkItemChangeType.FieldAllowedValuesChange,changedFields:t})},n.prototype.fireFieldChange=function(t){var h=this,r={},f,e,o,s,i,u;if(this._eventsEnabled&&t){for(f=0,e=t;f<e.length;f++)i=e[f],r.hasOwnProperty(i)||(u=this.getField(i),u?(o=u.fieldDefinition.id,s=n.FIELD_ID_TO_DEPENDENT_ID_MAP[o],r[o]=u,s&&s.forEach(function(n){var t=h.getField(n);t&&(r[n]=t)})):r[i]=null);t=[];for(i in r)r.hasOwnProperty(i)&&(u=r[i],t[t.length]=i,this.fireEvent("field-change:"+i,u))}this.fireWorkItemChanged({workItem:this,change:tt.WorkItemChangeType.FieldChange,changedFields:r})},n.prototype.attachFieldChange=function(n,t){var i=this.getField(n);i?this.attachEvent("field-change:"+i.fieldDefinition.id,t):this.attachEvent("field-change:"+n,t)},n.prototype.detachFieldChange=function(n,t){var i=this.getField(n);i?this.detachEvent("field-change:"+i.fieldDefinition.id,t):this.detachEvent("field-change:"+n,t)},n.prototype.getField=function(n){var t=(""+n).toUpperCase();return this.fieldMapById[t]||this.fieldMap[t]},n.prototype.computeFieldValue=function(n,t,i){function e(n){var t,i;f&&(t=c.project.nodesCacheManager.getReferencedNode(f),t&&(i=void 0,i=t.path?ut.NodeHelpers.getReferencedNodeSegmenets(t.path):ut.NodeHelpers.getNodeSegments(t),u.value=i[n],u.success=!0))}var c=this,o,f,u={success:!1},s,h,r;o=n instanceof yi?n.fieldDefinition.id:n;f=i>=0?this.getFieldValueByRevision(t,i):this._getFieldValueById(t);switch(o){case at.CoreField.AreaId:case at.CoreField.IterationId:f&&(r=this.project.nodesCacheManager.getReferencedNode({path:f,nodeType:o===at.CoreField.AreaId?1:2}),r&&(u.value=r.id,u.success=!0));break;case at.DalFields.AreaLevel1:case at.DalFields.IterationLevel1:e(0);break;case at.DalFields.AreaLevel2:case at.DalFields.IterationLevel2:e(2);break;case at.DalFields.AreaLevel3:case at.DalFields.IterationLevel3:e(3);break;case at.DalFields.AreaLevel4:case at.DalFields.IterationLevel4:e(4);break;case at.DalFields.AreaLevel5:case at.DalFields.IterationLevel5:e(5);break;case at.DalFields.AreaLevel6:case at.DalFields.IterationLevel6:e(6);break;case at.DalFields.AreaLevel7:case at.DalFields.IterationLevel7:e(7);break;case at.CoreField.AreaPath:case at.CoreField.IterationPath:if(f){if(r=this.project.nodesCacheManager.getReferencedNode(f),!r&&(s=this.getFieldValueByRevision(at.CoreField.TeamProject,i),s))try{h=this.store.getProject(s);h.nodesCacheManager.isNodesCacheAvailable()&&(r=h.nodesCacheManager.findNodeById(f))}catch(l){}r?(u.value=r.path||ut.NodeHelpers.getPath(r,1),u.success=!0):(u.value=o===at.CoreField.AreaPath?ni.DeletedAreaPath:ni.DeletedIterationPath,u.success=!0)}break;case at.CoreField.NodeName:f&&(r=this.project.nodesCacheManager.getReferencedNode(f),r&&(u.value=r.name,u.success=!0))}return u},n.prototype.beginSilentSave=function(){var i=this,t,n;return this.isReadOnly()?ci.reject(new Error(ni.WorkItemIsReadOnlyError)):(t=this._eventsEnabled,this._eventsEnabled=!1,n=ci.defer(),this.beginSave(function(){i._eventsEnabled=t;n.resolve(null)},function(r){i._eventsEnabled=t;n.reject(r)}),n.promise)},n.prototype.saveAsync=function(){var n=this;return new Promise(function(t,i){return n.beginSave(function(n){return t(n)},function(n){return i(n)})})},n.prototype.beginSave=function(n,t,i){var s=this,f,v,e,o,r;if(this.isReadOnly()){t(ni.WorkItemIsReadOnlyError);return}var h=0,c=0,l=0,u=this.getLinkUpdates();u&&(h=u.addedLinks?u.addedLinks.length:0,c=u.updatedLinks?u.updatedLinks.length:0,l=u.deletedLinks?u.deletedLinks.length:0);try{e=this.getFieldValue(at.DalFields.Tags);f=this._splitTagNames(e).length;o=this.getFieldValue(at.DalFields.Tags,!0);o!==e&&(v=f-this._splitTagNames(o).length)}catch(y){a.publishErrorToTelemetry(y)}return ft.PerfScenarioManager.endScenario(ai.WITUserScenarioActions.WORKITEM_CREATEOREDIT,{isNew:this.isNew(),fieldsChangedCount:Object.keys(this.manuallySetFields).length,addedLinksCount:h,updatedLinksCount:c,deletedLinksCount:l,isMobile:st.WitFormModeUtility.isMobileForm,project:this.project.name,workItemType:"[NonEmail: "+this.workItemType.referenceName+"]",workItemSessionId:this.sessionId,workItemId:this.id}),r=ft.PerfScenarioManager.startScenario(ai.WITPerformanceScenario.WORKITEM_SAVE,!1),r.addData({workItemType:"[NonEmail: "+this.workItemType.referenceName+"]",numberOfTags:f,numberOfTagsDelta:v}),i==null&&(i=window.location.pathname),r.addData({PathName:i}),this.store.beginSaveWorkItemsBatch([this],function(t){r&&r.addSplitTiming(ai.PerformanceEvents.WORKITEM_SAVE_COMPLETE);typeof n=="function"&&n.call(s,t);r&&ft.PerfScenarioManager.endScenario(r.getName())},function(n){r&&ft.PerfScenarioManager.abortScenario(r.getName());n&&n.name===tt.Exceptions.WorkItemBulkSaveException&&(n=n.results[0].error);gi(n,t,s)})},n.prototype.beginValidate=function(n,t,r,u){var o=this,f,e;!this.isDirty()||this.isValidating(t)||this.isSaving()||(f=this.getUpdateData(),f&&f.payload&&(this._setValidatingStatus(!0,t),gt.logTracePoint("VSS.WorkItemTracking.WorkItem.beginValidate.start"),e=this.getField(n),this.workItemType.beginGetDependentFields(n,function(n){return __awaiter(o,void 0,void 0,function(){var h,f,o,i,c,a,s=this;return __generator(this,function(v){switch(v.label){case 0:h=n.concat(e.fieldDefinition);f={};o={};$.each(h,function(n,t){f[t.referenceName]=s.getFieldValue(t.id,!0);s.fieldUpdates.hasOwnProperty(t.id+"")&&(o[t.referenceName]=s.getFieldValue(t.id))});v.label=1;case 1:return v.trys.push([1,3,4,5]),[4,w.getService(l.WebPageDataService).getDataAsync("ms.vss-work-web.work-item-rule-engine-data-provider",null,{fieldsToEvaluate:{projectId:this.project.guid,workItemType:this.workItemType.name,fields:[e.fieldDefinition.referenceName],fieldValues:f,fieldUpdates:o}})];case 2:return i=v.sent(),i&&i.exception?typeof u=="function"&&(c=i.exception.customProperties&&i.exception.customProperties.FieldReferenceName||i.exception.customProperties.ReferenceName,u(i.exception,c)):this.isValidating(t)&&!this.isSaving()&&typeof r=="function"&&r(),[3,5];case 3:return a=v.sent(),typeof u=="function"&&u(a),[3,5];case 4:return this._setValidatingStatus(!1,t),gt.logTracePoint("VSS.WorkItemTracking.WorkItem.beginValidate.end"),[7];case 5:return[2]}})})},i.handleError)))},n.prototype.getFieldUpdates=function(){var u={},t,n,i,f,r=this.fieldUpdates,e=this.workItemType.fieldMap,o=this.workItemType.fieldMapById;for(n in r)if(r.hasOwnProperty(n)){if(i=o[n]||e[n],i&&i.checkFlag(tt.FieldFlags.Computed))continue;t=r[n].value;typeof t=="undefined"&&(t=null);u[n]=t;f=!0}return f?u:null},n.prototype.getTemplateFieldValues=function(){var i=this,n={},t=this.initialValues||{};return $.each(this.manuallySetFields,function(r,u){var f=+r,e=i.getField(f),s,h=f+"",o;f!==at.CoreField.AreaId&&f!==at.CoreField.IterationId&&((o=e.getValue(),o instanceof ki)||(s=t.hasOwnProperty(h)?!yi.compareValues(t[h].value,u):!yi.compareValues(e.getValue(!0),u),s&&(n[e.fieldDefinition.referenceName]=o)))}),n},n.prototype.getLinkUpdates=function(n){for(var t,i,r=[],u=[],f=[],e=0,o=this.allLinks;e<o.length;e++)(t=o[e],t.isRemoved())||(t.deleted?(r.push(t.linkData),n&&n.deletedLinks.push(t)):t.isNew()?(f.push(t.linkData),n&&n.addedLinks.push(t)):t.updated&&(u.push(t.linkData),n&&n.updatedLinks.push(t)));return i=null,r.length>0&&(i=i||{},i.deletedLinks=r),u.length>0&&(i=i||{},i.updatedLinks=u),f.length>0&&(i=i||{},i.addedLinks=f),i},n.prototype._restoreLinkUpdates=function(n){var o,i,f,s,u,e,r,t;if(n){if(n.addedLinks)for(o=n.addedLinks,i=0,f=o;i<f.length;i++)r=f[i],t=bi.createFromLinkData(this,r),this.addLink(t);if(n.deletedLinks)for(s=n.deletedLinks,u=0,e=s;u<e.length;u++)r=e[u],t=this.findLink(bi.createFromLinkData(this,r)),t&&this.removeLinks([t])}},n.prototype.getUpdateData=function(){var t=!1,i={uniqueId:this.getUniqueId(),id:this.id,tempId:this.tempId,rev:this.revision,projectId:this.project.guid,addedLinks:[],deletedLinks:[],updatedLinks:[]},n={id:this.id,rev:this.revision,projectId:this.project.guid,isDirty:this._fieldsDirty()},r,u;return this.isNew()&&(n.tempId=this.tempId),r=this.getFieldUpdates(),r&&(n.fields=r,this.hasTeamProjectChanged()&&(n.fields[at.CoreFieldRefNames.TeamProject]=this.project.name),t=!0),u=this.getLinkUpdates(i),u&&(n.links=u,t=!0),t&&(i.payload=n),i},n.prototype.setRevisions=function(n){this._revisions=n;this._revisionsPopulated=!0},n.prototype.getRevisionsArePopulated=function(){return this._revisionsPopulated},n.prototype._takeUpdateResult=function(n,t,i){var c,l,a,y,r,s,h,p,w;ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_TAKEUPDATERESULT,!0);c=[];l=this.id;try{if(this._loadTime=n.loadTime,this.ruleEngine=null,this.extensions=i,this._originalExtensions=this.extensions,this._defineExtensionFields(),a=n.rev!==this.revision,y=n.fields&&this._fieldData&&n.fields[at.CoreField.Watermark]!==this._fieldData[at.CoreField.Watermark],a||y){if(this._setFieldValueById(at.CoreField.Id,n.id),this.id=n.id,n.isCommentingAvailable!==undefined&&n.isCommentingAvailable!==null&&(this._isCommentingAvailable=n.isCommentingAvailable),l===0&&this.updateCachedIdOnSave(),this._setFieldValueById(at.CoreField.Rev,n.rev),this.revision=n.rev,r=void 0,s=n.fields,s)for(r in s)s.hasOwnProperty(r)&&(this._setFieldValueById(+r,s[r]),c.push(+r));var f=this.fieldUpdates,u=this._fieldData,o=void 0,v=""+at.CoreField.ChangedBy,e=""+at.CoreField.History;if(n.rev===1){for(r in f)f.hasOwnProperty(r)&&(u[r]=f[r].value);u[e]&&this._addDiscussionForRevision(u[e],u)}else if(a){o={};u.hasOwnProperty(v)&&(o[v]=u[v]);for(r in f)f.hasOwnProperty(r)&&(o[r]=u[r],u[r]=f[r].value);u.hasOwnProperty(e)&&(o.hasOwnProperty(e)||(o[e]=u[e],delete u[e]));this._revisionsPopulated&&this._revisions.push(o);u[e]&&this._addDiscussionForRevision(u[e],u)}else for(r in f)f.hasOwnProperty(r)&&(u[r]=f[r].value);this.fieldUpdates={}}}finally{ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_TAKEUPDATERESULT,!1)}ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_EVALUATELINKUPDATES,!0);try{h=this._takeLinkUpdateResult(n,t);this.resetHistory();this.evaluate(h.changedFields,c);this.resetManualFieldChanges()}finally{ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_EVALUATELINKUPDATES,!1)}ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_RESETAFTERSAVE,!0);try{p=this.hasWorkItemTypeChanged();w=this.hasTeamProjectChanged();this._originalWorkItemType=this.workItemType;this.fireWorkItemSaved({changedWorkItemLinks:h.changedWorkItemLinks,externalLinkChanged:h.externalLinkChanged,firstSave:l!==this.id,typeChanged:p,projectChanged:w})}finally{ft.PerfScenarioManager.addSplitTiming(ai.PerformanceEvents.WORKITEMTRACKING_RESETAFTERSAVE,!1)}},n.prototype._takeLinkUpdateResult=function(n,t){var i=this,h=this.allLinks,r={},f=[],u=!1,c=function(n){return n.SourceID===i.id?{targetId:n.TargetID,linkType:n.LinkType,remoteHostId:n.RemoteHostId}:{targetId:n.SourceID,linkType:i.store.findLinkTypeEnd(n.LinkType).oppositeEnd.id,remoteHostId:n.RemoteHostId}},l=function(n,t,i){var r=null;return $.each(h,function(u,f){if(f instanceof wi&&!f.isRemoved()){var e=f;if(e.getTargetId()===n&&(!f.remoteHostId||f.remoteHostId===i)&&e.getLinkType()===t)return r=e,!1}}),r},a={},e,o,s;$.each(t.deletedLinks,function(n,t){t instanceof wi||(r[""+t.getFieldId()]=!0,t.linkData.RemovedDate=i._getFieldValueById(at.DalFields.LastChangedDateId),a[t.linkData.FilePath]=t)});$.each(n.deletedLinks,function(n,t){var o,e,s;t.ExtID?!u&&t.FilePath&&(s=a[t.FilePath],s instanceof ir&&(u=!0)):(o=c(t),e=l(o.targetId,o.linkType,o.remoteHostId),e&&(r[""+e.getFieldId()]=!0,e.linkData["Revised Date"]=t.ChangedDate,e.linkData["Revised By"]=t.ChangedBy,f.push({command:"remove",sourceId:i.id,targetId:e.getTargetId(),linkData:e.linkData})))});e={};$.each(t.addedLinks,function(n,t){t instanceof wi||(e[t.linkData.FilePath]=t)});$.each(n.addedLinks,function(n,t){var s,a,o;t.ExtID?(s=e[t.FilePath],s&&(r[""+s.getFieldId()]=!0,s.linkData.ExtID=t.ExtID,s.linkData.AddedDate=i._getFieldValueById(at.DalFields.LastChangedDateId),s instanceof ir&&(u=!0))):(a=c(t),o=l(a.targetId,a.linkType,a.remoteHostId),o||(o=wi.create(i,a.linkType,a.targetId,null),h.push(o)),r[""+o.getFieldId()]=!0,o.linkData["Changed Date"]=t.ChangedDate,o.linkData["Changed By"]=t.ChangedBy,f.push({command:"add",sourceId:i.id,targetId:o.getTargetId(),linkData:o.linkData}))});this.resetLinks();o=[];for(s in r)r.hasOwnProperty(s)&&o.push(+s);return{changedFields:o,changedWorkItemLinks:f,externalLinkChanged:u}},n.prototype._getRuleEngine=function(){if(!this.ruleEngine){var n=[];$.each(this.workItemType.fields,function(t,i){i.rules&&n.push({fieldId:i.id,rules:i.rules})});this.extensions&&$.each(this.extensions,function(t,i){i.fieldRules&&$.each(i.fieldRules,function(t,i){n.push({fieldId:t,rules:i})})});this.ruleEngine=new vr(this,n)}return this.ruleEngine},n.prototype._evaluateSilent=function(){var n=this._eventsEnabled;this._eventsEnabled=!1;try{this.evaluate()}finally{this._eventsEnabled=n}},n.prototype.evaluate=function(n,t){var r=[],i={},u;$.each(this.workItemType.getTriggerList(),function(n,t){var u=t+"";i.hasOwnProperty(u)||(r.push(t),i[u]=!0)});t?($.each(t,function(n,t){var u=t+"";i.hasOwnProperty(u)||(r.push(t),i[t]=!0)}),u=at.DalFields.HistoryId+"",i.hasOwnProperty(u)||(r.push(at.DalFields.HistoryId),i[u]=!0)):$.each(this.fields,function(n,t){var u=t.fieldDefinition.id,f=u+"";i.hasOwnProperty(f)||(r.push(u),i[f]=!0)});this.evaluateFields(r,n)},n.prototype.evaluateField=function(n,t,i){return this._getRuleEngine().evaluateField(n,t,i)},n.prototype.evaluateFields=function(n,t){var i={},r;t&&$.each(t,function(n,t){i[t+""]=!0});r=this._getRuleEngine().evaluateFields(n);r&&$.each(r,function(n,t){i[t+""]=!0});this.fireFieldChange(vt.keys(i))},n.prototype.resetLinks=function(n){var r,i,t,u;if(this._links=null,n)for(i=this.allLinks,t=0,u=i.length;t<u;t++)r=i[t],r.deleted&&r.isNew()&&(i.splice(t--,1),u--)},n.prototype.getLinks=function(){var r,u,n,i,t;if(!this._links)for(this._links=r=[],u=this.allLinks,n=0,i=u;n<i.length;n++)t=i[n],t.deleted||t.isRemoved()||r.push(t);return this._links},n.prototype.findLink=function(n){var u,t,i,r;for(u=this.allLinks,t=0,i=u;t<i.length;t++)if(r=i[t],r.equals(n))return r;return undefined},n.prototype.addLink=function(n){this.addLinks([n])},n.prototype.addLinks=function(n){var i,e,h,r,u,o,f;if(!this.isReadOnly()){var t={},c=function(n){var r=!1,u=!1,i;if($.each(s.allLinks,function(t,i){if(!i.isRemoved()&&n.isDuplicate(i)){if(i.deleted)return pt.equals(i.getComment(),n.getComment(),!1)||i.setComment(n.getComment()),r=!0,i.deleted=!1,!1;u=!0}}),u)return"continue";i=n.getFieldId();r?t[i]=0:(t[i]=(t[i]||0)+1,s.allLinks.push(n))},s=this;for(i=0,e=n;i<e.length;i++)h=e[i],c(h);if(n.length){this.resetLinks();r=[];u=void 0;for(o in t)t.hasOwnProperty(o)&&(f=+o,r.push(f),u=bi.getCountFieldId(f),this.evaluateField(u,!0,this.getFieldValue(u)-t[f]));this.evaluateFields(r,r)}}},n.prototype.removeLinks=function(n){var s,t,i,u,h,r,f,e,o;if(!this.isReadOnly()){for(s=0,t={},u=0,h=n;u<h.length;u++)r=h[u],r.getIsLocked()||(i=r.getFieldId(),r.remove({preventEvent:!0}),t[r.getFieldId()]=(t[i]||0)+1,s++);if(s){this.resetLinks(!0);f=[];e=void 0;for(o in t)t.hasOwnProperty(o)&&(i=+o,f.push(+o),e=bi.getCountFieldId(i),this.evaluateField(e,!0,this.getFieldValue(e)+t[i]));this.evaluateFields(f,f)}}},n.prototype.resetHistory=function(){ri.getService().fire(tt.Actions.RESET_HISTORY,this,null)},n.prototype.getLoadTime=function(){return this._loadTime},n.prototype.getLinkUpdatedExternallyDate=function(){return this._linkUpdatedExternallyDate},n.prototype.linksUpdatedExternally=function(){this._linkUpdatedExternallyDate=new Date;this.resetHistory()},n.prototype._addDiscussionForRevision=function(n,t){var i=""+at.CoreField.CommentCount;this._fieldData[i]=this._getCommentCount();ri.getService().fire(tt.Actions.DISCUSSION_ADDED,this,{historyText:n,revision:t})},n.prototype._resetDiscussion=function(){ri.getService().fire(tt.Actions.RESET_DISCUSSION,this,null)},n.prototype.DiscussionCommentUpdated=function(n){ri.getService().fire(tt.Actions.DISCUSSION_COMMENT_UPDATED,this,{workItemId:this.id,commentId:n})},n.prototype.beginResetExtension=function(n,t,i){var r=this;this.store.beginGetWorkItemTypeExtension(n,function(n){for(var i=0,u=r.extensions.length;i<u;i++)if(pt.equals(r.extensions[i].id,n.id)){r.extensions[i]=n;r.ruleEngine=null;break}r.evaluate();typeof t=="function"&&t(n)},i)},n.prototype.reset=function(){this.resetContributionErrorStatuses();this.resetChanges(!1);this.relatedData={};this._isReset=!0;var n=[at.DalFields.RelatedLinks,at.DalFields.BISURI,at.DalFields.LinkedFiles,at.DalFields.AttachedFiles,at.DalFields.Tags];this.fieldMap[at.CoreFieldRefNames.Parent]&&n.push(at.CoreField.Parent);this.fireFieldChange(n);this.fireWorkItemReset()},n.prototype.resetChanges=function(n){var t,r,i,u;for(this._isCommentDirty=!1,this._links=null,r=this.allLinks,i=0,u=r.length;i<u;i++)t=r[i],t.isNew()?(r.splice(i--,1),u--):(t.deleted=!1,t.linkData.CommentChanged&&(t.linkData.Comment=t.comment,t.linkData.CommentChanged=!1),t.linkData.LockChanged&&(t.linkData.Lock=t.isLocked,t.linkData.LockChanged=!1),t.setState());this.fieldUpdates={};n?this._evaluateSilent():this.evaluate();this.resetManualFieldChanges();this._resetWorkItemTypeChanges()},n.prototype.updateWorkItemPayload=function(n,t,i,r){var u=this,f=function(){u._load(n,!0,r);u.fireWorkItemRefresh();typeof t=="function"&&t.call(u,u)},e=n.fields[at.CoreField.TeamProject],o=n.fields[at.CoreField.WorkItemType];this._evaluateWorkItemTypeChange(e,o,f,i)},n.prototype.beginRefresh=function(n,t,i,r){var u=this;if(this.isNew())try{this.reset();typeof n=="function"&&n.call(this,this)}catch(f){gi(f,t,this)}else this._isReset=!0,this.store.beginGetWorkItemData([this.id],function(i){u.updateWorkItemPayload(i,n,t,r)},t,i)},n.prototype._resetWorkItemTypeChanges=function(){if(this.hasWorkItemTypeChanged()){var n={SourceType:this._originalWorkItemType.name,DestinationType:this.workItemType.name};this.workItemType.project!==this._originalWorkItemType.project?hi.publishEvent(new hi.TelemetryEventData(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ai.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_MOVE_REVERT,n)):hi.publishEvent(new hi.TelemetryEventData(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ai.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_REVERT,n));this.changeWorkItemType(this._originalWorkItemType,this._originalExtensions);this._originalWorkItemType=this.workItemType;this._originalExtensions=this.extensions}},n.prototype._evaluateWorkItemTypeChange=function(n,t,i,r){var u=this;pt.equals(n,this._originalWorkItemType.project.name,!0)&&pt.equals(t,this._originalWorkItemType.name,!0)?pt.equals(n,this.workItemType.project.name,!0)&&pt.equals(t,this.workItemType.name,!0)?i():(this._resetWorkItemTypeChanges(),i()):this.store.beginGetProject(n,function(n){n.beginGetWorkItemType(t,function(n){u.changeWorkItemType(n);u._originalWorkItemType=n;i()},r)},r)},n.prototype._copyField=function(n,t,i){var u,r;if(t&&t.isCloneable()&&(u=this.getField(t.id),u&&(r=u.getValue(),!yi.isEmpty(r)))){if((t.id===at.CoreField.AreaId||t.id===at.CoreField.IterationId)&&(typeof r!="number"||this.project.id!==i.project.id))return;n.setFieldValue(t.id,r)}},n.prototype.copy=function(n,t,i,r,u,f,e,o){var ct=this,d=[],h=[],v={},et,ot,s,y,g,nt,p,w,it,c,b,st,l,ht,k,rt,ut,a,ft;for(n=n instanceof fr?n:this.workItemType,t=typeof t!="boolean"?!0:t,i=typeof i!="boolean"?!0:i,r=typeof r!="boolean"?!0:r,u=typeof u!="boolean"?!0:u,e=typeof e!="boolean"?!0:e,et=new hi.TelemetryEventData(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ai.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_INCLUDE_WORKITEM_LINKS_ATTACHMENTS,{action:"Telemetry for Copy links and attachments checkbox",copyLinks:t,copyAttachments:i}),hi.publishEvent(et),ot=[at.OobFieldRefNames.ResolvedBy,at.OobFieldRefNames.ResolvedDate,at.OobFieldRefNames.ClosedBy,at.OobFieldRefNames.ClosedDate,"Microsoft.Sync.ProjSrv.RequestedAssnGuid","Microsoft.Sync.ProjSrv.RequestedProjGuid","Microsoft.Sync.ProjSrv.ProjGuid","Microsoft.Sync.ProjSrv.TaskGuid"],f=f||[],ot.forEach(function(n){var t=ct.store.getFieldDefinition(n);t&&f.push(t.id.toString())}),$.each(f,function(n,t){v[t]=!0}),s=n.create(),ri.getService().fire(tt.Actions.WORKITEM_COPIED,s),y=0,g=n.triggerList;y<g.length;y++)nt=g[y],p=nt.toString(),v.hasOwnProperty(p)||(c=n.fieldMapById[p],c?this._copyField(s,c,n):hi.publishEvent(new hi.TelemetryEventData(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"CloneWorkItem_FieldNotFound",{typeName:"[NonEmail:".concat(n.name,"]"),triggerList:"[NonEmail:".concat(n.triggerList.join(),"]"),fieldMap:"[NonEmail:"+JSON.stringify(Object.keys(n.fieldMapById).map(function(t){return{fieldId:t,fieldRefName:n.fieldMapById[t]?n.fieldMapById[t].referenceName:""}}))+"]",fieldId:nt})),v[p]=!0);for(w=0,it=n.fields;w<it.length;w++)c=it[w],v.hasOwnProperty(c.id.toString())||this._copyField(s,c,n);if(r&&(b=void 0,this.isNew()?b=ni.CreateCopyCopiedFromNewWorkItem:(st="<a href='x-mvwit:workitem/".concat(this.id,"'>").concat(this.workItemType.name," ").concat(this.id,"<\/a>"),l=ni.CreateCopyCopiedFrom,t&&i?l=ni.CreateCopyCopiedWithAllLinksAndAttachmentsFrom:t?l=ni.CreateCopyCopiedWithAllLinksFrom:i&&(l=ni.CreateCopyCopiedWithAllAttachmentsFrom),b=pt.format(l,st)),s.setFieldValue(at.CoreField.History,b)),t||i)for(ht=this.getLinks(),k=0,rt=ht;k<rt.length;k++)ut=rt[k],a=ut.clone(s),a instanceof rr?i&&d.push(a):t&&a&&(!o||o.indexOf(ut.linkData.LinkType)===-1)&&h.push(a);return!this.isNew()&&e&&h.push(wi.create(s,this.store.findLinkTypeEnd(tt.LinkTypeName.Related_Link_Name),this.id,"")),d.length>0&&h.push.apply(h,d),h.length>0&&s.addLinks(h),ft=[at.DalFields.RelatedLinks,at.DalFields.AttachedFiles,at.DalFields.BISURI,at.DalFields.LinkedFiles],this.fieldMap[at.CoreFieldRefNames.Parent]&&ft.push(at.CoreField.Parent),s.evaluate(ft),s},n.prototype.copyWithChildren=function(n,t,i,r,u,f,e){return __awaiter(this,void 0,void 0,function(){var o,l,s,h,a,v,c,y,p,w=this;return __generator(this,function(b){switch(b.label){case 0:if(o=this.copy(n,t,i,r,u,f,e,[tt.CoreLinkTypes.Child]),!o.isValid()){l=o.getInvalidFields()[0].getErrorText();throw Error(l);}if(s=this.getLinks().filter(function(n){return n.linkData.LinkType===tt.CoreLinkTypes.Child}).map(function(n){return n.linkData.ID}),h=100,s.length>h)throw Error(pt.format(ni.TooManyChildItemsToCopy,h));return(s.length>0)?[4,this.store.getWorkItemsAsync(s,!1,!0,!0)]:[3,3];case 1:return a=b.sent(),v=a.filter(function(n){return n.project.guid===o.project.guid}),c=v.map(function(n){var o=n.copy(n.workItemType,t,i,r,u,f,e,[tt.CoreLinkTypes.Parent]),s;if(!o.isValid()){s=o.getInvalidFields()[0].getErrorText();throw Error(pt.format(ni.ErrorCopyingChildItem,n.id,s));}return o}),[4,this.store.saveWorkItemsBatchAsync(c)];case 2:b.sent();y=c.map(function(n){return wi.create(o,w.store.findLinkTypeEnd(tt.LinkTypeName.Child_Link_Name),n.id,"")});o.addLinks(y);b.label=3;case 3:return p=new hi.TelemetryEventData(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ai.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_COPY_WITH_CHILDREN,{action:"Copy work item with children",copyLinks:t,copyAttachments:i,children:s.length}),hi.publishEvent(p),[2,o]}})})},n.prototype.getTagNames=function(){return this._splitTagNames(this.getFieldValue(at.DalFields.Tags))},n.prototype._splitTagNames=function(n){return n?n.trim().split(/;\s*/):[]},n.prototype._load=function(t,i,r){var s,h,v=this,e,c,u,o,f,l,a;t=t||{};this._isReadOnly=t.isReadOnly||!1;this._loadTime=t.loadTime||new Date;this._fieldData=t.fields||{};for(u in this._fieldData)this._fieldData.hasOwnProperty(u)&&(o=this.workItemType.getFieldDefinition(u),o&&(yi.isLongTextField(o.type)?(f=this._fieldData[u],f&&(this._fieldData[u]=f.trim())):o.isIdentity&&(f=this._fieldData[u],f&&ht.setResolvedByDescriptorIfWorkItemIdentityRef(f))));this._revisions=t.revisions||[];this.fieldUpdates=r&&this.fieldUpdates.hasOwnProperty(at.CoreField.History)?(s={},s[at.CoreField.History]=this.fieldUpdates[at.CoreField.History],s):{};$.each(this._fieldData,function(n){v._defineField(n)});i&&($.each(this.fields,function(n,t){t._reset()}),this.resetContributionErrorStatuses());e=[];t.files&&bt.addRange(e,t.files);t.relations&&bt.addRange(e,t.relations);t.relationRevisions&&bt.addRange(e,t.relationRevisions);this.allLinks=c=[];this._links=null;c.push.apply(c,e.map(function(n){return bi.createFromLinkData(v,n)}));this.relatedData={};this.referencedPersons=t.referencedPersons||{};this.project.nodesCacheManager.addReferencedNodes(t.referencedNodes);this.id=this._getFieldValueById(at.CoreField.Id)||0;this.id===0&&(t.tempId?(this.tempId=t.tempId,n.reserveTempId(this.tempId)):this.tempId=n.getTempId());this._isCommentingAvailable=t.isCommentingAvailable||this.isNew();this.revision=this._getFieldValueById(at.CoreField.Rev)||0;this.isNew()?(l=this.project.id,this._setFieldValueById(at.CoreField.AreaId,l,!0),this._setFieldValueById(at.CoreField.IterationId,l,!0),this._setFieldValueById(at.CoreField.WorkItemType,this.workItemType.name,!0),this._revisionsPopulated=!0):this._revisionsPopulated=t.revisions!=undefined&&t.revisions!=null&&t.revisions.length>0||t.relationRevisions!=undefined&&t.relationRevisions!=null&&t.relationRevisions.length>0;this.resetHistory();this._resetDiscussion();a=[at.DalFields.RelatedLinks,at.DalFields.AttachedFiles,at.DalFields.BISURI,at.DalFields.LinkedFiles];this.fieldMap[at.CoreFieldRefNames.Parent]&&a.push(at.CoreField.Parent);this.evaluate(a);this.isNew()&&(this.initialValues=$.extend({},this.fieldUpdates));this.manuallySetFields=r&&this.manuallySetFields.hasOwnProperty(at.CoreField.History)?(h={},h[at.CoreField.History]=this.manuallySetFields[at.CoreField.History],h):{}},n.prototype._fieldsDirty=function(n,t){var u,e,s,r,o,h,i,f;if(n){if(this.manuallySetFields){if(u=__assign({},this.manuallySetFields),t&&t.length>0)for(e=0,s=t;e<s.length;e++)i=s[e],delete u[i],delete u[i.toString()];for(f in u)if(u.hasOwnProperty(f))return!0}}else{if(this.isNew())return!0;if(r=__assign({},this.fieldUpdates),t&&t.length>0)for(o=0,h=t;o<h.length;o++)i=h[o],delete r[i],delete r[i.toString()];for(f in r)if(r.hasOwnProperty(f)&&!r[f].setByRule)return!0}return!1},n.prototype._setSavingStatus=function(n,t){this._saving!==n&&(this._saving=n,n?this.fireWorkItemSaving():this.fireWorkItemSaveComplete(t))},n.prototype._setValidatingStatus=function(n,t){var i=!1,r;if(t)this._fieldValidationMap[t.toString()]!==n&&(this._fieldValidationMap[t.toString()]=n,i=!0);else for(r in this._fieldValidationMap)this._fieldValidationMap[r]!==n&&(this._fieldValidationMap[r]=n,i=!0);i&&(n?this.fireWorkItemValidating():this.fireWorkItemValidationComplete())},n.prototype._getLinkCount=function(n,t){var i=0,r=this.getLinks();return $.each(r,function(r,u){t&&u.isNew()||(n?u instanceof n&&i++:i++)}),i},n.prototype._getParentLinkId=function(n){for(var t,r,f=this.getLinks(),i=0,u=f;i<u.length;i++)if((t=u[i],!n||!t.isNew())&&t instanceof wi&&(r=t,r.getLinkType()===tt.CoreLinkTypes.Parent))return r.getTargetId();return undefined},n.prototype._getCommentCount=function(n){var t=this._fieldData[at.CoreField.CommentCount]||0;return!n&&this.fieldUpdates.hasOwnProperty(at.CoreField.History)&&(t+=1),t},n.prototype.hasWorkItemTypeChanged=function(){return this._originalWorkItemType!==this.workItemType},n.prototype.hasTeamProjectChanged=function(){return this._originalWorkItemType.project!==this.project},n.tempIdSeed=0,n.FIELD_ID_TO_DEPENDENT_ID_MAP=(nr={},nr[at.DalFields.AttachedFiles]=[at.CoreField.AttachedFileCount],nr[at.DalFields.RelatedLinks]=[at.CoreField.RelatedLinkCount,at.CoreField.Parent],nr[at.DalFields.LinkedFiles]=[at.CoreField.HyperLinkCount],nr[at.DalFields.BISURI]=[at.CoreField.ExternalLinkCount],nr[at.DalFields.HistoryId]=[at.CoreField.CommentCount],nr),n.MAX_TITLE_LENGTH=255,n.FIELD_ERRORS_CLEARED="field-errors-cleared",n}();t.WorkItem=or;yi=function(){function n(n,t){this.workItem=n;this.fieldDefinition=t}return n.isEmpty=function(n){return n===null||typeof n=="undefined"||typeof n=="string"&&!n.trim()},n.compareValues=function(t,i,r,u){var f,e,o;return t instanceof ki?i instanceof ki&&t.type===i.type?n.compareValues(t.value,i.value,r):!1:i instanceof ki?!1:(t=ht.convertPotentialIdentityRefFromFieldValue(t,!1),i=ht.convertPotentialIdentityRefFromFieldValue(i,!1),(t===null||typeof t=="undefined")&&(t=""),(i===null||typeof i=="undefined")&&(i=""),t=""+t,i=""+i,f=!1,f=r?pt.localeIgnoreCaseComparer(t,i)===0:pt.localeComparer(t,i)===0,!f&&u&&(e=h.IdentityHelper.parseUniquefiedIdentityName(t),o=h.IdentityHelper.parseUniquefiedIdentityName(i),e&&o&&e.uniqueName&&o.uniqueName&&(f=pt.localeIgnoreCaseComparer(e.uniqueName,o.uniqueName)===0)),f)},n.isMatch=function(n,t){return n?(n=n.replace(/[.*+?|()\[\]\^\${}\\]/g,"\\$&"),n=n.replace(/n/gi,"\\d").replace(/a/gi,"[a-zA-Z]").replace(/x/gi,"[a-zA-Z0-9]"),n="^"+n+"$",new RegExp(n,"i").test(t)):!0},n.hashset=function(n,t){var r={},u,e,f,o,i;if(t){if(n.__hashSetCaseInsensitive)return n.__hashSetCaseInsensitive;for(u=0,e=n;u<e.length;u++)i=e[u],r[i.toLocaleUpperCase()]=i;n.__hashSetCaseInsensitive=r}else{if(n.__hashSet)return n.__hashSet;for(f=0,o=n;f<o.length;f++)i=o[f],r[i]=i;n.__hashSet=r}return r},n.contains=function(t,i,r){if(r){var u=n.hashset(t,!0);return u.hasOwnProperty(i.toLocaleUpperCase())}return $.inArray(i,t)>=0},n.normalize=function(t,i){if(i){var r=n.hashset(t,!0);return r[i.toLocaleUpperCase()]||i}return i},n.intersect=function(t,i,r){var e,u,o,h,s,c,f;if(!i)return t;if(i.length===0)return[];if(t.length<i.length?e=n.hashset(t,r):(e=n.hashset(i,r),i=t),u=[],bt.copySortFlag(u,i),r)for(o=0,h=i;o<h.length;o++)f=h[o],e.hasOwnProperty(f.toLocaleUpperCase())&&(u[u.length]=f);else for(s=0,c=i;s<c.length;s++)f=c[s],e.hasOwnProperty(f)&&(u[u.length]=f);return u},n.union=function(n,t,i){var e=i?pt.localeIgnoreCaseComparer:pt.localeComparer,r;if(!t||t.length===0)return n;if(!n||n.length===0)return t;bt.sortIfNotSorted(n,e);bt.sortIfNotSorted(t,e);r=[];bt.flagSorted(r,e);for(var u=0,c=n.length,f=0,l=t.length,o,s,h;u<c&&f<l;)o=n[u],s=t[f],h=e(o,s),h===0?(r[r.length]=o,u++,f++):h>0?(r[r.length]=s,f++):(r[r.length]=o,u++);while(u<c)r[r.length]=n[u],u++;while(f<l)r[r.length]=t[f],f++;return r},n.subtract=function(t,i,r){var s,u,e,h,o,c,f;if(!i||i.length===0)return t;if(u=[],bt.copySortFlag(u,t),s=n.hashset(i,r),r)for(e=0,h=t;e<h.length;e++)f=h[e],s.hasOwnProperty(f.toLocaleUpperCase())||(u[u.length]=f);else for(o=0,c=t;o<c.length;o++)f=c[o],s.hasOwnProperty(f)||(u[u.length]=f);return u},n.inList=function(t,i,r,u,f){var o,e,s,h;if(r&&n.contains(r,i,f))return!0;if(u)for(e=0,s=u;e<s.length;e++)if(h=s[e],o=t.getConstantSet(h),!o,n.contains(o,i,f))return!0;return!1},n.unionLists=function(t,i,r){var u,e,f,o,s;if(r){for(i?(u=i.slice(0),bt.copySortFlag(u,i)):(u=[],bt.flagSorted(u,pt.localeIgnoreCaseComparer)),f=0,o=r;f<o.length;f++)s=o[f],e=t.getConstantSet(s),!e,u=n.union(u,e,!0);return u}return i},n.isLongTextField=function(n){switch(n){case at.FieldType.PlainText:case at.FieldType.Html:case at.FieldType.History:return!0;default:return!1}},n.isNumericField=function(n){switch(n){case at.FieldType.Integer:case at.FieldType.Double:return!0;default:return!1}},n.isStringField=function(n){switch(n){case at.FieldType.PlainText:case at.FieldType.Html:case at.FieldType.History:case at.FieldType.String:return!0;default:return!1}},n.convertValueToDisplayString=function(n){return n!==null&&typeof n!="undefined"&&n instanceof ki&&(n=n.value),yt.convertValueToDisplayString(n)},n.isValidStringFieldValue=function(n,t){return!t&&pt.containsControlChars(n)?!1:!pt.containsMismatchedSurrogateChars(n)},n.normalizeStringValue=function(n,t){return t||(n=n.replace(uu," ")),n.replace(fu," ")},n.normalizeHtmlValue=function(n,t,i){var r="class",u=[];return(!t||t.indexOf(r)<0)&&u.push(r),si.HtmlNormalizer.normalizeStripAttributes(n,u,t,i)},n.convertValueToInternal=function(t,i,r){var e=0,u,o,f;if(i===null||typeof i=="undefined")u=null;else if(typeof i=="string"&&i.length===0)u=null;else if(i instanceof ki)u=i;else try{switch(r){case at.FieldType.Boolean:if(typeof i=="boolean")u=i?1:0;else if(typeof i=="number")u=i!==0?1:0;else if(typeof i=="string")u=/^\d+$/.test(i)?kt.parseLocale(i)!==0?1:0:vt.BoolUtils.parse(i)?1:0;else throw new Error("Invalid Boolean field value.");break;case at.FieldType.Integer:if(typeof i=="number"?u=Math.round(i):typeof i=="boolean"?u=i?0:1:typeof i=="string"&&/^[\-+]?\d+$/.test(i.trim())&&(u=kt.parseLocale(i)),typeof u=="undefined"||isNaN(u)||!isFinite(u)||u>n.SqlIntMaxValue-1||u<-n.SqlIntMaxValue)throw new Error("Invalid Integer field value,  ".concat(i));break;case at.FieldType.Double:if(typeof i=="number"?u=i:typeof i=="boolean"?u=i?0:1:typeof i=="string"&&(u=kt.parseLocale(i)),typeof u=="undefined"||isNaN(u)||!isFinite(u))throw new Error("Invalid Double field value,  ".concat(i));break;case at.FieldType.DateTime:if(u=i instanceof Date?i:typeof i=="string"?wt.parseDateString(i):null,u===null||isNaN(u))throw new Error("Invalid DateTime field value.");o=u.getFullYear();(o<1753||o>9999)&&(e=tt.FieldStatusFlags.InvalidDate);break;case at.FieldType.Guid:if(typeof i=="string"){if(f=iu.exec(i),!f)throw new Error("Invalid GUID field value.");u=f[1]+"-"+f[2]+"-"+f[3]+"-"+f[4]+"-"+f[5]}else throw new Error("Invalid GUID field value.");break;default:if(typeof i=="string")u=i;else if(typeof i=="number")u=kt.localeFormat(i,"N");else if(typeof i=="boolean")u=i?"True":"False";else if(i instanceof Date)u=wt.localeFormat(i,"F");else throw new Error("Invalid String field type.");typeof u=="undefined"&&(u=null);u!==null&&((r==at.FieldType.PlainText||r==at.FieldType.Html)&&(u=u.trim()),u.length===0&&(u=null));u!==null&&(r===at.FieldType.String&&u.length>or.MAX_TITLE_LENGTH&&(e=tt.FieldStatusFlags.InvalidTooLong),n.isValidStringFieldValue(u,n.isLongTextField(r))||(e=tt.FieldStatusFlags.InvalidCharacters))}}catch(s){return{value:i,error:s,status:tt.FieldStatusFlags.InvalidType}}return{value:u,status:e}},n.convertValueToExternal=function(t,i,r){return typeof i=="undefined"&&(i=null),i===null&&n.isStringField(r)?i="":r===at.FieldType.Boolean&&(i=i?!0:!1),i},n.getFieldErrorText=function(n,t,i,r){switch(t){case tt.FieldStatus.InvalidEmpty:return pt.format(ni.FieldStatusInvalidEmptyError,n);case tt.FieldStatus.InvalidNotEmpty:return pt.format(ni.FieldStatusInvalidNotEmptyError,n);case tt.FieldStatus.InvalidFormat:return pt.format(ni.FieldStatusInvalidFormatError,n);case tt.FieldStatus.InvalidListValue:return pt.format(ni.FieldStatusInvalidListValueError,n,i);case tt.FieldStatus.InvalidOldValue:return pt.format(ni.FieldStatusInvalidOldValueError,n);case tt.FieldStatus.InvalidNotOldValue:return pt.format(ni.FieldStatusInvalidNotOldValueError,n);case tt.FieldStatus.InvalidEmptyOrOldValue:return pt.format(ni.FieldStatusInvalidEmptyOrOldValueError,n);case tt.FieldStatus.InvalidNotEmptyOrOldValue:return pt.format(ni.FieldStatusInvalidNotEmptyOrOldValueError,n);case tt.FieldStatus.InvalidValueInOtherField:return pt.format(ni.FieldStatusInvalidValueInOtherFieldError,n);case tt.FieldStatus.InvalidValueNotInOtherField:return pt.format(ni.FieldStatusInvalidValueNotInOtherFieldError,n);case tt.FieldStatus.InvalidDate:return pt.format(ni.FieldStatusInvalidDateErrorError,n);case tt.FieldStatus.InvalidTooLong:return pt.format(ni.FieldStatusInvalidTooLongError,n);case tt.FieldStatus.InvalidType:return pt.format(ni.FieldStatusInvalidTypeError,n);case tt.FieldStatus.InvalidComputedField:return pt.format(ni.FieldStatusInvalidComputedFieldError,n);case tt.FieldStatus.InvalidPath:return pt.format(ni.FieldStatusInvalidPathError,n);case tt.FieldStatus.InvalidCharacters:return pt.format(ni.FieldStatusInvalidCharactersError,n);case tt.FieldStatus.InvalidIdentity:return r||pt.format(ni.FieldStatusInvalidListValueError,n,i);default:return pt.format(ni.FieldStatusInvalidUnknownError,n)}},n.getFieldStatus=function(n){if((n&tt.FieldStatusFlags.InvalidMask)!==tt.FieldStatusFlags.None){for(var t=1,i=ar.length;t<i;t++)if((n&ar[t])!==tt.FieldStatusFlags.None)return t;return tt.FieldStatus.InvalidUnknown}return tt.FieldStatus.Valid},n.prototype.resetUpdate=function(){delete this.workItem.fieldUpdates[this.fieldDefinition.id+""]},n.prototype.getValue=function(t,i){return n.convertValueToExternal(this.workItem.store,this._getValue(t,i,!1),this.fieldDefinition.type)},n.prototype.getIdentityValue=function(n,t){return this._getValue(n,t,!0)},n.prototype.getFriendlyValue=function(n,t){var i=this.getValue(n,t);return this.fieldDefinition.isIdentity&&i?h.IdentityHelper.parseUniquefiedIdentityName(i).displayName:i},n.prototype.getDisplayText=function(t,i){return n.convertValueToDisplayString(this.getValue(t,i))},n.prototype.setValue=function(t,i,r,u,f){var s,e,h,o,c;i===void 0&&(i=!1);r===void 0&&(r=!1);u===void 0&&(u=!1);f===void 0&&(f=!1);s={preventFire:!1,fireIdentityEagerValidation:!1,setByRule:!1,forceEvaluate:!1};ht.isWorkItemIdentityRef(t)&&(t=t.distinctDisplayName);e=typeof i!="object"?$.extend({},s,{preventFire:i,fireIdentityEagerValidation:r,setByRule:u}):$.extend({},s,i);h=this.workItem._getFieldValueById(this.fieldDefinition.id);o=n.convertValueToInternal(this.workItem.store,this._tryNormalizeValue(t),this.fieldDefinition.type);this._setValue(o.value,e.setByRule,f);(!n.compareValues(h,o.value)||e.forceEvaluate)&&(c=this.workItem.evaluateField(this.fieldDefinition.id,!0,h),this.status|=o.status,e.fireIdentityEagerValidation&&this.validateIdentityFieldValue(),e.preventFire||this.workItem.fireFieldChange(c))},n.prototype.validateIdentityFieldValue=function(){var n=this,i=this.getValue(),t=new sr(this.fieldDefinition.id,i,this.filterByScope);!br(this.fieldDefinition)||!this.isValid()||i instanceof ki||this.workItem.beginValidate(this.fieldDefinition.id,t,function(){new sr(n.fieldDefinition.id,n.getValue(),n.filterByScope).equals(t)&&(n._error="")},function(i,r){var u=n;r&&(u=n.workItem.getField(r));u.isValid()&&new sr(n.fieldDefinition.id,n.getValue(),n.filterByScope).equals(t)&&(u._error=i.message,u.status=tt.FieldStatusFlags.InvalidIdentityField,n.workItem.fireFieldChange([u.fieldDefinition.id]))})},n.prototype.isDirty=function(){var t=this.fieldDefinition.id,n=this.workItem.fieldUpdates.hasOwnProperty(t+"");if(!n)switch(t){case at.CoreField.IterationPath:n=this.workItem.fieldUpdates.hasOwnProperty(at.CoreField.IterationId+"");break;case at.CoreField.AreaPath:n=this.workItem.fieldUpdates.hasOwnProperty(at.CoreField.AreaId+"")}return n},n.prototype.isUserChange=function(){var n=this.workItem.fieldUpdates[this.fieldDefinition.id+""];return n?n.setByRule?(this.status&tt.FieldStatusFlags.SetByComputedRule)!==tt.FieldStatusFlags.None?!0:!1:!0:!1},n.prototype.isValid=function(){return(this.status&tt.FieldStatusFlags.InvalidMask)===tt.FieldStatusFlags.None},n.prototype.isValidValueOrEmpty=function(){return(this.status&tt.FieldStatusFlags.InvalidMask&~tt.FieldStatusFlags.InvalidEmpty)===tt.FieldStatusFlags.None},n.prototype.isHistoricalRevision=function(){return this.workItem.isReadOnly()},n.prototype.isEditable=function(){if(this.isHistoricalRevision()||!this.fieldDefinition.isEditable())return!1;var n=this.fieldDefinition.id;switch(n){case at.CoreField.Rev:case at.CoreField.WorkItemType:case at.CoreField.CreatedBy:case at.CoreField.IsDeleted:return!1;case at.CoreField.AreaPath:n=at.CoreField.AreaId;break;case at.CoreField.IterationPath:n=at.CoreField.IterationId;break;default:return(this.status&tt.FieldStatusFlags.ReadOnly)===tt.FieldStatusFlags.None}return this.workItem.getField(n).isEditable()},n.prototype.isReadOnly=function(){return!this.isEditable()},n.prototype.isRequired=function(){var n=this.fieldDefinition.id;switch(n){case at.CoreField.IterationPath:n=at.CoreField.IterationId;break;case at.CoreField.AreaPath:n=at.CoreField.AreaId;break;default:return(this.status&tt.FieldStatusFlags.Required)!==tt.FieldStatusFlags.None}return this.workItem.getField(n).isRequired()},n.prototype.getErrorText=function(){return n.getFieldErrorText(this.fieldDefinition.name,this.getStatus(),this.getDisplayText(),this._error)},n.prototype.getStatus=function(){return n.getFieldStatus(this.status)},n.prototype.validate=function(n){this.customValidators=this.customValidators||[];this.customValidators.push(n)},n.prototype.hasList=function(){return(this.status&tt.FieldStatusFlags.HasValues)!==tt.FieldStatusFlags.None},n.prototype.isLimitedToAllowedValues=function(){return(this.status&tt.FieldStatusFlags.LimitedToValues)!==tt.FieldStatusFlags.None},n.prototype.setAllowedValues=function(n){this.hasList()&&!this.fieldDefinition.isIdentity&&(this.allowedValues=n)},n.prototype.getAllowedValues=function(){var t=this.allowedValues,i,r,f,h,c,u,e,l,a,o,s,v,y;if(!t){if(this.hasList()){if(i=this.lists,r=this.workItem.store,i.allowedValues&&i.allowedValues.length>0)for(t=n.unionLists(r,i.allowedValues[0].items,i.allowedValues[0].globals),f=0,h=i.allowedValues;f<h.length;f++)c=h[f],t=n.intersect(t,n.unionLists(r,c.items,c.globals),!0);if(i.suggestedValues&&i.suggestedValues.length>0){for(u=[],e=0,l=i.suggestedValues;e<l.length;e++)a=l[e],u=n.union(u,n.unionLists(r,a.items,a.globals),!0);t=t?n.intersect(t,u):u}if(i.allowExistingValue&&(o=this._getValue(!0),n.isEmpty(o)||(t=t?n.union(t,[n.convertValueToDisplayString(o)],!0):[n.convertValueToDisplayString(o)])),t&&i.prohibitedValues&&i.prohibitedValues.length>0)for(s=0,v=i.prohibitedValues;s<v.length;s++)y=v[s],t=n.subtract(t,n.unionLists(r,y.items,y.globals),!0)}t=t||[];n.isNumericField(this.fieldDefinition.type)?bt.sortIfNotSorted(t,kt.defaultComparer):this.fieldDefinition.id===at.CoreField.State&&this.fieldDefinition.workItemType&&this.fieldDefinition.workItemType.orderedStates?t=this.fieldDefinition.workItemType.orderedStates.filter(function(n){return t.indexOf(n)!==-1}):bt.sortIfNotSorted(t,pt.localeIgnoreCaseComparer);this.allowedValues=t}return t},n.prototype.isChangedInRevision=function(n){var t=this.fieldDefinition.id,i,r,f,u;switch(t){case at.CoreField.AreaPath:case at.CoreField.NodeName:case at.DalFields.AreaLevel1:case at.DalFields.AreaLevel2:case at.DalFields.AreaLevel3:case at.DalFields.AreaLevel4:case at.DalFields.AreaLevel5:case at.DalFields.AreaLevel6:case at.DalFields.AreaLevel7:t=at.CoreField.AreaId;break;case at.CoreField.IterationPath:case at.DalFields.IterationLevel1:case at.DalFields.IterationLevel2:case at.DalFields.IterationLevel3:case at.DalFields.IterationLevel4:case at.DalFields.IterationLevel5:case at.DalFields.IterationLevel6:case at.DalFields.IterationLevel7:t=at.CoreField.IterationId;break;case at.CoreField.AuthorizedAs:t=at.DalFields.PersonID;break;case at.CoreField.IsDeleted:if(n===0)return!1;break;case at.CoreField.AttachedFileCount:case at.CoreField.HyperLinkCount:case at.CoreField.ExternalLinkCount:case at.CoreField.RelatedLinkCount:case at.CoreField.Parent:return null}return n===0?this.workItem.getFieldValueByRevision(t,n)!==null:this.workItem.getRevisions()[n-1]&&(i=this.workItem.getRevisions(),r=t+"",i[n-1].hasOwnProperty(r))?t!==at.CoreField.TeamProject?!0:(f=i[n-1][r],u=n<i.length?i[n][r]:this.workItem.getFieldValue(at.CoreField.TeamProject,!0),u!=undefined&&f!==u):!1},n.prototype._reset=function(){this.status=tt.FieldStatusFlags.None;this.allowedValues=null;this.lists=null},n.prototype._getValue=function(n,t,i){return this.workItem._getFieldValueById(this.fieldDefinition.id,n,t,i)},n.prototype._setValue=function(n,t,i){this.workItem._setFieldValueById(this.fieldDefinition.id,n,t,i)},n.prototype._tryNormalizeValue=function(t){if(t&&typeof t=="string"&&this.hasList()){var i=this.getAllowedValues();t=n.normalize(i,t)}return t},n.SqlIntMaxValue=2147483648,n}();t.Field=yi;i.initClassPrototype(yi,{workItem:null,fieldDefinition:null,status:tt.FieldStatusFlags.None,_allowedValues:null,_lists:null,customValidators:null});ar=[tt.FieldStatusFlags.None,tt.FieldStatusFlags.InvalidEmpty,tt.FieldStatusFlags.InvalidNotEmpty,tt.FieldStatusFlags.InvalidFormat,tt.FieldStatusFlags.InvalidListValue,tt.FieldStatusFlags.InvalidOldValue,tt.FieldStatusFlags.InvalidNotOldValue,tt.FieldStatusFlags.InvalidEmptyOrOldValue,tt.FieldStatusFlags.InvalidNotEmptyOrOldValue,tt.FieldStatusFlags.InvalidValueInOtherField,tt.FieldStatusFlags.InvalidValueNotInOtherField,tt.FieldStatusFlags.InvalidDate,tt.FieldStatusFlags.InvalidTooLong,tt.FieldStatusFlags.InvalidType,tt.FieldStatusFlags.InvalidComputedField,tt.FieldStatusFlags.InvalidPath,tt.FieldStatusFlags.InvalidCharacters,tt.FieldStatusFlags.InvalidIdentityField];bi=function(){function n(n,t){this.workItem=n;this.linkData=t;this.updated=!1;this.deleted=!1;this.baseLinkType="Link";this.comment=this.linkData.Comment;this.isLocked=this.linkData.Lock;this.remoteHostId=this.linkData.RemoteHostId;this.remoteProjectId=this.linkData.RemoteProjectId;this.remoteStatus=this.linkData.RemoteStatus;this.remoteHostUrl=this.linkData.RemoteHostUrl;this.remoteHostName=this.linkData.RemoteHostName;this.remoteStatusMessage=this.linkData.RemoteStatusMessage}return n.createFromLinkData=function(t,i){i=i||{};i.FldID||(i.FldID=at.DalFields.RelatedLinks);var r=i.FldID;switch(r){case at.DalFields.AttachedFiles:return new rr(t,i);case at.DalFields.LinkedFiles:return new lr(t,i);case at.DalFields.BISURI:return new ir(t,i);case at.DalFields.RelatedLinks:return new wi(t,i);default:return new n(t,i)}},n.prototype.setState=function(n){n?(this.comment=this.getComment(),this.isLocked=this.getIsLocked(),this.updated=!1,this.linkData.CommentChanged=!1,this.linkData.LockChanged=!1):this.updated=this.linkData.CommentChanged||this.linkData.LockChanged},n.prototype._fireChanged=function(){this.workItem.fireFieldChange([this.getFieldId()])},n.prototype.isNew=function(){return wt.equals(pi.FutureDate,this.getAddedDate())},n.prototype.isRemoved=function(){return!wt.equals(pi.FutureDate,this.getRemovedDate())},n.prototype.getComment=function(){return this.linkData.Comment},n.prototype.setComment=function(n,t){this.linkData.Comment=n;this.linkData.CommentChanged=!0;this.setState();t||this._fireChanged()},n.prototype.remove=function(n){var t=n&&n.preventEvent===!0;this.deleted=!0;t||(this.workItem.resetLinks(!0),this._fireChanged())},n.prototype.clone=function(){return null},n.prototype.getFieldId=function(){return this.linkData.FldID},n.prototype.getIsLocked=function(){return this.linkData.Lock||!1},n.prototype.setIsLocked=function(n){this.linkData.Lock=n;this.linkData.LockChanged=!0;this.setState();this._fireChanged()},n.prototype.getAddedDate=function(){return this.linkData.AddedDate},n.prototype.getRemovedDate=function(){return this.linkData.RemovedDate},n.prototype.setRemovedDate=function(n){this.linkData.RemovedDate=n},n.prototype.equals=function(n){var t,i,r;if(n&&this.baseLinkType===n.baseLinkType){for(t in this)if(t.substr(0,3)==="get"&&typeof this[t]=="function"&&(i=this[t].call(this),r=n[t].call(n),!yi.compareValues(i,r,!1)))return!1}else return!1;return!0},n.prototype.isDuplicate=function(n){return this.equals(n)},n.prototype.getArtifactLinkType=function(){return""},n.prototype.getAttributes=function(){var n={isDeleted:this.deleted,isNew:this.isNew()};return this._isResourceLinkType(this.linkData.FldID)?(n[at.WorkItemLinkConstants.ATTRIBUTES_AUTHORIZEDDATE]=this.linkData.AddedDate,n[at.WorkItemLinkConstants.ATTRIBUTES_ID]=this.linkData.ExtID,n[at.WorkItemLinkConstants.ATTRIBUTES_RESOURCECREATEDDATE]=this.linkData.CreationDate,n[at.WorkItemLinkConstants.ATTRIBUTES_RESOURCEMODIFIEDDATE]=this.linkData.LastWriteDate,n[at.WorkItemLinkConstants.ATTRIBUTES_REVISEDDATE]=this.linkData.RemovedDate,this.linkData.Length>0&&(n[at.WorkItemLinkConstants.ATTRIBUTES_RESOURCESIZE]=this.linkData.Length),this.linkData.Comment&&(n[at.WorkItemLinkConstants.ATTRIBUTES_COMMENT]=this.linkData.Comment),this.linkData.OriginalName&&(n[at.WorkItemLinkConstants.ATTRIBUTES_NAME]=this.linkData.OriginalName),n):this.linkData.FldID===at.DalFields.RelatedLinks?(n[at.WorkItemLinkConstants.ATTRIBUTES_ISLOCKED]=this.linkData.Lock,this.linkData.Comment&&(n[at.WorkItemLinkConstants.ATTRIBUTES_COMMENT]=this.linkData.Comment),n):null},n.prototype.getLinkUrl=function(){return this._isResourceLinkType(this.linkData.FldID)?this.linkData.FilePath:this.remoteHostId?et.getRemoteWorkItemRestUrl(this.remoteHostUrl,this.remoteProjectId,this.linkData.ID):or.getResourceUrl(this.workItem.store.getTfsContext(),this.linkData.ID)},n.prototype.getRelationLinkType=function(){switch(this.linkData.FldID){case at.DalFields.BISURI:return at.WorkItemLinkConstants.ARTIFACTLINKTYPE;case at.DalFields.AttachedFiles:return at.WorkItemLinkConstants.ATTACHEDLINKTYPE;case at.DalFields.LinkedFiles:return at.WorkItemLinkConstants.HYPERLINKLINKTYPE;default:return this instanceof wi?this.getLinkTypeEnd().immutableName:""}},n.prototype._isResourceLinkType=function(n){switch(n){case at.DalFields.BISURI:case at.DalFields.AttachedFiles:case at.DalFields.LinkedFiles:return!0;default:return!1}},n.getCountFieldId=function(n){var t;switch(n){case at.DalFields.AttachedFiles:t=at.CoreField.AttachedFileCount;break;case at.DalFields.RelatedLinks:t=at.CoreField.RelatedLinkCount;break;case at.DalFields.LinkedFiles:t=at.CoreField.HyperLinkCount;break;case at.DalFields.BISURI:t=at.CoreField.ExternalLinkCount}return t},n}();t.Link=bi;ir=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.baseLinkType="ExternalLink",r}return __extends(t,n),t.create=function(n,i,r,u,f){return new t(n,{OriginalName:i,FilePath:r,Comment:u||"",FldID:at.DalFields.BISURI,AddedDate:pi.FutureDate,RemovedDate:pi.FutureDate,externalLinkContext:f})},t.prototype.getArtifactLinkType=function(){return this.linkData.OriginalName},t.prototype.getLinkedArtifactUri=function(){return this.linkData.FilePath},t.prototype.clone=function(n){return t.create(n,this.getArtifactLinkType(),this.getLinkedArtifactUri(),this.getComment())},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&pt.equals(this.getLinkedArtifactUri(),i.getLinkedArtifactUri(),!0)&&pt.equals(this.getArtifactLinkType(),i.getArtifactLinkType(),!0)}return!1},t}(bi);t.ExternalLink=ir;lr=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.baseLinkType="HyperLink",r}return __extends(t,n),t.create=function(n,i,r){return new t(n,{OriginalName:"",FilePath:i,Comment:r||"",FldID:at.DalFields.LinkedFiles,AddedDate:pi.FutureDate,RemovedDate:pi.FutureDate})},t.prototype.getArtifactLinkType=function(){return"Workitem Hyperlink"},t.prototype.getLocation=function(){return this.linkData.FilePath},t.prototype.clone=function(n){return t.create(n,this.getLocation(),this.getComment())},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&pt.equals(this.getLocation(),i.getLocation(),!0)}return!1},t}(bi);t.Hyperlink=lr;wi=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.baseLinkType="WorkItemLink",r}return __extends(t,n),t.create=function(n,i,r,u,f,e){var o,s;return typeof i=="object"?o=i.id:(s=n.store.findLinkTypeEnd(i),o=s.id),new t(n,{ID:r,LinkType:o,Comment:u||"",FldID:at.DalFields.RelatedLinks,"Changed Date":pi.FutureDate,"Revised Date":pi.FutureDate,isAddedBySystem:f,RemoteHostUrl:e&&e.remoteHostUrl,RemoteProjectId:e&&e.remoteProjectId,RemoteHostId:e&&e.remoteHostId,RemoteHostName:e&&e.remoteHostName})},t.prototype.getSourceId=function(){return this.workItem.id},t.prototype.getTargetId=function(){return this.linkData.ID},t.prototype.getAddedDate=function(){return this.linkData["Changed Date"]},t.prototype.getAddedBy=function(){return this.linkData["Changed By"]},t.prototype.getRemovedDate=function(){return this.linkData["Revised Date"]},t.prototype.setRemovedDate=function(n){this.linkData["Revised Date"]=n},t.prototype.getRemovedBy=function(){return this.linkData["Revised By"]||-1},t.prototype.getLinkType=function(){return this.linkData.LinkType},t.prototype.getLinkTypeEnd=function(){return this.linkTypeEnd||(this.linkTypeEnd=this.workItem.store.findLinkTypeEnd(this.getLinkType())),this.linkTypeEnd},t.prototype.clone=function(n){var r=this.getLinkTypeEnd(),i=r.linkType,u;if(i&&i.isActive&&i.topology!=="Unknown"&&!(i.isOneToMany&&r.isForwardLink))return u={remoteHostId:this.remoteHostId,remoteHostName:this.remoteHostName,remoteHostUrl:this.remoteHostUrl,remoteProjectId:this.remoteProjectId},t.create(n,r,this.getTargetId(),this.getComment(),!1,u)},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&this.getLinkType()===i.getLinkType()&&this.getTargetId()===i.getTargetId()&&this.getSourceId()===i.getSourceId()&&this.remoteHostId===i.remoteHostId&&this.remoteProjectId===i.remoteProjectId}return!1},t}(bi);t.WorkItemLink=wi;rr=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.baseLinkType="Attachment",r.uploaded=!0,r}return __extends(t,n),t.prototype.getPlaceholderStatus=function(){return this.isPlaceholder},t.create=function(n,i,r,u,f,e,o,s){var h;return s?(h=new t(n,{OriginalName:i,Comment:"",ExtID:0,FldID:at.DalFields.AttachedFiles,Length:f,CreationDate:new Date,LastWriteDate:new Date,AddedDate:pi.FutureDate,RemovedDate:pi.FutureDate}),h.isPlaceholder=!0):(h=new t(n,{OriginalName:i,FilePath:r,Comment:u||"",ExtID:0,FldID:at.DalFields.AttachedFiles,Length:f,CreationDate:e||new Date,LastWriteDate:o||new Date,AddedDate:pi.FutureDate,RemovedDate:pi.FutureDate}),h.isPlaceholder=!1),h},t.prototype.clone=function(n){return t.create(n,this.linkData.OriginalName,this.linkData.FilePath,this.linkData.Comment,this.linkData.Length,this.linkData.CreationDate,this.linkData.LastWriteDate)},t.prototype.resolvePlaceholder=function(n,t,i){this.isPlaceholder=!1;this.linkData.FilePath=n;t!=null&&(this.linkData.CreationDate=t);i!=null&&(this.linkData.LastWriteDate=i);this._fireChanged()},t.prototype.getName=function(){return this.linkData.OriginalName},t.prototype.setName=function(n){this.linkData.OriginalName=n;this._fireChanged()},t.prototype.getLength=function(){return this.linkData.Length},t.prototype.setLength=function(n){this.linkData.Length=n;this._fireChanged()},t.prototype.getFilePath=function(){return this.linkData.FilePath},t.prototype.setFilePath=function(n){this.linkData.FilePath=n;this._fireChanged()},t.prototype.getUri=function(n){var t=this.workItem.project.store.tfsConnection.getHttpClient(ei.WorkItemTrackingHttpClient),i=this.workItem.project.guid,r=this.getName();return t.getAttachmentUrl(i,this.getFilePath(),r,n)},t.prototype.getContent=function(){var n=c.getClient(),t=this.workItem.project.guid,i=this.getName();return n.getAttachmentContent(this.getFilePath(),i,t,!0)},t.prototype.open=function(){ti.getService().performAction(ti.CommonActions.ACTION_WINDOW_OPEN,{url:this.getUri(!1),target:"_blank"})},t.prototype.save=function(){ti.getService().performAction(ti.CommonActions.ACTION_WINDOW_OPEN,{url:this.getUri(!0),target:"_blank"})},t.prototype._uploadComplete=function(n,t,i){this.uploaded=!0;this.linkData.OriginalName=n;this.linkData.FilePath=t;this.linkData.Length=i;this._fireChanged()},t.prototype.isDuplicate=function(){return!1},t}(bi);t.Attachment=rr,function(n){n[n.Value=1]="Value";n[n.CurrentValue=2]="CurrentValue";n[n.OriginalValue=4]="OriginalValue";n[n.OtherFieldCurrentValue=8]="OtherFieldCurrentValue";n[n.OtherFieldOriginalValue=16]="OtherFieldOriginalValue";n[n.CurrentUser=32]="CurrentUser";n[n.Clock=64]="Clock"}(di=t.RuleValueFrom||(t.RuleValueFrom={}));gr=function(){function n(n,t,i,r,u,f,e){this.executionPhase=tt.RuleEvaluatorExecutionPhase.DefaultRules;this.userChange=!1;this.valueLocked=!1;this.setByRule=!1;this.valueChanged=!1;this.setByDefaultRule=!1;this.setByComputedRule=!1;this.readOnly=!1;this.empty=!1;this.required=!1;this.frozen=!1;this.cannotLoseValue=!1;this.otherFields={};this.allowExistingValue=!1;this.validUser=!1;this.serverDefault=!1;this.isIdentityField=!1;this.whenCount=0;this.fieldId=n;this.workItem=t;this.field=i;this.value=r;this.originalValue=u;this.valueLocked=f;this.userChange=f;this.evalState=e;this.isIdentityField=i.fieldDefinition.isIdentity}return n.compareLists=function(n,t){var r,i;if(n!==t){if(!n||!t||(r=n.length,r!==t.length))return!1;for(i=0;i<r;i++)if(n[i].items!==t[i].items||n[i].globals!==t[i].globals)return!1}return!0},n.compareFieldLists=function(t,i){return t!==i&&(!t||!i||t.allowExistingValue!==i.allowExistingValue||!n.compareLists(t.allowedValues,i.allowedValues)||!n.compareLists(t.suggestedValues,i.suggestedValues)||!n.compareLists(t.prohibitedValues,i.prohibitedValues))?!1:!0},n.prototype.setExecutionPhase=function(n){this.executionPhase=n},n.prototype.evaluate=function(n){try{n&&(this.setExecutionPhase(tt.RuleEvaluatorExecutionPhase.CopyRules),this.Block(n),this.setExecutionPhase(tt.RuleEvaluatorExecutionPhase.DefaultRules),this.Block(n),this.setExecutionPhase(tt.RuleEvaluatorExecutionPhase.OtherRules),this.Block(n));this.validate()}catch(t){var i="Error occured in Rule Engine Evaluate. Name: ".concat(t.Name," Message: ").concat(t.message," Rules.length: ").concat(n.length," Rules.Information: ").concat(n.toString()," Stack: ").concat(t.stack);a.publishErrorToTelemetry(new Error(i))}},n.prototype.Block=function(n){for(var t,i=0,f=n.length,r,u;i<f;)r=n[i++],u=n[i++]||[],(t=this[r])===null||t===void 0?void 0:t.apply(this,u)},n.prototype.BlockWhenChangedProhibitedValuesOnly=function(n,t){for(var r=0,e=t.length,u,i,f;r<e;)u=t[r++],i=t[r++]||[],u==="ProhibitedValues"&&i[0]&&(f=i[0].filter(function(t){return t!==n}),this.ProhibitedValues(f,i[1]))},n.prototype.When=function(n,t,i,r,u){i=this._getValueFrom(r,i);var f=this._isIdentityField(t),e=r==di.Value&&f;(this._areValuesEqual(t,this._getFieldValue(t,!1),i,!0,e)?!n:n)&&(this.whenCount++,this.Block(u),this.whenCount--)},n.prototype.WhenWas=function(n,t,i,r,u){i=this._getValueFrom(r,i);var f=this._isIdentityField(t),e=r==di.Value&&f;(this._areValuesEqual(t,this._getFieldValue(t,!0),i,!0,e)?!n:n)&&(this.whenCount++,this.Block(u),this.whenCount--)},n.prototype.WhenChanged=function(n,t,i){var r=this._areValuesEqual(t,this._getFieldValue(t,!1),this._getFieldValue(t,!0),!0);(r?n:!n)?(this.whenCount++,this.Block(i),this.whenCount--):t!=ru||!r||n||y.FeatureAvailabilityService.isFeatureEnabled(u.FeatureAvailabilityFlags.TypeScriptRuleEngineStateTransitionFilteringDisabled)||(this.whenCount++,this.BlockWhenChangedProhibitedValuesOnly(this._getFieldValue(t,!0),i),this.whenCount--)},n.prototype.WhenBecameNonEmpty=function(n,t,i){(this._areValuesEqual(t,this._getFieldValue(t,!0),null,!0)&&!this._areValuesEqual(t,this._getFieldValue(t,!1),null,!0)?!n:n)&&(this.whenCount++,this.Block(i),this.whenCount--)},n.prototype.WhenRemainedNonEmpty=function(n,t,i){(this._areValuesEqual(t,this._getFieldValue(t,!0),null,!0)||this._areValuesEqual(t,this._getFieldValue(t,!1),null,!0)?n:!n)&&(this.whenCount++,this.Block(i),this.whenCount--)},n.prototype.OtherField=function(n,t,i){if(this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules){var r=this._getFieldValue(n,i);this.otherFields[n]=r;this.otherFieldCheck=t;t==="same-as"&&!this.userChange&&i&&(this.value=r,this.setByRule=!0,this.valueChanged=!0)}},n.prototype.Map=function(n,t,i,r){var e=this,h,u,c,f,s,l,o;this.executionPhase===tt.RuleEvaluatorExecutionPhase.CopyRules&&(h=this._getFieldValue(n,!1),t?(s=this.evalState[n+""],l=s&&s.prevValue!==undefined?s.prevValue:this._getFieldValue(n,!1),this._areValuesEqual(n,this._getFieldValue(n,!1),l,!0)||this.userChange||(i!=null&&$.each(i,function(t,i){return i.values&&$.each(i.values,function(t,r){if(e._areValuesEqual(n,h,r,!0))return o=i.case,!1}),o?!1:void 0}),o===undefined||this._areValuesEqual(n,o,this.value,!0)||(this.value=o,this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0))):(this.userChange||(i!=null&&$.each(i,function(t,i){if(e._areValuesEqual(n,h,i.case,!0))return u=i,!1}),u||(u=r),u&&(c=!1,u.values&&$.each(u.values,function(t,i){if(e._areValuesEqual(n,i,e.value,!0))return c=!0,!1}),c||(u.default?bt.contains(u.values,this.originalValue)?(this.value=this.originalValue,this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0):this._areValuesEqual(n,u.default,this.value,!0)||(this.value=u.default,this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0):(this.value=u.values&&u.values[0],this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0)))),this.allowedValues||(this.allowedValues=[]),f=[],i!=null&&$.each(this._getAllowedValues(n),function(t,r){var u;$.each(i,function(t,i){if(e._areValuesEqual(n,r,i.case,!0))return u=i,!1});u&&(f=yi.union(f,u.values,!0))}),r&&(f=yi.union(f,r.values,!0)),this.allowedValues.push({items:f})))},n.prototype.AllowExistingValue=function(){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.allowExistingValue=!0)},n.prototype.ReadOnly=function(){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.readOnly=!0,this.userChange||(this.value=this.originalValue,this.setByRule=!0,this.valueChanged=!0))},n.prototype.Empty=function(){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.empty=!0,this.userChange||(this.value=undefined,this.setByRule=!0,this.valueChanged=!0))},n.prototype.Required=function(){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.required=!0)},n.prototype.Frozen=function(){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.frozen=!0,!this.userChange&&this.originalValue&&(this.value=this.originalValue,this.setByRule=!0,this.valueChanged=!0))},n.prototype.CannotLoseValue=function(){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.cannotLoseValue=!0)},n.prototype.ValidUser=function(){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.validUser=!0)},n.prototype.Copy=function(n,t){this.executionPhase===tt.RuleEvaluatorExecutionPhase.CopyRules&&(this.valueLocked||(this.value=this._getValueFrom(n,t),this.valueLocked=!0,this.setByRule=!0,this.valueChanged=!0))},n.prototype.Default=function(n,t){this.executionPhase===tt.RuleEvaluatorExecutionPhase.DefaultRules&&(this.valueLocked||yi.isEmpty(this.value)&&(this.value=this._getValueFrom(n,t),this.valueLocked=!0,this.setByRule=!0,this.setByDefaultRule=!0,this.valueChanged=!0))},n.prototype.AllowedValues=function(n,t){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.allowedValues||(this.allowedValues=[]),n&&bt.flagSorted(n,pt.localeIgnoreCaseComparer),this.allowedValues.push({items:n,globals:t}))},n.prototype.SuggestedValues=function(n,t){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.suggestedValues||(this.suggestedValues=[]),n&&bt.flagSorted(n,pt.localeIgnoreCaseComparer),this.suggestedValues.push({items:n,globals:t}))},n.prototype.ProhibitedValues=function(n,t){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.prohibitedValues||(this.prohibitedValues=[]),n&&bt.flagSorted(n,pt.localeIgnoreCaseComparer),this.prohibitedValues.push({items:n,globals:t}))},n.prototype.Match=function(n,t){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.patterns||(this.patterns=[]),n&&bt.flagSorted(n,pt.localeIgnoreCaseComparer),this.patterns.push({items:n,globals:t}))},n.prototype.ServerDefault=function(n){this.executionPhase===tt.RuleEvaluatorExecutionPhase.CopyRules&&(this.value=new ki(n,this.originalValue),this.serverDefault=!0,this.valueLocked=!0,this.setByRule=!0,this.setByDefaultRule=!0,this.valueChanged=!0)},n.prototype.Computed=function(n){if(this.executionPhase===tt.RuleEvaluatorExecutionPhase.DefaultRules&&!this.valueLocked){var t=this.workItem.computeFieldValue(this.field,n);t&&t.success&&(this.value=t.value,this.valueLocked=!0,this.setByRule=!0,this.setByComputedRule=!0,this.valueChanged=!0)}},n.prototype.Trigger=function(n){var t=this;this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&n&&(this.triggerFields||(this.triggerFieldMap={},this.triggerFields=[]),$.each(n,function(n,i){var r=i+"";t.triggerFieldMap.hasOwnProperty(r)||(t.triggerFieldMap[r]=!0,t.triggerFields.push(i))}))},n.prototype.ScopedIdentity=function(n,t,i,r,u){this.executionPhase===tt.RuleEvaluatorExecutionPhase.OtherRules&&(this.whenCount>0||!this.filterByScope)&&(this.filterByScope=new yr(i,t,n,r,u))},n.prototype.validate=function(){var i,t=this.field,r,e,s,y,h,it,c,p,l,w,o,a,b,k,v,d,g;this.originalFieldStatus=t.status;t.status=tt.FieldStatusFlags.None;var u=t.workItem.store,f=yi.convertValueToInternal(u,this.originalValue,t.fieldDefinition.type),nt=yi.convertValueToInternal(u,this.value,t.fieldDefinition.type);if(i=nt.value,t.status|=nt.status,this.setByRule&&(t._setValue(i,this.setByRule),t.status|=tt.FieldStatusFlags.SetByRule),this.setByDefaultRule&&(t.status|=tt.FieldStatusFlags.SetByDefaultRule),this.setByComputedRule&&(t.status|=tt.FieldStatusFlags.SetByComputedRule),(this.readOnly||this.serverDefault||this.empty)&&(t.status|=tt.FieldStatusFlags.ReadOnly),this.cannotLoseValue&&(yi.isEmpty(this.originalValue)||(this.required=!0)),this.required&&(t.status|=tt.FieldStatusFlags.Required),r={},r.allowedValues=this.allowedValues,this.allowedValues&&this.allowedValues.length>0&&(t.status|=tt.FieldStatusFlags.HasValues,t.status|=tt.FieldStatusFlags.LimitedToValues),r.suggestedValues=this.suggestedValues,this.suggestedValues&&this.suggestedValues.length>0&&(t.status|=tt.FieldStatusFlags.HasValues,t.status&=~tt.FieldStatusFlags.LimitedToValues),r.prohibitedValues=this.prohibitedValues,r.allowExistingValue=this.allowExistingValue,n.compareFieldLists(t.lists,r)||(t.lists=r,t.allowedValues=null),this.allowExistingValue&&(t.status|=tt.FieldStatusFlags.AllowsOldValue),this.patterns&&this.patterns.length>0)for(e=yi.unionLists(u,this.patterns[0].items,this.patterns[0].globals),s=0,y=this.patterns;s<y.length;s++)o=y[s],e=yi.intersect(e,yi.unionLists(u,o.items,o.globals),!0);if(t.fieldDefinition.isIdentity&&(t.filterByScope=this.filterByScope),t.patterns=e,e&&(t.status|=tt.FieldStatusFlags.HasFormats),yi.isEmpty(i)){if(!this.empty){if(t.isRequired()){t.status|=tt.FieldStatusFlags.Required;t.status|=tt.FieldStatusFlags.InvalidEmpty;return}if(typeof this.otherFieldCheck!="undefined")for(h in this.otherFields)if(yi.isEmpty(this.otherFields[h])){if(this.otherFieldCheck==="not-same-as"){t.status|=tt.FieldStatusFlags.Required;t.status|=tt.FieldStatusFlags.InvalidValueNotInOtherField;return}}else if(this.otherFieldCheck==="same-as"){t.status|=tt.FieldStatusFlags.Required;t.status|=tt.FieldStatusFlags.InvalidValueInOtherField;return}}return}if(this.empty){t.status&=~tt.FieldStatusFlags.ReadOnly;t.status|=tt.FieldStatusFlags.InvalidNotEmpty;return}if(this.readOnly&&!this.serverDefault&&!this.setByDefaultRule&&!this._areValuesEqual(t.fieldDefinition.id,i,f.value)){t.status|=tt.FieldStatusFlags.InvalidNotOldValue;return}if(typeof this.otherFieldCheck!="undefined")for(h in this.otherFields)if(this._areValuesEqual(t.fieldDefinition.id,i,this.otherFields[h])){if(this.otherFieldCheck==="not-same-as"){t.status|=tt.FieldStatusFlags.InvalidValueInOtherField;return}}else if(this.otherFieldCheck==="same-as"){t.status|=tt.FieldStatusFlags.InvalidValueNotInOtherField;return}if(this.frozen&&!yi.isEmpty(f.value)&&!this._areValuesEqual(t.fieldDefinition.id,i,f.value)){t.status|=tt.FieldStatusFlags.InvalidNotEmptyOrOldValue;return}if(t.fieldDefinition.type===at.FieldType.TreePath&&!this.workItem.isChangeProjectInProgress()&&(it=this.workItem.project.nodesCacheManager.getReferencedNode({path:i,nodeType:t.fieldDefinition.id===at.CoreField.AreaPath?1:2}),!it)){this.workItem.project.nodesCacheManager.isNodesCacheAvailable()?t.status|=tt.FieldStatusFlags.InvalidPath:this.workItem.project.nodesCacheManager.beginGetNodes().then(function(){t.setValue(i,{forceEvaluate:!0})});return}if(!(this.serverDefault||i instanceof ki)){if(c=i===undefined||i===null?"":""+i,t.patterns){for(p=!1,l=0,w=t.patterns;l<w.length;l++)if(o=w[l],yi.isMatch(o,c)){p=!0;break}if(!p){t.status|=tt.FieldStatusFlags.InvalidFormat;return}}if(r.prohibitedValues)for(a=0,b=r.prohibitedValues;a<b.length;a++)if(k=b[a],yi.inList(u,c,k.items,k.globals,!0)){t.status|=tt.FieldStatusFlags.InvalidListValue;return}if(this.allowExistingValue&&!yi.isEmpty(f.value)&&this._areValuesEqual(t.fieldDefinition.id,i,f.value))return;if(r.allowedValues)for(v=0,d=r.allowedValues;v<d.length;v++)if(g=d[v],!yi.inList(u,c,g.items,g.globals,!0)){t.status|=tt.FieldStatusFlags.InvalidListValue;return}}},n.prototype._isIdentityField=function(n){var t=this.workItem.getField(n);return t&&t.fieldDefinition.isIdentity},n.prototype._getFieldValue=function(n,t){return n===this.fieldId?t?this.originalValue:this.value:this.workItem._getFieldValueById(n,t)},n.prototype._getValueFrom=function(n,t){switch(n){case di.Clock:return new Date;case di.CurrentUser:return this.workItem.store.getCurrentUserName();case di.OtherFieldOriginalValue:return this._getFieldValue(t,!0);case di.OtherFieldCurrentValue:return this._getFieldValue(t,!1);case di.Value:return t;case di.CurrentValue:return this.value;case di.OriginalValue:return this.originalValue;default:return t}},n.prototype._areValuesEqual=function(n,t,i,r,u){return this.workItem.fieldMapById[n]&&this.workItem.fieldMapById[n].fieldDefinition.type==at.FieldType.Boolean&&(t=this._translateToBoolData(t),i=this._translateToBoolData(i)),yi.compareValues(t,i,r,u)},n.prototype._translateToBoolData=function(n){return n&&(n==1||String(n).toLowerCase()==="true")?1:0},n.prototype._getAllowedValues=function(n){return this.workItem.getField(n).getAllowedValues()},n}();vr=function(){function n(n,t){var i,u;if(this.workItem=n,this.fieldRules={},t)for(i=0,u=t;i<u.length;i++){var f=u[i],e=f.fieldId+"",r=this.fieldRules[e];r||(this.fieldRules[e]=r=[]);r.push("Block");r.push([f.rules])}}return n.prototype.evaluateFields=function(n){var r={},t,i,u;if(n)for(t=0,i=n;t<i.length;t++)u=i[t],this._evaluateFieldRule(u,r,!1);return this._evalStateToChangedFields(r)},n.prototype.evaluateField=function(n,t,i){var r={};return this._evaluateFieldRule(n,r,t,i),this._evalStateToChangedFields(r)},n.prototype._evalStateToChangedFields=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(+i);return t},n.prototype._evaluateFieldRule=function(n,t,i,r){var c=this,f=this.workItem.getField(n),e,o;if(f){var u=n+"",s=f._getValue(),h=!1;t[u]&&t[u].requiresControlUpdate&&(h=!0);t[u]={state:!0,prevValue:r===undefined?s:r,requiresControlUpdate:!1||h};e=new gr(n,this.workItem,f,s,f._getValue(!0),i||!1,t);e.evaluate(this.fieldRules[u]);o=void 0;o=i?!0:!yi.compareValues(s,f._getValue());o&&(t[u].requiresControlUpdate=!0);o&&e.triggerFields&&$.each(e.triggerFields,function(n,i){var r=t[i+""];r&&r.state||c._evaluateFieldRule(i,t,!1)});t[u].state=!1}},n}();t.RuleEngine=vr;ki=function(){function n(n,t){this.type=tt.ServerDefaultValueType.None;this.type=n;this.value=t}return n.prototype.toString=function(){return""+this.value},n.prototype.valueOf=function(){return this.value},n}();t.ServerDefaultValue=ki;sr=function(){function n(n,t,i){this.fieldId=n;this.fieldValue=t;this.scope=i}return n.prototype.toString=function(){return JSON.stringify({fieldId:this.fieldId,fieldValue:this.fieldValue,scope:{filterByScope:p.FilterByScope.GetHashCode(this.scope),nonIdentities:this.scope&&this.scope.nonIdentities,excludeGroups:this.scope&&this.scope.excludeGroups}})},n.prototype.equals=function(n){return n.toString()===this.toString()},n}();t.FieldValidationKey=sr;yr=function(n){function t(t,i,r,u,f){var e=__construct(this,n,[t,i]);for(var o in e)e.hasOwnProperty(o)&&(this[o]=e[o]);return e.nonIdentities=r||[],e.displayNames=u||[],e.excludeGroups=f||!1,e}return __extends(t,n),t.equals=function(n,t){var i,r,u,f;return n==null&&t==null?!0:p.FilterByScope.GetHashCode(n)!==p.FilterByScope.GetHashCode(t)?!1:(i=n.nonIdentities==null?0:n.nonIdentities.length,r=t.nonIdentities==null?0:t.nonIdentities.length,i!=r)?!1:(u=n.nonIdentities==null?"":n.nonIdentities.sort().join(","),f=t.nonIdentities==null?"":t.nonIdentities.sort().join(","),pt.equals(u,f,!0))},t}(p.FilterByScope);t.WorkItemIdentityScope=yr;nu="WITData";pr=function(){function n(n,t){this._tfsContext=n;this._cacheStampManager=t;this._workItemIndexDBCacheManager=new f.WorkItemIndexDBCacheManager;this._cacheInformationManager=new it.WorkItemMetadataCacheInformationManager;this._dataSources=d.getDataSources(n,t,this._cacheInformationManager)}return n.prototype.beginGetWorkItemData=function(n,t,i,r){var u=this;return this._getDataFromSource(function(f){return f.beginGetWorkItemData(u._tfsContext.navigation.projectId,n,t,i,r)})},n.prototype.beginGetLinkTypes=function(){return this._getDataWithCache(this._tfsContext.navigation.collection.instanceId,at.WITCommonConstants.LinkTypes,"_",function(n){return n.beginGetLinkTypes()})},n.prototype.beginGetFieldProjectData=function(n){return this._getDataWithCache(n,at.WITCommonConstants.TeamProjects,n,function(t){return t.beginGetFieldProjectData(n)})},n.prototype.beginGetFields=function(){return(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync({action:"fields",controller:"wit"},null,this._tfsContext.navigation.collection.instanceId,at.WITCommonConstants.Fields,"_").then(function(n){return n.data})},n.prototype.beginGetWorkItemTypeData=function(n,t){var i=this;return y.FeatureAvailabilityService.isFeatureEnabled(u.FeatureAvailabilityFlags.DisableWorkItemTypesSplittedLoading)?t.length===1?this._getDataWithCache(n,at.WITCommonConstants.WorkItemTypes,t[0],function(i){return i.beginGetWorkItemTypeData(n,t)}):this._getDataFromSource(function(i){return i.beginGetWorkItemTypeData(n,t)}).then(function(t){return i._cacheStampManager.getMetadataCacheStamp(at.WITCommonConstants.WorkItemTypes).then(function(r){return Promise.all(t.map(function(t){return i._workItemIndexDBCacheManager.cacheData(n,at.WITCommonConstants.WorkItemTypes,i._transformKey(t.name),[t],r).then(function(t){t&&i._cacheInformationManager&&i._cacheInformationManager.persist(n,at.WITCommonConstants.WorkItemTypes,t,r)}).catch(function(n){o.traceMessage(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"CacheData",ai.WITCustomerIntelligenceFeature.WIT_CACHE_PROVIDER_INIT,n)})})).then(function(){return t})})}):(new e.WorkItemStoreLevelWITDataSource).getDataFromCacheAsync({action:"workItemTypes",controller:"wit"},{projectId:n,typeNames:t},n,at.WITCommonConstants.WorkItemTypes,"_").then(function(n){return n.data})},n.prototype._getDataWithCache=function(n,t,i,r){var u=this;return i=this._transformKey(i),this._cacheStampManager.getMetadataCacheStamp(t).then(function(f){return u._workItemIndexDBCacheManager.getDataFromCache(n,t,i,f).then(function(n){return n?{resolvedFromCache:!0,data:n}:u._getDataFromSource(r).then(function(n){return{resolvedFromCache:!1,data:n}})}).then(function(r){var s=r.resolvedFromCache,e=r.data;return e&&!s?u._workItemIndexDBCacheManager.cacheData(n,t,i,e,f).then(function(i){return i&&u._cacheInformationManager&&u._cacheInformationManager.persist(n,t,i,f),e}).catch(function(n){return o.traceMessage(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"CacheData",ai.WITCustomerIntelligenceFeature.WIT_CACHE_PROVIDER_INIT,n),e}):e})})},n.prototype._getDataFromSource=function(n,t){return t===void 0&&(t=0),__awaiter(this,void 0,void 0,function(){var i,r,u,f=this;return __generator(this,function(e){switch(e.label){case 0:return(i=function(){return t+1<f._dataSources.length?f._getDataFromSource(n,t+1):null},r=n(this._dataSources[t]),!!r)?[3,1]:[2,i()];case 1:return[4,r];case 2:return(u=e.sent(),!u)?[2,i()]:[2,u]}})})},n.prototype._transformKey=function(n){return n.toLowerCase()},n.prototype._recordTelemetry=function(n,t,i,r,u,f){hi.publishEvent(new hi.TelemetryEventData(ai.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,nu,{scopeId:n,type:t,key:i,stamp:r,message:u,cachedData:f}))},n._resolvedPromise=Promise.resolve(null),n}();t.WorkItemDataManager=pr;rt.registerLinkForms();i.tfsModuleLoaded("TFS.WorkItemTracking",t)});

define("WorkItemTracking/Scripts/Utils/CommentUtils",["require","exports","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Diag","VSS/Utils/Url","VSS/VSS","q"],function(n,t,i,r,u,f,e){function o(n){var t=n.getField(i.CoreField.History);return t.isDirty()}function s(n){return n.fieldDefinition.id===i.CoreField.AreaPath||n.fieldDefinition.id===i.CoreField.IterationPath}function h(n){var r,v,t,w,b,u,y;if(n===null||!o(n)||n.isNew())return e.reject(new Error("Incorrect state for saving comments"));n.fireWorkItemPreSave();n.fireWorkItemSaving();var k=n.getDirtyFields(),p=n.getLinkUpdates(),h={},c={},l={},a={};for(r=0,v=k;r<v.length;r++)t=v[r],w=t.fieldDefinition.id,s(t)&&(l[t.fieldDefinition.id]=t.getValue()),t.isUserChange()?h[t.fieldDefinition.id]=t.getValue():c[t.fieldDefinition.id]=t.getValue(),t.fieldDefinition.isIdentity&&(a[w]=t.status);return b=n.getFieldValue(i.CoreField.History),n.resetChanges(!0),n.setFieldValue(i.CoreField.History,b),u=e.defer(),y=function(t){var u,f,r,e;for(u in c)r=n.getField(u),(t||r.fieldDefinition.id!==i.CoreField.History)&&n.setFieldValue(r.fieldDefinition.id,c[u],!0);for(u in h)r=n.getField(u),(t||r.fieldDefinition.id!==i.CoreField.History)&&n.setFieldValue(r.fieldDefinition.id,h[u]);p!==null&&n._restoreLinkUpdates(p);n.evaluate();for(u in l)r=n.getField(u),n.setFieldValue(r.fieldDefinition.id,l[u]);for(f in a)r=n.getField(f),e=a[f],r.status=e,n.fireFieldChange([f])},f.using(["WorkItemTracking/Scripts/Utils/RelatedLinksUtils"],function(t){t.parseMentionsFromHtmlFields(n,!0);n.beginSilentSave().then(function(){y(!1);n.fireWorkItemSaved();n.fireWorkItemSaveComplete();u.resolve(null)},function(t){y(!0);n.setError(t);n.fireWorkItemSaveComplete();u.reject(t)})}),u.promise}function c(n){n.find("a").each(function(n,t){var i=$(t);u.isExternalUrl(i.attr("href"))&&i.attr({target:"_blank",rel:"noopener noreferrer"})})}Object.defineProperty(t,"__esModule",{value:!0});t.sanitizeExternalLinks=t.saveComments=t.hasCommentChanged=void 0;t.hasCommentChanged=o;t.saveComments=h;t.sanitizeExternalLinks=c});

define("WorkItemTracking/Scripts/Utils/VsUrlProcessor",["require","exports","Presentation/Scripts/TFS/TFS.Host.TfsContext"],function(n,t,i){function r(n){var u=n.html(),t=/x-mvwit:workitem\/([0-9]+)/.exec(u);if(t&&t.length>1){var f=t[1],r=i.TfsContext.getDefault(),e=r.getPublicActionUrl("edit","workitems",{parameters:+f,project:r.navigation.project||r.navigation.projectId,team:""});n.html(u.replace(new RegExp(t[0],"g"),e))}}Object.defineProperty(t,"__esModule",{value:!0});t.vsUrlprocessHtml=void 0;t.vsUrlprocessHtml=r});

define("WorkItemTracking/Scripts/Utils/RichTextPreRenderUtility",["require","exports","Mention/Scripts/TFS.Mention","VSS/VSS","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Utils/CommentUtils","WorkItemTracking/Scripts/Utils/VsUrlProcessor"],function(n,t,i,r,u,f,e){function h(n,t,i,u){return new Promise(function(o,s){r.using(["Mention/Scripts/TFS.Mention.WorkItems","Mention/Scripts/TFS.Mention.People","Mention/Scripts/TFS.Mention.PullRequest"],function(r,h,c){var l=$(n),a,v;r.WorkItemMentionProcessor.filterHtml(l);e.vsUrlprocessHtml(l);u&&f.sanitizeExternalLinks(l);c.PullRequestLinkProcessor.processHtml(l);a=h.PeopleMentionProcessor.processHtml(l,t);v=r.WorkItemMentionProcessor.processHtml(l,i);Promise.all([a,v]).then(function(){o(l.html())}).catch(function(n){return s(n)})},s)})}function o(n){return new Promise(function(t){var i=$("<div/>").append(n);r.using(["Mention/Scripts/TFS.Mention.WorkItems"],function(n){n.WorkItemMentionProcessor.filterHtml(i);t(i.html())})})}function c(n,t,i){o(n).then(function(n){var r=$(t);r.html(n);s(r,!0,i)})}function s(n,t,i){r.using(["Mention/Scripts/TFS.Mention.WorkItems","Mention/Scripts/TFS.Mention.People","Mention/Scripts/TFS.Mention.PullRequest"],function(r,u,o){u.PeopleMentionProcessor.processHtml(n,t);r.WorkItemMentionProcessor.processHtml(n,i);o.PullRequestLinkProcessor.processHtml(n);e.vsUrlprocessHtml(n);f.sanitizeExternalLinks(n)})}function l(n,t,i){return new Promise(function(u){r.using(["Mention/Scripts/TFS.Mention.WorkItems","Mention/Scripts/TFS.Mention.People","Mention/Scripts/TFS.Mention.PullRequest"],function(r,o,s){o.PeopleMentionProcessor.processHtmlBatch(n,t).then(function(n){u(n)});r.WorkItemMentionProcessor.processHtml(n,i);s.PullRequestLinkProcessor.processHtml(n);e.vsUrlprocessHtml(n);f.sanitizeExternalLinks(n)})})}function a(n){var f=[i.Constants.HTML_MENTION_ATTR_NAME,i.Constants.HTML_RENDERED_MENTION_ATTR_NAME],e=n.indexOf(i.Constants.HTML_RENDERED_MENTION_ATTR_NAME)>=0,t,r;return e&&f.push("class"),t=u.Field.normalizeHtmlValue(n,f,["height","white-space","word-wrap","float"]),e&&(r=$("<div/>").html(t),r.find("[class]").filter(function(){return $(this).closest("[".concat(i.Constants.HTML_RENDERED_MENTION_ATTR_NAME,"]")).length===0}).removeAttr("class"),t=r.html()),n.indexOf(i.Constants.HTML_MENTION_ATTR_NAME)!==-1&&(r=$("<div/>").html(t),r.find("a[".concat(i.Constants.HTML_MENTION_ATTR_NAME,"][href='']")).attr("href","#"),t=r.html()),t}Object.defineProperty(t,"__esModule",{value:!0});t.normalizeHtmlValue=t.richTextPreRenderProcessorWithPeopleMentions=t.richTextPreRenderProcessor=t.processHtmlWithMentions=t.richTextFilterContent=t.richTextFilterContentAndPreRender=void 0;t.richTextFilterContentAndPreRender=h;t.richTextFilterContent=o;t.processHtmlWithMentions=c;t.richTextPreRenderProcessor=s;t.richTextPreRenderProcessorWithPeopleMentions=l;t.normalizeHtmlValue=a});

define("WorkItemTracking/Scripts/Utils/RelatedLinksUtils",["require","exports","WorkItemTracking/Scripts/TFS.WorkItemTracking","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/Utils/PerfScenarioManager","VSS/Utils/String","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Diag","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Mention/Scripts/TFS.Mention.WorkItems","Mention/Scripts/WorkItem/WorkItemMentionUtilities","Mention/Scripts/TFS.Mention"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function b(n,t){t===void 0&&(t=!1);try{Object.keys(n.fieldUpdates).forEach(function(i){var f=n.fieldMapById[i],r=f.getValue(),e,s,c;typeof r=="string"&&r.indexOf(y.Constants.HTML_MENTION_ATTR_NAME)!==-1&&(f.fieldDefinition.type!==h.FieldType.History&&(f.fieldDefinition.type!==h.FieldType.Html||t)||(e=w(r),r!==e&&f.setValue(e,!0),n.store.linkTypes&&n.store.linkTypes.length>0&&(s=u.PerfScenarioManager.startScenario(o.WITPerformanceScenario.WORKITEM_RELATED_LINKING,!1),r&&(c=$("<p>"+r+"<\/p>"),a.WorkItemsMentionParser.getDefault().parseFromHtml(c,function(t,i){i&&k(n,i,f.fieldDefinition.type)}),s.addSplitTiming(o.PerformanceEvents.WORKITEMRELATED_LINKING_COMPLETE),u.PerfScenarioManager.endScenario(o.WITPerformanceScenario.WORKITEM_RELATED_LINKING)))))})}catch(i){s.logError(i)}}function w(n){if(!d())return n;var t=$("<span>"+n+"<\/span>");return a.WorkItemsMentionParser.getDefault().parseFromHtml(t,function(n,t){if(t){var i=v.getWorkItemMentionText(t.workItemId);n.text()!==i&&n.text(i)}}),t.html()}function k(n,t,u){var o,s;if(t&&n.id!==t.workItemId&&(o=n.getLinks(),o)&&(s=o.some(function(n){var r,u;return(n instanceof i.WorkItemLink)?(r=n,u=r.getLinkTypeEnd(),!u)?!1:u.name.toLowerCase()===p.toLowerCase()&&r.getTargetId()===t.workItemId:!1}),!s)){var c=r.TfsContext.getDefault().currentIdentity.displayName,l=f.format(u===h.FieldType.History?e.WorkItemDiscussionMentionLinkComment:e.WorkItemHtmlFieldMentionLinkComment,c,t.workItemId,n.id),a=i.WorkItemLink.create(n,p,t.workItemId,l);n.addLink(a)}}function d(){return c.FeatureAvailabilityService.isFeatureEnabled(l.FeatureAvailabilityFlags.HideTypeAndTitleInWorkItemMentions,!1)}Object.defineProperty(t,"__esModule",{value:!0});t.removeTypeAndTitleFromWorkItemMentions=t.parseMentionsFromHtmlFields=void 0;var p="Related";t.parseMentionsFromHtmlFields=b;t.removeTypeAndTitleFromWorkItemMentions=w});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsClient",["require","exports","TFS/WorkItemTracking/Contracts","VSS/Service","VSS/Context","TFS/WorkItemTracking/RestClient","VSS/Diag","WorkItemTracking/Scripts/Utils/RichTextPreRenderUtility","WorkItemTracking/Scripts/Utils/WitControlMode","WorkItemTracking/Scripts/Utils/RelatedLinksUtils"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.CommentsClient=void 0;var c=function(){function n(n){this._workItem=n;this._client=r.getCollectionClient(f.WorkItemTrackingHttpClient,u.getDefaultWebContext())}return n.prototype._getSafeHtmlMessage=function(n){return n?o.normalizeHtmlValue(n):""},n.prototype.getComment=function(n){var t=this._workItem;return this._client.getComment(t.project.guid,t.id,n,!1,s.isCommentReactionsEnabled()?i.CommentExpandOptions.Reactions:null)},n.prototype.addComment=function(n){var r=this,t=this._workItem,i;return n=h.removeTypeAndTitleFromWorkItemMentions(n),i={text:n},this._client.addComment(i,t.project.guid,t.id).then(function(n){return n.text=r._getSafeHtmlMessage(n.text),n})},n.prototype.updateComment=function(n,t){var u=this,i=this._workItem,r;return t=h.removeTypeAndTitleFromWorkItemMentions(t),r={text:t},this._client.updateComment(r,i.project.guid,i.id,n).then(function(n){return n.text=u._getSafeHtmlMessage(n.text),n})},n.prototype.deleteComment=function(n){var t=this._workItem;return this._client.deleteComment(t.project.guid,t.id,n).then(function(){return t.id})},n.prototype.getComments=function(n,t,r){var f=this,u;return t===void 0&&(t=!1),r===void 0&&(r=""),u=this._workItem,this._client.getComments(u.project.guid,u.id,n,r,t,s.isCommentReactionsEnabled()?i.CommentExpandOptions.Reactions:null).then(function(n){return n.comments.forEach(function(n){return n.text=f._getSafeHtmlMessage(n.text)}),n})},n.prototype.addCommentReaction=function(n,t){var i=this._workItem;return this._client.createCommentReaction(i.project.guid,i.id,n,t)},n.prototype.deleteCommentReaction=function(n,t){var i=this._workItem;return this._client.deleteCommentReaction(i.project.guid,i.id,n,t)},n.prototype.getReactionRecentUsers=function(n,t){var i=this._workItem;return this._client.getEngagedUsers(i.project.guid,i.id,n,t,100)},n}();t.CommentsClient=c});

define("VSS/Flux/Store",["require","exports","VSS/Events/Handlers"],function(n,t,i){var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.RemoteStore=t.DefaultStore=t.Store=void 0;r=function(){function n(){this._changedHandlers=new i.EventHandlerList;this._namedEventCollection=new i.NamedEventCollection}return n.prototype.addChangedListener=function(n){this._changedHandlers.subscribe(n)},n.prototype.removeChangedListener=function(n){this._changedHandlers.unsubscribe(n)},n.prototype.emitChanged=function(){this._changedHandlers.invokeHandlers(this)},n.prototype.emit=function(n,t,i){this._namedEventCollection.invokeHandlers(n,t,i)},n.prototype.addListener=function(n,t){this._namedEventCollection.subscribe(n,t)},n.prototype.removeListener=function(n,t){this._namedEventCollection.unsubscribe(n,t)},n}();t.Store=r;u=function(n){function t(){var t=__construct(this,n,[]),i,r;for(i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return r=t.getAction(),r!==null&&r.addListener(t.onChange,t),t}return __extends(t,n),t.prototype.getAction=function(){return null},t.prototype.onChange=function(n){this._value=n;this.emitChanged()},t.prototype.getValue=function(){return this._value},t}(r);t.DefaultStore=u;f=function(n){function t(){var t=__construct(this,n,[]);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._loading=!0,t._error=null,t}return __extends(t,n),t.prototype.isLoading=function(){return this._loading},t.prototype.hasError=function(){return this._error!==null},t.prototype.getError=function(){return this._error},t.prototype.onError=function(n){this._error=n;this.emitChanged()},t}(r);t.RemoteStore=f});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsStore",["require","exports","VSS/Flux/Store","VSS/Utils/Date","VSS/Context"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.CommentsStore=void 0;var f=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._actionListenerPairs=[],i._comments=[],i._commentIdToComment={},i._totalComments=0,i._lastContinuationToken="",i._hasFirstPage=!1,i._isPaging=!1,i._updatingComments={},i._commentIdToReaction={},i._addListenerToActionsHub(t.commentAdded,i._addComment),i._addListenerToActionsHub(t.commentsRetrieved,i._appendComments),i._addListenerToActionsHub(t.commentUpdated,i._updateComment),i._addListenerToActionsHub(t.commentDeleted,i._deleteComment),i._addListenerToActionsHub(t.commentReset,i._resetComments),i._addListenerToActionsHub(t.commentPaging,i._pagingComment),i._addListenerToActionsHub(t.commentUpdating,i._commentUpdating),i._addListenerToActionsHub(t.commentReactionAdded,i._addCommentReaction),i._addListenerToActionsHub(t.commentReactionDeleted,i._deleteCommentReaction),i._addListenerToActionsHub(t.commentReactionRecentUsersRetrieved,i._commentReactionRecentUsersReceived),i._currentUserContext=u.getPageContext().webContext.user,i}return __extends(t,n),t.prototype.getCommentReactions=function(n){var t,i,r;return this._commentIdToReaction[n]||(t={},i=this._commentIdToComment[n],i!=null&&(r=this._comments[i].reactions,r&&r.forEach(function(n){if(n){var i={totalCount:n.count,isCurrentUserEngaged:n.isCurrentUserEngaged,engagedUsers:[]};t[n.type]=i}})),this._commentIdToReaction[n]={reactionTypeToInfoMap:t}),this._commentIdToReaction[n]},t.prototype.getComments=function(){return this._comments.filter(function(n){return!n.isDeleted})},t.prototype.hasFirstPage=function(){return this._hasFirstPage},t.prototype.getTotalComments=function(){return this._totalComments},t.prototype.getVisibleCommentCount=function(){return this._comments.length},t.prototype.getLastContinuationToken=function(){return this._lastContinuationToken},t.prototype.isPaging=function(){return this._isPaging},t.prototype.isCommentUpdating=function(n){return!!this._updatingComments[n]},t.prototype.getAdjacentCommentId=function(n){var t=this.getComments(),i=t.findIndex(function(t){return t.id===n});return i<0||t.length<=1?-1:i<t.length-1?t[i+1].id:t[i-1].id},t.prototype.dispose=function(){this._actionListenerPairs&&(this._actionListenerPairs.forEach(function(n){return n.action.removeListener(n.listener)}),this._actionListenerPairs=null)},t.prototype._pagingComment=function(){this._isPaging||(this._isPaging=!0,this.emitChanged())},t.prototype._commentUpdating=function(n){if(this._updatingComments[n.commentId]=!0,n.value!=null){var t=this._commentIdToComment[n.commentId];t!=null&&(this._comments[t].text=n.value)}this.emitChanged()},t.prototype._addComment=function(n){var t=this._commentIdToComment[n.id];t==null?(this._comments.unshift(n),this._commentIdToComment=this._comments.reduce(function(n,t,i){return n[t.id]=i,n},{}),++this._totalComments):this._comments[t]=n;this.emitChanged()},t.prototype._resetComments=function(n){this._comments=[];this._commentIdToComment={};this._totalComments=0;this._lastContinuationToken="";this._hasFirstPage=!1;this._commentIdToReaction={};this._appendComments(n)},t.prototype._appendComments=function(n){var t,i,u,r,f;for(this._lastContinuationToken=n.continuationToken,this._hasFirstPage||(this._hasFirstPage=!0,this._totalComments=n.totalCount),t=this._comments.slice(),i=0,u=n.comments;i<u.length;i++)r=u[i],f=this._commentIdToComment[r.id],f==null?t.push(r):t[f]=r;t.sort(this._sortLatestCommentsFirst);this._commentIdToComment=t.reduce(function(n,t,i){return n[t.id]=i,n},{});this._comments=t;this._isPaging=!1;this.emitChanged()},t.prototype._sortLatestCommentsFirst=function(n,t){return r.defaultComparer(t.createdDate,n.createdDate)},t.prototype._deleteComment=function(n){var i=this._commentIdToComment[n],t;i!=null&&(t=this._comments[i],t.isDeleted||(--this._totalComments,t.isDeleted=!0),this._updatingComments[t.id]=!1,this.emitChanged())},t.prototype._updateComment=function(n){var t=this._commentIdToComment[n.id];t!=null&&(n&&(n.reactions==null?n.reactions=this._comments[t].reactions:delete this._commentIdToReaction[n.id]),this._comments[t]=n,this._updatingComments[n.id]=!1,this.emitChanged())},t.prototype._addCommentReaction=function(n){this._updateCommentReaction(n,!0)},t.prototype._deleteCommentReaction=function(n){this._updateCommentReaction(n,!1)},t.prototype._updateCommentReaction=function(n,t){var r=n.reactionResponse,f=r.type,e=this._commentIdToReaction[r.commentId].reactionTypeToInfoMap,i=e[f];if(n.isClientUpdate&&i){var u=i.engagedUsers,h=t?1:-1,o=this._currentUserContext.id,c=this._currentUserContext.name,s=u.findIndex(function(n){return n.identityId.toUpperCase()===o.toUpperCase()});s!==-1&&u.splice(s,1);i.totalCount=i.totalCount+h;i.isCurrentUserEngaged=t;t&&u.unshift({identityId:o,identityDisplayName:c})}else e[f]={totalCount:r.count,isCurrentUserEngaged:r.isCurrentUserEngaged,engagedUsers:[]};this.emitChanged()},t.prototype._commentReactionRecentUsersReceived=function(n){var u=n.commentId,t=n.reactionType,i=n.engagedUsers,r=this._commentIdToReaction[u].reactionTypeToInfoMap;r[t].engagedUsers=i;r[t].totalCount=i.length;this.emitChanged()},t.prototype._addListenerToActionsHub=function(n,t){this._actionListenerPairs.push({action:n,listener:t});n.addListener(t,this)},t}(i.Store);t.CommentsStore=f});

define("VSS/Flux/Action",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.Action=void 0;var i="DEFAULT_SCOPE",r=function(){function n(n){n===void 0&&(n=i);this._listeners=[];this._scope=n}return n.prototype.invoke=function(t){if(n.executingScopes[this._scope])throw new Error("Cannot invoke an action with scope ".concat(this._scope," from inside another action with the same scope"));n.executingScopes[this._scope]=!0;try{this._listeners.forEach(function(n){n&&n(t)})}finally{delete n.executingScopes[this._scope]}},n.prototype.addListener=function(n,t){var i=t?n.bind(t):n;return this._listeners.push(i),i},n.prototype.removeListener=function(n){var t=this._listeners.indexOf(n);t>=0&&this._listeners.splice(t,1)},n.executingScopes={},n}();t.Action=r});

define("VSS/Flux/Diag",["require","exports","VSS/Flux/Action","VSS/Context"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.registerDiagActions=void 0;var u=function(n){if(!!r.getPageContext().diagnostics.tracePointCollectionEnabled){var t=function(){for(var e,u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];var t=new n(u),o=t,f=t.constructor?t.constructor.name:"",s=function(n){var r,u;t.hasOwnProperty(n)&&(r=t[n],r instanceof i.Action&&(u=f?"".concat(f,".").concat(n):n,r.addListener(function(n){var t=(new Error).stack||"",i=new CustomEvent("ACTION_FIRED",{detail:{actionName:u,payload:n,stack:t,timestamp:new Date}});document.dispatchEvent(i)})))};for(e in o)s(e);return t};return t.prototype=n.prototype,t}return n};t.registerDiagActions=u});

var __decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u};define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentActionsHub",["require","exports","VSS/Flux/Action","VSS/Flux/Diag"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.CommentActionsHub=void 0;var u=function(){function n(){this.commentAdded=new i.Action;this.commentsRetrieved=new i.Action;this.commentUpdated=new i.Action;this.commentDeleted=new i.Action;this.commentReset=new i.Action;this.commentPaging=new i.Action;this.commentUpdating=new i.Action;this.commentReactionAdded=new i.Action;this.commentReactionDeleted=new i.Action;this.commentReactionRecentUsersRetrieved=new i.Action}return __decorate([r.registerDiagActions],n)}();t.CommentActionsHub=u});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentActionsCreator",["require","exports","VSS/VSS","WorkItemTracking/Scripts/OM/WorkItemConstants","VSS/Events/Services"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.CommentActionsCreator=t.DEFAULT_COMMENTS_PAGE_SIZE=void 0;t.DEFAULT_COMMENTS_PAGE_SIZE=50;var f=function(){function n(n,t){var r=this;this._actionsHub=n;this._client=t;this.addCommentReaction=function(n,t){r._client.addCommentReaction(n,t).then(function(n){r._actionsHub.commentReactionAdded.invoke({isClientUpdate:!1,reactionResponse:n})},i.handleError);var u={commentId:n,count:1,isCurrentUserEngaged:!0,type:t,_links:null,url:null};r._actionsHub.commentReactionAdded.invoke({isClientUpdate:!0,reactionResponse:u})};this.deleteCommentReaction=function(n,t){r._client.deleteCommentReaction(n,t).then(function(n){r._actionsHub.commentReactionDeleted.invoke({isClientUpdate:!1,reactionResponse:n})},i.handleError);var u={commentId:n,count:0,isCurrentUserEngaged:!1,type:t,_links:null,url:null};r._actionsHub.commentReactionDeleted.invoke({isClientUpdate:!0,reactionResponse:u})};this.getRecentlyReactedUsers=function(n,t){r._client.getReactionRecentUsers(n,t).then(function(i){r._actionsHub.commentReactionRecentUsersRetrieved.invoke({commentId:n,reactionType:t,engagedUsers:i.map(function(n){return{identityId:n.id,identityDisplayName:n.displayName}})})},i.handleError)}}return n.prototype.getLatestComment=function(){var n=this;this._client.getComments(1,!1,"").then(function(t){var i=t.comments[0];i&&n._actionsHub.commentAdded.invoke(i)},i.handleError)},n.prototype.getComment=function(n){var t=this;this._client.getComment(n).then(function(n){t._actionsHub.commentUpdated.invoke(n)},i.handleError)},n.prototype.pageComments=function(n,r){var u=this;(r===void 0&&(r=t.DEFAULT_COMMENTS_PAGE_SIZE),n!=null)&&(this._actionsHub.commentPaging.invoke(null),this._client.getComments(r,!1,n).then(function(n){u._actionsHub.commentsRetrieved.invoke(n)},i.handleError))},n.prototype.resetComments=function(n){var r=this;n===void 0&&(n=t.DEFAULT_COMMENTS_PAGE_SIZE);this._actionsHub.commentPaging.invoke(null);this._client.getComments(n,!1,"").then(function(n){r._actionsHub.commentReset.invoke(n)},i.handleError)},n.prototype.deleteComment=function(n){var t=this;this._actionsHub.commentUpdating.invoke({commentId:n});this._client.deleteComment(n).then(function(i){t._actionsHub.commentDeleted.invoke(n);u.getService().fire(r.Actions.DISCUSSION_DELETED,t,{workItemId:i})},i.handleError)},n.prototype.updateComment=function(n,t){var f=this;this._actionsHub.commentUpdating.invoke({commentId:n,value:t});this._client.updateComment(n,t).then(function(n){f._actionsHub.commentUpdated.invoke(n);u.getService().fire(r.Actions.DISCUSSION_UPDATED,f,{workItemId:n.workItemId})},i.handleError)},n.prototype.addComment=function(n){var t=this;this._client.addComment(n).then(function(n){t._actionsHub.commentAdded.invoke(n);u.getService().fire(r.Actions.DISCUSSION_UPDATED,t,{workItemId:n.workItemId})},i.handleError)},n}();t.CommentActionsCreator=f});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsCacheService",["require","exports","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsClient","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsStore","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentActionsHub","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentActionsCreator","VSS/Navigation/HubsService","VSS/Events/Services"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.CommentsCacheService=void 0;var s=function(){function n(){}return n.getStore=function(t){var i=n._getOrSetCommentServiceCache(t);return i.store},n.getActionsCreator=function(t){var i=n._getOrSetCommentServiceCache(t);return i.actionsCreator},n._getOrSetCommentServiceCache=function(t){var s;if(t){if(s=n._cache.get(t),!s){var c=new i.CommentsClient(t),h=new u.CommentActionsHub,l=new f.CommentActionsCreator(h,c),a=new r.CommentsStore(h);s={actionsCreator:l,store:a};n._cache.set(t,s);n._attachedDispose||(n._attachedDispose=!0,o.getService().attachEvent(e.HubEventNames.PreXHRNavigate,n._disposeCache))}return s}},n._disposeCache=function(){o.getService().detachEvent(e.HubEventNames.PreXHRNavigate,n._disposeCache);n._attachedDispose=!1;n._cache.forEach(function(n){n&&n.store.dispose()});n._cache.clear()},n._cache=new Map,n}();t.CommentsCacheService=s});

define("VSS/Flux/Component",["require","exports","react","VSS/Utils/Core"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.Component=void 0;var u=0,f=function(n){function t(t,i){var u=__construct(this,n,[t,i]);for(var f in u)u.hasOwnProperty(f)&&(this[f]=u[f]);return u.state=u.getState(),u._changeDelegate=r.delegate(u,u.onChange),u}return __extends(t,n),t.prototype.getKey=function(n){return u+=1,"".concat(n).concat(u)},t.prototype.getState=function(){return null},t.prototype.onChange=function(){var n=this.getState();this.setState(n)},t.prototype.getStore=function(){return null},t.prototype.componentDidMount=function(){var n=this.getStore();n&&n.addChangedListener(this._changeDelegate)},t.prototype.componentWillUnmount=function(){var n=this.getStore();n&&n.removeChangedListener(this._changeDelegate)},t}(i.Component);t.Component=f});

define("VSS/Identities/Picker/PersonaCardContracts",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.personaCardEntity=t.CardType=void 0,function(n){n[n.Default=0]="Default";n[n.Contact=1]="Contact";n[n.Organization=2]="Organization"}(i=t.CardType||(t.CardType={})),function(n){n.contactCard="ContactCard";n.clicked="Clicked";n.featureName="PersonaCard";n.loaded="Loaded";n.orgCard="OrgCard";n.orgCardManagerChain="OrgCardManagerChain";n.orgCardDirectReport="OrgCardDirectReport";n.personaCard="PersonaCard";n.reportingManager="ReportingManager"}(r=t.personaCardEntity||(t.personaCardEntity={}))});

define("VSS/Identities/Picker/ContactCard",["require","exports","react","OfficeFabric/Label","VSS/Identities/Picker/PersonaCardContracts","VSS/Resources/VSS.Resources.Platform","VSS/Utils/String","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e){var o,s;Object.defineProperty(t,"__esModule",{value:!0});t.ContactCard=t.ContactCardContactLine=void 0;o=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this;return i.createElement("div",null,i.createElement("div",{className:this.props.padTop?"contact-card-line-top":"contact-card-line"},i.createElement("div",{className:"contact-card-span-label"},this.props.label),i.createElement("div",{className:"contact-card-span-content"},this.props.link&&this.props.content&&i.createElement("a",{className:"profile-card-tab-element",href:this.props.link,onClick:function(){n.props.publishTelemetry(e.format("{0}",n.props.label),u.personaCardEntity.clicked)}},this.props.content),!this.props.link&&this.props.content)),i.createElement("div",{style:{clear:"both"}}))},t}(i.Component);t.ContactCardContactLine=o;s=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this.props.identity;return i.createElement("div",{className:"contact-or-organization-card-wrapper"},i.createElement("div",{className:"contact-card-header-wrapper"},i.createElement("div",{style:{fontSize:14}},i.createElement(r.Label,null,f.ProfileCard_ContactInformation))),i.createElement("div",{className:"contact-card-info-wrapper"},i.createElement(o,{label:f.ProfileCard_Email,content:n.mail,link:"mailto:"+n.mail,publishTelemetry:this.props.publishTelemetry}),i.createElement(o,{label:f.ProfileCard_TelephoneNumber,content:n.telephoneNumber,link:"tel:"+n.telephoneNumber,publishTelemetry:this.props.publishTelemetry}),i.createElement(o,{label:f.ProfileCard_PhysicalDeliveryOfficeName,content:n.physicalDeliveryOfficeName}),i.createElement(o,{label:f.ProfileCard_JobTitle,content:n.jobTitle,padTop:!0}),i.createElement(o,{label:f.ProfileCard_Department,content:n.department}),i.createElement(o,{label:f.ProfileCard_Alias,content:n.mailNickname})))},t}(i.Component);t.ContactCard=s});

define("VSS/Identities/Picker/DefaultCard",["require","exports","react","OfficeFabric/Icon","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Label","OfficeFabric/Tooltip","VSS/Identities/Picker/PersonaCardContracts","VSS/Resources/VSS.Resources.Platform","VSS/Utils/String","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o,s,h,c){var l,a;Object.defineProperty(t,"__esModule",{value:!0});t.DefaultCard=t.DefaultCardContactLine=void 0;l=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this;return i.createElement("div",{className:"default-card-contact-line-wrapper"},i.createElement(e.Label,{className:"default-card-contact-line"},i.createElement(r.Icon,{iconName:this.props.iconName,className:"default-card-contact-line-label"}),this.props.link&&i.createElement("a",{href:this.props.link,className:"default-card-contact-line-link profile-card-tab-element",onClick:function(){n.props.publishTelemetry(c.format("{0}",n.props.iconName),s.personaCardEntity.clicked)}},this.props.content),!this.props.link&&i.createElement("span",{className:"default-card-contact-line-no-link"},this.props.content)))},t}(i.Component);t.DefaultCardContactLine=l;a=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.componentDidMount=function(){this.props.setFocus&&this.props.setFocus()},t.prototype.render=function(){var r=this,v=this.props,n=v.identity,p=v.isPreviousHeader,c={imageUrl:this.props.identity.image,primaryText:this.props.identity.displayName,secondaryText:this.props.identity.jobTitle,tertiaryText:this.props.identity.department},w=i.createElement("div",null,i.createElement(u.Persona,__assign({},c,{key:this.props.identity.entityId+this.props.identity.signInAddress,size:f.PersonaSize.large,className:"persona-main",onRenderPrimaryText:function(){return i.createElement(o.TooltipHost,{key:"".concat(r.props.identity.entityId,".primarytext.tooltip"),content:c.primaryText,overflowMode:o.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-primary"},c.primaryText))},onRenderSecondaryText:function(){return i.createElement(o.TooltipHost,{key:"".concat(r.props.identity.entityId,".secondarytext.tooltip"),content:c.secondaryText,overflowMode:o.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-secondary"},c.secondaryText))},onRenderTertiaryText:function(){return i.createElement("div",{className:"persona-main-text-tertiary"},c.tertiaryText)},imageShouldFadeIn:!1}))),y=null,t,a;return this.props.manager&&(t=this.props.manager,a={imageUrl:t.image,primaryText:t.displayName,secondaryText:t.jobTitle,tertiaryText:t.department},y=i.createElement("div",{className:"persona-list-manager-element profile-card-tab-element","aria-label":t.displayName,key:t.entityId+t.signInAddress,onClick:function(){r.props.publishTelemetry(s.personaCardEntity.personaCard,s.personaCardEntity.loaded,s.personaCardEntity.reportingManager);r.props.onClickEntity(t)},"data-is-focusable":!0,role:"button"},i.createElement(u.Persona,__assign({},a,{size:f.PersonaSize.size40,onRenderPrimaryText:function(){return i.createElement("div",{className:"persona-list-element-text-primary"},a.primaryText)},onRenderSecondaryText:function(){return i.createElement("div",{className:"persona-list-element-text-secondary"},a.secondaryText)},imageShouldFadeIn:!1})))),i.createElement("div",{className:p?"default-card-with-header":"default-card-without-header"},w,i.createElement("div",null,(n.mail||n.telephoneNumber||n.physicalDeliveryOfficeName)&&i.createElement("div",{className:"default-card-contact-info-wrapper"},i.createElement("hr",{className:"hr-main"}),i.createElement("div",{className:"default-card-header-wrapper"},i.createElement("span",{className:"default-card-header pointer profile-card-tab-element",onClick:function(){r.props.publishTelemetry(s.personaCardEntity.contactCard,s.personaCardEntity.loaded);r.props.showContactCard()},"aria-label":h.ProfileCard_ContactHeader,"data-is-focusable":!0,role:"button"},i.createElement(e.Label,{className:"pointer"},i.createElement("b",{className:"default-card-header-space"},h.ProfileCard_ContactHeader),i.createElement("span",{className:"icon bowtie-icon bowtie-chevron-right-light default-card-header-chevron"})))),i.createElement("div",{className:"default-card-contact-info-container"},n.mail&&i.createElement(l,{iconName:"Mail",content:n.mail,link:"mailto:"+n.mail,publishTelemetry:this.props.publishTelemetry}),n.mail&&i.createElement(l,{iconName:"Chat",content:h.ProfileCard_SendChat,link:"sip:"+n.mail,publishTelemetry:this.props.publishTelemetry}),n.telephoneNumber&&i.createElement(l,{iconName:"Phone",content:n.telephoneNumber,link:"tel:"+n.telephoneNumber,publishTelemetry:this.props.publishTelemetry}),n.physicalDeliveryOfficeName&&i.createElement(l,{iconName:"POI",content:n.physicalDeliveryOfficeName}))),this._renderDirectManagerElement(y)))},t.prototype._renderDirectManagerElement=function(n){var t=this;return n?i.createElement("div",{className:"default-card-direct-manager-wrapper"},i.createElement("hr",{className:"hr-secondary"}),i.createElement("div",{className:"default-card-header-wrapper"},i.createElement("span",{className:"default-card-header pointer profile-card-tab-element",onClick:function(){t.props.publishTelemetry(s.personaCardEntity.orgCard,s.personaCardEntity.loaded);t.props.showOrganizationCard()},"aria-label":h.ProfileCard_Organization,"data-is-focusable":!0,role:"button"},i.createElement(e.Label,{className:"pointer"},i.createElement("b",{className:"default-card-header-space"},h.ProfileCard_Organization),i.createElement("span",{className:"icon bowtie-icon bowtie-chevron-right-light default-card-header-chevron"})))),i.createElement("div",{className:"default-card-direct-manager"},i.createElement("div",{className:"default-card-header-reportsto"},h.ProfileCard_ReportsToHeader),n)):null},t}(i.Component);t.DefaultCard=a});

define("VSS/Identities/Picker/DefaultAbridgedCard",["require","exports","react","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Label","OfficeFabric/Tooltip","VSS/Identities/Picker/DefaultCard","VSS/Resources/VSS.Resources.Platform","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.DefaultAbridgedCard=void 0;var h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var t=this,n={imageUrl:this.props.identity.image,primaryText:this.props.identity.displayName},h=i.createElement("div",null,i.createElement(r.Persona,__assign({},n,{key:this.props.identity.entityId,size:u.PersonaSize.large,className:"persona-main",onRenderPrimaryText:function(){return i.createElement(e.TooltipHost,{key:"".concat(t.props.identity.entityId,".primarytext.tooltip"),content:n.primaryText,overflowMode:e.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-primary"},n.primaryText))},imageShouldFadeIn:!1})));return i.createElement("div",{className:"default-card-abridged"},h,this._verifySignInAddress()&&i.createElement("div",null,i.createElement("div",{className:"default-card-contact-info-wrapper"},i.createElement("hr",{className:"hr-main"}),i.createElement("div",{className:"default-card-header-wrapper"},i.createElement("span",{className:"default-card-header"},i.createElement(f.Label,null,i.createElement("b",{className:"default-card-header-space"},s.ProfileCard_ContactHeader)))),i.createElement("div",{className:"default-card-contact-info-container"},i.createElement(o.DefaultCardContactLine,{iconName:"Mail",content:this.props.identity.signInAddress,link:"mailto:"+this.props.identity.signInAddress,publishTelemetry:this.props.publishTelemetry}),i.createElement(o.DefaultCardContactLine,{iconName:"Chat",content:s.ProfileCard_SendChat,link:"sip:"+this.props.identity.signInAddress,publishTelemetry:this.props.publishTelemetry})))))},t.prototype._verifySignInAddress=function(){if(!this.props.identity.signInAddress)return!1;return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(this.props.identity.signInAddress)?!0:!1},t}(i.Component);t.DefaultAbridgedCard=h});

define("VSS/Identities/Picker/DefaultSimpleCard",["require","exports","react","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Tooltip","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});t.DefaultSimpleCard=void 0;var e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var t=this,n={imageUrl:this.props.identity.image,primaryText:this.props.identity.displayName,secondaryText:this.props.identity.scopeName&&this.props.identity.signInAddress?this.props.identity.scopeName+"\\"+this.props.identity.signInAddress:this.props.identity.signInAddress?this.props.identity.signInAddress:""};return i.createElement("div",{className:"default-card-simple"},i.createElement("div",null,i.createElement(r.Persona,__assign({},n,{key:this.props.identity.entityId,size:u.PersonaSize.large,className:"persona-main",onRenderPrimaryText:function(){return i.createElement(f.TooltipHost,{key:"".concat(t.props.identity.entityId,".primarytext.tooltip"),content:n.primaryText,overflowMode:f.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-primary"},n.primaryText))},onRenderSecondaryText:function(){return i.createElement(f.TooltipHost,{key:"".concat(t.props.identity.entityId,".secondarytext.tooltip"),content:n.secondaryText,overflowMode:f.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-main-text-secondary"},n.secondaryText))},imageShouldFadeIn:!1}))))},t}(i.Component);t.DefaultSimpleCard=e});

define("VSS/Identities/Picker/OrganizationCard",["require","exports","react","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Label","VSS/Identities/Picker/PersonaCardContracts","VSS/Resources/VSS.Resources.Platform","VSS/Utils/String","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o,s){Object.defineProperty(t,"__esModule",{value:!0});t.OrganizationCard=void 0;var h=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.render=function(){var n=this.props,u=n.identity,e=n.managerList,h=n.directReportList,r=this.createManagerChainPersonaElements(),t=this.createDirectReportsPersonaElements();return i.createElement("div",{className:"contact-or-organization-card-wrapper"},i.createElement("div",{className:"organization-card-content"},i.createElement("div",{className:"organization-card-header-wrapper"},i.createElement("div",{style:{fontSize:14}},i.createElement(f.Label,null,o.ProfileCard_Organization))),i.createElement("div",{className:"organization-card-manager-chain-wrapper"},r),t.length>0&&i.createElement("div",{className:"organization-card-direct-reports-wrapper"},i.createElement(f.Label,{className:"organization-card-direct-reports-label"},s.format(o.ProfileCard_ReportingToPhrase,this.props.identity.displayName,this.props.directReportList.length)),t)))},t.prototype.createManagerChainPersonaElements=function(){var o=this,n=this,f=this.props.managerList.map(function(t){var f={imageUrl:t.image,primaryText:t.displayName?t.displayName:"",secondaryText:t.jobTitle?t.jobTitle:"",tertiaryText:t.department?t.department:""};return i.createElement("div",{className:"persona-list-element profile-card-tab-element","aria-label":t.displayName,key:t.entityId+t.signInAddress,onClick:function(){n.props.publishTelemetry(e.personaCardEntity.orgCardManagerChain,e.personaCardEntity.loaded,e.personaCardEntity.orgCard);n.props.onClickEntity(t)},"data-is-focusable":!0,role:"button"},i.createElement(r.Persona,__assign({},f,{size:u.PersonaSize.size40,onRenderPrimaryText:function(){return i.createElement("div",{className:"persona-list-element-text-primary"},f.primaryText)},onRenderSecondaryText:function(){return i.createElement("div",{className:"persona-list-element-text-secondary"},f.secondaryText)},imageShouldFadeIn:!1})))}),t={imageUrl:this.props.identity.image,primaryText:this.props.identity.displayName,secondaryText:this.props.identity.jobTitle,tertiaryText:this.props.identity.department};return f.push(i.createElement("div",{className:"persona-list-element profile-card-tab-element","aria-label":this.props.identity.displayName,key:this.props.identity.entityId+this.props.identity.signInAddress,onClick:function(){n.props.publishTelemetry(e.personaCardEntity.personaCard,e.personaCardEntity.loaded,e.personaCardEntity.orgCard);n.props.onClickEntity(o.props.identity)},"data-is-focusable":!0,role:"button"},i.createElement(r.Persona,__assign({},t,{size:u.PersonaSize.size40,onRenderPrimaryText:function(){return i.createElement("div",{className:"persona-list-element-text-primary"},t.primaryText)},onRenderSecondaryText:function(){return i.createElement("div",{className:"persona-list-element-text-secondary"},t.secondaryText)},imageShouldFadeIn:!1})))),f},t.prototype.createDirectReportsPersonaElements=function(){var n=this;return this.props.directReportList.map(function(t){var f={imageUrl:t.image,primaryText:t.displayName?t.displayName:"",secondaryText:t.jobTitle?t.jobTitle:"",tertiaryText:t.department?t.department:""};return i.createElement("div",{className:"persona-list-element profile-card-tab-element","aria-label":t.displayName,key:t.entityId+t.signInAddress,onClick:function(){n.props.publishTelemetry(e.personaCardEntity.orgCardDirectReport,e.personaCardEntity.loaded,e.personaCardEntity.orgCard);n.props.onClickEntity(t)},"data-is-focusable":!0,role:"button"},i.createElement(r.Persona,__assign({},f,{size:u.PersonaSize.size40,onRenderPrimaryText:function(){return i.createElement("div",{className:"persona-list-element-text-primary"},f.primaryText)},onRenderSecondaryText:function(){return i.createElement("div",{className:"persona-list-element-text-secondary"},f.secondaryText)},imageShouldFadeIn:!1})))})},t}(i.Component);t.OrganizationCard=h});

define("VSS/Identities/Picker/PersonaCardIdentityUtils",["require","exports","VSS/Identities/Picker/Services"],function(n,t,i){function s(n){return n?r(n)||u(n)?!!(n.mail||n.mailNickname||n.jobTitle||n.department||n.physicalDeliveryOfficeName||n.manager||n.surname||n.telephoneNumber):f(n)||e(n)?!!n.signInAddress:o(n)?!!(n.scopeName||n.signInAddress):!1:!1}function r(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.AzureActiveDirectory}function u(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.ActiveDirectory}function f(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.VisualStudioDirectory}function e(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.GitHubDirectory}function o(n){return n&&n.originDirectory.trim().toLowerCase()===i.ServiceHelpers.WindowsMachineDirectory}Object.defineProperty(t,"__esModule",{value:!0});t.isWmdUser=t.isGitHubUser=t.isVsdUser=t.isAdUser=t.isAadUser=t.isCompleteIdentity=void 0;t.isCompleteIdentity=s;t.isAadUser=r;t.isAdUser=u;t.isVsdUser=f;t.isGitHubUser=e;t.isWmdUser=o});

define("VSS/Identities/Picker/PersonaCardHeaderElement",["require","exports","react","OfficeFabric/components/Persona/Persona","OfficeFabric/components/Persona/Persona.types","OfficeFabric/Icon","OfficeFabric/Tooltip","VSS/Resources/VSS.Resources.Platform","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o){Object.defineProperty(t,"__esModule",{value:!0});t.PersonaCardHeaderElement=void 0;var s=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.componentDidMount=function(){this.props.setFocus()},t.prototype.componentDidUpdate=function(){this.props.setFocus()},t.prototype.render=function(){var s=this,n,t;return this.props.identity?(n=this.props.identity,t={imageUrl:n.image,primaryText:n.displayName,secondaryText:n.jobTitle,tertiaryText:n.department},i.createElement("div",{className:"go-back-persona-wrapper",onClick:this.props.onClickFunction,"aria-label":o.ProfileCard_HeaderButtonAriaLabel,ref:function(n){s._personaElement=n},"data-is-focusable":!0,role:"button"},i.createElement("div",null,i.createElement(f.Icon,{iconName:"ChevronLeft",className:"go-back-chevron"})),i.createElement("div",{className:"go-back-positioning"},i.createElement(r.Persona,__assign({},t,{size:u.PersonaSize.extraExtraSmall,className:"go-back-persona",onRenderPrimaryText:function(){return i.createElement(e.TooltipHost,{key:"".concat(n.entityId,".tooltip"),content:n.displayName,overflowMode:e.TooltipOverflowMode.Parent},i.createElement("span",{className:"persona-header-text-primary"},n.displayName))},imageShouldFadeIn:!1}))))):null},t.prototype.setFocus=function(){this._personaElement&&this._personaElement.focus()},t}(i.Component);t.PersonaCardHeaderElement=s});

define("VSS/Identities/Picker/PersonaCardContent",["require","exports","react","OfficeFabric/Callout","OfficeFabric/FocusZone","OfficeFabric/Spinner","OfficeFabric/Utilities","VSSUI/Util","VSS/Context","VSS/Identities/Picker/ContactCard","VSS/Identities/Picker/DefaultAbridgedCard","VSS/Identities/Picker/DefaultSimpleCard","VSS/Identities/Picker/DefaultCard","VSS/Identities/Picker/OrganizationCard","VSS/Identities/Picker/PersonaCardContracts","VSS/Identities/Picker/PersonaCardIdentityUtils","VSS/Identities/Picker/PersonaCardHeaderElement","VSS/Resources/VSS.Resources.Platform","VSS/Telemetry/Services","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){Object.defineProperty(t,"__esModule",{value:!0});t.PersonaCardContent=void 0;var g=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t._onFocusZoneRef=function(n){t._focusZone=n;t._focusOnUpdate()},t._focusOnUpdate=function(){var i=t.props.dataProps.directReportList,n=t.props.dataProps.identity,r=p.isAadUser(n),u=p.isAdUser(n),f=p.isVsdUser(n);t.props.dataProps.cardType===y.CardType.Default&&i?t._focusZone.focus():t.props.dataProps.cardType!==y.CardType.Default&&t._focusZone.focus()},t._onDismissCallout=function(){t.props.onDismissCallback&&t.props.onDismissCallback()},t._publishTelemetry=function(n,i,r){var f=s.getPageContext().navigation.routeId,u={Action:d.format("{0}{1}",n,i)};t.props.consumer&&(u.Consumer=t.props.consumer);r&&(u.Source=r);k.publishEvent(new k.TelemetryEventData(f,y.personaCardEntity.featureName,u))},t}return __extends(t,n),t.prototype.componentDidMount=function(){this._publishTelemetry(y.personaCardEntity.personaCard,y.personaCardEntity.loaded)},t.prototype.componentDidUpdate=function(){var n=p.isVsdUser(this.props.dataProps.identity);this.props.dataProps.header||n||this._focusOnUpdate()},t.prototype.render=function(){var n=this.props.referenceHTMLComponent?this.props.referenceHTMLComponent:this.props.target;return i.createElement("div",null,i.createElement(r.Callout,{onDismiss:this._onDismissCallout,target:n,ariaLabel:b.ProfileCard_AriaLabel,role:"alert",isBeakVisible:!1,gapSpace:10,className:"persona-card-callout"},i.createElement("div",null,this._renderCard())))},t.prototype._renderCard=function(){var n="persona-card-styles";if(this.props.working&&!p.isCompleteIdentity(this.props.dataProps.identity))return i.createElement("div",{className:o.css(n,"loading")},i.createElement(e.DelayedRender,{delay:300},i.createElement(f.Spinner,{label:b.Loading,type:f.SpinnerType.large,className:"persona-card-loading-spinner"})));var r=p.isAdUser(this.props.dataProps.identity)||p.isAadUser(this.props.dataProps.identity),t=this.props.dataProps.header||null,s=this.props.dataProps.cardType===y.CardType.Organization?u.FocusZoneDirection.vertical:u.FocusZoneDirection.horizontal;return i.createElement(u.FocusZone,{className:n,handleTabKey:1,isCircularNavigation:!0,componentRef:this._onFocusZoneRef,direction:s},r&&t&&i.createElement(w.PersonaCardHeaderElement,{identity:t,onClickFunction:this.props.onHeaderClick,setFocus:this._focusOnUpdate}),this._renderInnerCard())},t.prototype._renderInnerCard=function(){var r=this.props.dataProps,n=r.identity,t=r.managerList,f=r.directReportList,u;if(!n)return null;var e=p.isVsdUser(n),o=p.isWmdUser(n),s=p.isAadUser(n),w=p.isAdUser(n);if(e)return i.createElement(c.DefaultAbridgedCard,{identity:n,publishTelemetry:this._publishTelemetry});if(o)return i.createElement(l.DefaultSimpleCard,{identity:n});if(s||w)switch(this.props.dataProps.cardType){case y.CardType.Default:return u=t&&t.length>0?t[t.length-1]:null,i.createElement(a.DefaultCard,{identity:n,manager:u,isPreviousHeader:!!this.props.dataProps.previousDataState||!!this.props.initialHeader,showContactCard:this.props.onShowContactCard,showOrganizationCard:this.props.onShowOrganizationCard,onClickEntity:this.props.onClickEntity,publishTelemetry:this._publishTelemetry,setFocus:this._focusOnUpdate});case y.CardType.Contact:return i.createElement(h.ContactCard,{identity:n,publishTelemetry:this._publishTelemetry});case y.CardType.Organization:return i.createElement(v.OrganizationCard,{identity:n,managerList:t,directReportList:f,onClickEntity:this.props.onClickEntity,publishTelemetry:this._publishTelemetry})}return null},t}(i.Component);t.PersonaCardContent=g});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("VSS/Identities/Picker/PersonaCard",["require","exports","react","VSS/Context","VSS/Diag","VSS/Identities/Picker/Constants","VSS/Identities/Picker/PersonaCardContent","VSS/Identities/Picker/PersonaCardContracts","VSS/Identities/Picker/PersonaCardIdentityUtils","VSS/Identities/Picker/Services","VSS/Performance","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Telemetry/Services","VSS/Utils/String","VSS/LoaderPlugins/Css!PersonaCard"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var p,w;Object.defineProperty(t,"__esModule",{value:!0});t.PersonaCard=t.managerConnectionType=t.managerAndDirectReportsConnectionType=t.userIdentityType=t.sourceImsAdOperationScope=t.sourceImsOperationScope=t.sourceAdOperationScope=t.sourceOperationScope=void 0;t.sourceOperationScope={Source:!0};t.sourceAdOperationScope={Source:!0,AD:!0};t.sourceImsOperationScope={Source:!0,IMS:!0};t.sourceImsAdOperationScope={Source:!0,IMS:!0,AD:!0};t.userIdentityType={User:!0};t.managerAndDirectReportsConnectionType={managers:!0,directReports:!0};t.managerConnectionType={managers:!0};p=function(n){return(n.uniqueAttribute||n.identity||n.displayName)&&!s.isGitHubUser(n.identity)?i.createElement(w,__assign({},n)):null};t.PersonaCard=p;w=function(n){function p(i){var r=__construct(this,n,[i]),e,f,l;for(e in r)r.hasOwnProperty(e)&&(this[e]=r[e]);return r._onDismissCallback=function(){r._scenarioDescriptor.isActive()&&!s.isCompleteIdentity(r.state.dataState.identity)&&(r._scenarioDescriptor.addSplitTiming("Spinner load time for card dismissal before identity fetch"),r._scenarioDescriptor.end());r.props.onDismissCallback()},r._headerOnClickHandler=function(){r.state.dataState.previousDataState?r.setState({dataState:r.state.dataState.previousDataState,working:!1}):r.props.initialHeader&&r.props.initialHeader.onClickFunction&&r.props.initialHeader.onClickFunction()},r._onShowContactCard=function(){var n=__assign(__assign({},r.state.dataState),{previousDataState:r.state.dataState,cardType:o.CardType.Contact,header:r.state.dataState.identity});r.setState({dataState:n})},r._onShowOrganizationCard=function(){var e,f,n,u,i;r.state.working||(e=function(n,t){t&&t.managers&&t.directReports&&!r._dismissed&&(t.managers.reverse(),r.state.dataState&&r.state.dataState.identity===n&&(r.setState({dataState:__assign(__assign({},r.state.dataState),{managerList:t.managers,directReportList:t.directReports}),working:!1}),r._getImagesForDataState()))},f=r.state.dataState,f.managerList&&f.managerList.length<=1?(n=r.state.dataState,i=__assign(__assign({},n),{cardType:o.CardType.Organization,header:n.identity,previousDataState:n}),r.setState({dataState:i,working:!0}),r._IdentityService.getIdentityConnections(n.identity,s.isAdUser(n.identity)?t.sourceAdOperationScope:t.sourceOperationScope,t.userIdentityType,t.managerAndDirectReportsConnectionType,null,null,6).then(function(t){return e(n.identity,t)},function(n){r._publishErrorTelemetry("ConnectionsOrgCard",n)})):(u=r.state.dataState,i=__assign(__assign({},u),{cardType:o.CardType.Organization,header:u.identity,previousDataState:u}),r.setState({dataState:i,working:!1})))},r._onClickEntity=function(n){if(!r.state.working){r._scenarioDescriptor.isActive()&&(r._scenarioDescriptor.end(),r._scenarioDescriptor=c.getScenarioManager().startScenario(r._routeId,o.personaCardEntity.featureName));var t=r.state.dataState,i={identity:n,cardType:o.CardType.Default,header:t.identity,directReportList:[],managerList:[],previousDataState:t,displayName:n.displayName,imageUrl:n.image,email:n.mail};r.setState({dataState:i,working:!0});r._getIdentityByUniqueAttribute(n)}},r._getConnectionsSuccessCallback=function(n,t){t&&t.managers&&!r._dismissed&&(r.setState({dataState:__assign(__assign({},n),{managerList:t.managers.reverse(),directReportList:t.directReports}),working:!1}),r._getImagesForDataState())},r._IdentityService=a.getService(h.IdentityService),f={identity:i.identity,managerList:null,directReportList:null,previousDataState:null,cardType:o.CardType.Default,header:i.initialHeader?i.initialHeader.identity:null,displayName:i.displayName,imageUrl:i.imageUrl,email:r._getEmail()},l=!0,i.identity||i.uniqueAttribute||!i.displayName||(f.identity={entityId:"",entityType:"user",originDirectory:"vsd",originId:"",displayName:i.displayName,image:i.imageUrl,signInAddress:f.email},l=!1),r.state={dataState:f,working:l},l&&r._setupInitialData(f,i.uniqueAttribute),r}return __extends(p,n),p.prototype.componentDidMount=function(){this._routeId=r.getPageContext().navigation.routeId;this._scenarioDescriptor=c.getScenarioManager().startScenario(this._routeId,o.personaCardEntity.featureName)},p.prototype.componentDidUpdate=function(n,t){this._scenarioDescriptor.isActive()&&(this.state.dataState.cardType===o.CardType.Default?this.state.working&&t.working?(this._contactSectionLoad=c.getTimestamp(),this._scenarioDescriptor.addSplitTiming("ContactSectionLoaded",this._contactSectionLoad-this._scenarioDescriptor.getStartTime())):!this.state.working&&t.working&&this._scenarioDescriptor.addSplitTiming("ManagerSectionLoaded",c.getTimestamp()-this._contactSectionLoad):this.state.dataState.cardType===o.CardType.Organization&&(this.state.working&&!t.working?this._orgCardLoad=c.getTimestamp():!this.state.working&&t.working&&this._scenarioDescriptor.addSplitTiming("ManagerAndReportsToChainLoaded",c.getTimestamp()-this._orgCardLoad)))},p.prototype.componentWillUnmount=function(){this._dismissed=!0;this._scenarioDescriptor.isActive()&&this._scenarioDescriptor.end()},p.prototype.render=function(){return i.createElement(e.PersonaCardContent,__assign({},this.props,{dataProps:this.state.dataState,onClickEntity:this._onClickEntity,onDismissCallback:this._onDismissCallback,onShowContactCard:this._onShowContactCard,onShowOrganizationCard:this._onShowOrganizationCard,working:this.state.working,onHeaderClick:this._headerOnClickHandler}))},p.prototype._setupInitialData=function(n,i){var r=this;n.identity?s.isCompleteIdentity(n.identity)?h.ServiceHelpers.isAuthenticatedMember()&&this._IdentityService.getIdentityConnections(n.identity,s.isAdUser(n.identity)?t.sourceAdOperationScope:t.sourceOperationScope,t.userIdentityType,t.managerConnectionType,null,null,1).then(function(t){return r._getConnectionsSuccessCallback(n,t)},function(n){r._publishErrorTelemetry("ConnectionsIdentityPassedInDirectManager",n)}):this._getIdentityByUniqueAttribute(n.identity):this._getIdentityByUniqueAttribute(i)},p.prototype._getIdentityByUniqueAttribute=function(n){var i=this,e,o,h;e=typeof n=="string"?n:s.isAadUser(n)||s.isAdUser(n)?n.entityId:n.signInAddress;o={UID:!0};h={identityServiceOptions:{operationScope:r.getPageContext().webAccessConfiguration.isHosted?t.sourceImsOperationScope:t.sourceImsAdOperationScope,identityType:t.userIdentityType,httpClient:null,extensionData:null},identityExtensionOptions:{consumerId:this.props.consumerId||f.ConsumerId.UnknownConsumer},prefix:e,queryTypeHint:o,sources:["Directory"]};this.props.entityOperationsFacade.search(h).then(function(n){for(var t in n.queryTokenResponse)n.queryTokenResponse[t].then(function(n){return i._getIdentitiesSuccessCallback(n)},function(n){i._publishErrorTelemetry("IdentityNotPresent",n)})},function(n){i._publishErrorTelemetry("IdentitySearch",n);(function(n){return u.logError("_resolveInputToIdentities/getIdentitiesErrorCallback:"+JSON.stringify(n))})})},p.prototype._getIdentitiesSuccessCallback=function(n){var u=this,f;if(n&&!this._dismissed)if(n.identities&&n.identities.length!=0){var i=n.identities[0],e=s.isCompleteIdentity(this.state.dataState.identity),o=s.isAadUser(i)||s.isAdUser(i),c=this.props.imageUrl?this.props.imageUrl:i.image,r=__assign(__assign({},this.state.dataState),{identity:i,displayName:i.displayName,imageUrl:c}),l=h.ServiceHelpers.isAuthenticatedMember();l?!e&&o?(this.setState({dataState:r,working:!0}),this._IdentityService.getIdentityConnections(i,s.isAdUser(i)?t.sourceAdOperationScope:t.sourceOperationScope,t.userIdentityType,t.managerConnectionType,null,null,1).then(function(n){return u._getConnectionsSuccessCallback(r,n)},function(n){u._publishErrorTelemetry("ConnectionsIdentityFetchedDirectManager",n)})):(this.setState({working:!0}),this._setupInitialData(r)):(this.setState({dataState:r,working:!1}),this._getImagesForDataState())}else f=__assign(__assign({},this.state.dataState),{identity:this._getDerivedIdentity()}),this.setState({dataState:f,working:!1})},p.prototype._getDerivedIdentity=function(){if(this.state.dataState.identity)return this.state.dataState.identity;var n=this.props.imageUrl?this.props.imageUrl:this.state.dataState.imageUrl;return{entityId:"",entityType:"user",originDirectory:"vsd",originId:"",displayName:this.state.dataState.displayName?this.state.dataState.displayName:l.IdentityPicker_NoResult,image:n,signInAddress:this.state.dataState.email}},p.prototype._getImagesForDataState=function(){var i=this,n=this.state.dataState,t=__spreadArray(__spreadArray(__spreadArray([],n.identity.image?[]:[n.identity],!0),(n.managerList||[]).filter(function(n){return!n.image}),!0),(n.directReportList||[]).filter(function(n){return!n.image}),!0);t&&t.length>0&&this.props.entityOperationsFacade.getImagesForEntities(t).then(this._getImagesForEntitiesCallback.bind(this),function(n){i._publishErrorTelemetry("Image",n)})},p.prototype._getImagesForEntitiesCallback=function(n){var t,r,i;if(n&&!this._dismissed){var u=this.state.dataState.identity,f=this.state.dataState.managerList,e=this.state.dataState.directReportList||[],o=__spreadArray(__spreadArray(__spreadArray([],e,!0),f,!0),[u],!1);for(t=0,r=o;t<r.length;t++)i=r[t],i.entityId in n&&(i.image=n[i.entityId]);this.setState({dataState:__assign(__assign({},this.state.dataState),{identity:u,managerList:f,directReportList:e})})}},p.prototype._getEmail=function(){var n,t;return s.isAadUser(this.props.identity)||s.isAdUser(this.props.identity)?this.props.identity.mail:this.props.identity&&this.props.identity.signInAddress?this.props.identity.signInAddress:this.props.identity&&this.props.identity.mail?this.props.identity.mail:this.props.uniqueAttribute&&(n=this.props.uniqueAttribute.split("@"),n.length===2&&n[0].length>=1&&n[1].length>=3&&(t=n[1].split("."),t.length>1))?this.props.uniqueAttribute:null},p.prototype._publishErrorTelemetry=function(n,t){this.setState({working:!1});var i=r.getPageContext().navigation.routeId,u={Action:y.format("{0} fetch failed",n),ErrorName:t.name,ErrorMessage:t.message};v.publishEvent(new v.TelemetryEventData(i,o.personaCardEntity.featureName,u))},p}(i.Component)});

define("WorkItemTracking/Scripts/ActionUrls",["require","exports"],function(n,t){var i,r;Object.defineProperty(t,"__esModule",{value:!0});t.ActionParameters=t.ActionUrl=void 0,function(n){n.ACTION="action";n.ACTION_NEW="new";n.ACTION_EDIT="edit";n.ACTION_CREATE="create";n.ACTION_QUERYRESULTSBYID="resultsById";n.ACTION_QUERYRESULTSBYPATH="results";n.ACTION_ADHOCQUERY="adHocQuery";n.ACTION_VSOPEN="vsopen";n.ACTION_QUERY="query";n.ACTION_QUERY_EDIT="query-edit";n.ACTION_QUERY_CHARTS="query-charts";n.ACTION_CONTRIBUTION="contribution";n.ACTION_SEARCH="search"}(i=t.ActionUrl||(t.ActionUrl={})),function(n){n.ACTION="_a";n.ID="id";n.WITD="witd";n.WORKITEMID="workItemId";n.TRIAGE="triage";n.TEMPQUERYID="tempQueryId";n.TEMPLATEID="templateId";n.PATH="path";n.WIQL="wiql";n.NEW_QUERY="newQuery";n.SEARCHTEXT="searchText";n.PARENTID="parentId";n.FULLSCREEN="fullScreen";n.VIEW="view";n.ISVSOPEN="isVSOpen";n.QUERYID="queryId";n.CONTEXT="context";n.NAME="name";n.IMPORTDATA="importData"}(r=t.ActionParameters||(t.ActionParameters={}))});

define("WorkItemTracking/Scripts/Components/HtmlEditorLinkPlugin",["require","exports","Presentation/Scripts/TFS/TFS.Host.TfsContext","WorkItemTracking/Scripts/ActionUrls","VSS/Utils/Url","VSS/Utils/String","VSS/Artifacts/Services"],function(n,t,i,r,u,f,e){var o;Object.defineProperty(t,"__esModule",{value:!0});t.KeyDownPlugin=t.HtmlEditorLinkPlugin=void 0;var s="data-html-editor-org-href",h=/(<a\s+([^>]*\s+)?)(data\-html\-editor\-org\-href="([^"]*)")(\s?)([^>]*>)/gm,c=/^x-mvwit:workitem\/([0-9]+)$/,l=function(){function n(){var n=this,t;this._changeToClickable=function(t){var i=t.href;n.translateUrl(i,function(r){n.editor&&i!==r&&(t.href=r,t.setAttribute(s,i))})};t=i.TfsContext.getDefault().getActionUrl(null,"workitems");this._baseUrl="".concat(t,"/").concat(r.ActionUrl.ACTION_EDIT,"/")}return n.prototype.getName=function(){return"HtmlEditorLinkPlugin"},n.prototype.initialize=function(n){this.editor=n},n.prototype.onPluginEvent=function(n){var i=n.eventType===9,t;n.eventType===6||i?this.editor.queryElements("a[href]",this._changeToClickable):7&&(t=n,t.content=this._getOriginalContent(t.content))},n.prototype.dispose=function(){this.editor=null},n.prototype.translateUrl=function(n,t){var i=c.exec(n);if(i)return t("".concat(this._baseUrl).concat(i[1])),!0;if(f.startsWith(n,e.LinkingUtilities.VSTFS,f.ignoreCaseComparer))return u.getTranslatorService().beginTranslateUrl(n,null,function(n){return t(n)}),!0;t(n)},n.prototype._getOriginalContent=function(n){return n?n.replace(h,function(){for(var r,i,u,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return r=!!n[5],i=r?n[1]:n[1].slice(0,-1),i=i.replace(/href="[^"]*"/,'href="'.concat(n[4],'"')),u=n[6],"".concat(i).concat(u)}):n},n}();t.HtmlEditorLinkPlugin=l;o=function(){function n(n){this._keyDownEventHandler=n}return n.prototype.getName=function(){return"KeyDownPlugin"},n.prototype.dispose=function(){this._keyDownEventHandler=null},n.prototype.initialize=function(){},n.prototype.onPluginEvent=function(n){this._keyDownEventHandler&&n.eventType===0&&this._keyDownEventHandler(n.rawEvent)},n}();t.KeyDownPlugin=o});

define("WorkItemTracking/Scripts/Components/HtmlFieldsMentionsTelemetry",["require","exports","VSS/Telemetry/Services"],function(n,t,i){var r,u;Object.defineProperty(t,"__esModule",{value:!0});t.HtmlFieldsMentionsUsageTelemetryHelper=t.HtmlFieldsMentionsTelemetryConstants=void 0,function(n){n.Area="HtmlFieldsMentions";n.MentionRenderFail="MentionRenderFail"}(r=t.HtmlFieldsMentionsTelemetryConstants||(t.HtmlFieldsMentionsTelemetryConstants={})),function(n){function t(n){u(r.MentionRenderFail,{errorMessage:n})}function u(n,t){t===void 0&&(t={});i.publishEvent(new i.TelemetryEventData(r.Area,n,t))}n.publishMentionRenderFail=t}(u=t.HtmlFieldsMentionsUsageTelemetryHelper||(t.HtmlFieldsMentionsUsageTelemetryHelper={}))});

define("WorkItemTracking/Scripts/Components/HtmlEditorMentionPlugin",["require","exports","Mention/Scripts/TFS.Mention","WorkItemTracking/Scripts/Utils/RichTextPreRenderUtility","WorkItemTracking/Scripts/Components/HtmlFieldsMentionsTelemetry"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});t.HtmlEditorMentionPlugin=void 0;var f="MentionBegin",e="MentionEnd",o=new RegExp("<!--".concat(f,"-->.+?<!--(<a[^>]+>.+?<\/a>)--><!--").concat(e,"-->"),"gi"),s=function(){function n(){var n=this;this.onBlur=function(){n._hasFocus=!1;n._renderMentions()};this.onFocus=function(){n._hasFocus=!0;n._revertRenderedMentions()}}return n.prototype.getName=function(){return"HtmlEditorMentionPlugin"},n.prototype.initialize=function(n){this.editor=n;this._hasFocus=!1},n.prototype.onPluginEvent=function(n){if(n.eventType===9||n.eventType===6)this._renderMentions();else if(n.eventType===7){var t=n;t.content=this._getRawMentions(t.content)}},n.prototype.dispose=function(){this._disposer&&(this._disposer(),this._disposer=null);this.editor=null},n.prototype._renderMentions=function(){var n=this,t=this._getOriginalContent(),r=this._latestRenderedId=Date.now();t&&t.indexOf(i.Constants.HTML_MENTION_ATTR_NAME)!==-1&&this._runRichTextFilterContentAndPreRender(t,!1).then(function(t){n.editor&&r===n._latestRenderedId&&!n._hasFocus&&n.editor.setContent(t,!1)}).catch(function(n){return u.HtmlFieldsMentionsUsageTelemetryHelper.publishMentionRenderFail(n)})},n.prototype._revertRenderedMentions=function(){this.editor.setContent(this._getOriginalContent(),!1)},n.prototype._getRawMentions=function(n){return n.replace(o,"$1")},n.prototype._getOriginalContent=function(){return this._getRawMentions(this.editor.getContent(!1))},n.prototype._runRichTextFilterContentAndPreRender=function(n,t){var u=document.createElement("div"),o;return u.innerHTML=n,o=[].slice.call(u.querySelectorAll("a[".concat(i.Constants.HTML_MENTION_ATTR_NAME,"]"))),o.forEach(function(n){n.parentElement.insertBefore(document.createComment(f),n);n.parentElement.insertBefore(document.createComment(e),n.nextSibling);n.parentElement.insertBefore(document.createComment(n.outerHTML),n.nextSibling)}),r.richTextFilterContentAndPreRender(u,t,undefined,!1)},n}();t.HtmlEditorMentionPlugin=s});

define("WorkItemTracking/Scripts/Utils/HtmlUtil",["require","exports"],function(n,t){function i(n,t){if(n&&n.closest)return n.closest(t);while(n&&!(n.matches||n.msMatchesSelector).call(n,t))n=n.parentElement;return n}Object.defineProperty(t,"__esModule",{value:!0});t.closest=void 0;t.closest=i});

define("WorkItemTracking/Scripts/Components/HtmlEditor",["require","exports","Mention/Scripts/Resources/TFS.Resources.Mention","Mention/Scripts/TFS.Mention","OfficeFabric/Utilities","VSSUI/Util","react","VSS/Diag","VSS/Resources/VSS.Resources.Platform","VSS/Telemetry/Services","VSS/Utils/Accessibility","VSS/Utils/Html","VSS/Utils/UI","VSS/VSS","WorkItemTracking/Scripts/Components/HtmlEditorLinkPlugin","WorkItemTracking/Scripts/Components/HtmlEditorMentionPlugin","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/HtmlUtil","WorkItemTracking/Scripts/Utils/RichTextPreRenderUtility","WorkItemTracking/Scripts/Components/HtmlFieldsMentionsTelemetry","VSS/LoaderPlugins/Css!fabric","VSS/LoaderPlugins/Css!WorkItemTracking/Components/HtmlEditor"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){function oi(n,t,i,r){if(!i.onPluginEvent||!i.willHandleEventExclusively)return!1;var f=i.getName()||i.constructor.name,e=n.eventType,u;return st("".concat(f,"_EVENT").concat(e,"_EXCLUSIVE"),t,r,function(){u=i.willHandleEventExclusively(n)}),u&&st("".concat(f,"_EVENT").concat(e),t,r,function(){return i.onPluginEvent(n)}),u}function st(n,t,i,r){if(!i||!i.mark)return r();var u="".concat(n,"_").concat(t),f="".concat(u,"_S"),e="".concat(u,"_E");i.mark(f);r();i.mark(e);try{i.measure(u,f,e);i.clearMarks(f);i.clearMarks(e)}catch(o){}}var it;Object.defineProperty(t,"__esModule",{value:!0});t.HtmlEditor=void 0;var rt="HtmlEditor",ni="ToolbarButtonClick",ti="ShortcutCommand",ii="CreateHtmlEditor",ri="SetContent",ui=a.KeyUtils.shouldUseMetaKeyInsteadOfControl()?s.CommandClickToOpen:s.CtrlClickToOpen,bt=!0,kt="html-editor-img-placeholder",dt=":not(.".concat(kt,")"),ht={attributeCallbacks:(it={"class":function(n,t){var i=b.closest(t,"[".concat(r.Constants.HTML_RENDERED_MENTION_ATTR_NAME,"]"));return i?n:undefined},style:function(n){return n.replace("background-color: rgb(255, 255, 255);","").replace("color: rgb(0, 0, 0);","")}},it[r.Constants.HTML_MENTION_ATTR_NAME]=function(n){return n},it[r.Constants.HTML_RENDERED_MENTION_ATTR_NAME]=function(n){return n},it)},gt=function(n){var i=n.nativeEvent.dataTransfer,r,t;if(i&&i.types&&(r="Files",t=i.types,t.indexOf&&t.indexOf(r)>=0||t.contains&&t.contains(r))){n.preventDefault();try{i.dropEffect="none"}catch(u){}return!1}},fi=["WorkItemTracking/Scripts/Components/HtmlEditor.Emoji.Strings"],ct="RoosterReact/rooster-react-amd",lt="WorkItemTracking/Scripts/Components/HtmlEditor.Strings",at="WorkItemTracking/Scripts/Components/HtmlEditorLinkPlugin",vt="WorkItemTracking/Scripts/Components/HtmlEditorMentionPlugin",yt="WorkItemTracking/Scripts/Components/HtmlEditorEscapeCodeBlockPlugin",pt="WorkItemTracking/Scripts/Components/HtmlEditorTabToNextFocusableElementPlugin",wt="Mention/Scripts/TFS.Social.RichText.Autocomplete",g=null,nt=null,ut=null,ft=null,et=null,ot=null,tt=null,ei=function(t){function r(i){var f=__construct(this,t,[i]),s,l;for(s in f)f.hasOwnProperty(s)&&(this[s]=f[s]);f._id=r._nextId++;f._async=new u.Async;f._htmlEditorRef=e.createRef();f.refreshCommandBar=f._async.debounce(function(){return f._commandBar&&f._commandBar.forceUpdate()},100,{trailing:!0});f._publishEmojiFromKeyboardTelemetry=function(){f._publishShortcutCommandTelemetry("Emoji")};f._onButtonClicked=function(n){n==g.RoosterCommmandBarButtonKeys.InsertImage&&(f._preventBlurForInsertImage=!0);f._publishToolbarTelemetry(n)};f._publishShortcutCommandTelemetry=function(n){var t=(f.props.telemetryContext||{}).controlName;h.publishEvent(new h.TelemetryEventData(rt,ti,{controlName:t,command:n}))};f._handleContentChanged=function(n,t){if(t===void 0&&(t=!1),f._tryUpdateState(n,t)&&f.props.onChange)f.props.onChange(f.isEmpty()?"":n)};f._updateViewState=function(n,t,i){f._throttledOnContentChanged(t,i)};f._focusOutShellAllowMouseDown=function(n){var t=f._leanRoosterContentDiv&&f._leanRoosterContentDiv.contains(n);return!t&&f._autocompleteControl&&f._autocompleteControl.closeActiveAutocomplete(),t};f._focusOutShellOnFocus=function(){var n=f.props,r=n.height,t=n.onFocus,u=n.editOnlyMode,e=n.preventShrinkOnBlur,i;f._commandBarPlugin.registerRoosterCommandBar(f._commandBar);f._leanRooster&&!u&&(f.mode=1,i=r==null,e&&i&&f.setState({defaultHeight:null}));t&&t()};f._leanRoosterOnFocus=function(){var r=f.props,u=r.helpText,e=r.mentionsDecorationsEnabled,n,i,t;u&&f._leanRooster&&f._leanRooster.hasPlaceholder()&&c.announce(u,!0);e&&!f.state.readonly&&f._mentionPlugin.onFocus();f._resetCaret&&(f._resetCaret=!1,n=f._leanRoosterContentDiv.firstChild,n&&(i=window.getSelection(),t=document.createRange(),t.setStart(n,0),t.setEnd(n,0),i.removeAllRanges(),i.addRange(t)))};f._onHyperlinkClick=function(n){var t=n.getAttribute("href");return f._leanRooster.mode!==0||!t?!1:(f._linkPlugin.translateUrl(t,function(n){try{window.open(n,"_blank")}catch(t){}}),!0)};f._focusOutShellOnBlur=function(){var n=f.props,e=n.height,r=n.onBlur,o=n.editOnlyMode,s=n.preventShrinkOnBlur,h=n.mentionsDecorationsEnabled,u,t,i;f._leanRooster&&!o&&(f.mode=0,f._imageResizePlugin.hideResizeHandle(),u=e==null,t=f._htmlEditorRef.current,s&&u&&t&&(i=t.getBoundingClientRect().height,i>0&&f.setState({defaultHeight:i})));r&&r();h&&!f.state.readonly&&f._mentionPlugin.onBlur()};f._shouldCallBlur=function(n,t){return f._preventBlurForInsertImage?(f._preventBlurForInsertImage=!1,!1):t(n)};f._leanRoosterOnRef=function(n){f._leanRooster=n;f._endCreateScenario();var t=f.props.onEditorInitialized;t&&t()};f._leanRoosterContentDivOnRef=function(n){f._leanRoosterContentDiv=n;f.props.mentionsEnabled&&!f.state.readonly&&f._setupAutocomplete();f._loadEmojiStrings()};f._commandBarOnRef=function(n){f._commandBar=n};f._hyperlinkToolTipCallback=function(n){return n.replace(location.href,"")==="#"?"":f.hasFocus()?"".concat(n,"\n").concat(ui):null};f._onMentionSelect=function(){return f._throttledOnContentChanged(f._leanRooster.getContent())};f._triggerEventWithUserTiming=function(n,t,i){var e=t.eventType,r=n.document.defaultView.performance,o=(f.props.telemetryContext||{}).controlName||"",u="".concat(o,"_").concat(f._id);st("TOTAL_TIME_EVENT".concat(e),u,r,function(){(i||!n.plugins.some(function(n){return oi(t,u,n,r)}))&&n.plugins.forEach(function(n){var i=n.getName()||n.constructor.name;n.onPluginEvent&&st("".concat(i,"_EVENT").concat(e),u,r,function(){return n.onPluginEvent(t)})})})};f._throttledOnContentChanged=f._async.throttle(f._handleContentChanged,100,{trailing:!0});var a=!1,p=i.htmlContent,w=i.readonly,b=i.hidden,k=i.fullScreen,d=i.forceDelayLoad,it=i.height,v=i.mentionsDecorationsEnabled,y=i.mentionsEnabled;return f._viewState={content:p,isDirty:!1},f._coreApiOverride=o.getDebugMode()?{triggerEvent:f._triggerEventWithUserTiming}:undefined,l=function(n){f._createAdditionalEditorPlugins();f._initializeButtonOverrides();f._creationStartTime=Date.now();a=!0;var t=f._viewState;t.content=g.HtmlSanitizer.sanitizeHtml(t.content,ht);n||f._disposing||f.setState({moduleLoaded:a})},n.defined(ct)&&n.defined(lt)&&n.defined(at)&&n.defined(yt)&&n.defined(pt)&&(!v||n.defined(vt))&&(!y||n.defined(wt))?(g=n(ct),nt=n(lt),ut=n(at),et=n(yt),ot=n(pt),ft=v?n(vt):null,tt=y?n(wt):null,d?setTimeout(function(){return l(!1)},0):l(!0)):f._ensureRoosterModule().then(function(){return l(!1)}),f.state={readonly:w,hidden:b,fullScreen:k,moduleLoaded:a,defaultHeight:it},f}return __extends(r,t),r.prototype.render=function(){var n=this.props,r=n.className,u=n.editOnlyMode,t=n.height,i=t===void 0?this.state.defaultHeight:t;return e.createElement("div",{className:f.css("html-editor",r,{"is-hidden":this.state.hidden,"full-screen":this.state.fullScreen,"auto-grow":i==null,"edit-only-mode":u}),style:{height:i},ref:this._htmlEditorRef},this._renderRoosterEditor())},r.prototype.componentWillReceiveProps=function(n){var t=n.readonly;t!==this.props.readonly&&t!==this.state.readonly&&this.setState({readonly:t})},r.prototype.componentDidMount=function(){this._leanRooster&&this.props.editOnlyMode&&(this.mode=1);this.props.autoFocus&&this.focus();this._endCreateScenario()},r.prototype.setContent=function(n,t){var r,u,f,e;t===void 0&&(t=!1);var i=this.props,o=i.height,s=i.preventShrinkOnBlur,c=Date.now(),l=g&&!t?g.HtmlSanitizer.sanitizeHtml(n,ht):n;this._tryUpdateState(l)&&this._leanRooster&&(this._leanRooster.reloadContent(!0,!1),r=this._leanRooster.getContent(),this._undoPlugin.reset(r));this._renderContentOnReadOnly();u=o==null;s&&u&&this.setState({defaultHeight:null});g&&(f=(this._viewState.content||"").length,e=Date.now()-c,h.publishEvent(new h.TelemetryEventData(rt,ri,{elapsedTime:e,contentLength:f})))},Object.defineProperty(r.prototype,"isDirty",{get:function(){return this._viewState.isDirty},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"htmlContent",{get:function(){return this._viewState.content},enumerable:!1,configurable:!0}),r.prototype.focus=function(n){if(this._leanRooster&&(this._leanRoosterContentDiv.dispatchEvent(new Event("focus")),this._leanRooster.focus(),n&&this._leanRoosterContentDiv)){var t=this._leanRoosterContentDiv;if(t.scrollIntoViewIfNeeded){t.scrollIntoViewIfNeeded();return}this._leanRoosterContentDiv.scrollIntoView()}},r.prototype.resetScroll=function(){this._leanRoosterContentDiv&&this._leanRoosterContentDiv.firstChild&&(this._resetCaret=!0,this._leanRoosterContentDiv.scrollTop=0)},r.prototype.selectAll=function(){this._leanRooster&&this._leanRooster.selectAll()},r.prototype.flushChanges=function(){if(this._leanRooster){var n=this._leanRooster.getContent();this._handleContentChanged(n)}},r.prototype.hasFocus=function(){return this._leanRooster&&this.mode===1},r.prototype.isEmpty=function(){return this._leanRooster&&this._leanRooster.isEmpty()},r.prototype.setEnabled=function(n){this.setState({readonly:!n})},r.prototype.setVisible=function(n){this.setState({hidden:!n})},r.prototype.setFullScreen=function(n){this.setState({fullScreen:n})},Object.defineProperty(r.prototype,"mode",{get:function(){return this._leanRooster.mode},set:function(n){this._leanRooster.mode=n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"editableElement",{get:function(){return this._leanRoosterContentDiv},enumerable:!1,configurable:!0}),r.prototype.componentWillUnmount=function(){this._disposing=!0;var n=this._leanRoosterContentDiv;n&&(this._leanRoosterContentDiv=null,this._emojiPlugin=null,this._autocompleteControl&&(n.removeEventListener(this._autoCompleteSelectedEventName,this._onMentionSelect),this._autocompleteControl.cleanUpEditor(n),this._autocompleteControl=null));this._async&&(this._async.dispose(),this._async=null)},r.prototype._renderRoosterEditor=function(){var n=this;if(!this.state.moduleLoaded)return this._asynchronouslyLoaded=!0,null;var t=this.props,i=t.showChromeBorder,r=t.placeholder,u=t.ariaLabel,o=t.activateRoosterOnMount,s=t.trimWithEmptyCheck,h=t.mentionsDecorationsEnabled,c=g.FocusOutShell,l=g.LeanRooster,a=g.RoosterCommandBar,v=nt.All,y=nt.CommandBarLocaleStrings;return this._renderContentOnReadOnly(),e.createElement(c,{className:f.css("rooster-wrapper",{"with-chrome":i}),allowMouseDown:this._focusOutShellAllowMouseDown,onBlur:this._focusOutShellOnBlur,onFocus:this._focusOutShellOnFocus,shouldCallBlur:this._shouldCallBlur},function(t,i){return n._createPluginsWithCallout(t,i),[e.createElement(l,{key:"rooster",className:f.css("rooster-editor","propagate-keydown-event","text-element"),viewState:n._viewState,plugins:n._editorPlugins,undo:n._undoPlugin,ref:n._leanRoosterOnRef,updateViewState:n._updateViewState,contentDivRef:n._leanRoosterContentDivOnRef,readonly:n.state.readonly,placeholder:r,hyperlinkToolTipCallback:n._hyperlinkToolTipCallback,onFocus:n._leanRoosterOnFocus,onDragEnter:gt,onDragOver:gt,"aria-label":u,activateRoosterOnMount:o,activateInViewMode:h,coreApiOverride:n._coreApiOverride,sanitizeAttributeCallbacks:ht.attributeCallbacks,trimWithEmptyCheck:s,onHyperlinkClick:n._onHyperlinkClick,clickOpenHyperlinkViewMode:!0}),e.createElement(a,{key:"cmd",className:"rooster-command-bar",commandBarClassName:"html-command-bar-base",buttonOverrides:n._buttonOverrides,roosterCommandBarPlugin:n._commandBarPlugin,emojiPlugin:n._emojiPlugin,imageManager:n._imageManager,calloutClassName:f.css("rooster-callout",t),calloutOnDismiss:i,strings:y,ref:n._commandBarOnRef,onButtonClicked:n._onButtonClicked,disableListWorkaround:bt,overflowMenuProps:{className:"rooster-command-bar-overflow"},ellipsisAriaLabel:v.Toolbar_More,tooltipDirectionHint:5})]})},r.prototype._createPluginsWithCallout=function(n,t){var r=nt.CommandBarLocaleStrings,i=nt.SearchForEmoji,u=g.RoosterCommandBarPlugin,e=g.EmojiPlugin;this._emojiPlugin||(this._emojiPlugin=new e({calloutClassName:f.css(n,"rooster-emoji-callout"),calloutOnDismiss:t,emojiPaneProps:{quickPickerClassName:"rooster-emoji-quick-pick",navBarProps:{className:"rooster-emoji-navbar",buttonClassName:"rooster-emoji-navbar-button",iconClassName:"rooster-emoji-navbar-icon",selectedButtonClassName:"rooster-emoji-navbar-selected"},statusBarProps:{className:"rooster-emoji-status-bar"},emojiIconProps:{className:"rooster-emoji-icon",selectedClassName:"rooster-emoji-selected"},searchPlaceholder:i,searchInputAriaLabel:i},onKeyboardTriggered:this._publishEmojiFromKeyboardTelemetry,strings:{emjDNoSuggetions:w.NoSuggestionsFound}}),this._editorPlugins.push(this._emojiPlugin));this._commandBarPlugin||(this._commandBarPlugin=new u({strings:r,onShortcutTriggered:this._publishShortcutCommandTelemetry,disableListWorkaround:bt,calloutClassName:n,calloutOnDismiss:t}),this._editorPlugins.push(this._commandBarPlugin))},r.prototype._ensureRoosterModule=function(){var i=this.props,t=i.mentionsDecorationsEnabled,n=i.mentionsEnabled;return new Promise(function(i){if(g&&nt&&ut&&et&&ot&&(!t||ft)&&(!n||tt)){i();return}var r=[ct,lt,at,yt,pt];t&&r.push(vt);n&&r.push(wt);v.using(r,function(r,u,f,e,o,s,h){g=r;nt=u;ut=f;et=e;ot=o;t?(ft=ft||s,n&&(tt=tt||h)):n&&(tt=tt||s);i()},v.handleError)})},r.prototype._initializeButtonOverrides=function(){var t=nt.All,u=!!this.props.uploadImageHandler,n=g.RoosterCommmandBarButtonKeys,r="html-command-bar-button";this._buttonOverrides=[{key:n.Bold,order:0},{key:n.Italic,order:1},{key:n.Underline,order:2},{key:n.BulletedList,order:3},{key:n.NumberedList,order:4},{key:n.Highlight,order:5,subMenuPropsOverride:{ariaLabel:t.HighlightColorPicker_AriaLabel}},{key:n.FontColor,order:6,subMenuPropsOverride:{ariaLabel:t.FontColorPicker_AriaLabel}},{key:n.Emoji,order:7,buttonClassName:f.css("rooster-emoji-button",r)},{key:n.Outdent,order:8},{key:n.Indent,order:9},{key:n.Strikethrough,order:10},{key:n.Header,order:11,subMenuPropsOverride:{ariaLabel:t.HeaderMenu_AriaLabel}},{key:n.Code,order:12},{key:n.ClearFormat,order:16},{key:n.InsertImage,order:17,exclude:!u},{key:n.Link,order:18},{key:n.Unlink,order:19}];this.props.mentionsEnabled&&(this._buttonOverrides.push({key:nt.CustomButtonKeys.AtMention,name:i.MentionSomeone,iconProps:{iconName:"Accounts"},onRender:g.getIconOnRenderDelegate(),handleChange:this._createMentionButttonHandler("@"),order:13}),this._buttonOverrides.push({key:nt.CustomButtonKeys.HashMention,name:i.MentionWorkItem,iconProps:{iconName:"NumberSymbol"},onRender:g.getIconOnRenderDelegate(),handleChange:this._createMentionButttonHandler("#"),order:14}),this._buttonOverrides.push({key:nt.CustomButtonKeys.PRMention,name:i.MentionPR,iconProps:{iconName:"BranchPullRequest"},onRender:g.getIconOnRenderDelegate(),handleChange:this._createMentionButttonHandler("!"),order:15}));this._buttonOverrides.forEach(function(n){n.className=n.className||"html-command-button-root";n.buttonClassName=n.buttonClassName||r})},r.prototype._createMentionButttonHandler=function(n){var t=this;return function(i){t._autocompleteControl.closeActiveAutocomplete();var r=i.getSelection(),u=r&&r.focusNode&&/\s/.test(r.focusNode.textContent.substr(-1));i.insertContent(u?n:" ".concat(n));i.triggerContentChangedEvent("Mentions");t._autocompleteControl.suggest(t._leanRoosterContentDiv)}},r.prototype._createAdditionalEditorPlugins=function(){var n=this.props,t=n.uploadImageHandler,i=n.onKeyDown,u=n.mentionsDecorationsEnabled,f=g.ImageManager,e=g.UndoWithImagePlugin,o=g.ContentChangedPlugin,s=g.ImageResize,h=g.TableResize,c=g.PasteImagePlugin,l=g.DoubleClickImagePlugin,a=g.IgnorePasteImagePlugin,r;this._imageManager=new f({uploadImage:t,placeholderImageClassName:kt,fallbackAltValue:nt.All.ImageDefaultAltText});this._undoPlugin=new e(this._imageManager);this._imageResizePlugin=new s(undefined,undefined,undefined,undefined,dt);this._linkPlugin=new ut.HtmlEditorLinkPlugin;r=!!t;this._editorPlugins=[new o(this._throttledOnContentChanged),this._imageResizePlugin,new h,r?new c(this._imageManager):a.Instance,new l(dt),this._linkPlugin,new et.HtmlEditorEscapeCodeBlockPlugin,new ot.HtmlEditorTabToNextFocusableElementPlugin];u&&(this._mentionPlugin=new p.HtmlEditorMentionPlugin,this._editorPlugins.push(this._mentionPlugin));i&&(this._shortcutPlugin=new y.KeyDownPlugin(i),this._editorPlugins.push(this._shortcutPlugin))},r.prototype._tryUpdateState=function(n,t){t===void 0&&(t=!1);n=l.Utils.isEmpty(n)?"":n;var i=this._viewState;return n!==i.content?(i.content=n,i.isDirty=!0,!t):!1},r.prototype._renderContentOnReadOnly=function(){var t=this,n;this.state.readonly&&this.props.mentionsDecorationsEnabled&&(n=document.createElement("div"),n.innerHTML=this._viewState.content,k.richTextFilterContentAndPreRender(n,!1).then(function(n){t._leanRoosterContentDiv&&(t._leanRoosterContentDiv.innerHTML=n)}).catch(function(n){return d.HtmlFieldsMentionsUsageTelemetryHelper.publishMentionRenderFail(n)}))},r.prototype._endCreateScenario=function(){if(this._creationStartTime){var n=(this._viewState.content||"").length,t=!!this._asynchronouslyLoaded,i=Date.now()-this._creationStartTime;h.publishEvent(new h.TelemetryEventData(rt,ii,{elapsedTime:i,contentLength:n,asyncLoaded:t}));this._creationStartTime=null}},r.prototype._publishToolbarTelemetry=function(n){var t=(this.props.telemetryContext||{}).controlName;h.publishEvent(new h.TelemetryEventData(rt,ni,{controlName:t,command:n}))},r.prototype._setupAutocomplete=function(){var n=this.props.mentionsEnabled;this._leanRoosterContentDiv&&tt&&n&&(this._autocompleteControl=tt.RichTextAutocompleteControl.getInstance(),this._autocompleteControl.attachToEditable(this._leanRoosterContentDiv),this._autoCompleteSelectedEventName=tt.RichTextAutocompleteControl.SELECTED_EVENT_NAME,this._leanRoosterContentDiv.addEventListener(this._autoCompleteSelectedEventName,this._onMentionSelect))},r.prototype._loadEmojiStrings=function(){var n=this;v.using(fi,function(t){return n._emojiPlugin&&n._emojiPlugin.setStrings(t.EmojiLocaleStrings)})},r._nextId=0,r}(e.PureComponent);t.HtmlEditor=ei});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsTelemetry",["require","exports","VSS/Diag","VSS/Performance","VSS/Telemetry/Services"],function(n,t,i,r,u){var f,e,o;Object.defineProperty(t,"__esModule",{value:!0});t.UsageTelemetryHelper=t.PerformanceTelemetryHelper=t.TelemetryConstants=void 0,function(n){n.Area="WebAccessComments";n.CommentsInitialization="CommentsInitialization";n.CommentsPaging="CommentsPaging";n.AddComment="AddComment";n.EditComment="EditComment";n.EditCommentUpdate="EditCommentUpdate";n.EditCommentCancel="EditCommentCancel";n.EditCommentKeepDraft="EditCommentKeepDraft";n.EditCommentCancelNoChange="EditCommentCancelNoChange";n.DeleteCommentConfirm="DeleteCommentConfirm";n.DeleteCommentCancel="DeleteCommentCancel";n.OverflowButton="OverflowButton";n.QuoteReply="QuoteReply";n.ReactionSelectionButton="ReactionSelectionButton";n.AddNewReaction="AddCommentReaction";n.DeleteReaction="DeleteCommentReaction"}(f=t.TelemetryConstants||(t.TelemetryConstants={}));e=function(){function n(){this._initScenario=null;this._pagingScenario=null}return n.prototype.startCommentsInitialization=function(){this._initScenario=r.getScenarioManager().startScenario(f.Area,f.CommentsInitialization)},n.prototype.startCommentsPaging=function(){this._pagingScenario=r.getScenarioManager().startScenario(f.Area,f.CommentsPaging)},n.prototype.endInitialization=function(n){this._end(this._initScenario,n);this._initScenario=null},n.prototype.isCommentsPagingStarted=function(){return this._pagingScenario!=null},n.prototype.endPaging=function(n){this._end(this._pagingScenario,n);this._pagingScenario=null},n.prototype._end=function(n,t){n.addData(t);n.end(Date.now())},n}();t.PerformanceTelemetryHelper=e,function(n){function i(n){t(f.AddComment,{commentLength:n})}function r(){t(f.EditComment)}function e(n){t(f.QuoteReply,{fromSelection:n})}function o(n,i,r){t(f.EditCommentUpdate,{previousCommentLength:n,newCommentLength:i,previousCommentVersion:r})}function s(){t(f.EditCommentCancel)}function h(){t(f.EditCommentKeepDraft)}function c(){t(f.EditCommentCancelNoChange)}function l(){t(f.DeleteCommentConfirm)}function a(){t(f.DeleteCommentCancel)}function v(){t(f.OverflowButton)}function y(){t(f.ReactionSelectionButton)}function p(n,i,r){r===void 0&&(r=!1);t(f.AddNewReaction,{commentId:n,reactionType:i,isAddedFromStatusBar:r})}function w(n,i,r){r===void 0&&(r=!1);t(f.DeleteReaction,{commentId:n,reactionType:i,isDeletedFromStatusBar:r})}function t(n,t){t===void 0&&(t={});u.publishEvent(new u.TelemetryEventData(f.Area,n,t))}n.publishAddComment=i;n.publishEditComment=r;n.publishQuoteReply=e;n.publishEditCommentUpdate=o;n.publishEditCommentCancel=s;n.publishEditCommentKeepDraft=h;n.publishEditCommentCancelNoChange=c;n.publishDeleteCommentConfirm=l;n.publishDeleteCommentCancel=a;n.publishClickOverflowButton=v;n.publishClickReactionSelectionButton=y;n.publishEngagedReaction=p;n.publishDisEngagedReaction=w}(o=t.UsageTelemetryHelper||(t.UsageTelemetryHelper={}))});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentEditor",["require","exports","OfficeFabric/Dialog","TFS/WorkItemTracking/Contracts","VSS/Events/Services","VSS/Utils/UI","VSSUI/Button","WorkItemTracking/Scripts/Components/HtmlEditor","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsTelemetry","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","react","VSS/LoaderPlugins/Css!WorkItemTracking/Controls/WorkItemForm/Comments/CommentEditor"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.CommentEditor=void 0;var a=function(n){function t(t){var u=__construct(this,n,[t]);for(var h in u)u.hasOwnProperty(h)&&(this[h]=u[h]);return u._renderEditor=function(){var t=u.props,n=t.commentInfo,i=t.uploadImageHandler;return l.createElement(o.HtmlEditor,{ariaLabel:"edit-box",htmlContent:n.format===r.CommentFormat.Markdown&&n.renderedText?n.renderedText:n.text,onChange:u._onChange,className:"comment-edit-mode-editor",ref:u._editorRef,telemetryContext:{controlName:"CommentEditor"},autoFocus:!0,showChromeBorder:!0,editOnlyMode:!0,mentionsEnabled:!0,uploadImageHandler:function(n){return i(n,!0)},trimWithEmptyCheck:!0,onKeyDown:u._onKeyDown})},u._onKeyDown=function(n){var t=f.BrowserCheckUtils.isMacintosh();t&&n.metaKey&&n.keyCode===13&&!n.ctrlKey&&!n.altKey?u._onUpdateClick():t||!n.ctrlKey||n.keyCode!==13||n.metaKey||n.altKey||u._onUpdateClick()},u._onChange=function(){var n=u._editor.htmlContent,t=u._editor.isEmpty();u.setState({isDirty:u._originalHtml!==n&&!t})},u._editorRef=function(n){u._editor=n;n&&(u._originalHtml=n.htmlContent)},u._renderButtons=function(){return l.createElement("div",{className:"comment-message-button-area"},l.createElement(e.Button,{className:"editor-cancel-button",text:c.Cancel,onClick:u._handleCancel,ariaLabel:c.Cancel}),l.createElement(e.Button,{text:c.Update,primary:!0,ariaLabel:c.Update,disabled:!u.state.isDirty,onClick:u.state.isDirty&&u._onUpdateClick}))},u._renderDiscardDraftDialog=function(){var n="cancel-discard-draft";return l.createElement(i.Dialog,{dialogContentProps:{type:i.DialogType.close,title:c.ConfirmDiscardCommentDraft},hidden:!1,modalProps:{className:"external-connection-discard-draft-dialog",firstFocusableSelector:n,isBlocking:!0},onDismiss:u._dismissDiscardDraftDialog},l.createElement(i.DialogFooter,null,l.createElement(e.Button,{onClick:u._onConfirmDiscard,primary:!0},c.DiscardWorkItem),l.createElement(e.Button,{className:n,onClick:u._dismissDiscardDraftDialog},c.Cancel)))},u._onConfirmDiscard=function(){u._onDiscard();s.UsageTelemetryHelper.publishEditCommentCancel()},u._dismissDiscardDraftDialog=function(){u.setState({showDiscardDialog:!1});s.UsageTelemetryHelper.publishEditCommentKeepDraft()},u._onUpdateClick=function(){var n=u.props,i=n.onUpdate,r=n.commentInfo,t=u._editor.htmlContent;u.setState({isDirty:!1});i(t);s.UsageTelemetryHelper.publishEditCommentUpdate(u._originalHtml.length,t.length,r.version)},u._handleCancel=function(){u.state.isDirty?u.setState({showDiscardDialog:!0}):(u._onDiscard(),s.UsageTelemetryHelper.publishEditCommentCancelNoChange())},u._onDiscard=function(){var n=u.props.onCancel;u.setState({isDirty:!1});n()},u.state={isDirty:!1,showDiscardDialog:!1},u}return __extends(t,n),t.prototype.render=function(){return l.createElement("div",{className:"wit-comment-editor"},this._renderEditor(),this._renderButtons(),this.state.showDiscardDialog&&this._renderDiscardDraftDialog())},t.prototype.componentDidUpdate=function(n,t){var i=this.state.isDirty,r=this.props.commentInfo;t.isDirty!==i&&u.getService().fire(h.Actions.DISCUSSION_EDIT_DIRTY_CHANGED,null,{isCommentDirty:i,workItemId:r.workItemId})},t.prototype.componentWillUnmount=function(){u.getService().fire(h.Actions.DISCUSSION_EDIT_DIRTY_CHANGED,null,{isCommentDirty:!1,workItemId:this.props.commentInfo.workItemId})},t}(l.PureComponent);t.CommentEditor=a});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentReactionsEmoji",["require","exports","TFS/WorkItemTracking/Contracts","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking"],function(n,t,i,r){var u;Object.defineProperty(t,"__esModule",{value:!0});t.ReactionTypeToEmojiMap=void 0;t.ReactionTypeToEmojiMap=(u={},u[i.CommentReactionType.Like]={encodedValue:"&#x1F44D;",description:r.ReactionTypeEmojiThumbsUp},u[i.CommentReactionType.Dislike]={encodedValue:"&#x1F44E;",description:r.ReactionTypeEmojiThumbsDown},u[i.CommentReactionType.Hooray]={encodedValue:"&#x1F389;",description:r.ReactionTypeEmojiPartyPopper},u[i.CommentReactionType.Heart]={encodedValue:"&#x2764;",description:r.ReactionTypeEmojiRedHeart},u[i.CommentReactionType.Smile]={encodedValue:"&#x1F603;",description:r.ReactionTypeEmojiSmilingFace},u[i.CommentReactionType.Confused]={encodedValue:"&#x1F616;",description:r.ReactionTypeEmojiConfoundedFace},u)});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentReactionSelector",["require","exports","react","VSSUI/Util","TFS/WorkItemTracking/Contracts","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/WitControlMode","VSSUI/Callout","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentReactionsEmoji","VSS/Utils/String","VSSUI/Button","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsTelemetry","VSS/LoaderPlugins/Css!WorkItemTracking/Controls/WorkItemForm/Comments/CommentReactionSelector"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.CommentReactionSelector=void 0;var a=function(n){function t(){var t=__construct(this,n,arguments);for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r]);return t._onReactionButtonClick=function(){l.UsageTelemetryHelper.publishClickReactionSelectionButton();t.props.onReactButtonClick&&t.props.onReactButtonClick()},t._onRenderReactionDropdown=function(n,r,f,e,a,v,y){var p=t.props,w=p.commentId,k=p.onAddReaction,d=p.onDeleteReaction,g=p.reactionTypeToInfoMap,tt=p.onSelectionDismiss,b=Object.keys(s.ReactionTypeToEmojiMap).map(function(t,r,f){var e=Number(t),o=s.ReactionTypeToEmojiMap[e],a=g[e],v=function(){n.collapse();a&&a.isCurrentUserEngaged?(l.UsageTelemetryHelper.publishDisEngagedReaction(w,u.CommentReactionType[e]),d(w,e)):(l.UsageTelemetryHelper.publishEngagedReaction(w,u.CommentReactionType[e]),k(w,e))},y=function(n){n.preventDefault()};return i.createElement(c.Button,{key:t+w,className:"reaction-button-item",text:h.htmlDecode(o.encodedValue),onClick:v,onMouseDown:y,tooltipProps:{text:o.description,showOnFocus:!0},excludeTabStop:r>0,role:"menuitem",ariaPosInSet:r+1,ariaSetSize:f.length,ariaLabel:o.description})}),nt=function(){n.collapse()};return b.length>0&&i.createElement(o.Callout,{anchorElement:f,anchorOffset:e,anchorOrigin:a,anchorPoint:v,calloutOrigin:y,blurDismiss:!0,onDismiss:nt,contentShadow:!0,className:"wit-reaction-selection-container",role:"menu",escDismiss:!0,focuszoneProps:{direction:1,focusOnMount:!0,circularNavigation:!0,preprocessKeyStroke:t._preprocessKeyStroke}},b)},t._preprocessKeyStroke=function(n){return n.defaultPrevented||n.which!==9||n.preventDefault(),1},t}return __extends(t,n),t.prototype.render=function(){var n=this.props,t=n.isCommentReadonly,u=n.className,o=n.onSelectionDismiss,s=n.onFocus,h=n.onBlur,l=n.excludeTabStop,a=n.ariaPosInSet,v=n.ariaSetSize;return e.isCommentReactionsEnabled()&&!t&&i.createElement(c.ExpandableButton,{className:r.css("comment-reaction-button",u),iconProps:{iconName:"AddReaction"},tooltipProps:{text:f.AddYourReaction},onExpand:this._onReactionButtonClick,onCollapse:o,renderCallout:this._onRenderReactionDropdown,hideDropdownIcon:!0,onFocus:s,onBlur:h,excludeTabStop:l,role:"menuitem",ariaPosInSet:a,ariaSetSize:v,ariaLabel:f.AddYourReaction,subtle:!0})},t}(i.PureComponent);t.CommentReactionSelector=a});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentReactionStatusBar",["require","exports","react","VSSUI/Util","VSS/Utils/String","VSSUI/Button","WorkItemTracking/Scripts/Utils/WitControlMode","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentReactionsEmoji","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentReactionSelector","TFS/WorkItemTracking/Contracts","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsTelemetry","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSSUI/FocusZone","VSS/LoaderPlugins/Css!WorkItemTracking/Controls/WorkItemForm/Comments/CommentReactionStatusBar"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){Object.defineProperty(t,"__esModule",{value:!0});t.CommentReactionStatusBar=void 0;var v=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),t.prototype.render=function(){var v=this.props,n=v.commentId,y=v.isCommentReadonly,d=v.onAddReaction,g=v.onDeleteReaction,p=v.reactionTypeToInfoMap,tt=v.onGetRecentlyReactedUsers,it=v.recentlyReactedUsers,b=[],rt=0,w=0,k,nt;return p&&(k=Object.keys(p).map(function(n){return Number(n)}).filter(function(n){var t=p[n];return!!t&&t.totalCount>0}),nt=1,w=k.length+(y?0:1),b=k.map(function(e){var b=p[e],s=b.totalCount,a=b.isCurrentUserEngaged;if(s>0){var k=function(){a?(c.UsageTelemetryHelper.publishDisEngagedReaction(n,h.CommentReactionType[e],!0),g(n,e)):(c.UsageTelemetryHelper.publishEngagedReaction(n,h.CommentReactionType[e],!0),d(n,e))},v=o.ReactionTypeToEmojiMap[e],ut=function(){var r=it[e],t=[],f;return r&&r.length>0?(t=r.slice(0,s).map(function(n,t){return i.createElement("li",{key:n+t},n)}),f=s-10,f>0&&t.push(i.createElement("li",{className:"userlist-item",key:"nmoreusers"},u.format(l.ReactionAdditionalUsersCount,f)))):tt(n,e),t.length>0&&i.createElement("div",{className:"wit-userlist-tooltip"},i.createElement("h3",null,u.format(t.length>1?l.ReactionUserListHeaderPlural:l.ReactionUserListHeaderSingular,v.description)),i.createElement("ul",{className:"user-list"},t))},ft=s>99?"99+":s.toString();return i.createElement(f.Button,{key:e+"statusbar"+n,className:r.css(t.ReactionStatusButton,y&&"reaction-status-button-readonly",a&&"reaction-status-user-engaged"),tooltipProps:{renderContent:y?undefined:ut,showOnFocus:!0},ariaLabel:u.format(a?l.RemoveReaction:l.AddReaction,v.description),onClick:y?undefined:k,excludeTabStop:rt++>0,role:"menuitem",ariaPosInSet:nt++,ariaSetSize:w},i.createElement("span",{className:"reaction-status-info-container"},i.createElement("span",null,u.htmlDecode(v.encodedValue)),i.createElement("span",null,ft)))}return null}).filter(function(n){return n!==null})),e.isCommentReactionsEnabled()&&b.length>0&&i.createElement("div",null,i.createElement(a.FocusZone,{direction:1},i.createElement("div",{className:"wit-reaction-status-container"},b,i.createElement(s.CommentReactionSelector,{key:"reaction-selector-key"+n,className:r.css(t.ReactionStatusButton,"reaction-status-new-selector-btn"),isCommentReadonly:y,commentId:n,onAddReaction:d,onDeleteReaction:g,reactionTypeToInfoMap:p,excludeTabStop:!0,ariaPosInSet:w,ariaSetSize:w}))))},t.ReactionStatusButton="reaction-status-button",t}(i.PureComponent);t.CommentReactionStatusBar=v});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentViewer",["require","exports","OfficeFabric/Dialog","TFS/WorkItemTracking/Contracts","VSS/Utils/Date","VSS/Utils/String","VSSUI/Button","VSSUI/FocusWithin","VSSUI/FocusZone","VSSUI/Menu","VSSUI/Resources.Core","VSSUI/Resources.Widgets","VSSUI/Tooltip","VSSUI/Util","VSSUI/Utilities/Date","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentReactionSelector","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentReactionStatusBar","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsTelemetry","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/RichTextPreRenderUtility","WorkItemTracking/Scripts/Utils/WitControlMode","react","VSS/LoaderPlugins/Css!WorkItemTracking/Controls/WorkItemForm/Comments/CommentViewer"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){Object.defineProperty(t,"__esModule",{value:!0});t.CommentViewer=t.locationHashCharacter=void 0;t.locationHashCharacter="#";var tt=function(n){function tt(t){var u,r=__construct(this,n,[t]);for(var f in r)r.hasOwnProperty(f)&&(this[f]=r[f]);return r._commentContentRef=nt.createRef(),r._moreButtonRef=nt.createRef(),r._additionalContentProps={},r._renderActionButtons=function(){var n=r.props,f=n.canEdit,w=n.editDisabled,u=n.readonly,b=n.commentInfo,d=n.onAddReaction,tt=n.onDeleteReaction,it=n.reactionTypeToInfoMap,rt=n.editButtonRef,ut=n.isReactionsEnabled,ft=r.state.actionButtonsClassName,c=!1,i=!1,y=!1,t=0;return r._moreActions.length>0&&(c=!0,++t),u||(ut&&g.isCommentReactionsEnabled()&&(i=!0,++t),f&&(y=!0,++t)),nt.createElement(o.FocusWithin,{updateStateOnFocusChange:!0},function(n){var o=1;return nt.createElement(s.FocusZone,{direction:1},nt.createElement("div",{className:v.css("comment-toolbar",ft,n.hasFocus&&"comment-toolbar-focused"),role:"menubar"},i&&nt.createElement(p.CommentReactionSelector,{className:"comment-toolbar-reaction-button",commentId:b.id,isCommentReadonly:u,onAddReaction:d,onDeleteReaction:tt,reactionTypeToInfoMap:it,onReactButtonClick:r._makeActionButtonsVisible,onSelectionDismiss:r._onContextMenuDismiss,onFocus:n.onFocus,onBlur:n.onBlur,ariaPosInSet:u?undefined:o++,ariaSetSize:t}),y&&nt.createElement(a.TooltipHost,{directionalHint:5},nt.createElement(e.Button,{className:"comment-edit-button",iconProps:{iconName:"Edit"},ariaLabel:k.Edit,disabled:w,ref:rt,onClick:r._onEdit,onFocus:n.onFocus,onBlur:n.onBlur,excludeTabStop:i,role:"menuitem",ariaPosInSet:o++,ariaSetSize:t,subtle:!0})),c&&nt.createElement(h.MoreButton,{className:"comment-context-menu-button",contextualMenuProps:{menuProps:{id:"comment-context-menu",items:r._getMoreActions()}},onExpand:r._onContextMenuExpand,onCollapse:r._onContextMenuDismiss,ref:r._moreButtonRef,hideDropdownIcon:!0,iconProps:{iconName:"More"},onFocus:n.onFocus,onBlur:n.onBlur,tooltipProps:{text:l.MoreActions},excludeTabStop:i||f,role:"menuitem",ariaPosInSet:o++,ariaSetSize:t,subtle:!0})))})},r._getMoreActions=function(){return r._moreActions},r._onEdit=function(){b.UsageTelemetryHelper.publishEditComment();r.props.onEdit()},r._onContextMenuDismiss=function(){r.setState({actionButtonsClassName:""})},r._onContextMenuExpand=function(){b.UsageTelemetryHelper.publishClickOverflowButton();r._makeActionButtonsVisible()},r._makeActionButtonsVisible=function(){r.setState({actionButtonsClassName:"comment-action-buttons-visible"})},r._toggleConfirmationDialog=function(n){r.setState({showDeleteDialog:n})},r._renderConfirmationDialog=function(){var n="cancel-delete-comment";return nt.createElement(i.Dialog,{dialogContentProps:{type:i.DialogType.close,title:k.ConfirmDeleteComment},hidden:!1,modalProps:{className:"external-connection-confirmation-dialog",firstFocusableSelector:n,isBlocking:!0},onDismiss:r._dismissConfirmationDialog},nt.createElement(i.DialogFooter,null,nt.createElement(e.Button,{onClick:r._onConfirmDeleteClick,primary:!0},k.Delete),nt.createElement(e.Button,{className:n,onClick:r._dismissConfirmationDialog},k.Cancel)))},r._dismissConfirmationDialog=function(){r._toggleConfirmationDialog(!1);requestAnimationFrame(function(){return r._moreButtonRef&&r._moreButtonRef.current&&r._moreButtonRef.current.focus()});b.UsageTelemetryHelper.publishDeleteCommentCancel()},r._onConfirmDeleteClick=function(){var n=r.props.onDelete;r._toggleConfirmationDialog(!1);n();b.UsageTelemetryHelper.publishDeleteCommentConfirm()},r._updateMoreActions(t),r._additionalContentProps=(u={},u[tt.COMMENT_ID_ATTRIBUTE]=t.commentInfo.id,u),r.state={showDeleteDialog:!1,actionButtonsClassName:""},r}return __extends(tt,n),tt.prototype.render=function(){var i=this.props,o=i.readonly,n=i.commentInfo,s=i.onAddReaction,h=i.onDeleteReaction,l=i.reactionTypeToInfoMap,p=i.onGetRecentlyReactedUsers,b=i.recentlyReactedUsers,r=n.createdOnBehalfDate||n.createdDate,d=n.modifiedDate,e=n.createdOnBehalfOf||n.createdBy,g=n.createdDate.getTime()!==n.modifiedDate.getTime(),it=y.ago(r)===c.JustNow?k.CommentedJustNow:y.ago(r);return nt.createElement("div",{className:v.css(tt.ROOT_CLASS_NAME,location.hash===t.locationHashCharacter+this.props.commentInfo.id&&"highlighted")},nt.createElement("div",{className:"comment-header"},nt.createElement("div",{className:"comment-header-left"},nt.createElement("span",{className:"user-display-name"},nt.createElement(a.TooltipHost,{content:e.displayName,directionalHint:7,overflowMode:a.TooltipOverflowMode.Parent},e.displayName)),nt.createElement(a.TooltipHost,{content:u.localeFormat(r,"F"),directionalHint:7},nt.createElement("a",{className:"comment-timestamp",href:t.locationHashCharacter+this.props.commentInfo.id.toString(),target:"_blank"},f.format(k.CommentedFormat,it))),"\u00a0",g&&nt.createElement(a.TooltipHost,{content:f.format(k.CommentEditedTooltip,u.localeFormat(d,"F")),directionalHint:7},nt.createElement("span",{className:"comment-timestamp"},k.CommentEditedTag))),nt.createElement("div",{className:"comment-header-right"},this._renderActionButtons())),nt.createElement("div",__assign({className:tt.COMMENT_CONTENT_CLASS_NAME,ref:this._commentContentRef},this._additionalContentProps)),this.props.isReactionsEnabled?nt.createElement(w.CommentReactionStatusBar,{commentId:n.id,isCommentReadonly:o,onAddReaction:s,onDeleteReaction:h,reactionTypeToInfoMap:l,onGetRecentlyReactedUsers:p,recentlyReactedUsers:b}):null,this.state.showDeleteDialog&&this._renderConfirmationDialog())},tt.prototype.componentDidMount=function(){this._updateContent()},tt.prototype.componentDidUpdate=function(){this._updateContent()},tt.prototype.componentWillReceiveProps=function(n){var t=this.props,i=t.canEdit,r=t.moreActions;(n.canEdit!==i||n.moreActions!==r)&&this._updateMoreActions(n)},tt.prototype._updateMoreActions=function(n){var t,i=this,r=n.canEdit,u=n.moreActions;this._moreActions=[];(t=this._moreActions).push.apply(t,u);r&&this._moreActions.push({id:"delete",onActivate:function(){return i._toggleConfirmationDialog(!0)},iconProps:{iconName:"Delete"},text:k.Delete})},tt.prototype._updateContent=function(){var t=this._commentContentRef.current,n,i;t&&(n=this.props.commentInfo.format===r.CommentFormat.Markdown&&this.props.commentInfo.renderedText?this.props.commentInfo.renderedText:this.props.commentInfo.text,this._lastCommentText===n&&t.innerHTML||(i=$("<div>").html(n).html(),this._lastCommentText!==i&&(this._lastCommentText=i,d.richTextFilterContent(n).then(function(n){var i=$(t);i.html(n);d.richTextPreRenderProcessor(i,!0)}))))},tt.ROOT_CLASS_NAME="wit-comment-viewer",tt.COMMENT_CONTENT_CLASS_NAME="comment-content",tt.COMMENT_ID_ATTRIBUTE="data-comment-id",tt.defaultProps={moreActions:[]},tt}(nt.PureComponent);t.CommentViewer=tt});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentItem",["require","exports","react","VSS/Identities/Picker/Controls","VSS/Identities/Picker/PersonaCard","VSS/Service","VSS/Utils/UI","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentEditor","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentViewer","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper","VSS/LoaderPlugins/Css!WorkItemTracking/Controls/WorkItemForm/Comments/CommentItem"],function(n,t,i,r,u,f,e,o,s,h){Object.defineProperty(t,"__esModule",{value:!0});t.CommentItem=void 0;var c=function(n){function t(t){var r=__construct(this,n,[t]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r._imageElementRef=i.createRef(),r._editButtonRef=i.createRef(),r._renderBody=function(){var n=r.props,u=n.canEdit,f=n.editDisabled,e=n.readonly,t=n.commentInfo,h=n.uploadImageHandler,c=n.onAddReaction,l=n.onDeleteReaction,a=n.reactionTypeToInfoMap,v=n.onGetRecentlyReactedUsers,y=n.recentlyReactedUsers,p=n.moreActionsForViewer;return r.state.isEditMode?i.createElement(o.CommentEditor,{commentInfo:t,onUpdate:r._onUpdate,onCancel:r._onEditCancel,uploadImageHandler:h}):i.createElement(s.CommentViewer,{canEdit:u,editDisabled:f,readonly:e,isReactionsEnabled:r.props.isReactionsEnabled,commentInfo:t,onAddReaction:c,onDeleteReaction:l,reactionTypeToInfoMap:a,onEdit:r._onEdit,onDelete:r._onDelete,onGetRecentlyReactedUsers:v,recentlyReactedUsers:y,moreActions:p,editButtonRef:r._editButtonRef})},r._onDismissPersonaCard=function(){r._toggleShowProfileCard(!1)},r._onEdit=function(){r._toggleEditMode(!0)},r._onUpdate=function(n){var t=r.props,i=t.onUpdate,u=t.commentInfo;i(u.id,n);r._toggleEditMode(!1)},r._onDelete=function(){var n=r.props,t=n.onDelete,i=n.commentInfo;t(i.id)},r._onEditCancel=function(){r._toggleEditMode(!1)},r._showProfileCard=function(){r._toggleShowProfileCard(!0)},r.state={isEditMode:!1,showProfileCard:!1},r}return __extends(t,n),t.prototype.render=function(){var e=this.props.commentInfo,o=this.state.showProfileCard,n=e.createdOnBehalfOf||e.createdBy,s=n&&n.displayName;return i.createElement("div",{className:"wit-comment-item"},i.createElement("div",{className:"comment-item-left"},i.createElement("button",{className:"avatar-button cursor-hover-card",onClick:this._showProfileCard,ref:this._imageElementRef},i.createElement("img",{className:"avatar-button-image",src:h.getAvatarUrl(n),alt:s})),o&&i.createElement(u.PersonaCard,{uniqueAttribute:n.descriptor||n.uniqueName,target:this._imageElementRef.current,entityOperationsFacade:f.getService(r.EntityOperationsFacade),consumerId:t.ID_CARD_CONSUMER_ID,onDismissCallback:this._onDismissPersonaCard})),i.createElement("div",{className:"comment-item-right"},this._renderBody()))},t.prototype.componentDidMount=function(){var n=this;location.hash===s.locationHashCharacter+this.props.commentInfo.id&&window.setTimeout(function(){var t,i;if((i=(t=n._imageElementRef)===null||t===void 0?void 0:t.current)!==null&&i!==void 0)return i.scrollIntoView({behavior:"smooth"})},250)},t.prototype.componentDidUpdate=function(n,t){var i=this;if(t.isEditMode&&!this.state.isEditMode){if(e.BrowserCheckUtils.isFirefox()){setTimeout(function(){return i._resetFocusToEditButton()},200);return}this._resetFocusToEditButton()}},t.prototype.focus=function(){var n,t;(t=(n=this._imageElementRef)===null||n===void 0?void 0:n.current)===null||t===void 0?void 0:t.focus()},t.prototype._resetFocusToEditButton=function(){this._editButtonRef.current&&this._editButtonRef.current.focus()},t.prototype._toggleEditMode=function(n){var t=this.props,i=t.onModeChange,r=t.commentInfo;i(r.id,n);this.setState({isEditMode:n})},t.prototype._toggleShowProfileCard=function(n){this.setState({showProfileCard:n})},t.ID_CARD_CONSUMER_ID="1b86119a-877b-41f6-a3c5-847e0b463cd4",t}(i.Component);t.CommentItem=c});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/NewCommentItem",["require","exports","react","VSS/Core/Observable","VSS/Events/Services","VSS/Identities/Picker/PersonaCard","VSSPreview/Flux/Components/LWP","VSSUI/Observer","WorkItemTracking/Scripts/Components/HtmlEditor","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/Utils/RichTextPreRenderUtility","WorkItemTracking/Scripts/Utils/WorkItemIdentityHelper","VSS/Identities/Picker/Controls","VSS/Service","VSS/LoaderPlugins/Css!WorkItemTracking/Controls/WorkItemForm/Comments/NewCommentItem"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){Object.defineProperty(t,"__esModule",{value:!0});t.NewCommentItem=void 0;var y={controlName:"CommentEditor"},p=function(n){function t(){var e=__construct(this,n,arguments);for(var p in e)e.hasOwnProperty(p)&&(this[p]=e[p]);return e._personaButtonRef=i.createRef(),e._isPersonaCardVisible=new r.ObservableValue(!1),e._onAddReaction=function(n,t){e.props.onAddReaction(n,t)},e._onDeleteReaction=function(n,t){e.props.onDeleteReaction(n,t)},e._onGetRecentlyReactedUsers=function(n,t){e.props.onGetRecentlyReactedUsers(n,t)},e._onStartEdit=function(n){var t=e.props.onModeChange;t(n,!0)},e._onCancelEdit=function(n){var t=e.props.onModeChange;t(n,!1);e._lastCommentText=null},e._onConfirmDelete=function(n,t){if(t){var i=e.props.onDelete;i(n)}},e._onUpdate=function(n,t){var i=e.props,r=i.onUpdate,u=i.onModeChange,f=i.commentInfo;r(n,t);u(n,!1)},e._onDirtyChange=function(n,t){var i=e.props.commentInfo;u.getService().fire(h.Actions.DISCUSSION_EDIT_DIRTY_CHANGED,null,{isCommentDirty:t,workItemId:i.workItemId})},e._onRenderPersona=function(n){return i.createElement(i.Fragment,null,i.createElement("button",{className:"avatar-button cursor-hover-card",onClick:e._showProfileCard,ref:e._personaButtonRef},i.createElement("img",{className:"avatar-button-image",src:l.getAvatarUrl(n)})),i.createElement(o.Observer,{isCardVisible:e._isPersonaCardVisible},function(r){return r.isCardVisible&&i.createElement(f.PersonaCard,{uniqueAttribute:n.descriptor||n.uniqueName,target:e._personaButtonRef.current,entityOperationsFacade:v.getService(a.EntityOperationsFacade),consumerId:t.IdCardConsumerId,onDismissCallback:e._hideProfileCard})}))},e._onPostRenderContent=function(n,t){var i=e.props.commentInfo,r=$("<div>").html(i.text).html();e._lastCommentText!==r&&(e._lastCommentText=r,c.richTextFilterContent(i.text).then(function(n){var i=$(t);i.html(n);c.richTextPreRenderProcessor(i,!0)}))},e._showProfileCard=function(){e._isPersonaCardVisible.value=!0},e._hideProfileCard=function(){e._isPersonaCardVisible.value=!1},e._onRenderEditor=function(n){var t=e.props,r=t.commentInfo,u=t.uploadImageHandler;return e._editorProps=n,i.createElement(s.HtmlEditor,{htmlContent:r.text,onChange:e._onEditorChange,ref:e._editorRef,telemetryContext:y,autoFocus:!0,showChromeBorder:!0,editOnlyMode:!0,mentionsEnabled:!0,uploadImageHandler:u,trimWithEmptyCheck:!0})},e._editorRef=function(n){e._editorProps.ref(n?{getValue:function(){return n.htmlContent},isEmpty:function(){return n.isEmpty()}}:null);e._editor=n},e._onEditorChange=function(){e._editorProps.onChange(e._editor&&e._editor.htmlContent)},e}return __extends(t,n),t.prototype.render=function(){var n=this.props,u=n.commentInfo,f=n.canEdit,o=n.readonly,s=n.uploadImageHandler,h=n.additionalMoreActions,c=n.isEditing,a=n.viewerClassName,v=n.viewerContentClassName,y=n.workItemId,p=n.projectId,w=n.isReactionsEnabled,b=n.reactionTypeToInfoMap,k=n.editDisabled,d={artifactInfo:{artifactKind:t.WorkItemArtifactKind,artifactId:y.toString(),projectId:p},additionalMoreActions:h,className:"wit-comment-item",viewerClassName:a,viewerContentClassName:v,uploadImageHandler:s,getAvatarUrl:l.getAvatarUrl,isEditing:c,canEdit:f,editDisabled:k,readonly:o,isReactionsEnabled:w,onAddReaction:this._onAddReaction,onDeleteReaction:this._onDeleteReaction,onGetRecentlyReactedUsers:this._onGetRecentlyReactedUsers,reactionTypeToInfoMap:b,comment:__assign(__assign({},u),{format:new r.ObservableValue(u.format)}),onStartEdit:this._onStartEdit,onCancelEdit:this._onCancelEdit,onConfirmDelete:this._onConfirmDelete,onUpdate:this._onUpdate,onRenderPersona:this._onRenderPersona,onRenderEditor:this._onRenderEditor,onDirtyChange:this._onDirtyChange,onPostRenderContent:this._onPostRenderContent};return i.createElement(e.LWPComponent,__assign({wrappedType:"comment-item",dependencies:["ms.vss-comments.item"]},d))},t.IdCardConsumerId="1b86119a-877b-41f6-a3c5-847e0b463cd4",t.WorkItemArtifactKind="E7626DBD-6075-416C-A31E-DFD48FE3CFDE",t}(i.Component);t.NewCommentItem=p});

define("WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsSection",["require","exports","Mention/Scripts/Resources/TFS.Resources.Mention","Mention/Scripts/TFS.Mention","OfficeFabric/Spinner","react","VSS/Flux/Component","VSS/Utils/Html","VSS/Utils/String","VSSUI/Button","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentItem","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentsTelemetry","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/CommentViewer","WorkItemTracking/Scripts/Controls/WorkItemForm/Comments/NewCommentItem","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","WorkItemTracking/Scripts/Utils/HtmlUtil","WorkItemTracking/Scripts/Utils/WitControlMode","VSS/LoaderPlugins/Css!WorkItemTracking/Controls/WorkItemForm/Comments/CommentsSection"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){Object.defineProperty(t,"__esModule",{value:!0});t.CommentsSection=void 0;var b=function(n){function t(t){var i=__construct(this,n,[t]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._isFirstPageCached=!1,i._previousVisibleCount=0,i._performanceTelemetryHelper=new l.PerformanceTelemetryHelper,i._isInitialization=!0,i._commentRefs={},i._rootDivRef=f.createRef(),i._showMore=function(){var n=i.props,t=n.store,r=n.actionsCreator;i._previousVisibleCount=t.getVisibleCommentCount();r.pageComments(t.getLastContinuationToken());i._performanceTelemetryHelper.startCommentsPaging()},i._onModeChange=function(n,t){i.setState({editingCommentId:t?n:null})},i._onDelete=function(n){var t=i.props.store.getAdjacentCommentId(n);i.props.actionsCreator.deleteComment(n);delete i._commentRefs[n];i._updateFocus(t)},i._onUpdate=function(n,t){i.props.actionsCreator.updateComment(n,t)},i._isFirstPageCached=t.store.hasFirstPage(),i._performanceTelemetryHelper.startCommentsInitialization(),i.state={editingCommentId:null},i}return __extends(t,n),t.prototype.render=function(){var t=this,r=this.props,l=r.commentingIsDisabled,a=r.currentIdentity,n=r.store,b=r.uploadImageHandler,o=r.actionsCreator,k=r.isReactionsEnabled,d=n.getComments(),v=n.getVisibleCommentCount(),g=v<n.getTotalComments(),p=this.state.editingCommentId,e=null;return n.isPaging()?e=f.createElement(u.Spinner,{size:u.SpinnerSize.small,className:"spinner-container"}):g&&n.getLastContinuationToken()&&(e=f.createElement(f.Fragment,null,f.createElement(h.Button,{onClick:this._showMore,className:"comments-show-more"},y.ShowMoreComments),"\u00a0",f.createElement("span",null,s.format(i.DiscussionStateTextFormat,v,n.getTotalComments())))),f.createElement("div",{className:"comments-section",ref:this._rootDivRef},f.createElement("div",null,d.map(function(i){var e=t._getMoreActionsForViewer(i),s=n.getCommentReactions(i.id),r=s&&s.reactionTypeToInfoMap,h={},u;return(r&&(h=Object.keys(r).reduce(function(n,t){var i=parseInt(t);return n[i]=r[i].engagedUsers.map(function(n){return n.identityDisplayName}),n},{})),u=t._commentRefs[i.id],u||(u=f.createRef(),t._commentRefs[i.id]=u),w.useSharedCommentsUIEnabled())?t._getNewCommentItem(i,e,r):f.createElement(c.CommentItem,{canEdit:w.isNewCommentsServiceEditAndDeleteEnabled()&&!l&&(p===null&&(a.id===i.createdBy.id||i.createdOnBehalfOf&&a.id===i.createdOnBehalfOf.id)||i.id===p),editDisabled:n.isCommentUpdating(i.id),readonly:l,isReactionsEnabled:k,commentInfo:i,key:i.id,onModeChange:t._onModeChange,onDelete:t._onDelete,onUpdate:t._onUpdate,uploadImageHandler:b,onAddReaction:o.addCommentReaction,onDeleteReaction:o.deleteCommentReaction,reactionTypeToInfoMap:r,onGetRecentlyReactedUsers:o.getRecentlyReactedUsers,recentlyReactedUsers:h,moreActionsForViewer:e,ref:u})})),e&&f.createElement("div",{className:"comments-page-control"},e))},t.prototype._getNewCommentItem=function(n,t,i){var r=this.props,o=r.commentingIsDisabled,s=r.currentIdentity,h=r.store,c=r.uploadImageHandler,l=r.workItemId,y=r.projectId,u=r.actionsCreator,e=this.state.editingCommentId;return f.createElement(v.NewCommentItem,{isEditing:n.id===e,canEdit:w.isNewCommentsServiceEditAndDeleteEnabled()&&!o&&(e===null&&(s.id===n.createdBy.id||n.createdOnBehalfOf&&s.id===n.createdOnBehalfOf.id)||n.id===e),editDisabled:h.isCommentUpdating(n.id),readonly:o,commentInfo:n,key:n.id,onModeChange:this._onModeChange,onDelete:this._onDelete,onUpdate:this._onUpdate,isReactionsEnabled:w.isCommentReactionsEnabled(),onAddReaction:u.addCommentReaction,onDeleteReaction:u.deleteCommentReaction,reactionTypeToInfoMap:__assign({},i),onGetRecentlyReactedUsers:u.getRecentlyReactedUsers,uploadImageHandler:c,additionalMoreActions:t,viewerClassName:a.CommentViewer.ROOT_CLASS_NAME,viewerContentClassName:a.CommentViewer.COMMENT_CONTENT_CLASS_NAME,workItemId:l,projectId:y})},t.prototype._getMoreActionsForViewer=function(n){var u=this,t=this.props,i=t.onQuoteReply,f=t.commentingIsDisabled,e=function(){var t=u._getCommentHtml(n.id),r=t.html,f=t.fromSelection;r&&(i(r),l.UsageTelemetryHelper.publishQuoteReply(f))},r=[];return!f&&i&&r.push({id:"quote-reply",iconProps:{iconName:"Reply"},text:y.QuoteReply,onActivate:e}),r},t.prototype.componentDidMount=function(){n.prototype.componentDidMount.call(this);this._tryEndInitializationScenario()},t.prototype.componentDidUpdate=function(){this._tryEndInitializationScenario();this._tryEndPagingScenario()},t.prototype.getStore=function(){return this.props.store},t.prototype.getState=function(){return this.state},t.prototype._getCommentHtml=function(n){var u=n.toString(10),t=this._getCommentSelectionHtml(u),i,f,e;return!t&&this._rootDivRef.current&&(i=this._rootDivRef.current.querySelector("[".concat(a.CommentViewer.COMMENT_ID_ATTRIBUTE,'="').concat(u,'"] .').concat(a.CommentViewer.COMMENT_CONTENT_CLASS_NAME)),i&&(t=i.innerHTML)),f=[r.Constants.HTML_RENDERED_MENTION_ATTR_NAME],e=t&&o.HtmlNormalizer.normalizeStripAttributes(t,[],f),{html:e,fromSelection:!0}},t.prototype._getCommentSelectionHtml=function(){if(window.getSelection){var n=window.getSelection(),r=n.anchorNode&&n.anchorNode.parentElement,u=n.focusNode&&n.focusNode.parentElement,t=this._getClosetCommentId(r),f=this._getClosetCommentId(u);if(t&&t===f){if(n.rangeCount>0){var e=n.getRangeAt(0),o=e.cloneContents(),i=document.createElement("div");return i.appendChild(o),i.innerHTML}return s.htmlEncode(n.toString()).replace(/\n/g,"<br />")}}return null},t.prototype._getClosetCommentId=function(n){var r=".".concat(a.CommentViewer.COMMENT_CONTENT_CLASS_NAME),i=p.closest(n,r),t;return i?(t=p.closest(i,".".concat(a.CommentViewer.ROOT_CLASS_NAME)),t&&t.getAttribute(a.CommentViewer.COMMENT_ID_ATTRIBUTE)):null},t.prototype._tryEndInitializationScenario=function(){var n=this.props.store;n.hasFirstPage()&&this._isInitialization&&(this._performanceTelemetryHelper.endInitialization({visibleCount:n.getVisibleCommentCount(),totalCount:n.getTotalComments(),cached:this._isFirstPageCached}),this._isInitialization=!1)},t.prototype._tryEndPagingScenario=function(){var n=this.props.store;this._performanceTelemetryHelper.isCommentsPagingStarted()&&!n.isPaging()&&this._performanceTelemetryHelper.endPaging({previousVisibleCount:this._previousVisibleCount,currentVisibleCount:n.getVisibleCommentCount(),totalCount:n.getTotalComments()})},t.prototype._updateFocus=function(n){var t,i;n>-1?(i=(t=this._commentRefs[n])===null||t===void 0?void 0:t.current)===null||i===void 0?void 0:i.focus():this.props.focusEditor&&this.props.focusEditor()},t}(e.Component);t.CommentsSection=b});

define("Presentation/Scripts/TFS/TFS.WebSettingsService",["require","exports","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Diag"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.WebSettingsService=t.WebSettingsScope=void 0,function(n){n[n.User=1]="User";n[n.UserAndTeam=3]="UserAndTeam";n[n.Project=4]="Project";n[n.ProjectAndUser=5]="ProjectAndUser";n[n.Collection=6]="Collection";n[n.Root=7]="Root"}(f=t.WebSettingsScope||(t.WebSettingsScope={}));e=function(n){function t(){var t=__construct(this,n,arguments);for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);return t}return __extends(t,n),t.prototype.canAccessTeamSettings=function(){var n=this.getTfsContext();return Boolean(n.currentTeam)},t.prototype.beginWriteSetting=function(n,t,i,u,e,o){var s;return typeof t=="boolean"?s="setBoolean":typeof t=="number"?(t=Math.floor(t),s="setInteger"):(s="setString",typeof t=="undefined"?t=null:t!==null&&typeof t!="string"&&(t=$.param(t))),typeof i=="undefined"&&(i=f.User),r.postMSJSON(this._getApiLocation(s,this._getContext(i)),{path:n,value:t,scope:i},u,e,o)},t.prototype.beginReadSetting=function(n,t,i,u,e){return typeof t=="undefined"&&(t=f.User),r.getMSJSON(this._getApiLocation("readSetting",this._getContext(t)),{path:n,scope:t},i,u,e)},t.prototype.writeLocalSetting=function(n,t,i,r){var f=this._getScopedKey(n,i);if(f)try{window.localStorage.setItem(f,t)}catch(e){if(r)throw e;else u.logWarning("Local storage write failed."),u.logWarning(e)}},t.prototype.readLocalSetting=function(n,t,i){var r=this._getScopedKey(n,t);if(r)try{return window.localStorage.getItem(r)}catch(f){if(i)throw f;else u.logWarning("Local storage read failed."),u.logWarning(f)}return null},t.prototype.removeLocalSetting=function(n,t,i){var r=this._getScopedKey(n,t);if(r)try{window.localStorage.removeItem(r)}catch(f){if(i)throw f;else u.logWarning("Local storage removal failed."),u.logWarning(f)}return null},t.prototype._getScopedKey=function(n,t){var i=this.getTfsContext(),r=i.currentIdentity?i.currentIdentity.id:null,s=i.currentTeam?i.currentTeam.identity.id:null,o,e;switch(t){case f.User:return r+n;case f.UserAndTeam:return r+"/"+s+n;case f.Project:return e=i.navigation?i.navigation.projectId:null,o=i.navigation?i.navigation.collection.instanceId:null,o+"/"+e+n;case f.ProjectAndUser:return e=i.navigation?i.navigation.projectId:null,e+"/"+r+n;default:return null}},t.prototype._getApiLocation=function(n,t){return this.getTfsContext().getActionUrl(n,"webSettings",{area:"api",team:t.team,project:t.project,serviceHost:this.getCurrentServiceHost()})},t.prototype._getContext=function(n){return n===f.User||n===f.Collection||n===f.Root?{team:"",project:""}:n===f.Project?{team:"",project:this.getTfsContext().contextData.project.id}:{team:this.getTfsContext().currentTeam.identity.id}},t}(i.TfsService);t.WebSettingsService=e});

define("Build.Common/Scripts/Registration.Artifacts",["require","exports","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/VSS"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});r.ClientLinking.registerArtifactResolver(i.ToolNames.TeamBuild,function(n,t,i,r){u.using(["Build.Common/Scripts/BuildArtifacts"],function(u){u.BuildArtifactResolver.beginResolve(n,t,i,r)})});u.tfsModuleLoaded("Registration.Artifacts",t)});

define("Requirements/Scripts/TFS.Requirements.Setup",["require","exports","VSS/VSS","VSS/Artifacts/Constants","VSS/Artifacts/Services"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});u.ClientLinking.registerArtifactResolver(r.ToolNames.Requirements,function(n,t,r,u){i.using(["Requirements/Scripts/TFS.Requirements.Utils"],function(i){i.RequirementsArtifactHandler.beginResolve(n,t,r,u)})});i.tfsModuleLoaded("TFS.Requirements.Setup",t)});

define("TestManagement/Scripts/TFS.TestManagement.Setup",["require","exports","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/VSS"],function(n,t,i,r,u){Object.defineProperty(t,"__esModule",{value:!0});r.ClientLinking.registerArtifactResolver(i.ToolNames.TestManagement,function(n,t,i,r){u.using(["TestManagement/Scripts/TFS.TestManagement.TestManagementHandler"],function(u){u.TestManagementArtifactHandler.beginResolve(n,t,i,r)})});u.tfsModuleLoaded("TFS.TestManagement.Setup",t)});

define("Presentation/Scripts/TFS/TFS.ArtifactPlugins",["require","exports","q","VSS/Diag"],function(n,t,i,r){function e(n,t){n=n.toLowerCase();u[n]=t}function s(){return u}function h(n,t){var i;n=n.toLowerCase();i=u[n];i?i(t):t(null)}function c(n){var t=i.defer();return h(n,function(i){i?t.resolve(i):t.reject("Could not create plug-in of type "+n)}),t.promise}function l(n){return f(n.tool,n.type)}function f(n,t){return(n+"/"+t).toLowerCase()}function a(n){return f(n.tool,n.type)}var o,u;Object.defineProperty(t,"__esModule",{value:!0});t.combineArtifactType=t.combineToolAndType=t.combineArtifactToolAndType=t.beginGetArtifactPlugin=t.getGlobalArtifactPlugins=t.registerArtifactPluginAsync=t.ArtifactIconType=void 0,function(n){n[n.icon=0]="icon";n[n.colorBar=1]="colorBar";n[n.colorCircle=2]="colorCircle"}(o=t.ArtifactIconType||(t.ArtifactIconType={}));u={};t.registerArtifactPluginAsync=e;t.getGlobalArtifactPlugins=s;t.beginGetArtifactPlugin=c;t.combineArtifactToolAndType=l;t.combineToolAndType=f;t.combineArtifactType=a});

define("VersionControl/Scripts/TFS.VersionControl.Registration.Artifacts",["require","exports","VSS/VSS","VSS/Artifacts/Constants","VSS/Artifacts/Services","Presentation/Scripts/TFS/TFS.ArtifactPlugins"],function(n,t,i,r,u,f){Object.defineProperty(t,"__esModule",{value:!0});u.ClientLinking.registerArtifactResolver(r.ToolNames.VersionControl,function(n,t,r,u){i.using(["VersionControl/Scripts/TFS.VersionControl"],function(i){i.VersionControlArtifactHandler.beginResolve(n,t,r,u)})});u.ClientLinking.registerArtifactResolver(r.ToolNames.Git,function(n,t,r,u){i.using(["VersionControl/Scripts/TFS.VersionControl"],function(i){i.GitArtifactHandler.beginResolve(n,t,r,u)})});f.registerArtifactPluginAsync("git",function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.RelatedArtifacts"],function(t){n(t.VCArtifactPlugin)})});i.tfsModuleLoaded("TFS.VersionControl.Registration.Artifacts",t)});

define("Presentation/Scripts/TFS/TFS.OM.Common",["require","exports","VSS/VSS","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VSS/Utils/UI","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.WebSettingsService","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Diag","VSS/Service","VSS/Events/Action","VSS/Context","VSS/Common/Contracts/Platform"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function k(n){var t=new Error(u.format("Favorite item '{0}' already exist.",n));return t.name=b.FavoriteItemAlreadyExist,t}function it(n,t,i){var r;return r={area:"api"},t=t||n.navigation.topMostLevel,r.team=i,t>=o.NavigationContextLevels.Application&&(t<o.NavigationContextLevels.Team&&(r.ignoreDefaultTeam=!0,r.team=""),t<o.NavigationContextLevels.Project&&(r.project=""),t<o.NavigationContextLevels.Collection&&(r.serviceHost="")),r}var b,d,g,nt,p,w,tt,rt,et,ut,ft;Object.defineProperty(t,"__esModule",{value:!0});t.AlmUriManager=t.AlmUriBuilder=t.ContextUtils=t.FavoriteStore=t.FavoriteFolder=t.FavoriteItem=t.ProjectCollection=t.Deployment=t.Application=void 0,function(n){n.FavoriteItemAlreadyExist="VSS.Service.FavoriteItemAlreadyExist"}(b||(b={}));d=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:v.getDefaultWebContext();return l.VssConnection.getConnection(t,y.ContextHostType.Application)},n.getDefaultConnection=function(){return l.VssConnection.getConnection(v.getDefaultWebContext(),y.ContextHostType.Application)},n}();t.Application=d;g=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:v.getDefaultWebContext();return l.VssConnection.getConnection(t,y.ContextHostType.Deployment)},n.getDefaultConnection=function(){return l.VssConnection.getConnection(v.getDefaultWebContext(),y.ContextHostType.Deployment)},n}();t.Deployment=g;nt=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:v.getDefaultWebContext();return l.VssConnection.getConnection(t,y.ContextHostType.ProjectCollection)},n.getDefaultConnection=function(){return l.VssConnection.getConnection(v.getDefaultWebContext(),y.ContextHostType.ProjectCollection)},n}();t.ProjectCollection=nt;p=function(){function n(n,t){this.favStore=n;t&&(this.id=t.id,this.name=t.name,this.parentId=t.parentId,this.type=t.type,this.data=t.data,this.artifactIsDeleted=t.artifactIsDeleted)}return n.prototype.path=function(n){return e.calculateTreePath.call(this,n,"/","name","root")},n.prototype.beginRename=function(n,t,r){var u=this,f;this.parent&&this.parent.findChildItem(n,this.type,this.data)?i.handleError(k(n),r,this):(f=$.extend({},this),f.name=n,this.favStore.beginUpdateItems([f],function(){u.name=n;$(window).trigger("favorite-item-renamed",u);typeof t=="function"&&t.call(u,u)},r))},n.prototype.beginDelete=function(n,t,i){this.favStore.beginDeleteItems([this],n,t,i)},n.prototype.onDelete=function(n,t){!t&&this.parent&&this.parent.remove(this);delete this.favStore.all[this.id];n&&$(window).trigger("favorite-item-removed",this)},n.FAVITEM_TYPE_WIT_QUERYITEM="Microsoft.TeamFoundation.WorkItemTracking.QueryItem",n.FAVITEM_TYPE_WIT_QUERYCHART="Microsoft.TeamFoundation.WorkItemTracking.QueryChart",n.FAVITEM_TYPE_VC_PATH="Microsoft.TeamFoundation.VersionControl.Path",n.FAVITEM_TYPE_GIT_REPOSITORY="Microsoft.TeamFoundation.Git.Repository",n.FAVITEM_TYPE_GIT_REPOSITORY_FORK="Microsoft.TeamFoundation.Git.Repository.Fork",n.FAVITEM_TYPE_TFVC_REPOSITORY="Microsoft.TeamFoundation.Tfvc.Repository",n.FAVITEM_TYPE_BUILD_DEFINITION="Microsoft.TeamFoundation.Build.Definition",n.FAVITEM_TYPE_TESTMANAGEMENT_CHART="Microsoft.Teamfoundation.TestManagement.Charts",n.FAVITEM_TYPE_PROJECT="Microsoft.TeamFoundation.Classification.TeamProject",n.FAVITEM_TYPE_TEAM="Microsoft.TeamFoundation.Teams.Team",n.FAVITEM_TYPE_TEST_PLAN="Microsoft.TeamFoundation.TestManagement.Plan",n}();t.FavoriteItem=p;w=function(n){function t(t,i){var r=__construct(this,n,[t,i]);for(var u in r)r.hasOwnProperty(u)&&(this[u]=r[u]);return r.children=[],r}return __extends(t,n),t.prototype.add=function(n,t){this.children.push(n);n.parent=this;t!==!0&&this.children.sort(function(n,t){return u.localeIgnoreCaseComparer(n.name,t.name)})},t.prototype.remove=function(n){f.remove(this.children,n)},t.prototype.clear=function(){this.children=[]},t.prototype.findByPath=function(n){return e.findTreeNode.call(this,n,"/",u.localeIgnoreCaseComparer,"name")},t.prototype.findByData=function(n){for(var i,t=0,r=this.children.length;t<r;t++)if(i=this.children[t],i.data===n)return i;return null},t.prototype.beginCreateNewFolder=function(n,t,i){this.beginCreateNewItem(n,null,null,t,i)},t.prototype.beginCreateNewItem=function(n,r,u,f,e,o){var s,h=this,c;(o===null||o===undefined)&&(o=!0);this.findChildItem(n,r,u)?i.handleError(k(n),e,this):(c={id:undefined,parentId:this.id,name:n,type:r,data:u},s=r?new p(this.favStore,c):new t(this.favStore,c),this.favStore.beginUpdateItems([s],function(){h.add(s);h.favStore.all[s.id]=s;o&&$(window).trigger("favorite-item-created",s);typeof f=="function"&&f.call(h,s)},e))},t.prototype.onDelete=function(t,i){$.each(this.children,function(n,t){t.onDelete(!1,!0)});n.prototype.onDelete.call(this,t,i)},t.prototype.findChildItem=function(n,t,i){for(var r,f=0,e=this.children.length;f<e;f++)if(r=this.children[f],u.localeIgnoreCaseComparer(n,r.name)===0&&r.type===t&&r.data===i)return r;return null},t}(p);t.FavoriteFolder=w;tt={};rt=function(n){function t(t,i,r,u,f,e){var o=n.call(this,null,{id:f,name:e})||this;return o.root=!0,o.favStore=o,o._tfsContext=t,o._routeData=i,o._identity=r,o._scope=u,o.all={},o}return __extends(t,n),t.computeStoreKey=function(n,t,i,r){return n.getActionUrl("list","favorites",$.extend({},r,{identityId:t,scope:i}))},t.createFavoriteStore=function(n,i,r,u,f){var e,o;return r===null&&(r=undefined),e=it(n,i,r),o=t.computeStoreKey(n,r,u,e),new t(n,e,r,u,o,f)},t.beginGetFavoriteStore=function(n,r,u,f,e,o,s,h){var c,l;o?(c=t.createFavoriteStore(n,r,u,f,e),c.beginRefresh(function(){s(c)},h)):(l=t.computeStoreKey(n,u,f,it(n,r,u)),i.queueRequest(this,tt,l,s,h,function(i,o){var s=t.createFavoriteStore(n,r,u,f,e);s.beginRefresh(function(){i(s)},o)}))},t.getFavoriteStore=function(n,i,r,u,f){return t.createFavoriteStore(n,i,r,u,f)},t.prototype.beginRefresh=function(n,t){var i,r=this;i=this._tfsContext.getActionUrl("list","favorites",this._routeData);h.getMSJSON(i,{identityId:this._identity,scope:this._scope},function(t){r._populateItems(t);typeof n=="function"&&n.call(r)},t)},t.prototype.beginDeleteItems=function(n,t,i,r){var e=this,u,f;(r===null||r===undefined)&&(r=!0);n&&n.length&&(f=this._tfsContext.getActionUrl("delete","favorites",this._routeData),u=$.map(n,function(n){return n.id}),h.postMSJSON(f,{identityId:this._identity,scope:this._scope,favItemIds:u},function(){$.each(n,function(n,t){t.onDelete(r)});typeof t=="function"&&t.call(e,n)},i))},t.prototype.beginUpdateItems=function(n,t,i){var u=this,f,e;n&&n.length&&(e=this._tfsContext.getActionUrl("update","favorites",this._routeData),f=$.map(n,function(n){return r.stringifyMSJSON({id:n.id,parentId:n.parentId===u.id?undefined:n.parentId,name:n.name,type:n.type,data:n.data,artifactIsDeleted:n.artifactIsDeleted})}),h.postMSJSON(e,{identityId:this._identity,scope:this._scope,favItemJsons:f},function(i){$.each(i,function(t,i){n[i.index].id=i.id});typeof t=="function"&&t.call(u,n)},i))},t.prototype._populateItems=function(n){var t={},r,i,f,e=this;this.clear();n&&(n.sort(function(n,t){return u.localeIgnoreCaseComparer(n.name,t.name)}),$.each(n,function(n,i){var r;r=i.type?new p(e,i):new w(e,i);t[r.id]=r}));for(r in t)t.hasOwnProperty(r)&&(i=t[r],f=t[i.parentId],f?f.add(i,!0):this.add(i,!0));this.all=t},t.FAVORITE_STORE_SCOPE_FAVORITE_QUERIES="WorkItemTracking.Queries",t.FAVORITE_STORE_SCOPE_FAVORITE_BUILD_DEFINITIONS="Build.Definitions",t.FAVORITE_STORE_SCOPE_FAVORITE_PATHS="VersionControl.Paths",t.FAVORITE_STORE_SCOPE_FAVORITE_PROJECTS="Classification.TeamProjects",t.FAVORITE_STORE_SCOPE_FAVORITE_TEAMS="Team.Teams",t.FAVORITE_STORE_SCOPE_FAVORITE_VC_REPOSITORIES="VersionControl.Repositories",t.FAVORITE_STORE_SCOPE_FAVORITE_TEST_PLAN="TestManagement.Plans",t}(w);t.FavoriteStore=rt,function(n){function t(n,t,i,r){var u=o.TfsContext.getDefault();t=n+t;l.getCollectionService(s.WebSettingsService).beginWriteSetting("/"+t,i,s.WebSettingsScope.User,r)}function i(n,i,r,u){t(n,i,r,u)}function r(n,i,r,u){t(n,i,r,u)}function u(n,i,r,u){t(n,i,r,u)}n.saveTeamUserStringSetting=i;n.saveTeamUserNumberSetting=r;n.saveTeamUserBoolSetting=u}(et=t.ContextUtils||(t.ContextUtils={}));ut=function(){function n(){}return n._combineUri=function(t,i){return n._ensureUriReadyForAppend(t)+i},n._ensureUriReadyForAppend=function(n){return n.lastIndexOf("/")===n.length-1?n:n+"/"},n.browserRequiresParamEncoding=function(){return e.BrowserCheckUtils.isMsie()&&parseInt(e.BrowserCheckUtils.getVersion(),10)<10},n.beginBuildUri=function(t,i,r,u,f,e){u;var a=n.ALM_SCHEME+t+"/"+i,s,l,v=n.browserRequiresParamEncoding();u=u||[];r&&(s=o.TfsContext.getDefault(),u.splice(0,0,{name:n.COLLECTION_PARAM_NAME,value:s.navigation.collection.uri}));l=n.buildQueryParameterString(u);v?h.getMSJSON(s.getActionUrl("Base64EncodeValue","common",{area:"api"}),{value:n.buildQueryParameterString(u,v)},function(t){f.call(this,a+l+"&"+n.ENCODED_PARAM_NAME+"="+t)},e):f.call(this,a+l)},n.buildFeedbackClientUri=function(t){var i,u=[],r=o.TfsContext.getDefault();return i=r.navigation.publicAccessPoint.scheme==="https"?n.MFBCLIENTS_SCHEME:n.MFBCLIENT_SCHEME,i+=r.navigation.publicAccessPoint.authority+r.navigation.collection.vDir,i+=n.PROJECT_PARAM_NAME+":"+r.navigation.project,u.push({name:n.FEEDBACK_REQUEST_IDS_PARAM_NAME,value:t.join(",")}),i+n.buildQueryParameterString(u)},n.buildQueryParameterString=function(n,t){var i="",r;return $.each(n,function(u){r=n[u];i+=u===0?"?":"&";i+=encodeURIComponent(r.name)+"=";i+=t||r.doNotEncode?r.value:encodeURIComponent(r.value)}),i},n.ALM_SCHEME="tfs://",n.COLLECTION_PARAM_NAME="cn",n.PROJECT_PARAM_NAME="p",n.WORK_ITEM_ID_PARAM_NAME="wid",n.MFBCLIENT_SCHEME="mfbclient://",n.MFBCLIENTS_SCHEME="mfbclients://",n.FEEDBACK_REQUEST_IDS_PARAM_NAME="rid",n.ENCODED_PARAM_NAME="__params",n}();t.AlmUriBuilder=ut;ft=function(){function n(){}return n.launchUri=function(n){var t=e.BrowserCheckUtils.isMsie()&&parseInt(e.BrowserCheckUtils.getVersion(),10)>=10;t||window.navigate?a.getService().performAction(a.CommonActions.ACTION_WINDOW_NAVIGATE,{url:n}):a.getService().performAction(a.CommonActions.ACTION_WINDOW_OPEN,{url:n,target:"_blank"})},n}();t.AlmUriManager=ft;i.tfsModuleLoaded("TFS.OM.Common",t)});

define("VSSPreview/Utilities/PromiseUtils",["require","exports"],function(n,t){function r(n,t,i){return new Promise(function(r,u){var f=setTimeout(function(){u(i==null?"Timed out after ".concat(t," ms."):i)},t);n.then(function(n){r(n);clearTimeout(f)},function(n){u(n);clearTimeout(f)})})}function i(n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(t){setTimeout(t,n)})]})})}function u(n,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,Promise.all([n,i(t)])];case 1:return[2,r.sent()[0]]}})})}function f(n){var t=new Array(n.length);return new Promise(function(i){for(var u=0,f=function(r){var f=n[r];f.then(function(n){t[r]={state:"fulfilled",value:n}},function(n){t[r]={state:"rejected",reason:n}}).then(function(){++u===n.length&&i(t)})},r=0;r<n.length;++r)f(r)})}function e(n){return n instanceof Promise?n:new Promise(function(t,i){n.then(t,i)})}function o(){var n,t,i=new Promise(function(i,r){n=i;t=r});return{resolve:n,reject:t,promise:i}}Object.defineProperty(t,"__esModule",{value:!0});t.defer=t.toNativePromise=t.allSettled=t.delay=t.wait=t.timeout=void 0;t.timeout=r;t.wait=i;t.delay=u;t.allSettled=f;t.toNativePromise=e;t.defer=o});

define("WorkItemTracking/Scripts/MruClassificationPicker/Actions/ClassificationFieldsMruSettingsUtils",["require","exports","VSS/Settings/Services","VSS/Utils/Array","VSSPreview/Utilities/PromiseUtils"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.ClassificationFieldsMruSettingsUtils=void 0,function(n){n.SettingsKey="ClassificationFieldsMru";n.AreaPathMruKey="AreaPath";n.IterationPathMruKey="IterationPath";n.MruLength=5}(f||(f={}));e=function(){function n(){this._settingsService=i.getService()}return n.prototype.readMru=function(n){return u.toNativePromise(this._settingsService.getEntriesAsync(f.SettingsKey,0,"project",n))},n.prototype.parseMru=function(n,t){return{projectId:n,areaPathMru:t&&t.value&&t.value[f.AreaPathMruKey]||[],iterationPathMru:t&&t.value&&t.value[f.IterationPathMruKey]||[]}},n.prototype.getMru=function(n){var t=this;return this.readMru(n).then(function(i){return t.parseMru(n,i)})},n.prototype.updateAreaPathMru=function(n,t){var i=this;return this.getMru(n).then(function(r){var e=i._buildNewMru(r.areaPathMru,t),o={};return o["".concat(f.SettingsKey,"/").concat(f.AreaPathMruKey)]=e,u.toNativePromise(i._settingsService.setEntries(o,0,"project",n).then(function(){return e}))})},n.prototype.updateIterationPathMru=function(n,t){var i=this;return this.getMru(n).then(function(r){var e=i._buildNewMru(r.iterationPathMru,t),o={};return o["".concat(f.SettingsKey,"/").concat(f.IterationPathMruKey)]=e,u.toNativePromise(i._settingsService.setEntries(o,0,"project",n).then(function(){return e}))})},n.prototype._buildNewMru=function(n,t){if(!t||t.length===0)return n;var u=r.unique(t),e=r.subtract(n,u),i=u.concat(e);return i.splice(f.MruLength,i.length-f.MruLength),i},n}();t.ClassificationFieldsMruSettingsUtils=e});

define("WorkItemTracking/Scripts/MruClassificationPicker/Actions/ClassificationFieldsMruActionsCreator",["require","exports","VSS/Error","VSS/Flux/Action","WorkItemTracking/Scripts/MruClassificationPicker/Actions/ClassificationFieldsMruSettingsUtils"],function(n,t,i,r,u){var f,e;Object.defineProperty(t,"__esModule",{value:!0});t.ClassificationFieldsMruActionsCreator=t.ActionsHub=void 0;f=function(){function n(){this.InitializeClassificationFieldsMru=new r.Action;this.SetAreaPathMru=new r.Action;this.SetIterationPathMru=new r.Action}return n}();t.ActionsHub=f;e=function(){function n(n,t){this._actionsHub=n;this._classificationFieldsMruDataProvider=t;this._mruSettingsUtils=new u.ClassificationFieldsMruSettingsUtils}return n.prototype.initializeClassificationFieldsMru=function(n){var t=this;this._classificationFieldsMruDataProvider.isLoaded(n)?this._actionsHub.InitializeClassificationFieldsMru.invoke(null):this._classificationFieldsMruDataProvider.isLoading(n)||(this._classificationFieldsMruDataProvider.setLoading(n,!0),this._mruSettingsUtils.readMru(n).then(function(i){t._classificationFieldsMruDataProvider.setLoading(n,!1);var r=t._mruSettingsUtils.parseMru(n,i);t._actionsHub.InitializeClassificationFieldsMru.invoke(r)},this._logError))},n.prototype.addToAreaPathMru=function(n,t){var i=this;this._mruSettingsUtils.updateAreaPathMru(n,t).then(function(t){i._actionsHub.SetAreaPathMru.invoke({projectId:n,values:t})},this._logError)},n.prototype.addToIterationPathMru=function(n,t){var i=this;this._mruSettingsUtils.updateIterationPathMru(n,t).then(function(t){i._actionsHub.SetIterationPathMru.invoke({projectId:n,values:t})},this._logError)},n.prototype._logError=function(n){i.publishErrorToTelemetry(n)},n}();t.ClassificationFieldsMruActionsCreator=e});

define("WorkItemTracking/Scripts/MruClassificationPicker/Stores/ClassificationFieldsMruStore",["require","exports","VSS/Flux/Store","WorkItemTracking/Scripts/MruClassificationPicker/Actions/ClassificationFieldsMruActionsCreator"],function(n,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});t.ClassificationFieldsMruStore=void 0;var u=function(n){function t(t){var i=__construct(this,n,[]);for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);return i._items={},i._isLoadingMap={},t.InitializeClassificationFieldsMru.addListener(function(n){n&&(i._items[n.projectId.toLowerCase()]=n,i.emitChanged())}),t.SetAreaPathMru.addListener(function(n){i.isLoaded(n.projectId)&&n.values&&(i._items[n.projectId.toLowerCase()].areaPathMru=n.values);i.emitChanged()}),t.SetIterationPathMru.addListener(function(n){i.isLoaded(n.projectId)&&n.values&&(i._items[n.projectId.toLowerCase()].iterationPathMru=n.values);i.emitChanged()}),i}return __extends(t,n),t.getDefaultFluxContext=function(){if(!this._defaultFluxContext){var n=new r.ActionsHub,i=new t(n),u=new r.ClassificationFieldsMruActionsCreator(n,i);this._defaultFluxContext={store:i,actionsCreator:u}}return this._defaultFluxContext},t.prototype.setLoading=function(n,t){this._isLoadingMap[n.toLowerCase()]=t},t.prototype.isLoading=function(n){return this._isLoadingMap[n.toLowerCase()]},t.prototype.isLoaded=function(n){return this._items[n.toLowerCase()]!=null},t.prototype.getAreaPathMru=function(n){return this.isLoaded(n)?this._items[n.toLowerCase()].areaPathMru:null},t.prototype.getIterationPathMru=function(n){return this.isLoaded(n)?this._items[n.toLowerCase()].iterationPathMru:null},t}(i.Store);t.ClassificationFieldsMruStore=u});

define("WorkItemTracking/Scripts/TFS.UI.Tags.Constants",["require","exports"],function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.TAG_ELLIPSIS=t.TAG_SPLITTING_SEPARATOR=t.TAG_FORMATTING_SEPARATOR=t.TAG_CHARACTER_LIMIT=void 0;t.TAG_CHARACTER_LIMIT=30;t.TAG_FORMATTING_SEPARATOR="; ";t.TAG_SPLITTING_SEPARATOR=/[,;]/;t.TAG_ELLIPSIS="..."});

var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(e){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=e[0]&2?u["return"]:e[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;(u=0,i)&&(e=[e[0]&2,i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(e[0]===6&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(o){e=[6,o];u=0}finally{f=i=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e};define("Presentation/Scripts/TFS/FeatureRef/TFS.TagService",["require","exports","Presentation/Scripts/TFS/TFS.Service","VSS/Context","VSS/Contributions/Services","VSS/Diag","VSS/Service","VSS/Settings/Services","VSSPreview/Utilities/PromiseUtils","VSS/Utils/Array"],function(n,t,i,r,u,f,e,o,s,h){var c,l;Object.defineProperty(t,"__esModule",{value:!0});t.TagService=t.TagsKind=void 0,function(n){n[n.WorkItem=0]="WorkItem";n[n.PullRequest=1]="PullRequest"}(c=t.TagsKind||(t.TagsKind={}));l=function(n){function t(){var t=n.call(this)||this;return t._tagNamesCache={},t}return __extends(t,n),t.prototype.beginQueryTagNames=function(n,i,o,s){var v=this,y,h,l,a;if(f.Debug.assertParamIsFunction(o,"callback"),f.Debug.assertParamIsStringNotEmpty(i,"projectScope"),y=n===c.WorkItem?t.WORK_ITEM_ARTIFACT_KIND:t.PULL_REQUEST_LABELS_ARTIFACT_KIND,h=this._getCacheKey(n,i),this._tagNamesCache.hasOwnProperty(h)){f.logTracePoint("TagService.queryTagNamesCached.start");l=this._tagNamesCache[h];f.logTracePoint("TagService.queryTagNamesCached.completed");o(l);return}f.logTracePoint("TagService.tagNamesDataProvider.start");a=n===c.WorkItem?t.WORK_ITEM_TAGS_DATA_PROVIDER_ID:t.PULL_REQUEST_LABELS_DATA_PROVIDER_ID;e.getService(u.WebPageDataService,r.getDefaultWebContext()).getDataAsync(a,null,{projectScope:i}).then(function(n){var t=n||[];v._tagNamesCache[h]=t;f.logTracePoint("TagService.tagNamesDataProvider.completed");o(t)},s)},t.prototype.invalidateCacheForArtifactKinds=function(n,t){var i=this._getCacheKey(n,t);this._tagNamesCache.hasOwnProperty(i)&&delete this._tagNamesCache[i]},t.prototype.addTagsToCacheForArtifactKinds=function(n,t,i){var o=this._getCacheKey(t,i),u,r,f,e;if(this._tagNamesCache.hasOwnProperty(o))for(u=this._tagNamesCache[o],r=0,f=n;r<f.length;r++)e=f[r],u.indexOf(e)===-1&&u.push(e)},t.prototype._getCacheKey=function(n,t){return"".concat(t.toLowerCase(),"-").concat(n)},t.prototype.getTagsMru=function(){var n=this;return this._tagsMruCache?Promise.resolve(this._tagsMruCache.slice()):s.toNativePromise(o.getService().getEntriesAsync(t.TAGS_MRU_SETTINGS_KEY,0).then(function(i){var r=i&&i.value&&i.value[t.TAGS_MRU_TAGS_KEY]||[];return n._tagsMruCache=h.subtract(r,[";;;;;",";SUGGESTIONS;"]),n._tagsMruCache.slice()}))},t.prototype.addTagsMru=function(n){return __awaiter(this,void 0,void 0,function(){var u,f,i,e,r;return __generator(this,function(c){switch(c.label){case 0:return[4,this.getTagsMru()];case 1:return u=c.sent(),f=h.subtract(u,n),i=n.concat(f),i.splice(t.TAGS_MRU_MAX_LENGTH),this._tagsMruCache=i,e="".concat(t.TAGS_MRU_SETTINGS_KEY,"/").concat(t.TAGS_MRU_TAGS_KEY),r={},r[e]=i,[2,s.toNativePromise(o.getService().setEntries(r,0))]}})})},t.prototype.dispose=function(){},t.ServiceLifetime=e.ServiceLifetime.ClearOnFPS,t.WORK_ITEM_ARTIFACT_KIND="E7626DBD-6075-416C-A31E-DFD48FE3CFDE",t.PULL_REQUEST_LABELS_ARTIFACT_KIND="F22387E3-984E-4C52-9C6D-FBB8F14C812D",t.WORK_ITEM_TAGS_DATA_PROVIDER_ID="ms.vss-work-web.work-item-tag-suggestions-data-provider",t.PULL_REQUEST_LABELS_DATA_PROVIDER_ID="ms.vss-code-web.pull-request-label-suggestions-data-provider",t.TAGS_MRU_SETTINGS_KEY="TagsMru",t.TAGS_MRU_TAGS_KEY="Tags",t.TAGS_MRU_MAX_LENGTH=5,t}(i.TfsService);t.TagService=l});

define("WorkItemTracking/Scripts/Utils/TagUtils",["require","exports","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Utils/Array","VSS/Utils/String","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","WorkItemTracking/Scripts/TFS.UI.Tags.Constants","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/FeatureRef/TFS.TagService","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common"],function(n,t,i,r,u,f,e,o,s,h,c,l){Object.defineProperty(t,"__esModule",{value:!0});t.TagUtils=void 0;var a;(function(n){function a(t,i){var e=t.getField(f.CoreField.Tags);if(e&&!e.isReadOnly()&&e.isEditable()){if(u.equals(i.fieldName+"",n.getTagsAddPseudoFieldName(e.fieldDefinition.name),!0)||u.equals(i.fieldName+"",n.AddTagsPseudoRefName,!0)){var o=n.splitAndTrimTags(e.getValue()),s=n.splitAndTrimTags(i.value),h=r.union(o,s,u.localeIgnoreCaseComparer);return e.setValue(n.formatTags(h)),s.length}if(u.equals(i.fieldName+"",n.getTagsRemovePseudoFieldName(e.fieldDefinition.name),!0)||u.equals(i.fieldName+"",n.RemoveTagsPseudoRefName,!0)){var o=n.splitAndTrimTags(e.getValue()),c=n.splitAndTrimTags(i.value),h=r.subtract(o,c,u.localeIgnoreCaseComparer);return e.setValue(n.formatTags(h)),-c.length}}return 0}function v(i){var s={},h=[],a=i.getFieldValue(f.CoreField.Tags,!0),r,e,o,c,l,v;for(a&&(h=n.splitAndTrimTags(a).sort(u.localeIgnoreCaseComparer)),r=h,i.isFieldDirty(f.CoreField.Tags)&&(r=n.splitAndTrimTags(i.getFieldValue(f.CoreField.Tags)).sort(u.localeIgnoreCaseComparer)),e=[],o=0,c=h;o<c.length;o++)l=c[o],v=r.indexOf(l),v===-1&&e.push(l);return e.length>0&&(s[n.RemoveTagsPseudoRefName]=t(e)),r.length>0&&(s[n.AddTagsPseudoRefName]=t(r)),s}function y(t){var o={added:!1,removed:!1},i=[],s=t.getFieldValue(f.CoreField.Tags,!0),e,h,c;return s&&(i=n.splitAndTrimTags(s).sort(u.localeIgnoreCaseComparer)),e=i,t.isFieldDirty(f.CoreField.Tags)&&(e=n.splitAndTrimTags(t.getFieldValue(f.CoreField.Tags)).sort(u.localeIgnoreCaseComparer)),h=r.first(e,function(n){return!r.contains(i,n)}),c=r.first(i,function(n){return!r.contains(e,n)}),o.added=!!h,o.removed=!!c,o}function p(t){var u=[],e=t.getFieldValue(f.CoreField.Tags,!0),i;return e&&(u=n.splitAndTrimTags(e)),i=[],t.isFieldDirty(f.CoreField.Tags)&&(i=n.splitAndTrimTags(t.getFieldValue(f.CoreField.Tags))),r.subtract(i,u)}function w(t){var i,r,u;o.FeatureAvailabilityService.isFeatureEnabled(s.FeatureAvailabilityFlags.WebAccessWorkItemTrackingDisableTagsMRU)||(i=n.getWorkItemAddedTags(t),i.length>0&&(r=c.TfsContext.getDefault(),u=l.ProjectCollection.getConnection(r).getService(h.TagService),u.addTagsMru(i)))}function b(n){return"".concat(n," (").concat(i.BulkEditTagsAdd,")")}function k(n){return"".concat(n," (").concat(i.BulkEditTagsRemove,")")}function d(n){var f,i,t,r,o,u;if(!n)return[];for(f=n.split(e.TAG_SPLITTING_SEPARATOR),i=[],t=0,r=f;t<r.length;t++)o=r[t],u=o.trim(),u&&i.push(u);return i}function t(n){return n.join("; ")}n.tryProcessTagsChanges=a;n.AddTagsPseudoRefName="System.Tags-Add";n.RemoveTagsPseudoRefName="System.Tags-Remove";n.getTagPseudoFieldValues=v;n.areTagsAddedRemoved=y;n.getWorkItemAddedTags=p;n.updateTagsMru=w;n.getTagsAddPseudoFieldName=b;n.getTagsRemovePseudoFieldName=k;n.splitAndTrimTags=d;n.formatTags=t})(a=t.TagUtils||(t.TagUtils={}))});

define("WorkItemTracking/Scripts/OM/WorkItemManager",["require","exports","Presentation/Scripts/TFS/MVCToDataProviderDataSources/Trace","q","VSS/Events/Action","VSS/LWP","VSS/Navigation/HubsService","VSS/Resources/VSS.Resources.Platform","VSS/Utils/String","WorkItemTracking/Scripts/MruClassificationPicker/Stores/ClassificationFieldsMruStore","WorkItemTracking/Scripts/OM/WorkItemConstants","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/Utils/TagUtils","VSS/VSS","VSS/Diag","VSS/Events/Document","VSS/Events/Handlers","VSS/Events/Services","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Utils/Core","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g){function rt(){return l.createError("Operation Canceled.",{name:c.Exceptions.OperationCanceledException})}var tt,it,nt;Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemManager=void 0;tt=f.getLWPModule("VSS/Platform/FPS");it=function(){function n(n){this.workItemManager=n}return n.prototype.workItemsChanged=function(n){if(n.change===c.WorkItemChangeType.Saved&&n.changedWorkItemLinks){var t=n.changedWorkItemLinks.filter(function(n){return!n.linkData.RemoteHostId});this.updateWorkItemLinkTargets(t);this._fireEventsForWorkItemLinkTargets(t)}},n.prototype.updateWorkItemLinkTargets=function(n){for(var t,i,u=this.workItemManager,r=0,f=n.length;r<f;r++)t=n[r],i=u.getWorkItem(t.targetId),i&&(t.command==="add"?this.addWorkItemLink(i,t):t.command==="remove"&&this.deleteWorkItemLink(i,t))},n.prototype.addWorkItemLink=function(n,t){var r=t.linkData,f=n.store.findLinkTypeEnd(r.LinkType).oppositeEnd,e=f.id,o=this.findWorkItemLink(n,t.sourceId,e),i,u;o?o.linkData["Changed Date"]=r["Changed Date"]:(i=$.extend({},r),i.ID=t.sourceId,i.LinkType=e,n.allLinks.push(new l.WorkItemLink(n,i)));n.linksUpdatedExternally();n.resetLinks();u=[g.DalFields.RelatedLinks,g.DalFields.HistoryId];n.getField(g.DalFields.Parent)&&f.id===c.CoreLinkTypes.Parent&&u.push(g.DalFields.Parent);n.fireFieldChange(u)},n.prototype.deleteWorkItemLink=function(n,t){var i,r=t.linkData,f=n.store.findLinkTypeEnd(r.LinkType).oppositeEnd,e=f.id,u;i=this.findWorkItemLink(n,t.sourceId,e);i&&(i.linkData["Revised Date"]=r["Revised Date"],i.linkData["Revised By"]=r["Revised By"]);n.linksUpdatedExternally();n.resetLinks();u=[g.DalFields.RelatedLinks,g.DalFields.HistoryId];n.getField(g.DalFields.Parent)&&f.id===c.CoreLinkTypes.Parent&&u.push(g.DalFields.Parent);n.fireFieldChange(u)},n.prototype.findWorkItemLink=function(n,t,i){for(var f=n.getLinks(),r,u=0,e=f.length;u<e;u++)if(r=f[u],r instanceof l.WorkItemLink&&r.getTargetId()===t&&r.getLinkType()===i)return r},n.prototype._fireEventsForWorkItemLinkTargets=function(n){var u=this,t={},i,r;n.forEach(function(n){var i=n.targetId,r=u.workItemManager.getWorkItem(i);r&&(t[i]||(t[i]=[]),t[i].push(n))});for(i in t)r=this.workItemManager.getWorkItem(Number(i)),r.fireWorkItemLinksUpdatedByOtherWorkItem({changedWorkItemLinks:t[i]})},n}();nt=function(){function n(t){var i=this;this.hasDirtyManager=!1;this._downloading=!1;this._postXHRNavigate=function(){i.resetDirtyWorkItems();r.fcall(function(){return i.registerRunningDocumentEntry()})};this._deletingOrRestoringMessageDelegate=function(){if(!p.getRunningDocumentsTable().isModified()&&i.store.isDeletingOrRestoring())return k.DeleteOrRestoreConfirmationMessage};this._showDirtyConfirmationDialog=function(n){var r=n.unloadText,t=n.detail;v.requireModules(["VSS/Controls/Dialogs"]).spread(function(n){var u={dialogClass:"dirty-workitem-confirmation-dialog",defaultButton:n.MessageDialog.buttons.cancel.id,escapeButton:n.MessageDialog.buttons.cancel,noDefaultButton:!0,noAutoCta:!0,buttons:[{id:"discard",text:k.DiscardChanges,reject:!1,style:"cta savebtn"},n.MessageDialog.buttons.cancel,],title:o.UnsavedChangesMessageTitle},f=function(){t.data.skipUnloadText=!0;tt.FastPageSwitch(t.pageContext,t.href,t.recordHistoryEntry,t.data)},e=r+"\n"+k.UnsavedWorkItemActionsMessage,s=$("<div/>").css("white-space","pre-wrap").html(e);n.showMessageDialog(s,u).then(function(){i.resetDirtyWorkItems();f()});$(".dirty-workitem-confirmation-dialog .savebtn").focus()})};this.store=t;this._cache={};this._pinCounts={};this._pendingWorkitems={};this._workItemChangedDelegate=d.delegate(this,this.onWorkItemChanged);this._events=new w.NamedEventCollection;this._linkManager=new it(this);this._updateClassificationMruThrottledDelegate=d.throttledDelegate(this,100,this._updateClassificationMru);this._cleanerTimer=window.setInterval(function(){i.cleanCache()},n.cacheCleanupTimeout);u.getService().registerActionWorker(u.CommonActions.SHOW_DIRTY_CONFIRMATION_DIALOG,this._showDirtyConfirmationDialog);b.getService().attachEvent(e.HubEventNames.PostXHRNavigate,this._postXHRNavigate);this.registerRunningDocumentEntry()}return n._initialize=function(){b.getService().attachEvent(c.Actions.WORKITEM_DELETED,n._onWorkItemDeleted);b.getService().attachEvent(c.Actions.WORKITEM_RESTORED,n._onWorkItemRestored);b.getService().attachEvent(c.Actions.WORKITEM_DESTROYED,n._onWorkItemDestroyed);b.getService().attachEvent(c.Actions.WORKITEM_DISCARDED,n._onWorkItemDiscarded);b.getService().attachEvent(c.Actions.WORKITEM_ID_UPDATED,n._onWorkItemIdUpdated);b.getService().attachEvent(c.Actions.WORKITEM_COPIED,n._onWorkItemCopied)},n.get=function(t){var i=t&&t.relatedData&&t.relatedData[c.RelatedDataKeys.WORKITEM_MANAGER_KEY];return i||(i=new n(t),t.relatedData[c.RelatedDataKeys.WORKITEM_MANAGER_KEY]=i),i},n._onWorkItemDeleted=function(t,i){var o=n.get(t),r=o.getWorkItem(i.workItemId),h,e,u,s;if(r){h=r.getField(g.CoreField.IsDeleted);h.setValue(!0,!0);r.fireWorkItemDeleted();var c=[i.workItemId],a=[],v=r.getLinks(),f=void 0;for(e=0;e<v.length;e++)f=v[e],f instanceof l.WorkItemLink&&(u=f.getTargetId(),s=f.getSourceId(),a.push(u===r.id?s:u),c.push(u===r.id?s:u));o.removeWorkItems(c);o.beginGetWorkItems(a,$.noop)}},n._onWorkItemRestored=function(t,i){n._removeWorkItemFromManager(t,i.workItemId)},n._onWorkItemDestroyed=function(t,i){n._removeWorkItemFromManager(t,i.workItemId)},n._removeWorkItemFromManager=function(t,i){var r=n.get(t),u=r.getWorkItem(i);u&&r.removeWorkItem(u)},n._onWorkItemDiscarded=function(t){var i=n.get(t.store);i.removeWorkItem(t)},n._onWorkItemIdUpdated=function(t){var i=n.get(t.store);i.updatePinWithSavedId(t)},n._onWorkItemCopied=function(t){var i=n.get(t.store);i.onWorkItemChanged(i,{workItem:t,change:c.WorkItemChangeType.Created});i.setWorkItem(t)},n.prototype.registerRunningDocumentEntry=function(){var n=this;this._runningDocumentEntry&&(p.getRunningDocumentsTable().remove(this._runningDocumentEntry),$(window).off("beforeunload",this._deletingOrRestoringMessageDelegate));this._runningCommentDocumentEntry&&p.getRunningDocumentsTable().remove(this._runningCommentDocumentEntry);this._runningDocumentEntry=p.getRunningDocumentsTable().add(this.store.path()+"/WorkItemManager",{isDirty:function(){return n.isDirty(!0)},beginSave:function(t,i){return n.beginSaveDirtyWorkItems(t,i)},getDirtyDocumentTitles:function(t){return n.getDirtyWorkItemTitles(t)}});this._runningCommentDocumentEntry=p.getRunningDocumentsTable().add(this.store.path()+"/WorkItemManager/CommentManager",{isDirty:function(){return n.isCommentDirty()},getDirtyDocumentTitles:function(){return n.getDirtyCommentTitles()}});$(window).on("beforeunload",this._deletingOrRestoringMessageDelegate)},n.prototype.getDirtyCommentTitles=function(){for(var i,n=0,t=this.getManagedWorkItems();n<t.length;n++)if(i=t[n],i.getIsCommentDirty()&&!i.isDirty())return[k.UnsavedComment];return[]},n.prototype.getDirtyWorkItemTitles=function(n){for(var t,i=[],u=this.getDirtyWorkItems(),r=0,f=Math.min(n,u.length);r<f;r++)t=u[r],t.getIsCommentDirty()?i.push(s.format(k.WithUnsavedComment,t.getCaption(!1))):i.push(t.getCaption(!1));return i},n.prototype.resetDirtyWorkItems=function(){for(var n,r=this.getDirtyWorkItems(),t=0,i=r;t<i.length;t++)n=i[t],n.reset(),n.isNew()&&this.removeWorkItem(n)},n.prototype.dispose=function(){b.getService().detachEvent(e.HubEventNames.PostXHRNavigate,this._postXHRNavigate);u.getService().unregisterActionWorker(u.CommonActions.SHOW_DIRTY_CONFIRMATION_DIALOG,this._showDirtyConfirmationDialog);this._runningDocumentEntry&&(p.getRunningDocumentsTable().remove(this._runningDocumentEntry),$(window).off("beforeunload",this._deletingOrRestoringMessageDelegate));this._runningCommentDocumentEntry&&p.getRunningDocumentsTable().remove(this._runningCommentDocumentEntry);this._cleanerTimer&&(window.clearInterval(this._cleanerTimer),this._cleanerTimer=null)},n.prototype.invalidateCache=function(n){for(var t,r,i=0,u=n.length;i<u;i+=1)r=n[i],t=this._cache[r],t&&(this.isPinned(r)||t.workItem.isDirty()||this.removeWorkItem(t.workItem))},n.prototype.cleanCache=function(){var i,u=(new Date).getTime(),r=this._cache;for(var t in r)r.hasOwnProperty(t)&&(i=this._cache[t],u-i.timeStamp>n.cacheCleanupTimeout&&!this.isPinned(Number(t))&&(i.workItem.isDirty()||delete r[t]))},n.prototype.resetCache=function(){this._pinCounts={};this._cache={};this._pendingWorkitems={}},n.prototype.getLastRetrievedWorkitemCIData=function(){return this._lastRetrievedWorkitemCIData},n.prototype.updatePinWithSavedId=function(n){if(n.tempId<0){var r=n.tempId,t=n.id||0,i=this._pinCounts[r]||0;i>0&&t>0&&(this._pinCounts[t]=i)}},n.prototype.pin=function(n){if(!(n instanceof l.WorkItem))throw new Error("Invalid argument type: 'workItem'");n.id>0&&(this._touchCache(n.id,n),this._incrementPinCount(n.id));n.tempId<0&&(this._touchCache(n.tempId,n),this._incrementPinCount(n.tempId))},n.prototype.unpin=function(n){if(!(n instanceof l.WorkItem))throw new Error("Invalid argument type: 'workItem'.");n.id>0&&(this._touchCache(n.id,n),this._decrementPinCount(n.id));n.tempId<0&&(this._touchCache(n.tempId,n),this._decrementPinCount(n.tempId))},n.prototype.isPinned=function(n){return(this._pinCounts[n]||0)>0},n.prototype.createWorkItem=function(n,t,r){try{var u=n.create(t,r);this.onWorkItemChanged(this,{workItem:u,change:c.WorkItemChangeType.Created});return this.setWorkItem(u),u}catch(f){n instanceof l.WorkItemType||i.traceMessage(g.WITCommonConstants.WorkItemTrackingArea,"WorkItemManager",g.WITCommonConstants.WorkItemTypes,"passed object is of type ".concat(typeof n," ").concat(f.message));throw f;}},n.prototype.logWorkItemTypesData=function(n){var r=function(){var n=new WeakSet;return function(t,i){if(typeof i=="object"&&i!==null){if(n.has(i))return;n.add(i)}return i}},t;try{t=JSON.stringify(n,r());i.traceMessage(g.WITCommonConstants.WorkItemTrackingArea,"WorkItemManager",g.WITCommonConstants.WorkItemTypes,"object: ".concat(t))}catch(u){i.traceMessage(g.WITCommonConstants.WorkItemTrackingArea,"WorkItemManager",g.WITCommonConstants.WorkItemTypes,"".concat(u.message))}},n.prototype.beginGetWorkItem=function(n,t,i,r,u,f){var s=this,e,o;this.getManagedWorkItems().length>0&&(this._cache[n]?u&&(u>this._cache[n].workItem.revision||u===-1)?this.invalidateCache([n]):(e=(new Date).getTime()-this._cache[n].timeStamp,this._lastRetrievedWorkitemCIData={CacheHit:"true",TimeInCache:e.toString()}):this._lastRetrievedWorkitemCIData={CacheHit:"false"});o={isDeleted:r,includeExtensionFields:f};this.beginGetWorkItems([n],function(n){typeof t=="function"&&t.call(s,n&&n[0])},i,o)},n.prototype.beginGetWorkItems=function(n,t,i,r){var e=this,h=[],s={},f={},u=0,l=c.PageSizes.SAVE,o;r=r||{};r.pageSize&&Number(r.pageSize)>0&&(l=r.pageSize);var a=function(){!o&&u<=0&&(o=!0,typeof t=="function"&&t.call(e,$.map(n,function(n){return s[n]})))},p=function(n,t){u--;delete f[n];s[n]=t;a()},w=function(){$.each(f,function(n,t){f.hasOwnProperty(n)&&e._cancelPendingGetWorkItem(n,t)});u=0;f={}},y=function(n){o||(o=!0,w(),v.handleError(n,i,e))},b=function(n,t){u--;delete f[n];y(t)},k=function(){o||y(rt())};$.each(n,function(n,t){var i=e.getWorkItem(t);i?(h.push(t),s[t]=i):(u++,f[t]=e._pendWorkItem(t,p,b))});r.cancelable&&r.cancelable.register(k);typeof r.pageOperationCallback=="function"&&h.length>0&&r.pageOperationCallback($.map(h,function(n){return s[n]}),u===0);u?this._downloadPendingWorkItems(r.pageOperationCallback,l,r.isDeleted,r.includeExtensionFields,r.retryOnExceedingJsonLimit,r.excludeFromUserRecentActivity):a()},n.prototype.getWorkItem=function(n){var i,t=this._cache[n];return t&&(t.timeStamp=(new Date).getTime(),i=t.workItem),i},n.prototype.bind=function(n){if(!(n instanceof l.WorkItem))throw new Error("Invalid argument type: 'workItem'.");n.attachWorkItemChanged(this._workItemChangedDelegate)},n.prototype.unbind=function(n){if(!(n instanceof l.WorkItem))throw new Error("Invalid argument type: 'workItem'.");n.detachWorkItemChanged(this._workItemChangedDelegate)},n.prototype.setWorkItem=function(n){var t;if(!(n instanceof l.WorkItem))throw new Error("Invalid argument type: 'workItem'.");this._setManager(n);t={workItem:n,timeStamp:(new Date).getTime()};n.id>0&&(this._cache[n.id]=t);n.tempId<0&&(this._cache[n.tempId]=t)},n.prototype.removeWorkItem=function(n){if(!(n instanceof l.WorkItem))throw new Error("Invalid argument type: 'workItem'.");n.id>0&&(delete this._cache[n.id],delete this._pinCounts[n.id]);n.tempId<0&&(delete this._cache[n.tempId],delete this._pinCounts[n.tempId]);this._clearManager(n)},n.prototype.removeWorkItems=function(n){var t=this;n.forEach(function(n){var i=t.getWorkItem(n);i&&t.removeWorkItem(i)})},n.prototype.getManagedWorkItems=function(){var r=[],n=this._cache,t;for(var i in n)if(n.hasOwnProperty(i)){if(t=n[i].workItem,Number(i)<0&&t.id!==0)continue;r.push(t)}return r},n.prototype.getUnmanagedWorkItems=function(){var r=[],n=this._cache;for(var t in n)if(n.hasOwnProperty(t)){if(Number(t)>=0)continue;var i=n[t].workItem,u=i.id,f=i.tempId;u>0&&f<0&&r.push(i)}return r},n.prototype.getDirtyWorkItems=function(){for(var i=[],t=this.getManagedWorkItems(),n=0,r=t.length;n<r;n++)t[n].isDirty()&&i.push(t[n]);return i},n.prototype.beginSaveDirtyWorkItems=function(n,t){return this.store.beginSaveWorkItemsBatch(this.getDirtyWorkItems(),n,t)},n.prototype.onWorkItemChanged=function(n,t){var i,r;t.change===c.WorkItemChangeType.PreSave&&(i=t.workItem,i&&i.isDirty()&&(this._populateWorkItemClassificationNodes(i),this._updateClassificationMruThrottledDelegate(),this._updateTagsMru(i)));t.change===c.WorkItemChangeType.Saved&&this.setWorkItem(t.workItem);this._linkManager.workItemsChanged(t);this._events.invokeHandlers("work-item-changed",this,t);(t.change===c.WorkItemChangeType.Opened||t.change===c.WorkItemChangeType.Refresh||t.change===c.WorkItemChangeType.SaveCompleted||t.change===c.WorkItemChangeType.Deleted)&&(r=f.getLWPService("IVssContributionEventService"),r&&r.fireEvent("workitem-activity-updated"))},n.prototype.attachWorkItemChanged=function(n){this._events.subscribe("work-item-changed",n)},n.prototype.detachWorkItemChanged=function(n){this._events.unsubscribe("work-item-changed",n)},n.prototype.isDirty=function(n){for(var i=this.getManagedWorkItems(),t=0,r=i.length;t<r;t++)if(i[t].isDirty(n))return!0;return!1},n.prototype.isCommentDirty=function(){for(var t=this.getManagedWorkItems(),n=0,i=t.length;n<i;n++)if(t[n].getIsCommentDirty()&&!t[n].isDirty())return!0;return!1},n.prototype._populateWorkItemClassificationNodes=function(n){var i=n.getUpdateData(),r=i&&i.payload&&i.payload.fields;if(r){var u=this.store.getFieldDefinition(g.CoreFieldRefNames.AreaId),f=this.store.getFieldDefinition(g.CoreFieldRefNames.IterationId),t=n.project.guid,e=r[u.id],o=r[f.id];u&&e&&(this._areaIdsMap||(this._areaIdsMap={}),this._areaIdsMap[t]||(this._areaIdsMap[t]=[]),this._areaIdsMap[t].push(e));f&&o&&(this._iterationIdsMap||(this._iterationIdsMap={}),this._iterationIdsMap[t]||(this._iterationIdsMap[t]=[]),this._iterationIdsMap[t].push(o))}},n.prototype._updateClassificationMru=function(){var f=h.ClassificationFieldsMruStore.getDefaultFluxContext(),t,r,i,u,n;if(this._areaIdsMap){for(t=0,r=Object.keys(this._areaIdsMap);t<r.length;t++)n=r[t],this._areaIdsMap[n]&&this._areaIdsMap[n].length>0&&f.actionsCreator.addToAreaPathMru(n,this._areaIdsMap[n]);this._areaIdsMap=null}if(this._iterationIdsMap){for(i=0,u=Object.keys(this._iterationIdsMap);i<u.length;i++)n=u[i],this._iterationIdsMap[n]&&this._iterationIdsMap[n].length>0&&f.actionsCreator.addToIterationPathMru(n,this._iterationIdsMap[n]);this._iterationIdsMap=null}},n.prototype._updateTagsMru=function(n){a.TagUtils.updateTagsMru(n)},n.prototype._setManager=function(n){var t=n.relatedData[c.RelatedDataKeys.WORKITEM_MANAGER_KEY];t!==this&&(t&&t.unbind(n),n.relatedData[c.RelatedDataKeys.WORKITEM_MANAGER_KEY]=this,this.bind(n))},n.prototype._clearManager=function(n){var t=n.relatedData[c.RelatedDataKeys.WORKITEM_MANAGER_KEY];t===this&&(n.relatedData[c.RelatedDataKeys.WORKITEM_MANAGER_KEY]=null,this.unbind(n))},n.prototype._touchCache=function(n,t){var i=this._cache[n];i&&i.workItem===t&&(i.timeStamp=(new Date).getTime())},n.prototype._decrementPinCount=function(n){var t=this._pinCounts[n]||0;t--;t<=0?delete this._pinCounts[n]:this._pinCounts[n]=t},n.prototype._incrementPinCount=function(n){var t=this._pinCounts[n]||0;t++;this._pinCounts[n]=t},n.prototype._pendWorkItem=function(n,t,i){var r=this,u=this._pendingWorkitems[n],f=function(n,i){if(delete r._pendingWorkitems[n],!r.getWorkItem(n)){r.setWorkItem(i);r.onWorkItemChanged(r,{workItem:i,change:c.WorkItemChangeType.Opened})}t.call(r,n,i)},e=function(n,t){delete r._pendingWorkitems[n];i.call(r,n,t)};return u?u.cbQueue.register(f,e):(u={id:n,cbQueue:v.queueCallbacks(this,f,e)},this._pendingWorkitems[n]=u,u.cookie)},n.prototype._cancelPendingGetWorkItem=function(n,t){var i=this._pendingWorkitems[n];i&&(i.cbQueue.unregister(t),i.cbQueue.count()===0&&delete this._pendingWorkitems[n])},n.prototype._downloadPendingWorkItems=function(t,i,r,u,f,e){var s=this,o=[],h;this._downloading||($.each(this._pendingWorkitems,function(n,t){if(s._pendingWorkitems.hasOwnProperty(n)&&(o.push(t),o.length>i))return!1}),o.length&&(this._downloading=!0,h=this,this.store.beginGetWorkItems($.map(o,function(n){return n.id}),function(n){var c={},l;try{$.each(n,function(n,t){c[t.id]=t});$.each(o,function(n,t){t.cbQueue.finish(t.id,c[t.id])});t&&typeof t=="function"&&(l=Object.keys(h._pendingWorkitems).length,t(n,l===0))}finally{s._downloading=!1;s._downloadPendingWorkItems(t,i,r,u,f,e)}},function(h){try{f===!0&&i>=2*n.MINIMUM_PAGE_SIZE&&h.type===c.Exceptions.InvalidOperationException?i/=2:$.each(o,function(n,t){t.cbQueue.error(t.id,h)})}finally{s._downloading=!1;s._downloadPendingWorkItems(t,i,r,u,f,e)}},r,u,e)))},n.cacheCleanupTimeout=6e5,n.MINIMUM_PAGE_SIZE=10,n}();t.WorkItemManager=nt;nt._initialize()});

define("WorkItemTracking/Scripts/Utils/WorkItemMentionPreSaveProcessor",["require","exports","WorkItemTracking/Scripts/OM/WorkItemConstants","Presentation/Scripts/TFS/TFS.OM.Common","WorkItemTracking/Scripts/TFS.WorkItemTracking","WorkItemTracking/Scripts/OM/WorkItemManager","WorkItemTracking/Scripts/Utils/RelatedLinksUtils"],function(n,t,i,r,u,f,e){Object.defineProperty(t,"__esModule",{value:!0});t.WorkItemMentionPreSaveProcessor=void 0;var o=function(){function n(){this._onWorkItemChanged=function(n,t){if(t&&t.change===i.WorkItemChangeType.PreSave){var r=t.workItem;e.parseMentionsFromHtmlFields(r)}};var n=r.ProjectCollection.getDefaultConnection().getService(u.WorkItemStore);this._workItemManager=f.WorkItemManager.get(n)}return n.prototype.attachWorkItemChanged=function(){this._workItemManager.attachWorkItemChanged(this._onWorkItemChanged)},n.prototype.detachWorkItemChanged=function(){this._workItemManager.detachWorkItemChanged(this._onWorkItemChanged)},n}();t.WorkItemMentionPreSaveProcessor=o});

if (window.performance && window.performance.mark) { window.performance.mark('endLoadBundleInner-async'); }